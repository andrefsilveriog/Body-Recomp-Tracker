var T1=Object.defineProperty;var S1=(t,e,n)=>e in t?T1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var we=(t,e,n)=>S1(t,typeof e!="symbol"?e+"":e,n);function I1(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function k1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nx={exports:{}},ud={},ix={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hc=Symbol.for("react.element"),C1=Symbol.for("react.portal"),A1=Symbol.for("react.fragment"),P1=Symbol.for("react.strict_mode"),N1=Symbol.for("react.profiler"),R1=Symbol.for("react.provider"),D1=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),j1=Symbol.for("react.suspense"),O1=Symbol.for("react.memo"),L1=Symbol.for("react.lazy"),Qv=Symbol.iterator;function F1(t){return t===null||typeof t!="object"?null:(t=Qv&&t[Qv]||t["@@iterator"],typeof t=="function"?t:null)}var sx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rx=Object.assign,ox={};function na(t,e,n){this.props=t,this.context=e,this.refs=ox,this.updater=n||sx}na.prototype.isReactComponent={};na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ax(){}ax.prototype=na.prototype;function Kg(t,e,n){this.props=t,this.context=e,this.refs=ox,this.updater=n||sx}var qg=Kg.prototype=new ax;qg.constructor=Kg;rx(qg,na.prototype);qg.isPureReactComponent=!0;var Yv=Array.isArray,lx=Object.prototype.hasOwnProperty,Gg={current:null},cx={key:!0,ref:!0,__self:!0,__source:!0};function ux(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)lx.call(e,i)&&!cx.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:hc,type:t,key:r,ref:o,props:s,_owner:Gg.current}}function V1(t,e){return{$$typeof:hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===hc}function B1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xv=/\/+/g;function gf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B1(""+t.key):e.toString(36)}function Ou(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hc:case C1:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+gf(o,0):i,Yv(s)?(n="",t!=null&&(n=t.replace(Xv,"$&/")+"/"),Ou(s,e,n,"",function(c){return c})):s!=null&&(Qg(s)&&(s=V1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",Yv(t))for(var a=0;a<t.length;a++){r=t[a];var l=i+gf(r,a);o+=Ou(r,e,n,l,s)}else if(l=F1(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=i+gf(r,a++),o+=Ou(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xc(t,e,n){if(t==null)return t;var i=[],s=0;return Ou(t,i,"","",function(r){return e.call(n,r,s++)}),i}function U1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},Lu={transition:null},W1={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:Lu,ReactCurrentOwner:Gg};function hx(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Xc,forEach:function(t,e,n){Xc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xc(t,function(){e++}),e},toArray:function(t){return Xc(t,function(e){return e})||[]},only:function(t){if(!Qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=na;be.Fragment=A1;be.Profiler=N1;be.PureComponent=Kg;be.StrictMode=P1;be.Suspense=j1;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W1;be.act=hx;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=rx({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Gg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lx.call(e,l)&&!cx.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:hc,type:t.type,key:s,ref:r,props:i,_owner:o}};be.createContext=function(t){return t={$$typeof:D1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:R1,_context:t},t.Consumer=t};be.createElement=ux;be.createFactory=function(t){var e=ux.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:M1,render:t}};be.isValidElement=Qg;be.lazy=function(t){return{$$typeof:L1,_payload:{_status:-1,_result:t},_init:U1}};be.memo=function(t,e){return{$$typeof:O1,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Lu.transition;Lu.transition={};try{t()}finally{Lu.transition=e}};be.unstable_act=hx;be.useCallback=function(t,e){return Yt.current.useCallback(t,e)};be.useContext=function(t){return Yt.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};be.useEffect=function(t,e){return Yt.current.useEffect(t,e)};be.useId=function(){return Yt.current.useId()};be.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return Yt.current.useMemo(t,e)};be.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};be.useRef=function(t){return Yt.current.useRef(t)};be.useState=function(t){return Yt.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return Yt.current.useTransition()};be.version="18.3.1";ix.exports=be;var M=ix.exports;const Yg=k1(M),z1=I1({__proto__:null,default:Yg},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=M,H1=Symbol.for("react.element"),K1=Symbol.for("react.fragment"),q1=Object.prototype.hasOwnProperty,G1=$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q1={key:!0,ref:!0,__self:!0,__source:!0};function dx(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)q1.call(e,i)&&!Q1.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:H1,type:t,key:r,ref:o,props:s,_owner:G1.current}}ud.Fragment=K1;ud.jsx=dx;ud.jsxs=dx;nx.exports=ud;var d=nx.exports,fp={},fx={exports:{}},_n={},px={exports:{}},gx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,Q){var te=V.length;V.push(Q);e:for(;0<te;){var z=te-1>>>1,W=V[z];if(0<s(W,Q))V[z]=Q,V[te]=W,te=z;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var Q=V[0],te=V.pop();if(te!==Q){V[0]=te;e:for(var z=0,W=V.length,q=W>>>1;z<q;){var se=2*(z+1)-1,ue=V[se],Y=se+1,Ee=V[Y];if(0>s(ue,te))Y<W&&0>s(Ee,ue)?(V[z]=Ee,V[Y]=te,z=Y):(V[z]=ue,V[se]=te,z=se);else if(Y<W&&0>s(Ee,te))V[z]=Ee,V[Y]=te,z=Y;else break e}}return Q}function s(V,Q){var te=V.sortIndex-Q.sortIndex;return te!==0?te:V.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(V){for(var Q=n(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=V)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function D(V){if(w=!1,k(V),!v)if(n(l)!==null)v=!0,J(N);else{var Q=n(c);Q!==null&&L(D,Q.startTime-V)}}function N(V,Q){v=!1,w&&(w=!1,b(_),_=-1),m=!0;var te=p;try{for(k(Q),f=n(l);f!==null&&(!(f.expirationTime>Q)||V&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,p=f.priorityLevel;var W=z(f.expirationTime<=Q);Q=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(l)&&i(l),k(Q)}else i(l);f=n(l)}if(f!==null)var q=!0;else{var se=n(c);se!==null&&L(D,se.startTime-Q),q=!1}return q}finally{f=null,p=te,m=!1}}var j=!1,T=null,_=-1,I=5,P=-1;function R(){return!(t.unstable_now()-P<I)}function A(){if(T!==null){var V=t.unstable_now();P=V;var Q=!0;try{Q=T(!0,V)}finally{Q?S():(j=!1,T=null)}}else j=!1}var S;if(typeof E=="function")S=function(){E(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,H=U.port2;U.port1.onmessage=A,S=function(){H.postMessage(null)}}else S=function(){x(A,0)};function J(V){T=V,j||(j=!0,S())}function L(V,Q){_=x(function(){V(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,J(N))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var te=p;p=Q;try{return V()}finally{p=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,Q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var te=p;p=V;try{return Q()}finally{p=te}},t.unstable_scheduleCallback=function(V,Q,te){var z=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?z+te:z):te=z,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=te+W,V={id:h++,callback:Q,priorityLevel:V,startTime:te,expirationTime:W,sortIndex:-1},te>z?(V.sortIndex=te,e(c,V),n(l)===null&&V===n(c)&&(w?(b(_),_=-1):w=!0,L(D,te-z))):(V.sortIndex=W,e(l,V),v||m||(v=!0,J(N))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var Q=p;return function(){var te=p;p=Q;try{return V.apply(this,arguments)}finally{p=te}}}})(gx);px.exports=gx;var Y1=px.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=M,vn=Y1;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mx=new Set,Cl={};function Wr(t,e){Fo(t,e),Fo(t+"Capture",e)}function Fo(t,e){for(Cl[t]=e,t=0;t<e.length;t++)mx.add(e[t])}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pp=Object.prototype.hasOwnProperty,J1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jv={},Zv={};function Z1(t){return pp.call(Zv,t)?!0:pp.call(Jv,t)?!1:J1.test(t)?Zv[t]=!0:(Jv[t]=!0,!1)}function eC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tC(t,e,n,i){if(e===null||typeof e>"u"||eC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xg=/[\-:]([a-z])/g;function Jg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xg,Jg);Rt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xg,Jg);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xg,Jg);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zg(t,e,n,i){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tC(e,n,s,i)&&(n=null),i||s===null?Z1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Hi=X1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jc=Symbol.for("react.element"),uo=Symbol.for("react.portal"),ho=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),gp=Symbol.for("react.profiler"),yx=Symbol.for("react.provider"),vx=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),mp=Symbol.for("react.suspense"),yp=Symbol.for("react.suspense_list"),nm=Symbol.for("react.memo"),rs=Symbol.for("react.lazy"),_x=Symbol.for("react.offscreen"),e_=Symbol.iterator;function Aa(t){return t===null||typeof t!="object"?null:(t=e_&&t[e_]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,mf;function Ka(t){if(mf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mf=e&&e[1]||""}return`
`+mf+t}var yf=!1;function vf(t,e){if(!t||yf)return"";yf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{yf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ka(t):""}function nC(t){switch(t.tag){case 5:return Ka(t.type);case 16:return Ka("Lazy");case 13:return Ka("Suspense");case 19:return Ka("SuspenseList");case 0:case 2:case 15:return t=vf(t.type,!1),t;case 11:return t=vf(t.type.render,!1),t;case 1:return t=vf(t.type,!0),t;default:return""}}function vp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ho:return"Fragment";case uo:return"Portal";case gp:return"Profiler";case em:return"StrictMode";case mp:return"Suspense";case yp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vx:return(t.displayName||"Context")+".Consumer";case yx:return(t._context.displayName||"Context")+".Provider";case tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nm:return e=t.displayName||null,e!==null?e:vp(t.type)||"Memo";case rs:e=t._payload,t=t._init;try{return vp(t(e))}catch{}}return null}function iC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vp(e);case 8:return e===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sC(t){var e=wx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zc(t){t._valueTracker||(t._valueTracker=sC(t))}function bx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=wx(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ah(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _p(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function t_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=js(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xx(t,e){e=e.checked,e!=null&&Zg(t,"checked",e,!1)}function wp(t,e){xx(t,e);var n=js(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bp(t,e.type,n):e.hasOwnProperty("defaultValue")&&bp(t,e.type,js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bp(t,e,n){(e!=="number"||ah(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qa=Array.isArray;function So(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+js(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function i_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(qa(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:js(n)}}function Ex(t,e){var n=js(e.value),i=js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function s_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ep(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eu,Sx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eu=eu||document.createElement("div"),eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rC=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){rC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function Ix(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function kx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Ix(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var oC=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tp(t,e){if(e){if(oC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ip=null;function im(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kp=null,Io=null,ko=null;function r_(t){if(t=pc(t)){if(typeof kp!="function")throw Error(G(280));var e=t.stateNode;e&&(e=gd(e),kp(t.stateNode,t.type,e))}}function Cx(t){Io?ko?ko.push(t):ko=[t]:Io=t}function Ax(){if(Io){var t=Io,e=ko;if(ko=Io=null,r_(t),e)for(t=0;t<e.length;t++)r_(e[t])}}function Px(t,e){return t(e)}function Nx(){}var _f=!1;function Rx(t,e,n){if(_f)return t(e,n);_f=!0;try{return Px(t,e,n)}finally{_f=!1,(Io!==null||ko!==null)&&(Nx(),Ax())}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var i=gd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Cp=!1;if(Li)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){Cp=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{Cp=!1}function aC(t,e,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var al=!1,lh=null,ch=!1,Ap=null,lC={onError:function(t){al=!0,lh=t}};function cC(t,e,n,i,s,r,o,a,l){al=!1,lh=null,aC.apply(lC,arguments)}function uC(t,e,n,i,s,r,o,a,l){if(cC.apply(this,arguments),al){if(al){var c=lh;al=!1,lh=null}else throw Error(G(198));ch||(ch=!0,Ap=c)}}function zr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o_(t){if(zr(t)!==t)throw Error(G(188))}function hC(t){var e=t.alternate;if(!e){if(e=zr(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return o_(s),t;if(r===i)return o_(s),e;r=r.sibling}throw Error(G(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==i)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function Mx(t){return t=hC(t),t!==null?jx(t):null}function jx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jx(t);if(e!==null)return e;t=t.sibling}return null}var Ox=vn.unstable_scheduleCallback,a_=vn.unstable_cancelCallback,dC=vn.unstable_shouldYield,fC=vn.unstable_requestPaint,ot=vn.unstable_now,pC=vn.unstable_getCurrentPriorityLevel,sm=vn.unstable_ImmediatePriority,Lx=vn.unstable_UserBlockingPriority,uh=vn.unstable_NormalPriority,gC=vn.unstable_LowPriority,Fx=vn.unstable_IdlePriority,hd=null,hi=null;function mC(t){if(hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(hd,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:_C,yC=Math.log,vC=Math.LN2;function _C(t){return t>>>=0,t===0?32:31-(yC(t)/vC|0)|0}var tu=64,nu=4194304;function Ga(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Ga(a):(r&=o,r!==0&&(i=Ga(r)))}else o=n&~s,o!==0?i=Ga(o):r!==0&&(i=Ga(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Kn(e),s=1<<n,i|=t[n],e&=~s;return i}function wC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-Kn(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=wC(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function Pp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vx(){var t=tu;return tu<<=1,!(tu&4194240)&&(tu=64),t}function wf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function xC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Kn(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function rm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Kn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Me=0;function Bx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ux,om,Wx,zx,$x,Np=!1,iu=[],bs=null,xs=null,Es=null,Nl=new Map,Rl=new Map,as=[],EC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l_(t,e){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(e.pointerId)}}function Na(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=pc(e),e!==null&&om(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function TC(t,e,n,i,s){switch(e){case"focusin":return bs=Na(bs,t,e,n,i,s),!0;case"dragenter":return xs=Na(xs,t,e,n,i,s),!0;case"mouseover":return Es=Na(Es,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Nl.set(r,Na(Nl.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Rl.set(r,Na(Rl.get(r)||null,t,e,n,i,s)),!0}return!1}function Hx(t){var e=yr(t.target);if(e!==null){var n=zr(e);if(n!==null){if(e=n.tag,e===13){if(e=Dx(n),e!==null){t.blockedOn=e,$x(t.priority,function(){Wx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ip=i,n.target.dispatchEvent(i),Ip=null}else return e=pc(n),e!==null&&om(e),t.blockedOn=n,!1;e.shift()}return!0}function c_(t,e,n){Fu(t)&&n.delete(e)}function SC(){Np=!1,bs!==null&&Fu(bs)&&(bs=null),xs!==null&&Fu(xs)&&(xs=null),Es!==null&&Fu(Es)&&(Es=null),Nl.forEach(c_),Rl.forEach(c_)}function Ra(t,e){t.blockedOn===e&&(t.blockedOn=null,Np||(Np=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,SC)))}function Dl(t){function e(s){return Ra(s,t)}if(0<iu.length){Ra(iu[0],t);for(var n=1;n<iu.length;n++){var i=iu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(bs!==null&&Ra(bs,t),xs!==null&&Ra(xs,t),Es!==null&&Ra(Es,t),Nl.forEach(e),Rl.forEach(e),n=0;n<as.length;n++)i=as[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)Hx(n),n.blockedOn===null&&as.shift()}var Co=Hi.ReactCurrentBatchConfig,dh=!0;function IC(t,e,n,i){var s=Me,r=Co.transition;Co.transition=null;try{Me=1,am(t,e,n,i)}finally{Me=s,Co.transition=r}}function kC(t,e,n,i){var s=Me,r=Co.transition;Co.transition=null;try{Me=4,am(t,e,n,i)}finally{Me=s,Co.transition=r}}function am(t,e,n,i){if(dh){var s=Rp(t,e,n,i);if(s===null)Pf(t,e,i,fh,n),l_(t,i);else if(TC(s,t,e,n,i))i.stopPropagation();else if(l_(t,i),e&4&&-1<EC.indexOf(t)){for(;s!==null;){var r=pc(s);if(r!==null&&Ux(r),r=Rp(t,e,n,i),r===null&&Pf(t,e,i,fh,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Pf(t,e,i,null,n)}}var fh=null;function Rp(t,e,n,i){if(fh=null,t=im(i),t=yr(t),t!==null)if(e=zr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fh=t,null}function Kx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pC()){case sm:return 1;case Lx:return 4;case uh:case gC:return 16;case Fx:return 536870912;default:return 16}default:return 16}}var ps=null,lm=null,Vu=null;function qx(){if(Vu)return Vu;var t,e=lm,n=e.length,i,s="value"in ps?ps.value:ps.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return Vu=s.slice(t,1<i?1-i:void 0)}function Bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function u_(){return!1}function wn(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?su:u_,this.isPropagationStopped=u_,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),e}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=wn(ia),fc=tt({},ia,{view:0,detail:0}),CC=wn(fc),bf,xf,Da,dd=tt({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(bf=t.screenX-Da.screenX,xf=t.screenY-Da.screenY):xf=bf=0,Da=t),bf)},movementY:function(t){return"movementY"in t?t.movementY:xf}}),h_=wn(dd),AC=tt({},dd,{dataTransfer:0}),PC=wn(AC),NC=tt({},fc,{relatedTarget:0}),Ef=wn(NC),RC=tt({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),DC=wn(RC),MC=tt({},ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jC=wn(MC),OC=tt({},ia,{data:0}),d_=wn(OC),LC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VC[t])?!!e[t]:!1}function um(){return BC}var UC=tt({},fc,{key:function(t){if(t.key){var e=LC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:um,charCode:function(t){return t.type==="keypress"?Bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WC=wn(UC),zC=tt({},dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f_=wn(zC),$C=tt({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:um}),HC=wn($C),KC=tt({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),qC=wn(KC),GC=tt({},dd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QC=wn(GC),YC=[9,13,27,32],hm=Li&&"CompositionEvent"in window,ll=null;Li&&"documentMode"in document&&(ll=document.documentMode);var XC=Li&&"TextEvent"in window&&!ll,Gx=Li&&(!hm||ll&&8<ll&&11>=ll),p_=" ",g_=!1;function Qx(t,e){switch(t){case"keyup":return YC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fo=!1;function JC(t,e){switch(t){case"compositionend":return Yx(e);case"keypress":return e.which!==32?null:(g_=!0,p_);case"textInput":return t=e.data,t===p_&&g_?null:t;default:return null}}function ZC(t,e){if(fo)return t==="compositionend"||!hm&&Qx(t,e)?(t=qx(),Vu=lm=ps=null,fo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gx&&e.locale!=="ko"?null:e.data;default:return null}}var eA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eA[t.type]:e==="textarea"}function Xx(t,e,n,i){Cx(i),e=ph(e,"onChange"),0<e.length&&(n=new cm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var cl=null,Ml=null;function tA(t){lE(t,0)}function fd(t){var e=mo(t);if(bx(e))return t}function nA(t,e){if(t==="change")return e}var Jx=!1;if(Li){var Tf;if(Li){var Sf="oninput"in document;if(!Sf){var y_=document.createElement("div");y_.setAttribute("oninput","return;"),Sf=typeof y_.oninput=="function"}Tf=Sf}else Tf=!1;Jx=Tf&&(!document.documentMode||9<document.documentMode)}function v_(){cl&&(cl.detachEvent("onpropertychange",Zx),Ml=cl=null)}function Zx(t){if(t.propertyName==="value"&&fd(Ml)){var e=[];Xx(e,Ml,t,im(t)),Rx(tA,e)}}function iA(t,e,n){t==="focusin"?(v_(),cl=e,Ml=n,cl.attachEvent("onpropertychange",Zx)):t==="focusout"&&v_()}function sA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fd(Ml)}function rA(t,e){if(t==="click")return fd(e)}function oA(t,e){if(t==="input"||t==="change")return fd(e)}function aA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:aA;function jl(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!pp.call(e,s)||!Yn(t[s],e[s]))return!1}return!0}function __(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function w_(t,e){var n=__(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=__(n)}}function eE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tE(){for(var t=window,e=ah();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ah(t.document)}return e}function dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lA(t){var e=tE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eE(n.ownerDocument.documentElement,n)){if(i!==null&&dm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=w_(n,r);var o=w_(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cA=Li&&"documentMode"in document&&11>=document.documentMode,po=null,Dp=null,ul=null,Mp=!1;function b_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mp||po==null||po!==ah(i)||(i=po,"selectionStart"in i&&dm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ul&&jl(ul,i)||(ul=i,i=ph(Dp,"onSelect"),0<i.length&&(e=new cm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=po)))}function ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var go={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},If={},nE={};Li&&(nE=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function pd(t){if(If[t])return If[t];if(!go[t])return t;var e=go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nE)return If[t]=e[n];return t}var iE=pd("animationend"),sE=pd("animationiteration"),rE=pd("animationstart"),oE=pd("transitionend"),aE=new Map,x_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){aE.set(t,e),Wr(e,[t])}for(var kf=0;kf<x_.length;kf++){var Cf=x_[kf],uA=Cf.toLowerCase(),hA=Cf[0].toUpperCase()+Cf.slice(1);zs(uA,"on"+hA)}zs(iE,"onAnimationEnd");zs(sE,"onAnimationIteration");zs(rE,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(oE,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function E_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,uC(i,e,void 0,t),t.currentTarget=null}function lE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;E_(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;E_(s,a,c),r=l}}}if(ch)throw t=Ap,ch=!1,Ap=null,t}function He(t,e){var n=e[Vp];n===void 0&&(n=e[Vp]=new Set);var i=t+"__bubble";n.has(i)||(cE(e,t,2,!1),n.add(i))}function Af(t,e,n){var i=0;e&&(i|=4),cE(n,t,i,e)}var ou="_reactListening"+Math.random().toString(36).slice(2);function Ol(t){if(!t[ou]){t[ou]=!0,mx.forEach(function(n){n!=="selectionchange"&&(dA.has(n)||Af(n,!1,t),Af(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ou]||(e[ou]=!0,Af("selectionchange",!1,e))}}function cE(t,e,n,i){switch(Kx(e)){case 1:var s=IC;break;case 4:s=kC;break;default:s=am}n=s.bind(null,e,n,t),s=void 0,!Cp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pf(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=yr(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}Rx(function(){var c=r,h=im(n),f=[];e:{var p=aE.get(t);if(p!==void 0){var m=cm,v=t;switch(t){case"keypress":if(Bu(n)===0)break e;case"keydown":case"keyup":m=WC;break;case"focusin":v="focus",m=Ef;break;case"focusout":v="blur",m=Ef;break;case"beforeblur":case"afterblur":m=Ef;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=h_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=PC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=HC;break;case iE:case sE:case rE:m=DC;break;case oE:m=qC;break;case"scroll":m=CC;break;case"wheel":m=QC;break;case"copy":case"cut":case"paste":m=jC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=f_}var w=(e&4)!==0,x=!w&&t==="scroll",b=w?p!==null?p+"Capture":null:p;w=[];for(var E=c,k;E!==null;){k=E;var D=k.stateNode;if(k.tag===5&&D!==null&&(k=D,b!==null&&(D=Pl(E,b),D!=null&&w.push(Ll(E,D,k)))),x)break;E=E.return}0<w.length&&(p=new m(p,v,null,n,h),f.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Ip&&(v=n.relatedTarget||n.fromElement)&&(yr(v)||v[Fi]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?yr(v):null,v!==null&&(x=zr(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(w=h_,D="onMouseLeave",b="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(w=f_,D="onPointerLeave",b="onPointerEnter",E="pointer"),x=m==null?p:mo(m),k=v==null?p:mo(v),p=new w(D,E+"leave",m,n,h),p.target=x,p.relatedTarget=k,D=null,yr(h)===c&&(w=new w(b,E+"enter",v,n,h),w.target=k,w.relatedTarget=x,D=w),x=D,m&&v)t:{for(w=m,b=v,E=0,k=w;k;k=to(k))E++;for(k=0,D=b;D;D=to(D))k++;for(;0<E-k;)w=to(w),E--;for(;0<k-E;)b=to(b),k--;for(;E--;){if(w===b||b!==null&&w===b.alternate)break t;w=to(w),b=to(b)}w=null}else w=null;m!==null&&T_(f,p,m,w,!1),v!==null&&x!==null&&T_(f,x,v,w,!0)}}e:{if(p=c?mo(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=nA;else if(m_(p))if(Jx)N=oA;else{N=sA;var j=iA}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=rA);if(N&&(N=N(t,c))){Xx(f,N,n,h);break e}j&&j(t,p,c),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&bp(p,"number",p.value)}switch(j=c?mo(c):window,t){case"focusin":(m_(j)||j.contentEditable==="true")&&(po=j,Dp=c,ul=null);break;case"focusout":ul=Dp=po=null;break;case"mousedown":Mp=!0;break;case"contextmenu":case"mouseup":case"dragend":Mp=!1,b_(f,n,h);break;case"selectionchange":if(cA)break;case"keydown":case"keyup":b_(f,n,h)}var T;if(hm)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else fo?Qx(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Gx&&n.locale!=="ko"&&(fo||_!=="onCompositionStart"?_==="onCompositionEnd"&&fo&&(T=qx()):(ps=h,lm="value"in ps?ps.value:ps.textContent,fo=!0)),j=ph(c,_),0<j.length&&(_=new d_(_,t,null,n,h),f.push({event:_,listeners:j}),T?_.data=T:(T=Yx(n),T!==null&&(_.data=T)))),(T=XC?JC(t,n):ZC(t,n))&&(c=ph(c,"onBeforeInput"),0<c.length&&(h=new d_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=T))}lE(f,e)})}function Ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ph(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Pl(t,n),r!=null&&i.unshift(Ll(t,r,s)),r=Pl(t,e),r!=null&&i.push(Ll(t,r,s))),t=t.return}return i}function to(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function T_(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=Pl(n,r),l!=null&&o.unshift(Ll(n,l,a))):s||(l=Pl(n,r),l!=null&&o.push(Ll(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fA=/\r\n?/g,pA=/\u0000|\uFFFD/g;function S_(t){return(typeof t=="string"?t:""+t).replace(fA,`
`).replace(pA,"")}function au(t,e,n){if(e=S_(e),S_(t)!==e&&n)throw Error(G(425))}function gh(){}var jp=null,Op=null;function Lp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fp=typeof setTimeout=="function"?setTimeout:void 0,gA=typeof clearTimeout=="function"?clearTimeout:void 0,I_=typeof Promise=="function"?Promise:void 0,mA=typeof queueMicrotask=="function"?queueMicrotask:typeof I_<"u"?function(t){return I_.resolve(null).then(t).catch(yA)}:Fp;function yA(t){setTimeout(function(){throw t})}function Nf(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Dl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Dl(e)}function Ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sa=Math.random().toString(36).slice(2),ci="__reactFiber$"+sa,Fl="__reactProps$"+sa,Fi="__reactContainer$"+sa,Vp="__reactEvents$"+sa,vA="__reactListeners$"+sa,_A="__reactHandles$"+sa;function yr(t){var e=t[ci];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fi]||n[ci]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k_(t);t!==null;){if(n=t[ci])return n;t=k_(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[ci]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function gd(t){return t[Fl]||null}var Bp=[],yo=-1;function $s(t){return{current:t}}function Ge(t){0>yo||(t.current=Bp[yo],Bp[yo]=null,yo--)}function Be(t,e){yo++,Bp[yo]=t.current,t.current=e}var Os={},zt=$s(Os),sn=$s(!1),Cr=Os;function Vo(t,e){var n=t.type.contextTypes;if(!n)return Os;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function mh(){Ge(sn),Ge(zt)}function C_(t,e,n){if(zt.current!==Os)throw Error(G(168));Be(zt,e),Be(sn,n)}function uE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(G(108,iC(t)||"Unknown",s));return tt({},n,i)}function yh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Os,Cr=zt.current,Be(zt,t),Be(sn,sn.current),!0}function A_(t,e,n){var i=t.stateNode;if(!i)throw Error(G(169));n?(t=uE(t,e,Cr),i.__reactInternalMemoizedMergedChildContext=t,Ge(sn),Ge(zt),Be(zt,t)):Ge(sn),Be(sn,n)}var Ci=null,md=!1,Rf=!1;function hE(t){Ci===null?Ci=[t]:Ci.push(t)}function wA(t){md=!0,hE(t)}function Hs(){if(!Rf&&Ci!==null){Rf=!0;var t=0,e=Me;try{var n=Ci;for(Me=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ci=null,md=!1}catch(s){throw Ci!==null&&(Ci=Ci.slice(t+1)),Ox(sm,Hs),s}finally{Me=e,Rf=!1}}return null}var vo=[],_o=0,vh=null,_h=0,Tn=[],Sn=0,Ar=null,Pi=1,Ni="";function ur(t,e){vo[_o++]=_h,vo[_o++]=vh,vh=t,_h=e}function dE(t,e,n){Tn[Sn++]=Pi,Tn[Sn++]=Ni,Tn[Sn++]=Ar,Ar=t;var i=Pi;t=Ni;var s=32-Kn(i)-1;i&=~(1<<s),n+=1;var r=32-Kn(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Pi=1<<32-Kn(e)+s|n<<s|i,Ni=r+t}else Pi=1<<r|n<<s|i,Ni=t}function fm(t){t.return!==null&&(ur(t,1),dE(t,1,0))}function pm(t){for(;t===vh;)vh=vo[--_o],vo[_o]=null,_h=vo[--_o],vo[_o]=null;for(;t===Ar;)Ar=Tn[--Sn],Tn[Sn]=null,Ni=Tn[--Sn],Tn[Sn]=null,Pi=Tn[--Sn],Tn[Sn]=null}var mn=null,pn=null,Xe=!1,zn=null;function fE(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function P_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,pn=Ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ar!==null?{id:Pi,overflow:Ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,pn=null,!0):!1;default:return!1}}function Up(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wp(t){if(Xe){var e=pn;if(e){var n=e;if(!P_(t,e)){if(Up(t))throw Error(G(418));e=Ts(n.nextSibling);var i=mn;e&&P_(t,e)?fE(i,n):(t.flags=t.flags&-4097|2,Xe=!1,mn=t)}}else{if(Up(t))throw Error(G(418));t.flags=t.flags&-4097|2,Xe=!1,mn=t}}}function N_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function lu(t){if(t!==mn)return!1;if(!Xe)return N_(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lp(t.type,t.memoizedProps)),e&&(e=pn)){if(Up(t))throw pE(),Error(G(418));for(;e;)fE(t,e),e=Ts(e.nextSibling)}if(N_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=Ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=mn?Ts(t.stateNode.nextSibling):null;return!0}function pE(){for(var t=pn;t;)t=Ts(t.nextSibling)}function Bo(){pn=mn=null,Xe=!1}function gm(t){zn===null?zn=[t]:zn.push(t)}var bA=Hi.ReactCurrentBatchConfig;function Ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var i=n.stateNode}if(!i)throw Error(G(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function cu(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function R_(t){var e=t._init;return e(t._payload)}function gE(t){function e(b,E){if(t){var k=b.deletions;k===null?(b.deletions=[E],b.flags|=16):k.push(E)}}function n(b,E){if(!t)return null;for(;E!==null;)e(b,E),E=E.sibling;return null}function i(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function s(b,E){return b=Cs(b,E),b.index=0,b.sibling=null,b}function r(b,E,k){return b.index=k,t?(k=b.alternate,k!==null?(k=k.index,k<E?(b.flags|=2,E):k):(b.flags|=2,E)):(b.flags|=1048576,E)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,E,k,D){return E===null||E.tag!==6?(E=Vf(k,b.mode,D),E.return=b,E):(E=s(E,k),E.return=b,E)}function l(b,E,k,D){var N=k.type;return N===ho?h(b,E,k.props.children,D,k.key):E!==null&&(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===rs&&R_(N)===E.type)?(D=s(E,k.props),D.ref=Ma(b,E,k),D.return=b,D):(D=qu(k.type,k.key,k.props,null,b.mode,D),D.ref=Ma(b,E,k),D.return=b,D)}function c(b,E,k,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==k.containerInfo||E.stateNode.implementation!==k.implementation?(E=Bf(k,b.mode,D),E.return=b,E):(E=s(E,k.children||[]),E.return=b,E)}function h(b,E,k,D,N){return E===null||E.tag!==7?(E=Sr(k,b.mode,D,N),E.return=b,E):(E=s(E,k),E.return=b,E)}function f(b,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Vf(""+E,b.mode,k),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jc:return k=qu(E.type,E.key,E.props,null,b.mode,k),k.ref=Ma(b,null,E),k.return=b,k;case uo:return E=Bf(E,b.mode,k),E.return=b,E;case rs:var D=E._init;return f(b,D(E._payload),k)}if(qa(E)||Aa(E))return E=Sr(E,b.mode,k,null),E.return=b,E;cu(b,E)}return null}function p(b,E,k,D){var N=E!==null?E.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return N!==null?null:a(b,E,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Jc:return k.key===N?l(b,E,k,D):null;case uo:return k.key===N?c(b,E,k,D):null;case rs:return N=k._init,p(b,E,N(k._payload),D)}if(qa(k)||Aa(k))return N!==null?null:h(b,E,k,D,null);cu(b,k)}return null}function m(b,E,k,D,N){if(typeof D=="string"&&D!==""||typeof D=="number")return b=b.get(k)||null,a(E,b,""+D,N);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Jc:return b=b.get(D.key===null?k:D.key)||null,l(E,b,D,N);case uo:return b=b.get(D.key===null?k:D.key)||null,c(E,b,D,N);case rs:var j=D._init;return m(b,E,k,j(D._payload),N)}if(qa(D)||Aa(D))return b=b.get(k)||null,h(E,b,D,N,null);cu(E,D)}return null}function v(b,E,k,D){for(var N=null,j=null,T=E,_=E=0,I=null;T!==null&&_<k.length;_++){T.index>_?(I=T,T=null):I=T.sibling;var P=p(b,T,k[_],D);if(P===null){T===null&&(T=I);break}t&&T&&P.alternate===null&&e(b,T),E=r(P,E,_),j===null?N=P:j.sibling=P,j=P,T=I}if(_===k.length)return n(b,T),Xe&&ur(b,_),N;if(T===null){for(;_<k.length;_++)T=f(b,k[_],D),T!==null&&(E=r(T,E,_),j===null?N=T:j.sibling=T,j=T);return Xe&&ur(b,_),N}for(T=i(b,T);_<k.length;_++)I=m(T,b,_,k[_],D),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?_:I.key),E=r(I,E,_),j===null?N=I:j.sibling=I,j=I);return t&&T.forEach(function(R){return e(b,R)}),Xe&&ur(b,_),N}function w(b,E,k,D){var N=Aa(k);if(typeof N!="function")throw Error(G(150));if(k=N.call(k),k==null)throw Error(G(151));for(var j=N=null,T=E,_=E=0,I=null,P=k.next();T!==null&&!P.done;_++,P=k.next()){T.index>_?(I=T,T=null):I=T.sibling;var R=p(b,T,P.value,D);if(R===null){T===null&&(T=I);break}t&&T&&R.alternate===null&&e(b,T),E=r(R,E,_),j===null?N=R:j.sibling=R,j=R,T=I}if(P.done)return n(b,T),Xe&&ur(b,_),N;if(T===null){for(;!P.done;_++,P=k.next())P=f(b,P.value,D),P!==null&&(E=r(P,E,_),j===null?N=P:j.sibling=P,j=P);return Xe&&ur(b,_),N}for(T=i(b,T);!P.done;_++,P=k.next())P=m(T,b,_,P.value,D),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?_:P.key),E=r(P,E,_),j===null?N=P:j.sibling=P,j=P);return t&&T.forEach(function(A){return e(b,A)}),Xe&&ur(b,_),N}function x(b,E,k,D){if(typeof k=="object"&&k!==null&&k.type===ho&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Jc:e:{for(var N=k.key,j=E;j!==null;){if(j.key===N){if(N=k.type,N===ho){if(j.tag===7){n(b,j.sibling),E=s(j,k.props.children),E.return=b,b=E;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===rs&&R_(N)===j.type){n(b,j.sibling),E=s(j,k.props),E.ref=Ma(b,j,k),E.return=b,b=E;break e}n(b,j);break}else e(b,j);j=j.sibling}k.type===ho?(E=Sr(k.props.children,b.mode,D,k.key),E.return=b,b=E):(D=qu(k.type,k.key,k.props,null,b.mode,D),D.ref=Ma(b,E,k),D.return=b,b=D)}return o(b);case uo:e:{for(j=k.key;E!==null;){if(E.key===j)if(E.tag===4&&E.stateNode.containerInfo===k.containerInfo&&E.stateNode.implementation===k.implementation){n(b,E.sibling),E=s(E,k.children||[]),E.return=b,b=E;break e}else{n(b,E);break}else e(b,E);E=E.sibling}E=Bf(k,b.mode,D),E.return=b,b=E}return o(b);case rs:return j=k._init,x(b,E,j(k._payload),D)}if(qa(k))return v(b,E,k,D);if(Aa(k))return w(b,E,k,D);cu(b,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,E!==null&&E.tag===6?(n(b,E.sibling),E=s(E,k),E.return=b,b=E):(n(b,E),E=Vf(k,b.mode,D),E.return=b,b=E),o(b)):n(b,E)}return x}var Uo=gE(!0),mE=gE(!1),wh=$s(null),bh=null,wo=null,mm=null;function ym(){mm=wo=bh=null}function vm(t){var e=wh.current;Ge(wh),t._currentValue=e}function zp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ao(t,e){bh=t,mm=wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(mm!==t)if(t={context:t,memoizedValue:e,next:null},wo===null){if(bh===null)throw Error(G(308));wo=t,bh.dependencies={lanes:0,firstContext:t}}else wo=wo.next=t;return e}var vr=null;function _m(t){vr===null?vr=[t]:vr.push(t)}function yE(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,_m(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vi(t,i)}function Vi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var os=!1;function wm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Vi(t,n)}return s=i.interleaved,s===null?(e.next=e,_m(i)):(e.next=s.next,s.next=e),i.interleaved=e,Vi(t,n)}function Uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rm(t,n)}}function D_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xh(t,e,n,i){var s=t.updateQueue;os=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(r!==null){var f=s.baseState;o=0,h=c=l=null,a=r;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(p=e,m=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=tt({},f,p);break e;case 2:os=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Nr|=o,t.lanes=o,t.memoizedState=f}}function M_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(G(191,s));s.call(i)}}}var gc={},di=$s(gc),Vl=$s(gc),Bl=$s(gc);function _r(t){if(t===gc)throw Error(G(174));return t}function bm(t,e){switch(Be(Bl,e),Be(Vl,t),Be(di,gc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ep(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ep(e,t)}Ge(di),Be(di,e)}function Wo(){Ge(di),Ge(Vl),Ge(Bl)}function _E(t){_r(Bl.current);var e=_r(di.current),n=Ep(e,t.type);e!==n&&(Be(Vl,t),Be(di,n))}function xm(t){Vl.current===t&&(Ge(di),Ge(Vl))}var Je=$s(0);function Eh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Df=[];function Em(){for(var t=0;t<Df.length;t++)Df[t]._workInProgressVersionPrimary=null;Df.length=0}var Wu=Hi.ReactCurrentDispatcher,Mf=Hi.ReactCurrentBatchConfig,Pr=0,Ze=null,pt=null,wt=null,Th=!1,hl=!1,Ul=0,xA=0;function Ot(){throw Error(G(321))}function Tm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function Sm(t,e,n,i,s,r){if(Pr=r,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wu.current=t===null||t.memoizedState===null?IA:kA,t=n(i,s),hl){r=0;do{if(hl=!1,Ul=0,25<=r)throw Error(G(301));r+=1,wt=pt=null,e.updateQueue=null,Wu.current=CA,t=n(i,s)}while(hl)}if(Wu.current=Sh,e=pt!==null&&pt.next!==null,Pr=0,wt=pt=Ze=null,Th=!1,e)throw Error(G(300));return t}function Im(){var t=Ul!==0;return Ul=0,t}function ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ze.memoizedState=wt=t:wt=wt.next=t,wt}function Rn(){if(pt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?Ze.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(G(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Ze.memoizedState=wt=t:wt=wt.next=t}return wt}function Wl(t,e){return typeof e=="function"?e(t):e}function jf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var i=pt,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var h=c.lane;if((Pr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Ze.lanes|=h,Nr|=h}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,Yn(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,Ze.lanes|=r,Nr|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Of(t){var e=Rn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);Yn(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function wE(){}function bE(t,e){var n=Ze,i=Rn(),s=e(),r=!Yn(i.memoizedState,s);if(r&&(i.memoizedState=s,tn=!0),i=i.queue,km(TE.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,zl(9,EE.bind(null,n,i,s,e),void 0,null),xt===null)throw Error(G(349));Pr&30||xE(n,e,s)}return s}function xE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EE(t,e,n,i){e.value=n,e.getSnapshot=i,SE(e)&&IE(t)}function TE(t,e,n){return n(function(){SE(e)&&IE(t)})}function SE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function IE(t){var e=Vi(t,1);e!==null&&qn(e,t,1,-1)}function j_(t){var e=ai();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:t},e.queue=t,t=t.dispatch=SA.bind(null,Ze,t),[e.memoizedState,t]}function zl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function kE(){return Rn().memoizedState}function zu(t,e,n,i){var s=ai();Ze.flags|=t,s.memoizedState=zl(1|e,n,void 0,i===void 0?null:i)}function yd(t,e,n,i){var s=Rn();i=i===void 0?null:i;var r=void 0;if(pt!==null){var o=pt.memoizedState;if(r=o.destroy,i!==null&&Tm(i,o.deps)){s.memoizedState=zl(e,n,r,i);return}}Ze.flags|=t,s.memoizedState=zl(1|e,n,r,i)}function O_(t,e){return zu(8390656,8,t,e)}function km(t,e){return yd(2048,8,t,e)}function CE(t,e){return yd(4,2,t,e)}function AE(t,e){return yd(4,4,t,e)}function PE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NE(t,e,n){return n=n!=null?n.concat([t]):null,yd(4,4,PE.bind(null,e,t),n)}function Cm(){}function RE(t,e){var n=Rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Tm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function DE(t,e){var n=Rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Tm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function ME(t,e,n){return Pr&21?(Yn(n,e)||(n=Vx(),Ze.lanes|=n,Nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function EA(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var i=Mf.transition;Mf.transition={};try{t(!1),e()}finally{Me=n,Mf.transition=i}}function jE(){return Rn().memoizedState}function TA(t,e,n){var i=ks(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},OE(t))LE(e,n);else if(n=yE(t,e,n,i),n!==null){var s=Qt();qn(n,t,i,s),FE(n,e,i)}}function SA(t,e,n){var i=ks(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(OE(t))LE(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,Yn(a,o)){var l=e.interleaved;l===null?(s.next=s,_m(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=yE(t,e,s,i),n!==null&&(s=Qt(),qn(n,t,i,s),FE(n,e,i))}}function OE(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function LE(t,e){hl=Th=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rm(t,n)}}var Sh={readContext:Nn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},IA={readContext:Nn,useCallback:function(t,e){return ai().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:O_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zu(4194308,4,PE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zu(4194308,4,t,e)},useInsertionEffect:function(t,e){return zu(4,2,t,e)},useMemo:function(t,e){var n=ai();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ai();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=TA.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=ai();return t={current:t},e.memoizedState=t},useState:j_,useDebugValue:Cm,useDeferredValue:function(t){return ai().memoizedState=t},useTransition:function(){var t=j_(!1),e=t[0];return t=EA.bind(null,t[1]),ai().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,s=ai();if(Xe){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),xt===null)throw Error(G(349));Pr&30||xE(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,O_(TE.bind(null,i,r,t),[t]),i.flags|=2048,zl(9,EE.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=ai(),e=xt.identifierPrefix;if(Xe){var n=Ni,i=Pi;n=(i&~(1<<32-Kn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ul++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kA={readContext:Nn,useCallback:RE,useContext:Nn,useEffect:km,useImperativeHandle:NE,useInsertionEffect:CE,useLayoutEffect:AE,useMemo:DE,useReducer:jf,useRef:kE,useState:function(){return jf(Wl)},useDebugValue:Cm,useDeferredValue:function(t){var e=Rn();return ME(e,pt.memoizedState,t)},useTransition:function(){var t=jf(Wl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:wE,useSyncExternalStore:bE,useId:jE,unstable_isNewReconciler:!1},CA={readContext:Nn,useCallback:RE,useContext:Nn,useEffect:km,useImperativeHandle:NE,useInsertionEffect:CE,useLayoutEffect:AE,useMemo:DE,useReducer:Of,useRef:kE,useState:function(){return Of(Wl)},useDebugValue:Cm,useDeferredValue:function(t){var e=Rn();return pt===null?e.memoizedState=t:ME(e,pt.memoizedState,t)},useTransition:function(){var t=Of(Wl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:wE,useSyncExternalStore:bE,useId:jE,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $p(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vd={isMounted:function(t){return(t=t._reactInternals)?zr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Qt(),s=ks(t),r=ji(i,s);r.payload=e,n!=null&&(r.callback=n),e=Ss(t,r,s),e!==null&&(qn(e,t,s,i),Uu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Qt(),s=ks(t),r=ji(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Ss(t,r,s),e!==null&&(qn(e,t,s,i),Uu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),i=ks(t),s=ji(n,i);s.tag=2,e!=null&&(s.callback=e),e=Ss(t,s,i),e!==null&&(qn(e,t,i,n),Uu(e,t,i))}};function L_(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!jl(n,i)||!jl(s,r):!0}function VE(t,e,n){var i=!1,s=Os,r=e.contextType;return typeof r=="object"&&r!==null?r=Nn(r):(s=rn(e)?Cr:zt.current,i=e.contextTypes,r=(i=i!=null)?Vo(t,s):Os),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function F_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&vd.enqueueReplaceState(e,e.state,null)}function Hp(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wm(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Nn(r):(r=rn(e)?Cr:zt.current,s.context=Vo(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&($p(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vd.enqueueReplaceState(s,s.state,null),xh(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zo(t,e){try{var n="",i=e;do n+=nC(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function Lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AA=typeof WeakMap=="function"?WeakMap:Map;function BE(t,e,n){n=ji(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){kh||(kh=!0,ng=i),Kp(t,e)},n}function UE(t,e,n){n=ji(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Kp(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Kp(t,e),typeof i!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function V_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new AA;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=zA.bind(null,t,e,n),e.then(t,t))}function B_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function U_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ji(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var PA=Hi.ReactCurrentOwner,tn=!1;function qt(t,e,n,i){e.child=t===null?mE(e,null,n,i):Uo(e,t.child,n,i)}function W_(t,e,n,i,s){n=n.render;var r=e.ref;return Ao(e,s),i=Sm(t,e,n,i,r,s),n=Im(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Xe&&n&&fm(e),e.flags|=1,qt(t,e,i,s),e.child)}function z_(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!Om(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,WE(t,e,r,i,s)):(t=qu(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:jl,n(o,i)&&t.ref===e.ref)return Bi(t,e,s)}return e.flags|=1,t=Cs(r,i),t.ref=e.ref,t.return=e,e.child=t}function WE(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(jl(r,i)&&t.ref===e.ref)if(tn=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Bi(t,e,s)}return qp(t,e,n,i,s)}function zE(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(xo,fn),fn|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(xo,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,Be(xo,fn),fn|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,Be(xo,fn),fn|=i;return qt(t,e,s,n),e.child}function $E(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qp(t,e,n,i,s){var r=rn(n)?Cr:zt.current;return r=Vo(e,r),Ao(e,s),n=Sm(t,e,n,i,r,s),i=Im(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Xe&&i&&fm(e),e.flags|=1,qt(t,e,n,s),e.child)}function $_(t,e,n,i,s){if(rn(n)){var r=!0;yh(e)}else r=!1;if(Ao(e,s),e.stateNode===null)$u(t,e),VE(e,n,i),Hp(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Nn(c):(c=rn(n)?Cr:zt.current,c=Vo(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&F_(e,o,i,c),os=!1;var p=e.memoizedState;o.state=p,xh(e,i,o,s),l=e.memoizedState,a!==i||p!==l||sn.current||os?(typeof h=="function"&&($p(e,n,h,i),l=e.memoizedState),(a=os||L_(e,n,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,vE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Un(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Nn(l):(l=rn(n)?Cr:zt.current,l=Vo(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&F_(e,o,i,l),os=!1,p=e.memoizedState,o.state=p,xh(e,i,o,s);var v=e.memoizedState;a!==f||p!==v||sn.current||os?(typeof m=="function"&&($p(e,n,m,i),v=e.memoizedState),(c=os||L_(e,n,c,i,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Gp(t,e,n,i,r,s)}function Gp(t,e,n,i,s,r){$E(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&A_(e,n,!1),Bi(t,e,r);i=e.stateNode,PA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Uo(e,t.child,null,r),e.child=Uo(e,null,a,r)):qt(t,e,a,r),e.memoizedState=i.state,s&&A_(e,n,!0),e.child}function HE(t){var e=t.stateNode;e.pendingContext?C_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C_(t,e.context,!1),bm(t,e.containerInfo)}function H_(t,e,n,i,s){return Bo(),gm(s),e.flags|=256,qt(t,e,n,i),e.child}var Qp={dehydrated:null,treeContext:null,retryLane:0};function Yp(t){return{baseLanes:t,cachePool:null,transitions:null}}function KE(t,e,n){var i=e.pendingProps,s=Je.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Be(Je,s&1),t===null)return Wp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=bd(o,i,0,null),t=Sr(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Yp(n),e.memoizedState=Qp,t):Am(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return NA(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Cs(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Cs(a,r):(r=Sr(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?Yp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=Qp,i}return r=t.child,t=r.sibling,i=Cs(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Am(t,e){return e=bd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uu(t,e,n,i){return i!==null&&gm(i),Uo(e,t.child,null,n),t=Am(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NA(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=Lf(Error(G(422))),uu(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=bd({mode:"visible",children:i.children},s,0,null),r=Sr(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Uo(e,t.child,null,o),e.child.memoizedState=Yp(o),e.memoizedState=Qp,r);if(!(e.mode&1))return uu(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(G(419)),i=Lf(r,i,void 0),uu(t,e,o,i)}if(a=(o&t.childLanes)!==0,tn||a){if(i=xt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Vi(t,s),qn(i,t,s,-1))}return jm(),i=Lf(Error(G(421))),uu(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$A.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,pn=Ts(s.nextSibling),mn=e,Xe=!0,zn=null,t!==null&&(Tn[Sn++]=Pi,Tn[Sn++]=Ni,Tn[Sn++]=Ar,Pi=t.id,Ni=t.overflow,Ar=e),e=Am(e,i.children),e.flags|=4096,e)}function K_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zp(t.return,e,n)}function Ff(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function qE(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(qt(t,e,i.children,n),i=Je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K_(t,n,e);else if(t.tag===19)K_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Be(Je,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Eh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ff(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Eh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ff(e,!0,n,null,r);break;case"together":Ff(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $u(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Cs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RA(t,e,n){switch(e.tag){case 3:HE(e),Bo();break;case 5:_E(e);break;case 1:rn(e.type)&&yh(e);break;case 4:bm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Be(wh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Be(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?KE(t,e,n):(Be(Je,Je.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);Be(Je,Je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return qE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(Je,Je.current),i)break;return null;case 22:case 23:return e.lanes=0,zE(t,e,n)}return Bi(t,e,n)}var GE,Xp,QE,YE;GE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xp=function(){};QE=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,_r(di.current);var r=null;switch(n){case"input":s=_p(t,s),i=_p(t,i),r=[];break;case"select":s=tt({},s,{value:void 0}),i=tt({},i,{value:void 0}),r=[];break;case"textarea":s=xp(t,s),i=xp(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=gh)}Tp(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cl.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&He("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};YE=function(t,e,n,i){n!==i&&(e.flags|=4)};function ja(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function DA(t,e,n){var i=e.pendingProps;switch(pm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return rn(e.type)&&mh(),Lt(e),null;case 3:return i=e.stateNode,Wo(),Ge(sn),Ge(zt),Em(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(lu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(rg(zn),zn=null))),Xp(t,e),Lt(e),null;case 5:xm(e);var s=_r(Bl.current);if(n=e.type,t!==null&&e.stateNode!=null)QE(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(G(166));return Lt(e),null}if(t=_r(di.current),lu(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[ci]=e,i[Fl]=r,t=(e.mode&1)!==0,n){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(s=0;s<Qa.length;s++)He(Qa[s],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":t_(i,r),He("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},He("invalid",i);break;case"textarea":i_(i,r),He("invalid",i)}Tp(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&au(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&au(i.textContent,a,t),s=["children",""+a]):Cl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",i)}switch(n){case"input":Zc(i),n_(i,r,!0);break;case"textarea":Zc(i),s_(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=gh)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[ci]=e,t[Fl]=i,GE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sp(n,i),n){case"dialog":He("cancel",t),He("close",t),s=i;break;case"iframe":case"object":case"embed":He("load",t),s=i;break;case"video":case"audio":for(s=0;s<Qa.length;s++)He(Qa[s],t);s=i;break;case"source":He("error",t),s=i;break;case"img":case"image":case"link":He("error",t),He("load",t),s=i;break;case"details":He("toggle",t),s=i;break;case"input":t_(t,i),s=_p(t,i),He("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=tt({},i,{value:void 0}),He("invalid",t);break;case"textarea":i_(t,i),s=xp(t,i),He("invalid",t);break;default:s=i}Tp(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?kx(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Sx(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Al(t,l):typeof l=="number"&&Al(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Cl.hasOwnProperty(r)?l!=null&&r==="onScroll"&&He("scroll",t):l!=null&&Zg(t,r,l,o))}switch(n){case"input":Zc(t),n_(t,i,!1);break;case"textarea":Zc(t),s_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+js(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?So(t,!!i.multiple,r,!1):i.defaultValue!=null&&So(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)YE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(G(166));if(n=_r(Bl.current),_r(di.current),lu(e)){if(i=e.stateNode,n=e.memoizedProps,i[ci]=e,(r=i.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:au(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&au(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ci]=e,e.stateNode=i}return Lt(e),null;case 13:if(Ge(Je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&pn!==null&&e.mode&1&&!(e.flags&128))pE(),Bo(),e.flags|=98560,r=!1;else if(r=lu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(G(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(G(317));r[ci]=e}else Bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),r=!1}else zn!==null&&(rg(zn),zn=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?mt===0&&(mt=3):jm())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Wo(),Xp(t,e),t===null&&Ol(e.stateNode.containerInfo),Lt(e),null;case 10:return vm(e.type._context),Lt(e),null;case 17:return rn(e.type)&&mh(),Lt(e),null;case 19:if(Ge(Je),r=e.memoizedState,r===null)return Lt(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)ja(r,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Eh(t),o!==null){for(e.flags|=128,ja(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(Je,Je.current&1|2),e.child}t=t.sibling}r.tail!==null&&ot()>$o&&(e.flags|=128,i=!0,ja(r,!1),e.lanes=4194304)}else{if(!i)if(t=Eh(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ja(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Xe)return Lt(e),null}else 2*ot()-r.renderingStartTime>$o&&n!==1073741824&&(e.flags|=128,i=!0,ja(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ot(),e.sibling=null,n=Je.current,Be(Je,i?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Mm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?fn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function MA(t,e){switch(pm(e),e.tag){case 1:return rn(e.type)&&mh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wo(),Ge(sn),Ge(zt),Em(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xm(e),null;case 13:if(Ge(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Je),null;case 4:return Wo(),null;case 10:return vm(e.type._context),null;case 22:case 23:return Mm(),null;case 24:return null;default:return null}}var hu=!1,Bt=!1,jA=typeof WeakSet=="function"?WeakSet:Set,ae=null;function bo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){st(t,e,i)}else n.current=null}function Jp(t,e,n){try{n()}catch(i){st(t,e,i)}}var q_=!1;function OA(t,e){if(jp=dh,t=tE(),dm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==r||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===r&&++h===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Op={focusedElem:t,selectionRange:n},dh=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,x=v.memoizedState,b=e.stateNode,E=b.getSnapshotBeforeUpdate(e.elementType===e.type?w:Un(e.type,w),x);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(D){st(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return v=q_,q_=!1,v}function dl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&Jp(e,n,r)}s=s.next}while(s!==i)}}function _d(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Zp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function XE(t){var e=t.alternate;e!==null&&(t.alternate=null,XE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ci],delete e[Fl],delete e[Vp],delete e[vA],delete e[_A])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function JE(t){return t.tag===5||t.tag===3||t.tag===4}function G_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gh));else if(i!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}function tg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(tg(t,e,n),t=t.sibling;t!==null;)tg(t,e,n),t=t.sibling}var St=null,Wn=!1;function Zi(t,e,n){for(n=n.child;n!==null;)ZE(t,e,n),n=n.sibling}function ZE(t,e,n){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(hd,n)}catch{}switch(n.tag){case 5:Bt||bo(n,e);case 6:var i=St,s=Wn;St=null,Zi(t,e,n),St=i,Wn=s,St!==null&&(Wn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Wn?(t=St,n=n.stateNode,t.nodeType===8?Nf(t.parentNode,n):t.nodeType===1&&Nf(t,n),Dl(t)):Nf(St,n.stateNode));break;case 4:i=St,s=Wn,St=n.stateNode.containerInfo,Wn=!0,Zi(t,e,n),St=i,Wn=s;break;case 0:case 11:case 14:case 15:if(!Bt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Jp(n,e,o),s=s.next}while(s!==i)}Zi(t,e,n);break;case 1:if(!Bt&&(bo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){st(n,e,a)}Zi(t,e,n);break;case 21:Zi(t,e,n);break;case 22:n.mode&1?(Bt=(i=Bt)||n.memoizedState!==null,Zi(t,e,n),Bt=i):Zi(t,e,n);break;default:Zi(t,e,n)}}function Q_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jA),e.forEach(function(i){var s=HA.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Fn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,Wn=!1;break e;case 3:St=a.stateNode.containerInfo,Wn=!0;break e;case 4:St=a.stateNode.containerInfo,Wn=!0;break e}a=a.return}if(St===null)throw Error(G(160));ZE(r,o,s),St=null,Wn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){st(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eT(e,t),e=e.sibling}function eT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fn(e,t),ii(t),i&4){try{dl(3,t,t.return),_d(3,t)}catch(w){st(t,t.return,w)}try{dl(5,t,t.return)}catch(w){st(t,t.return,w)}}break;case 1:Fn(e,t),ii(t),i&512&&n!==null&&bo(n,n.return);break;case 5:if(Fn(e,t),ii(t),i&512&&n!==null&&bo(n,n.return),t.flags&32){var s=t.stateNode;try{Al(s,"")}catch(w){st(t,t.return,w)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&xx(s,r),Sp(a,o);var c=Sp(a,r);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?kx(s,f):h==="dangerouslySetInnerHTML"?Sx(s,f):h==="children"?Al(s,f):Zg(s,h,f,c)}switch(a){case"input":wp(s,r);break;case"textarea":Ex(s,r);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?So(s,!!r.multiple,m,!1):p!==!!r.multiple&&(r.defaultValue!=null?So(s,!!r.multiple,r.defaultValue,!0):So(s,!!r.multiple,r.multiple?[]:"",!1))}s[Fl]=r}catch(w){st(t,t.return,w)}}break;case 6:if(Fn(e,t),ii(t),i&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(w){st(t,t.return,w)}}break;case 3:if(Fn(e,t),ii(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Dl(e.containerInfo)}catch(w){st(t,t.return,w)}break;case 4:Fn(e,t),ii(t);break;case 13:Fn(e,t),ii(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Rm=ot())),i&4&&Q_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(c=Bt)||h,Fn(e,t),Bt=c):Fn(e,t),ii(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(f=ae=h;ae!==null;){switch(p=ae,m=p.child,p.tag){case 0:case 11:case 14:case 15:dl(4,p,p.return);break;case 1:bo(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){st(i,n,w)}}break;case 5:bo(p,p.return);break;case 22:if(p.memoizedState!==null){X_(f);continue}}m!==null?(m.return=p,ae=m):X_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ix("display",o))}catch(w){st(t,t.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){st(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fn(e,t),ii(t),i&4&&Q_(t);break;case 21:break;default:Fn(e,t),ii(t)}}function ii(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(JE(n)){var i=n;break e}n=n.return}throw Error(G(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Al(s,""),i.flags&=-33);var r=G_(t);tg(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=G_(t);eg(t,a,o);break;default:throw Error(G(161))}}catch(l){st(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LA(t,e,n){ae=t,tT(t)}function tT(t,e,n){for(var i=(t.mode&1)!==0;ae!==null;){var s=ae,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||hu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Bt;a=hu;var c=Bt;if(hu=o,(Bt=l)&&!c)for(ae=s;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?J_(s):l!==null?(l.return=o,ae=l):J_(s);for(;r!==null;)ae=r,tT(r),r=r.sibling;ae=s,hu=a,Bt=c}Y_(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,ae=r):Y_(t)}}function Y_(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||_d(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Bt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&M_(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}M_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Dl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Bt||e.flags&512&&Zp(e)}catch(p){st(e,e.return,p)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function X_(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function J_(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_d(4,e)}catch(l){st(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){st(e,s,l)}}var r=e.return;try{Zp(e)}catch(l){st(e,r,l)}break;case 5:var o=e.return;try{Zp(e)}catch(l){st(e,o,l)}}}catch(l){st(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var FA=Math.ceil,Ih=Hi.ReactCurrentDispatcher,Pm=Hi.ReactCurrentOwner,Cn=Hi.ReactCurrentBatchConfig,ke=0,xt=null,ht=null,Pt=0,fn=0,xo=$s(0),mt=0,$l=null,Nr=0,wd=0,Nm=0,fl=null,Zt=null,Rm=0,$o=1/0,ki=null,kh=!1,ng=null,Is=null,du=!1,gs=null,Ch=0,pl=0,ig=null,Hu=-1,Ku=0;function Qt(){return ke&6?ot():Hu!==-1?Hu:Hu=ot()}function ks(t){return t.mode&1?ke&2&&Pt!==0?Pt&-Pt:bA.transition!==null?(Ku===0&&(Ku=Vx()),Ku):(t=Me,t!==0||(t=window.event,t=t===void 0?16:Kx(t.type)),t):1}function qn(t,e,n,i){if(50<pl)throw pl=0,ig=null,Error(G(185));dc(t,n,i),(!(ke&2)||t!==xt)&&(t===xt&&(!(ke&2)&&(wd|=n),mt===4&&ls(t,Pt)),on(t,i),n===1&&ke===0&&!(e.mode&1)&&($o=ot()+500,md&&Hs()))}function on(t,e){var n=t.callbackNode;bC(t,e);var i=hh(t,t===xt?Pt:0);if(i===0)n!==null&&a_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&a_(n),e===1)t.tag===0?wA(Z_.bind(null,t)):hE(Z_.bind(null,t)),mA(function(){!(ke&6)&&Hs()}),n=null;else{switch(Bx(i)){case 1:n=sm;break;case 4:n=Lx;break;case 16:n=uh;break;case 536870912:n=Fx;break;default:n=uh}n=cT(n,nT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nT(t,e){if(Hu=-1,Ku=0,ke&6)throw Error(G(327));var n=t.callbackNode;if(Po()&&t.callbackNode!==n)return null;var i=hh(t,t===xt?Pt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ah(t,i);else{e=i;var s=ke;ke|=2;var r=sT();(xt!==t||Pt!==e)&&(ki=null,$o=ot()+500,Tr(t,e));do try{UA();break}catch(a){iT(t,a)}while(!0);ym(),Ih.current=r,ke=s,ht!==null?e=0:(xt=null,Pt=0,e=mt)}if(e!==0){if(e===2&&(s=Pp(t),s!==0&&(i=s,e=sg(t,s))),e===1)throw n=$l,Tr(t,0),ls(t,i),on(t,ot()),n;if(e===6)ls(t,i);else{if(s=t.current.alternate,!(i&30)&&!VA(s)&&(e=Ah(t,i),e===2&&(r=Pp(t),r!==0&&(i=r,e=sg(t,r))),e===1))throw n=$l,Tr(t,0),ls(t,i),on(t,ot()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(G(345));case 2:hr(t,Zt,ki);break;case 3:if(ls(t,i),(i&130023424)===i&&(e=Rm+500-ot(),10<e)){if(hh(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fp(hr.bind(null,t,Zt,ki),e);break}hr(t,Zt,ki);break;case 4:if(ls(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Kn(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=ot()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FA(i/1960))-i,10<i){t.timeoutHandle=Fp(hr.bind(null,t,Zt,ki),i);break}hr(t,Zt,ki);break;case 5:hr(t,Zt,ki);break;default:throw Error(G(329))}}}return on(t,ot()),t.callbackNode===n?nT.bind(null,t):null}function sg(t,e){var n=fl;return t.current.memoizedState.isDehydrated&&(Tr(t,e).flags|=256),t=Ah(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&rg(e)),t}function rg(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function VA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Yn(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~Nm,e&=~wd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),i=1<<n;t[n]=-1,e&=~i}}function Z_(t){if(ke&6)throw Error(G(327));Po();var e=hh(t,0);if(!(e&1))return on(t,ot()),null;var n=Ah(t,e);if(t.tag!==0&&n===2){var i=Pp(t);i!==0&&(e=i,n=sg(t,i))}if(n===1)throw n=$l,Tr(t,0),ls(t,e),on(t,ot()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hr(t,Zt,ki),on(t,ot()),null}function Dm(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&($o=ot()+500,md&&Hs())}}function Rr(t){gs!==null&&gs.tag===0&&!(ke&6)&&Po();var e=ke;ke|=1;var n=Cn.transition,i=Me;try{if(Cn.transition=null,Me=1,t)return t()}finally{Me=i,Cn.transition=n,ke=e,!(ke&6)&&Hs()}}function Mm(){fn=xo.current,Ge(xo)}function Tr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gA(n)),ht!==null)for(n=ht.return;n!==null;){var i=n;switch(pm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&mh();break;case 3:Wo(),Ge(sn),Ge(zt),Em();break;case 5:xm(i);break;case 4:Wo();break;case 13:Ge(Je);break;case 19:Ge(Je);break;case 10:vm(i.type._context);break;case 22:case 23:Mm()}n=n.return}if(xt=t,ht=t=Cs(t.current,null),Pt=fn=e,mt=0,$l=null,Nm=wd=Nr=0,Zt=fl=null,vr!==null){for(e=0;e<vr.length;e++)if(n=vr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}vr=null}return t}function iT(t,e){do{var n=ht;try{if(ym(),Wu.current=Sh,Th){for(var i=Ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Th=!1}if(Pr=0,wt=pt=Ze=null,hl=!1,Ul=0,Pm.current=null,n===null||n.return===null){mt=1,$l=e,ht=null;break}e:{var r=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=B_(o);if(m!==null){m.flags&=-257,U_(m,o,a,r,e),m.mode&1&&V_(r,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){V_(r,c,e),jm();break e}l=Error(G(426))}}else if(Xe&&a.mode&1){var x=B_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),U_(x,o,a,r,e),gm(zo(l,a));break e}}r=l=zo(l,a),mt!==4&&(mt=2),fl===null?fl=[r]:fl.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var b=BE(r,l,e);D_(r,b);break e;case 1:a=l;var E=r.type,k=r.stateNode;if(!(r.flags&128)&&(typeof E.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Is===null||!Is.has(k)))){r.flags|=65536,e&=-e,r.lanes|=e;var D=UE(r,a,e);D_(r,D);break e}}r=r.return}while(r!==null)}oT(n)}catch(N){e=N,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function sT(){var t=Ih.current;return Ih.current=Sh,t===null?Sh:t}function jm(){(mt===0||mt===3||mt===2)&&(mt=4),xt===null||!(Nr&268435455)&&!(wd&268435455)||ls(xt,Pt)}function Ah(t,e){var n=ke;ke|=2;var i=sT();(xt!==t||Pt!==e)&&(ki=null,Tr(t,e));do try{BA();break}catch(s){iT(t,s)}while(!0);if(ym(),ke=n,Ih.current=i,ht!==null)throw Error(G(261));return xt=null,Pt=0,mt}function BA(){for(;ht!==null;)rT(ht)}function UA(){for(;ht!==null&&!dC();)rT(ht)}function rT(t){var e=lT(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?oT(t):ht=e,Pm.current=null}function oT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MA(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ht=null;return}}else if(n=DA(n,e,fn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);mt===0&&(mt=5)}function hr(t,e,n){var i=Me,s=Cn.transition;try{Cn.transition=null,Me=1,WA(t,e,n,i)}finally{Cn.transition=s,Me=i}return null}function WA(t,e,n,i){do Po();while(gs!==null);if(ke&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(xC(t,r),t===xt&&(ht=xt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||du||(du=!0,cT(uh,function(){return Po(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Cn.transition,Cn.transition=null;var o=Me;Me=1;var a=ke;ke|=4,Pm.current=null,OA(t,n),eT(n,t),lA(Op),dh=!!jp,Op=jp=null,t.current=n,LA(n),fC(),ke=a,Me=o,Cn.transition=r}else t.current=n;if(du&&(du=!1,gs=t,Ch=s),r=t.pendingLanes,r===0&&(Is=null),mC(n.stateNode),on(t,ot()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(kh)throw kh=!1,t=ng,ng=null,t;return Ch&1&&t.tag!==0&&Po(),r=t.pendingLanes,r&1?t===ig?pl++:(pl=0,ig=t):pl=0,Hs(),null}function Po(){if(gs!==null){var t=Bx(Ch),e=Cn.transition,n=Me;try{if(Cn.transition=null,Me=16>t?16:t,gs===null)var i=!1;else{if(t=gs,gs=null,Ch=0,ke&6)throw Error(G(331));var s=ke;for(ke|=4,ae=t.current;ae!==null;){var r=ae,o=r.child;if(ae.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:dl(8,h,r)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var p=h.sibling,m=h.return;if(XE(h),h===c){ae=null;break}if(p!==null){p.return=m,ae=p;break}ae=m}}}var v=r.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}ae=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,ae=o;else e:for(;ae!==null;){if(r=ae,r.flags&2048)switch(r.tag){case 0:case 11:case 15:dl(9,r,r.return)}var b=r.sibling;if(b!==null){b.return=r.return,ae=b;break e}ae=r.return}}var E=t.current;for(ae=E;ae!==null;){o=ae;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,ae=k;else e:for(o=E;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_d(9,a)}}catch(N){st(a,a.return,N)}if(a===o){ae=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ae=D;break e}ae=a.return}}if(ke=s,Hs(),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(hd,t)}catch{}i=!0}return i}finally{Me=n,Cn.transition=e}}return!1}function e0(t,e,n){e=zo(n,e),e=BE(t,e,1),t=Ss(t,e,1),e=Qt(),t!==null&&(dc(t,1,e),on(t,e))}function st(t,e,n){if(t.tag===3)e0(t,t,n);else for(;e!==null;){if(e.tag===3){e0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Is===null||!Is.has(i))){t=zo(n,t),t=UE(e,t,1),e=Ss(e,t,1),t=Qt(),e!==null&&(dc(e,1,t),on(e,t));break}}e=e.return}}function zA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(Pt&n)===n&&(mt===4||mt===3&&(Pt&130023424)===Pt&&500>ot()-Rm?Tr(t,0):Nm|=n),on(t,e)}function aT(t,e){e===0&&(t.mode&1?(e=nu,nu<<=1,!(nu&130023424)&&(nu=4194304)):e=1);var n=Qt();t=Vi(t,e),t!==null&&(dc(t,e,n),on(t,n))}function $A(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aT(t,n)}function HA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(G(314))}i!==null&&i.delete(e),aT(t,n)}var lT;lT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,RA(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Xe&&e.flags&1048576&&dE(e,_h,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;$u(t,e),t=e.pendingProps;var s=Vo(e,zt.current);Ao(e,n),s=Sm(null,e,i,t,s,n);var r=Im();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(i)?(r=!0,yh(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wm(e),s.updater=vd,e.stateNode=s,s._reactInternals=e,Hp(e,i,t,n),e=Gp(null,e,i,!0,r,n)):(e.tag=0,Xe&&r&&fm(e),qt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch($u(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=qA(i),t=Un(i,t),s){case 0:e=qp(null,e,i,t,n);break e;case 1:e=$_(null,e,i,t,n);break e;case 11:e=W_(null,e,i,t,n);break e;case 14:e=z_(null,e,i,Un(i.type,t),n);break e}throw Error(G(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Un(i,s),qp(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Un(i,s),$_(t,e,i,s,n);case 3:e:{if(HE(e),t===null)throw Error(G(387));i=e.pendingProps,r=e.memoizedState,s=r.element,vE(t,e),xh(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=zo(Error(G(423)),e),e=H_(t,e,i,n,s);break e}else if(i!==s){s=zo(Error(G(424)),e),e=H_(t,e,i,n,s);break e}else for(pn=Ts(e.stateNode.containerInfo.firstChild),mn=e,Xe=!0,zn=null,n=mE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bo(),i===s){e=Bi(t,e,n);break e}qt(t,e,i,n)}e=e.child}return e;case 5:return _E(e),t===null&&Wp(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,Lp(i,s)?o=null:r!==null&&Lp(i,r)&&(e.flags|=32),$E(t,e),qt(t,e,o,n),e.child;case 6:return t===null&&Wp(e),null;case 13:return KE(t,e,n);case 4:return bm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Uo(e,null,i,n):qt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Un(i,s),W_(t,e,i,s,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,Be(wh,i._currentValue),i._currentValue=o,r!==null)if(Yn(r.value,o)){if(r.children===s.children&&!sn.current){e=Bi(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=ji(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),zp(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zp(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Ao(e,n),s=Nn(s),i=i(s),e.flags|=1,qt(t,e,i,n),e.child;case 14:return i=e.type,s=Un(i,e.pendingProps),s=Un(i.type,s),z_(t,e,i,s,n);case 15:return WE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Un(i,s),$u(t,e),e.tag=1,rn(i)?(t=!0,yh(e)):t=!1,Ao(e,n),VE(e,i,s),Hp(e,i,s,n),Gp(null,e,i,!0,t,n);case 19:return qE(t,e,n);case 22:return zE(t,e,n)}throw Error(G(156,e.tag))};function cT(t,e){return Ox(t,e)}function KA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,i){return new KA(t,e,n,i)}function Om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qA(t){if(typeof t=="function")return Om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tm)return 11;if(t===nm)return 14}return 2}function Cs(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qu(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")Om(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ho:return Sr(n.children,s,r,e);case em:o=8,s|=8;break;case gp:return t=In(12,n,e,s|2),t.elementType=gp,t.lanes=r,t;case mp:return t=In(13,n,e,s),t.elementType=mp,t.lanes=r,t;case yp:return t=In(19,n,e,s),t.elementType=yp,t.lanes=r,t;case _x:return bd(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yx:o=10;break e;case vx:o=9;break e;case tm:o=11;break e;case nm:o=14;break e;case rs:o=16,i=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=In(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Sr(t,e,n,i){return t=In(7,t,i,e),t.lanes=n,t}function bd(t,e,n,i){return t=In(22,t,i,e),t.elementType=_x,t.lanes=n,t.stateNode={isHidden:!1},t}function Vf(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function Bf(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GA(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wf(0),this.expirationTimes=wf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wf(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lm(t,e,n,i,s,r,o,a,l){return t=new GA(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=In(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wm(r),t}function QA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function uT(t){if(!t)return Os;t=t._reactInternals;e:{if(zr(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(rn(n))return uE(t,n,e)}return e}function hT(t,e,n,i,s,r,o,a,l){return t=Lm(n,i,!0,t,s,r,o,a,l),t.context=uT(null),n=t.current,i=Qt(),s=ks(n),r=ji(i,s),r.callback=e??null,Ss(n,r,s),t.current.lanes=s,dc(t,s,i),on(t,i),t}function xd(t,e,n,i){var s=e.current,r=Qt(),o=ks(s);return n=uT(n),e.context===null?e.context=n:e.pendingContext=n,e=ji(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ss(s,e,o),t!==null&&(qn(t,s,o,r),Uu(t,s,o)),o}function Ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fm(t,e){t0(t,e),(t=t.alternate)&&t0(t,e)}function YA(){return null}var dT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vm(t){this._internalRoot=t}Ed.prototype.render=Vm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));xd(t,e,null,null)};Ed.prototype.unmount=Vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rr(function(){xd(null,t,null,null)}),e[Fi]=null}};function Ed(t){this._internalRoot=t}Ed.prototype.unstable_scheduleHydration=function(t){if(t){var e=zx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&Hx(t)}};function Bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n0(){}function XA(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Ph(o);r.call(c)}}var o=hT(e,i,t,0,null,!1,!1,"",n0);return t._reactRootContainer=o,t[Fi]=o.current,Ol(t.nodeType===8?t.parentNode:t),Rr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Ph(l);a.call(c)}}var l=Lm(t,0,!1,null,null,!1,!1,"",n0);return t._reactRootContainer=l,t[Fi]=l.current,Ol(t.nodeType===8?t.parentNode:t),Rr(function(){xd(e,l,n,i)}),l}function Sd(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=Ph(o);a.call(l)}}xd(e,o,t,s)}else o=XA(n,e,t,s,i);return Ph(o)}Ux=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ga(e.pendingLanes);n!==0&&(rm(e,n|1),on(e,ot()),!(ke&6)&&($o=ot()+500,Hs()))}break;case 13:Rr(function(){var i=Vi(t,1);if(i!==null){var s=Qt();qn(i,t,1,s)}}),Fm(t,1)}};om=function(t){if(t.tag===13){var e=Vi(t,134217728);if(e!==null){var n=Qt();qn(e,t,134217728,n)}Fm(t,134217728)}};Wx=function(t){if(t.tag===13){var e=ks(t),n=Vi(t,e);if(n!==null){var i=Qt();qn(n,t,e,i)}Fm(t,e)}};zx=function(){return Me};$x=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};kp=function(t,e,n){switch(e){case"input":if(wp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=gd(i);if(!s)throw Error(G(90));bx(i),wp(i,s)}}}break;case"textarea":Ex(t,n);break;case"select":e=n.value,e!=null&&So(t,!!n.multiple,e,!1)}};Px=Dm;Nx=Rr;var JA={usingClientEntryPoint:!1,Events:[pc,mo,gd,Cx,Ax,Dm]},Oa={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZA={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mx(t),t===null?null:t.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||YA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{hd=fu.inject(ZA),hi=fu}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JA;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bm(e))throw Error(G(200));return QA(t,e,null,n)};_n.createRoot=function(t,e){if(!Bm(t))throw Error(G(299));var n=!1,i="",s=dT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lm(t,1,!1,null,null,n,!1,i,s),t[Fi]=e.current,Ol(t.nodeType===8?t.parentNode:t),new Vm(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=Mx(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return Rr(t)};_n.hydrate=function(t,e,n){if(!Td(e))throw Error(G(200));return Sd(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!Bm(t))throw Error(G(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=dT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hT(e,null,t,1,n??null,s,!1,r,o),t[Fi]=e.current,Ol(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ed(e)};_n.render=function(t,e,n){if(!Td(e))throw Error(G(200));return Sd(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Td(t))throw Error(G(40));return t._reactRootContainer?(Rr(function(){Sd(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};_n.unstable_batchedUpdates=Dm;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Td(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Sd(t,e,n,!1,i)};_n.version="18.3.1-next-f1338f8080-20240426";function fT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fT)}catch(t){console.error(t)}}fT(),fx.exports=_n;var eP=fx.exports,i0=eP;fp.createRoot=i0.createRoot,fp.hydrateRoot=i0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hl(){return Hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hl.apply(this,arguments)}var ms;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ms||(ms={}));const s0="popstate";function tP(t){t===void 0&&(t={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return og("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:Nh(s)}return iP(e,n,null,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Um(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nP(){return Math.random().toString(36).substr(2,8)}function r0(t,e){return{usr:t.state,key:t.key,idx:e}}function og(t,e,n,i){return n===void 0&&(n=null),Hl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ra(e):e,{state:n,key:e&&e.key||i||nP()})}function Nh(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function iP(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=ms.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Hl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=ms.Pop;let x=h(),b=x==null?null:x-c;c=x,l&&l({action:a,location:w.location,delta:b})}function p(x,b){a=ms.Push;let E=og(w.location,x,b);c=h()+1;let k=r0(E,c),D=w.createHref(E);try{o.pushState(k,"",D)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(D)}r&&l&&l({action:a,location:w.location,delta:1})}function m(x,b){a=ms.Replace;let E=og(w.location,x,b);c=h();let k=r0(E,c),D=w.createHref(E);o.replaceState(k,"",D),r&&l&&l({action:a,location:w.location,delta:0})}function v(x){let b=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof x=="string"?x:Nh(x);return E=E.replace(/ $/,"%20"),et(b,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,b)}let w={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(s0,f),l=x,()=>{s.removeEventListener(s0,f),l=null}},createHref(x){return e(s,x)},createURL:v,encodeLocation(x){let b=v(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(x){return o.go(x)}};return w}var o0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(o0||(o0={}));function sP(t,e,n){return n===void 0&&(n="/"),rP(t,e,n)}function rP(t,e,n,i){let s=typeof e=="string"?ra(e):e,r=Ho(s.pathname||"/",n);if(r==null)return null;let o=pT(t);oP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=yP(r);a=gP(o[l],c)}return a}function pT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(et(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=As([i,l.relativePath]),h=n.concat(l);r.children&&r.children.length>0&&(et(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),pT(r.children,e,h,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:fP(c,r.index),routesMeta:h})};return t.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of gT(r.path))s(r,o,l)}),e}function gT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=gT(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function oP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:pP(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const aP=/^:[\w-]+$/,lP=3,cP=2,uP=1,hP=10,dP=-2,a0=t=>t==="*";function fP(t,e){let n=t.split("/"),i=n.length;return n.some(a0)&&(i+=dP),e&&(i+=cP),n.filter(s=>!a0(s)).reduce((s,r)=>s+(aP.test(r)?lP:r===""?uP:hP),i)}function pP(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function gP(t,e,n){let{routesMeta:i}=t,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=r==="/"?e:e.slice(r.length)||"/",f=ag({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:As([r,f.pathname]),pathnameBase:xP(As([r,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(r=As([r,f.pathnameBase]))}return o}function ag(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=mP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let w=a[f]||"";o=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:t}}function mP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Um(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function yP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Um(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ho(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const vP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_P=t=>vP.test(t);function wP(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?ra(t):t,r;if(n)if(_P(n))r=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Um(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?r=l0(n.substring(1),"/"):r=l0(n,e)}else r=e;return{pathname:r,search:EP(i),hash:TP(s)}}function l0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Uf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wm(t,e){let n=bP(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zm(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=ra(t):(s=Hl({},t),et(!s.pathname||!s.pathname.includes("?"),Uf("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),Uf("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),Uf("#","search","hash",s)));let r=t===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=wP(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const As=t=>t.join("/").replace(/\/\/+/g,"/"),xP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mT=["post","put","patch","delete"];new Set(mT);const IP=["get",...mT];new Set(IP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kl.apply(this,arguments)}const Id=M.createContext(null),yT=M.createContext(null),_i=M.createContext(null),kd=M.createContext(null),Ks=M.createContext({outlet:null,matches:[],isDataRoute:!1}),vT=M.createContext(null);function kP(t,e){let{relative:n}=e===void 0?{}:e;oa()||et(!1);let{basename:i,navigator:s}=M.useContext(_i),{hash:r,pathname:o,search:a}=Cd(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:As([i,o])),s.createHref({pathname:l,search:a,hash:r})}function oa(){return M.useContext(kd)!=null}function qs(){return oa()||et(!1),M.useContext(kd).location}function _T(t){M.useContext(_i).static||M.useLayoutEffect(t)}function Gs(){let{isDataRoute:t}=M.useContext(Ks);return t?BP():CP()}function CP(){oa()||et(!1);let t=M.useContext(Id),{basename:e,future:n,navigator:i}=M.useContext(_i),{matches:s}=M.useContext(Ks),{pathname:r}=qs(),o=JSON.stringify(Wm(s,n.v7_relativeSplatPath)),a=M.useRef(!1);return _T(()=>{a.current=!0}),M.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=zm(c,JSON.parse(o),r,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:As([e,f.pathname])),(h.replace?i.replace:i.push)(f,h.state,h)},[e,i,o,r,t])}function Cd(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=M.useContext(_i),{matches:s}=M.useContext(Ks),{pathname:r}=qs(),o=JSON.stringify(Wm(s,i.v7_relativeSplatPath));return M.useMemo(()=>zm(t,JSON.parse(o),r,n==="path"),[t,o,r,n])}function AP(t,e){return PP(t,e)}function PP(t,e,n,i){oa()||et(!1);let{navigator:s}=M.useContext(_i),{matches:r}=M.useContext(Ks),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=qs(),h;if(e){var f;let x=typeof e=="string"?ra(e):e;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||et(!1),h=x}else h=c;let p=h.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=sP(t,{pathname:m}),w=jP(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:As([l,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:As([l,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),r,n,i);return e&&w?M.createElement(kd.Provider,{value:{location:Kl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ms.Pop}},w):w}function NP(){let t=VP(),e=SP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const RP=M.createElement(NP,null);class DP extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Ks.Provider,{value:this.props.routeContext},M.createElement(vT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MP(t){let{routeContext:e,match:n,children:i}=t,s=M.useContext(Id);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Ks.Provider,{value:e},i)}function jP(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var r;if(!n)return null;if(n.errors)t=n.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||et(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:m}=n,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let m,v=!1,w=null,x=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||RP,l&&(c<0&&p===0?(UP("route-fallback"),v=!0,x=null):c===p&&(v=!0,x=f.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),E=()=>{let k;return m?k=w:v?k=x:f.route.Component?k=M.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=h,M.createElement(MP,{match:f,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:k})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?M.createElement(DP,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):E()},null)}var wT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wT||{}),bT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bT||{});function OP(t){let e=M.useContext(Id);return e||et(!1),e}function LP(t){let e=M.useContext(yT);return e||et(!1),e}function FP(t){let e=M.useContext(Ks);return e||et(!1),e}function xT(t){let e=FP(),n=e.matches[e.matches.length-1];return n.route.id||et(!1),n.route.id}function VP(){var t;let e=M.useContext(vT),n=LP(),i=xT();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function BP(){let{router:t}=OP(wT.UseNavigateStable),e=xT(bT.UseNavigateStable),n=M.useRef(!1);return _T(()=>{n.current=!0}),M.useCallback(function(s,r){r===void 0&&(r={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Kl({fromRouteId:e},r)))},[t,e])}const c0={};function UP(t,e,n){c0[t]||(c0[t]=!0)}function WP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lg(t){let{to:e,replace:n,state:i,relative:s}=t;oa()||et(!1);let{future:r,static:o}=M.useContext(_i),{matches:a}=M.useContext(Ks),{pathname:l}=qs(),c=Gs(),h=zm(e,Wm(a,r.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return M.useEffect(()=>c(JSON.parse(f),{replace:n,state:i,relative:s}),[c,f,s,n,i]),null}function Bn(t){et(!1)}function zP(t){let{basename:e="/",children:n=null,location:i,navigationType:s=ms.Pop,navigator:r,static:o=!1,future:a}=t;oa()&&et(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:r,static:o,future:Kl({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=ra(i));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:v="default"}=i,w=M.useMemo(()=>{let x=Ho(h,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:v},navigationType:s}},[l,h,f,p,m,v,s]);return w==null?null:M.createElement(_i.Provider,{value:c},M.createElement(kd.Provider,{children:n,value:w}))}function $P(t){let{children:e,location:n}=t;return AP(cg(e),n)}new Promise(()=>{});function cg(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(i,s)=>{if(!M.isValidElement(i))return;let r=[...e,s];if(i.type===M.Fragment){n.push.apply(n,cg(i.props.children,r));return}i.type!==Bn&&et(!1),!i.props.index||!i.props.children||et(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=cg(i.props.children,r)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rh(){return Rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Rh.apply(this,arguments)}function ET(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function HP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KP(t,e){return t.button===0&&(!e||e==="_self")&&!HP(t)}const qP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],QP="6";try{window.__reactRouterVersion=QP}catch{}const YP=M.createContext({isTransitioning:!1}),XP="startTransition",u0=z1[XP];function JP(t){let{basename:e,children:n,future:i,window:s}=t,r=M.useRef();r.current==null&&(r.current=tP({window:s,v5Compat:!0}));let o=r.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=M.useCallback(f=>{c&&u0?u0(()=>l(f)):l(f)},[l,c]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.useEffect(()=>WP(i),[i]),M.createElement(zP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const ZP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ql=M.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,p=ET(e,qP),{basename:m}=M.useContext(_i),v,w=!1;if(typeof c=="string"&&eN.test(c)&&(v=c,ZP))try{let k=new URL(window.location.href),D=c.startsWith("//")?new URL(k.protocol+c):new URL(c),N=Ho(D.pathname,m);D.origin===k.origin&&N!=null?c=N+D.search+D.hash:w=!0}catch{}let x=kP(c,{relative:s}),b=nN(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function E(k){i&&i(k),k.defaultPrevented||b(k)}return M.createElement("a",Rh({},p,{href:v||x,onClick:w||r?i:E,ref:n,target:l}))}),no=M.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:s=!1,className:r="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,f=ET(e,GP),p=Cd(l,{relative:f.relative}),m=qs(),v=M.useContext(yT),{navigator:w,basename:x}=M.useContext(_i),b=v!=null&&iN(p)&&c===!0,E=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,k=m.pathname,D=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(k=k.toLowerCase(),D=D?D.toLowerCase():null,E=E.toLowerCase()),D&&x&&(D=Ho(D,x)||D);const N=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let j=k===E||!o&&k.startsWith(E)&&k.charAt(N)==="/",T=D!=null&&(D===E||!o&&D.startsWith(E)&&D.charAt(E.length)==="/"),_={isActive:j,isPending:T,isTransitioning:b},I=j?i:void 0,P;typeof r=="function"?P=r(_):P=[r,j?"active":null,T?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(_):a;return M.createElement(ql,Rh({},f,{"aria-current":I,className:P,ref:n,style:R,to:l,viewTransition:c}),typeof h=="function"?h(_):h)});var ug;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ug||(ug={}));var h0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(h0||(h0={}));function tN(t){let e=M.useContext(Id);return e||et(!1),e}function nN(t,e){let{target:n,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=Gs(),c=qs(),h=Cd(t,{relative:o});return M.useCallback(f=>{if(KP(f,n)){f.preventDefault();let p=i!==void 0?i:Nh(c)===Nh(h);l(t,{replace:p,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,h,i,s,n,t,r,o,a])}function iN(t,e){e===void 0&&(e={});let n=M.useContext(YP);n==null&&et(!1);let{basename:i}=tN(ug.useViewTransitionState),s=Cd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let r=Ho(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Ho(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ag(s.pathname,o)!=null||ag(s.pathname,r)!=null}var d0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},sN=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},ST={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=r>>2,f=(r&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),i.push(n[h],n[f],n[p],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||c==null||f==null)throw new rN;const p=r<<2|a>>4;if(i.push(p),c!==64){const m=a<<4&240|c>>2;if(i.push(m),f!==64){const v=c<<6&192|f;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oN=function(t){const e=TT(t);return ST.encodeByteArray(e,!0)},Dh=function(t){return oN(t).replace(/\./g,"")},IT=function(t){try{return ST.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=()=>aN().__FIREBASE_DEFAULTS__,cN=()=>{if(typeof process>"u"||typeof d0>"u")return;const t=d0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IT(t[1]);return e&&JSON.parse(e)},Ad=()=>{try{return lN()||cN()||uN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kT=t=>{var e,n;return(n=(e=Ad())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hN=t=>{const e=kT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},CT=()=>{var t;return(t=Ad())===null||t===void 0?void 0:t.config},AT=t=>{var e;return(e=Ad())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dh(JSON.stringify(n)),Dh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function gN(){var t;const e=(t=Ad())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vN(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _N(){return!gN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NT(){try{return typeof indexedDB=="object"}catch{return!1}}function RT(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}function wN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="FirebaseError";class ti extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=bN,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$r.prototype.create)}}class $r{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?xN(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ti(s,a,i)}}function xN(t,e){return t.replace(EN,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const EN=/\{\$([^}]+)}/g;function TN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(f0(r)&&f0(o)){if(!Mh(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function f0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ya(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Xa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SN(t,e){const n=new IN(t,e);return n.subscribe.bind(n)}class IN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");kN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Wf),s.error===void 0&&(s.error=Wf),s.complete===void 0&&(s.complete=Wf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=1e3,AN=2,PN=4*60*60*1e3,NN=.5;function p0(t,e=CN,n=AN){const i=e*Math.pow(n,t),s=Math.round(NN*i*(Math.random()-.5)*2);return Math.min(PN,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class Xn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new dN;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MN(e))try{this.getOrInitializeService({instanceIdentifier:dr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dr){return this.instances.has(e)}getOptions(e=dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=dr){return this.component?this.component.multipleInstances?e:dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DN(t){return t===dr?void 0:t}function MN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const ON={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},LN=Te.INFO,FN={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},VN=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=FN[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pd{constructor(e){this.name=e,this._logLevel=LN,this._logHandler=VN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ON[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const BN=(t,e)=>e.some(n=>t instanceof n);let g0,m0;function UN(){return g0||(g0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WN(){return m0||(m0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DT=new WeakMap,hg=new WeakMap,MT=new WeakMap,zf=new WeakMap,$m=new WeakMap;function zN(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Ps(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&DT.set(n,t)}).catch(()=>{}),$m.set(e,t),e}function $N(t){if(hg.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});hg.set(t,e)}let dg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HN(t){dg=t(dg)}function KN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call($f(this),e,...n);return MT.set(i,e.sort?e.sort():[e]),Ps(i)}:WN().includes(t)?function(...e){return t.apply($f(this),e),Ps(DT.get(this))}:function(...e){return Ps(t.apply($f(this),e))}}function qN(t){return typeof t=="function"?KN(t):(t instanceof IDBTransaction&&$N(t),BN(t,UN())?new Proxy(t,dg):t)}function Ps(t){if(t instanceof IDBRequest)return zN(t);if(zf.has(t))return zf.get(t);const e=qN(t);return e!==t&&(zf.set(t,e),$m.set(e,t)),e}const $f=t=>$m.get(t);function jT(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Ps(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Ps(o.result),l.oldVersion,l.newVersion,Ps(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const GN=["get","getKey","getAll","getAllKeys","count"],QN=["put","add","delete","clear"],Hf=new Map;function y0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hf.get(e))return Hf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=QN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||GN.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Hf.set(e,r),r}HN(t=>({...t,get:(e,n,i)=>y0(e,n)||t.get(e,n,i),has:(e,n)=>!!y0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function XN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fg="@firebase/app",v0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Pd("@firebase/app"),JN="@firebase/app-compat",ZN="@firebase/analytics-compat",eR="@firebase/analytics",tR="@firebase/app-check-compat",nR="@firebase/app-check",iR="@firebase/auth",sR="@firebase/auth-compat",rR="@firebase/database",oR="@firebase/data-connect",aR="@firebase/database-compat",lR="@firebase/functions",cR="@firebase/functions-compat",uR="@firebase/installations",hR="@firebase/installations-compat",dR="@firebase/messaging",fR="@firebase/messaging-compat",pR="@firebase/performance",gR="@firebase/performance-compat",mR="@firebase/remote-config",yR="@firebase/remote-config-compat",vR="@firebase/storage",_R="@firebase/storage-compat",wR="@firebase/firestore",bR="@firebase/vertexai-preview",xR="@firebase/firestore-compat",ER="firebase",TR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="[DEFAULT]",SR={[fg]:"fire-core",[JN]:"fire-core-compat",[eR]:"fire-analytics",[ZN]:"fire-analytics-compat",[nR]:"fire-app-check",[tR]:"fire-app-check-compat",[iR]:"fire-auth",[sR]:"fire-auth-compat",[rR]:"fire-rtdb",[oR]:"fire-data-connect",[aR]:"fire-rtdb-compat",[lR]:"fire-fn",[cR]:"fire-fn-compat",[uR]:"fire-iid",[hR]:"fire-iid-compat",[dR]:"fire-fcm",[fR]:"fire-fcm-compat",[pR]:"fire-perf",[gR]:"fire-perf-compat",[mR]:"fire-rc",[yR]:"fire-rc-compat",[vR]:"fire-gcs",[_R]:"fire-gcs-compat",[wR]:"fire-fst",[xR]:"fire-fst-compat",[bR]:"fire-vertex","fire-js":"fire-js",[ER]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,IR=new Map,gg=new Map;function _0(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yi(t){const e=t.name;if(gg.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,t);for(const n of jh.values())_0(n,t);for(const n of IR.values())_0(n,t);return!0}function yc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ui(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new $r("app","Firebase",kR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Xn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=TR;function OT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:pg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Ns.create("bad-app-name",{appName:String(s)});if(n||(n=CT()),!n)throw Ns.create("no-options");const r=jh.get(s);if(r){if(Mh(n,r.options)&&Mh(i,r.config))return r;throw Ns.create("duplicate-app",{appName:s})}const o=new jN(s);for(const l of gg.values())o.addComponent(l);const a=new CR(n,i,o);return jh.set(s,a),a}function LT(t=pg){const e=jh.get(t);if(!e&&t===pg&&CT())return OT();if(!e)throw Ns.create("no-app",{appName:t});return e}function An(t,e,n){var i;let s=(i=SR[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(a.join(" "));return}yi(new Xn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="firebase-heartbeat-database",PR=1,Gl="firebase-heartbeat-store";let Kf=null;function FT(){return Kf||(Kf=jT(AR,PR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),Kf}async function NR(t){try{const n=(await FT()).transaction(Gl),i=await n.objectStore(Gl).get(VT(t));return await n.done,i}catch(e){if(e instanceof ti)Ui.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function w0(t,e){try{const i=(await FT()).transaction(Gl,"readwrite");await i.objectStore(Gl).put(e,VT(t)),await i.done}catch(n){if(n instanceof ti)Ui.warn(n.message);else{const i=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(i.message)}}}function VT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=1024,DR=30*24*60*60*1e3;class MR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=b0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=DR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ui.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b0(),{heartbeatsToSend:i,unsentEntries:s}=jR(this._heartbeatsCache.heartbeats),r=Dh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ui.warn(n),""}}}function b0(){return new Date().toISOString().substring(0,10)}function jR(t,e=RR){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),x0(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),x0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class OR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NT()?RT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return w0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return w0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function x0(t){return Dh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){yi(new Xn("platform-logger",e=>new YN(e),"PRIVATE")),yi(new Xn("heartbeat",e=>new MR(e),"PRIVATE")),An(fg,v0,t),An(fg,v0,"esm2017"),An("fire-js","")}LR("");function Hm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function BT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FR=BT,UT=new $r("auth","Firebase",BT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Pd("@firebase/auth");function VR(t,...e){Oh.logLevel<=Te.WARN&&Oh.warn(`Auth (${aa}): ${t}`,...e)}function Gu(t,...e){Oh.logLevel<=Te.ERROR&&Oh.error(`Auth (${aa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,...e){throw Km(t,...e)}function fi(t,...e){return Km(t,...e)}function WT(t,e,n){const i=Object.assign(Object.assign({},FR()),{[e]:n});return new $r("auth","Firebase",i).create(e,{appName:t.name})}function Oi(t){return WT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Km(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return UT.create(t,...e)}function me(t,e,...n){if(!t)throw Km(e,...n)}function Ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gu(e),new Error(e)}function Wi(t,e){t||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BR(){return E0()==="http:"||E0()==="https:"}function E0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BR()||PT()||"connection"in navigator)?navigator.onLine:!0}function WR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=pN()||yN()}get(){return UR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t,e){Wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new vc(3e4,6e4);function Ki(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wi(t,e,n,i,s={}){return $T(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=mc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},r);return mN()||(c.referrerPolicy="no-referrer"),zT.fetch()(HT(t,t.config.apiHost,n,a),c)})}async function $T(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},zR),e);try{const s=new KR(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw pu(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw pu(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw WT(t,h,c);Jn(t,h)}}catch(s){if(s instanceof ti)throw s;Jn(t,"network-request-failed",{message:String(s)})}}async function _c(t,e,n,i,s={}){const r=await wi(t,e,n,i,s);return"mfaPendingCredential"in r&&Jn(t,"multi-factor-auth-required",{_serverResponse:r}),r}function HT(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?qm(t.config,s):`${t.config.apiScheme}://${s}`}function HR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(fi(this.auth,"network-request-failed")),$R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=fi(t,e,i);return s.customData._tokenResponse=n,s}function T0(t){return t!==void 0&&t.enterprise!==void 0}class qR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function GR(t,e){return wi(t,"GET","/v2/recaptchaConfig",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(t,e){return wi(t,"POST","/v1/accounts:delete",e)}async function KT(t,e){return wi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YR(t,e=!1){const n=Qe(t),i=await n.getIdToken(e),s=Gm(i);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:gl(qf(s.auth_time)),issuedAtTime:gl(qf(s.iat)),expirationTime:gl(qf(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function qf(t){return Number(t)*1e3}function Gm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Gu("JWT malformed, contained fewer than 3 sections"),null;try{const s=IT(n);return s?JSON.parse(s):(Gu("Failed to decode base64 JWT payload"),null)}catch(s){return Gu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function S0(t){const e=Gm(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ti&&XR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function XR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Ko(t,KT(n,{idToken:i}));me(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?qT(r.providerUserInfo):[],a=eD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new yg(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function ZR(t){const e=Qe(t);await Lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eD(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function qT(t){return t.map(e=>{var{providerId:n}=e,i=Hm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(t,e){const n=await $T(t,{},async()=>{const i=mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=HT(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nD(t,e){return wi(t,"POST","/v2/accounts:revokeToken",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=S0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await tD(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new No;return i&&(me(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(me(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Di{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=Hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new yg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ko(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Di(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await Ko(this,QR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,o,a,l,c,h;const f=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:k,emailVerified:D,isAnonymous:N,providerData:j,stsTokenManager:T}=n;me(k&&T,e,"internal-error");const _=No.fromJSON(this.name,T);me(typeof k=="string",e,"internal-error"),es(f,e.name),es(p,e.name),me(typeof D=="boolean",e,"internal-error"),me(typeof N=="boolean",e,"internal-error"),es(m,e.name),es(v,e.name),es(w,e.name),es(x,e.name),es(b,e.name),es(E,e.name);const I=new Di({uid:k,auth:e,email:p,emailVerified:D,displayName:f,isAnonymous:N,photoURL:v,phoneNumber:m,tenantId:w,stsTokenManager:_,createdAt:b,lastLoginAt:E});return j&&Array.isArray(j)&&(I.providerData=j.map(P=>Object.assign({},P))),x&&(I._redirectEventId=x),I}static async _fromIdTokenResponse(e,n,i=!1){const s=new No;s.updateFromServerResponse(n);const r=new Di({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Lh(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];me(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?qT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new No;a.updateFromIdToken(i);const l=new Di({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new yg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Map;function Mi(t){Wi(t instanceof Function,"Expected a class definition");let e=I0.get(t);return e?(Wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GT.type="NONE";const k0=GT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ro{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Qu(this.userKey,s.apiKey,r),this.fullPersistenceKey=Qu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Di._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ro(Mi(k0),e,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||Mi(k0);const o=Qu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Di._fromJSON(e,h);c!==r&&(a=f),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Ro(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Ro(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eS(e))return"Blackberry";if(tS(e))return"Webos";if(YT(e))return"Safari";if((e.includes("chrome/")||XT(e))&&!e.includes("edge/"))return"Chrome";if(ZT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function QT(t=$t()){return/firefox\//i.test(t)}function YT(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XT(t=$t()){return/crios\//i.test(t)}function JT(t=$t()){return/iemobile/i.test(t)}function ZT(t=$t()){return/android/i.test(t)}function eS(t=$t()){return/blackberry/i.test(t)}function tS(t=$t()){return/webos/i.test(t)}function Qm(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iD(t=$t()){var e;return Qm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sD(){return vN()&&document.documentMode===10}function nS(t=$t()){return Qm(t)||ZT(t)||tS(t)||eS(t)||/windows phone/i.test(t)||JT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t,e=[]){let n;switch(t){case"Browser":n=C0($t());break;case"Worker":n=`${C0($t())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e={}){return wi(t,"GET","/v2/passwordPolicy",Ki(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=6;class lD{constructor(e){var n,i,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:aD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new A0(this),this.idTokenSubscription=new A0(this),this.beforeStateQueue=new rD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await KT(this,{idToken:e}),i=await Di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ui(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ui(this.app))return Promise.reject(Oi(this));const n=e?Qe(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ui(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oD(this),n=new lD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $r("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await nD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qs(t){return Qe(t)}class A0{constructor(e){this.auth=e,this.observer=null,this.addObserver=SN(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uD(t){Nd=t}function sS(t){return Nd.loadJS(t)}function hD(){return Nd.recaptchaEnterpriseScript}function dD(){return Nd.gapiScript}function fD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const pD="recaptcha-enterprise",gD="NO_RECAPTCHA";class mD{constructor(e){this.type=pD,this.auth=Qs(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{GR(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new qR(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;T0(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(gD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{i(this.auth).then(a=>{if(!n&&T0(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=hD();l.length!==0&&(l+=a),sS(l).then(()=>{s(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function P0(t,e,n,i=!1){const s=new mD(t);let r;try{r=await s.verify(n)}catch{r=await s.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Fh(t,e,n,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await P0(t,e,n,n==="getOobCode");return i(t,r)}else return i(t,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await P0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t,e){const n=yc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Mh(r,e??{}))return s;Jn(s,"already-initialized")}return n.initialize({options:e})}function vD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function _D(t,e,n){const i=Qs(t);me(i._canInitEmulator,i,"emulator-config-failed"),me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=rS(e),{host:o,port:a}=wD(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${r}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),bD()}function rS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wD(t){const e=rS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:N0(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:N0(o)}}}function N0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,n){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}async function xD(t,e){return wi(t,"POST","/v1/accounts:update",e)}async function ED(t,e){return wi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t,e){return _c(t,"POST","/v1/accounts:signInWithPassword",Ki(t,e))}async function SD(t,e){return wi(t,"POST","/v1/accounts:sendOobCode",Ki(t,e))}async function ID(t,e){return SD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(t,e){return _c(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))}async function CD(t,e){return _c(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Ym{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ql(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ql(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fh(e,n,"signInWithPassword",TD);case"emailLink":return kD(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fh(e,i,"signUpPassword",ED);case"emailLink":return CD(e,{idToken:n,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e){return _c(t,"POST","/v1/accounts:signInWithIdp",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="http://localhost";class Dr extends Ym{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=Hm(n,["providerId","signInMethod"]);if(!i||!s)return null;const o=new Dr(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Do(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Do(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Do(e,n)}buildRequest(){const e={requestUri:AD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ND(t){const e=Ya(Xa(t)).link,n=e?Ya(Xa(e)).deep_link_id:null,i=Ya(Xa(t)).deep_link_id;return(i?Ya(Xa(i)).link:null)||i||n||e||t}class Xm{constructor(e){var n,i,s,r,o,a;const l=Ya(Xa(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,f=PD((s=l.mode)!==null&&s!==void 0?s:null);me(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=ND(e);try{return new Xm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.providerId=Hr.PROVIDER_ID}static credential(e,n){return Ql._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Xm.parseLink(n);return me(i,"argument-error"),Ql._fromEmailAndCode(e,i.code,i.tenantId)}}Hr.PROVIDER_ID="password";Hr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends oS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends wc{constructor(){super("facebook.com")}static credential(e){return Dr._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Dr._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return us.credential(n,i)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends wc{constructor(){super("github.com")}static credential(e){return Dr._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends wc{constructor(){super("twitter.com")}static credential(e,n){return Dr._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ds.credential(n,i)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e){return _c(t,"POST","/v1/accounts:signUp",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await Di._fromIdTokenResponse(e,i,s),o=R0(i);return new Mr({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=R0(i);return new Mr({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function R0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends ti{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Vh(e,n,i,s)}}function aS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(t,r,e,i):r})}async function DD(t,e,n=!1){const i=await Ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(t,e,n=!1){const{auth:i}=t;if(ui(i.app))return Promise.reject(Oi(i));const s="reauthenticate";try{const r=await Ko(t,aS(i,s,e,t),n);me(r.idToken,i,"internal-error");const o=Gm(r.idToken);me(o,i,"internal-error");const{sub:a}=o;return me(t.uid===a,i,"user-mismatch"),Mr._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Jn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(t,e,n=!1){if(ui(t.app))return Promise.reject(Oi(t));const i="signIn",s=await aS(t,i,e),r=await Mr._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function MD(t,e){return cS(Qs(t),e)}async function jD(t,e){return lS(Qe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(t){const e=Qs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OD(t,e,n){const i=Qs(t);await Fh(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ID)}async function LD(t,e,n){if(ui(t.app))return Promise.reject(Oi(t));const i=Qs(t),o=await Fh(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&uS(t),l}),a=await Mr._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function FD(t,e,n){return ui(t.app)?Promise.reject(Oi(t)):MD(Qe(t),Hr.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&uS(t),i})}function VD(t,e){return BD(Qe(t),null,e)}async function BD(t,e,n){const{auth:i}=t,r={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(r.password=n);const o=await Ko(t,xD(i,r));await t._updateTokensIfNecessary(o,!0)}function UD(t,e,n,i){return Qe(t).onIdTokenChanged(e,n,i)}function WD(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function zD(t,e,n,i){return Qe(t).onAuthStateChanged(e,n,i)}function $D(t){return Qe(t).signOut()}const Bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=1e3,KD=10;class dS extends hS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);sD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KD):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},HD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dS.type="LOCAL";const qD=dS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS extends hS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fS.type="SESSION";const pS=fS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Rd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await GD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Jm("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(p.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function YD(t){pi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function XD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZD(){return gS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="firebaseLocalStorageDb",eM=1,Uh="firebaseLocalStorage",yS="fbase_key";class bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dd(t,e){return t.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function tM(){const t=indexedDB.deleteDatabase(mS);return new bc(t).toPromise()}function vg(){const t=indexedDB.open(mS,eM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Uh,{keyPath:yS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Uh)?e(i):(i.close(),await tM(),e(await vg()))})})}async function D0(t,e,n){const i=Dd(t,!0).put({[yS]:e,value:n});return new bc(i).toPromise()}async function nM(t,e){const n=Dd(t,!1).get(e),i=await new bc(n).toPromise();return i===void 0?null:i.value}function M0(t,e){const n=Dd(t,!0).delete(e);return new bc(n).toPromise()}const iM=800,sM=3;class vS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>sM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rd._getInstance(ZD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XD(),!this.activeServiceWorker)return;this.sender=new QD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vg();return await D0(e,Bh,"1"),await M0(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>D0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>nM(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>M0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Dd(s,!1).getAll();return new bc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vS.type="LOCAL";const rM=vS;new vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t,e){return e?Mi(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends Ym{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Do(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aM(t){return cS(t.auth,new Zm(t),t.bypassAuthState)}function lM(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),lS(n,new Zm(t),t.bypassAuthState)}async function cM(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),DD(n,new Zm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aM;case"linkViaPopup":case"linkViaRedirect":return cM;case"reauthViaPopup":case"reauthViaRedirect":return lM;default:Jn(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new vc(2e3,1e4);class Eo extends _S{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=Jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uM.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="pendingRedirect",Yu=new Map;class dM extends _S{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const i=await fM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fM(t,e){const n=mM(e),i=gM(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function pM(t,e){Yu.set(t._key(),e)}function gM(t){return Mi(t._redirectPersistence)}function mM(t){return Qu(hM,t.config.apiKey,t.name)}async function yM(t,e,n=!1){if(ui(t.app))return Promise.reject(Oi(t));const i=Qs(t),s=oM(i,e),o=await new dM(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=10*60*1e3;class _M{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!wS(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(fi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vM&&this.cachedEventUids.clear(),this.cachedEventUids.has(j0(e))}saveEventToCache(e){this.cachedEventUids.add(j0(e)),this.lastProcessedEventTime=Date.now()}}function j0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(t,e={}){return wi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EM=/^https?/;async function TM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bM(t);for(const n of e)try{if(SM(n))return}catch{}Jn(t,"unauthorized-domain")}function SM(t){const e=mg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!EM.test(n))return!1;if(xM.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=new vc(3e4,6e4);function O0(){const t=pi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kM(t){return new Promise((e,n)=>{var i,s,r;function o(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),n(fi(t,"network-request-failed"))},timeout:IM.get()})}if(!((s=(i=pi().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=pi().gapi)===null||r===void 0)&&r.load)o();else{const a=fD("iframefcb");return pi()[a]=()=>{gapi.load?o():n(fi(t,"network-request-failed"))},sS(`${dD()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function CM(t){return Xu=Xu||kM(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new vc(5e3,15e3),PM="__/auth/iframe",NM="emulator/auth/iframe",RM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MM(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qm(e,NM):`https://${t.config.authDomain}/${PM}`,i={apiKey:e.apiKey,appName:t.name,v:aa},s=DM.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${mc(i).slice(1)}`}async function jM(t){const e=await CM(t),n=pi().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:MM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RM,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=fi(t,"network-request-failed"),a=pi().setTimeout(()=>{r(o)},AM.get());function l(){pi().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LM=500,FM=600,VM="_blank",BM="http://localhost";class L0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UM(t,e,n,i=LM,s=FM){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},OM),{width:i.toString(),height:s.toString(),top:r,left:o}),c=$t().toLowerCase();n&&(a=XT(c)?VM:n),QT(c)&&(e=e||BM,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,v])=>`${p}${m}=${v},`,"");if(iD(c)&&a!=="_self")return WM(e||"",a),new L0(null);const f=window.open(e||"",a,h);me(f,t,"popup-blocked");try{f.focus()}catch{}return new L0(f)}function WM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="__/auth/handler",$M="emulator/auth/handler",HM=encodeURIComponent("fac");async function F0(t,e,n,i,s,r){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:aa,eventId:s};if(e instanceof oS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",TN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof wc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${HM}=${encodeURIComponent(l)}`:"";return`${KM(t)}?${mc(a).slice(1)}${c}`}function KM({config:t}){return t.emulator?qm(t,$M):`https://${t.authDomain}/${zM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="webStorageSupport";class qM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pS,this._completeRedirectFn=yM,this._overrideRedirectResult=pM}async _openPopup(e,n,i,s){var r;Wi((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await F0(e,n,i,mg(),s);return UM(e,o,Jm())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await F0(e,n,i,mg(),s);return YD(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Wi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await jM(e),i=new _M(e);return n.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gf,{type:Gf},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[Gf];o!==void 0&&n(!!o),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nS()||YT()||Qm()}}const GM=qM;var V0="@firebase/auth",B0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XM(t){yi(new Xn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iS(t)},c=new cD(i,s,r,l);return vD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),yi(new Xn("auth-internal",e=>{const n=Qs(e.getProvider("auth").getImmediate());return(i=>new QM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),An(V0,B0,YM(t)),An(V0,B0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=5*60,ZM=AT("authIdTokenMaxAge")||JM;let U0=null;const e2=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>ZM)return;const s=n==null?void 0:n.token;U0!==s&&(U0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function t2(t=LT()){const e=yc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yD(t,{popupRedirectResolver:GM,persistence:[rM,qD,pS]}),i=AT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=e2(r.toString());WD(n,o,()=>o(n.currentUser)),UD(n,a=>o(a))}}const s=kT("auth");return s&&_D(n,`http://${s}`),n}function n2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}uD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=fi("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",n2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XM("Browser");var i2="firebase",s2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An(i2,s2,"app");var W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,bS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(P,R,A){for(var S=Array(arguments.length-2),U=2;U<arguments.length;U++)S[U-2]=arguments[U];return _.prototype[R].apply(P,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,I){I||(I=0);var P=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)P[R]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(R=0;16>R;++R)P[R]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],R=T.g[2];var A=T.g[3],S=_+(A^I&(R^A))+P[0]+3614090360&4294967295;_=I+(S<<7&4294967295|S>>>25),S=A+(R^_&(I^R))+P[1]+3905402710&4294967295,A=_+(S<<12&4294967295|S>>>20),S=R+(I^A&(_^I))+P[2]+606105819&4294967295,R=A+(S<<17&4294967295|S>>>15),S=I+(_^R&(A^_))+P[3]+3250441966&4294967295,I=R+(S<<22&4294967295|S>>>10),S=_+(A^I&(R^A))+P[4]+4118548399&4294967295,_=I+(S<<7&4294967295|S>>>25),S=A+(R^_&(I^R))+P[5]+1200080426&4294967295,A=_+(S<<12&4294967295|S>>>20),S=R+(I^A&(_^I))+P[6]+2821735955&4294967295,R=A+(S<<17&4294967295|S>>>15),S=I+(_^R&(A^_))+P[7]+4249261313&4294967295,I=R+(S<<22&4294967295|S>>>10),S=_+(A^I&(R^A))+P[8]+1770035416&4294967295,_=I+(S<<7&4294967295|S>>>25),S=A+(R^_&(I^R))+P[9]+2336552879&4294967295,A=_+(S<<12&4294967295|S>>>20),S=R+(I^A&(_^I))+P[10]+4294925233&4294967295,R=A+(S<<17&4294967295|S>>>15),S=I+(_^R&(A^_))+P[11]+2304563134&4294967295,I=R+(S<<22&4294967295|S>>>10),S=_+(A^I&(R^A))+P[12]+1804603682&4294967295,_=I+(S<<7&4294967295|S>>>25),S=A+(R^_&(I^R))+P[13]+4254626195&4294967295,A=_+(S<<12&4294967295|S>>>20),S=R+(I^A&(_^I))+P[14]+2792965006&4294967295,R=A+(S<<17&4294967295|S>>>15),S=I+(_^R&(A^_))+P[15]+1236535329&4294967295,I=R+(S<<22&4294967295|S>>>10),S=_+(R^A&(I^R))+P[1]+4129170786&4294967295,_=I+(S<<5&4294967295|S>>>27),S=A+(I^R&(_^I))+P[6]+3225465664&4294967295,A=_+(S<<9&4294967295|S>>>23),S=R+(_^I&(A^_))+P[11]+643717713&4294967295,R=A+(S<<14&4294967295|S>>>18),S=I+(A^_&(R^A))+P[0]+3921069994&4294967295,I=R+(S<<20&4294967295|S>>>12),S=_+(R^A&(I^R))+P[5]+3593408605&4294967295,_=I+(S<<5&4294967295|S>>>27),S=A+(I^R&(_^I))+P[10]+38016083&4294967295,A=_+(S<<9&4294967295|S>>>23),S=R+(_^I&(A^_))+P[15]+3634488961&4294967295,R=A+(S<<14&4294967295|S>>>18),S=I+(A^_&(R^A))+P[4]+3889429448&4294967295,I=R+(S<<20&4294967295|S>>>12),S=_+(R^A&(I^R))+P[9]+568446438&4294967295,_=I+(S<<5&4294967295|S>>>27),S=A+(I^R&(_^I))+P[14]+3275163606&4294967295,A=_+(S<<9&4294967295|S>>>23),S=R+(_^I&(A^_))+P[3]+4107603335&4294967295,R=A+(S<<14&4294967295|S>>>18),S=I+(A^_&(R^A))+P[8]+1163531501&4294967295,I=R+(S<<20&4294967295|S>>>12),S=_+(R^A&(I^R))+P[13]+2850285829&4294967295,_=I+(S<<5&4294967295|S>>>27),S=A+(I^R&(_^I))+P[2]+4243563512&4294967295,A=_+(S<<9&4294967295|S>>>23),S=R+(_^I&(A^_))+P[7]+1735328473&4294967295,R=A+(S<<14&4294967295|S>>>18),S=I+(A^_&(R^A))+P[12]+2368359562&4294967295,I=R+(S<<20&4294967295|S>>>12),S=_+(I^R^A)+P[5]+4294588738&4294967295,_=I+(S<<4&4294967295|S>>>28),S=A+(_^I^R)+P[8]+2272392833&4294967295,A=_+(S<<11&4294967295|S>>>21),S=R+(A^_^I)+P[11]+1839030562&4294967295,R=A+(S<<16&4294967295|S>>>16),S=I+(R^A^_)+P[14]+4259657740&4294967295,I=R+(S<<23&4294967295|S>>>9),S=_+(I^R^A)+P[1]+2763975236&4294967295,_=I+(S<<4&4294967295|S>>>28),S=A+(_^I^R)+P[4]+1272893353&4294967295,A=_+(S<<11&4294967295|S>>>21),S=R+(A^_^I)+P[7]+4139469664&4294967295,R=A+(S<<16&4294967295|S>>>16),S=I+(R^A^_)+P[10]+3200236656&4294967295,I=R+(S<<23&4294967295|S>>>9),S=_+(I^R^A)+P[13]+681279174&4294967295,_=I+(S<<4&4294967295|S>>>28),S=A+(_^I^R)+P[0]+3936430074&4294967295,A=_+(S<<11&4294967295|S>>>21),S=R+(A^_^I)+P[3]+3572445317&4294967295,R=A+(S<<16&4294967295|S>>>16),S=I+(R^A^_)+P[6]+76029189&4294967295,I=R+(S<<23&4294967295|S>>>9),S=_+(I^R^A)+P[9]+3654602809&4294967295,_=I+(S<<4&4294967295|S>>>28),S=A+(_^I^R)+P[12]+3873151461&4294967295,A=_+(S<<11&4294967295|S>>>21),S=R+(A^_^I)+P[15]+530742520&4294967295,R=A+(S<<16&4294967295|S>>>16),S=I+(R^A^_)+P[2]+3299628645&4294967295,I=R+(S<<23&4294967295|S>>>9),S=_+(R^(I|~A))+P[0]+4096336452&4294967295,_=I+(S<<6&4294967295|S>>>26),S=A+(I^(_|~R))+P[7]+1126891415&4294967295,A=_+(S<<10&4294967295|S>>>22),S=R+(_^(A|~I))+P[14]+2878612391&4294967295,R=A+(S<<15&4294967295|S>>>17),S=I+(A^(R|~_))+P[5]+4237533241&4294967295,I=R+(S<<21&4294967295|S>>>11),S=_+(R^(I|~A))+P[12]+1700485571&4294967295,_=I+(S<<6&4294967295|S>>>26),S=A+(I^(_|~R))+P[3]+2399980690&4294967295,A=_+(S<<10&4294967295|S>>>22),S=R+(_^(A|~I))+P[10]+4293915773&4294967295,R=A+(S<<15&4294967295|S>>>17),S=I+(A^(R|~_))+P[1]+2240044497&4294967295,I=R+(S<<21&4294967295|S>>>11),S=_+(R^(I|~A))+P[8]+1873313359&4294967295,_=I+(S<<6&4294967295|S>>>26),S=A+(I^(_|~R))+P[15]+4264355552&4294967295,A=_+(S<<10&4294967295|S>>>22),S=R+(_^(A|~I))+P[6]+2734768916&4294967295,R=A+(S<<15&4294967295|S>>>17),S=I+(A^(R|~_))+P[13]+1309151649&4294967295,I=R+(S<<21&4294967295|S>>>11),S=_+(R^(I|~A))+P[4]+4149444226&4294967295,_=I+(S<<6&4294967295|S>>>26),S=A+(I^(_|~R))+P[11]+3174756917&4294967295,A=_+(S<<10&4294967295|S>>>22),S=R+(_^(A|~I))+P[2]+718787259&4294967295,R=A+(S<<15&4294967295|S>>>17),S=I+(A^(R|~_))+P[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+A&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,P=this.B,R=this.h,A=0;A<_;){if(R==0)for(;A<=I;)s(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(P[R++]=T.charCodeAt(A++),R==this.blockSize){s(this,P),R=0;break}}else for(;A<_;)if(P[R++]=T[A++],R==this.blockSize){s(this,P),R=0;break}}this.h=R,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var P=0;32>P;P+=8)T[I++]=this.g[_]>>>P&255;return T};function r(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function o(T,_){this.h=_;for(var I=[],P=!0,R=T.length-1;0<=R;R--){var A=T[R]|0;P&&A==_||(I[R]=A,P=!1)}this.g=I}var a={};function l(T){return-128<=T&&128>T?r(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return x(c(-T));for(var _=[],I=1,P=0;T>=I;P++)_[P]=T/I|0,I*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return x(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(_,8)),P=f,R=0;R<T.length;R+=8){var A=Math.min(8,T.length-R),S=parseInt(T.substring(R,R+A),_);8>A?(A=c(Math.pow(_,A)),P=P.j(A).add(c(S))):(P=P.j(I),P=P.add(c(S)))}return P}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-x(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var P=this.i(I);T+=(0<=P?P:4294967296+P)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(v(this))return"0";if(w(this))return"-"+x(this).toString(T);for(var _=c(Math.pow(T,6)),I=this,P="";;){var R=D(I,_).g;I=b(I,R.j(_));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=R,v(I))return A+P;for(;6>A.length;)A="0"+A;P=A+P}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function v(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function w(T){return T.h==-1}t.l=function(T){return T=b(this,T),w(T)?-1:v(T)?0:1};function x(T){for(var _=T.g.length,I=[],P=0;P<_;P++)I[P]=~T.g[P];return new o(I,~T.h).add(p)}t.abs=function(){return w(this)?x(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],P=0,R=0;R<=_;R++){var A=P+(this.i(R)&65535)+(T.i(R)&65535),S=(A>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);P=S>>>16,A&=65535,S&=65535,I[R]=S<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function b(T,_){return T.add(x(_))}t.j=function(T){if(v(this)||v(T))return f;if(w(this))return w(T)?x(this).j(x(T)):x(x(this).j(T));if(w(T))return x(this.j(x(T)));if(0>this.l(m)&&0>T.l(m))return c(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],P=0;P<2*_;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<T.g.length;R++){var A=this.i(P)>>>16,S=this.i(P)&65535,U=T.i(R)>>>16,H=T.i(R)&65535;I[2*P+2*R]+=S*H,E(I,2*P+2*R),I[2*P+2*R+1]+=A*H,E(I,2*P+2*R+1),I[2*P+2*R+1]+=S*U,E(I,2*P+2*R+1),I[2*P+2*R+2]+=A*U,E(I,2*P+2*R+2)}for(P=0;P<_;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=_;P<2*_;P++)I[P]=0;return new o(I,0)};function E(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function k(T,_){this.g=T,this.h=_}function D(T,_){if(v(_))throw Error("division by zero");if(v(T))return new k(f,f);if(w(T))return _=D(x(T),_),new k(x(_.g),x(_.h));if(w(_))return _=D(T,x(_)),new k(x(_.g),_.h);if(30<T.g.length){if(w(T)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var I=p,P=_;0>=P.l(T);)I=N(I),P=N(P);var R=j(I,1),A=j(P,1);for(P=j(P,2),I=j(I,2);!v(P);){var S=A.add(P);0>=S.l(T)&&(R=R.add(I),A=S),P=j(P,1),I=j(I,1)}return _=b(T,R.j(_)),new k(R,_)}for(R=f;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),A=c(I),S=A.j(_);w(S)||0<S.l(T);)I-=P,A=c(I),S=A.j(_);v(A)&&(A=p),R=R.add(A),T=b(T,S)}return new k(R,T)}t.A=function(T){return D(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],P=0;P<_;P++)I[P]=this.i(P)&T.i(P);return new o(I,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],P=0;P<_;P++)I[P]=this.i(P)|T.i(P);return new o(I,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],P=0;P<_;P++)I[P]=this.i(P)^T.i(P);return new o(I,this.h^T.h)};function N(T){for(var _=T.g.length+1,I=[],P=0;P<_;P++)I[P]=T.i(P)<<1|T.i(P-1)>>>31;return new o(I,T.h)}function j(T,_){var I=_>>5;_%=32;for(var P=T.g.length-I,R=[],A=0;A<P;A++)R[A]=0<_?T.i(A+I)>>>_|T.i(A+I+1)<<32-_:T.i(A+I);return new o(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,bS=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ir=o}).apply(typeof W0<"u"?W0:typeof self<"u"?self:typeof window<"u"?window:{});var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xS,Ja,ES,Ju,_g,TS,SS,IS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,y){return u==Array.prototype||u==Object.prototype||(u[g]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gu=="object"&&gu];for(var g=0;g<u.length;++g){var y=u[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function s(u,g){if(g)e:{var y=i;u=u.split(".");for(var C=0;C<u.length-1;C++){var O=u[C];if(!(O in y))break e;y=y[O]}u=u[u.length-1],C=y[u],g=g(C),g!=C&&g!=null&&e(y,u,{configurable:!0,writable:!0,value:g})}}function r(u,g){u instanceof String&&(u+="");var y=0,C=!1,O={next:function(){if(!C&&y<u.length){var B=y++;return{value:g(B,u[B]),done:!1}}return C=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(u){return u||function(){return r(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function h(u,g,y){return u.call.apply(u.bind,arguments)}function f(u,g,y){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,C),u.apply(g,O)}}return function(){return u.apply(g,arguments)}}function p(u,g,y){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function m(u,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function v(u,g){function y(){}y.prototype=g.prototype,u.aa=g.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(C,O,B){for(var X=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)X[Le-2]=arguments[Le];return g.prototype[O].apply(C,X)}}function w(u){const g=u.length;if(0<g){const y=Array(g);for(let C=0;C<g;C++)y[C]=u[C];return y}return[]}function x(u,g){for(let y=1;y<arguments.length;y++){const C=arguments[y];if(l(C)){const O=u.length||0,B=C.length||0;u.length=O+B;for(let X=0;X<B;X++)u[O+X]=C[X]}else u.push(C)}}class b{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function E(u){return/^[\s\xa0]*$/.test(u)}function k(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var N=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function j(u,g,y){for(const C in u)g.call(y,u[C],C,u)}function T(u,g){for(const y in u)g.call(void 0,u[y],y,u)}function _(u){const g={};for(const y in u)g[y]=u[y];return g}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,g){let y,C;for(let O=1;O<arguments.length;O++){C=arguments[O];for(y in C)u[y]=C[y];for(let B=0;B<I.length;B++)y=I[B],Object.prototype.hasOwnProperty.call(C,y)&&(u[y]=C[y])}}function R(u){var g=1;u=u.split(":");const y=[];for(;0<g&&u.length;)y.push(u.shift()),g--;return u.length&&y.push(u.join(":")),y}function A(u){a.setTimeout(()=>{throw u},0)}function S(){var u=Q;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class U{constructor(){this.h=this.g=null}add(g,y){const C=H.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var H=new b(()=>new J,u=>u.reset());class J{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let L,V=!1,Q=new U,te=()=>{const u=a.Promise.resolve(void 0);L=()=>{u.then(z)}};var z=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(y){A(y)}var g=H;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}V=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return u}();function ue(u,g){if(q.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(N){e:{try{D(g.nodeName);var O=!0;break e}catch{}O=!1}O||(g=null)}}else y=="mouseover"?g=u.fromElement:y=="mouseout"&&(g=u.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Y[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ue.aa.h.call(this)}}v(ue,q);var Y={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),je=0;function lt(u,g,y,C,O){this.listener=u,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=O,this.key=++je,this.da=this.fa=!1}function Ae(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function We(u){this.src=u,this.g={},this.h=0}We.prototype.add=function(u,g,y,C,O){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var X=pe(u,g,C,O);return-1<X?(g=u[X],y||(g.fa=!1)):(g=new lt(g,this.src,B,!!C,O),g.fa=y,u.push(g)),g};function Z(u,g){var y=g.type;if(y in u.g){var C=u.g[y],O=Array.prototype.indexOf.call(C,g,void 0),B;(B=0<=O)&&Array.prototype.splice.call(C,O,1),B&&(Ae(g),u.g[y].length==0&&(delete u.g[y],u.h--))}}function pe(u,g,y,C){for(var O=0;O<u.length;++O){var B=u[O];if(!B.da&&B.listener==g&&B.capture==!!y&&B.ha==C)return O}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),Ye={};function ze(u,g,y,C,O){if(Array.isArray(g)){for(var B=0;B<g.length;B++)ze(u,g[B],y,C,O);return null}return y=ce(y),u&&u[Ee]?u.K(g,y,c(C)?!!C.capture:!1,O):Ve(u,g,y,!1,C,O)}function Ve(u,g,y,C,O,B){if(!g)throw Error("Invalid event type");var X=c(O)?!!O.capture:!!O,Le=ee(u);if(Le||(u[Oe]=Le=new We(u)),y=Le.add(g,y,C,X,B),y.proxy)return y;if(C=bn(),y.proxy=C,C.src=u,C.listener=y,u.addEventListener)se||(O=X),O===void 0&&(O=!1),u.addEventListener(g.toString(),C,O);else if(u.attachEvent)u.attachEvent(ln(g.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function bn(){function u(y){return g.call(u.src,u.listener,y)}const g=cn;return u}function Ht(u,g,y,C,O){if(Array.isArray(g))for(var B=0;B<g.length;B++)Ht(u,g[B],y,C,O);else C=c(C)?!!C.capture:!!C,y=ce(y),u&&u[Ee]?(u=u.i,g=String(g).toString(),g in u.g&&(B=u.g[g],y=pe(B,y,C,O),-1<y&&(Ae(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete u.g[g],u.h--)))):u&&(u=ee(u))&&(g=u.g[g.toString()],u=-1,g&&(u=pe(g,y,C,O)),(y=-1<u?g[u]:null)&&ft(y))}function ft(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ee])Z(g.i,u);else{var y=u.type,C=u.proxy;g.removeEventListener?g.removeEventListener(y,C,u.capture):g.detachEvent?g.detachEvent(ln(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=ee(g))?(Z(y,u),y.h==0&&(y.src=null,g[Oe]=null)):Ae(u)}}}function ln(u){return u in Ye?Ye[u]:Ye[u]="on"+u}function cn(u,g){if(u.da)u=!0;else{g=new ue(g,this);var y=u.listener,C=u.ha||u.src;u.fa&&ft(u),u=y.call(C,g)}return u}function ee(u){return u=u[Oe],u instanceof We?u:null}var F="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(u){return typeof u=="function"?u:(u[F]||(u[F]=function(g){return u.handleEvent(g)}),u[F])}function re(){W.call(this),this.i=new We(this),this.M=this,this.F=null}v(re,W),re.prototype[Ee]=!0,re.prototype.removeEventListener=function(u,g,y,C){Ht(this,u,g,y,C)};function he(u,g){var y,C=u.F;if(C)for(y=[];C;C=C.F)y.push(C);if(u=u.M,C=g.type||g,typeof g=="string")g=new q(g,u);else if(g instanceof q)g.target=g.target||u;else{var O=g;g=new q(C,u),P(g,O)}if(O=!0,y)for(var B=y.length-1;0<=B;B--){var X=g.g=y[B];O=ct(X,C,!0,g)&&O}if(X=g.g=u,O=ct(X,C,!0,g)&&O,O=ct(X,C,!1,g)&&O,y)for(B=0;B<y.length;B++)X=g.g=y[B],O=ct(X,C,!1,g)&&O}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var y=u.g[g],C=0;C<y.length;C++)Ae(y[C]);delete u.g[g],u.h--}}this.F=null},re.prototype.K=function(u,g,y,C){return this.i.add(String(u),g,!1,y,C)},re.prototype.L=function(u,g,y,C){return this.i.add(String(u),g,!0,y,C)};function ct(u,g,y,C){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var O=!0,B=0;B<g.length;++B){var X=g[B];if(X&&!X.da&&X.capture==y){var Le=X.listener,Et=X.ha||X.src;X.fa&&Z(u.i,X),O=Le.call(Et,C)!==!1&&O}}return O&&!C.defaultPrevented}function Xs(u,g,y){if(typeof u=="function")y&&(u=p(u,y));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Js(u){u.g=Xs(()=>{u.g=null,u.i&&(u.i=!1,Js(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Mc extends W{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Js(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zs(u){W.call(this),this.h=u,this.g={}}v(Zs,W);var ga=[];function ma(u){j(u.g,function(g,y){this.g.hasOwnProperty(y)&&ft(g)},u),u.g={}}Zs.prototype.N=function(){Zs.aa.N.call(this),ma(this)},Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ya=a.JSON.stringify,ef=a.JSON.parse,jc=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Yr(){}Yr.prototype.h=null;function qi(u){return u.h||(u.h=u.i())}function er(){}var xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bi(){q.call(this,"d")}v(bi,q);function Gi(){q.call(this,"c")}v(Gi,q);var ni={},Oc=null;function tr(){return Oc=Oc||new re}ni.La="serverreachability";function va(u){q.call(this,ni.La,u)}v(va,q);function Qi(u){const g=tr();he(g,new va(g))}ni.STAT_EVENT="statevent";function _a(u,g){q.call(this,ni.STAT_EVENT,u),this.stat=g}v(_a,q);function vt(u){const g=tr();he(g,new _a(g,u))}ni.Ma="timingevent";function wa(u,g){q.call(this,ni.Ma,u),this.size=g}v(wa,q);function ne(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function _e(){this.g=!0}_e.prototype.xa=function(){this.g=!1};function jn(u,g,y,C,O,B){u.info(function(){if(u.g)if(B)for(var X="",Le=B.split("&"),Et=0;Et<Le.length;Et++){var Pe=Le[Et].split("=");if(1<Pe.length){var Mt=Pe[0];Pe=Pe[1];var jt=Mt.split("_");X=2<=jt.length&&jt[1]=="type"?X+(Mt+"="+Pe+"&"):X+(Mt+"=redacted&")}}else X=null;else X=B;return"XMLHTTP REQ ("+C+") [attempt "+O+"]: "+g+`
`+y+`
`+X})}function Xr(u,g,y,C,O,B,X){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+O+"]: "+g+`
`+y+`
`+B+" "+X})}function On(u,g,y,C){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+s1(u,y)+(C?" "+C:"")})}function tf(u,g){u.info(function(){return"TIMEOUT: "+g})}_e.prototype.info=function(){};function s1(u,g){if(!u.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var C=y[u];if(!(2>C.length)){var O=C[1];if(Array.isArray(O)&&!(1>O.length)){var B=O[0];if(B!="noop"&&B!="stop"&&B!="close")for(var X=1;X<O.length;X++)O[X]=""}}}}return ya(y)}catch{return g}}var Lc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nf;function Fc(){}v(Fc,Yr),Fc.prototype.g=function(){return new XMLHttpRequest},Fc.prototype.i=function(){return{}},nf=new Fc;function Yi(u,g,y,C){this.j=u,this.i=g,this.l=y,this.R=C||1,this.U=new Zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hv}function hv(){this.i=null,this.g="",this.h=!1}var dv={},sf={};function rf(u,g,y){u.L=1,u.v=Wc(xi(g)),u.m=y,u.P=!0,fv(u,null)}function fv(u,g){u.F=Date.now(),Vc(u),u.A=xi(u.v);var y=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),kv(y.i,"t",C),u.C=0,y=u.j.J,u.h=new hv,u.g=Hv(u.j,y?g:null,!u.m),0<u.O&&(u.M=new Mc(p(u.Y,u,u.g),u.O)),g=u.U,y=u.g,C=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(ga[0]=O.toString()),O=ga);for(var B=0;B<O.length;B++){var X=ze(y,O[B],C||g.handleEvent,!1,g.h||g);if(!X)break;g.g[X.key]=X}g=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Qi(),jn(u.i,u.u,u.A,u.l,u.R,u.m)}Yi.prototype.ca=function(u){u=u.target;const g=this.M;g&&Ei(u)==3?g.j():this.Y(u)},Yi.prototype.Y=function(u){try{if(u==this.g)e:{const jt=Ei(this.g);var g=this.g.Ba();const eo=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Mv(this.g)))){this.J||jt!=4||g==7||(g==8||0>=eo?Qi(3):Qi(2)),of(this);var y=this.g.Z();this.X=y;t:if(pv(this)){var C=Mv(this.g);u="";var O=C.length,B=Ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),ba(this);var X="";break t}this.h.i=new a.TextDecoder}for(g=0;g<O;g++)this.h.h=!0,u+=this.h.i.decode(C[g],{stream:!(B&&g==O-1)});C.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=y==200,Xr(this.i,this.u,this.A,this.l,this.R,jt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Et=this.g;if((Le=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Le)){var Pe=Le;break t}}Pe=null}if(y=Pe)On(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,af(this,y);else{this.o=!1,this.s=3,vt(12),nr(this),ba(this);break e}}if(this.P){y=!0;let Ln;for(;!this.J&&this.C<X.length;)if(Ln=r1(this,X),Ln==sf){jt==4&&(this.s=4,vt(14),y=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==dv){this.s=4,vt(15),On(this.i,this.l,X,"[Invalid Chunk]"),y=!1;break}else On(this.i,this.l,Ln,null),af(this,Ln);if(pv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||X.length!=0||this.h.h||(this.s=1,vt(16),y=!1),this.o=this.o&&y,!y)On(this.i,this.l,X,"[Invalid Chunked Response]"),nr(this),ba(this);else if(0<X.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),ff(Mt),Mt.M=!0,vt(11))}}else On(this.i,this.l,X,null),af(this,X);jt==4&&nr(this),this.o&&!this.J&&(jt==4?Uv(this.j,this):(this.o=!1,Vc(this)))}else x1(this.g),y==400&&0<X.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),nr(this),ba(this)}}}catch{}finally{}};function pv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function r1(u,g){var y=u.C,C=g.indexOf(`
`,y);return C==-1?sf:(y=Number(g.substring(y,C)),isNaN(y)?dv:(C+=1,C+y>g.length?sf:(g=g.slice(C,C+y),u.C=C+y,g)))}Yi.prototype.cancel=function(){this.J=!0,nr(this)};function Vc(u){u.S=Date.now()+u.I,gv(u,u.I)}function gv(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ne(p(u.ba,u),g)}function of(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Yi.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(tf(this.i,this.A),this.L!=2&&(Qi(),vt(17)),nr(this),this.s=2,ba(this)):gv(this,this.S-u)};function ba(u){u.j.G==0||u.J||Uv(u.j,u)}function nr(u){of(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,ma(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function af(u,g){try{var y=u.j;if(y.G!=0&&(y.g==u||lf(y.h,u))){if(!u.K&&lf(y.h,u)&&y.G==3){try{var C=y.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var O=C;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Gc(y),Kc(y);else break e;df(y),vt(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=ne(p(y.Za,y),6e3));if(1>=vv(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else sr(y,11)}else if((u.K||y.g==u)&&Gc(y),!E(g))for(O=y.Da.g.parse(g),g=0;g<O.length;g++){let Pe=O[g];if(y.T=Pe[0],Pe=Pe[1],y.G==2)if(Pe[0]=="c"){y.K=Pe[1],y.ia=Pe[2];const Mt=Pe[3];Mt!=null&&(y.la=Mt,y.j.info("VER="+y.la));const jt=Pe[4];jt!=null&&(y.Aa=jt,y.j.info("SVER="+y.Aa));const eo=Pe[5];eo!=null&&typeof eo=="number"&&0<eo&&(C=1.5*eo,y.L=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const Ln=u.g;if(Ln){const Yc=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yc){var B=C.h;B.g||Yc.indexOf("spdy")==-1&&Yc.indexOf("quic")==-1&&Yc.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(cf(B,B.h),B.h=null))}if(C.D){const pf=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;pf&&(C.ya=pf,$e(C.I,C.D,pf))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),C=y;var X=u;if(C.qa=$v(C,C.J?C.ia:null,C.W),X.K){_v(C.h,X);var Le=X,Et=C.L;Et&&(Le.I=Et),Le.B&&(of(Le),Vc(Le)),C.g=X}else Vv(C);0<y.i.length&&qc(y)}else Pe[0]!="stop"&&Pe[0]!="close"||sr(y,7);else y.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?sr(y,7):hf(y):Pe[0]!="noop"&&y.l&&y.l.ta(Pe),y.v=0)}}Qi(4)}catch{}}var o1=class{constructor(u,g){this.g=u,this.map=g}};function mv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function vv(u){return u.h?1:u.g?u.g.size:0}function lf(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function cf(u,g){u.g?u.g.add(g):u.h=g}function _v(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}mv.prototype.cancel=function(){if(this.i=wv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const y of u.g.values())g=g.concat(y.D);return g}return w(u.i)}function a1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],y=u.length,C=0;C<y;C++)g.push(u[C]);return g}g=[],y=0;for(C in u)g[y++]=u[C];return g}function l1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var y=0;y<u;y++)g.push(y);return g}g=[],y=0;for(const C in u)g[y++]=C;return g}}}function bv(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var y=l1(u),C=a1(u),O=C.length,B=0;B<O;B++)g.call(void 0,C[B],y&&y[B],u)}var xv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function c1(u,g){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var C=u[y].indexOf("="),O=null;if(0<=C){var B=u[y].substring(0,C);O=u[y].substring(C+1)}else B=u[y];g(B,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ir(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ir){this.h=u.h,Bc(this,u.j),this.o=u.o,this.g=u.g,Uc(this,u.s),this.l=u.l;var g=u.i,y=new Ta;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Ev(this,y),this.m=u.m}else u&&(g=String(u).match(xv))?(this.h=!1,Bc(this,g[1]||"",!0),this.o=xa(g[2]||""),this.g=xa(g[3]||"",!0),Uc(this,g[4]),this.l=xa(g[5]||"",!0),Ev(this,g[6]||"",!0),this.m=xa(g[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}ir.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Ea(g,Tv,!0),":");var y=this.g;return(y||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Ea(g,Tv,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Ea(y,y.charAt(0)=="/"?d1:h1,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Ea(y,p1)),u.join("")};function xi(u){return new ir(u)}function Bc(u,g,y){u.j=y?xa(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Uc(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Ev(u,g,y){g instanceof Ta?(u.i=g,g1(u.i,u.h)):(y||(g=Ea(g,f1)),u.i=new Ta(g,u.h))}function $e(u,g,y){u.i.set(g,y)}function Wc(u){return $e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xa(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ea(u,g,y){return typeof u=="string"?(u=encodeURI(u).replace(g,u1),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function u1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Tv=/[#\/\?@]/g,h1=/[#\?:]/g,d1=/[#\?]/g,f1=/[#\?@]/g,p1=/#/g;function Ta(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Xi(u){u.g||(u.g=new Map,u.h=0,u.i&&c1(u.i,function(g,y){u.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Ta.prototype,t.add=function(u,g){Xi(this),this.i=null,u=Jr(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(g),this.h+=1,this};function Sv(u,g){Xi(u),g=Jr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Iv(u,g){return Xi(u),g=Jr(u,g),u.g.has(g)}t.forEach=function(u,g){Xi(this),this.g.forEach(function(y,C){y.forEach(function(O){u.call(g,O,C,this)},this)},this)},t.na=function(){Xi(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let C=0;C<g.length;C++){const O=u[C];for(let B=0;B<O.length;B++)y.push(g[C])}return y},t.V=function(u){Xi(this);let g=[];if(typeof u=="string")Iv(this,u)&&(g=g.concat(this.g.get(Jr(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)g=g.concat(u[y])}return g},t.set=function(u,g){return Xi(this),this.i=null,u=Jr(this,u),Iv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function kv(u,g,y){Sv(u,g),0<y.length&&(u.i=null,u.g.set(Jr(u,g),w(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var C=g[y];const B=encodeURIComponent(String(C)),X=this.V(C);for(C=0;C<X.length;C++){var O=B;X[C]!==""&&(O+="="+encodeURIComponent(String(X[C]))),u.push(O)}}return this.i=u.join("&")};function Jr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function g1(u,g){g&&!u.j&&(Xi(u),u.i=null,u.g.forEach(function(y,C){var O=C.toLowerCase();C!=O&&(Sv(this,C),kv(this,O,y))},u)),u.j=g}function m1(u,g){const y=new _e;if(a.Image){const C=new Image;C.onload=m(Ji,y,"TestLoadImage: loaded",!0,g,C),C.onerror=m(Ji,y,"TestLoadImage: error",!1,g,C),C.onabort=m(Ji,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=m(Ji,y,"TestLoadImage: timeout",!1,g,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else g(!1)}function y1(u,g){const y=new _e,C=new AbortController,O=setTimeout(()=>{C.abort(),Ji(y,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:C.signal}).then(B=>{clearTimeout(O),B.ok?Ji(y,"TestPingServer: ok",!0,g):Ji(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),Ji(y,"TestPingServer: error",!1,g)})}function Ji(u,g,y,C,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),C(y)}catch{}}function v1(){this.g=new jc}function _1(u,g,y){const C=y||"";try{bv(u,function(O,B){let X=O;c(O)&&(X=ya(O)),g.push(C+B+"="+encodeURIComponent(X))})}catch(O){throw g.push(C+"type="+encodeURIComponent("_badmap")),O}}function zc(u){this.l=u.Ub||null,this.j=u.eb||!1}v(zc,Yr),zc.prototype.g=function(){return new $c(this.l,this.j)},zc.prototype.i=function(u){return function(){return u}}({});function $c(u,g){re.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v($c,re),t=$c.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Ia(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Sa(this):Ia(this),this.readyState==3&&Cv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Sa(this))},t.Qa=function(u){this.g&&(this.response=u,Sa(this))},t.ga=function(){this.g&&Sa(this)};function Sa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ia(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=g.next();return u.join(`\r
`)};function Ia(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Av(u){let g="";return j(u,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function uf(u,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=Av(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):$e(u,g,y))}function it(u){re.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(it,re);var w1=/^https?$/i,b1=["POST","PUT"];t=it.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nf.g(),this.v=this.o?qi(this.o):qi(nf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){Pv(this,B);return}if(u=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var O in C)y.set(O,C[O]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const B of C.keys())y.set(B,C.get(B));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(b1,g,void 0))||C||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of y)this.g.setRequestHeader(B,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dv(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){Pv(this,B)}};function Pv(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Nv(u),Hc(u)}function Nv(u){u.A||(u.A=!0,he(u,"complete"),he(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,he(this,"complete"),he(this,"abort"),Hc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hc(this,!0)),it.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rv(this):this.bb())},t.bb=function(){Rv(this)};function Rv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ei(u)!=4||u.Z()!=2)){if(u.u&&Ei(u)==4)Xs(u.Ea,0,u);else if(he(u,"readystatechange"),Ei(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=X===0){var O=String(u.D).match(xv)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),C=!w1.test(O?O.toLowerCase():"")}y=C}if(y)he(u,"complete"),he(u,"success");else{u.m=6;try{var B=2<Ei(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",Nv(u)}}finally{Hc(u)}}}}function Hc(u,g){if(u.g){Dv(u);const y=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||he(u,"ready");try{y.onreadystatechange=C}catch{}}}function Dv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ei(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ef(g)}};function Mv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function x1(u){const g={};u=(u.g&&2<=Ei(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(E(u[C]))continue;var y=R(u[C]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=g[O]||[];g[O]=B,B.push(y)}T(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ka(u,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||g}function jv(u){this.Aa=0,this.i=[],this.j=new _e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ka("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ka("baseRetryDelayMs",5e3,u),this.cb=ka("retryDelaySeedMs",1e4,u),this.Wa=ka("forwardChannelMaxRetries",2,u),this.wa=ka("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new mv(u&&u.concurrentRequestLimit),this.Da=new v1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jv.prototype,t.la=8,t.G=1,t.connect=function(u,g,y,C){vt(0),this.W=u,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.I=$v(this,null,this.W),qc(this)};function hf(u){if(Ov(u),u.G==3){var g=u.U++,y=xi(u.I);if($e(y,"SID",u.K),$e(y,"RID",g),$e(y,"TYPE","terminate"),Ca(u,y),g=new Yi(u,u.j,g),g.L=2,g.v=Wc(xi(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.v,y=!0),y||(g.g=Hv(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Vc(g)}zv(u)}function Kc(u){u.g&&(ff(u),u.g.cancel(),u.g=null)}function Ov(u){Kc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Gc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function qc(u){if(!yv(u.h)&&!u.s){u.s=!0;var g=u.Ga;L||te(),V||(L(),V=!0),Q.add(g,u),u.B=0}}function E1(u,g){return vv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ne(p(u.Ga,u,g),Wv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Yi(this,this.j,u);let B=this.o;if(this.S&&(B?(B=_(B),P(B,this.S)):B=this.S),this.m!==null||this.O||(O.H=B,B=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Fv(this,O,g),y=xi(this.I),$e(y,"RID",u),$e(y,"CVER",22),this.D&&$e(y,"X-HTTP-Session-Id",this.D),Ca(this,y),B&&(this.O?g="headers="+encodeURIComponent(String(Av(B)))+"&"+g:this.m&&uf(y,this.m,B)),cf(this.h,O),this.Ua&&$e(y,"TYPE","init"),this.P?($e(y,"$req",g),$e(y,"SID","null"),O.T=!0,rf(O,y,null)):rf(O,y,g),this.G=2}}else this.G==3&&(u?Lv(this,u):this.i.length==0||yv(this.h)||Lv(this))};function Lv(u,g){var y;g?y=g.l:y=u.U++;const C=xi(u.I);$e(C,"SID",u.K),$e(C,"RID",y),$e(C,"AID",u.T),Ca(u,C),u.m&&u.o&&uf(C,u.m,u.o),y=new Yi(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Fv(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),cf(u.h,y),rf(y,C,g)}function Ca(u,g){u.H&&j(u.H,function(y,C){$e(g,C,y)}),u.l&&bv({},function(y,C){$e(g,C,y)})}function Fv(u,g,y){y=Math.min(u.i.length,y);var C=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let B=-1;for(;;){const X=["count="+y];B==-1?0<y?(B=O[0].g,X.push("ofs="+B)):B=0:X.push("ofs="+B);let Le=!0;for(let Et=0;Et<y;Et++){let Pe=O[Et].g;const Mt=O[Et].map;if(Pe-=B,0>Pe)B=Math.max(0,O[Et].g-100),Le=!1;else try{_1(Mt,X,"req"+Pe+"_")}catch{C&&C(Mt)}}if(Le){C=X.join("&");break e}}}return u=u.i.splice(0,y),g.D=u,C}function Vv(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;L||te(),V||(L(),V=!0),Q.add(g,u),u.v=0}}function df(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ne(p(u.Fa,u),Wv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Bv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ne(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Kc(this),Bv(this))};function ff(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Bv(u){u.g=new Yi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=xi(u.qa);$e(g,"RID","rpc"),$e(g,"SID",u.K),$e(g,"AID",u.T),$e(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&$e(g,"TO",u.ja),$e(g,"TYPE","xmlhttp"),Ca(u,g),u.m&&u.o&&uf(g,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Wc(xi(g)),y.m=null,y.P=!0,fv(y,u)}t.Za=function(){this.C!=null&&(this.C=null,Kc(this),df(this),vt(19))};function Gc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Uv(u,g){var y=null;if(u.g==g){Gc(u),ff(u),u.g=null;var C=2}else if(lf(u.h,g))y=g.D,_v(u.h,g),C=1;else return;if(u.G!=0){if(g.o)if(C==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var O=u.B;C=tr(),he(C,new wa(C,y)),qc(u)}else Vv(u);else if(O=g.s,O==3||O==0&&0<g.X||!(C==1&&E1(u,g)||C==2&&df(u)))switch(y&&0<y.length&&(g=u.h,g.i=g.i.concat(y)),O){case 1:sr(u,5);break;case 4:sr(u,10);break;case 3:sr(u,6);break;default:sr(u,2)}}}function Wv(u,g){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*g}function sr(u,g){if(u.j.info("Error code "+g),g==2){var y=p(u.fb,u),C=u.Xa;const O=!C;C=new ir(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bc(C,"https"),Wc(C),O?m1(C.toString(),y):y1(C.toString(),y)}else vt(2);u.G=0,u.l&&u.l.sa(g),zv(u),Ov(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function zv(u){if(u.G=0,u.ka=[],u.l){const g=wv(u.h);(g.length!=0||u.i.length!=0)&&(x(u.ka,g),x(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function $v(u,g,y){var C=y instanceof ir?xi(y):new ir(y);if(C.g!="")g&&(C.g=g+"."+C.g),Uc(C,C.s);else{var O=a.location;C=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;var B=new ir(null);C&&Bc(B,C),g&&(B.g=g),O&&Uc(B,O),y&&(B.l=y),C=B}return y=u.D,g=u.ya,y&&g&&$e(C,y,g),$e(C,"VER",u.la),Ca(u,C),C}function Hv(u,g,y){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new it(new zc({eb:y})):new it(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kv(){}t=Kv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qc(){}Qc.prototype.g=function(u,g){return new un(u,g)};function un(u,g){re.call(this),this.g=new jv(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!E(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!E(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Zr(this)}v(un,re),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){hf(this.g)},un.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=ya(u),u=y);g.i.push(new o1(g.Ya++,u)),g.G==3&&qc(g)},un.prototype.N=function(){this.g.l=null,delete this.j,hf(this.g),delete this.g,un.aa.N.call(this)};function qv(u){bi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const y in g){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}v(qv,bi);function Gv(){Gi.call(this),this.status=1}v(Gv,Gi);function Zr(u){this.g=u}v(Zr,Kv),Zr.prototype.ua=function(){he(this.g,"a")},Zr.prototype.ta=function(u){he(this.g,new qv(u))},Zr.prototype.sa=function(u){he(this.g,new Gv)},Zr.prototype.ra=function(){he(this.g,"b")},Qc.prototype.createWebChannel=Qc.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,IS=function(){return new Qc},SS=function(){return tr()},TS=ni,_g={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lc.NO_ERROR=0,Lc.TIMEOUT=8,Lc.HTTP_ERROR=6,Ju=Lc,uv.COMPLETE="complete",ES=uv,er.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",re.prototype.listen=re.prototype.K,Ja=er,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,xS=it}).apply(typeof gu<"u"?gu:typeof self<"u"?self:typeof window<"u"?window:{});const z0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Pd("@firebase/firestore");function La(){return jr.logLevel}function le(t,...e){if(jr.logLevel<=Te.DEBUG){const n=e.map(ey);jr.debug(`Firestore (${la}): ${t}`,...n)}}function zi(t,...e){if(jr.logLevel<=Te.ERROR){const n=e.map(ey);jr.error(`Firestore (${la}): ${t}`,...n)}}function qo(t,...e){if(jr.logLevel<=Te.WARN){const n=e.map(ey);jr.warn(`Firestore (${la}): ${t}`,...n)}}function ey(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: `+t;throw zi(e),new Error(e)}function Ce(t,e){t||fe()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class o2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a2{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Rs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Rs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ce(typeof i.accessToken=="string"),new kS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Vt(e)}}class l2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class c2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new l2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const i=r=>{r.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new u2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=d2(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%e.length))}return i}}function Ne(t,e){return t<e?-1:t>e?1:0}function Go(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new yt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new yt(0,0))}static max(){return new ge(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n,i){n===void 0?n=0:n>e.length&&fe(),i===void 0?i=e.length-n:i>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Yl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=e.get(s),o=n.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends Yl{construct(e,n,i){return new Fe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const f2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Yl{construct(e,n,i){return new kt(e,n,i)}static isValidIdentifier(e){return f2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new ie($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ie($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new ie($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Fe.fromString(e))}static fromName(e){return new de(Fe.fromString(e).popFirst(5))}static empty(){return new de(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Fe(e.slice()))}}function p2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(i===1e9?new yt(n+1,0):new yt(n,i));return new Ls(s,de.empty(),e)}function g2(t){return new Ls(t.readTime,t.key,-1)}class Ls{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ls(ge.min(),de.empty(),-1)}static max(){return new Ls(ge.max(),de.empty(),-1)}}function m2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==y2)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(s=>s?K.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new K((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===r&&i(o)},h=>s(h))}})}static doWhile(e,n){return new K((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function _2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ec(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ty.oe=-1;function Tc(t){return t==null}function Wh(t){return t===0&&1/t==-1/0}function w2(t){return typeof t=="number"&&Number.isInteger(t)&&!Wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??It.RED,this.left=s??It.EMPTY,this.right=r??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new It(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,i,s,r){return this}insert(e,n,i){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new H0(this.data.getIterator())}getIteratorFrom(e){return new H0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class H0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new gn([])}unionWith(e){let n=new Nt(kt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new PS("Invalid base64 string: "+r):r}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const b2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=b2.exec(t);if(Ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iy(t){const e=t.mapValue.fields.__previous_value__;return ny(e)?iy(e):e}function Xl(t){const e=Fs(t.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,i,s,r,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Jl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Jl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu={mapValue:{}};function Lr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ny(t)?4:T2(t)?9007199254740991:E2(t)?10:11:fe()}function vi(t,e){if(t===e)return!0;const n=Lr(t);if(n!==Lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xl(t).isEqual(Xl(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=Fs(s.timestampValue),a=Fs(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Or(s.bytesValue).isEqual(Or(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return rt(s.geoPointValue.latitude)===rt(r.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return rt(s.integerValue)===rt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=rt(s.doubleValue),a=rt(r.doubleValue);return o===a?Wh(o)===Wh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if($0(o)!==$0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vi(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function Zl(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function Qo(t,e){if(t===e)return 0;const n=Lr(t),i=Lr(e);if(n!==i)return Ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=rt(r.integerValue||r.doubleValue),l=rt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return K0(t.timestampValue,e.timestampValue);case 4:return K0(Xl(t),Xl(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(r,o){const a=Or(r),l=Or(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ne(a[c],l[c]);if(h!==0)return h}return Ne(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=Ne(rt(r.latitude),rt(o.latitude));return a!==0?a:Ne(rt(r.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return q0(t.arrayValue,e.arrayValue);case 10:return function(r,o){var a,l,c,h;const f=r.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,v=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=Ne(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:q0(m,v)}(t.mapValue,e.mapValue);case 11:return function(r,o){if(r===yu.mapValue&&o===yu.mapValue)return 0;if(r===yu.mapValue)return 1;if(o===yu.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Ne(l[f],h[f]);if(p!==0)return p;const m=Qo(a[l[f]],c[h[f]]);if(m!==0)return m}return Ne(l.length,h.length)}(t.mapValue,e.mapValue);default:throw fe()}}function K0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Fs(t),i=Fs(e),s=Ne(n.seconds,i.seconds);return s!==0?s:Ne(n.nanos,i.nanos)}function q0(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Qo(n[s],i[s]);if(r)return r}return Ne(n.length,i.length)}function Yo(t){return wg(t)}function wg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Fs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=wg(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${wg(n.fields[o])}`;return s+"}"}(t.mapValue):fe()}function G0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bg(t){return!!t&&"integerValue"in t}function sy(t){return!!t&&"arrayValue"in t}function Q0(t){return!!t&&"nullValue"in t}function Y0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zu(t){return!!t&&"mapValue"in t}function E2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ml(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Kr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ml(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ml(t.arrayValue.values[n]);return e}return Object.assign({},t)}function T2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Zu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(n)}setAll(e){let n=kt.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=ml(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());Zu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Zu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Kr(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Gt(ml(this.value))}}function NS(t){const e=[];return Kr(t.fields,(n,i)=>{const s=new kt([n]);if(Zu(i)){const r=NS(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,i,s,r,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bt(e,0,ge.min(),ge.min(),ge.min(),Gt.empty(),0)}static newFoundDocument(e,n,i,s){return new bt(e,1,n,ge.min(),i,s,0)}static newNoDocument(e,n){return new bt(e,2,n,ge.min(),ge.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,ge.min(),ge.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.position=e,this.inclusive=n}}function X0(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(r.field.isKeyField()?i=de.comparator(de.fromName(o.referenceValue),n.key):i=Qo(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function J0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function S2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{}class dt extends RS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new k2(e,n,i):n==="array-contains"?new P2(e,i):n==="in"?new N2(e,i):n==="not-in"?new R2(e,i):n==="array-contains-any"?new D2(e,i):new dt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new C2(e,i):new A2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qo(n,this.value)):n!==null&&Lr(this.value)===Lr(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends RS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zn(e,n)}matches(e){return DS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function DS(t){return t.op==="and"}function MS(t){return I2(t)&&DS(t)}function I2(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function xg(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+Yo(t.value);if(MS(t))return t.filters.map(e=>xg(e)).join(",");{const e=t.filters.map(n=>xg(n)).join(",");return`${t.op}(${e})`}}function jS(t,e){return t instanceof dt?function(i,s){return s instanceof dt&&i.op===s.op&&i.field.isEqual(s.field)&&vi(i.value,s.value)}(t,e):t instanceof Zn?function(i,s){return s instanceof Zn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&jS(o,s.filters[a]),!0):!1}(t,e):void fe()}function OS(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(OS).join(" ,")+"}"}(t):"Filter"}class k2 extends dt{constructor(e,n,i){super(e,n,i),this.key=de.fromName(i.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class C2 extends dt{constructor(e,n){super(e,"in",n),this.keys=LS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A2 extends dt{constructor(e,n){super(e,"not-in",n),this.keys=LS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>de.fromName(i.referenceValue))}class P2 extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sy(n)&&Zl(n.arrayValue,this.value)}}class N2 extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zl(this.value.arrayValue,n)}}class R2 extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zl(this.value.arrayValue,n)}}class D2 extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Zl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.ue=null}}function Z0(t,e=null,n=[],i=[],s=null,r=null,o=null){return new M2(t,e,n,i,s,r,o)}function ry(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>xg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Tc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Yo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Yo(i)).join(",")),e.ue=n}return e.ue}function oy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J0(t.startAt,e.startAt)&&J0(t.endAt,e.endAt)}function Eg(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function j2(t,e,n,i,s,r,o,a){return new ca(t,e,n,i,s,r,o,a)}function ay(t){return new ca(t)}function ew(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FS(t){return t.collectionGroup!==null}function yl(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const r of e.explicitOrderBy)e.ce.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.ce.push(new ec(r,i))}),n.has(kt.keyField().canonicalString())||e.ce.push(new ec(kt.keyField(),i))}return e.ce}function gi(t){const e=ve(t);return e.le||(e.le=O2(e,yl(t))),e.le}function O2(t,e){if(t.limitType==="F")return Z0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new ec(s.field,r)});const n=t.endAt?new zh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new zh(t.startAt.position,t.startAt.inclusive):null;return Z0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Tg(t,e){const n=t.filters.concat([e]);return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sg(t,e,n){return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Md(t,e){return oy(gi(t),gi(e))&&t.limitType===e.limitType}function VS(t){return`${ry(gi(t))}|lt:${t.limitType}`}function ao(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>OS(s)).join(", ")}]`),Tc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Yo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Yo(s)).join(",")),`Target(${i})`}(gi(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):de.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of yl(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,a,l){const c=X0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,yl(i),s)||i.endAt&&!function(o,a,l){const c=X0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,yl(i),s))}(t,e)}function L2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BS(t){return(e,n)=>{let i=!1;for(const s of yl(t)){const r=F2(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function F2(t,e,n){const i=t.field.isKeyField()?de.comparator(e.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Qo(l,c):fe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Kr(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return AS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new nt(de.comparator);function $i(){return V2}const US=new nt(de.comparator);function Za(...t){let e=US;for(const n of t)e=e.insert(n.key,n);return e}function WS(t){let e=US;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function wr(){return vl()}function zS(){return vl()}function vl(){return new ua(t=>t.toString(),(t,e)=>t.isEqual(e))}const B2=new nt(de.comparator),U2=new Nt(de.comparator);function xe(...t){let e=U2;for(const n of t)e=e.add(n);return e}const W2=new Nt(Ne);function z2(){return W2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function $S(t){return{integerValue:""+t}}function $2(t,e){return w2(e)?$S(e):ly(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this._=void 0}}function H2(t,e,n){return t instanceof tc?function(s,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&ny(r)&&(r=iy(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof nc?KS(t,e):t instanceof ic?qS(t,e):function(s,r){const o=HS(s,r),a=tw(o)+tw(s.Pe);return bg(o)&&bg(s.Pe)?$S(a):ly(s.serializer,a)}(t,e)}function K2(t,e,n){return t instanceof nc?KS(t,e):t instanceof ic?qS(t,e):n}function HS(t,e){return t instanceof $h?function(i){return bg(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class tc extends Od{}class nc extends Od{constructor(e){super(),this.elements=e}}function KS(t,e){const n=GS(e);for(const i of t.elements)n.some(s=>vi(s,i))||n.push(i);return{arrayValue:{values:n}}}class ic extends Od{constructor(e){super(),this.elements=e}}function qS(t,e){let n=GS(e);for(const i of t.elements)n=n.filter(s=>!vi(s,i));return{arrayValue:{values:n}}}class $h extends Od{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function tw(t){return rt(t.integerValue||t.doubleValue)}function GS(t){return sy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.field=e,this.transform=n}}function G2(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof nc&&s instanceof nc||i instanceof ic&&s instanceof ic?Go(i.elements,s.elements,vi):i instanceof $h&&s instanceof $h?vi(i.Pe,s.Pe):i instanceof tc&&s instanceof tc}(t.transform,e.transform)}class Q2{constructor(e,n){this.version=e,this.transformResults=n}}class gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ld{}function QS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ic(t.key,gt.none()):new Sc(t.key,t.data,gt.none());{const n=t.data,i=Gt.empty();let s=new Nt(kt.comparator);for(let r of e.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Ys(t.key,i,new gn(s.toArray()),gt.none())}}function Y2(t,e,n){t instanceof Sc?function(s,r,o){const a=s.value.clone(),l=iw(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ys?function(s,r,o){if(!eh(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=iw(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(YS(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _l(t,e,n,i){return t instanceof Sc?function(r,o,a,l){if(!eh(r.precondition,o))return a;const c=r.value.clone(),h=sw(r.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ys?function(r,o,a,l){if(!eh(r.precondition,o))return a;const c=sw(r.fieldTransforms,l,o),h=o.data;return h.setAll(YS(r)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(f=>f.field))}(t,e,n,i):function(r,o,a){return eh(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function X2(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=HS(i.transform,s||null);r!=null&&(n===null&&(n=Gt.empty()),n.set(i.field,r))}return n||null}function nw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Go(i,s,(r,o)=>G2(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sc extends Ld{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ys extends Ld{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function YS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function iw(t,e,n){const i=new Map;Ce(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,K2(o,a,n[s]))}return i}function sw(t,e,n){const i=new Map;for(const s of t){const r=s.transform,o=n.data.field(s.field);i.set(s.field,H2(r,o,e))}return i}class Ic extends Ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XS extends Ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&Y2(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=_l(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=_l(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=zS();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=QS(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,i)=>nw(n,i))&&Go(this.baseMutations,e.baseMutations,(n,i)=>nw(n,i))}}class cy{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Ce(e.mutations.length===i.length);let s=function(){return B2}();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new cy(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Se;function JS(t){switch(t){default:return fe();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function ZS(t){if(t===void 0)return zi("GRPC error has no .code"),$.UNKNOWN;switch(t){case ut.OK:return $.OK;case ut.CANCELLED:return $.CANCELLED;case ut.UNKNOWN:return $.UNKNOWN;case ut.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ut.INTERNAL:return $.INTERNAL;case ut.UNAVAILABLE:return $.UNAVAILABLE;case ut.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ut.NOT_FOUND:return $.NOT_FOUND;case ut.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ut.ABORTED:return $.ABORTED;case ut.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ut.DATA_LOSS:return $.DATA_LOSS;default:return fe()}}(Se=ut||(ut={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new Ir([4294967295,4294967295],0);function rw(t){const e=tj().encode(t),n=new bS;return n.update(e),new Uint8Array(n.digest())}function ow(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Ir([n,i],0),new Ir([s,r],0)]}class uy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new el(`Invalid padding: ${n}`);if(i<0)throw new el(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new el(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ir.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(Ir.fromNumber(i)));return s.compare(nj)===1&&(s=new Ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=rw(e),[i,s]=ow(n);for(let r=0;r<this.hashCount;r++){const o=this.Ee(i,s,r);if(!this.de(o))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new uy(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=rw(e),[i,s]=ow(n);for(let r=0;r<this.hashCount;r++){const o=this.Ee(i,s,r);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Fd(ge.min(),s,new nt(Ne),$i(),xe())}}class kc{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new kc(i,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class eI{constructor(e,n){this.targetId=e,this.me=n}}class tI{constructor(e,n,i=Dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class aw{constructor(){this.fe=0,this.ge=cw(),this.pe=Dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),n=xe(),i=xe();return this.ge.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:fe()}}),new kc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=cw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ij{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=lw(),this.Qe=new nt(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const r=s.target;if(Eg(r))if(i===0){const o=new de(r.path);this.Ue(n,o,bt.newNoDocument(o,ge.min()))}else Ce(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let o,a;try{o=Or(i).toUint8Array()}catch(l){if(l instanceof PS)return qo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new uy(o,s,r)}catch(l){return qo(l instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,r,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((r,o)=>{const a=this.Je(o);if(a){if(r.current&&Eg(a.target)){const l=new de(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,bt.newNoDocument(l,e))}r.be&&(n.set(o,r.ve()),r.Ce())}});let i=xe();this.qe.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.ke.forEach((r,o)=>o.setReadTime(e));const s=new Fd(e,n,this.Qe,this.ke,i);return this.ke=$i(),this.qe=lw(),this.Qe=new nt(Ne),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new aw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new aw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function lw(){return new nt(de.comparator)}function cw(){return new nt(de.comparator)}const sj={asc:"ASCENDING",desc:"DESCENDING"},rj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oj={and:"AND",or:"OR"};class aj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ig(t,e){return t.useProto3Json||Tc(e)?e:{value:e}}function Hh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lj(t,e){return Hh(t,e.toTimestamp())}function yn(t){return Ce(!!t),ge.fromTimestamp(function(n){const i=Fs(n);return new yt(i.seconds,i.nanos)}(t))}function hy(t,e){return kg(t,e).canonicalString()}function kg(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iI(t){const e=Fe.fromString(t);return Ce(cI(e)),e}function Kh(t,e){return hy(t.databaseId,e.path)}function wl(t,e){const n=iI(e);if(n.get(1)!==t.databaseId.projectId)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(rI(n))}function sI(t,e){return hy(t.databaseId,e)}function cj(t){const e=iI(t);return e.length===4?Fe.emptyPath():rI(e)}function Cg(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rI(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function uw(t,e,n){return{name:Kh(t,e),fields:n.value.mapValue.fields}}function uj(t,e){return"found"in e?function(i,s){Ce(!!s.found),s.found.name,s.found.updateTime;const r=wl(i,s.found.name),o=yn(s.found.updateTime),a=s.found.createTime?yn(s.found.createTime):ge.min(),l=new Gt({mapValue:{fields:s.found.fields}});return bt.newFoundDocument(r,o,a,l)}(t,e):"missing"in e?function(i,s){Ce(!!s.missing),Ce(!!s.readTime);const r=wl(i,s.missing),o=yn(s.readTime);return bt.newNoDocument(r,o)}(t,e):fe()}function hj(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(c,h){return c.useProto3Json?(Ce(h===void 0||typeof h=="string"),Dt.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?$.UNKNOWN:ZS(c.code);return new ie(h,c.message||"")}(o);n=new tI(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=wl(t,i.document.name),r=yn(i.document.updateTime),o=i.document.createTime?yn(i.document.createTime):ge.min(),a=new Gt({mapValue:{fields:i.document.fields}}),l=bt.newFoundDocument(s,r,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new th(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=wl(t,i.document),r=i.readTime?yn(i.readTime):ge.min(),o=bt.newNoDocument(s,r),a=i.removedTargetIds||[];n=new th([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=wl(t,i.document),r=i.removedTargetIds||[];n=new th([],r,s,null)}else{if(!("filter"in e))return fe();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new ej(s,r),a=i.targetId;n=new eI(a,o)}}return n}function oI(t,e){let n;if(e instanceof Sc)n={update:uw(t,e.key,e.value)};else if(e instanceof Ic)n={delete:Kh(t,e.key)};else if(e instanceof Ys)n={update:uw(t,e.key,e.data),updateMask:wj(e.fieldMask)};else{if(!(e instanceof XS))return fe();n={verify:Kh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ic)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $h)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:lj(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:fe()}(t,e.precondition)),n}function dj(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(s,r){let o=s.updateTime?yn(s.updateTime):yn(r);return o.isEqual(ge.min())&&(o=yn(r)),new Q2(o,s.transformResults||[])}(n,e))):[]}function fj(t,e){return{documents:[sI(t,e.path)]}}function pj(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=sI(t,s);const r=function(c){if(c.length!==0)return lI(Zn.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:lo(p.field),direction:yj(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ig(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function gj(t){let e=cj(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ce(i===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let r=[];n.where&&(r=function(f){const p=aI(f);return p instanceof Zn&&MS(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(v){return new ec(co(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Tc(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new zh(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new zh(m,p)}(n.endAt)),j2(e,s,o,r,a,"F",l,c)}function mj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=co(n.unaryFilter.field);return dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=co(n.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=co(n.unaryFilter.field);return dt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=co(n.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return dt.create(co(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(i=>aI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function yj(t){return sj[t]}function vj(t){return rj[t]}function _j(t){return oj[t]}function lo(t){return{fieldPath:t.canonicalString()}}function co(t){return kt.fromServerFormat(t.fieldPath)}function lI(t){return t instanceof dt?function(n){if(n.op==="=="){if(Y0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NAN"}};if(Q0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Y0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NAN"}};if(Q0(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(n.field),op:vj(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const i=n.getFilters().map(s=>lI(s));return i.length===1?i[0]:{compositeFilter:{op:_j(n.op),filters:i}}}(t):fe()}function wj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,i,s,r=ge.min(),o=ge.min(),a=Dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.ct=e}}function xj(t){const e=gj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.un=new Tj}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Ls.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class Tj{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new Nt(Fe.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Nt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xo(0)}static kn(){return new Xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.changes=new ua(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&_l(i.mutation,s,gn.empty(),yt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=xe()){const s=wr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let o=Za();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=wr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,xe()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,s){let r=$i();const o=vl(),a=function(){return vl()}();return n.forEach((l,c)=>{const h=i.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ys)?r=r.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),_l(h.mutation,c,h.mutation.getFieldMask(),yt.now())):o.set(c.key,gn.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new Ij(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const i=vl();let s=new nt((o,a)=>o-a),r=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||gn.empty();h=a.applyToLocalView(c,h),i.set(l,h);const f=(s.get(a.batchId)||xe()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=zS();h.forEach(p=>{if(!r.has(p)){const m=QS(n.get(p),i.get(p));m!==null&&f.set(p,m),r=r.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return K.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):K.resolve(wr());let a=-1,l=r;return o.next(c=>K.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),r.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,xe())).next(h=>({batchId:a,changes:WS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(i=>{let s=Za();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let o=Za();return this.indexManager.getCollectionParents(e,r).next(a=>K.forEach(a,l=>{const c=function(f,p){return new ca(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(o=>{r.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,bt.newInvalidDocument(h)))});let a=Za();return o.forEach((l,c)=>{const h=r.get(l);h!==void 0&&_l(h.mutation,c,gn.empty(),yt.now()),jd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:yn(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:xj(s.bundledQuery),readTime:yn(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.overlays=new nt(de.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=wr();return K.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.ht(e,n,r)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Ir.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const s=wr(),r=n.length+1,o=new de(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new nt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=r.get(c.largestBatchId);h===null&&(h=wr(),r=r.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=wr(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return K.resolve(a)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Z2(n,i));let r=this.Ir.get(n);r===void 0&&(r=xe(),this.Ir.set(n,r)),this.Ir.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.Tr=new Nt(_t.Er),this.dr=new Nt(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new _t(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new _t(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new de(new Fe([])),i=new _t(n,e),s=new _t(n,e+1),r=[];return this.dr.forEachInRange([i,s],o=>{this.Vr(o),r.push(o.key)}),r}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new Fe([])),i=new _t(n,e),s=new _t(n,e+1);let r=xe();return this.dr.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new _t(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class _t{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Nt(_t.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new J2(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new _t(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),r=s<0?0:s;return K.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([i,s],o=>{const a=this.Dr(o.wr);r.push(a)}),K.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Nt(Ne);return n.forEach(s=>{const r=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([r,o],a=>{i=i.add(a.wr)})}),K.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;de.isDocumentKey(r)||(r=r.child(""));const o=new _t(new de(r),0);let a=new Nt(Ne);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),K.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return K.forEach(n.mutations,s=>{const r=new _t(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new _t(n,0),s=this.br.firstAfterOrEqual(i);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.Mr=e,this.docs=function(){return new nt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let i=$i();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():bt.newInvalidDocument(s))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=$i();const o=n.path,a=new de(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||m2(g2(h),i)<=0||(s.has(h.key)||jd(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return K.resolve(r)}getAllFromCollectionGroup(e,n,i,s){fe()}Or(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Dj(this)}getSize(e){return K.resolve(this.size)}}class Dj extends Sj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.persistence=e,this.Nr=new ua(n=>ry(n),oy),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dy,this.targetCount=0,this.kr=Xo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),K.waitFor(r).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),K.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ty(0),this.Kr=!1,this.Kr=!0,this.$r=new Pj,this.referenceDelegate=e(this),this.Ur=new Mj(this),this.indexManager=new Ej,this.remoteDocumentCache=function(s){return new Rj(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new bj(n),this.Gr=new Cj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Aj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new Nj(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){le("MemoryPersistence","Starting transaction:",e);const s=new Oj(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(r=>this.referenceDelegate.jr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Hr(e,n){return K.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class Oj extends v2{constructor(e){super(),this.currentSequenceNumber=e}}class fy{constructor(e){this.persistence=e,this.Jr=new dy,this.Yr=null}static Zr(e){return new fy(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.Xr.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,i=>{const s=de.fromPath(i);return this.ei(e,s).next(r=>{r||n.removeEntry(s,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=xe(),s=xe();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new py(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _N()?8:_2($t())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.Yi(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Zi(e,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new Lj;return this.Xi(e,n,o).next(a=>{if(r.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>r.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(La()<=Te.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(La()<=Te.DEBUG&&le("QueryEngine","Query:",ao(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(La()<=Te.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(n))):K.resolve())}Yi(e,n){if(ew(n))return K.resolve(null);let i=gi(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sg(n,null,"F"),i=gi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=xe(...r);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Sg(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,s){return ew(n)||s.isEqual(ge.min())?K.resolve(null):this.Ji.getDocuments(e,i).next(r=>{const o=this.ts(n,r);return this.ns(n,o,i,s)?K.resolve(null):(La()<=Te.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ao(n)),this.rs(e,o,n,p2(s,-1)).next(a=>a))})}ts(e,n){let i=new Nt(BS(e));return n.forEach((s,r)=>{jd(e,r)&&(i=i.add(r))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Xi(e,n,i){return La()<=Te.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",ao(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ls.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new nt(Ne),this._s=new ua(r=>ry(r),oy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Bj(t,e,n,i){return new Vj(t,e,n,i)}async function uI(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=xe();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Uj(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let m=K.resolve();return p.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(w=>{const x=c.docVersions.get(v);Ce(x!==null),w.version.compareTo(x)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=xe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function hI(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Wj(t,e){const n=ve(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(r,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(r,h.addedDocuments,f)));let m=p.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Dt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),s=s.insert(f,m),function(w,x,b){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,m,h)&&a.push(n.Ur.updateTargetData(r,m))});let l=$i(),c=xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))}),a.push(zj(r,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(ge.min())){const h=n.Ur.getLastRemoteSnapshotVersion(r).next(f=>n.Ur.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(h)}return K.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.os=s,r))}function zj(t,e,n){let i=xe(),s=xe();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let o=$i();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function $j(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Hj(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(r=>r?(s=r,K.resolve(s)):n.Ur.allocateTargetId(i).next(o=>(s=new ys(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Ag(t,e,n){const i=ve(t),s=i.os.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ec(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function hw(t,e,n){const i=ve(t);let s=ge.min(),r=xe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ve(l),p=f._s.get(h);return p!==void 0?K.resolve(f.os.get(p)):f.Ur.getTargetData(c,h)}(i,o,gi(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?s:ge.min(),n?r:xe())).next(a=>(Kj(i,L2(e),a),{documents:a,Ts:r})))}function Kj(t,e,n){let i=t.us.get(e)||ge.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.us.set(e,i)}class dw{constructor(){this.activeTargetIds=z2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qj{constructor(){this.so=new dw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu=null;function Qf(){return vu===null?vu=function(){return 268435456+Math.round(2147483648*Math.random())}():vu++,"0x"+vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class Xj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Fo(){return!1}Mo(n,i,s,r,o){const a=Qf(),l=this.xo(n,i.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,r,o),this.No(n,l,c,s).then(h=>(le("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw qo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,i,s,r,o,a){return this.Mo(n,i,s,r,o)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+la}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,o)=>n[o]=r),s&&s.headers.forEach((r,o)=>n[o]=r)}xo(n,i){const s=Qj[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const r=Qf();return new Promise((o,a)=>{const l=new xS;l.setWithCredentials(!0),l.listenOnce(ES.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ju.NO_ERROR:const h=l.getResponseJson();le(Ft,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(h)),o(h);break;case Ju.TIMEOUT:le(Ft,`RPC '${e}' ${r} timed out`),a(new ie($.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const f=l.getStatus();if(le(Ft,`RPC '${e}' ${r} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const v=function(x){const b=x.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(b)>=0?b:$.UNKNOWN}(m.status);a(new ie(v,m.message))}else a(new ie($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ie($.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{le(Ft,`RPC '${e}' ${r} completed.`)}});const c=JSON.stringify(s);le(Ft,`RPC '${e}' ${r} sending request:`,s),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const s=Qf(),r=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IS(),a=SS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=r.join("");le(Ft,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,m=!1;const v=new Yj({Io:x=>{m?le(Ft,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(p||(le(Ft,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),le(Ft,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},To:()=>f.close()}),w=(x,b,E)=>{x.listen(b,k=>{try{E(k)}catch(D){setTimeout(()=>{throw D},0)}})};return w(f,Ja.EventType.OPEN,()=>{m||(le(Ft,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),w(f,Ja.EventType.CLOSE,()=>{m||(m=!0,le(Ft,`RPC '${e}' stream ${s} transport closed`),v.So())}),w(f,Ja.EventType.ERROR,x=>{m||(m=!0,qo(Ft,`RPC '${e}' stream ${s} transport errored:`,x),v.So(new ie($.UNAVAILABLE,"The operation could not be completed")))}),w(f,Ja.EventType.MESSAGE,x=>{var b;if(!m){const E=x.data[0];Ce(!!E);const k=E,D=k.error||((b=k[0])===null||b===void 0?void 0:b.error);if(D){le(Ft,`RPC '${e}' stream ${s} received error:`,D);const N=D.status;let j=function(I){const P=ut[I];if(P!==void 0)return ZS(P)}(N),T=D.message;j===void 0&&(j=$.INTERNAL,T="Unknown error status: "+N+" with message "+D.message),m=!0,v.So(new ie(j,T)),f.close()}else le(Ft,`RPC '${e}' stream ${s} received:`,E),v.bo(E)}}),w(a,TS.STAT_EVENT,x=>{x.stat===_g.PROXY?le(Ft,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===_g.NOPROXY&&le(Ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function Yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t){return new aj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,i=1e3,s=1.5,r=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,i,s,r,o,a,l){this.ui=e,this.Ho=i,this.Jo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gy(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new ie($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jj extends dI{constructor(e,n,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=hj(this.serializer,e),i=function(r){if(!("targetChange"in r))return ge.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?yn(o.readTime):ge.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Cg(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=Eg(l)?{documents:fj(r,l)}:{query:pj(r,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nI(r,o.resumeToken);const c=Ig(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Hh(r,o.snapshotVersion.toTimestamp());const c=Ig(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=mj(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Cg(this.serializer),n.removeTarget=e,this.a_(n)}}class Zj extends dI{constructor(e,n,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=dj(e.writeResults,e.commitTime),i=yn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Cg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>oI(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Mo(e,kg(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ie($.UNKNOWN,r.toString())})}Lo(e,n,i,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,kg(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zi(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o(o=>{i.enqueueAndForget(async()=>{qr(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ve(l);c.L_.add(4),await Cc(c),c.q_.set("Unknown"),c.L_.delete(4),await Bd(c)}(this))})}),this.q_=new tO(i,s)}}async function Bd(t){if(qr(t))for(const e of t.B_)await e(!0)}async function Cc(t){for(const e of t.B_)await e(!1)}function fI(t,e){const n=ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_y(n)?vy(n):ha(n).r_()&&yy(n,e))}function my(t,e){const n=ve(t),i=ha(n);n.N_.delete(e),i.r_()&&pI(n,e),n.N_.size===0&&(i.r_()?i.o_():qr(n)&&n.q_.set("Unknown"))}function yy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ha(t).A_(e)}function pI(t,e){t.Q_.xe(e),ha(t).R_(e)}function vy(t){t.Q_=new ij({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ha(t).start(),t.q_.v_()}function _y(t){return qr(t)&&!ha(t).n_()&&t.N_.size>0}function qr(t){return ve(t).L_.size===0}function gI(t){t.Q_=void 0}async function iO(t){t.q_.set("Online")}async function sO(t){t.N_.forEach((e,n)=>{yy(t,e)})}async function rO(t,e){gI(t),_y(t)?(t.q_.M_(e),vy(t)):t.q_.set("Unknown")}async function oO(t,e,n){if(t.q_.set("Online"),e instanceof tI&&e.state===2&&e.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(i){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await qh(t,i)}else if(e instanceof th?t.Q_.Ke(e):e instanceof eI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const i=await hI(t.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.N_.get(c);h&&r.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=r.N_.get(l);if(!h)return;r.N_.set(l,h.withResumeToken(Dt.EMPTY_BYTE_STRING,h.snapshotVersion)),pI(r,l);const f=new ys(h.target,l,c,h.sequenceNumber);yy(r,f)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){le("RemoteStore","Failed to raise snapshot:",i),await qh(t,i)}}async function qh(t,e,n){if(!Ec(e))throw e;t.L_.add(1),await Cc(t),t.q_.set("Offline"),n||(n=()=>hI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bd(t)})}function mI(t,e){return e().catch(n=>qh(t,n,e))}async function Ud(t){const e=ve(t),n=Vs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;aO(e);)try{const s=await $j(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,lO(e,s)}catch(s){await qh(e,s)}yI(e)&&vI(e)}function aO(t){return qr(t)&&t.O_.length<10}function lO(t,e){t.O_.push(e);const n=Vs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yI(t){return qr(t)&&!Vs(t).n_()&&t.O_.length>0}function vI(t){Vs(t).start()}async function cO(t){Vs(t).p_()}async function uO(t){const e=Vs(t);for(const n of t.O_)e.m_(n.mutations)}async function hO(t,e,n){const i=t.O_.shift(),s=cy.from(i,e,n);await mI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ud(t)}async function dO(t,e){e&&Vs(t).V_&&await async function(i,s){if(function(o){return JS(o)&&o!==$.ABORTED}(s.code)){const r=i.O_.shift();Vs(i).s_(),await mI(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Ud(i)}}(t,e),yI(t)&&vI(t)}async function pw(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const i=qr(n);n.L_.add(3),await Cc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bd(n)}async function fO(t,e){const n=ve(t);e?(n.L_.delete(2),await Bd(n)):e||(n.L_.add(2),await Cc(n),n.q_.set("Unknown"))}function ha(t){return t.K_||(t.K_=function(n,i,s){const r=ve(n);return r.w_(),new Jj(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Eo:iO.bind(null,t),Ro:sO.bind(null,t),mo:rO.bind(null,t),d_:oO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_y(t)?vy(t):t.q_.set("Unknown")):(await t.K_.stop(),gI(t))})),t.K_}function Vs(t){return t.U_||(t.U_=function(n,i,s){const r=ve(n);return r.w_(),new Zj(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cO.bind(null,t),mo:dO.bind(null,t),f_:uO.bind(null,t),g_:hO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ud(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const o=Date.now()+i,a=new wy(e,n,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(t,e){if(zi("AsyncQueue",`${e}: ${t}`),Ec(t))return new ie($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||de.comparator(n.key,i.key):(n,i)=>de.comparator(n.key,i.key),this.keyedMap=Za(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new Mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.W_=new nt(de.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Jo{constructor(e,n,i,s,r,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Jo(e,n,Mo.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class gO{constructor(){this.queries=mw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=ve(n),r=s.queries;s.queries=mw(),r.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new ie($.ABORTED,"Firestore shutting down"))}}function mw(){return new ua(t=>VS(t),Md)}async function mO(t,e){const n=ve(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.H_()&&e.J_()&&(i=2):(r=new pO,i=e.J_()?0:1);try{switch(i){case 0:r.z_=await n.onListen(s,!0);break;case 1:r.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=by(o,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,r),r.j_.push(e),e.Z_(n.onlineState),r.z_&&e.X_(r.z_)&&xy(n)}async function yO(t,e){const n=ve(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const o=r.j_.indexOf(e);o>=0&&(r.j_.splice(o,1),r.j_.length===0?s=e.J_()?0:1:!r.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function vO(t,e){const n=ve(t);let i=!1;for(const s of e){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.j_)a.X_(s)&&(i=!0);o.z_=s}}i&&xy(n)}function _O(t,e,n){const i=ve(t),s=i.queries.get(e);if(s)for(const r of s.j_)r.onError(n);i.queries.delete(e)}function xy(t){t.Y_.forEach(e=>{e.next()})}var Pg,yw;(yw=Pg||(Pg={})).ea="default",yw.Cache="cache";class wO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Jo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.key=e}}class wI{constructor(e){this.key=e}}class bO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=BS(e),this.Ra=new Mo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new gw,s=n?n.Ra:this.Ra;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),m=jd(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?v!==w&&(i.track({type:3,doc:m}),x=!0):this.ga(p,m)||(i.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),x=!0):p&&!m&&(i.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),r=w?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:r}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(m,v){const w=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return w(m)-w(v)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(i),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Jo(this.query,e.Ra,r,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new wI(i))}),this.da.forEach(i=>{e.has(i)||n.push(new _I(i))}),n}ba(e){this.Ta=e.Ts,this.da=xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Jo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class EO{constructor(e){this.key=e,this.va=!1}}class TO{constructor(e,n,i,s,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ua(a=>VS(a),Md),this.Ma=new Map,this.xa=new Set,this.Oa=new nt(de.comparator),this.Na=new Map,this.La=new dy,this.Ba={},this.ka=new Map,this.qa=Xo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SO(t,e,n=!0){const i=II(t);let s;const r=i.Fa.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Da()):s=await bI(i,e,n,!0),s}async function IO(t,e){const n=II(t);await bI(n,e,!0,!1)}async function bI(t,e,n,i){const s=await Hj(t.localStore,gi(e)),r=s.targetId,o=t.sharedClientState.addLocalQueryTarget(r,n);let a;return i&&(a=await kO(t,e,r,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&fI(t.remoteStore,s),a}async function kO(t,e,n,i,s){t.Ka=(f,p,m)=>async function(w,x,b,E){let k=x.view.ma(b);k.ns&&(k=await hw(w.localStore,x.query,!1).then(({documents:T})=>x.view.ma(T,k)));const D=E&&E.targetChanges.get(x.targetId),N=E&&E.targetMismatches.get(x.targetId)!=null,j=x.view.applyChanges(k,w.isPrimaryClient,D,N);return _w(w,x.targetId,j.wa),j.snapshot}(t,f,p,m);const r=await hw(t.localStore,e,!0),o=new bO(e,r.Ts),a=o.ma(r.documents),l=kc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);_w(t,n,c.wa);const h=new xO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function CO(t,e,n){const i=ve(t),s=i.Fa.get(e),r=i.Ma.get(s.targetId);if(r.length>1)return i.Ma.set(s.targetId,r.filter(o=>!Md(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Ag(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&my(i.remoteStore,s.targetId),Ng(i,s.targetId)}).catch(xc)):(Ng(i,s.targetId),await Ag(i.localStore,s.targetId,!0))}async function AO(t,e){const n=ve(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),my(n.remoteStore,i.targetId))}async function PO(t,e,n){const i=LO(t);try{const s=await function(o,a){const l=ve(o),c=yt.now(),h=a.reduce((m,v)=>m.add(v.key),xe());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=$i(),w=xe();return l.cs.getEntries(m,h).next(x=>{v=x,v.forEach((b,E)=>{E.isValidDocument()||(w=w.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(x=>{f=x;const b=[];for(const E of a){const k=X2(E,f.get(E.key).overlayedDocument);k!=null&&b.push(new Ys(E.key,k,NS(k.value.mapValue),gt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,b,a)}).next(x=>{p=x;const b=x.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(m,x.batchId,b)})}).then(()=>({batchId:p.batchId,changes:WS(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new nt(Ne)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,s.batchId,n),await Ac(i,s.changes),await Ud(i.remoteStore)}catch(s){const r=by(s,"Failed to persist write");n.reject(r)}}async function xI(t,e){const n=ve(t);try{const i=await Wj(n.localStore,e);e.targetChanges.forEach((s,r)=>{const o=n.Na.get(r);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ce(o.va):s.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await Ac(n,i,e)}catch(i){await xc(i)}}function vw(t,e,n){const i=ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((r,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ve(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&xy(l)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function NO(t,e,n){const i=ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),r=s&&s.key;if(r){let o=new nt(de.comparator);o=o.insert(r,bt.newNoDocument(r,ge.min()));const a=xe().add(r),l=new Fd(ge.min(),new Map,new nt(Ne),o,a);await xI(i,l),i.Oa=i.Oa.remove(r),i.Na.delete(e),Ey(i)}else await Ag(i.localStore,e,!1).then(()=>Ng(i,e,n)).catch(xc)}async function RO(t,e){const n=ve(t),i=e.batch.batchId;try{const s=await Uj(n.localStore,e);TI(n,i,null),EI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ac(n,s)}catch(s){await xc(s)}}async function DO(t,e,n){const i=ve(t);try{const s=await function(o,a){const l=ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ce(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);TI(i,e,n),EI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ac(i,s)}catch(s){await xc(s)}}function EI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function TI(t,e,n){const i=ve(t);let s=i.Ba[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function Ng(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||SI(t,i)})}function SI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(my(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ey(t))}function _w(t,e,n){for(const i of n)i instanceof _I?(t.La.addReference(i.key,e),MO(t,i)):i instanceof wI?(le("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||SI(t,i.key)):fe()}function MO(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(i),Ey(t))}function Ey(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(Fe.fromString(e)),i=t.qa.next();t.Na.set(i,new EO(n)),t.Oa=t.Oa.insert(n,i),fI(t.remoteStore,new ys(gi(ay(n.path)),i,"TargetPurposeLimboResolution",ty.oe))}}async function Ac(t,e,n){const i=ve(t),s=[],r=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=py.Wi(l.targetId,c);r.push(f)}}))}),await Promise.all(o),i.Ca.d_(s),await async function(l,c){const h=ve(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(c,p=>K.forEach(p.$i,m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>K.forEach(p.Ui,m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Ec(f))throw f;le("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=h.os.get(p),v=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(p,w)}}}(i.localStore,r))}async function jO(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const i=await uI(n.localStore,e);n.currentUser=e,function(r,o){r.ka.forEach(a=>{a.forEach(l=>{l.reject(new ie($.CANCELLED,o))})}),r.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ac(n,i.hs)}}function OO(t,e){const n=ve(t),i=n.Na.get(e);if(i&&i.va)return xe().add(i.key);{let s=xe();const r=n.Ma.get(e);if(!r)return s;for(const o of r){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function II(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NO.bind(null,e),e.Ca.d_=vO.bind(null,e.eventManager),e.Ca.$a=_O.bind(null,e.eventManager),e}function LO(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DO.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Bj(this.persistence,new Fj,e.initialUser,this.serializer)}Ga(e){return new jj(fy.Zr,this.serializer)}Wa(e){return new qj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class Rg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jO.bind(null,this.syncEngine),await fO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gO}()}createDatastore(e){const n=Vd(e.databaseInfo.databaseId),i=function(r){return new Xj(r)}(e.databaseInfo);return function(r,o,a,l){return new eO(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,o,a){return new nO(i,s,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>vw(this.syncEngine,n,0),function(){return fw.D()?new fw:new Gj}())}createSyncEngine(e,n){return function(s,r,o,a,l,c,h){const f=new TO(s,r,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=ve(s);le("RemoteStore","RemoteStore shutting down."),r.L_.add(5),await Cc(r),r.k_.shutdown(),r.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Rg.provider={build:()=>new Rg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const o=ve(s),a={documents:r.map(f=>Kh(o.serializer,f))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Fe.emptyPath(),a,r.length),c=new Map;l.forEach(f=>{const p=uj(o.serializer,f);c.set(p.key.toString(),p)});const h=[];return r.forEach(f=>{const p=c.get(f.toString());Ce(!!p),h.push(p)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ic(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const s=de.fromPath(i);this.mutations.push(new XS(s,this.precondition(s)))}),await async function(i,s){const r=ve(i),o={writes:s.map(a=>oI(r.serializer,a))};await r.Mo("Commit",r.serializer.databaseId,Fe.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw fe();n=ge.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new ie($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ge.min())?gt.exists(!1):gt.updateTime(n):gt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ge.min()))throw new ie($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(n)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n,i,s,r){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this._u=i.maxAttempts,this.t_=new gy(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new VO(this.datastore),n=this.cu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.lu(s)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const n=this.updateFunction(e);return!Tc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!JS(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Vt.UNAUTHENTICATED,this.clientId=CS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{le("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(le("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=by(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Xf(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await uI(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ww(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WO(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>pw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>pw(e.remoteStore,s)),t._onlineComponents=e}async function WO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await Xf(t,new Gh)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await Xf(t,new Gh);return t._offlineComponents}async function Ty(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await ww(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await ww(t,new Rg))),t._onlineComponents}function zO(t){return Ty(t).then(e=>e.syncEngine)}function $O(t){return Ty(t).then(e=>e.datastore)}async function bw(t){const e=await Ty(t),n=e.eventManager;return n.onListen=SO.bind(null,e.syncEngine),n.onUnlisten=CO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AO.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e,n){if(!n)throw new ie($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HO(t,e,n,i){if(e===!0&&i===!0)throw new ie($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ew(t){if(!de.isDocumentKey(t))throw new ie($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Tw(t){if(de.isDocumentKey(t))throw new ie($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function Gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wd(t);throw new ie($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zd{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sw(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new r2;switch(i.type){case"firstParty":return new c2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=xw.get(n);i&&(le("ComponentProvider","Removing Datastore"),xw.delete(n),i.terminate())}(this),Promise.resolve()}}function KO(t,e,n,i={}){var s;const r=(t=Gn(t,zd))._getSettings(),o=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Vt.MOCK_USER;else{a=fN(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ie($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Vt(c)}t._authCredentials=new o2(new kS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Gr(this.firestore,e,this._query)}}class Ut{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class Ds extends Gr{constructor(e,n,i){super(e,n,ay(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new de(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function AI(t,e,...n){if(t=Qe(t),CI("collection","path",e),t instanceof zd){const i=Fe.fromString(e,...n);return Tw(i),new Ds(t,null,i)}{if(!(t instanceof Ut||t instanceof Ds))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Fe.fromString(e,...n));return Tw(i),new Ds(t.firestore,null,i)}}function Qn(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=CS.newId()),CI("doc","path",e),t instanceof zd){const i=Fe.fromString(e,...n);return Ew(i),new Ut(t,null,new de(i))}{if(!(t instanceof Ut||t instanceof Ds))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Fe.fromString(e,...n));return Ew(i),new Ut(t.firestore,t instanceof Ds?t.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gy(this,"async_queue_retry"),this.Vu=()=>{const i=Yf();i&&le("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Yf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Yf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Rs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ec(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw zi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=wy.createAndSchedule(this,e,n,i,r=>this.yu(r));return this.Tu.push(s),s}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function kw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Bs extends zd{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Iw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iw(e),this._firestoreClient=void 0,await e}}}function qO(t,e){const n=typeof t=="object"?t:LT(),i=typeof t=="string"?t:"(default)",s=yc(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=hN("firestore");r&&KO(s,...r)}return s}function $d(t){if(t._terminated)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GO(t),t._firestoreClient}function GO(t){var e,n,i;const s=t._freezeSettings(),r=function(a,l,c,h){return new x2(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new UO(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fr(Dt.fromBase64String(e))}catch(n){throw new ie($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fr(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=/^__.*__$/;class YO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sc(e,this.data,n,this.fieldTransforms)}}class PI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class ky{constructor(e,n,i,s,r,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ky(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NI(this.Cu)&&QO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class XO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Vd(e)}Qu(e,n,i,s=!1){return new ky({Cu:e,methodName:n,qu:i,path:kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pc(t){const e=t._freezeSettings(),n=Vd(t._databaseId);return new XO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cy(t,e,n,i,s,r={}){const o=t.Qu(r.merge||r.mergeFields?2:0,e,n,s);Ry("Data must be an object, but it was:",o,i);const a=RI(i,o);let l,c;if(r.merge)l=new gn(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const f of r.mergeFields){const p=Dg(e,f,n);if(!o.contains(p))throw new ie($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);MI(h,p)||h.push(p)}l=new gn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new YO(new Gt(a),l,c)}class Kd extends Hd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kd}}class Ay extends Hd{_toFieldTransform(e){return new q2(e.path,new tc)}isEqual(e){return e instanceof Ay}}function Py(t,e,n,i){const s=t.Qu(1,e,n);Ry("Data must be an object, but it was:",s,i);const r=[],o=Gt.empty();Kr(i,(l,c)=>{const h=Dy(e,l,n);c=Qe(c);const f=s.Nu(h);if(c instanceof Kd)r.push(h);else{const p=Nc(c,f);p!=null&&(r.push(h),o.set(h,p))}});const a=new gn(r);return new PI(o,a,s.fieldTransforms)}function Ny(t,e,n,i,s,r){const o=t.Qu(1,e,n),a=[Dg(e,i,n)],l=[s];if(r.length%2!=0)throw new ie($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)a.push(Dg(e,r[p])),l.push(r[p+1]);const c=[],h=Gt.empty();for(let p=a.length-1;p>=0;--p)if(!MI(c,a[p])){const m=a[p];let v=l[p];v=Qe(v);const w=o.Nu(m);if(v instanceof Kd)c.push(m);else{const x=Nc(v,w);x!=null&&(c.push(m),h.set(m,x))}}const f=new gn(c);return new PI(h,f,o.fieldTransforms)}function JO(t,e,n,i=!1){return Nc(n,t.Qu(i?4:3,e))}function Nc(t,e){if(DI(t=Qe(t)))return Ry("Unsupported field value:",e,t),RI(t,e);if(t instanceof Hd)return function(i,s){if(!NI(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=Nc(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=Qe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $2(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=yt.fromDate(i);return{timestampValue:Hh(s.serializer,r)}}if(i instanceof yt){const r=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hh(s.serializer,r)}}if(i instanceof Sy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fr)return{bytesValue:nI(s.serializer,i._byteString)};if(i instanceof Ut){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:hy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Iy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ly(a.serializer,l)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${Wd(i)}`)}(t,e)}function RI(t,e){const n={};return AS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kr(t,(i,s)=>{const r=Nc(s,e.Mu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function DI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof Sy||t instanceof Fr||t instanceof Ut||t instanceof Hd||t instanceof Iy)}function Ry(t,e,n){if(!DI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Wd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Dg(t,e,n){if((e=Qe(e))instanceof da)return e._internalPath;if(typeof e=="string")return Dy(t,e);throw Qh("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZO=new RegExp("[~\\*/\\[\\]]");function Dy(t,e,n){if(e.search(ZO)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new da(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qh(t,e,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new ie($.INVALID_ARGUMENT,a+t+l)}function MI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(My("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eL extends Yh{data(){return super.data()}}function My(t,e){return typeof e=="string"?Dy(t,e):e instanceof da?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jy{}class jI extends jy{}function nL(t,e,...n){let i=[];e instanceof jy&&i.push(e),i=i.concat(n),function(r){const o=r.filter(l=>l instanceof Ly).length,a=r.filter(l=>l instanceof Oy).length;if(o>1||o>0&&a>0)throw new ie($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Oy extends jI{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Oy(e,n,i)}_apply(e){const n=this._parse(e);return OI(e._query,n),new Gr(e.firestore,e.converter,Tg(e._query,n))}_parse(e){const n=Pc(e.firestore);return function(r,o,a,l,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Aw(f,h);const m=[];for(const v of f)m.push(Cw(l,r,v));p={arrayValue:{values:m}}}else p=Cw(l,r,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Aw(f,h),p=JO(a,o,f,h==="in"||h==="not-in");return dt.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ly extends jy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ly(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let o=s;const a=r.getFlattenedFilters();for(const l of a)OI(o,l),o=Tg(o,l)}(e._query,n),new Gr(e.firestore,e.converter,Tg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fy extends jI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fy(e,n)}_apply(e){const n=function(s,r,o){if(s.startAt!==null)throw new ie($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ec(r,o)}(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,function(s,r){const o=s.explicitOrderBy.concat([r]);return new ca(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function iL(t,e="asc"){const n=e,i=My("orderBy",t);return Fy._create(i,n)}function Cw(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new ie($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FS(e)&&n.indexOf("/")!==-1)throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Fe.fromString(n));if(!de.isDocumentKey(i))throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return G0(t,new de(i))}if(n instanceof Ut)return G0(t,n._key);throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wd(n)}.`)}function Aw(t,e){if(!Array.isArray(t)||t.length===0)throw new ie($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OI(t,e){const n=function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LI{convertValue(e,n="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Kr(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>rt(o.doubleValue));return new Iy(r)}convertGeoPoint(e){return new Sy(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=iy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Xl(e));default:return null}}convertTimestamp(e){const n=Fs(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Fe.fromString(e);Ce(cI(i));const s=new Jl(i.get(1),i.get(3)),r=new de(i.popFirst(5));return s.isEqual(n)||zi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class sL extends LI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class By extends Yh{constructor(e,n,i,s,r,o){super(e,n,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(My("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class nh extends By{data(e={}){return super.data(e)}}class rL{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new To(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new nh(this._firestore,this._userDataWriter,i.key,i,new To(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new nh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new To(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new nh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new To(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:oL(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}class Uy extends LI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function Wy(t,e,n){t=Gn(t,Ut);const i=Gn(t.firestore,Bs),s=Vy(t.converter,e,n);return qd(i,[Cy(Pc(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,gt.none())])}function aL(t,e,n,...i){t=Gn(t,Ut);const s=Gn(t.firestore,Bs),r=Pc(s);let o;return o=typeof(e=Qe(e))=="string"||e instanceof da?Ny(r,"updateDoc",t._key,e,n,i):Py(r,"updateDoc",t._key,e),qd(s,[o.toMutation(t._key,gt.exists(!0))])}function lL(t){return qd(Gn(t.firestore,Bs),[new Ic(t._key,gt.none())])}function sc(t,...e){var n,i,s;t=Qe(t);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||kw(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(kw(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,h;if(t instanceof Ut)c=Gn(t.firestore,Bs),h=ay(t._key.path),l={next:f=>{e[o]&&e[o](cL(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Gn(t,Gr);c=Gn(f.firestore,Bs),h=f._query;const p=new Uy(c);l={next:m=>{e[o]&&e[o](new rL(c,p,f,m))},error:e[o+1],complete:e[o+2]},tL(t._query)}return function(p,m,v,w){const x=new FO(w),b=new wO(m,x,v);return p.asyncQueue.enqueueAndForget(async()=>mO(await bw(p),b)),()=>{x.Za(),p.asyncQueue.enqueueAndForget(async()=>yO(await bw(p),b))}}($d(c),h,a,l)}function qd(t,e){return function(i,s){const r=new Rs;return i.asyncQueue.enqueueAndForget(async()=>PO(await zO(i),s,r)),r.promise}($d(t),e)}function cL(t,e,n){const i=n.docs.get(e._key),s=new Uy(t);return new By(t,s,e._key,i,new To(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pc(e)}set(e,n,i){this._verifyNotCommitted();const s=fs(e,this._firestore),r=Vy(s.converter,n,i),o=Cy(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(o.toMutation(s._key,gt.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const r=fs(e,this._firestore);let o;return o=typeof(n=Qe(n))=="string"||n instanceof da?Ny(this._dataReader,"WriteBatch.update",r._key,n,i,s):Py(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(o.toMutation(r._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=fs(e,this._firestore);return this._mutations=this._mutations.concat(new Ic(n._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fs(t,e){if((t=Qe(t)).firestore!==e)throw new ie($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Pc(n)}get(n){const i=fs(n,this._firestore),s=new sL(this._firestore);return this._transaction.lookup([i._key]).then(r=>{if(!r||r.length!==1)return fe();const o=r[0];if(o.isFoundDocument())return new Yh(this._firestore,s,o.key,o,i.converter);if(o.isNoDocument())return new Yh(this._firestore,s,i._key,null,i.converter);throw fe()})}set(n,i,s){const r=fs(n,this._firestore),o=Vy(r.converter,i,s),a=Cy(this._dataReader,"Transaction.set",r._key,o,r.converter!==null,s);return this._transaction.set(r._key,a),this}update(n,i,s,...r){const o=fs(n,this._firestore);let a;return a=typeof(i=Qe(i))=="string"||i instanceof da?Ny(this._dataReader,"Transaction.update",o._key,i,s,r):Py(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=fs(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=fs(e,this._firestore),i=new Uy(this._firestore);return super.get(e).then(s=>new By(this._firestore,i,n._key,s._document,new To(!1,!1),n.converter))}}function FI(t,e,n){t=Gn(t,Bs);const i=Object.assign(Object.assign({},uL),n);return function(r){if(r.maxAttempts<1)throw new ie($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,a){const l=new Rs;return r.asyncQueue.enqueueAndForget(async()=>{const c=await $O(r);new BO(r.asyncQueue,c,a,o,l).au()}),l.promise}($d(t),s=>e(new dL(t,s)),i)}function fa(){return new Ay("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){return $d(t=Gn(t,Bs)),new hL(t,e=>qd(t,e))}(function(e,n=!0){(function(s){la=s})(aa),yi(new Xn("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new Bs(new a2(i.getProvider("auth-internal")),new h2(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(c.options.projectId,h)}(o,s),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),An(z0,"4.7.3",e),An(z0,"4.7.3","esm2017")})();const BI="@firebase/installations",zy="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=1e4,WI=`w:${zy}`,zI="FIS_v2",fL="https://firebaseinstallations.googleapis.com/v1",pL=60*60*1e3,gL="installations",mL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vr=new $r(gL,mL,yL);function $I(t){return t instanceof ti&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI({projectId:t}){return`${fL}/projects/${t}/installations`}function KI(t){return{token:t.token,requestStatus:2,expiresIn:_L(t.expiresIn),creationTime:Date.now()}}async function qI(t,e){const i=(await e.json()).error;return Vr.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function GI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function vL(t,{refreshToken:e}){const n=GI(t);return n.append("Authorization",wL(e)),n}async function QI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function _L(t){return Number(t.replace("s","000"))}function wL(t){return`${zI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=HI(t),s=GI(t),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:zI,appId:t.appId,sdkVersion:WI},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await QI(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:KI(c.authToken)}}else throw await qI("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=/^[cdef][\w-]{21}$/,Mg="";function TL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=SL(t);return EL.test(n)?n:Mg}catch{return Mg}}function SL(t){return xL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=new Map;function JI(t,e){const n=Gd(t);ZI(n,e),IL(n,e)}function ZI(t,e){const n=XI.get(t);if(n)for(const i of n)i(e)}function IL(t,e){const n=kL();n&&n.postMessage({key:t,fid:e}),CL()}let br=null;function kL(){return!br&&"BroadcastChannel"in self&&(br=new BroadcastChannel("[Firebase] FID Change"),br.onmessage=t=>{ZI(t.data.key,t.data.fid)}),br}function CL(){XI.size===0&&br&&(br.close(),br=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="firebase-installations-database",PL=1,Br="firebase-installations-store";let Jf=null;function $y(){return Jf||(Jf=jT(AL,PL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Br)}}})),Jf}async function Xh(t,e){const n=Gd(t),s=(await $y()).transaction(Br,"readwrite"),r=s.objectStore(Br),o=await r.get(n);return await r.put(e,n),await s.done,(!o||o.fid!==e.fid)&&JI(t,e.fid),e}async function ek(t){const e=Gd(t),i=(await $y()).transaction(Br,"readwrite");await i.objectStore(Br).delete(e),await i.done}async function Qd(t,e){const n=Gd(t),s=(await $y()).transaction(Br,"readwrite"),r=s.objectStore(Br),o=await r.get(n),a=e(o);return a===void 0?await r.delete(n):await r.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&JI(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hy(t){let e;const n=await Qd(t.appConfig,i=>{const s=NL(i),r=RL(t,s);return e=r.registrationPromise,r.installationEntry});return n.fid===Mg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function NL(t){const e=t||{fid:TL(),registrationStatus:0};return tk(e)}function RL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vr.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=DL(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ML(t)}:{installationEntry:e}}async function DL(t,e){try{const n=await bL(t,e);return Xh(t.appConfig,n)}catch(n){throw $I(n)&&n.customData.serverCode===409?await ek(t.appConfig):await Xh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ML(t){let e=await Pw(t.appConfig);for(;e.registrationStatus===1;)await YI(100),e=await Pw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Hy(t);return i||n}return e}function Pw(t){return Qd(t,e=>{if(!e)throw Vr.create("installation-not-found");return tk(e)})}function tk(t){return jL(t)?{fid:t.fid,registrationStatus:0}:t}function jL(t){return t.registrationStatus===1&&t.registrationTime+UI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL({appConfig:t,heartbeatServiceProvider:e},n){const i=LL(t,n),s=vL(t,n),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:WI,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await QI(()=>fetch(i,a));if(l.ok){const c=await l.json();return KI(c)}else throw await qI("Generate Auth Token",l)}function LL(t,{fid:e}){return`${HI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ky(t,e=!1){let n;const i=await Qd(t.appConfig,r=>{if(!nk(r))throw Vr.create("not-registered");const o=r.authToken;if(!e&&BL(o))return r;if(o.requestStatus===1)return n=FL(t,e),r;{if(!navigator.onLine)throw Vr.create("app-offline");const a=WL(r);return n=VL(t,a),a}});return n?await n:i.authToken}async function FL(t,e){let n=await Nw(t.appConfig);for(;n.authToken.requestStatus===1;)await YI(100),n=await Nw(t.appConfig);const i=n.authToken;return i.requestStatus===0?Ky(t,e):i}function Nw(t){return Qd(t,e=>{if(!nk(e))throw Vr.create("not-registered");const n=e.authToken;return zL(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function VL(t,e){try{const n=await OL(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Xh(t.appConfig,i),n}catch(n){if($I(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ek(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Xh(t.appConfig,i)}throw n}}function nk(t){return t!==void 0&&t.registrationStatus===2}function BL(t){return t.requestStatus===2&&!UL(t)}function UL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pL}function WL(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function zL(t){return t.requestStatus===1&&t.requestTime+UI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(t){const e=t,{installationEntry:n,registrationPromise:i}=await Hy(e);return i?i.catch(console.error):Ky(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(t,e=!1){const n=t;return await KL(n),(await Ky(n,e)).token}async function KL(t){const{registrationPromise:e}=await Hy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){if(!t||!t.options)throw Zf("App Configuration");if(!t.name)throw Zf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Zf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Zf(t){return Vr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="installations",GL="installations-internal",QL=t=>{const e=t.getProvider("app").getImmediate(),n=qL(e),i=yc(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},YL=t=>{const e=t.getProvider("app").getImmediate(),n=yc(e,ik).getImmediate();return{getId:()=>$L(n),getToken:s=>HL(n,s)}};function XL(){yi(new Xn(ik,QL,"PUBLIC")),yi(new Xn(GL,YL,"PRIVATE"))}XL();An(BI,zy);An(BI,zy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="analytics",JL="firebase_id",ZL="origin",eF=60*1e3,tF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new Pd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pn=new $r("analytics","Analytics",nF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t){if(!t.startsWith(qy)){const e=Pn.create("invalid-gtag-resource",{gtagURL:t});return an.warn(e.message),""}return t}function sk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function sF(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function rF(t,e){const n=sF("firebase-js-sdk-policy",{createScriptURL:iF}),i=document.createElement("script"),s=`${qy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function oF(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function aF(t,e,n,i,s,r){const o=i[s];try{if(o)await e[o];else{const l=(await sk(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){an.error(a)}t("config",s,r)}async function lF(t,e,n,i,s){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await sk(n);for(const l of o){const c=a.find(f=>f.measurementId===l),h=c&&e[c.appId];if(h)r.push(h);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),t("event",i,s||{})}catch(r){an.error(r)}}function cF(t,e,n,i){async function s(r,...o){try{if(r==="event"){const[a,l]=o;await lF(t,e,n,a,l)}else if(r==="config"){const[a,l]=o;await aF(t,e,n,i,a,l)}else if(r==="consent"){const[a,l]=o;t("consent",a,l)}else if(r==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(r==="set"){const[a]=o;t("set",a)}else t(r,...o)}catch(a){an.error(a)}}return s}function uF(t,e,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=cF(r,t,e,n),{gtagCore:r,wrappedGtag:window[s]}}function hF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(qy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=30,fF=1e3;class pF{constructor(e={},n=fF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const rk=new pF;function gF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function mF(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:gF(i)},r=tF.replace("{app-id}",n),o=await fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Pn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function yF(t,e=rk,n){const{appId:i,apiKey:s,measurementId:r}=t.options;if(!i)throw Pn.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw Pn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new wF;return setTimeout(async()=>{a.abort()},eF),ok({appId:i,apiKey:s,measurementId:r},o,a,e)}async function ok(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=rk){var r;const{appId:o,measurementId:a}=t;try{await vF(i,e)}catch(l){if(a)return an.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await mF(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!_F(c)){if(s.deleteThrottleMetadata(o),a)return an.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((r=c==null?void 0:c.customData)===null||r===void 0?void 0:r.httpStatus)===503?p0(n,s.intervalMillis,dF):p0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,f),an.debug(`Calling attemptFetch again in ${h} millis`),ok(t,f,i,s)}}function vF(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(r),i(Pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _F(t){if(!(t instanceof ti)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function bF(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const r=await e,o=Object.assign(Object.assign({},i),{send_to:r});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xF(){if(NT())try{await RT()}catch(t){return an.warn(Pn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return an.warn(Pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function EF(t,e,n,i,s,r,o){var a;const l=yF(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&an.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>an.error(m)),e.push(l);const c=xF().then(m=>{if(m)return i.getId()}),[h,f]=await Promise.all([l,c]);hF(r)||rF(r,h.measurementId),s("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[ZL]="firebase",p.update=!0,f!=null&&(p[JL]=f),s("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e){this.app=e}_delete(){return delete bl[this.app.options.appId],Promise.resolve()}}let bl={},Dw=[];const Mw={};let ep="dataLayer",SF="gtag",jw,ak,Ow=!1;function IF(){const t=[];if(PT()&&t.push("This is a browser extension environment."),wN()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=Pn.create("invalid-analytics-context",{errorInfo:e});an.warn(n.message)}}function kF(t,e,n){IF();const i=t.options.appId;if(!i)throw Pn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)an.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pn.create("no-api-key");if(bl[i]!=null)throw Pn.create("already-exists",{id:i});if(!Ow){oF(ep);const{wrappedGtag:r,gtagCore:o}=uF(bl,Dw,Mw,ep,SF);ak=r,jw=o,Ow=!0}return bl[i]=EF(t,Dw,Mw,e,jw,ep,n),new TF(t)}function CF(t,e,n,i){t=Qe(t),bF(ak,bl[t.app.options.appId],e,n,i).catch(s=>an.error(s))}const Lw="@firebase/analytics",Fw="0.10.8";function AF(){yi(new Xn(Rw,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return kF(i,s,n)},"PUBLIC")),yi(new Xn("analytics-internal",t,"PRIVATE")),An(Lw,Fw),An(Lw,Fw,"esm2017");function t(e){try{const n=e.getProvider(Rw).getImmediate();return{logEvent:(i,s,r)=>CF(n,i,s,r)}}catch(n){throw Pn.create("interop-component-reg-failed",{reason:n})}}}AF();const PF={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},lk=OT(PF),Fa=t2(lk),Ct=qO(lk),ck=M.createContext(null);function NF({children:t}){const[e,n]=M.useState(null),[i,s]=M.useState(!0),[r,o]=M.useState(null);M.useEffect(()=>{const l=zD(Fa,c=>{n(c),s(!1)});return()=>l()},[]);const a=M.useMemo(()=>({user:e,initializing:i,authError:r,clearAuthError:()=>o(null),async signup(l,c){o(null);try{return(await LD(Fa,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,c){o(null);try{return(await FD(Fa,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await $D(Fa)},async resetPassword(l){o(null);try{await OD(Fa,l)}catch(c){throw o((c==null?void 0:c.message)||"Failed to send reset email."),c}}}),[e,i,r]);return d.jsx(ck.Provider,{value:a,children:t})}function Mn(){return M.useContext(ck)}const uk=M.createContext(null),Vw={email:"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],isAdmin:!1,accountType:"user",createdAt:null};function RF(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function DF(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:RF(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).sort((e,n)=>String(n.startDateIso||"").localeCompare(String(e.startDateIso||""))):[]}function MF({children:t}){const{user:e}=Mn(),[n,i]=M.useState(Vw),[s,r]=M.useState(!1),[o,a]=M.useState(null);M.useEffect(()=>{if(i(Vw),a(null),!e)return;const c=Qn(Ct,"users",e.uid);r(!0);const h=sc(c,async f=>{if(!f.exists()){await Wy(c,{email:e.email||"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],isAdmin:!1,accountType:"user",createdAt:fa()});return}const p=f.data(),m=!!p.isAdmin||p.accountType==="admin",v=p.accountType==="admin"||p.accountType==="user"?p.accountType:m?"admin":"user";i({email:p.email||e.email||"",sex:p.sex||"",height:p.height||"",triplemeasurements:!!p.triplemeasurements,liftNames:Array.isArray(p.liftNames)&&p.liftNames.length===3?p.liftNames:["Bench Press","Squat","Deadlift"],cycles:DF(p.cycles),isAdmin:m,accountType:v,createdAt:p.createdAt||null}),r(!1)},f=>{a((f==null?void 0:f.message)||"Failed to load profile."),r(!1)});return()=>h()},[e]);const l=M.useMemo(()=>({profile:n,loading:s,profileError:o,async updateProfile(c){if(!e)throw new Error("Not authenticated");a(null);const h=Qn(Ct,"users",e.uid);await aL(h,c)}}),[n,s,o,e]);return d.jsx(uk.Provider,{value:l,children:t})}function Rc(){return M.useContext(uk)}function jF(){const{user:t,logout:e}=Mn(),{profile:n}=Rc(),i=Gs(),s=!!t&&(!!(n!=null&&n.isAdmin)||(n==null?void 0:n.accountType)==="admin");async function r(){await e(),i("/dashboard")}return d.jsx("div",{className:"nav",children:d.jsxs("div",{className:"nav-inner",children:[d.jsxs("div",{className:"brand",children:[d.jsx("div",{className:"badge"}),d.jsxs("div",{children:[d.jsx("h1",{children:"Body Recomposition Tracker"}),d.jsx("div",{className:"small",children:"Created by Andre Gomes"})]})]}),d.jsxs("div",{className:"nav-links",children:[d.jsx(no,{to:"/dashboard",className:({isActive:a})=>a?"active":"",children:"Dashboard"}),t&&d.jsx(no,{to:"/entry",className:({isActive:a})=>a?"active":"",children:"Entry"}),t&&d.jsx(no,{to:"/profile",className:({isActive:a})=>a?"active":"",children:"Profile"}),s&&d.jsx(no,{to:"/admin",className:({isActive:a})=>a?"active":"",children:"Admin"})]}),d.jsx("div",{className:"nav-actions",children:t?d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"icon-btn","aria-label":"Notifications",title:"Notifications",onClick:()=>i("/notifications"),children:[d.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[d.jsx("path",{d:"M12 22a2.25 2.25 0 0 0 2.2-1.75H9.8A2.25 2.25 0 0 0 12 22Z",fill:"currentColor",opacity:"0.85"}),d.jsx("path",{d:"M19 17H5c1.2-1.3 2-2.4 2-6a5 5 0 0 1 10 0c0 3.6.8 4.7 2 6Z",stroke:"currentColor",strokeWidth:"1.6",strokeLinejoin:"round"}),d.jsx("path",{d:"M10 6a2 2 0 0 1 4 0",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),0>0]}),d.jsx("button",{className:"btn danger",onClick:r,children:"Log out"})]}):d.jsxs(d.Fragment,{children:[d.jsx(no,{to:"/login",className:"btn",children:"Log in"}),d.jsx(no,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function _u({children:t}){const{user:e,initializing:n}=Mn();return n?d.jsx("div",{className:"panel",children:d.jsx("div",{className:"muted",children:"Loading"})}):e?t:d.jsx(lg,{to:"/login",replace:!0})}function Jh(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function rc(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function Zh(){return Jh(new Date)}function OF(t,e){const n=rc(t);return n.setDate(n.getDate()+Number(e)),Jh(n)}function LF(t,e){return t.dateIso.localeCompare(e.dateIso)}function Gy(t,e,n){const i=AI(Ct,"users",t,"entries");return sc(i,s=>{const r=[];s.forEach(a=>{const l=a.data();r.push({id:a.id,...l})});const o=r.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(LF);e(o)},n)}async function FF(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=Qn(Ct,"users",t,"entries",n),s=rc(n),r={...e,dateIso:n,date:e.date||s,updatedAt:fa()};await Wy(i,r,{merge:!0})}async function VF(t,e){const n=VI(Ct);for(const i of e||[]){const s=i==null?void 0:i.dateIso,r=i==null?void 0:i.patch;if(!s||!r)continue;const o=Qn(Ct,"users",t,"entries",s);n.update(o,{...r,updatedAt:fa()})}await n.commit()}async function BF(t,e){const n=Qn(Ct,"users",t,"entries",e);await lL(n)}const UF=2/8;function hk({protein:t,carbs:e,fats:n}){const i=Number(t??0),s=Number(e??0),r=Number(n??0);return i*4+s*4+r*9}function fr(t,e){const n=Number(t),i=Number(e);if(!Number.isFinite(n)||n<=0||!Number.isFinite(i)||i<=0||i>=37)return null;const s=n*(36/(37-i));return Number.isFinite(s)?s:null}function WF({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(s=>s==null||s===""?NaN:Number(s)).filter(s=>Number.isFinite(s));return i.length?i.reduce((s,r)=>s+r,0)/i.length:null}function io(t,e=UF){const n=[];let i=null;for(const s of t){if(!Number.isFinite(s)){n.push(i);continue}if(i===null){i=s,n.push(s);continue}const r=e*s+(1-e)*i;i=r,n.push(r)}return n}function zF(t,e,n){const i=[t,e,n].map(s=>Number(s)).filter(s=>Number.isFinite(s));return i.length?i.reduce((s,r)=>s+r,0)/i.length:null}function jo(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],s=t==null?void 0:t[`${e}2`],r=t==null?void 0:t[`${e}3`],o=zF(i,s,r);return Number.isFinite(o)?o:null}function $F({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const s=Number(e);if(!Number.isFinite(s)||s<=0)return null;const r=String(t||"").toLowerCase(),o=jo(n,"neck",i),a=jo(n,"waist",i),l=jo(n,"hip",i);if(r==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const c=a-o;if(!(c>0))return null;const h=495/(1.0324-.19077*Math.log10(c)+.15456*Math.log10(s))-450;return Number.isFinite(h)?h:null}if(r==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const c=a+l-o;if(!(c>0))return null;const h=495/(1.29579-.35004*Math.log10(c)+.221*Math.log10(s))-450;return Number.isFinite(h)?h:null}return null}function HF({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function dk(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,s=(e==null?void 0:e.height)||null,r=t.map(v=>rr(v.bench)),o=t.map(v=>rr(v.squat)),a=t.map(v=>rr(v.deadlift)),l=v=>{let w=null;return v.map(x=>Number.isFinite(x)?(w=x,x):w)},c=l(r),h=l(o),f=l(a),p=t.map((v,w)=>({dateIso:v.dateIso,weight:rr(v.weight),protein:rr(v.protein),carbs:rr(v.carbs),fats:rr(v.fats),neckCm:jo(v,"neck",n),waistCm:jo(v,"waist",n),hipCm:jo(v,"hip",n),bench:r[w],squat:o[w],deadlift:a[w],calories:hk(v),avgStrength:WF({bench:c[w],squat:h[w],deadlift:f[w]}),bfPct:$F({sex:i,heightCm:s,entry:v,tripleEnabled:n})}));p.forEach(v=>{v.lbm=HF({weightKg:v.weight,bfPct:v.bfPct})});const m={weight:io(p.map(v=>v.weight)),bench:io(p.map(v=>v.bench)),squat:io(p.map(v=>v.squat)),deadlift:io(p.map(v=>v.deadlift)),calories:io(p.map(v=>v.calories)),avgStrength:io(p.map(v=>v.avgStrength))};return p.map((v,w)=>({...v,wma:{weight:m.weight[w],bench:m.bench[w],squat:m.squat[w],deadlift:m.deadlift[w],calories:m.calories[w],avgStrength:m.avgStrength[w]}}))}function KF(t){var p,m,v,w;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),s=x=>x*7-1;function r(x){var b;for(let E=x;E>=0;E--){const k=(b=t[E])==null?void 0:b.lbm;if(Number.isFinite(k))return k}return null}for(let x=1;x<=i;x++){const b=(x-1)*7,E=s(x),k=t.slice(b,E+1),D=Va(k.map(S=>S.calories)),N=Va(k.map(S=>{var U;return(U=S==null?void 0:S.wma)==null?void 0:U.avgStrength})),j=(m=(p=k[0])==null?void 0:p.wma)==null?void 0:m.weight,T=(w=(v=k[k.length-1])==null?void 0:v.wma)==null?void 0:w.weight,_=Number.isFinite(j)&&Number.isFinite(T)?T-j:null;let I=null;if(Number.isFinite(D)&&Number.isFinite(_)){const U=-_*7700/7;I=D+U}const P=r(E);let R=null,A="";Number.isFinite(P)&&Number.isFinite(_)&&(R=Math.max(0,-_)/P*100,R<.5?A="Conservative":R<=1?A="Optimal":A="Aggressive"),e.push({week:x,avgCalories:D,weightChange:_,tdee:I,avgStrengthWma:N,lbm:P,lossRatePct:R,lossRateStatus:A,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(x=>x.tdee).filter(Number.isFinite),a=o.length?Va(o):null,l=e.slice(0,2).map(x=>x.avgStrengthWma).filter(Number.isFinite),c=l.length?Va(l):null,h=e.slice(0,2).map(x=>Number.isFinite(x.weightChange)?Math.max(0,-x.weightChange):null).filter(Number.isFinite),f=h.length?Va(h):null;if(Number.isFinite(a))for(const x of e)Number.isFinite(x.tdee)&&(x.tdeeChangeFromBaseline=x.tdee-a,x.adaptationPct=x.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:c,baselineWeeklyLoss:f}}function rr(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function Va(t){const e=(t||[]).map(n=>n==null||n===""?NaN:Number(n)).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}const qF=[{id:"cutting_optimal",label:"Cutting (optimal)"},{id:"cutting_aggressive",label:"Cutting (aggressive / strength down)"},{id:"recomp_maintain",label:"Recomping (maintaining weight)"},{id:"bulking_lean",label:"Lean bulking"},{id:"bulking_dirty",label:"Dirty bulking"},{id:"spinning_wheels",label:"Spinning wheels (stall)"},{id:"skinny_fat",label:"Skinny-fat trajectory (bad cut)"},{id:"detraining",label:"Detraining (no stimulus)"},{id:"metabolic_crash",label:"Metabolic crash (slowdown)"}];function GF(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return e>>>0}function QF(t){let e=t>>>0;return function(){e|=0,e=e+1831565813|0;let i=Math.imul(e^e>>>15,1|e);return i=i+Math.imul(i^i>>>7,61|i)^i,((i^i>>>14)>>>0)/4294967296}}function Vn(t){let e=0,n=0;for(;e===0;)e=t();for(;n===0;)n=t();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*n)}function si(t,e,n){return Math.max(e,Math.min(n,t))}function YF(t,e,n){return t+(e-t)*n}function mr(t){return Math.round(t*10)/10}function XF({heightCm:t,waistCm:e,neckCm:n}){const i=Number(t),s=Number(e),r=Number(n);if(![i,s,r].every(Number.isFinite))return null;const o=s-r;if(!(o>0))return null;const a=495/(1.0324-.19077*Math.log10(o)+.15456*Math.log10(i))-450;return Number.isFinite(a)?a:null}function JF({targetBfPct:t,heightCm:e,neckCm:n}){let i=60,s=140,r=90;for(let o=0;o<40;o++){const a=(i+s)/2,l=XF({heightCm:e,waistCm:a,neckCm:n});if(!Number.isFinite(l)){s=a;continue}r=a,l>t?s=a:i=a}return r}function Qy(t){const e={id:t,sex:"male",heightCm:175,neckCm:40,baselineDays:14,startWeightKg:90,startBfPct:24,startTdee:2550,start1rm:{bench:120,squat:170,deadlift:220}},n={cutting_optimal:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2050,proteinPerKg:()=>2,fatPerKg:()=>.75,strengthSlope:()=>.012,bfDeltaPerDay:()=>-.04,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},cutting_aggressive:{...e,cycleType:"cutting",targetWeightKg:83,plan:{calTarget:()=>1650,rampDays:14,proteinPerKg:()=>1.6,fatPerKg:()=>.6,strengthSlope:()=>-.04,bfDeltaPerDay:()=>-.06,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.95}},recomp_maintain:{...e,cycleType:"maintaining",targetWeightKg:null,plan:{calTarget:()=>2480,proteinPerKg:()=>2.1,fatPerKg:()=>.8,strengthSlope:()=>.02,bfDeltaPerDay:()=>-.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},bulking_lean:{...e,cycleType:"bulking",targetWeightKg:93,plan:{calTarget:()=>2900,proteinPerKg:()=>2,fatPerKg:()=>.9,strengthSlope:()=>.035,bfDeltaPerDay:()=>.005,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},bulking_dirty:{...e,cycleType:"bulking",targetWeightKg:96,plan:{calTarget:()=>3350,proteinPerKg:()=>1.7,fatPerKg:()=>1.05,strengthSlope:()=>.03,bfDeltaPerDay:()=>.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.95}},spinning_wheels:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2450,proteinPerKg:()=>1.9,fatPerKg:()=>.85,strengthSlope:()=>0,bfDeltaPerDay:()=>0,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.9}},skinny_fat:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2050,proteinPerKg:()=>1.3,fatPerKg:()=>.9,strengthSlope:()=>-.07,bfDeltaPerDay:()=>.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.55}},detraining:{...e,cycleType:"maintaining",targetWeightKg:null,plan:{calTarget:()=>2600,proteinPerKg:()=>1.6,fatPerKg:()=>.9,strengthSlope:()=>-.1,bfDeltaPerDay:()=>.02,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.25}},metabolic_crash:{...e,cycleType:"cutting",targetWeightKg:84,plan:{calTarget:i=>i>24&&i<35?2450:1750,proteinPerKg:()=>1.9,fatPerKg:()=>.7,strengthSlope:()=>-.05,bfDeltaPerDay:i=>i>24&&i<35?0:-.05,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.85,adaptationMultiplier:1.8}}};return n[t]||n.cutting_optimal}function ZF(t="cutting_optimal"){const e=Qy(t);return{email:"demo@example.com",sex:e.sex,height:e.heightCm,tripleMeasurements:!1,createdAt:new Date().toISOString(),isAdmin:!1,liftNames:["Bench","Squat","Deadlift"]}}function eV(t,e="cutting_optimal"){const n=Qy(e);if(!(t!=null&&t.length))return[];const i=Math.min(n.baselineDays,t.length),s=t[0].dateIso,r=t[Math.max(0,i-1)].dateIso,o=t[Math.min(t.length-1,i)].dateIso,a=t[Math.min(t.length-1,i)].weight,l=[];l.push({id:"demo-cycle-0",type:"maintaining",startDateIso:s,endDateIso:r,targetWeightKg:null});let c=n.targetWeightKg;return n.cycleType==="cutting"&&!Number.isFinite(c)&&(c=mr(a-4)),n.cycleType==="bulking"&&!Number.isFinite(c)&&(c=mr(a+3)),n.cycleType==="maintaining"&&(c=null),l.push({id:"demo-cycle-1",type:n.cycleType,startDateIso:o,endDateIso:null,targetWeightKg:c}),l}function tV(t=84,e="cutting_optimal"){var D;const n=Qy(e),i=GF(`brt-demo:${e}:${t}`),s=QF(i),r=Math.min(n.baselineDays,Math.max(14,Math.floor(t/2))),o=Math.max(0,t-r),a=new Date;a.setDate(a.getDate()-(t-1));const l=Jh(a);let c=n.startWeightKg,h=0,f=n.startBfPct;const p=n.startTdee;let m=0,v=0;const w={...n.start1rm};({...n.start1rm});const x=[["bench"],["squat"],[],["bench","deadlift"],["squat"],["deadlift"],[]];function b(N,j=1){const T=N%7,_=x[T];return _.length?s()>j?[]:_:[]}const E=[],k=new Map;(D=n.plan)!=null&&D.refeedEvery&&n.plan.refeedEvery>0&&k.set("phase",Math.floor(s()*n.plan.refeedEvery));for(let N=0;N<t;N++){const j=Jh(new Date(rc(l).getTime()+N*864e5)),T=N<r,_=T?0:N-r,I=n.plan,P=c+h;let R=T?p:I.calTarget(_);if(!T){const ee=Math.max(0,I.rampDays||7);if(ee>0&&_<ee){const F=ee===1?1:si(_/(ee-1),0,1);R=YF(p,R,F)}}const A=k.get("phase")||0,S=!T&&I.refeedEvery&&I.refeedEvery>0&&(_+A)%I.refeedEvery===0,U=Math.round(Vn(s)*(T?15:60));let H=R+(S?I.refeedDeltaCal:0)+U;T&&(H-=si(v/2,-240,240));const J=T?1.9:I.proteinPerKg(_),L=T?.85:I.fatPerKg(_),V=Math.max(90,Math.round(P*J+Vn(s)*8)),Q=Math.max(40,Math.round(P*L+Vn(s)*5)),te=H-(V*4+Q*9),z=Math.max(0,Math.round(te/4)),W=V*4+z*4+Q*9,q=T?1:I.trainingConsistency,se=b(N,q),ue=o?si(_/Math.max(1,o-1),0,1):0,Ee=1+(T?.006:I.strengthSlope(_))*ue,je={bench:null,squat:null,deadlift:null};for(const ee of["bench","squat","deadlift"]){if(N===0){je[ee]=mr(w[ee]+Vn(s)*1.5);continue}if(!se.includes(ee))continue;const F=w[ee]*Ee,ce=mr(F+Vn(s)*2);je[ee]=ce}const lt=T?.0012:.0025,Ae=p*(1+(T?0:m))*(1+Vn(s)*lt),We=W-Ae;T&&(v=v*.55+We,v=si(v,-700,700)),c+=We/7700,c=si(c,55,140);const Z=T?.5:.55,pe=S?.35:0,Oe=!T&&z>=350?.14:0,Ye=!T&&z<120?-.12:0,ze=T?.02:.04,Ve=T?-.35:-.9,bn=T?.35:1.6;if(h=h*Z+pe+Oe+Ye+Vn(s)*ze,h=si(h,Ve,bn),T)m=0;else{const ee=Ae-W,F=W-Ae,ce=I.adaptationMultiplier||1,re=ee>0?-.001*ce*si(ee/500,0,2):0,he=F>0?2e-4*si(F/400,0,1.5):0;m+=re+he,m=si(m,-.22,.08)}T||(f+=I.bfDeltaPerDay(_)+Vn(s)*.03,f=si(f,7,45));const Ht=mr(c+h+Vn(s)*.07);let ft=null,ln=null,cn=null;{ft=mr(n.neckCm+Vn(s)*.25);const ee=JF({targetBfPct:f,heightCm:n.heightCm,neckCm:ft});ln=mr(ee+Vn(s)*.6),cn=null}E.push({id:`demo-${e}-${N}`,dateIso:j,weight:Ht,protein:V,carbs:z,fats:Q,bench:je.bench,squat:je.squat,deadlift:je.deadlift,neck:ft,waist:ln,hip:cn})}return E}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Dc(t){return t+.5|0}const vs=(t,e,n)=>Math.max(Math.min(t,n),e);function tl(t){return vs(Dc(t*2.55),0,255)}function Ms(t){return vs(Dc(t*255),0,255)}function Ai(t){return vs(Dc(t/2.55)/100,0,1)}function Bw(t){return vs(Dc(t*100),0,100)}const En={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jg=[..."0123456789ABCDEF"],nV=t=>jg[t&15],iV=t=>jg[(t&240)>>4]+jg[t&15],wu=t=>(t&240)>>4===(t&15),sV=t=>wu(t.r)&&wu(t.g)&&wu(t.b)&&wu(t.a);function rV(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&En[t[1]]*17,g:255&En[t[2]]*17,b:255&En[t[3]]*17,a:e===5?En[t[4]]*17:255}:(e===7||e===9)&&(n={r:En[t[1]]<<4|En[t[2]],g:En[t[3]]<<4|En[t[4]],b:En[t[5]]<<4|En[t[6]],a:e===9?En[t[7]]<<4|En[t[8]]:255})),n}const oV=(t,e)=>t<255?e(t):"";function aV(t){var e=sV(t)?nV:iV;return t?"#"+e(t.r)+e(t.g)+e(t.b)+oV(t.a,e):void 0}const lV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fk(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function cV(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function uV(t,e,n){const i=fk(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function hV(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function Yy(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=hV(n,i,s,h,r),l=l*60+.5),[l|0,c||0,a]}function Xy(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ms)}function Jy(t,e,n){return Xy(fk,t,e,n)}function dV(t,e,n){return Xy(uV,t,e,n)}function fV(t,e,n){return Xy(cV,t,e,n)}function pk(t){return(t%360+360)%360}function pV(t){const e=lV.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?tl(+e[5]):Ms(+e[5]));const s=pk(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=dV(s,r,o):e[1]==="hsv"?i=fV(s,r,o):i=Jy(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function gV(t,e){var n=Yy(t);n[0]=pk(n[0]+e),n=Jy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function mV(t){if(!t)return;const e=Yy(t),n=e[0],i=Bw(e[1]),s=Bw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${Ai(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Uw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ww={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function yV(){const t={},e=Object.keys(Ww),n=Object.keys(Uw);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Uw[r]);r=parseInt(Ww[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let bu;function vV(t){bu||(bu=yV(),bu.transparent=[0,0,0,0]);const e=bu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const _V=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function wV(t){const e=_V.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?tl(o):vs(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?tl(i):vs(i,0,255)),s=255&(e[4]?tl(s):vs(s,0,255)),r=255&(e[6]?tl(r):vs(r,0,255)),{r:i,g:s,b:r,a:n}}}function bV(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ai(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const tp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,so=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function xV(t,e,n){const i=so(Ai(t.r)),s=so(Ai(t.g)),r=so(Ai(t.b));return{r:Ms(tp(i+n*(so(Ai(e.r))-i))),g:Ms(tp(s+n*(so(Ai(e.g))-s))),b:Ms(tp(r+n*(so(Ai(e.b))-r))),a:t.a+n*(e.a-t.a)}}function xu(t,e,n){if(t){let i=Yy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Jy(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function gk(t,e){return t&&Object.assign(e||{},t)}function zw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ms(t[3]))):(e=gk(t,{r:0,g:0,b:0,a:1}),e.a=Ms(e.a)),e}function EV(t){return t.charAt(0)==="r"?wV(t):pV(t)}class oc{constructor(e){if(e instanceof oc)return e;const n=typeof e;let i;n==="object"?i=zw(e):n==="string"&&(i=rV(e)||vV(e)||EV(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=gk(this._rgb);return e&&(e.a=Ai(e.a)),e}set rgb(e){this._rgb=zw(e)}rgbString(){return this._valid?bV(this._rgb):void 0}hexString(){return this._valid?aV(this._rgb):void 0}hslString(){return this._valid?mV(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=xV(this._rgb,e._rgb,n)),this}clone(){return new oc(this.rgb)}alpha(e){return this._rgb.a=Ms(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Dc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return xu(this._rgb,2,e),this}darken(e){return xu(this._rgb,2,-e),this}saturate(e){return xu(this._rgb,1,e),this}desaturate(e){return xu(this._rgb,1,-e),this}rotate(e){return gV(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ti(){}const TV=(()=>{let t=0;return()=>t++})();function Ue(t){return t==null}function At(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Re(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Dn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ri(t,e){return Dn(t)?t:e}function Ie(t,e){return typeof t>"u"?e:t}const SV=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function qe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function De(t,e,n,i){let s,r,o;if(At(t))for(r=t.length,s=0;s<r;s++)e.call(n,t[s],s);else if(Re(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function ed(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function td(t){if(At(t))return t.map(td);if(Re(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=td(t[n[s]]);return e}return t}function mk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function IV(t,e,n,i){if(!mk(t))return;const s=e[t],r=n[t];Re(s)&&Re(r)?ac(s,r,i):e[t]=td(r)}function ac(t,e,n){const i=At(e)?e:[e],s=i.length;if(!Re(t))return t;n=n||{};const r=n.merger||IV;let o;for(let a=0;a<s;++a){if(o=i[a],!Re(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],t,o,n)}return t}function xl(t,e){return ac(t,e,{merger:kV})}function kV(t,e,n){if(!mk(t))return;const i=e[t],s=n[t];Re(i)&&Re(s)?xl(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=td(s))}const $w={"":t=>t,x:t=>t.x,y:t=>t.y};function CV(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function AV(t){const e=CV(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function nd(t,e){return($w[e]||($w[e]=AV(e)))(t)}function Zy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const id=t=>typeof t<"u",Us=t=>typeof t=="function",Hw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function PV(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Wt=Math.PI,mi=2*Wt,NV=mi+Wt,sd=Number.POSITIVE_INFINITY,RV=Wt/180,$n=Wt/2,or=Wt/4,Kw=Wt*2/3,yk=Math.log10,Zo=Math.sign;function El(t,e,n){return Math.abs(t-e)<n}function qw(t){const e=Math.round(t);t=El(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(yk(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function DV(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function MV(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function lc(t){return!MV(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function jV(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function OV(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function xr(t){return t*(Wt/180)}function LV(t){return t*(180/Wt)}function Gw(t){if(!Dn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function FV(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Wt&&(r+=mi),{angle:r,distance:s}}function Og(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function VV(t,e){return(t-e+NV)%mi-Wt}function ss(t){return(t%mi+mi)%mi}function vk(t,e,n,i){const s=ss(t),r=ss(e),o=ss(n),a=ss(r-s),l=ss(o-s),c=ss(s-r),h=ss(s-o);return s===r||s===o||i&&r===o||a>l&&c<h}function kn(t,e,n){return Math.max(e,Math.min(n,t))}function BV(t){return kn(t,-32768,32767)}function nl(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function ev(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Er=(t,e,n,i)=>ev(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),UV=(t,e,n)=>ev(t,n,i=>t[i][e]>=n);function WV(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const _k=["push","pop","shift","splice","unshift"];function zV(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),_k.forEach(n=>{const i="_onData"+Zy(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Qw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(_k.forEach(r=>{delete t[r]}),delete t._chartjs)}function $V(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const wk=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function bk(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,wk.call(window,()=>{i=!1,t.apply(e,n)}))}}function HV(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const xk=t=>t==="start"?"left":t==="end"?"right":"center",dn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,KV=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function qV(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:f,max:p,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(s=Math.min(Er(l,h,f).lo,n?i:Er(e,h,o.getPixelForValue(f)).lo),c){const w=l.slice(0,s+1).reverse().findIndex(x=>!Ue(x[a.axis]));s-=Math.max(0,w)}s=kn(s,0,i-1)}if(v){let w=Math.max(Er(l,o.axis,p,!0).hi+1,n?0:Er(e,h,o.getPixelForValue(p),!0).hi+1);if(c){const x=l.slice(w-1).findIndex(b=>!Ue(b[a.axis]));w+=Math.max(0,x)}r=kn(w,s,i)-s}else r=i-s}return{start:s,count:r}}function GV(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const Eu=t=>t===0||t===1,Yw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*mi/n)),Xw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*mi/n)+1,Tl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*$n)+1,easeOutSine:t=>Math.sin(t*$n),easeInOutSine:t=>-.5*(Math.cos(Wt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Eu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Eu(t)?t:Yw(t,.075,.3),easeOutElastic:t=>Eu(t)?t:Xw(t,.075,.3),easeInOutElastic(t){return Eu(t)?t:t<.5?.5*Yw(t*2,.1125,.45):.5+.5*Xw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Tl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Tl.easeInBounce(t*2)*.5:Tl.easeOutBounce(t*2-1)*.5+.5};function tv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Jw(t){return tv(t)?t:new oc(t)}function np(t){return tv(t)?t:new oc(t).saturate(.5).darken(.1).hexString()}const QV=["x","y","borderWidth","radius","tension"],YV=["color","borderColor","backgroundColor"];function XV(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:YV},numbers:{type:"number",properties:QV}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function JV(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Zw=new Map;function ZV(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Zw.get(n);return i||(i=new Intl.NumberFormat(t,e),Zw.set(n,i)),i}function Ek(t,e,n){return ZV(e,n).format(t)}const e4={values(t){return At(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=t4(t,n)}const o=yk(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Ek(t,i,l)}};function t4(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Tk={formatters:e4};function n4(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Tk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ur=Object.create(null),Lg=Object.create(null);function Sl(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function ip(t,e,n){return typeof e=="string"?ac(Sl(t,e),n):ac(Sl(t,""),e)}class i4{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>np(s.backgroundColor),this.hoverBorderColor=(i,s)=>np(s.borderColor),this.hoverColor=(i,s)=>np(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return ip(this,e,n)}get(e){return Sl(this,e)}describe(e,n){return ip(Lg,e,n)}override(e,n){return ip(Ur,e,n)}route(e,n,i,s){const r=Sl(this,e),o=Sl(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Re(l)?Object.assign({},c,l):Ie(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var at=new i4({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[XV,JV,n4]);function s4(t){return!t||Ue(t.size)||Ue(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function eb(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function ar(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function tb(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Fg(t,e,n,i){Sk(t,e,n,i,null)}function Sk(t,e,n,i,s){let r,o,a,l,c,h,f,p;const m=e.pointStyle,v=e.rotation,w=e.radius;let x=(v||0)*RV;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),m){default:s?t.ellipse(n,i,s/2,w,0,0,mi):t.arc(n,i,w,0,mi),t.closePath();break;case"triangle":h=s?s/2:w,t.moveTo(n+Math.sin(x)*h,i-Math.cos(x)*w),x+=Kw,t.lineTo(n+Math.sin(x)*h,i-Math.cos(x)*w),x+=Kw,t.lineTo(n+Math.sin(x)*h,i-Math.cos(x)*w),t.closePath();break;case"rectRounded":c=w*.516,l=w-c,o=Math.cos(x+or)*l,f=Math.cos(x+or)*(s?s/2-c:l),a=Math.sin(x+or)*l,p=Math.sin(x+or)*(s?s/2-c:l),t.arc(n-f,i-a,c,x-Wt,x-$n),t.arc(n+p,i-o,c,x-$n,x),t.arc(n+f,i+a,c,x,x+$n),t.arc(n-p,i+o,c,x+$n,x+Wt),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,h=s?s/2:l,t.rect(n-h,i-l,2*h,2*l);break}x+=or;case"rectRot":f=Math.cos(x)*(s?s/2:w),o=Math.cos(x)*w,a=Math.sin(x)*w,p=Math.sin(x)*(s?s/2:w),t.moveTo(n-f,i-a),t.lineTo(n+p,i-o),t.lineTo(n+f,i+a),t.lineTo(n-p,i+o),t.closePath();break;case"crossRot":x+=or;case"cross":f=Math.cos(x)*(s?s/2:w),o=Math.cos(x)*w,a=Math.sin(x)*w,p=Math.sin(x)*(s?s/2:w),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"star":f=Math.cos(x)*(s?s/2:w),o=Math.cos(x)*w,a=Math.sin(x)*w,p=Math.sin(x)*(s?s/2:w),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o),x+=or,f=Math.cos(x)*(s?s/2:w),o=Math.cos(x)*w,a=Math.sin(x)*w,p=Math.sin(x)*(s?s/2:w),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"line":o=s?s/2:Math.cos(x)*w,a=Math.sin(x)*w,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(x)*(s?s/2:w),i+Math.sin(x)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function cc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function nv(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function iv(t){t.restore()}function r4(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function o4(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function a4(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ue(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function l4(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function c4(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function rd(t,e,n,i,s,r={}){const o=At(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,a4(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&c4(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Ue(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),l4(t,n,i,c,r),i+=Number(s.lineHeight);t.restore()}function Vg(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Wt,Wt,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Wt,$n,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,$n,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-$n,!0),t.lineTo(n+o.topLeft,i)}const u4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,h4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function d4(t,e){const n=(""+t).match(u4);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const f4=t=>+t||0;function Ik(t,e){const n={},i=Re(e),s=i?Object.keys(e):e,r=Re(t)?i?o=>Ie(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=f4(r(o));return n}function p4(t){return Ik(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Il(t){return Ik(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ei(t){const e=p4(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nn(t,e){t=t||{},e=e||at.font;let n=Ie(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Ie(t.style,e.style);i&&!(""+i).match(h4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ie(t.family,e.family),lineHeight:d4(Ie(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Ie(t.weight,e.weight),string:""};return s.string=s4(s),s}function Tu(t,e,n,i){let s,r,o;for(s=0,r=t.length;s<r;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function g4(t,e,n){const{min:i,max:s}=t,r=SV(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Qr(t,e){return Object.assign(Object.create(t),e)}function sv(t,e=[""],n,i,s=()=>t[0]){const r=n||t;typeof i>"u"&&(i=Pk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>sv([a,...t],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Ck(a,l,()=>E4(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return ib(a).includes(l)},ownKeys(a){return ib(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function ea(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:kk(t,i),setContext:r=>ea(t,r,n,i),override:r=>ea(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return Ck(r,o,()=>y4(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function kk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Us(n)?n:()=>n,isIndexable:Us(i)?i:()=>i}}const m4=(t,e)=>t?t+Zy(e):e,rv=(t,e)=>Re(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Ck(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function y4(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Us(a)&&o.isScriptable(e)&&(a=v4(e,a,t,n)),At(a)&&a.length&&(a=_4(e,a,t,o.isIndexable)),rv(e,a)&&(a=ea(a,s,r&&r[e],o)),a}function v4(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||i);return a.delete(t),rv(t,l)&&(l=ov(s._scopes,s,t,l)),l}function _4(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(Re(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const f=ov(c,s,t,h);e.push(ea(f,r,o&&o[t],a))}}return e}function Ak(t,e,n){return Us(t)?t(e,n):t}const w4=(t,e)=>t===!0?e:typeof t=="string"?nd(e,t):void 0;function b4(t,e,n,i,s){for(const r of e){const o=w4(n,r);if(o){t.add(o);const a=Ak(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function ov(t,e,n,i){const s=e._rootScopes,r=Ak(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=nb(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=nb(a,o,r,l,i),l===null)?!1:sv(Array.from(a),[""],s,r,()=>x4(e,n,i))}function nb(t,e,n,i,s){for(;n;)n=b4(t,e,n,i,s);return n}function x4(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return At(s)&&Re(n)?n:s||{}}function E4(t,e,n,i){let s;for(const r of e)if(s=Pk(m4(r,t),n),typeof s<"u")return rv(t,s)?ov(n,i,t,s):s}function Pk(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function ib(t){let e=t._keys;return e||(e=t._keys=T4(t._scopes)),e}function T4(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const S4=Number.EPSILON||1e-14,ta=(t,e)=>e<t.length&&!t[e].skip&&t[e],Nk=t=>t==="x"?"y":"x";function I4(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=Og(r,s),l=Og(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const f=i*c,p=i*h;return{previous:{x:r.x-f*(o.x-s.x),y:r.y-f*(o.y-s.y)},next:{x:r.x+p*(o.x-s.x),y:r.y+p*(o.y-s.y)}}}function k4(t,e,n){const i=t.length;let s,r,o,a,l,c=ta(t,0);for(let h=0;h<i-1;++h)if(l=c,c=ta(t,h+1),!(!l||!c)){if(El(e[h],0,S4)){n[h]=n[h+1]=0;continue}s=n[h]/e[h],r=n[h+1]/e[h],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=s*o*e[h],n[h+1]=r*o*e[h])}}function C4(t,e,n="x"){const i=Nk(n),s=t.length;let r,o,a,l=ta(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=ta(t,c+1),!a)continue;const h=a[n],f=a[i];o&&(r=(h-o[n])/3,a[`cp1${n}`]=h-r,a[`cp1${i}`]=f-r*e[c]),l&&(r=(l[n]-h)/3,a[`cp2${n}`]=h+r,a[`cp2${i}`]=f+r*e[c])}}function A4(t,e="x"){const n=Nk(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=ta(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=ta(t,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[n]-l[n])/h:0}r[o]=a?c?Zo(s[o-1])!==Zo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}k4(t,s,r),C4(t,r,e)}function Su(t,e,n){return Math.max(Math.min(t,n),e)}function P4(t,e){let n,i,s,r,o,a=cc(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&cc(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=Su(s.cp1x,e.left,e.right),s.cp1y=Su(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Su(s.cp2x,e.left,e.right),s.cp2y=Su(s.cp2y,e.top,e.bottom)))}function N4(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")A4(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=I4(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&P4(t,n)}function av(){return typeof window<"u"&&typeof document<"u"}function lv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function od(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Yd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function R4(t,e){return Yd(t).getPropertyValue(e)}const D4=["top","right","bottom","left"];function kr(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=D4[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const M4=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function j4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(M4(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function pr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=Yd(n),r=s.boxSizing==="border-box",o=kr(s,"padding"),a=kr(s,"border","width"),{x:l,y:c,box:h}=j4(t,n),f=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:m,height:v}=e;return r&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/m*n.width/i),y:Math.round((c-p)/v*n.height/i)}}function O4(t,e,n){let i,s;if(e===void 0||n===void 0){const r=t&&lv(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=Yd(r),l=kr(a,"border","width"),c=kr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=od(a.maxWidth,r,"clientWidth"),s=od(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||sd,maxHeight:s||sd}}const _s=t=>Math.round(t*10)/10;function L4(t,e,n,i){const s=Yd(t),r=kr(s,"margin"),o=od(s.maxWidth,t,"clientWidth")||sd,a=od(s.maxHeight,t,"clientHeight")||sd,l=O4(t,e,n);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const p=kr(s,"border","width"),m=kr(s,"padding");c-=m.width+p.width,h-=m.height+p.height}return c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=_s(Math.min(c,o,l.maxWidth)),h=_s(Math.min(h,a,l.maxHeight)),c&&!h&&(h=_s(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=_s(Math.floor(h*i))),{width:c,height:h}}function sb(t,e,n){const i=e||1,s=_s(t.height*i),r=_s(t.width*i);t.height=_s(t.height),t.width=_s(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const F4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};av()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function rb(t,e){const n=R4(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function gr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function V4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function B4(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=gr(t,s,n),a=gr(s,r,n),l=gr(r,e,n),c=gr(o,a,n),h=gr(a,l,n);return gr(c,h,n)}const U4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},W4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Oo(t,e,n){return t?U4(e,n):W4()}function Rk(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Dk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Mk(t){return t==="angle"?{between:vk,compare:VV,normalize:ss}:{between:nl,compare:(e,n)=>e-n,normalize:e=>e}}function ob({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function z4(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=Mk(i),l=e.length;let{start:c,end:h,loop:f}=t,p,m;if(f){for(c+=l,h+=l,p=0,m=l;p<m&&o(a(e[c%l][i]),s,r);++p)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:f,style:t.style}}function $4(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=Mk(i),{start:h,end:f,loop:p,style:m}=z4(t,e,n),v=[];let w=!1,x=null,b,E,k;const D=()=>l(s,k,b)&&a(s,k)!==0,N=()=>a(r,b)===0||l(r,k,b),j=()=>w||D(),T=()=>!w||N();for(let _=h,I=h;_<=f;++_)E=e[_%o],!E.skip&&(b=c(E[i]),b!==k&&(w=l(b,s,r),x===null&&j()&&(x=a(b,s)===0?_:I),x!==null&&T()&&(v.push(ob({start:x,end:_,loop:p,count:o,style:m})),x=null),I=_,k=b));return x!==null&&v.push(ob({start:x,end:f,loop:p,count:o,style:m})),v}function H4(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=$4(i[s],t.points,e);r.length&&n.push(...r)}return n}function K4(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function q4(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function G4(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=K4(n,s,r,i);if(i===!0)return ab(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return ab(t,q4(n,o,l,c),n,e)}function ab(t,e,n,i){return!i||!i.setContext||!n?e:Q4(t,e,n,i)}function Q4(t,e,n,i){const s=t._chart.getContext(),r=lb(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=r,f=e[0].start,p=f;function m(v,w,x,b){const E=a?-1:1;if(v!==w){for(v+=l;n[v%l].skip;)v-=E;for(;n[w%l].skip;)w+=E;v%l!==w%l&&(c.push({start:v%l,end:w%l,loop:x,style:b}),h=b,f=w%l)}}for(const v of e){f=a?f:v.start;let w=n[f%l],x;for(p=f+1;p<=v.end;p++){const b=n[p%l];x=lb(i.setContext(Qr(s,{type:"segment",p0:w,p1:b,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),Y4(x,h)&&m(f,p-1,v.loop,h),w=b,h=x}f<p-1&&m(f,p-1,v.loop,h)}return c}function lb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Y4(t,e){if(!e)return!1;const n=[],i=function(s,r){return tv(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Iu(t,e,n){return t.options.clip?t[n]:e[n]}function X4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Iu(n,e,"left"),right:Iu(n,e,"right"),top:Iu(i,e,"top"),bottom:Iu(i,e,"bottom")}:e}function J4(t,e){const n=e._clip;if(n.disabled)return!1;const i=X4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Z4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Si=new Z4;const cb="transparent",eB={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Jw(t||cb),s=i.valid&&Jw(e||cb);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class tB{constructor(e,n,i,s){const r=n[i];s=Tu([e.to,s,r,e.from]);const o=Tu([e.from,r,s]);this._active=!0,this._fn=e.fn||eB[e.type||typeof o],this._easing=Tl[e.easing]||Tl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Tu([e.to,n,s,e.from]),this._from=Tu([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class jk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Re(e))return;const n=Object.keys(at.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!Re(r))return;const o={};for(const a of n)o[a]=r[a];(At(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=iB(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&nB(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const h=n[c];let f=r[c];const p=i.get(c);if(f)if(p&&f.active()){f.update(p,h,a);continue}else f.cancel();if(!p||!p.duration){e[c]=h;continue}r[c]=f=new tB(p,e,c,h),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Si.add(this._chart,i),!0}}function nB(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function iB(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function ub(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function sB(t,e,n){if(n===!1)return!1;const i=ub(t,n),s=ub(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function rB(t){let e,n,i,s;return Re(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function Ok(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function hb(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],Dn(c)&&(r||e===0||Zo(e)===Zo(c))&&(e+=c)}return!h&&!i.all?0:e}function oB(t,e){const{iScale:n,vScale:i}=e,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[r]:t[h]};return a}function sp(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function aB(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function lB(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function cB(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function db(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function fb(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,h=aB(r,o,i),f=e.length;let p;for(let m=0;m<f;++m){const v=e[m],{[l]:w,[c]:x}=v,b=v._stacks||(v._stacks={});p=b[c]=cB(s,h,w),p[a]=x,p._top=db(p,o,!0,i.type),p._bottom=db(p,o,!1,i.type);const E=p._visualValues||(p._visualValues={});E[a]=x}}function rp(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function uB(t,e){return Qr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function hB(t,e,n){return Qr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ba(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const op=t=>t==="reset"||t==="none",pb=(t,e)=>e?t:Object.assign({},t),dB=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ok(n,!0),values:null};class kl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=sp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ba(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(f,p,m,v)=>f==="x"?p:f==="r"?v:m,r=n.xAxisID=Ie(i.xAxisID,rp(e,"x")),o=n.yAxisID=Ie(i.yAxisID,rp(e,"y")),a=n.rAxisID=Ie(i.rAxisID,rp(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),h=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Qw(this._data,this),e._stacked&&Ba(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Re(n)){const s=this._cachedMeta;this._data=oB(n,s)}else if(i!==n){if(i){Qw(i,this);const s=this._cachedMeta;Ba(s),s._parsed=[]}n&&Object.isExtensible(n)&&zV(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=sp(n.vScale,n),n.stack!==i.stack&&(s=!0,Ba(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&(fb(this,n._parsed),n._stacked=sp(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,f,p;if(this._parsing===!1)i._parsed=s,i._sorted=!0,p=s;else{At(s[e])?p=this.parseArrayData(i,s,e,n):Re(s[e])?p=this.parseObjectData(i,s,e,n):p=this.parsePrimitiveData(i,s,e,n);const m=()=>f[a]===null||c&&f[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=f=p[h],l&&(m()&&(l=!1),c=f);i._sorted=l}o&&fb(this,p)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,f=new Array(s);let p,m,v;for(p=0,m=s;p<m;++p)v=p+i,f[p]={[a]:h||r.parse(c[v],v),[l]:o.parse(n[v],v)};return f}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,h,f;for(l=0,c=s;l<c;++l)h=l+i,f=n[h],a[l]={x:r.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,f,p,m;for(h=0,f=s;h<f;++h)p=h+i,m=n[p],c[h]={x:r.parse(nd(m,a),p),y:o.parse(nd(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:Ok(s,!0),values:n._stacks[e.axis]._visualValues};return hb(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=hb(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=dB(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=lB(a);let p,m;function v(){m=s[p];const w=m[a.axis];return!Dn(m[e.axis])||h>w||f<w}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),r));++p);if(r){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],Dn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=rB(Ie(this.options.clip,sB(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,r,a,l),h=a;h<a+l;++h){const f=s[h];f.hidden||(f.active&&c?o.push(f):f.draw(e,r))}for(h=0;h<o.length;++h)o[h].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=hB(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=uB(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&id(i);if(a)return pb(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),m=Object.keys(at.elements[e]),v=()=>this.getContext(i,s,n),w=c.resolveNamedOptions(p,m,v,f);return w.$shared&&(w.$shared=l,r[o]=Object.freeze(pb(w,l))),w}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(p,this.getContext(e,i,n))}const c=new jk(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||op(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){op(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!op(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&Ba(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}we(kl,"defaults",{}),we(kl,"datasetElementType",null),we(kl,"dataElementType",null);class ih extends kl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=qV(n,s,o);this._drawStart=a,this._drawCount=l,GV(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,s),p=o.axis,m=a.axis,{spanGaps:v,segment:w}=this.options,x=lc(v)?v:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||s==="none",E=n+i,k=e.length;let D=n>0&&this.getParsed(n-1);for(let N=0;N<k;++N){const j=e[N],T=b?j:{};if(N<n||N>=E){T.skip=!0;continue}const _=this.getParsed(N),I=Ue(_[m]),P=T[p]=o.getPixelForValue(_[p],N),R=T[m]=r||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],N);T.skip=isNaN(P)||isNaN(R)||I,T.stop=N>0&&Math.abs(_[p]-D[p])>x,w&&(T.parsed=_,T.raw=c.data[N]),f&&(T.options=h||this.resolveDataElementOptions(N,j.active?"active":s)),b||this.updateElement(j,N,T,s),D=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}we(ih,"id","line"),we(ih,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),we(ih,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function lr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class cv{constructor(e){we(this,"options");this.options=e||{}}static override(e){Object.assign(cv.prototype,e)}init(){}formats(){return lr()}parse(){return lr()}format(){return lr()}add(){return lr()}diff(){return lr()}startOf(){return lr()}endOf(){return lr()}}var fB={_date:cv};function pB(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?UV:Er;if(i){if(s._sharedOptions){const h=r[0],f=typeof h.getRange=="function"&&h.getRange(e);if(f){const p=c(r,e,n-f),m=c(r,e,n+f);return{lo:p.lo,hi:m.hi}}}}else{const h=c(r,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:p}=t,m=p.slice(0,h.lo+1).reverse().findIndex(w=>!Ue(w[f.axis]));h.lo-=Math.max(0,m);const v=p.slice(h.hi).findIndex(w=>!Ue(w[f.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:r.length-1}}function Xd(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:f,hi:p}=pB(r[a],e,o,s);for(let m=f;m<=p;++m){const v=h[m];v.skip||i(v,c,m)}}}function gB(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function ap(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||Xd(t,n,e,function(a,l,c){!s&&!cc(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function mB(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:f}=FV(o,{x:e.x,y:e.y});vk(f,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return Xd(t,n,e,r),s}function yB(t,e,n,i,s,r){let o=[];const a=gB(n);let l=Number.POSITIVE_INFINITY;function c(h,f,p){const m=h.inRange(e.x,e.y,s);if(i&&!m)return;const v=h.getCenterPoint(s);if(!(!!r||t.isPointInArea(v))&&!m)return;const x=a(e,v);x<l?(o=[{element:h,datasetIndex:f,index:p}],l=x):x===l&&o.push({element:h,datasetIndex:f,index:p})}return Xd(t,n,e,c),o}function lp(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?mB(t,e,n,s):yB(t,e,n,i,s,r)}function gb(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Xd(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var vB={modes:{index(t,e,n,i){const s=pr(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ap(t,s,r,i,o):lp(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,f=c.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const s=pr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ap(t,s,r,i,o):lp(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const s=pr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return ap(t,s,r,i,o)},nearest(t,e,n,i){const s=pr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return lp(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=pr(e,t);return gb(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=pr(e,t);return gb(t,s,"y",n.intersect,i)}}};const Lk=["left","top","right","bottom"];function Ua(t,e){return t.filter(n=>n.pos===e)}function mb(t,e){return t.filter(n=>Lk.indexOf(n.pos)===-1&&n.box.axis===e)}function Wa(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function _B(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function wB(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!Lk.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function bB(t,e){const n=wB(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&e.availableHeight)}return n}function xB(t){const e=_B(t),n=Wa(e.filter(c=>c.box.fullSize),!0),i=Wa(Ua(e,"left"),!0),s=Wa(Ua(e,"right")),r=Wa(Ua(e,"top"),!0),o=Wa(Ua(e,"bottom")),a=mb(e,"x"),l=mb(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Ua(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function yb(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Fk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function EB(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!Re(s)){n.size&&(t[s]-=n.size);const f=i[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?r.height:r.width),n.size=f.size/f.count,t[s]+=n.size}r.getPadding&&Fk(o,r.getPadding());const a=Math.max(0,e.outerWidth-yb(o,t,"left","right")),l=Math.max(0,e.outerHeight-yb(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function TB(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function SB(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function il(t,e,n,i){const s=[];let r,o,a,l,c,h;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,SB(a.horizontal,e));const{same:f,other:p}=EB(e,n,a,i);c|=f&&s.length,h=h||p,l.fullSize||s.push(a)}return c&&il(s,e,n,i)||h}function ku(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function vb(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*h,p=c.size||l.height;id(c.start)&&(o=c.start),l.fullSize?ku(l,s.left,o,n.outerWidth-s.right-s.left,p):ku(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*h,p=c.size||l.width;id(c.start)&&(r=c.start),l.fullSize?ku(l,r,s.top,p,n.outerHeight-s.bottom-s.top):ku(l,r,e.top+c.placed,p,f),c.start=r,c.placed+=f,r=l.right}}e.x=r,e.y=o}var ws={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=ei(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=xB(t.boxes),l=a.vertical,c=a.horizontal;De(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,x)=>x.box.options&&x.box.options.display===!1?w:w+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},s);Fk(p,ei(i));const m=Object.assign({maxPadding:p,w:r,h:o,x:s.left,y:s.top},s),v=bB(l.concat(c),f);il(a.fullSize,m,f,v),il(l,m,f,v),il(c,m,f,v)&&il(l,m,f,v),TB(m),vb(a.leftAndTop,m,f,v),m.x+=m.w,m.y+=m.h,vb(a.rightAndBottom,m,f,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},De(a.chartArea,w=>{const x=w.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Vk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class IB extends Vk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const sh="$chartjs",kB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_b=t=>t===null||t==="";function CB(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[sh]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_b(s)){const r=rb(t,"width");r!==void 0&&(t.width=r)}if(_b(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=rb(t,"height");r!==void 0&&(t.height=r)}return t}const Bk=F4?{passive:!0}:!1;function AB(t,e,n){t&&t.addEventListener(e,n,Bk)}function PB(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Bk)}function NB(t,e){const n=kB[t.type]||t.type,{x:i,y:s}=pr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function ad(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function RB(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ad(a.addedNodes,i),o=o&&!ad(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function DB(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ad(a.removedNodes,i),o=o&&!ad(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const uc=new Map;let wb=0;function Uk(){const t=window.devicePixelRatio;t!==wb&&(wb=t,uc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function MB(t,e){uc.size||window.addEventListener("resize",Uk),uc.set(t,e)}function jB(t){uc.delete(t),uc.size||window.removeEventListener("resize",Uk)}function OB(t,e,n){const i=t.canvas,s=i&&lv(i);if(!s)return;const r=bk((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),MB(t,r),o}function cp(t,e,n){n&&n.disconnect(),e==="resize"&&jB(t)}function LB(t,e,n){const i=t.canvas,s=bk(r=>{t.ctx!==null&&n(NB(r,t))},t);return AB(i,e,s),s}class FB extends Vk{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(CB(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[sh])return!1;const i=n[sh].initial;["height","width"].forEach(r=>{const o=i[r];Ue(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[sh],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:RB,detach:DB,resize:OB}[n]||LB;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:cp,detach:cp,resize:cp}[n]||PB)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return L4(e,n,i,s)}isAttached(e){const n=e&&lv(e);return!!(n&&n.isConnected)}}function VB(t){return!av()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?IB:FB}class Ws{constructor(){we(this,"x");we(this,"y");we(this,"active",!1);we(this,"options");we(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return lc(this.x)&&lc(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}we(Ws,"defaults",{}),we(Ws,"defaultRoutes");function BB(t,e){const n=t.options.ticks,i=UB(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?zB(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return $B(e,c,r,o/s),c;const h=WB(r,e,s);if(o>0){let f,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Cu(e,c,h,Ue(m)?0:a-m,a),f=0,p=o-1;f<p;f++)Cu(e,c,h,r[f],r[f+1]);return Cu(e,c,h,l,Ue(m)?e.length:l+m),c}return Cu(e,c,h),c}function UB(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function WB(t,e,n){const i=HB(t),s=e.length/n;if(!i)return Math.max(s,1);const r=DV(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function zB(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function $B(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function Cu(t,e,n,i,s){const r=Ie(i,0),o=Math.min(Ie(s,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),h=r;h<0;)a++,h=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(r+a*n))}function HB(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const KB=t=>t==="left"?"right":t==="right"?"left":t,bb=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,xb=(t,e)=>Math.min(e||t,t);function Eb(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function qB(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function GB(t,e){De(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function za(t){return t.drawTicks?t.tickLength:0}function Tb(t,e){if(!t.display)return 0;const n=nn(t.font,e),i=ei(t.padding);return(At(t.text)?t.text.length:1)*n.lineHeight+i.height}function QB(t,e){return Qr(t,{scale:e,type:"scale"})}function YB(t,e,n){return Qr(t,{tick:n,index:e,type:"tick"})}function XB(t,e,n){let i=xk(t);return(n&&e!=="right"||!n&&e==="right")&&(i=KB(i)),i}function JB(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let f=0,p,m,v;const w=o-s,x=a-r;if(t.isHorizontal()){if(m=dn(i,r,a),Re(n)){const b=Object.keys(n)[0],E=n[b];v=h[b].getPixelForValue(E)+w-e}else n==="center"?v=(c.bottom+c.top)/2+w-e:v=bb(t,n,e);p=a-r}else{if(Re(n)){const b=Object.keys(n)[0],E=n[b];m=h[b].getPixelForValue(E)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=bb(t,n,e);v=dn(i,o,s),f=n==="left"?-$n:$n}return{titleX:m,titleY:v,maxWidth:p,rotation:f}}class pa extends Ws{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=ri(e,Number.POSITIVE_INFINITY),n=ri(n,Number.NEGATIVE_INFINITY),i=ri(i,Number.POSITIVE_INFINITY),s=ri(s,Number.NEGATIVE_INFINITY),{min:ri(e,i),max:ri(n,s),minDefined:Dn(e),maxDefined:Dn(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:ri(n,ri(i,n)),max:ri(i,ri(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qe(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=g4(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Eb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=BB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qe(this.options.afterUpdate,[this])}beforeSetDimensions(){qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=qe(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=xb(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),f=h.widest.width,p=h.highest.height,m=kn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),f+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-za(e.grid)-n.padding-Tb(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=LV(Math.min(Math.asin(kn((h.highest.height+6)/a,-1,1)),Math.asin(kn(l/c,-1,1))-Math.asin(kn(p/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Tb(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=za(r)+l):(e.height=this.maxHeight,e.width=za(r)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:f,highest:p}=this._getLabelSizes(),m=i.padding*2,v=xr(this.labelRotation),w=Math.cos(v),x=Math.sin(v);if(a){const b=i.mirror?0:x*f.width+w*p.height;e.height=Math.min(this.maxHeight,e.height+b+m)}else{const b=i.mirror?0:w*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+b+m)}this._calculatePadding(c,h,x,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=s*e.width,m=i*n.height):(p=i*e.height,m=s*n.width):r==="start"?m=n.width:r==="end"?p=e.width:r!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let h=n.height/2,f=e.height/2;r==="start"?(h=0,f=e.height):r==="end"&&(h=n.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Ue(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Eb(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/xb(n,i));let c=0,h=0,f,p,m,v,w,x,b,E,k,D,N;for(f=0;f<n;f+=l){if(v=e[f].label,w=this._resolveTickFontOptions(f),s.font=x=w.string,b=r[x]=r[x]||{data:{},gc:[]},E=w.lineHeight,k=D=0,!Ue(v)&&!At(v))k=eb(s,b.data,b.gc,k,v),D=E;else if(At(v))for(p=0,m=v.length;p<m;++p)N=v[p],!Ue(N)&&!At(N)&&(k=eb(s,b.data,b.gc,k,N),D+=E);o.push(k),a.push(D),c=Math.max(k,c),h=Math.max(D,h)}GB(r,n);const j=o.indexOf(c),T=a.indexOf(h),_=I=>({width:o[I]||0,height:a[I]||0});return{first:_(0),last:_(n-1),widest:_(j),highest:_(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return BV(this._alignToPixels?ar(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=YB(this.getContext(),e,i))}return this.$context||(this.$context=QB(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=xr(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=za(r),m=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,x=w/2,b=function(J){return ar(i,J,w)};let E,k,D,N,j,T,_,I,P,R,A,S;if(o==="top")E=b(this.bottom),T=this.bottom-p,I=E-x,R=b(e.top)+x,S=e.bottom;else if(o==="bottom")E=b(this.top),R=e.top,S=b(e.bottom)-x,T=E+x,I=this.top+p;else if(o==="left")E=b(this.right),j=this.right-p,_=E-x,P=b(e.left)+x,A=e.right;else if(o==="right")E=b(this.left),P=e.left,A=b(e.right)-x,j=E+x,_=this.left+p;else if(n==="x"){if(o==="center")E=b((e.top+e.bottom)/2+.5);else if(Re(o)){const J=Object.keys(o)[0],L=o[J];E=b(this.chart.scales[J].getPixelForValue(L))}R=e.top,S=e.bottom,T=E+x,I=T+p}else if(n==="y"){if(o==="center")E=b((e.left+e.right)/2);else if(Re(o)){const J=Object.keys(o)[0],L=o[J];E=b(this.chart.scales[J].getPixelForValue(L))}j=E-x,_=j-p,P=e.left,A=e.right}const U=Ie(s.ticks.maxTicksLimit,f),H=Math.max(1,Math.ceil(f/U));for(k=0;k<f;k+=H){const J=this.getContext(k),L=r.setContext(J),V=a.setContext(J),Q=L.lineWidth,te=L.color,z=V.dash||[],W=V.dashOffset,q=L.tickWidth,se=L.tickColor,ue=L.tickBorderDash||[],Y=L.tickBorderDashOffset;D=qB(this,k,l),D!==void 0&&(N=ar(i,D,Q),c?j=_=P=A=N:T=I=R=S=N,m.push({tx1:j,ty1:T,tx2:_,ty2:I,x1:P,y1:R,x2:A,y2:S,width:Q,color:te,borderDash:z,borderDashOffset:W,tickWidth:q,tickColor:se,tickBorderDash:ue,tickBorderDashOffset:Y}))}return this._ticksLength=f,this._borderValue=E,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:f}=r,p=za(i.grid),m=p+h,v=f?-h:m,w=-xr(this.labelRotation),x=[];let b,E,k,D,N,j,T,_,I,P,R,A,S="middle";if(s==="top")j=this.bottom-v,T=this._getXAxisLabelAlignment();else if(s==="bottom")j=this.top+v,T=this._getXAxisLabelAlignment();else if(s==="left"){const H=this._getYAxisLabelAlignment(p);T=H.textAlign,N=H.x}else if(s==="right"){const H=this._getYAxisLabelAlignment(p);T=H.textAlign,N=H.x}else if(n==="x"){if(s==="center")j=(e.top+e.bottom)/2+m;else if(Re(s)){const H=Object.keys(s)[0],J=s[H];j=this.chart.scales[H].getPixelForValue(J)+m}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")N=(e.left+e.right)/2-m;else if(Re(s)){const H=Object.keys(s)[0],J=s[H];N=this.chart.scales[H].getPixelForValue(J)}T=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const U=this._getLabelSizes();for(b=0,E=a.length;b<E;++b){k=a[b],D=k.label;const H=r.setContext(this.getContext(b));_=this.getPixelForTick(b)+r.labelOffset,I=this._resolveTickFontOptions(b),P=I.lineHeight,R=At(D)?D.length:1;const J=R/2,L=H.color,V=H.textStrokeColor,Q=H.textStrokeWidth;let te=T;o?(N=_,T==="inner"&&(b===E-1?te=this.options.reverse?"left":"right":b===0?te=this.options.reverse?"right":"left":te="center"),s==="top"?c==="near"||w!==0?A=-R*P+P/2:c==="center"?A=-U.highest.height/2-J*P+P:A=-U.highest.height+P/2:c==="near"||w!==0?A=P/2:c==="center"?A=U.highest.height/2-J*P:A=U.highest.height-R*P,f&&(A*=-1),w!==0&&!H.showLabelBackdrop&&(N+=P/2*Math.sin(w))):(j=_,A=(1-R)*P/2);let z;if(H.showLabelBackdrop){const W=ei(H.backdropPadding),q=U.heights[b],se=U.widths[b];let ue=A-W.top,Y=0-W.left;switch(S){case"middle":ue-=q/2;break;case"bottom":ue-=q;break}switch(T){case"center":Y-=se/2;break;case"right":Y-=se;break;case"inner":b===E-1?Y-=se:b>0&&(Y-=se/2);break}z={left:Y,top:ue,width:se+W.width,height:q+W.height,color:H.backdropColor}}x.push({label:D,font:I,textOffset:A,options:{rotation:w,color:L,strokeColor:V,strokeWidth:Q,textAlign:te,textBaseline:S,translation:[N,j],backdrop:z}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-xr(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,h;return n==="left"?s?(h=this.right+r,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?s?(h=this.left+r,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,f,p;this.isHorizontal()?(c=ar(e,this.left,o)-o/2,h=ar(e,this.right,a)+a/2,f=p=l):(f=ar(e,this.top,o)-o/2,p=ar(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,f),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&nv(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;rd(i,c,0,h,l,a)}s&&iv(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=nn(i.font),o=ei(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Re(n)?(l+=o.bottom,At(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:f,rotation:p}=JB(this,l,n,a);rd(e,i.text,0,0,r,{color:i.color,maxWidth:f,rotation:p,textAlign:XB(a,n,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Ie(e.grid&&e.grid.z,-1),s=Ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==pa.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return nn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Au{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;tU(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,ZB(e,o,i),this.override&&at.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in at[s]&&(delete at[s][i],this.override&&delete Ur[i])}}function ZB(t,e,n){const i=ac(Object.create(null),[n?at.get(n):{},at.get(e),t.defaults]);at.set(e,i),t.defaultRoutes&&eU(e,t.defaultRoutes),t.descriptors&&at.describe(e,t.descriptors)}function eU(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");at.route(r,s,l,a)})}function tU(t){return"id"in t&&"defaults"in t}class nU{constructor(){this.controllers=new Au(kl,"datasets",!0),this.elements=new Au(Ws,"elements"),this.plugins=new Au(Object,"plugins"),this.scales=new Au(pa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):De(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=Zy(e);qe(i["before"+s],[],i),n[e](i),qe(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var li=new nU;class iU{constructor(){this._init=void 0}notify(e,n,i,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(qe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Ue(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=Ie(i.options&&i.options.plugins,{}),r=sU(i);return s===!1&&!n?[]:oU(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function sU(t){const e={},n=[],i=Object.keys(li.plugins.items);for(let r=0;r<i.length;r++)n.push(li.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function rU(t,e){return!e&&t===!1?null:t===!0?{}:t}function oU(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=rU(i[l],s);c!==null&&r.push({plugin:a,options:aU(t.config,{plugin:a,local:n[l]},c,o)})}return r}function aU(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Bg(t,e){const n=at.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function lU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function cU(t,e){return t===e?"_index_":"_value_"}function Sb(t){if(t==="x"||t==="y"||t==="r")return t}function uU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ug(t,...e){if(Sb(t))return t;for(const n of e){const i=n.axis||uU(n.position)||t.length>1&&Sb(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Ib(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function hU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Ib(t,"x",n[0])||Ib(t,"y",n[0])}return{}}function dU(t,e){const n=Ur[t.type]||{scales:{}},i=e.scales||{},s=Bg(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Re(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ug(o,a,hU(o,t),at.scales[a.type]),c=cU(l,s),h=n.scales||{};r[o]=xl(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Bg(a,e),h=(Ur[a]||{}).scales||{};Object.keys(h).forEach(f=>{const p=lU(f,l),m=o[p+"AxisID"]||p;r[m]=r[m]||Object.create(null),xl(r[m],[{axis:p},i[m],h[f]])})}),Object.keys(r).forEach(o=>{const a=r[o];xl(a,[at.scales[a.type],at.scale])}),r}function Wk(t){const e=t.options||(t.options={});e.plugins=Ie(e.plugins,{}),e.scales=dU(t,e)}function zk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function fU(t){return t=t||{},t.data=zk(t.data),Wk(t),t}const kb=new Map,$k=new Set;function Pu(t,e){let n=kb.get(t);return n||(n=e(),kb.set(t,n),$k.add(n)),n}const $a=(t,e,n)=>{const i=nd(e,n);i!==void 0&&t.add(i)};class pU{constructor(e){this._config=fU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=zk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Wk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Pu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Pu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Pu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Pu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(f=>$a(l,e,f))),h.forEach(f=>$a(l,s,f)),h.forEach(f=>$a(l,Ur[r]||{},f)),h.forEach(f=>$a(l,at,f)),h.forEach(f=>$a(l,Lg,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),$k.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ur[n]||{},at.datasets[n]||{},{type:n},at,Lg]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Cb(this._resolverCache,e,s);let l=o;if(mU(o,n)){r.$shared=!1,i=Us(i)?i():i;const c=this.createResolver(e,i,a);l=ea(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=Cb(this._resolverCache,e,i);return Re(n)?ea(r,n,void 0,s):r}}function Cb(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:sv(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const gU=t=>Re(t)&&Object.getOwnPropertyNames(t).some(e=>Us(t[e]));function mU(t,e){const{isScriptable:n,isIndexable:i}=kk(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Us(a)||gU(a))||o&&At(a))return!0}return!1}var yU="4.5.1";const vU=["top","bottom","left","right","chartArea"];function Ab(t,e){return t==="top"||t==="bottom"||vU.indexOf(t)===-1&&e==="x"}function Pb(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Nb(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),qe(n&&n.onComplete,[t],e)}function _U(t){const e=t.chart,n=e.options.animation;qe(n&&n.onProgress,[t],e)}function Hk(t){return av()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const rh={},Rb=t=>{const e=Hk(t);return Object.values(rh).filter(n=>n.canvas===e).pop()};function wU(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function bU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var is;let Jd=(is=class{static register(...e){li.add(...e),Db()}static unregister(...e){li.remove(...e),Db()}constructor(e,n){const i=this.config=new pU(n),s=Hk(e),r=Rb(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||VB(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=TV(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=HV(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],rh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Si.listen(this,"complete",Nb),Si.listen(this,"progress",_U),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return Ue(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return li}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tb(this.canvas,this.ctx),this}stop(){return Si.stop(this),this}resize(e,n){Si.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,sb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),qe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};De(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Ug(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),De(r,o=>{const a=o.options,l=a.id,c=Ug(l,a),h=Ie(a.type,o.dtype);(a.position===void 0||Ab(a.position,c)!==Ab(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in i&&i[l].type===h)f=i[l];else{const p=li.getScale(h);f=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(a,e)}),De(s,(o,a)=>{o||delete i[a]}),De(i,o=>{ws.configure(this,o,o.options),ws.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Pb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Bg(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=li.getController(a),{datasetElementType:c,dataElementType:h}=at.datasets[a];Object.assign(l,{dataElementType:li.getElement(h),datasetElementType:c&&li.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){De(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:f}=this.getDatasetMeta(c),p=!s&&r.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||De(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Pb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){De(this.scales,e=>{ws.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Hw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;wU(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!Hw(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ws.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],De(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Us(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Si.has(this)?this.attached&&!Si.running(this)&&Si.start(this):(this.draw(),Nb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=J4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&nv(n,s),e.controller.draw(),s&&iv(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return cc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=vB.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);id(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Si.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),tb(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete rh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};De(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){De(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},De(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!ed(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=PV(e),c=bU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,qe(r.onHover,[e,a,this],this),l&&qe(r.onClick,[e,a,this],this));const h=!ed(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}},we(is,"defaults",at),we(is,"instances",rh),we(is,"overrides",Ur),we(is,"registry",li),we(is,"version",yU),we(is,"getChart",Rb),is);function Db(){return De(Jd.instances,t=>t._plugins.invalidate())}function Kk(t,e,n=e){t.lineCap=Ie(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ie(n.borderDash,e.borderDash)),t.lineDashOffset=Ie(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ie(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ie(n.borderWidth,e.borderWidth),t.strokeStyle=Ie(n.borderColor,e.borderColor)}function xU(t,e,n){t.lineTo(n.x,n.y)}function EU(t){return t.stepped?r4:t.tension||t.cubicInterpolationMode==="monotone"?o4:xU}function qk(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),h=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function TU(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=qk(s,n,i),h=EU(r);let{move:f=!0,reverse:p}=i||{},m,v,w;for(m=0;m<=c;++m)v=s[(a+(p?c-m:m))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):h(t,w,v,p,r.stepped),w=v);return l&&(v=s[(a+(p?c:0))%o],h(t,w,v,p,r.stepped)),!!l}function SU(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=qk(s,n,i),{move:l=!0,reverse:c}=i||{};let h=0,f=0,p,m,v,w,x,b;const E=D=>(o+(c?a-D:D))%r,k=()=>{w!==x&&(t.lineTo(h,x),t.lineTo(h,w),t.lineTo(h,b))};for(l&&(m=s[E(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=s[E(p)],m.skip)continue;const D=m.x,N=m.y,j=D|0;j===v?(N<w?w=N:N>x&&(x=N),h=(f*h+D)/++f):(k(),t.lineTo(D,N),v=j,f=0,w=x=N),b=N}k()}function Wg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?SU:TU}function IU(t){return t.stepped?V4:t.tension||t.cubicInterpolationMode==="monotone"?B4:gr}function kU(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),Kk(t,e.options),t.stroke(s)}function CU(t,e,n,i){const{segments:s,options:r}=e,o=Wg(e);for(const a of s)Kk(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const AU=typeof Path2D=="function";function PU(t,e,n,i){AU&&!e.options.segment?kU(t,e,n,i):CU(t,e,n,i)}class sl extends Ws{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;N4(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=G4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=H4(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=IU(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:f,end:p}=o[c],m=r[f],v=r[p];if(m===v){a.push(m);continue}const w=Math.abs((s-m[n])/(v[n]-m[n])),x=l(m,v,w,i.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Wg(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=Wg(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),PU(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}we(sl,"id","line"),we(sl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),we(sl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),we(sl,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Mb(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class oh extends Ws{constructor(n){super();we(this,"parsed");we(this,"skip");we(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return Mb(this,n,"x",i)}inYRange(n,i){return Mb(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!cc(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Fg(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}we(oh,"id","point"),we(oh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),we(oh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const jb=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},NU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ob extends Ws{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=qe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=nn(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=jb(i,r);let c,h;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let f=e;r.textAlign="left",r.textBaseline="middle";let p=-1,m=-h;return this.legendItems.forEach((v,w)=>{const x=i+n/2+r.measureText(v.text).width;(w===0||c[c.length-1]+x+2*a>o)&&(f+=h,c[c.length-(w>0?0:1)]=0,m+=h,p++),l[w]={left:0,top:m,row:p,width:x,height:s},c[c.length-1]+=x+a}),f}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let f=a,p=0,m=0,v=0,w=0;return this.legendItems.forEach((x,b)=>{const{itemWidth:E,itemHeight:k}=RU(i,n,r,x,s);b>0&&m+k+2*a>h&&(f+=p+a,c.push({width:p,height:m}),v+=p+a,w++,p=m=0),l[b]={left:v,top:m,col:w,width:E,height:k},p=Math.max(p,E),m+=k+a}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Oo(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=dn(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=dn(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=dn(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=dn(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;nv(e,this),this._draw(),iv(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=at.color,l=Oo(e.rtl,this.left,this.width),c=nn(o.font),{padding:h}=o,f=c.size,p=f/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:v,boxHeight:w,itemHeight:x}=jb(o,f),b=function(j,T,_){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;s.save();const I=Ie(_.lineWidth,1);if(s.fillStyle=Ie(_.fillStyle,a),s.lineCap=Ie(_.lineCap,"butt"),s.lineDashOffset=Ie(_.lineDashOffset,0),s.lineJoin=Ie(_.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=Ie(_.strokeStyle,a),s.setLineDash(Ie(_.lineDash,[])),o.usePointStyle){const P={radius:w*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:I},R=l.xPlus(j,v/2),A=T+p;Sk(s,P,R,A,o.pointStyleWidth&&v)}else{const P=T+Math.max((f-w)/2,0),R=l.leftForLtr(j,v),A=Il(_.borderRadius);s.beginPath(),Object.values(A).some(S=>S!==0)?Vg(s,{x:R,y:P,w:v,h:w,radius:A}):s.rect(R,P,v,w),s.fill(),I!==0&&s.stroke()}s.restore()},E=function(j,T,_){rd(s,_.text,j,T+x/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},k=this.isHorizontal(),D=this._computeTitleHeight();k?m={x:dn(r,this.left+h,this.right-i[0]),y:this.top+h+D,line:0}:m={x:this.left+h,y:dn(r,this.top+D+h,this.bottom-n[0].height),line:0},Rk(this.ctx,e.textDirection);const N=x+h;this.legendItems.forEach((j,T)=>{s.strokeStyle=j.fontColor,s.fillStyle=j.fontColor;const _=s.measureText(j.text).width,I=l.textAlign(j.textAlign||(j.textAlign=o.textAlign)),P=v+p+_;let R=m.x,A=m.y;l.setWidth(this.width),k?T>0&&R+P+h>this.right&&(A=m.y+=N,m.line++,R=m.x=dn(r,this.left+h,this.right-i[m.line])):T>0&&A+N>this.bottom&&(R=m.x=R+n[m.line].width+h,m.line++,A=m.y=dn(r,this.top+D+h,this.bottom-n[m.line].height));const S=l.x(R);if(b(S,A,j),R=KV(I,R+v+p,k?R+P:this.right,e.rtl),E(l.x(R),A,j),k)m.x+=P+h;else if(typeof j.text!="string"){const U=c.lineHeight;m.y+=Gk(j,U)+h}else m.y+=N}),Dk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=nn(n.font),s=ei(n.padding);if(!n.display)return;const r=Oo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let h,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+c,f=dn(e.align,f,this.right-p);else{const v=this.columnSizes.reduce((w,x)=>Math.max(w,x.height),0);h=c+dn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=dn(a,f,f+p);o.textAlign=r.textAlign(xk(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,rd(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=nn(e.font),i=ei(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(nl(e,this.left,this.right)&&nl(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],nl(e,s.left,s.left+s.width)&&nl(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!jU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=NU(s,i);s&&!r&&qe(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&qe(n.onHover,[e,i,this],this)}else i&&qe(n.onClick,[e,i,this],this)}}function RU(t,e,n,i,s){const r=DU(i,t,e,n),o=MU(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function DU(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function MU(t,e,n){let i=t;return typeof e.text!="string"&&(i=Gk(e,n)),i}function Gk(t,e){const n=t.text?t.text.length:0;return e*n}function jU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var OU={id:"legend",_element:Ob,start(t,e,n){const i=t.legend=new Ob({ctx:t.ctx,options:n,chart:t});ws.configure(t,i,n),ws.addBox(t,i)},stop(t){ws.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;ws.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=ei(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const rl={average(t){if(!t.length)return!1;let e,n,i=new Set,s=0,r=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Og(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function oi(t,e){return e&&(At(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ii(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function LU(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Lb(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=nn(e.bodyFont),c=nn(e.titleFont),h=nn(e.footerFont),f=r.length,p=s.length,m=i.length,v=ei(e.padding);let w=v.height,x=0,b=i.reduce((D,N)=>D+N.before.length+N.lines.length+N.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,f&&(w+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),b){const D=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=m*D+(b-m)*l.lineHeight+(b-1)*e.bodySpacing}p&&(w+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let E=0;const k=function(D){x=Math.max(x,n.measureText(D).width+E)};return n.save(),n.font=c.string,De(t.title,k),n.font=l.string,De(t.beforeBody.concat(t.afterBody),k),E=e.displayColors?o+2+e.boxPadding:0,De(i,D=>{De(D.before,k),De(D.lines,k),De(D.after,k)}),E=0,n.font=h.string,De(t.footer,k),n.restore(),x+=v.width,{width:x,height:w}}function FU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function VU(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function BU(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),VU(c,t,e,n)&&(c="center"),c}function Fb(t,e,n){const i=n.yAlign||e.yAlign||FU(t,n);return{xAlign:n.xAlign||e.xAlign||BU(t,e,n,i),yAlign:i}}function UU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function WU(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function Vb(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=Il(o);let v=UU(e,a);const w=WU(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,p)+s:a==="right"&&(v+=Math.max(f,m)+s),{x:kn(v,0,i.width-e.width),y:kn(w,0,i.height-e.height)}}function Nu(t,e,n){const i=ei(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Bb(t){return oi([],Ii(t))}function zU(t,e,n){return Qr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Ub(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Qk={beforeTitle:Ti,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Ti,beforeBody:Ti,beforeLabel:Ti,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ue(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ti,afterBody:Ti,beforeFooter:Ti,footer:Ti,afterFooter:Ti};function Jt(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?Qk[e].call(n,i):s}class zg extends Ws{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new jk(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=zU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=Jt(i,"beforeTitle",this,e),r=Jt(i,"title",this,e),o=Jt(i,"afterTitle",this,e);let a=[];return a=oi(a,Ii(s)),a=oi(a,Ii(r)),a=oi(a,Ii(o)),a}getBeforeBody(e,n){return Bb(Jt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return De(e,r=>{const o={before:[],lines:[],after:[]},a=Ub(i,r);oi(o.before,Ii(Jt(a,"beforeLabel",this,r))),oi(o.lines,Jt(a,"label",this,r)),oi(o.after,Ii(Jt(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return Bb(Jt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=Jt(i,"beforeFooter",this,e),r=Jt(i,"footer",this,e),o=Jt(i,"afterFooter",this,e);let a=[];return a=oi(a,Ii(s)),a=oi(a,Ii(r)),a=oi(a,Ii(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(LU(this.chart,n[l]));return e.filter&&(a=a.filter((h,f,p)=>e.filter(h,f,p,i))),e.itemSort&&(a=a.sort((h,f)=>e.itemSort(h,f,i))),De(a,h=>{const f=Ub(e.callbacks,h);s.push(Jt(f,"labelColor",this,h)),r.push(Jt(f,"labelPointStyle",this,h)),o.push(Jt(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=rl[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Lb(this,i),c=Object.assign({},a,l),h=Fb(this.chart,i,c),f=Vb(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:f}=Il(a),{x:p,y:m}=e,{width:v,height:w}=n;let x,b,E,k,D,N;return r==="center"?(D=m+w/2,s==="left"?(x=p,b=x-o,k=D+o,N=D-o):(x=p+v,b=x+o,k=D-o,N=D+o),E=x):(s==="left"?b=p+Math.max(l,h)+o:s==="right"?b=p+v-Math.max(c,f)-o:b=this.caretX,r==="top"?(k=m,D=k-o,x=b-o,E=b+o):(k=m+w,D=k+o,x=b+o,E=b-o),N=k),{x1:x,x2:b,x3:E,y1:k,y2:D,y3:N}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Oo(i.rtl,this.x,this.width);for(e.x=Nu(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=nn(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,h=nn(r.bodyFont),f=Nu(this,"left",r),p=s.x(f),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(r.usePointStyle){const w={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=s.leftForLtr(p,c)+c/2,b=v+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Fg(e,w,x,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Fg(e,w,x,b)}else{e.lineWidth=Re(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=s.leftForLtr(p,c),x=s.leftForLtr(s.xPlus(p,1),c-2),b=Il(o.borderRadius);Object.values(b).some(E=>E!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Vg(e,{x:w,y:v,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Vg(e,{x,y:v+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(w,v,c,l),e.strokeRect(w,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,f=nn(i.bodyFont);let p=f.lineHeight,m=0;const v=Oo(i.rtl,this.x,this.width),w=function(_){n.fillText(_,v.x(e.x+m),e.y+p/2),e.y+=p+r},x=v.textAlign(o);let b,E,k,D,N,j,T;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Nu(this,x,i),n.fillStyle=i.bodyColor,De(this.beforeBody,w),m=a&&x!=="right"?o==="center"?c/2+h:c+2+h:0,D=0,j=s.length;D<j;++D){for(b=s[D],E=this.labelTextColors[D],n.fillStyle=E,De(b.before,w),k=b.lines,a&&k.length&&(this._drawColorBox(n,e,D,v,i),p=Math.max(f.lineHeight,l)),N=0,T=k.length;N<T;++N)w(k[N]),p=f.lineHeight;De(b.after,w)}m=0,p=f.lineHeight,De(this.afterBody,w),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Oo(i.rtl,this.x,this.width);for(e.x=Nu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=nn(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:v}=Il(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+h-v),n.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=rl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Lb(this,e),l=Object.assign({},o,this._size),c=Fb(n,e,l),h=Vb(e,l,c,n);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ei(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),Rk(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),Dk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!ed(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!ed(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=rl[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}we(zg,"positioners",rl);var $U={id:"tooltip",_element:zg,positioners:rl,afterInit(t,e,n){n&&(t.tooltip=new zg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Qk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const HU=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function KU(t,e,n,i){const s=t.indexOf(e);if(s===-1)return HU(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const qU=(t,e)=>t===null?null:kn(Math.round(t),0,e);function Wb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class $g extends pa{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ue(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:KU(i,e,Ie(n,e),this._addedLabels),qU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Wb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}we($g,"id","category"),we($g,"defaults",{ticks:{callback:Wb}});function GU(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:f,includeBounds:p}=t,m=r||1,v=h-1,{min:w,max:x}=e,b=!Ue(o),E=!Ue(a),k=!Ue(c),D=(x-w)/(f+1);let N=qw((x-w)/v/m)*m,j,T,_,I;if(N<1e-14&&!b&&!E)return[{value:w},{value:x}];I=Math.ceil(x/N)-Math.floor(w/N),I>v&&(N=qw(I*N/v/m)*m),Ue(l)||(j=Math.pow(10,l),N=Math.ceil(N*j)/j),s==="ticks"?(T=Math.floor(w/N)*N,_=Math.ceil(x/N)*N):(T=w,_=x),b&&E&&r&&jV((a-o)/r,N/1e3)?(I=Math.round(Math.min((a-o)/N,h)),N=(a-o)/I,T=o,_=a):k?(T=b?o:T,_=E?a:_,I=c-1,N=(_-T)/I):(I=(_-T)/N,El(I,Math.round(I),N/1e3)?I=Math.round(I):I=Math.ceil(I));const P=Math.max(Gw(N),Gw(T));j=Math.pow(10,Ue(l)?P:l),T=Math.round(T*j)/j,_=Math.round(_*j)/j;let R=0;for(b&&(p&&T!==o?(n.push({value:o}),T<o&&R++,El(Math.round((T+R*N)*j)/j,o,zb(o,D,t))&&R++):T<o&&R++);R<I;++R){const A=Math.round((T+R*N)*j)/j;if(E&&A>a)break;n.push({value:A})}return E&&p&&_!==a?n.length&&El(n[n.length-1].value,a,zb(a,D,t))?n[n.length-1].value=a:n.push({value:a}):(!E||_===a)&&n.push({value:_}),n}function zb(t,e,{horizontal:n,minRotation:i}){const s=xr(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class QU extends pa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ue(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=Zo(s),c=Zo(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=GU(s,r);return e.bounds==="ticks"&&OV(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Ek(e,this.chart.options.locale,this.options.ticks.format)}}class Hg extends QU{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Dn(e)?e:0,this.max=Dn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=xr(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}we(Hg,"id","linear"),we(Hg,"defaults",{ticks:{callback:Tk.formatters.numeric}});const Zd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},en=Object.keys(Zd);function $b(t,e){return t-e}function Hb(t,e){if(Ue(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Dn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(lc(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function Kb(t,e,n,i){const s=en.length;for(let r=en.indexOf(t);r<s-1;++r){const o=Zd[en[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return en[r]}return en[s-1]}function YU(t,e,n,i,s){for(let r=en.length-1;r>=en.indexOf(n);r--){const o=en[r];if(Zd[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return en[n?en.indexOf(n):0]}function XU(t){for(let e=en.indexOf(t)+1,n=en.length;e<n;++e)if(Zd[en[e]].common)return en[e]}function qb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=ev(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function JU(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Gb(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:JU(t,i,s,n)}class ld extends pa{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new fB._date(e.adapters.date);s.init(n),xl(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Hb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Dn(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Dn(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=WV(s,r,o);return this._unit=n.unit||(i.autoSkip?Kb(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):YU(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:XU(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Gb(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=kn(n,0,o),i=kn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Kb(r.minUnit,n,i,this._getLabelCapacity(n)),a=Ie(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=lc(l)||l===!0,h={};let f=n,p,m;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<i;p=+e.add(p,a,o),m++)qb(h,p,v);return(p===i||s.bounds==="ticks"||m===1)&&qb(h,p,v),Object.keys(h).sort($b).map(w=>+w)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return qe(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],f=c&&a[c],p=i[n],m=c&&f&&p&&p.major;return this._adapter.format(e,s||(m?f:h))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=xr(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Gb(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(Hb(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $V(e.sort($b))}}we(ld,"id","time"),we(ld,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ru(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=Er(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=Er(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Qb extends ld{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ru(n,this.min),this._tableRange=Ru(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Ru(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Ru(this._table,i*this._tableRange+this._minPos,!0)}}we(Qb,"id","timeseries"),we(Qb,"defaults",ld.defaults);Jd.register(sl,oh,Hg,$g,$U,OU);const Yk="label";function Yb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function ZU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Xk(t,e){t.labels=e}function Jk(t,e,n=Yk){const i=[];t.datasets=e.map(s=>{const r=t.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function e5(t,e=Yk){const n={labels:[],datasets:[]};return Xk(n,t.labels),Jk(n,t.datasets,e),n}function t5(t,e){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:f,...p}=t,m=M.useRef(null),v=M.useRef(null),w=()=>{m.current&&(v.current=new Jd(m.current,{type:o,data:e5(a,r),options:l&&{...l},plugins:c}),Yb(e,v.current))},x=()=>{Yb(e,null),v.current&&(v.current.destroy(),v.current=null)};return M.useEffect(()=>{!s&&v.current&&l&&ZU(v.current,l)},[s,l]),M.useEffect(()=>{!s&&v.current&&Xk(v.current.config.data,a.labels)},[s,a.labels]),M.useEffect(()=>{!s&&v.current&&a.datasets&&Jk(v.current.config.data,a.datasets,r)},[s,a.datasets]),M.useEffect(()=>{v.current&&(s?(x(),setTimeout(w)):v.current.update(f))},[s,l,a.labels,a.datasets,f]),M.useEffect(()=>{v.current&&(x(),setTimeout(w))},[o]),M.useEffect(()=>(w(),()=>x()),[]),d.jsx("canvas",{ref:m,role:"img",height:n,width:i,...p,children:h})}const n5=M.forwardRef(t5);function i5(t,e){return Jd.register(e),M.forwardRef((n,i)=>d.jsx(n5,{...n,ref:i,type:t}))}const s5=i5("line",ih);function Xb(t){if(!t||typeof t!="string")return"";const e=t.split("-");return e.length!==3?t:`${e[2]}/${e[1]}`}const Jb="brt_trendExplorer_v1",Du=["rgba(125,211,252,0.95)","rgba(167,243,208,0.95)","rgba(251,191,36,0.95)","rgba(196,181,253,0.95)","rgba(252,165,165,0.95)","rgba(253,186,116,0.95)","rgba(147,197,253,0.95)"];function Ha(){return{preset:"overlay_default",range:"all",cycleId:"",customStart:"",customEnd:"",series:[{metricId:"weight_wma",axis:"left"},{metricId:"avgStrength_wma",axis:"left"},{metricId:"calories_raw",axis:"right"}]}}function ro(t){return(Array.isArray(t)?t:[]).filter(Boolean).slice(0,6)}function r5({derived:t,weekly:e,liftNames:n,cycles:i=[],currentCycle:s=null}){const r=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],[o,a]=M.useState(()=>{try{const A=localStorage.getItem(Jb);if(!A)return Ha();const S=JSON.parse(A),U={...Ha(),...S,series:ro((S==null?void 0:S.series)||Ha().series)},H=String(U.range||"all");return H==="30"?U.range="month":H==="60"||H==="90"?U.range="all":["all","14","month","cycle","custom"].includes(H)||(U.range="all"),U}catch{return Ha()}});M.useEffect(()=>{try{localStorage.setItem(Jb,JSON.stringify(o))}catch{}},[o]);function l(A){if(!A||typeof A!="string")return"";const S=A.split("-");if(S.length!==3)return A;const[U,H,J]=S;return`${J}/${H}/${U}`}function c(A){const S=String(A||"").trim().toLowerCase();return S?S.charAt(0).toUpperCase()+S.slice(1):"Cycle"}const h=M.useMemo(()=>[...(Array.isArray(i)?i:[]).filter(Boolean)].sort((S,U)=>String((U==null?void 0:U.startDateIso)||"").localeCompare(String((S==null?void 0:S.startDateIso)||""))),[i]),f=[{id:"all",label:"All data"},{id:"14",label:"Last 2 weeks"},{id:"month",label:"Last month"},{id:"cycle",label:"Select cycle"},{id:"custom",label:"Select custom interval"}],p=M.useMemo(()=>{if(String(o.range||"all")!=="cycle")return null;if(o.cycleId){const A=h.find(S=>(S==null?void 0:S.id)===o.cycleId);if(A)return A}return s||h[0]||null},[o.range,o.cycleId,s,h]);M.useEffect(()=>{String(o.range||"all")==="cycle"&&p&&o.cycleId!==p.id&&a(A=>({...A,cycleId:p.id}))},[o.range,o.cycleId,p]);const m=M.useMemo(()=>{var S;if(!Array.isArray(t)||!t.length)return[];const A=String(o.range||"all");if(A==="14")return t.slice(Math.max(0,t.length-14));if(A==="month")return t.slice(Math.max(0,t.length-30));if(A==="cycle"){const U=p;if(!(U!=null&&U.startDateIso))return t;const H=U.startDateIso,J=U.endDateIso||((S=t[t.length-1])==null?void 0:S.dateIso);return J?t.filter(L=>(L==null?void 0:L.dateIso)>=H&&(L==null?void 0:L.dateIso)<=J):t}if(A==="custom"){const U=o.customStart,H=o.customEnd;if(!U||!H)return t;const J=U<=H?U:H,L=U<=H?H:U;return t.filter(V=>(V==null?void 0:V.dateIso)>=J&&(V==null?void 0:V.dateIso)<=L)}return t},[t,o.range,o.customStart,o.customEnd,p]),v=M.useMemo(()=>{if(!Array.isArray(t)||!t.length||!m.length)return 0;const A=t.indexOf(m[0]);return A>=0?A:0},[t,m]),w=M.useMemo(()=>{const A=r[0],S=r[1],U=r[2],H=[{id:"weight_raw",label:"Weight (raw)",unit:"kg",defaultAxis:"left",get:L=>L==null?void 0:L.weight,style:{borderWidth:1,pointRadius:0,tension:.15,borderDash:[4,4],opacity:.55}},{id:"weight_wma",label:"Weight (smoothed)",unit:"kg",defaultAxis:"left",get:L=>{var V;return(V=L==null?void 0:L.wma)==null?void 0:V.weight},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"calories_raw",label:"Calories (raw)",unit:"kcal",defaultAxis:"right",get:L=>L==null?void 0:L.calories,style:{borderWidth:2,pointRadius:0,tension:.15,opacity:1}},{id:"protein",label:"Protein",unit:"g",defaultAxis:"right",get:L=>L==null?void 0:L.protein,style:{borderWidth:2,pointRadius:0,tension:.15,opacity:.95}},{id:"carbs",label:"Carbs",unit:"g",defaultAxis:"right",get:L=>L==null?void 0:L.carbs,style:{borderWidth:2,pointRadius:0,tension:.15,opacity:.95}},{id:"fats",label:"Fats",unit:"g",defaultAxis:"right",get:L=>L==null?void 0:L.fats,style:{borderWidth:2,pointRadius:0,tension:.15,opacity:.95}},{id:"avgStrength_raw",label:"Average strength (raw, ffilled)",unit:"kg",defaultAxis:"left",get:L=>L==null?void 0:L.avgStrength,style:{borderWidth:1,pointRadius:0,tension:.2,borderDash:[4,4],opacity:.65}},{id:"avgStrength_wma",label:"Average strength (smoothed)",unit:"kg",defaultAxis:"left",get:L=>{var V;return(V=L==null?void 0:L.wma)==null?void 0:V.avgStrength},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"lift1_raw",label:`${A} (raw 1RM)`,unit:"kg",defaultAxis:"left",get:L=>L==null?void 0:L.bench,style:{borderWidth:1,pointRadius:0,tension:.2,borderDash:[4,4],opacity:.65}},{id:"lift1_wma",label:`${A} (smoothed 1RM)`,unit:"kg",defaultAxis:"left",get:L=>{var V;return(V=L==null?void 0:L.wma)==null?void 0:V.bench},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"lift2_raw",label:`${S} (raw 1RM)`,unit:"kg",defaultAxis:"left",get:L=>L==null?void 0:L.squat,style:{borderWidth:1,pointRadius:0,tension:.2,borderDash:[4,4],opacity:.65}},{id:"lift2_wma",label:`${S} (smoothed 1RM)`,unit:"kg",defaultAxis:"left",get:L=>{var V;return(V=L==null?void 0:L.wma)==null?void 0:V.squat},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"lift3_raw",label:`${U} (raw 1RM)`,unit:"kg",defaultAxis:"left",get:L=>L==null?void 0:L.deadlift,style:{borderWidth:1,pointRadius:0,tension:.2,borderDash:[4,4],opacity:.65}},{id:"lift3_wma",label:`${U} (smoothed 1RM)`,unit:"kg",defaultAxis:"left",get:L=>{var V;return(V=L==null?void 0:L.wma)==null?void 0:V.deadlift},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"bfPct",label:"Body fat % (Navy)",unit:"%",defaultAxis:"left",get:L=>L==null?void 0:L.bfPct,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.95,spanGaps:!0}},{id:"lbm",label:"Lean body mass (kg)",unit:"kg",defaultAxis:"left",get:L=>L==null?void 0:L.lbm,style:{borderWidth:2,pointRadius:0,tension:.2,opacity:.95,spanGaps:!0}},{id:"lbmPct",label:"Lean mass %",unit:"%",defaultAxis:"left",get:L=>Number.isFinite(L==null?void 0:L.bfPct)?100-L.bfPct:null,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.9,spanGaps:!0}},{id:"waistCm",label:"Waist (cm)",unit:"cm",defaultAxis:"right",get:L=>L==null?void 0:L.waistCm,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.9,spanGaps:!0}},{id:"neckCm",label:"Neck (cm)",unit:"cm",defaultAxis:"right",get:L=>L==null?void 0:L.neckCm,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.9,spanGaps:!0}},{id:"hipCm",label:"Hip (cm)",unit:"cm",defaultAxis:"right",get:L=>L==null?void 0:L.hipCm,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.9,spanGaps:!0}}],J=[{id:"tdee_weekly",label:"TDEE (weekly)",unit:"kcal",defaultAxis:"right",weeklyKey:"tdee",style:{borderWidth:2,pointRadius:0,tension:0,opacity:.95,stepped:!0}},{id:"avgCalories_weekly",label:"Avg calories (weekly)",unit:"kcal",defaultAxis:"right",weeklyKey:"avgCalories",style:{borderWidth:2,pointRadius:0,tension:0,opacity:.95,stepped:!0}},{id:"adaptationPct_weekly",label:"Adaptation % (weekly)",unit:"%",defaultAxis:"left",weeklyKey:"adaptationPct",style:{borderWidth:2,pointRadius:0,tension:0,opacity:.95,stepped:!0}},{id:"lossRatePct_weekly",label:"Loss rate vs LBM % (weekly)",unit:"%",defaultAxis:"left",weeklyKey:"lossRatePct",style:{borderWidth:2,pointRadius:0,tension:0,opacity:.95,stepped:!0}}];return{daily:H,weekly:J,byId:[...H,...J].reduce((L,V)=>(L[V.id]=V,L),{})}},[r]),x=M.useMemo(()=>{const[A,S,U]=r;return[{id:"overlay_default",label:"Default: Weight/Strength vs Calories",series:[{metricId:"weight_wma",axis:"left"},{metricId:"avgStrength_wma",axis:"left"},{metricId:"calories_raw",axis:"right"}]},{id:"weight_trend",label:"Weight trend (raw + smoothed)",series:[{metricId:"weight_raw",axis:"left"},{metricId:"weight_wma",axis:"left"}]},{id:"strength_trend",label:`Strength trend (${A}, ${S}, ${U})`,series:[{metricId:"lift1_wma",axis:"left"},{metricId:"lift2_wma",axis:"left"},{metricId:"lift3_wma",axis:"left"}]},{id:"body_comp",label:"Body composition (BF%, LBM, waist)",series:[{metricId:"bfPct",axis:"left"},{metricId:"lbm",axis:"left"},{metricId:"waistCm",axis:"right"}]},{id:"nutrition",label:"Nutrition (calories + macros)",series:[{metricId:"calories_raw",axis:"right"},{metricId:"protein",axis:"right"},{metricId:"carbs",axis:"right"},{metricId:"fats",axis:"right"}]},{id:"weekly_efficiency",label:"Weekly reality checks (TDEE + adaptation)",series:[{metricId:"tdee_weekly",axis:"right"},{metricId:"adaptationPct_weekly",axis:"left"},{metricId:"avgCalories_weekly",axis:"right"}]},{id:"custom",label:"Custom",series:null}]},[r]);function b(A){const S=x.find(U=>U.id===A);S&&a(U=>({...U,preset:A,series:ro(S.series||U.series)}))}function E(A,S){a(U=>{const H=[...U.series||[]];return H[A]={...H[A],...S},{...U,preset:"custom",series:ro(H)}})}function k(A){a(S=>{const U=[...S.series||[]];return U.splice(A,1),{...S,preset:"custom",series:ro(U)}})}function D(){a(A=>{const S=[...A.series||[]];return S.length>=6?A:(S.push({metricId:"weight_wma",axis:"left"}),{...A,preset:"custom",series:ro(S)})})}function N(){a(Ha())}function j(A){var U;const S=String(A||"all");if(S==="cycle"){const H=(s==null?void 0:s.id)||((U=h[0])==null?void 0:U.id)||"";a(J=>({...J,range:"cycle",cycleId:J.cycleId||H}));return}if(S==="custom"){const H=Array.isArray(t)&&t.length?t[t.length-1].dateIso:new Date().toISOString().slice(0,10),J=Array.isArray(t)&&t.length?t[Math.max(0,t.length-14)].dateIso:H;a(L=>({...L,range:"custom",customStart:L.customStart||J,customEnd:L.customEnd||H}));return}a(H=>({...H,range:S}))}const T=M.useMemo(()=>m.map(A=>A.dateIso),[m]),_=M.useMemo(()=>{const A={},S=Array.isArray(t)?t.length:0,U=(e==null?void 0:e.weeks)||[];if(!S||!U.length)return A;const H=U.length;for(const J of w.weekly){const L=new Array(S).fill(null);for(let V=1;V<=H;V++){const Q=U[V-1],te=Q==null?void 0:Q[J.weeklyKey],z=(V-1)*7,W=Math.min(V*7-1,S-1);for(let q=z;q<=W;q++)L[q]=Number.isFinite(te)?te:null}A[J.id]=L.slice(v,v+m.length)}return A},[e,t,m.length,v,w.weekly]),I=M.useMemo(()=>ro(o.series).map((S,U)=>{const H=w.byId[S.metricId];if(!H)return null;const J=Du[U%Du.length],L=H.style||{},V=L.opacity??1,Q=J.replace(/\d?\.\d+\)/,`${V})`),te=H.weeklyKey?_[H.id]||new Array(m.length).fill(null):m.map(W=>{const q=H.get?H.get(W):null;return Number.isFinite(q)?q:null}),z=(S.axis||H.defaultAxis||"left")==="right"?"yRight":"yLeft";return{label:H.label,data:te,yAxisID:z,borderColor:Q,borderWidth:L.borderWidth??2,pointRadius:L.pointRadius??0,tension:L.tension??.2,borderDash:L.borderDash,spanGaps:L.spanGaps??!0,stepped:L.stepped}}).filter(Boolean),[o.series,w.byId,m,_,w.weekly]),P=M.useMemo(()=>({labels:T,datasets:I}),[T,I]),R=M.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{title:A=>{var U;const S=(U=A==null?void 0:A[0])==null?void 0:U.label;return S?Xb(S):""}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:10,callback:function(A,S){const U=T==null?void 0:T[S];return Xb(U)}},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"Left axis",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"Right axis",color:"#9bb0c9"}}}}),[T]);return m.length?d.jsxs("div",{className:"chart card",style:{height:"auto"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("div",{className:"card-title",children:"Trend Explorer"}),d.jsx("div",{className:"small",children:"One chart, many views. Mix raw and smoothed series to spot trend vs noise."})]}),d.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[d.jsx("select",{className:"input",value:o.preset,onChange:A=>b(A.target.value),style:{height:32,padding:"0 10px",maxWidth:360},"aria-label":"Chart preset",children:x.map(A=>d.jsx("option",{value:A.id,children:A.label},A.id))}),d.jsx("select",{className:"input",value:o.range,onChange:A=>j(A.target.value),style:{height:32,padding:"0 10px"},"aria-label":"Range",children:f.map(A=>d.jsx("option",{value:A.id,children:A.label},A.id))}),String(o.range)==="cycle"&&d.jsxs("select",{className:"input",value:o.cycleId||"",onChange:A=>a(S=>({...S,cycleId:A.target.value})),style:{height:32,padding:"0 10px",maxWidth:320},"aria-label":"Cycle",disabled:!h.length,title:h.length?"Filter to a cycle":"No cycles yet",children:[!h.length&&d.jsx("option",{value:"",children:"No cycles"}),h.map(A=>d.jsxs("option",{value:A.id,children:[c(A.type)," since ",l(A.startDateIso),A.endDateIso?`  ${l(A.endDateIso)}`:""]},A.id))]}),String(o.range)==="custom"&&d.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[d.jsx("input",{className:"input",type:"date",value:o.customStart||"",onChange:A=>a(S=>({...S,customStart:A.target.value})),style:{height:32,padding:"0 10px"},"aria-label":"Custom start"}),d.jsx("span",{className:"small muted",children:"to"}),d.jsx("input",{className:"input",type:"date",value:o.customEnd||"",onChange:A=>a(S=>({...S,customEnd:A.target.value})),style:{height:32,padding:"0 10px"},"aria-label":"Custom end"})]}),d.jsx("button",{className:"btn",type:"button",onClick:D,style:{height:32,padding:"0 10px",textTransform:"none"},children:"+ Series"}),d.jsx("button",{className:"btn",type:"button",onClick:N,style:{height:32,padding:"0 10px",textTransform:"none"},children:"Reset"})]})]}),d.jsx("div",{style:{marginTop:10,display:"grid",gap:8},children:(o.series||[]).map((A,S)=>{const U=w.byId[A.metricId],H=A.axis||(U==null?void 0:U.defaultAxis)||"left";return d.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[d.jsx("div",{style:{width:10,height:10,borderRadius:999,background:Du[S%Du.length]}}),d.jsxs("select",{className:"input",value:A.metricId,onChange:J=>{const L=J.target.value,V=w.byId[L];E(S,{metricId:L,axis:(V==null?void 0:V.defaultAxis)||H})},style:{height:32,padding:"0 10px",minWidth:260},"aria-label":`Series ${S+1} metric`,children:[d.jsxs("optgroup",{label:"Weight",children:[d.jsx("option",{value:"weight_raw",children:"Weight (raw)"}),d.jsx("option",{value:"weight_wma",children:"Weight (smoothed)"})]}),d.jsxs("optgroup",{label:"Calories & Macros",children:[d.jsx("option",{value:"calories_raw",children:"Calories (raw)"}),d.jsx("option",{value:"protein",children:"Protein"}),d.jsx("option",{value:"carbs",children:"Carbs"}),d.jsx("option",{value:"fats",children:"Fats"})]}),d.jsxs("optgroup",{label:"Strength (1RM)",children:[d.jsx("option",{value:"avgStrength_raw",children:"Average strength (raw, ffilled)"}),d.jsx("option",{value:"avgStrength_wma",children:"Average strength (smoothed)"}),d.jsxs("option",{value:"lift1_raw",children:[r[0]," (raw 1RM)"]}),d.jsxs("option",{value:"lift1_wma",children:[r[0]," (smoothed 1RM)"]}),d.jsxs("option",{value:"lift2_raw",children:[r[1]," (raw 1RM)"]}),d.jsxs("option",{value:"lift2_wma",children:[r[1]," (smoothed 1RM)"]}),d.jsxs("option",{value:"lift3_raw",children:[r[2]," (raw 1RM)"]}),d.jsxs("option",{value:"lift3_wma",children:[r[2]," (smoothed 1RM)"]})]}),d.jsxs("optgroup",{label:"Body composition",children:[d.jsx("option",{value:"bfPct",children:"Body fat % (Navy)"}),d.jsx("option",{value:"lbm",children:"Lean body mass (kg)"}),d.jsx("option",{value:"lbmPct",children:"Lean mass %"})]}),d.jsxs("optgroup",{label:"Measurements",children:[d.jsx("option",{value:"waistCm",children:"Waist (cm)"}),d.jsx("option",{value:"neckCm",children:"Neck (cm)"}),d.jsx("option",{value:"hipCm",children:"Hip (cm)"})]}),d.jsxs("optgroup",{label:"Weekly (7-day blocks)",children:[d.jsx("option",{value:"tdee_weekly",children:"TDEE (weekly)"}),d.jsx("option",{value:"avgCalories_weekly",children:"Avg calories (weekly)"}),d.jsx("option",{value:"adaptationPct_weekly",children:"Adaptation % (weekly)"}),d.jsx("option",{value:"lossRatePct_weekly",children:"Loss rate vs LBM % (weekly)"})]})]}),d.jsxs("select",{className:"input",value:H,onChange:J=>E(S,{axis:J.target.value}),style:{height:32,padding:"0 10px",width:120},"aria-label":`Series ${S+1} axis`,children:[d.jsx("option",{value:"left",children:"Left axis"}),d.jsx("option",{value:"right",children:"Right axis"})]}),d.jsx("div",{className:"muted",style:{fontSize:12},children:U!=null&&U.unit?`Unit: ${U.unit}`:""}),d.jsx("button",{className:"btn",type:"button",onClick:()=>k(S),style:{height:32,padding:"0 10px",textTransform:"none"},"aria-label":`Remove series ${S+1}`,children:"Remove"})]},S)})}),d.jsx("div",{className:"chart-inner",style:{height:320,marginTop:10},children:d.jsx(s5,{data:P,options:R})})]}):d.jsxs("div",{className:"chart card",children:[d.jsx("div",{className:"card-title",children:"Trend Explorer"}),d.jsx("div",{className:"muted",style:{marginTop:8},children:"No data yet."})]})}function cr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function o5(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function a5(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function l5({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Weekly Analysis"}),d.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),d.jsx("div",{className:"table-wrap",style:{marginTop:12},children:d.jsxs("table",{className:"table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Week #"}),d.jsx("th",{children:"Avg Calories"}),d.jsx("th",{children:"Weight Change (kg)"}),d.jsx("th",{children:"Calculated TDEE"}),d.jsx("th",{children:"TDEE "}),d.jsx("th",{children:"Adaptation %"}),d.jsx("th",{children:"LBM (kg)"}),d.jsx("th",{children:"Loss Rate vs LBM %"}),d.jsx("th",{children:"Status"})]})}),d.jsx("tbody",{children:t.weeks.map(n=>d.jsxs("tr",{children:[d.jsx("td",{children:n.week}),d.jsx("td",{children:cr(n.avgCalories,0)}),d.jsx("td",{children:cr(n.weightChange,2)}),d.jsx("td",{children:cr(n.tdee,0)}),d.jsx("td",{children:cr(n.tdeeChangeFromBaseline,0)}),d.jsx("td",{className:o5(n.adaptationPct),children:cr(n.adaptationPct,1)}),d.jsx("td",{children:cr(n.lbm,1)}),d.jsx("td",{children:cr(n.lossRatePct,2)}),d.jsx("td",{className:a5(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),d.jsxs("div",{className:"notice info",style:{marginTop:12},children:[d.jsx("div",{children:d.jsx("b",{children:"How to read this:"})}),d.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[d.jsxs("div",{children:[d.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),d.jsxs("div",{children:[d.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),d.jsxs("div",{children:[d.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",d.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}const ye={version:1,thresholds:{minDaysForAssessment:14,minCompleteDaysThisWeek:5,weight:{stableKgPerWeek:.2,rapidKgPerWeek:1},bf:{stablePctPoints:.5},strength:{stablePct:2,increasePct:2,declinePct:-2,rapidDeclinePct:-5},proteinPerKg:{low:1.6,lowWarn:1.8},adaptation:{crashPct:-15,warnPct:-10},lossRatePctLbmPerWeek:{optimalMin:.5,optimalMax:1,aggressiveWarn:1},slowWeeklyWeightLossKg:.3,waterDiscrepancyKcalPerWeek:3850,goalNoteMinKgAway:2},global:{missingSignalNotes:!0,cycleMisalignmentWarnings:!0,goalNotes:!0},strings:{cycleMisalignment:{cutting:" Cycle misalignment: In a Cut cycle, weight should trend  and body fat should trend  over time.",bulking:" Cycle misalignment: In a Bulk cycle, weight should trend  and strength should trend  over time.",maintaining:" Cycle misalignment: In a Maintenance cycle, weight should stay stable and strength should stay stable or improve."},goalNotes:{lose:"Note: You are {absToGoal:1} kg away from your target of {targetWeight:1} kg. Consider switching to a Cut cycle if fat loss is the priority.",gain:"Note: You are {absToGoal:1} kg away from your target of {targetWeight:1} kg. Consider switching to a Bulk cycle if gaining is the priority."}},statusRules:[{id:"insufficient_data_this_week",priority:0,enabled:!0,level:"gray",title:"Insufficient Data",emoji:"",when:{"<":[{var:"daysLogged"},{var:"t.minCompleteDaysThisWeek"}]},message:"Only {daysLogged:0}/7 days logged this week. Add a few more entries to unlock accurate trend status.",notes:[{when:{and:[{var:"hasNavyAny"},{"!":[{var:"hasNavyInWindow"}]}]},text:"Take body measurements in this period to improve body-fat accuracy."},{when:{"!":[{var:"hasNavyAny"}]},text:"Add your first Navy body measurements to start tracking body fat."},{when:{"!":[{var:"cycle"}]},text:"No active cycle set. Create a Cut / Bulk / Maintenance cycle for clearer expectations."},"Aim for at least {t.minCompleteDaysThisWeek:0} logged days per week for reliable insights."]},{id:"insufficient_data_window",priority:1,enabled:!0,level:"gray",title:"Insufficient Data",emoji:"",when:{or:[{"<":[{var:"derivedLen"},{var:"t.minDaysForAssessment"}]},{"!":[{finite:[{var:"baselineTdee"}]}]},{"!":[{finite:[{var:"calculatedTdee"}]}]}]},message:"Need {daysRemaining:0} more days of consistent logging to assess status.",notes:[{when:{"!":[{var:"cycle"}]},text:"No active cycle set. Create a Cut / Bulk / Maintenance cycle for clearer expectations."},{when:{and:[{var:"hasNavyAny"},{"!":[{var:"hasNavyInWindow"}]}]},text:"Take body measurements in this period to improve body-fat accuracy."},{when:{"!":[{var:"hasNavyAny"}]},text:"Add your first Navy body measurements to start tracking body fat."}]},{id:"metabolic_crash",priority:10,enabled:!0,level:"red",title:"Metabolic Crash Risk",emoji:"",when:{and:[{"<":[{var:"adaptationPct"},{var:"t.adaptation.crashPct"}]},{"==":[{var:"strengthTrend.key"},"rapid_decline"]}]},message:"Your metabolism is adapting aggressively ({adaptationPct:1}%) and strength is dropping fast. Consider diet break / refeeds and reduce deficit.",warnings:[{when:{"<":[{var:"proteinPerKg"},{var:"t.proteinPerKg.lowWarn"}]},text:"Protein is low ({proteinPerKg:1} g/kg). Increase to protect lean mass."}],effects:["cycleMisalignmentHint"]},{id:"skinny_fat_trajectory",priority:20,enabled:!0,level:"red",title:"Skinny-Fat Trajectory",emoji:"",when:{and:[{var:"isBfKnown"},{"!=":[{var:"weightTrend.key"},"gaining"]},{"==":[{var:"bfTrend.key"},"increasing"]},{in:[{var:"strengthTrend.key"},["declining","rapid_decline"]]}]},message:[{when:{"<":[{var:"proteinPerKg"},{var:"t.proteinPerKg.lowWarn"}]},text:"Body fat is rising while strength is falling  likely low protein and poor training stimulus. Increase protein and focus on progressive overload."},{when:!0,text:"Body fat is rising while strength is falling  likely poor training stimulus. Tighten training, keep protein high, and avoid random dieting."}],warnings:[{when:{and:[{var:"hasCycleTarget"},{finite:[{var:"targetWeight"}]},{finite:[{var:"currentWeight"}]},{"<":[{var:"currentWeight"},{var:"targetWeight"}]}]},text:"Gaining weight won't move you toward your target. Consider switching to a Cut cycle."}],effects:["cycleMisalignmentHint"]},{id:"inadequate_protein_or_training",priority:30,enabled:!0,level:"red",title:"Muscle Loss Risk",emoji:"",when:{and:[{"==":[{var:"strengthTrend.key"},"rapid_decline"]},{in:[{var:"weightTrend.key"},["losing","rapid_loss"]]}]},message:[{when:{"<":[{var:"proteinPerKg"},{var:"t.proteinPerKg.lowWarn"}]},text:"Strength is falling fast while losing weight  protein and training are likely insufficient. Increase protein and reduce deficit."},{when:{">":[{var:"strengthDeclinePct"},5]},text:"Strength is falling fast vs baseline. Reduce deficit and prioritize recovery (sleep + volume management)."},{when:!0,text:"Strength is falling fast while losing weight. Reduce deficit and review training stimulus and recovery."}],effects:["cycleMisalignmentHint"]},{id:"overfeeding_without_stimulus",priority:40,enabled:!0,level:"red",title:"Overfeeding Without Stimulus",emoji:"",when:{and:[{var:"isBfKnown"},{in:[{var:"weightTrend.key"},["gaining","rapid_gain"]]},{"==":[{var:"bfTrend.key"},"increasing"]},{"==":[{var:"strengthTrend.key"},"stable"]}]},message:"Gaining weight but strength isn't improving, and body fat is rising. Reduce calories slightly and train harder (progressive overload).",effects:["cycleMisalignmentHint"]},{id:"detraining",priority:50,enabled:!0,level:"red",title:"Detraining / Under-Recovered",emoji:"",when:{and:[{var:"isBfKnown"},{"==":[{var:"bfTrend.key"},"increasing"]},{in:[{var:"strengthTrend.key"},["declining","rapid_decline"]]}]},message:"Strength is declining and body fat is increasing  you may be under-recovered or inconsistent. Fix training consistency and recovery.",warnings:[{when:{and:[{var:"hasCycleTarget"},{finite:[{var:"targetWeight"}]},{finite:[{var:"currentWeight"}]},{"<":[{var:"currentWeight"},{var:"targetWeight"}]}]},text:"Gaining won't move you toward your target. Consider switching to a Cut cycle."}],effects:["cycleMisalignmentHint","goalNote"]},{id:"water_weight_discrepancy",priority:60,enabled:!0,level:"yellow",title:"Possible Water Weight",emoji:"",when:{and:[{finite:[{var:"waterDiscrepancyKcal"}]},{">":[{var:"waterDiscrepancyKcal"},{var:"t.waterDiscrepancyKcalPerWeek"}]}]},message:"Your scale change doesn't match the calorie deficit (likely water weight / sodium / stress). Stay consistent for 12 more weeks.",warnings:["Expected weekly change (from last week TDEE): {expectedWeeklyChangeKg:2} kg","Observed weekly change: {weeklyWeightChange:2} kg"],effects:["cycleMisalignmentHint","goalNote"]},{id:"cutting_too_aggressive",priority:70,enabled:!0,level:"yellow",title:"Cutting Too Aggressively",emoji:"",when:{and:[{"==":[{var:"weightTrend.key"},"rapid_loss"]},{in:[{var:"strengthTrend.key"},["declining","rapid_decline"]]}]},message:[{when:{"<":[{var:"proteinPerKg"},{var:"t.proteinPerKg.lowWarn"}]},text:"Weight loss is very fast and strength is dropping. Increase protein and reduce deficit."},{when:{">":[{var:"lossRate"},{var:"t.lossRatePctLbmPerWeek.aggressiveWarn"}]},text:"Your loss rate is aggressive ({lossRate:2}% LBM/week). Reduce deficit and prioritize strength maintenance."},{when:!0,text:"Weight loss is very fast and strength is dropping. Reduce deficit and improve recovery."}],effects:["cycleMisalignmentHint"]},{id:"dirty_bulking",priority:80,enabled:!0,level:"yellow",title:"Dirty Bulking",emoji:"",when:{and:[{var:"isBfKnown"},{"==":[{var:"weightTrend.key"},"rapid_gain"]},{"==":[{var:"bfTrend.key"},"increasing"]},{"==":[{var:"strengthTrend.key"},"increasing"]}]},message:"Strength is improving, but weight and body fat are rising too fast. Reduce surplus slightly and keep training hard.",effects:["cycleMisalignmentHint","goalNote"]},{id:"spinning_wheels",priority:90,enabled:!0,level:"yellow",title:"Spinning Wheels",emoji:"",when:{and:[{"==":[{var:"weightTrend.key"},"stable"]},{or:[{"!":[{var:"isBfKnown"}]},{"==":[{var:"bfTrend.key"},"stable"]}]},{or:[{"!":[{var:"isStrKnown"}]},{"==":[{var:"strengthTrend.key"},"stable"]}]}]},message:[{when:{"==":[{var:"cycle"},"cutting"]},text:"No progress in a Cut. Reduce calories by ~200 and increase activity."},{when:{"==":[{var:"cycle"},"bulking"]},text:"No progress in a Bulk. Increase calories by ~200 and push progressive overload."},{when:!0,text:"No clear progress. Adjust calories slightly and ensure training is progressing."}],warnings:[{when:{"<":[{var:"adaptationPct"},{var:"t.adaptation.warnPct"}]},text:"Metabolic adaptation is notable ({adaptationPct:1}%). Consider a short diet break."}],effects:["goalNote"]},{id:"recomping",priority:100,enabled:!0,level:"green",title:"Recomping",emoji:"",when:{and:[{"==":[{var:"weightTrend.key"},"stable"]},{"==":[{var:"bfTrend.key"},"decreasing"]},{"==":[{var:"strengthTrend.key"},"increasing"]}]},message:"Body fat is dropping while strength is improving at stable weight. Keep calories steady and maintain training progression.",effects:["goalNote"]},{id:"lean_bulking",priority:110,enabled:!0,level:"green",title:"Lean Bulking",emoji:"",when:{and:[{"==":[{var:"weightTrend.key"},"gaining"]},{"==":[{var:"strengthTrend.key"},"increasing"]},{or:[{"!":[{var:"isBfKnown"}]},{in:[{var:"bfTrend.key"},["stable","increasing"]]}]}]},message:[{when:{"==":[{var:"cycle"},"cutting"]},text:"You are gaining weight in a Cut cycle. Consider switching to Bulk / Maintenance if this is intentional."},{when:!0,text:"Weight and strength are increasing. Keep surplus modest and keep protein high."}]},{id:"cutting_optimal",priority:120,enabled:!0,level:"green",title:"Cutting (On Track)",emoji:"",when:{and:[{"==":[{var:"weightTrend.key"},"losing"]},{or:[{"!":[{var:"isBfKnown"}]},{"==":[{var:"bfTrend.key"},"decreasing"]}]},{in:[{var:"strengthTrend.key"},["stable","increasing"]]},{">=":[{var:"lossRate"},{var:"t.lossRatePctLbmPerWeek.optimalMin"}]},{"<=":[{var:"lossRate"},{var:"t.lossRatePctLbmPerWeek.optimalMax"}]}]},message:"You are losing weight at a healthy rate while maintaining strength. Keep doing what you're doing."},{id:"cutting_conservative",priority:130,enabled:!0,level:"green",title:"Cutting (Conservative)",emoji:"",when:{and:[{"==":[{var:"weightTrend.key"},"losing"]},{"==":[{var:"bfTrend.key"},"decreasing"]},{"==":[{var:"strengthTrend.key"},"stable"]}]},message:[{when:{"<":[{var:"weeklyWeightLoss"},{var:"t.slowWeeklyWeightLossKg"}]},text:"Your cut is working but slowly. If you want faster progress, reduce calories by ~100200."},{when:!0,text:"Your cut is working. Keep going."}]},{id:"maintaining",priority:140,enabled:!0,level:"green",title:"Maintaining Successfully",emoji:"",when:{and:[{"==":[{var:"weightTrend.key"},"stable"]},{or:[{"!":[{var:"isBfKnown"}]},{in:[{var:"bfTrend.key"},["stable","decreasing"]]}]},{in:[{var:"strengthTrend.key"},["stable","increasing"]]}]},message:"You're maintaining weight while holding strength. Great base to start a focused cut or bulk.",effects:["goalNote"]}],fallbackStatus:{level:"yellow",title:"Mixed Signals",emoji:"",message:"Trends are mixed. Focus on consistent logging and one clear goal (cut, bulk, or maintain) for the next 2 weeks."}};function cd(t,e){if(e==null)return t;if(Array.isArray(t)||Array.isArray(e))return Array.isArray(e)?e:t;if(typeof t!="object"||typeof e!="object")return e;const n={...t};for(const i of Object.keys(e))n[i]=cd(t==null?void 0:t[i],e[i]);return n}function Zk(t,e,n=void 0){if(!e)return n;const i=String(e).split(".");let s=t;for(const r of i){if(s==null)return n;s=s[r]}return s===void 0?n:s}function Lo(t){return Number.isNaN(t)?!1:!!t}function hn(t){return typeof t=="number"&&Number.isFinite(t)}function Ke(t,e){if(t==null)return!0;if(typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(Array.isArray(t))return t.map(o=>Ke(o,e));if(typeof t!="object")return!1;const n=Object.keys(t);if(n.length!==1)return!1;const i=n[0],s=t[i],r=Array.isArray(s)?s:[s];switch(i){case"var":{const o=r[0],a=r.length>1?r[1]:void 0;return Zk(e,o,a)}case"!":case"not":return!Lo(Ke(r[0],e));case"and":return r.every(o=>Lo(Ke(o,e)));case"or":return r.some(o=>Lo(Ke(o,e)));case"==":case"eq":{const o=Ke(r[0],e),a=Ke(r[1],e);return o===a}case"!=":{const o=Ke(r[0],e),a=Ke(r[1],e);return o!==a}case"<":case"<=":case">":case">=":{const o=Ke(r[0],e),a=Ke(r[1],e);return!hn(o)||!hn(a)?!1:i==="<"?o<a:i==="<="?o<=a:i===">"?o>a:o>=a}case"in":{const o=Ke(r[0],e),a=Ke(r[1],e);return Array.isArray(a)?a.includes(o):typeof a=="string"?String(a).includes(String(o)):!1}case"finite":{const o=Ke(r[0],e);return hn(o)}case"abs":{const o=Ke(r[0],e);return hn(o)?Math.abs(o):NaN}case"min":{const o=r.map(a=>Ke(a,e)).filter(hn);return o.length?Math.min(...o):NaN}case"max":{const o=r.map(a=>Ke(a,e)).filter(hn);return o.length?Math.max(...o):NaN}case"+":{const o=r.map(a=>Ke(a,e));return o.every(hn)?o.reduce((a,l)=>a+l,0):NaN}case"-":{const o=Ke(r[0],e),a=Ke(r[1],e);return!hn(o)||!hn(a)?NaN:o-a}case"*":{const o=r.map(a=>Ke(a,e));return o.every(hn)?o.reduce((a,l)=>a*l,1):NaN}case"/":{const o=Ke(r[0],e),a=Ke(r[1],e);return!hn(o)||!hn(a)||a===0?NaN:o/a}default:return!1}}function c5(t,e){if(t==null)return"";if(typeof t=="string")return t;if(typeof t=="boolean")return t?"true":"false";if(Number.isNaN(t))return"";if(!hn(t))return String(t);const n=e!=null?Number(e):null;return Number.isFinite(n)?t.toFixed(Math.max(0,Math.min(6,n))):String(t)}function Hn(t,e){return typeof t!="string"?"":t.replace(/\{([a-zA-Z0-9_$.]+)(?::([0-9]+))?\}/g,(n,i,s)=>{const r=Zk(e,i,void 0);return c5(r,s)})}function Zb(t,e){if(typeof t=="string")return Hn(t,e);if(!Array.isArray(t))return"";for(const n of t){if(typeof n=="string")return Hn(n,e);if(n&&typeof n=="object"&&(n.when==null?!0:Lo(Ke(n.when,e))))return Hn(n.text||"",e)}return""}function Mu(t,e){if(!Array.isArray(t))return[];const n=[];for(const i of t){if(typeof i=="string"){const s=Hn(i,e);s&&n.push(s);continue}if(i&&typeof i=="object"){if(!(i.when==null?!0:Lo(Ke(i.when,e))))continue;const r=Hn(i.text||"",e);r&&n.push(r)}}return n}function u5(t,e,n=null){const i=Array.isArray(t),s=i?Array.isArray(t)?t:[]:Array.isArray(t==null?void 0:t.statusRules)?t.statusRules:[],r=i?n:(t==null?void 0:t.fallbackStatus)??null,o=(s||[]).filter(l=>l&&l.id).filter(l=>l.enabled!==!1).slice().sort((l,c)=>Number(l.priority??9999)-Number(c.priority??9999));for(const l of o)if(l.when==null||Lo(Ke(l.when,e)))return{id:l.id,level:l.level||"gray",title:Hn(l.title||"Status",e),emoji:Hn(l.emoji||"",e),message:Zb(l.message,e),warnings:Mu(l.warnings,e),notes:Mu(l.notes,e),effects:Array.isArray(l.effects)?l.effects.slice():[]};const a=r;return a?{id:"fallback",level:a.level||"gray",title:Hn(a.title||"Status",e),emoji:Hn(a.emoji||"",e),message:Zb(a.message,e),warnings:Mu(a.warnings,e),notes:Mu(a.notes,e),effects:Array.isArray(a.effects)?a.effects.slice():[]}:{id:"fallback",level:"gray",title:"Status",emoji:"",message:"",warnings:[],notes:[],effects:[]}}function h5(t){if(!t||typeof t!="object")return ye;const e=t.value&&typeof t.value=="object"?t.value:t;if(!e||typeof e!="object")return ye;const{updatedAt:n,updatedBy:i,value:s,...r}=e,o=t.value&&typeof t.value=="object"?e:r;return cd(ye,o)}function d5(){const{user:t}=Mn(),[e,n]=M.useState(null),[i,s]=M.useState(!1),[r,o]=M.useState(null);return M.useEffect(()=>{if(n(null),o(null),s(!1),!t)return;const l=Qn(Ct,"config","dynamicStatusBanner");s(!0);const c=sc(l,h=>{n(h.exists()?h.data():null),s(!1)},h=>{o((h==null?void 0:h.message)||"Failed to load banner config."),s(!1)});return()=>c()},[t]),{config:M.useMemo(()=>h5(e),[e]),remote:e,loading:i,error:r}}function up(t,e){const n=rc(t).getTime(),i=rc(e).getTime();return Math.floor((n-i)/(24*60*60*1e3))}function ts(t){const e=(t||[]).map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function ex(t,e,n){return Math.max(e,Math.min(n,t))}function Tt(t,e=0){return Number.isFinite(t)?Number(t).toFixed(e):""}function f5(t){const e=String(t||"").toLowerCase();return e==="cut"||e==="cutting"?"cut":e==="bulk"||e==="bulking"?"bulk":e==="maintain"||e==="maintaining"?"maintain":"none"}function p5(t){return t==="cut"?"CUT":t==="bulk"?"BULK":t==="maintain"?"MAINTAIN":"NO CYCLE"}function g5(t,e){var r,o;if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const n=Number(((r=e==null?void 0:e.weight)==null?void 0:r.stableKgPerWeek)??.2),i=Number(((o=e==null?void 0:e.weight)==null?void 0:o.rapidKgPerWeek)??1),s=t;return Math.abs(s)<=n?{key:"stable",sym:"",label:"Stable",value:s}:s<-i?{key:"rapid_loss",sym:"",label:"Rapid loss",value:s}:s<-n?{key:"losing",sym:"",label:"Losing",value:s}:s>i?{key:"rapid_gain",sym:"",label:"Rapid gain",value:s}:s>n?{key:"gaining",sym:"",label:"Gaining",value:s}:{key:"stable",sym:"",label:"Stable",value:s}}function m5(t,e){var s;if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const n=Number(((s=e==null?void 0:e.bf)==null?void 0:s.stablePctPoints)??.5),i=t;return Math.abs(i)<=n?{key:"stable",sym:"",label:"Stable",value:i}:i<-n?{key:"decreasing",sym:"",label:"Decreasing",value:i}:i>n?{key:"increasing",sym:"",label:"Increasing",value:i}:{key:"stable",sym:"",label:"Stable",value:i}}function y5(t,e){var a,l,c,h;if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const n=Number(((a=e==null?void 0:e.strength)==null?void 0:a.stablePct)??2),i=Number(((l=e==null?void 0:e.strength)==null?void 0:l.increasePct)??2),s=Number(((c=e==null?void 0:e.strength)==null?void 0:c.declinePct)??-2),r=Number(((h=e==null?void 0:e.strength)==null?void 0:h.rapidDeclinePct)??-5),o=t;return Math.abs(o)<=n?{key:"stable",sym:"",label:"Stable",value:o}:o>=i?{key:"increasing",sym:"",label:"Increasing",value:o}:o<=r?{key:"rapid_decline",sym:"",label:"Rapid decline",value:o}:o<=s?{key:"declining",sym:"",label:"Declining",value:o}:{key:"stable",sym:"",label:"Stable",value:o}}function v5(t){return t==="cut"?"cycle-badge cut":t==="bulk"?"cycle-badge bulk":t==="maintain"?"cycle-badge maintain":"cycle-badge none"}function _5(t,e){var k,D;const n=(e==null?void 0:e.thresholds)||{},i=(e==null?void 0:e.global)||{},s=Math.round(t.currentAvgCal||0),r=Math.round(t.currentProtein||0),o=Math.round(t.calculatedTdee||0),a=Math.round(t.baselineTdee||0),l={...t,t:n,cal:s,prot:r,tdee:o,base:a,calMinus200:Math.max(0,s-200),calMinus250:Math.max(0,s-250),calMinus300:Math.max(0,s-300),calMinus400:Math.max(0,s-400),calPlus200:s+200,calPlus250:s+250,calPlus300:s+300,calPlus400:s+400,tdeeMinus500:Math.max(0,o-500),tdeePlus300:o+300,tdeePlus400:o+400},c=u5(e||{},l),h=Array.isArray(c.warnings)?[...c.warnings]:[],f=Array.isArray(c.notes)?[...c.notes]:[],p=((k=t.bfTrend)==null?void 0:k.key)&&t.bfTrend.key!=="unknown",m=((D=t.strengthTrend)==null?void 0:D.key)&&t.strengthTrend.key!=="unknown";i!=null&&i.missingSignalNotes&&((!t.hasNavyAny||!t.hasNavyInWindow||!p)&&f.push("Body fat trend is unavailable in this period. Add Navy measurements (neck/waist/hip) for more accurate status."),m||f.push("Strength trend is unavailable. Log your big-3 lifts (bench/squat/deadlift) to improve accuracy."));const v=Array.isArray(c.effects)?c.effects:[],w=(e==null?void 0:e.strings)||{},x=Number.isFinite(t.weightToGoal)?Math.abs(t.weightToGoal):null;function b(){if(!(i!=null&&i.goalNotes))return;const N=Number((n==null?void 0:n.goalNoteMinKgAway)??2);!t.hasCycleTarget||!Number.isFinite(t.targetWeight)||!Number.isFinite(t.currentWeight)||!Number.isFinite(x)||x<=N||(t.directionToGoal==="need to lose"?h.push(Hn((w==null?void 0:w.goalNoteLose)||"Note: You're {absToGoal:1}kg from your target of {targetWeight:1}kg. Consider switching to a Cut cycle if fat loss is the priority.",{...l,absToGoal:x})):t.directionToGoal==="need to gain"&&h.push(Hn((w==null?void 0:w.goalNoteGain)||"Note: You're {absToGoal:1}kg from your target of {targetWeight:1}kg. Consider switching to a Bulk cycle if gaining is the priority.",{...l,absToGoal:x})))}function E(){var I,P,R;if(!(i!=null&&i.cycleMisalignmentWarnings))return;const N=t.cycle;if(N==="none")return;const j=(I=t.weightTrend)==null?void 0:I.key,T=(P=t.bfTrend)==null?void 0:P.key,_=(R=t.strengthTrend)==null?void 0:R.key;N==="cut"?(j==="stable"||j==="gaining"||j==="rapid_gain"||p&&(T==="stable"||T==="increasing"))&&h.push((w==null?void 0:w.cycleMisalignmentCut)||" Cycle misalignment: In a Cut cycle, weight should trend  and body fat should trend  over time."):N==="bulk"?(j==="stable"||j==="losing"||j==="rapid_loss"||m&&_==="stable")&&h.push((w==null?void 0:w.cycleMisalignmentBulk)||" Cycle misalignment: In a Bulk cycle, weight should trend  and strength should trend  over time."):N==="maintain"&&(j==="rapid_gain"||j==="rapid_loss")&&h.push((w==null?void 0:w.cycleMisalignmentMaintain)||" Cycle misalignment: In a Maintain cycle, weight should stay  (stable).")}for(const N of v)N==="goalNote"&&b(),N==="cycleMisalignmentHint"&&E();return{...c,warnings:h,notes:f}}function w5({derived:t,weekly:e,profile:n,currentCycle:i}){var N,j,T,_,I,P,R,A,S;const[s,r]=M.useState(7),[o,a]=M.useState(!1),{config:l}=d5(),c=(l==null?void 0:l.thresholds)||{},h=Number(((N=c==null?void 0:c.weight)==null?void 0:N.stableKgPerWeek)??.2),f=Number(((j=c==null?void 0:c.weight)==null?void 0:j.rapidKgPerWeek)??1),p=Number(((T=c==null?void 0:c.bf)==null?void 0:T.stablePctPoints)??.5),m=Number(((_=c==null?void 0:c.strength)==null?void 0:_.stablePct)??2),v=Number(((I=c==null?void 0:c.strength)==null?void 0:I.increasePct)??2),w=Number(((P=c==null?void 0:c.strength)==null?void 0:P.declinePct)??-2),x=Number(((R=c==null?void 0:c.strength)==null?void 0:R.rapidDeclinePct)??-5),b=M.useMemo(()=>{var tr,va,Qi,_a,vt,wa;const U=(l==null?void 0:l.thresholds)||{},H=Number((U==null?void 0:U.minDaysForAssessment)??14),J=Array.isArray(t)?t:[],L=J.length;if(!L)return{rangeDays:s,status:{level:"gray",title:"Insufficient Data",emoji:"",message:"No data yet. Add your first entry to see your status.",warnings:[],notes:[]},cycle:"none",cycleBadge:"NO CYCLE",weightTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},bfTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},strengthTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},currentAvgCal:null,currentProtein:null,currentWeight:null,targetWeight:null,goalProgress:null};const V=J[J.length-1].dateIso,Q=J.filter(ne=>{const _e=up(V,ne.dateIso);return _e>=0&&_e<=s-1}),te=J.filter(ne=>{const _e=up(V,ne.dateIso);return _e>=s&&_e<=s*2-1}),z=ts(Q.map(ne=>{var _e;return Number.isFinite((_e=ne==null?void 0:ne.wma)==null?void 0:_e.weight)?ne.wma.weight:ne.weight})),W=ts(te.map(ne=>{var _e;return Number.isFinite((_e=ne==null?void 0:ne.wma)==null?void 0:_e.weight)?ne.wma.weight:ne.weight})),q=Number.isFinite(z)&&Number.isFinite(W)?(z-W)*(7/s):null,se=g5(q,U),ue=ts(Q.map(ne=>ne.bfPct).filter(Number.isFinite)),Y=ts(te.map(ne=>ne.bfPct).filter(Number.isFinite)),Ee=Number.isFinite(ue)&&Number.isFinite(Y)?ue-Y:null,je=m5(Ee,U),lt=ts(Q.map(ne=>{var _e;return(_e=ne==null?void 0:ne.wma)==null?void 0:_e.avgStrength}).filter(Number.isFinite)),Ae=ts(te.map(ne=>{var _e;return(_e=ne==null?void 0:ne.wma)==null?void 0:_e.avgStrength}).filter(Number.isFinite)),We=Number.isFinite(lt)&&Number.isFinite(Ae)&&Ae!==0?(lt-Ae)/Ae*100:null,Z=y5(We,U),pe=ts(Q.map(ne=>ne.calories).filter(Number.isFinite)),Oe=ts(Q.map(ne=>ne.protein).filter(Number.isFinite)),Ye=J[J.length-1],ze=Number.isFinite((tr=Ye==null?void 0:Ye.wma)==null?void 0:tr.weight)?Ye.wma.weight:Ye.weight;let Ve=null;if(Q.length>=2){const ne=Q[0],_e=Q[Q.length-1],jn=Number.isFinite((va=ne==null?void 0:ne.wma)==null?void 0:va.weight)?ne.wma.weight:ne.weight,Xr=Number.isFinite((Qi=_e==null?void 0:_e.wma)==null?void 0:Qi.weight)?_e.wma.weight:_e.weight;if(Number.isFinite(jn)&&Number.isFinite(Xr)){const On=Math.max(1,Q.length-1);Ve=(Xr-jn)*(7/On)}}const bn=Number.isFinite(Ve)?Math.max(0,-Ve):null;let Ht=null;if(Number.isFinite(pe)&&Number.isFinite(Ve)){const _e=-Ve*7700/7;Ht=pe+_e}const ft=(e==null?void 0:e.baselineTdee)??null,ln=Number.isFinite(Ht)&&Number.isFinite(ft)&&ft!==0?(Ht-ft)/ft*100:null,cn=(e==null?void 0:e.weeks)||[],ee=cn.length>=2?(_a=cn[cn.length-2])==null?void 0:_a.tdee:null;let F=null,ce=null;if(Number.isFinite(ee)&&Number.isFinite(pe)&&Number.isFinite(Ve)){const ne=(ee-pe)*7,_e=-Ve*7700;F=Math.abs(_e-ne),ce=(pe-ee)*7/7700}const re=(e==null?void 0:e.baselineStrength)??null,he=Number.isFinite(re)&&Number.isFinite(lt)&&re!==0?(re-lt)/re*100:null;let ct=null;for(let ne=J.length-1;ne>=0;ne--)if(Number.isFinite((vt=J[ne])==null?void 0:vt.lbm)){ct=J[ne].lbm;break}const Xs=Number.isFinite(ct)&&Number.isFinite(bn)&&ct>0?bn/ct*100:null,Js=Number.isFinite(Oe)&&Number.isFinite(ze)&&ze>0?Oe/ze:null,Mc=Number.isFinite(ze)?ze*2:null,Zs=J.filter(ne=>{const _e=up(V,ne.dateIso);return _e>=0&&_e<=6}),ga=ne=>Number.isFinite(ne.weight)&&Number.isFinite(ne.protein)&&Number.isFinite(ne.carbs)&&Number.isFinite(ne.fats),ma=Zs.filter(ga).length,ya=J.filter(ga).length,ef=Math.max(0,H-ya),jc=J.some(ne=>Number.isFinite(ne.neck)||Number.isFinite(ne.waist)||Number.isFinite(ne.hip)||Number.isFinite(ne.bfPct)),Yr=Q.some(ne=>Number.isFinite(ne.bfPct)),qi=f5(i==null?void 0:i.type),er=qi!=="maintain"&&Number.isFinite(i==null?void 0:i.targetWeightKg),xn=er?Number(i.targetWeightKg):null,bi=er&&Number.isFinite(xn)&&Number.isFinite(ze)?ze-xn:null;let Gi=null;Number.isFinite(bi)&&(Math.abs(bi)<=1?Gi="at goal":bi>0?Gi="need to lose":Gi="need to gain");let ni=null;if(er&&Number.isFinite(xn)&&(i!=null&&i.startDateIso)){const ne=J.find(jn=>(jn.dateIso||"")>=(i.startDateIso||"")),_e=ne?Number.isFinite((wa=ne==null?void 0:ne.wma)==null?void 0:wa.weight)?ne.wma.weight:ne.weight:null;if(Number.isFinite(_e)&&Number.isFinite(ze)){const jn=Math.abs(_e-xn),Xr=qi==="cut"?_e-ze:ze-_e,On=ex(Xr,0,jn||1),tf=jn>0?On/jn*100:0;ni={startWeight:_e,totalNeeded:jn,progress:On,pct:ex(tf,0,100)}}}const Oc=_5({cycle:qi,hasCycleTarget:er,currentAvgCal:pe,currentProtein:Oe,proteinPerKg:Js,targetProtein2g:Mc,currentWeight:ze,targetWeight:xn,weightToGoal:bi,directionToGoal:Gi,derivedLen:L,daysLogged:ma,daysRemaining:ef,hasNavyAny:jc,hasNavyInWindow:Yr,weightTrend:se,bfTrend:je,strengthTrend:Z,lossRate:Xs,calculatedTdee:Ht,baselineTdee:ft,adaptationPct:ln,strengthDeclinePct:he,weeklyWeightChange:Ve,weeklyWeightLoss:bn,prevWeekTdee:ee,waterDiscrepancyKcal:F,expectedWeeklyChangeKg:ce,weekly:e},l);return{rangeDays:s,status:Oc,cycle:qi,cycleBadge:p5(qi),weightTrend:se,bfTrend:je,strengthTrend:Z,currentAvgCal:pe,currentProtein:Oe,currentWeight:ze,targetWeight:xn,weightToGoal:bi,goalProgress:ni,calculatedTdee:Ht,baselineTdee:ft,adaptationPct:ln,daysLogged:ma,hasNavyAny:jc,hasNavyInWindow:Yr,proteinPerKg:Js,targetProtein2g:Mc,lossRate:Xs,weeklyWeightChange:Ve}},[t,e,n,i,s,l]),{status:E}=b,k=(E==null?void 0:E.level)||"gray",D=((E==null?void 0:E.warnings)||[]).length>0&&k==="green";return d.jsxs("div",{className:`status-banner level-${k}${D?" has-accent":""}`,children:[d.jsxs("div",{className:"status-left",children:[d.jsxs("div",{className:"status-topline",children:[d.jsxs("div",{className:"status-title",children:[d.jsx("span",{style:{marginRight:8},children:E.emoji}),E.title]}),d.jsx("div",{className:v5(b.cycle),children:b.cycleBadge})]}),d.jsx("div",{className:"status-message",children:E.message}),d.jsxs("div",{className:"status-trends",children:[d.jsxs("div",{className:"trend-item",children:[d.jsx("span",{className:"trend-k",children:"Weight"}),d.jsx("span",{className:"trend-v",children:b.weightTrend.sym}),d.jsx("span",{className:"trend-n",children:Number.isFinite(b.weightTrend.value)?`${Tt(b.weightTrend.value,1)} kg/wk`:""})]}),d.jsxs("div",{className:"trend-item",children:[d.jsx("span",{className:"trend-k",children:"Body fat"}),d.jsx("span",{className:"trend-v",children:b.bfTrend.sym}),d.jsx("span",{className:"trend-n",children:Number.isFinite(b.bfTrend.value)?`${Tt(b.bfTrend.value,1)} %`:""})]}),d.jsxs("div",{className:"trend-item",children:[d.jsx("span",{className:"trend-k",children:"Strength"}),d.jsx("span",{className:"trend-v",children:b.strengthTrend.sym}),d.jsx("span",{className:"trend-n",children:Number.isFinite(b.strengthTrend.value)?`${Tt(b.strengthTrend.value,1)} %`:""})]}),Number.isFinite(b.currentAvgCal)&&d.jsxs("div",{className:"trend-item",children:[d.jsx("span",{className:"trend-k",children:"Avg cal"}),d.jsx("span",{className:"trend-v",children:""}),d.jsxs("span",{className:"trend-n",children:[Math.round(b.currentAvgCal)," /day"]})]}),Number.isFinite(b.proteinPerKg)&&d.jsxs("div",{className:"trend-item",children:[d.jsx("span",{className:"trend-k",children:"Protein"}),d.jsx("span",{className:"trend-v",children:""}),d.jsxs("span",{className:"trend-n",children:[Tt(b.proteinPerKg,1)," g/kg"]})]})]}),b.goalProgress&&d.jsxs("div",{className:"status-goal",children:[d.jsxs("div",{className:"status-goal-text",children:["Goal: ",Tt(b.targetWeight,1),"kg  Progress: ",Tt(b.goalProgress.progress,1)," / ",Tt(b.goalProgress.totalNeeded,1),"kg"]}),d.jsx("div",{className:"progress",children:d.jsx("div",{className:"progress-bar",style:{width:`${b.goalProgress.pct}%`}})})]}),!!((A=E.warnings)!=null&&A.length)&&d.jsx("div",{className:"status-warnings",children:E.warnings.map((U,H)=>d.jsx("div",{className:"status-warning",children:U},H))}),!!((S=E.notes)!=null&&S.length)&&d.jsx("div",{className:"status-notes",children:E.notes.map((U,H)=>d.jsx("div",{className:"status-note",children:U},H))})]}),d.jsxs("div",{className:"status-right",children:[d.jsxs("div",{className:"status-controls",children:[d.jsxs("select",{value:String(s),onChange:U=>r(Number(U.target.value)),children:[d.jsx("option",{value:"7",children:"Last 7 days"}),d.jsx("option",{value:"14",children:"Last 14 days"}),d.jsx("option",{value:"30",children:"Last 30 days"})]}),d.jsx("button",{className:"btn small icon",type:"button",onClick:()=>a(!0),"aria-label":"How status is determined",children:""})]}),Number.isFinite(b.calculatedTdee)&&Number.isFinite(b.baselineTdee)&&d.jsxs("div",{className:"status-mini",children:[d.jsx("div",{className:"muted",children:"TDEE"}),d.jsxs("div",{className:"mini-row",children:[d.jsxs("span",{children:[Math.round(b.baselineTdee),"  ",Math.round(b.calculatedTdee)," cal"]}),Number.isFinite(b.adaptationPct)&&d.jsxs("span",{className:"muted",children:["(",Tt(b.adaptationPct,1),"%)"]})]})]}),b.hasNavyAny&&!b.hasNavyInWindow&&d.jsxs("div",{className:"status-mini",children:[d.jsx("div",{className:"muted",children:"Body fat"}),d.jsx("div",{className:"mini-row",children:d.jsx("span",{children:"Take measurements in this period"})})]})]}),o&&d.jsx("div",{className:"modal-backdrop",onClick:()=>a(!1),children:d.jsxs("div",{className:"modal",onClick:U=>U.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("div",{className:"modal-title",children:"How this status is determined"}),d.jsx("button",{className:"btn small",type:"button",onClick:()=>a(!1),children:"Close"})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("p",{className:"muted",children:"Status compares the selected period to the previous period of the same length. Weight uses smoothed trend; calories & protein use raw averages."}),d.jsxs("div",{className:"modal-grid",children:[d.jsxs("div",{children:[d.jsx("div",{className:"modal-subtitle",children:"Weight trend (kg/week)"}),d.jsxs("ul",{className:"modal-list",children:[d.jsxs("li",{children:["Stable: ",Tt(h,2)," or less"]}),d.jsxs("li",{children:["Losing/Gaining: > ",Tt(h,2)]}),d.jsxs("li",{children:["Rapid loss/gain: > ",Tt(f,2)]})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"modal-subtitle",children:"Body fat trend (% points)"}),d.jsxs("ul",{className:"modal-list",children:[d.jsxs("li",{children:["Stable: ",Tt(p,2)," or less"]}),d.jsxs("li",{children:["Decreasing/Increasing: > ",Tt(p,2)]})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"modal-subtitle",children:"Strength trend (% change)"}),d.jsxs("ul",{className:"modal-list",children:[d.jsxs("li",{children:["Stable: ",Tt(m,1),"% or less"]}),d.jsxs("li",{children:["Increasing: > ",Tt(v,1),"%"]}),d.jsxs("li",{children:["Declining: < ",Tt(w,1),"%"]}),d.jsxs("li",{children:["Rapid decline: < ",Tt(x,1),"%"]})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"modal-subtitle",children:"Cycle expectations"}),d.jsxs("ul",{className:"modal-list",children:[d.jsxs("li",{children:[d.jsx("b",{children:"Cutting:"})," Weight , Body fat , Strength "]}),d.jsxs("li",{children:[d.jsx("b",{children:"Bulking:"})," Weight , Strength , Body fat /slight "]}),d.jsxs("li",{children:[d.jsx("b",{children:"Maintaining:"})," Weight , Strength /, Body fat /"]})]})]})]}),d.jsx("p",{className:"muted",style:{marginTop:12},children:"Recommendations use your logged averages and calculated TDEE. If you skip logs (or measurements), the banner will fall back to fewer signals and ask for more data."})]})]})})]})}function b5(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function x5(t){if(!t||typeof t!="string")return"";const e=t.split("-");if(e.length!==3)return t;const[n,i,s]=e;return`${s}/${i}/${n}`}function ns(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function E5(){const t=Gs(),{user:e}=Mn(),{profile:n}=Rc(),i=Array.isArray(n==null?void 0:n.liftNames)&&n.liftNames.length===3?n.liftNames:["Bench Press","Squat","Deadlift"],[s,r]=M.useState([]),o=Array.isArray(n==null?void 0:n.cycles)?n.cycles:[],[a,l]=M.useState(null),[c,h]=M.useState(()=>{try{return localStorage.getItem("brt_demoScenario")||"cutting_optimal"}catch{return"cutting_optimal"}});M.useEffect(()=>{if(!e)try{localStorage.setItem("brt_demoScenario",c)}catch{}},[c,e]),M.useEffect(()=>{if(l(null),!e)return;const j=Gy(e.uid,T=>r(T),T=>l((T==null?void 0:T.message)||"Failed to load entries."));return()=>j()},[e]);const f=M.useMemo(()=>ZF(c),[c]),p=M.useMemo(()=>tV(84,c),[c]),m=M.useMemo(()=>eV(p,c),[p,c]),v=e?n:f,w=e?s:p,x=e?o:m,b=M.useMemo(()=>{if(!(x!=null&&x.length))return null;const j=Zh(),T=x.find(I=>!I.endDateIso);return T||x.find(I=>(I.startDateIso||"")<=j&&(I.endDateIso||"")>=j)||null},[x]);function E(){if(!e){t("/signup");return}t("/profile#cycles")}const k=M.useMemo(()=>dk(w,v||{}),[w,v]),D=M.useMemo(()=>KF(k),[k]),N=M.useMemo(()=>{var L;if(!k.length)return null;const j=k[0],T=k[k.length-1],_=(L=T==null?void 0:T.wma)==null?void 0:L.weight,I=Number.isFinite(j.weight)&&Number.isFinite(T.weight)?T.weight-j.weight:null,P=T.calories,R=j.calories,A=Number.isFinite(P)&&Number.isFinite(R)?P-R:null,S=T.avgStrength,U=j.avgStrength,H=Number.isFinite(S)&&Number.isFinite(U)?S-U:null;let J=null;for(let V=k.length-1;V>=0;V--)if(Number.isFinite(k[V].bfPct)){J=k[V].bfPct;break}return{weightTrend:_,totalLost:I,calNow:P,calDelta:A,strengthNow:S,strengthDelta:H,bf:J}},[k]);return d.jsxs(d.Fragment,{children:[!e&&d.jsx("div",{className:"notice info",style:{marginTop:14},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[d.jsxs("div",{children:[d.jsx("b",{children:"Demo mode:"})," This dashboard is showing ~12 weeks of realistic sample data. Log in to start tracking your own."]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{className:"muted",children:"Scenario"}),d.jsx("select",{className:"input",value:c,onChange:j=>h(j.target.value),style:{height:32,padding:"0 10px",maxWidth:260},children:qF.map(j=>d.jsx("option",{value:j.id,children:j.label},j.id))})]})]})}),e&&(!(v!=null&&v.sex)||!(v!=null&&v.height))&&d.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",d.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),a&&d.jsx("div",{className:"notice error",style:{marginTop:14},children:a}),d.jsx(w5,{derived:k,weekly:D,profile:v,currentCycle:b}),d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Summary"}),d.jsx("button",{className:"btn",type:"button",onClick:E,style:{textTransform:"none"},children:b?`${b5(b.type)}${b.startDateIso?` since ${x5(b.startDateIso)}`:""}`:"Create new cycle"})]}),!N||!k.length?d.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",d.jsx("b",{children:"Entry"}),"."]}):d.jsxs("div",{className:"grid",style:{marginTop:12},children:[d.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[d.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),d.jsxs("div",{className:"big",children:[ns(N.weightTrend,1)," kg"]}),d.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),d.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[d.jsx("div",{className:"card-title",children:"Total weight change"}),d.jsxs("div",{className:"big",children:[ns(N.totalLost,1)," kg"]}),d.jsx("div",{className:"small",children:"Negative = loss"})]}),d.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[d.jsx("div",{className:"card-title",children:"Calories now / change from start"}),d.jsxs("div",{className:"big",children:[ns(N.calNow,0)," kcal"]}),d.jsxs("div",{className:"small",children:[" ",ns(N.calDelta,0)," kcal"]})]}),d.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[d.jsx("div",{className:"card-title",children:"Average strength now"}),d.jsxs("div",{className:"big",children:[ns(N.strengthNow,1)," kg"]}),d.jsxs("div",{className:"small",children:[" ",ns(N.strengthDelta,1)," kg"]})]}),d.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[d.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),d.jsx("div",{className:"big",children:N.bf===null?"":`${ns(N.bf,1)}%`}),d.jsx("div",{className:"small",children:"Most recent measurement day"})]}),d.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[d.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),d.jsx("div",{className:"big",children:Number.isFinite(D.baselineTdee)?`${ns(D.baselineTdee,0)} kcal`:""}),d.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),k.length>0&&d.jsx("div",{className:"grid",style:{marginTop:14},children:d.jsx("div",{style:{gridColumn:"span 12"},children:d.jsx(r5,{derived:k,weekly:D,liftNames:i,cycles:x,currentCycle:b})})}),k.length>=14&&d.jsx(l5,{weekly:D})]})}function e1(t){return`brt_notifications_v1_${t}`}function T5(t){if(!t)return[];try{const e=localStorage.getItem(e1(t));if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}}function tx(t,e){if(t)try{localStorage.setItem(e1(t),JSON.stringify(e))}catch{}}function S5(){const{user:t}=Mn(),e=Gs(),[n,i]=M.useState(()=>T5(t==null?void 0:t.uid)),s=M.useMemo(()=>[...n].sort((a,l)=>((l==null?void 0:l.createdAt)||0)-((a==null?void 0:a.createdAt)||0)),[n]);function r(a){const l=n.filter(c=>c.id!==a);i(l),tx(t==null?void 0:t.uid,l)}function o(){i([]),tx(t==null?void 0:t.uid,[])}return d.jsxs("div",{className:"page",children:[d.jsxs("div",{className:"page-header",children:[d.jsxs("div",{children:[d.jsx("h2",{children:"Notifications"}),d.jsx("div",{className:"small",children:"This is a placeholder for a future notification system."})]}),d.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[d.jsx("button",{className:"btn small",onClick:()=>e("/dashboard"),children:"Back"}),d.jsx("button",{className:"btn small",onClick:o,disabled:s.length===0,children:"Clear all"})]})]}),s.length===0?d.jsx("div",{className:"panel",children:d.jsx("div",{className:"small",children:"No notifications yet."})}):d.jsx("div",{className:"panel",style:{padding:0},children:d.jsxs("table",{className:"table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{style:{width:140},children:"Date"}),d.jsx("th",{children:"Message"}),d.jsx("th",{style:{width:120}})]})}),d.jsx("tbody",{children:s.map(a=>d.jsxs("tr",{children:[d.jsx("td",{className:"small",children:a!=null&&a.createdAt?new Date(a.createdAt).toLocaleDateString():"-"}),d.jsx("td",{children:(a==null?void 0:a.message)||"-"}),d.jsx("td",{style:{textAlign:"right"},children:d.jsx("button",{className:"btn small",onClick:()=>r(a.id),children:"Dismiss"})})]},a.id))})]})})]})}function I5(){const{user:t,login:e,authError:n,clearAuthError:i}=Mn(),s=Gs(),r=qs(),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,f]=M.useState(!1),[p,m]=M.useState(null);M.useEffect(()=>{i==null||i()},[]),M.useEffect(()=>{t&&s("/dashboard")},[t]);async function v(w){var x;w.preventDefault(),m(null),f(!0);try{await e(o.trim(),l);const b=((x=r.state)==null?void 0:x.from)||"/dashboard";s(b)}catch{}finally{f(!1)}}return d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Log in"}),d.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&d.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),p&&d.jsx("div",{className:"notice info",style:{marginTop:12},children:p}),d.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"email",required:!0})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Password"}),d.jsx("input",{value:l,onChange:w=>c(w.target.value),type:"password",required:!0})]})]}),d.jsxs("div",{className:"footer-actions",children:[d.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),d.jsx(ql,{className:"btn",to:"/reset-password",children:"Forgot password"}),d.jsx(ql,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function k5(){const{signup:t,authError:e,clearAuthError:n}=Mn(),i=Gs(),[s,r]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,f]=M.useState(!1),[p,m]=M.useState(null);M.useEffect(()=>{n==null||n()},[]);async function v(w){if(w.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}f(!0);try{await t(s.trim(),o),i("/profile?setup=1")}catch{}finally{f(!1)}}return d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Create account"}),d.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&d.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),p&&d.jsx("div",{className:`notice ${p.type==="error"?"error":"info"}`,style:{marginTop:12},children:p.text}),d.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{value:s,onChange:w=>r(w.target.value),type:"email",required:!0})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Password"}),d.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"password",required:!0})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Confirm password"}),d.jsx("input",{value:l,onChange:w=>c(w.target.value),type:"password",required:!0})]})]}),d.jsxs("div",{className:"footer-actions",children:[d.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),d.jsx(ql,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function C5(){const{resetPassword:t,authError:e,clearAuthError:n}=Mn(),[i,s]=M.useState(""),[r,o]=M.useState(!1),[a,l]=M.useState(!1);M.useEffect(()=>{n==null||n()},[]);async function c(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Reset password"}),d.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&d.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&d.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),d.jsxs("form",{onSubmit:c,style:{marginTop:12},children:[d.jsx("div",{className:"row",children:d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{value:i,onChange:h=>s(h.target.value),type:"email",required:!0})]})}),d.jsxs("div",{className:"footer-actions",children:[d.jsx("button",{className:"btn primary",disabled:r,children:r?"Sending":"Send reset email"}),d.jsx(ql,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function A5(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function P5(t,e){const n=e.map(o=>o.map(A5).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(i),r=document.createElement("a");r.href=s,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(s)}function N5({entries:t,derived:e}){var r,o,a,l,c,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchLoadKg","benchReps","bench1rmKg","squatLoadKg","squatReps","squat1rmKg","deadliftLoadKg","deadliftReps","deadlift1rmKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(f=>[f.dateIso,f])),s=[n];for(const f of t||[]){const p=i.get(f.dateIso);s.push([f.dateIso,f.weight,f.protein,f.carbs,f.fats,f.benchLoad,f.benchReps,f.bench,f.squatLoad,f.squatReps,f.squat,f.deadliftLoad,f.deadliftReps,f.deadlift,p==null?void 0:p.calories,p==null?void 0:p.avgStrength,(r=p==null?void 0:p.wma)==null?void 0:r.weight,(o=p==null?void 0:p.wma)==null?void 0:o.calories,(a=p==null?void 0:p.wma)==null?void 0:a.avgStrength,(l=p==null?void 0:p.wma)==null?void 0:l.bench,(c=p==null?void 0:p.wma)==null?void 0:c.squat,(h=p==null?void 0:p.wma)==null?void 0:h.deadlift,f.neck,f.waist,f.hip,f.neck1,f.neck2,f.neck3,f.waist1,f.waist2,f.waist3,f.hip1,f.hip2,f.hip3,p==null?void 0:p.bfPct,p==null?void 0:p.lbm])}return s}function t1(t){return["cutting","bulking","maintaining","cut","bulk","maintain"].includes(t)}function n1(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function i1(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:n1(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).filter(e=>t1(e.type)).sort((e,n)=>String(e.startDateIso||"").localeCompare(String(n.startDateIso||""))):[]}function R5(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}async function D5(t,{type:e,startDateIso:n,targetWeightKg:i}){if(!t)throw new Error("Not authenticated");if(!t1(e))throw new Error("Invalid cycle type");if(e=n1(e),!n)throw new Error("Start date is required");let s=null;if((e==="cutting"||e==="bulking")&&(s=Number(i),!Number.isFinite(s)||s<=0))throw new Error("Cycle target weight must be a positive number (kg).");const r=Qn(Ct,"users",t);await FI(Ct,async o=>{const a=await o.get(r);if(!a.exists())throw new Error("Profile not found. Please refresh and try again.");const l=a.data()||{},h=i1(l.cycles).map(p=>({...p})),f=h.findIndex(p=>p.endDateIso===null);if(f>=0){const p=h[f];let m=OF(n,-1);p.startDateIso&&m<p.startDateIso&&(m=p.startDateIso),h[f]={...p,endDateIso:m}}h.push({id:R5(),type:e,startDateIso:n,endDateIso:null,targetWeightKg:s}),o.update(r,{cycles:h,updatedAt:fa()})})}async function M5(t,e,n){if(!t)throw new Error("Not authenticated");if(!e)throw new Error("cycleId is required");if(!n)throw new Error("End date is required");const i=Qn(Ct,"users",t);await FI(Ct,async s=>{const r=await s.get(i);if(!r.exists())throw new Error("Profile not found. Please refresh and try again.");const o=r.data()||{},a=i1(o.cycles),l=a.findIndex(h=>h.id===e);if(l<0)throw new Error("Cycle not found.");const c=a.map(h=>({...h}));c[l]={...c[l],endDateIso:n},s.update(i,{cycles:c,updatedAt:fa()})})}const oo=["Bench Press","Squat","Deadlift"];function hp(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function j5(){const{user:t}=Mn(),e=qs(),{profile:n,updateProfile:i,loading:s,profileError:r}=Rc(),[o,a]=M.useState(n.sex||""),[l,c]=M.useState(n.height||""),[h,f]=M.useState(!!n.triplemeasurements),p=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:oo,[m,v]=M.useState(p[0]),[w,x]=M.useState(p[1]),[b,E]=M.useState(p[2]),k=M.useMemo(()=>[m,w,b].map((pe,Oe)=>String(pe||"").trim()||oo[Oe]),[m,w,b]),[D,N]=M.useState(!1),[j,T]=M.useState(null),[_,I]=M.useState(""),[P,R]=M.useState(""),[A,S]=M.useState(""),U=M.useMemo(()=>Array.isArray(n.cycles)?[...n.cycles].sort((Z,pe)=>String(pe.startDateIso||"").localeCompare(String(Z.startDateIso||""))):[],[n.cycles]),[H,J]=M.useState("cutting"),[L,V]=M.useState(Zh()),[Q,te]=M.useState("");M.useEffect(()=>{H==="maintaining"&&te("")},[H]);const z=M.useMemo(()=>U.find(Z=>!Z.endDateIso)||null,[U]),[W,q]=M.useState([]),[se,ue]=M.useState(!1);M.useEffect(()=>{a(n.sex||""),c(n.height||""),f(!!n.triplemeasurements);const Z=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:oo;v(Z[0]),x(Z[1]),E(Z[2])},[n.sex,n.height,n.triplemeasurements,n.liftNames]),M.useEffect(()=>{(e==null?void 0:e.hash)==="#cycles"&&setTimeout(()=>{var Z;(Z=document.getElementById("cycles"))==null||Z.scrollIntoView({behavior:"smooth",block:"start"})},50)},[e==null?void 0:e.hash]);async function Y(Z){Z.preventDefault(),T(null),N(!0);try{const pe=Number(l);if(!o)throw new Error("Sex is required.");if(!Number.isFinite(pe)||pe<=0)throw new Error("Height must be a positive number (cm).");await i({sex:o,height:pe,triplemeasurements:!!h,liftNames:k}),T({type:"success",text:"Profile saved."})}catch(pe){T({type:"error",text:(pe==null?void 0:pe.message)||"Failed to save profile."})}finally{N(!1)}}async function Ee(Z){var pe;Z.preventDefault(),T(null),N(!0);try{if(!H)throw new Error("Pick a cycle type.");if(!L)throw new Error("Pick a start date.");const Ye=(pe=[...await Ae()||[]].reverse().find(Ve=>Number.isFinite(Number(Ve==null?void 0:Ve.weight))))==null?void 0:pe.weight;if(H==="cutting"||H==="bulking"){const Ve=Number(Q);if(!Number.isFinite(Ve)||Ve<=0)throw new Error("Enter a valid target weight (kg).");if(Number.isFinite(Number(Ye))){if(H==="cutting"&&Ve>=Number(Ye))throw new Error("For a cutting cycle, target weight must be lower than your current weight.");if(H==="bulking"&&Ve<=Number(Ye))throw new Error("For a bulking cycle, target weight must be higher than your current weight.")}}const ze=H==="cutting"||H==="bulking"?Number(Q):null;await D5(t.uid,{type:H,startDateIso:L,targetWeightKg:ze}),te(""),T({type:"success",text:`Cycle started: ${hp(H)}.`})}catch(Oe){T({type:"error",text:(Oe==null?void 0:Oe.message)||"Failed to start cycle."})}finally{N(!1)}}async function je(Z){T(null),N(!0);try{await M5(t.uid,Z,Zh()),T({type:"success",text:"Cycle ended."})}catch(pe){T({type:"error",text:(pe==null?void 0:pe.message)||"Failed to end cycle."})}finally{N(!1)}}async function lt(Z){if(Z.preventDefault(),T(null),!!(t!=null&&t.email)){if(P!==A){T({type:"error",text:"New passwords do not match."});return}N(!0);try{const pe=Hr.credential(t.email,_);await jD(t,pe),await VD(t,P),I(""),R(""),S(""),T({type:"success",text:"Password updated."})}catch(pe){T({type:"error",text:(pe==null?void 0:pe.message)||"Failed to update password."})}finally{N(!1)}}}async function Ae(){return se?W:new Promise((Z,pe)=>{const Oe=Gy(t.uid,Ye=>{q(Ye),ue(!0),Oe(),Z(Ye)},Ye=>{pe(Ye)})})}async function We(){T(null),N(!0);try{await Ae();const Z=dk(W,{...n,sex:o,height:Number(l),triplemeasurements:!!h}),pe=N5({entries:W,derived:Z}),Oe=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;P5(Oe,pe),T({type:"success",text:"CSV downloaded."})}catch(Z){T({type:"error",text:(Z==null?void 0:Z.message)||"Failed to export CSV."})}finally{N(!1)}}return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Profile & Settings"}),d.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),r&&d.jsx("div",{className:"notice error",style:{marginTop:12},children:r}),j&&d.jsx("div",{className:`notice ${j.type==="error"?"error":"success"}`,style:{marginTop:12},children:j.text}),d.jsxs("form",{onSubmit:Y,style:{marginTop:12},children:[d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Sex (required for Navy BF%)"}),d.jsxs("select",{value:o,onChange:Z=>a(Z.target.value),required:!0,children:[d.jsx("option",{value:"",children:"Select"}),d.jsx("option",{value:"male",children:"Male"}),d.jsx("option",{value:"female",children:"Female"})]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Height (cm)"}),d.jsx("input",{inputMode:"numeric",value:l,onChange:Z=>c(Z.target.value),placeholder:"e.g. 175",required:!0})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Triple measurements mode"}),d.jsxs("select",{value:h?"1":"0",onChange:Z=>f(Z.target.value==="1"),children:[d.jsx("option",{value:"0",children:"Off (single value per site)"}),d.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),d.jsxs("div",{className:"grid",style:{marginTop:12},children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Lift 1 name"}),d.jsx("input",{value:m,onChange:Z=>v(Z.target.value),placeholder:oo[0]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Lift 2 name"}),d.jsx("input",{value:w,onChange:Z=>x(Z.target.value),placeholder:oo[1]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Lift 3 name"}),d.jsx("input",{value:b,onChange:Z=>E(Z.target.value),placeholder:oo[2]})]})]}),d.jsxs("div",{className:"footer-actions",children:[d.jsx("button",{className:"btn primary",disabled:D||s,children:D?"Saving":"Save profile"}),d.jsx("button",{className:"btn",type:"button",onClick:We,disabled:D,children:"Export CSV"})]})]})]}),d.jsxs("div",{className:"panel",id:"cycles",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Cycles"}),d.jsx("div",{className:"muted",children:"Cutting / Bulking / Maintaining  track your phases over time."})]}),d.jsxs("form",{onSubmit:Ee,style:{marginTop:12},children:[d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Cycle type"}),d.jsxs("select",{value:H,onChange:Z=>J(Z.target.value),children:[d.jsx("option",{value:"cutting",children:"Cutting"}),d.jsx("option",{value:"bulking",children:"Bulking"}),d.jsx("option",{value:"maintaining",children:"Maintaining"})]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Start date"}),d.jsx("input",{type:"date",value:L,onChange:Z=>V(Z.target.value)})]}),(H==="cutting"||H==="bulking")&&d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Target weight (kg)"}),d.jsx("input",{inputMode:"decimal",value:Q,onChange:Z=>te(Z.target.value),placeholder:"e.g. 82.0"})]}),d.jsxs("div",{className:"field",style:{minWidth:220},children:[d.jsx("label",{children:"Current"}),d.jsx("input",{value:z?`${hp(z.type)} (since ${z.startDateIso})${(z.type==="cutting"||z.type==="bulking")&&Number.isFinite(Number(z.targetWeightKg))?`  target ${Number(z.targetWeightKg).toFixed(1)}kg`:""}`:"No active cycle",readOnly:!0})]})]}),d.jsxs("div",{className:"footer-actions",children:[d.jsx("button",{className:"btn primary",disabled:D,children:z?"Start new cycle (ends current)":"Start cycle"}),z&&d.jsx("button",{className:"btn",type:"button",onClick:()=>je(z.id),disabled:D,children:"End current cycle (today)"})]})]}),d.jsx("hr",{className:"sep"}),d.jsx("div",{className:"table-wrap",children:d.jsxs("table",{className:"table",style:{minWidth:760},children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Type"}),d.jsx("th",{children:"Target (kg)"}),d.jsx("th",{children:"Began"}),d.jsx("th",{children:"Ended"}),d.jsx("th",{children:"Status"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:U.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"muted",children:"No cycles yet. Start one above."})}):U.map(Z=>{const pe=!Z.endDateIso;return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("b",{children:hp(Z.type)})}),d.jsx("td",{children:(Z.type==="cutting"||Z.type==="bulking")&&Number.isFinite(Number(Z.targetWeightKg))?Number(Z.targetWeightKg).toFixed(1):""}),d.jsx("td",{children:Z.startDateIso||""}),d.jsx("td",{children:Z.endDateIso||""}),d.jsx("td",{children:pe?d.jsx("span",{className:"text-green strong",children:"Active"}):d.jsx("span",{className:"muted",children:"Ended"})}),d.jsx("td",{children:pe?d.jsx("button",{className:"btn",type:"button",onClick:()=>je(Z.id),disabled:D,children:"End today"}):d.jsx("span",{className:"muted",children:""})})]},Z.id)})})]})})]}),d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Change Password"}),d.jsx("div",{className:"muted",children:"Re-auth required."})]}),d.jsxs("form",{onSubmit:lt,style:{marginTop:12},children:[d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Current password"}),d.jsx("input",{type:"password",value:_,onChange:Z=>I(Z.target.value),required:!0})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"New password"}),d.jsx("input",{type:"password",value:P,onChange:Z=>R(Z.target.value),required:!0})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Confirm new password"}),d.jsx("input",{type:"password",value:A,onChange:Z=>S(Z.target.value),required:!0})]})]}),d.jsx("div",{className:"footer-actions",children:d.jsx("button",{className:"btn primary",disabled:D,children:"Update password"})})]})]})]})}function Kt(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function O5({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:s}){const r=String(t||"").toLowerCase()==="female",[o,a]=M.useState(Zh()),[l,c]=M.useState(""),[h,f]=M.useState(""),[p,m]=M.useState(""),[v,w]=M.useState(""),[x,b]=M.useState(""),[E,k]=M.useState(""),[D,N]=M.useState(""),[j,T]=M.useState(""),[_,I]=M.useState(""),[P,R]=M.useState(""),[A,S]=M.useState(""),[U,H]=M.useState(""),[J,L]=M.useState(""),[V,Q]=M.useState(""),[te,z]=M.useState(""),[W,q]=M.useState(""),[se,ue]=M.useState(""),[Y,Ee]=M.useState(""),[je,lt]=M.useState(""),[Ae,We]=M.useState(""),[Z,pe]=M.useState(""),[Oe,Ye]=M.useState(""),ze=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],Ve=M.useMemo(()=>{const ee=hk({protein:Kt(h)||0,carbs:Kt(p)||0,fats:Kt(v)||0});return Number.isFinite(ee)?Math.round(ee):0},[h,p,v]),bn=M.useMemo(()=>fr(Kt(x),Kt(E)),[x,E]),Ht=M.useMemo(()=>fr(Kt(D),Kt(j)),[D,j]),ft=M.useMemo(()=>fr(Kt(_),Kt(P)),[_,P]),ln=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(p))&&Number.isFinite(Number(v));async function cn(ee){if(ee.preventDefault(),!ln())return;const F=fr(Kt(x),Kt(E)),ce=fr(Kt(D),Kt(j)),re=fr(Kt(_),Kt(P)),he={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(p),fats:Number(v),benchLoad:x===""?null:Number(x),benchReps:E===""?null:Number(E),squatLoad:D===""?null:Number(D),squatReps:j===""?null:Number(j),deadliftLoad:_===""?null:Number(_),deadliftReps:P===""?null:Number(P),bench:Number.isFinite(F)?Math.round(F*10)/10:null,squat:Number.isFinite(ce)?Math.round(ce*10)/10:null,deadlift:Number.isFinite(re)?Math.round(re*10)/10:null};e?(he.neck1=V===""?null:Number(V),he.neck2=te===""?null:Number(te),he.neck3=W===""?null:Number(W),he.waist1=se===""?null:Number(se),he.waist2=Y===""?null:Number(Y),he.waist3=je===""?null:Number(je),he.hip1=r?Ae===""?null:Number(Ae):null,he.hip2=r?Z===""?null:Number(Z):null,he.hip3=r?Oe===""?null:Number(Oe):null):(he.neck=A===""?null:Number(A),he.waist=U===""?null:Number(U),he.hip=r?J===""?null:Number(J):null),await i(he)}return d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"Daily Entry"}),d.jsxs("div",{className:"muted",children:["Calories preview: ",d.jsx("b",{children:Ve})," kcal"]})]}),d.jsxs("form",{onSubmit:cn,style:{marginTop:12},children:[d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Date"}),d.jsx("input",{type:"date",value:o,onChange:ee=>a(ee.target.value)})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Weight (kg)"}),d.jsx("input",{inputMode:"decimal",value:l,onChange:ee=>c(ee.target.value),placeholder:"e.g. 85.2",required:!0})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Protein (g)"}),d.jsx("input",{inputMode:"numeric",value:h,onChange:ee=>f(ee.target.value),placeholder:"e.g. 180"})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Carbs (g)"}),d.jsx("input",{inputMode:"numeric",value:p,onChange:ee=>m(ee.target.value),placeholder:"e.g. 220",required:!0})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Fats (g)"}),d.jsx("input",{inputMode:"numeric",value:v,onChange:ee=>w(ee.target.value),placeholder:"e.g. 70",required:!0})]})]}),d.jsx("hr",{className:"sep"}),d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsxs("label",{children:[ze[0]," ",d.jsx("span",{className:"muted",children:"(optional)"})]}),d.jsxs("div",{className:"inline2",children:[d.jsx("input",{inputMode:"decimal",value:x,onChange:ee=>b(ee.target.value),placeholder:"Load (kg)"}),d.jsx("input",{inputMode:"numeric",value:E,onChange:ee=>k(ee.target.value),placeholder:"Reps"})]}),d.jsxs("div",{className:"muted small",children:["Est. 1RM: ",d.jsx("b",{children:Number.isFinite(bn)?Math.round(bn*10)/10:""})," kg"]})]}),d.jsxs("div",{className:"field",children:[d.jsxs("label",{children:[ze[1]," ",d.jsx("span",{className:"muted",children:"(optional)"})]}),d.jsxs("div",{className:"inline2",children:[d.jsx("input",{inputMode:"decimal",value:D,onChange:ee=>N(ee.target.value),placeholder:"Load (kg)"}),d.jsx("input",{inputMode:"numeric",value:j,onChange:ee=>T(ee.target.value),placeholder:"Reps"})]}),d.jsxs("div",{className:"muted small",children:["Est. 1RM: ",d.jsx("b",{children:Number.isFinite(Ht)?Math.round(Ht*10)/10:""})," kg"]})]}),d.jsxs("div",{className:"field",children:[d.jsxs("label",{children:[ze[2]," ",d.jsx("span",{className:"muted",children:"(optional)"})]}),d.jsxs("div",{className:"inline2",children:[d.jsx("input",{inputMode:"decimal",value:_,onChange:ee=>I(ee.target.value),placeholder:"Load (kg)"}),d.jsx("input",{inputMode:"numeric",value:P,onChange:ee=>R(ee.target.value),placeholder:"Reps"})]}),d.jsxs("div",{className:"muted small",children:["Est. 1RM: ",d.jsx("b",{children:Number.isFinite(ft)?Math.round(ft*10)/10:""})," kg"]})]})]}),d.jsx("div",{className:"muted small",style:{marginTop:6},children:"Enter both load + reps to calculate 1RM. If left blank, strength trends will carry forward the last known value."}),d.jsx("hr",{className:"sep"}),d.jsxs("div",{className:"notice info",children:[d.jsx("b",{children:"Navy measurements (weekly)"}),d.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",r?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),d.jsx("div",{style:{height:10}}),e?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Neck 1 (cm)"}),d.jsx("input",{inputMode:"decimal",value:V,onChange:ee=>Q(ee.target.value)})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Neck 2 (cm)"}),d.jsx("input",{inputMode:"decimal",value:te,onChange:ee=>z(ee.target.value)})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Neck 3 (cm)"}),d.jsx("input",{inputMode:"decimal",value:W,onChange:ee=>q(ee.target.value)})]})]}),d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Waist 1 (cm)"}),d.jsx("input",{inputMode:"decimal",value:se,onChange:ee=>ue(ee.target.value)})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Waist 2 (cm)"}),d.jsx("input",{inputMode:"decimal",value:Y,onChange:ee=>Ee(ee.target.value)})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Waist 3 (cm)"}),d.jsx("input",{inputMode:"decimal",value:je,onChange:ee=>lt(ee.target.value)})]})]}),r?d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Hip 1 (cm)"}),d.jsx("input",{inputMode:"decimal",value:Ae,onChange:ee=>We(ee.target.value)})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Hip 2 (cm)"}),d.jsx("input",{inputMode:"decimal",value:Z,onChange:ee=>pe(ee.target.value)})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Hip 3 (cm)"}),d.jsx("input",{inputMode:"decimal",value:Oe,onChange:ee=>Ye(ee.target.value)})]})]}):null]}):d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Neck (cm)"}),d.jsx("input",{inputMode:"decimal",value:A,onChange:ee=>S(ee.target.value),placeholder:"optional"})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Waist (cm)"}),d.jsx("input",{inputMode:"decimal",value:U,onChange:ee=>H(ee.target.value),placeholder:"optional"})]}),r?d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Hip (cm)"}),d.jsx("input",{inputMode:"decimal",value:J,onChange:ee=>L(ee.target.value),placeholder:"optional"})]}):null]}),d.jsx("div",{className:"footer-actions",children:d.jsx("button",{className:"btn primary",type:"submit",disabled:!ln()||s,children:s?"Saving":"Add / Update Entry"})})]})]})}function L5(t,e){const n=M.useContext(_i),i=n==null?void 0:n.navigator;M.useEffect(()=>{if(!t||!i||typeof i.block!="function")return;const s=i.block(r=>{window.confirm(e)&&(s(),r.retry())});return s},[i,t,e]),M.useEffect(()=>{if(!t)return;const s=r=>(r.preventDefault(),r.returnValue=e,e);return window.addEventListener("beforeunload",s),()=>window.removeEventListener("beforeunload",s)},[t,e])}function F5(t){return t==null?"":String(t)}function V5(t){if(t===""||t===null||t===void 0)return null;const e=Number(t);return Number.isFinite(e)?e:null}function ju(t,e){return`${t}::${e}`}function B5({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:s}){const[r,o]=M.useState(!1),[a,l]=M.useState(null),[c,h]=M.useState(!1),[f,p]=M.useState({}),[m,v]=M.useState({}),[w,x]=M.useState([]),[b,E]=M.useState([]),k=M.useRef({}),D=String(t||"").toLowerCase()==="female",N=Array.isArray(s)&&s.length===3?s:["Bench Press","Squat","Deadlift"],j=M.useMemo(()=>{const z=new Map;for(const W of n||[])z.set(W.dateIso,W);return z},[n]);M.useEffect(()=>{const z=new Set((n||[]).map(W=>W.dateIso));p(W=>{const q={...W};let se=!1;for(const ue of Object.keys(q)){const[Y]=ue.split("::");z.has(Y)||(delete q[ue],se=!0)}return se?q:W}),v(W=>{const q={...W};let se=!1;for(const ue of Object.keys(q)){const[Y]=ue.split("::");z.has(Y)||(delete q[ue],se=!0)}return se?q:W})},[n]);const T=M.useMemo(()=>{const z=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"benchLoad",label:`${N[0]} Load`},{key:"benchReps",label:`${N[0]} Reps`},{key:"squatLoad",label:`${N[1]} Load`},{key:"squatReps",label:`${N[1]} Reps`},{key:"deadliftLoad",label:`${N[2]} Load`},{key:"deadliftReps",label:`${N[2]} Reps`}];return i?(z.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),D&&z.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):(z.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),D&&z.push({key:"hip",label:"Hip"})),z.push({key:"_actions",label:"Actions",readOnly:!0}),z},[i,D,N]);function _(z,W){const q=j.get(z);return F5(q==null?void 0:q[W])}function I(z,W){const q=ju(z,W);return Object.prototype.hasOwnProperty.call(f,q)?f[q]:_(z,W)}function P(z,W,q){if(!c)return;const se=ju(z,W),ue=_(z,W);p(Y=>{const Ee={...Y};return q===ue?Object.prototype.hasOwnProperty.call(Ee,se)&&delete Ee[se]:Ee[se]=q,Ee}),v(Y=>{const Ee={...Y};return q===ue?Object.prototype.hasOwnProperty.call(Ee,se)&&delete Ee[se]:Ee[se]=!0,Ee})}function R(z,W){const q=ju(z,W);k.current[q]=I(z,W)}function A(z,W){const q=ju(z,W),se=k.current[q];delete k.current[q];const ue=I(z,W);se!==void 0&&se!==ue&&(x(Y=>[...Y,{ck:q,dateIso:z,key:W,prev:se,next:ue}]),E([]))}function S(z,W){P(z.dateIso,z.key,W)}function U(){c&&(l(null),x(z=>{if(z.length===0)return z;const W=[...z],q=W.pop();return S(q,q.prev),E(se=>[...se,q]),W}))}function H(){c&&(l(null),E(z=>{if(z.length===0)return z;const W=[...z],q=W.pop();return S(q,q.next),x(se=>[...se,q]),W}))}function J(z,W){const q=fr(z,W);return Number.isFinite(q)?Math.round(q*10)/10:null}async function L(){const z=Object.keys(m||{});if(z.length!==0){l(null),o(!0);try{const W={};for(const se of z){const[ue,Y]=se.split("::"),Ee=I(ue,Y),je=V5(Ee);W[ue]||(W[ue]={}),W[ue][Y]=je}for(const se of Object.keys(W)){const ue=j.get(se)||{},Y=W[se],Ee=Object.prototype.hasOwnProperty.call(Y,"benchLoad")||Object.prototype.hasOwnProperty.call(Y,"benchReps"),je=Object.prototype.hasOwnProperty.call(Y,"squatLoad")||Object.prototype.hasOwnProperty.call(Y,"squatReps"),lt=Object.prototype.hasOwnProperty.call(Y,"deadliftLoad")||Object.prototype.hasOwnProperty.call(Y,"deadliftReps");if(Ee){const Ae=Object.prototype.hasOwnProperty.call(Y,"benchLoad")?Y.benchLoad:ue.benchLoad??null,We=Object.prototype.hasOwnProperty.call(Y,"benchReps")?Y.benchReps:ue.benchReps??null;Y.bench=J(Ae,We)}if(je){const Ae=Object.prototype.hasOwnProperty.call(Y,"squatLoad")?Y.squatLoad:ue.squatLoad??null,We=Object.prototype.hasOwnProperty.call(Y,"squatReps")?Y.squatReps:ue.squatReps??null;Y.squat=J(Ae,We)}if(lt){const Ae=Object.prototype.hasOwnProperty.call(Y,"deadliftLoad")?Y.deadliftLoad:ue.deadliftLoad??null,We=Object.prototype.hasOwnProperty.call(Y,"deadliftReps")?Y.deadliftReps:ue.deadliftReps??null;Y.deadlift=J(Ae,We)}}const q=Object.keys(W).map(se=>({dateIso:se,patch:W[se]}));await VF(e,q),p({}),v({}),x([]),E([]),l({type:"success",text:"Saved changes."}),h(!1)}catch(W){l({type:"error",text:(W==null?void 0:W.message)||"Failed to save changes."})}finally{o(!1)}}}async function V(z){if(confirm(`Delete entry for ${z}?`)){l(null),o(!0);try{await BF(e,z),p(W=>{const q={...W};for(const se of Object.keys(q))se.startsWith(`${z}::`)&&delete q[se];return q}),v(W=>{const q={...W};for(const se of Object.keys(q))se.startsWith(`${z}::`)&&delete q[se];return q}),l({type:"success",text:"Deleted."})}catch(W){l({type:"error",text:(W==null?void 0:W.message)||"Failed to delete."})}finally{o(!1)}}}const Q=Object.keys(m||{}).length>0;L5(c&&Q,"You have unsaved changes. Leave without saving?");function te(){h(!1),p({}),v({}),x([]),E([]),l(null)}return d.jsxs("div",{className:"panel",children:[d.jsxs("div",{className:"panel-header",children:[d.jsx("h2",{children:"All Entries"}),d.jsxs("div",{className:"table-actions",children:[d.jsx("button",{className:"btn icon small",onClick:U,disabled:!c||w.length===0||r,title:"Undo","aria-label":"Undo",children:""}),d.jsx("button",{className:"btn icon small",onClick:H,disabled:!c||b.length===0||r,title:"Redo","aria-label":"Redo",children:""}),c?Q?d.jsx("button",{className:"btn primary small",onClick:L,disabled:!Q||r,children:r?"saving":"save"}):d.jsx("button",{className:"btn primary small",onClick:te,disabled:r,children:"cancel"}):d.jsx("button",{className:"btn primary small",onClick:()=>h(!0),disabled:r,children:"edit"})]})]}),a&&d.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:12},children:a.text}),d.jsx("div",{className:"table-wrap",style:{marginTop:12},children:d.jsxs("table",{className:"table",children:[d.jsx("thead",{children:d.jsx("tr",{children:T.map(z=>d.jsx("th",{children:z.label},z.key))})}),d.jsx("tbody",{children:n.map(z=>d.jsx("tr",{children:T.map(W=>W.key==="_actions"?d.jsx("td",{children:d.jsx("button",{className:"btn danger",onClick:()=>V(z.dateIso),disabled:r,children:"Delete"})},W.key):W.readOnly?d.jsx("td",{children:z[W.key]},W.key):d.jsx("td",{children:c?d.jsx("input",{value:I(z.dateIso,W.key),onChange:q=>P(z.dateIso,W.key,q.target.value),onFocus:()=>R(z.dateIso,W.key),onBlur:()=>A(z.dateIso,W.key),inputMode:"decimal",disabled:r}):d.jsx("span",{children:I(z.dateIso,W.key)})},W.key))},z.dateIso))})]})})]})}function U5(){const{user:t}=Mn(),{profile:e}=Rc(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,s]=M.useState([]),[r,o]=M.useState(!1),[a,l]=M.useState(null);M.useEffect(()=>{if(!t)return;const p=Gy(t.uid,m=>s(m),m=>l({type:"error",text:(m==null?void 0:m.message)||"Failed to load entries."}));return()=>p()},[t]);const c=M.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function f(p){l(null),o(!0);try{await FF(t.uid,p),l({type:"success",text:"Entry saved."})}catch(m){l({type:"error",text:(m==null?void 0:m.message)||"Failed to save entry."})}finally{o(!1)}}return d.jsxs(d.Fragment,{children:[a&&d.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),d.jsx(O5,{sex:h,tripleEnabled:c,liftNames:n,onSubmit:f,busy:r}),d.jsx(B5,{sex:h,userId:t.uid,entries:i,tripleEnabled:c,liftNames:n})]})}function W5(t){const e=[];if(!t||typeof t!="object")return["Config must be a JSON object."];if(typeof t.version!="number"&&e.push("Missing or invalid: version (number)."),(!t.thresholds||typeof t.thresholds!="object")&&e.push("Missing or invalid: thresholds (object)."),!Array.isArray(t.statusRules))e.push("Missing or invalid: statusRules (array).");else{const n=new Set;t.statusRules.forEach((i,s)=>{if(!i||typeof i!="object"){e.push(`statusRules[${s}] must be an object.`);return}(!i.id||typeof i.id!="string")&&e.push(`statusRules[${s}] missing id (string).`),i.id&&n.has(i.id)&&e.push(`Duplicate rule id: ${i.id}`),i.id&&n.add(i.id),(!i.level||typeof i.level!="string")&&e.push(`statusRules[${s}] missing level (string).`),(!i.title||typeof i.title!="string")&&e.push(`statusRules[${s}] missing title (string).`),(!i.emoji||typeof i.emoji!="string")&&e.push(`statusRules[${s}] missing emoji (string).`),typeof i.priority!="number"&&e.push(`statusRules[${s}] missing priority (number).`),typeof i.when>"u"&&e.push(`statusRules[${s}] missing when (expression).`),typeof i.message>"u"&&e.push(`statusRules[${s}] missing message.`)})}return e}const z5=[{value:"user",label:"Standard"},{value:"admin",label:"Administrator"}];function $5(t){return(t==null?void 0:t.accountType)==="admin"||t!=null&&t.isAdmin?"admin":"user"}function oe(t,e,n=void 0){if(!t)return n;const i=String(e).split(".");let s=t;for(const r of i){if(s==null)return n;s=s[r]}return s===void 0?n:s}function dp(t,e,n){const i=String(e).split("."),s=Array.isArray(t)?t.slice():{...t||{}};let r=s;for(let o=0;o<i.length;o+=1){const a=i[o];if(o===i.length-1){r[a]=n;break}const l=r[a];r[a]=Array.isArray(l)?l.slice():{...l||{}},r=r[a]}return s}function H5(t){if(!t)return"";try{const e=typeof t.toDate=="function"?t.toDate():new Date(t);return!e||Number.isNaN(e.getTime())?"":e.toLocaleString()}catch{return""}}function K5(){const{user:t}=Mn(),{profile:e,loading:n}=Rc(),i=Gs(),[s,r]=M.useState([]),[o,a]=M.useState(!0),[l,c]=M.useState(null),[h,f]=M.useState(!1),[p,m]=M.useState({}),[v,w]=M.useState(null),[x,b]=M.useState(!1),[E,k]=M.useState(null),D=!!(e!=null&&e.isAdmin)||(e==null?void 0:e.accountType)==="admin",[N,j]=M.useState(ye),[T,_]=M.useState(()=>JSON.stringify(ye,null,2)),[I,P]=M.useState(!1),[R,A]=M.useState(!1),[S,U]=M.useState(null),[H,J]=M.useState(null),[L,V]=M.useState(ye),[Q,te]=M.useState(null),[z,W]=M.useState("thresholds"),q=M.useMemo(()=>cd(ye,N||{}),[N]),se=M.useMemo(()=>W5(q),[q]);function ue(F,{markDirty:ce}={markDirty:!0}){j(F),_(JSON.stringify(F,null,2)),te(null),P(!!ce)}function Y(F,ce){const re=ce===""?null:Number(ce);if(ce!==""&&!Number.isFinite(re))return;const he=dp(N,F,re);ue(he,{markDirty:!0})}function Ee(F,ce){const re=dp(N,F,!!ce);ue(re,{markDirty:!0})}function je(F,ce){const re=dp(N,F,ce);ue(re,{markDirty:!0})}function lt(F,ce){const re=Array.isArray(N==null?void 0:N.statusRules)?N.statusRules.slice():[];if(!re[F])return;re[F]={...re[F],...ce};const he={...N,statusRules:re};ue(he,{markDirty:!0})}M.useEffect(()=>{if(!t||n)return;if(!D){r([]),a(!1),c(null);return}a(!0),c(null);const F=nL(AI(Ct,"users"),iL("email","asc")),ce=sc(F,re=>{const he=re.docs.map(ct=>({id:ct.id,...ct.data()}));r(he),a(!1)},re=>{c((re==null?void 0:re.message)||String(re)),a(!1)});return()=>ce()},[t,D,n]),M.useEffect(()=>{if(!t||n||!D)return;const F=Qn(Ct,"config","dynamicStatusBanner"),ce=sc(F,re=>{const he=re.exists()?re.data()||{}:{},ct=cd(ye,he.value&&typeof he.value=="object"?he.value:{});V(ct),I||(j(ct),_(JSON.stringify(ct,null,2)),te(null),P(!1)),J({updatedBy:he.updatedBy||null,updatedAt:he.updatedAt||null})},re=>{U((re==null?void 0:re.message)||String(re))});return()=>ce()},[t,n,D,I]);const Ae=M.useMemo(()=>{const F={};return s.forEach(ce=>{F[ce.id]=$5(ce)}),F},[s]),We=M.useMemo(()=>{if(!h)return!1;for(const F of Object.keys(p))if(p[F]!==Ae[F])return!0;return!1},[p,Ae,h]);function Z(){k(null),w(null),f(!0),m({...Ae})}function pe(){f(!1),m({}),w(null),k(null)}async function Oe(){if(t){b(!0),w(null),k(null);try{const F=VI(Ct);let ce=0;for(const re of Object.keys(p)){const he=p[re],ct=Ae[re];if(he===ct)continue;const Xs=Qn(Ct,"users",re),Js=he==="admin";F.update(Xs,{accountType:he,isAdmin:Js}),ce+=1}ce>0&&await F.commit(),k(new Date),f(!1),m({})}catch(F){w((F==null?void 0:F.message)||String(F))}finally{b(!1)}}}function Ye(){return h?We?Oe():pe():Z()}const ze=M.useMemo(()=>h?We?x?"Saving":"Save":"Cancel":"Edit",[h,We,x]),Ve=M.useMemo(()=>!h||!We?!1:x,[h,We,x]);async function bn(){if(t){A(!0),U(null);try{const F=Qn(Ct,"config","dynamicStatusBanner");await Wy(F,{value:q,updatedAt:fa(),updatedBy:(t==null?void 0:t.email)||(t==null?void 0:t.uid)||null},{merge:!0}),P(!1)}catch(F){U((F==null?void 0:F.message)||String(F))}finally{A(!1)}}}function Ht(){ue(L,{markDirty:!1})}function ft(){ue(ye,{markDirty:!0})}function ln(F){_(F),P(!0);try{const ce=JSON.parse(F);j(ce),te(null)}catch(ce){te((ce==null?void 0:ce.message)||"Invalid JSON")}}const cn=D&&!R&&!Q&&se.length===0&&I,ee=M.useMemo(()=>(Array.isArray(N==null?void 0:N.statusRules)?N.statusRules.slice():[]).map((ce,re)=>({...ce,_idx:re})).sort((ce,re)=>Number(ce.priority??9999)-Number(re.priority??9999)),[N]);return d.jsxs(d.Fragment,{children:[n&&d.jsx("div",{className:"card",children:d.jsx("div",{className:"small",children:"Loading"})}),!n&&t&&!D&&d.jsxs("div",{className:"card",children:[d.jsx("h2",{style:{marginTop:0},children:"Not an Administrator"}),d.jsx("div",{className:"small",style:{marginTop:8},children:"Sorry, but youre not an Administrator."}),d.jsx("div",{style:{marginTop:14},children:d.jsx("button",{className:"btn",onClick:()=>i("/dashboard"),children:"Back to dashboard"})})]}),!n&&t&&D&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"panel",children:[d.jsx("h2",{style:{margin:0},children:"Administrator Panel"}),d.jsx("div",{className:"small",style:{marginTop:6},children:"Manage user account types and global configuration."})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("div",{className:"small",children:"Signed in as"}),d.jsx("div",{style:{fontWeight:800,marginTop:2},children:(t==null?void 0:t.email)||""}),d.jsxs("div",{style:{marginTop:8},className:D?"notice success":"notice info",children:[d.jsx("b",{children:"Status:"})," ",D?"Administrator":"Standard user"]})]}),d.jsx("button",{className:"btn small",onClick:Ye,disabled:Ve,children:ze})]}),l&&d.jsxs("div",{className:"notice error",style:{marginTop:12},children:[d.jsx("b",{children:"Could not load users."}),d.jsx("div",{className:"small",style:{marginTop:6,opacity:.9},children:l}),d.jsxs("div",{className:"small",style:{marginTop:8,opacity:.9},children:["If you are the admin, set ",d.jsx("code",{children:"isAdmin"})," = ",d.jsx("code",{children:"true"})," in your own Firestore user document and make sure your Firestore rules allow admins to read ",d.jsx("code",{children:"/users"}),"."]})]}),v&&d.jsxs("div",{className:"notice error",style:{marginTop:12},children:[d.jsx("b",{children:"Save failed."}),d.jsx("div",{className:"small",style:{marginTop:6,opacity:.9},children:v})]}),E&&d.jsxs("div",{className:"notice success",style:{marginTop:12},children:["Saved at ",E.toLocaleTimeString()]}),d.jsx("div",{style:{marginTop:14,overflowX:"auto"},children:d.jsxs("table",{className:"table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Email"}),d.jsx("th",{style:{width:220},children:"Account type"})]})}),d.jsxs("tbody",{children:[o&&d.jsx("tr",{children:d.jsx("td",{colSpan:2,className:"small",children:"Loading"})}),!o&&s.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:2,className:"small",children:"No users found."})}),!o&&s.map(F=>{const ce=Ae[F.id],re=h?p[F.id]??ce:ce;return d.jsxs("tr",{children:[d.jsxs("td",{children:[d.jsx("div",{style:{fontWeight:700},children:F.email||""}),d.jsx("div",{className:"small",style:{opacity:.8},children:F.id})]}),d.jsxs("td",{children:[!h&&d.jsx("span",{className:"pill",children:ce==="admin"?"Administrator":"Standard"}),h&&d.jsx("select",{value:re,onChange:he=>m(ct=>({...ct,[F.id]:he.target.value})),disabled:x,children:z5.map(he=>d.jsx("option",{value:he.value,children:he.label},he.value))})]})]},F.id)})]})]})})]}),d.jsxs("div",{className:"card",style:{marginTop:14},children:[d.jsxs("div",{className:"panel-header",style:{alignItems:"flex-start"},children:[d.jsxs("div",{children:[d.jsx("h2",{style:{margin:0},children:"Dynamic Status Banner"}),d.jsx("div",{className:"small",style:{marginTop:6},children:"Configure thresholds and rule logic for the banner (applies to all users, updates live)."}),d.jsxs("div",{className:"small",style:{marginTop:6,opacity:.85},children:["Last published: ",H5(H==null?void 0:H.updatedAt),H!=null&&H.updatedBy?` by ${H.updatedBy}`:""]}),I&&d.jsx("div",{className:"small",style:{marginTop:6},children:d.jsx("span",{className:"pill",children:"Unsaved changes"})})]}),d.jsxs("div",{className:"row",style:{marginTop:2},children:[d.jsx("button",{className:`btn small ${z==="thresholds"?"primary":""}`,onClick:()=>W("thresholds"),children:"Thresholds"}),d.jsx("button",{className:`btn small ${z==="json"?"primary":""}`,onClick:()=>W("json"),children:"Advanced JSON"})]})]}),S&&d.jsxs("div",{className:"notice error",style:{marginTop:12},children:[d.jsx("b",{children:"Banner config error."}),d.jsx("div",{className:"small",style:{marginTop:6,opacity:.9},children:S})]}),z==="thresholds"&&d.jsxs(d.Fragment,{children:[d.jsx("hr",{className:"sep"}),d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Min days for assessment"}),d.jsx("input",{type:"number",step:"1",value:oe(N,"thresholds.minDaysForAssessment","")??"",placeholder:String(oe(ye,"thresholds.minDaysForAssessment",14)),onChange:F=>Y("thresholds.minDaysForAssessment",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.minDaysForAssessment",14)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Min complete days this week"}),d.jsx("input",{type:"number",step:"1",value:oe(N,"thresholds.minCompleteDaysThisWeek","")??"",placeholder:String(oe(ye,"thresholds.minCompleteDaysThisWeek",5)),onChange:F=>Y("thresholds.minCompleteDaysThisWeek",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.minCompleteDaysThisWeek",5)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Show missing-signal notes"}),d.jsxs("select",{value:String(oe(N,"global.missingSignalNotes",!0)),onChange:F=>Ee("global.missingSignalNotes",F.target.value==="true"),children:[d.jsx("option",{value:"true",children:"On"}),d.jsx("option",{value:"false",children:"Off"})]}),d.jsx("div",{className:"small",children:"Adds helper notes when BF/Strength data is missing."})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Goal notes effect"}),d.jsxs("select",{value:String(oe(N,"global.goalNotes",!0)),onChange:F=>Ee("global.goalNotes",F.target.value==="true"),children:[d.jsx("option",{value:"true",children:"On"}),d.jsx("option",{value:"false",children:"Off"})]}),d.jsx("div",{className:"small",children:"Allows statuses to add the distance to target note."})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Cycle misalignment warnings"}),d.jsxs("select",{value:String(oe(N,"global.cycleMisalignmentWarnings",!0)),onChange:F=>Ee("global.cycleMisalignmentWarnings",F.target.value==="true"),children:[d.jsx("option",{value:"true",children:"On"}),d.jsx("option",{value:"false",children:"Off"})]}),d.jsx("div",{className:"small",children:"Warns when cycle choice conflicts with trends."})]})]}),d.jsx("hr",{className:"sep"}),d.jsx("div",{className:"small",style:{marginBottom:8,opacity:.9},children:d.jsx("b",{children:"Trend thresholds"})}),d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Weight: stable kg/week"}),d.jsx("input",{type:"number",step:"0.01",value:oe(N,"thresholds.weight.stableKgPerWeek","")??"",placeholder:String(oe(ye,"thresholds.weight.stableKgPerWeek",.2)),onChange:F=>Y("thresholds.weight.stableKgPerWeek",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.weight.stableKgPerWeek",.2)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Weight: rapid kg/week"}),d.jsx("input",{type:"number",step:"0.01",value:oe(N,"thresholds.weight.rapidKgPerWeek","")??"",placeholder:String(oe(ye,"thresholds.weight.rapidKgPerWeek",1)),onChange:F=>Y("thresholds.weight.rapidKgPerWeek",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.weight.rapidKgPerWeek",1)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Body fat: stable pct points"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.bf.stablePctPoints","")??"",placeholder:String(oe(ye,"thresholds.bf.stablePctPoints",.5)),onChange:F=>Y("thresholds.bf.stablePctPoints",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.bf.stablePctPoints",.5)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Strength: stable %"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.strength.stablePct","")??"",placeholder:String(oe(ye,"thresholds.strength.stablePct",2)),onChange:F=>Y("thresholds.strength.stablePct",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.strength.stablePct",2)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Strength: increase %"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.strength.increasePct","")??"",placeholder:String(oe(ye,"thresholds.strength.increasePct",2)),onChange:F=>Y("thresholds.strength.increasePct",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.strength.increasePct",2)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Strength: decline %"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.strength.declinePct","")??"",placeholder:String(oe(ye,"thresholds.strength.declinePct",-2)),onChange:F=>Y("thresholds.strength.declinePct",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.strength.declinePct",-2)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Strength: rapid decline %"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.strength.rapidDeclinePct","")??"",placeholder:String(oe(ye,"thresholds.strength.rapidDeclinePct",-5)),onChange:F=>Y("thresholds.strength.rapidDeclinePct",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.strength.rapidDeclinePct",-5)]})]})]}),d.jsx("hr",{className:"sep"}),d.jsx("div",{className:"small",style:{marginBottom:8,opacity:.9},children:d.jsx("b",{children:"Nutrition / adaptation"})}),d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Protein: low (g/kg)"}),d.jsx("input",{type:"number",step:"0.01",value:oe(N,"thresholds.proteinPerKg.low","")??"",placeholder:String(oe(ye,"thresholds.proteinPerKg.low",1.2)),onChange:F=>Y("thresholds.proteinPerKg.low",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.proteinPerKg.low",1.2)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Protein: low warn (g/kg)"}),d.jsx("input",{type:"number",step:"0.01",value:oe(N,"thresholds.proteinPerKg.lowWarn","")??"",placeholder:String(oe(ye,"thresholds.proteinPerKg.lowWarn",1.6)),onChange:F=>Y("thresholds.proteinPerKg.lowWarn",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.proteinPerKg.lowWarn",1.6)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Adaptation: crash %"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.adaptation.crashPct","")??"",placeholder:String(oe(ye,"thresholds.adaptation.crashPct",-10)),onChange:F=>Y("thresholds.adaptation.crashPct",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.adaptation.crashPct",-10)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Adaptation: warn %"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.adaptation.warnPct","")??"",placeholder:String(oe(ye,"thresholds.adaptation.warnPct",-5)),onChange:F=>Y("thresholds.adaptation.warnPct",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.adaptation.warnPct",-5)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Water discrepancy kcal/week"}),d.jsx("input",{type:"number",step:"10",value:oe(N,"thresholds.waterDiscrepancyKcalPerWeek","")??"",placeholder:String(oe(ye,"thresholds.waterDiscrepancyKcalPerWeek",2500)),onChange:F=>Y("thresholds.waterDiscrepancyKcalPerWeek",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.waterDiscrepancyKcalPerWeek",2500)]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Goal note min kg away"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.goalNoteMinKgAway","")??"",placeholder:String(oe(ye,"thresholds.goalNoteMinKgAway",2)),onChange:F=>Y("thresholds.goalNoteMinKgAway",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",oe(ye,"thresholds.goalNoteMinKgAway",2)]})]})]}),d.jsx("hr",{className:"sep"}),d.jsx("div",{className:"small",style:{marginBottom:8,opacity:.9},children:d.jsx("b",{children:"Recomposition heuristics"})}),d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"LBM loss rate optimal min (%/week)"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.lossRatePctLbmPerWeek.optimalMin","")??"",placeholder:String(oe(ye,"thresholds.lossRatePctLbmPerWeek.optimalMin",.5)),onChange:F=>Y("thresholds.lossRatePctLbmPerWeek.optimalMin",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",String(oe(ye,"thresholds.lossRatePctLbmPerWeek.optimalMin",.5))]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"LBM loss rate optimal max (%/week)"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.lossRatePctLbmPerWeek.optimalMax","")??"",placeholder:String(oe(ye,"thresholds.lossRatePctLbmPerWeek.optimalMax",1)),onChange:F=>Y("thresholds.lossRatePctLbmPerWeek.optimalMax",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",String(oe(ye,"thresholds.lossRatePctLbmPerWeek.optimalMax",1))]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"LBM loss rate aggressive warn (%/week)"}),d.jsx("input",{type:"number",step:"0.1",value:oe(N,"thresholds.lossRatePctLbmPerWeek.aggressiveWarn","")??"",placeholder:String(oe(ye,"thresholds.lossRatePctLbmPerWeek.aggressiveWarn",1.2)),onChange:F=>Y("thresholds.lossRatePctLbmPerWeek.aggressiveWarn",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",String(oe(ye,"thresholds.lossRatePctLbmPerWeek.aggressiveWarn",1.2))]})]}),d.jsxs("div",{className:"field",children:[d.jsx("label",{children:"Slow weekly weight loss (kg)"}),d.jsx("input",{type:"number",step:"0.01",value:oe(N,"thresholds.slowWeeklyWeightLossKg","")??"",placeholder:String(oe(ye,"thresholds.slowWeeklyWeightLossKg",.15)),onChange:F=>Y("thresholds.slowWeeklyWeightLossKg",F.target.value)}),d.jsxs("div",{className:"small",children:["Default: ",String(oe(ye,"thresholds.slowWeeklyWeightLossKg",.15))]})]})]}),d.jsx("hr",{className:"sep"}),d.jsx("div",{className:"small",style:{marginBottom:8,opacity:.9},children:d.jsx("b",{children:"Text templates"})}),d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",style:{flex:1,minWidth:280},children:[d.jsx("label",{children:"Cycle misalignment  Cutting"}),d.jsx("textarea",{value:oe(N,"strings.cycleMisalignment.cutting",""),onChange:F=>je("strings.cycleMisalignment.cutting",F.target.value),rows:2,style:{width:"100%"}})]}),d.jsxs("div",{className:"field",style:{flex:1,minWidth:280},children:[d.jsx("label",{children:"Cycle misalignment  Bulking"}),d.jsx("textarea",{value:oe(N,"strings.cycleMisalignment.bulking",""),onChange:F=>je("strings.cycleMisalignment.bulking",F.target.value),rows:2,style:{width:"100%"}})]}),d.jsxs("div",{className:"field",style:{flex:1,minWidth:280},children:[d.jsx("label",{children:"Cycle misalignment  Maintenance"}),d.jsx("textarea",{value:oe(N,"strings.cycleMisalignment.maintaining",""),onChange:F=>je("strings.cycleMisalignment.maintaining",F.target.value),rows:2,style:{width:"100%"}})]})]}),d.jsxs("div",{className:"row",children:[d.jsxs("div",{className:"field",style:{flex:1,minWidth:280},children:[d.jsx("label",{children:"Goal note  Lose"}),d.jsx("textarea",{value:oe(N,"strings.goalNotes.lose",""),onChange:F=>je("strings.goalNotes.lose",F.target.value),rows:2,style:{width:"100%"}}),d.jsxs("div",{className:"small",children:["Placeholders: ",d.jsx("code",{children:"{absToGoal:1}"})," ",d.jsx("code",{children:"{targetWeight:1}"})]})]}),d.jsxs("div",{className:"field",style:{flex:1,minWidth:280},children:[d.jsx("label",{children:"Goal note  Gain"}),d.jsx("textarea",{value:oe(N,"strings.goalNotes.gain",""),onChange:F=>je("strings.goalNotes.gain",F.target.value),rows:2,style:{width:"100%"}}),d.jsxs("div",{className:"small",children:["Placeholders: ",d.jsx("code",{children:"{absToGoal:1}"})," ",d.jsx("code",{children:"{targetWeight:1}"})]})]})]}),d.jsx("div",{className:"small",style:{marginBottom:8,opacity:.9},children:d.jsx("b",{children:"Status rules quick controls"})}),d.jsxs("div",{className:"small",style:{opacity:.85,marginBottom:10},children:["For full rule logic (triggers, messages, templates), switch to ",d.jsx("b",{children:"Advanced JSON"}),"."]}),d.jsx("div",{style:{overflowX:"auto"},children:d.jsxs("table",{className:"table",style:{minWidth:860},children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{style:{width:90},children:"Enabled"}),d.jsx("th",{style:{width:90},children:"Priority"}),d.jsx("th",{style:{width:90},children:"Emoji"}),d.jsx("th",{children:"Rule id"}),d.jsx("th",{style:{width:140},children:"Level"}),d.jsx("th",{children:"Title"})]})}),d.jsx("tbody",{children:ee.map(F=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsxs("select",{value:String(F.enabled!==!1),onChange:ce=>lt(F._idx,{enabled:ce.target.value==="true"}),children:[d.jsx("option",{value:"true",children:"On"}),d.jsx("option",{value:"false",children:"Off"})]})}),d.jsx("td",{children:d.jsx("input",{type:"number",step:"1",value:Number.isFinite(F.priority)?F.priority:"",onChange:ce=>{const re=ce.target.value===""?null:Number(ce.target.value);ce.target.value!==""&&!Number.isFinite(re)||lt(F._idx,{priority:re})}})}),d.jsx("td",{children:d.jsx("input",{type:"text",value:F.emoji||"",onChange:ce=>lt(F._idx,{emoji:ce.target.value}),style:{width:72}})}),d.jsx("td",{children:d.jsx("code",{children:F.id})}),d.jsx("td",{children:d.jsxs("select",{value:F.level||"gray",onChange:ce=>lt(F._idx,{level:ce.target.value}),children:[d.jsx("option",{value:"green",children:"green"}),d.jsx("option",{value:"blue",children:"blue"}),d.jsx("option",{value:"orange",children:"orange"}),d.jsx("option",{value:"red",children:"red"}),d.jsx("option",{value:"gray",children:"gray"})]})}),d.jsx("td",{children:d.jsx("input",{type:"text",value:F.title||"",onChange:ce=>lt(F._idx,{title:ce.target.value}),style:{width:"100%"}})})]},F.id))})]})})]}),z==="json"&&d.jsxs(d.Fragment,{children:[d.jsx("hr",{className:"sep"}),d.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[d.jsx("div",{className:"small",style:{opacity:.9},children:"Paste/edit the full config JSON. Invalid JSON will disable publishing."}),d.jsxs("div",{className:"small",style:{opacity:.9},children:["Tip: publishing will normalize the config using built-in defaults (numeric ",d.jsx("code",{children:"null"})," behaves like default)."]})]}),d.jsx("textarea",{value:T,onChange:F=>ln(F.target.value),spellCheck:!1,style:{width:"100%",minHeight:420,marginTop:10,fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontSize:12}}),Q&&d.jsxs("div",{className:"notice error",style:{marginTop:12},children:[d.jsx("b",{children:"Invalid JSON:"})," ",Q]}),!Q&&se.length>0&&d.jsxs("div",{className:"notice error",style:{marginTop:12},children:[d.jsx("b",{children:"Validation errors:"}),d.jsx("ul",{style:{marginTop:8,marginBottom:0},children:se.slice(0,10).map(F=>d.jsx("li",{className:"small",children:F},F))})]}),!Q&&se.length===0&&d.jsx("div",{className:"notice success",style:{marginTop:12},children:"JSON looks valid."})]}),d.jsx("hr",{className:"sep"}),d.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{className:"small",style:{opacity:.9},children:["Effective version: ",d.jsx("b",{children:oe(q,"version",1)})]}),d.jsxs("div",{className:"row",children:[d.jsx("button",{className:"btn small",onClick:Ht,disabled:!I||R,children:"Discard"}),d.jsx("button",{className:"btn small",onClick:ft,disabled:R,children:"Reset to defaults"}),d.jsx("button",{className:"btn small primary",onClick:bn,disabled:!cn,children:R?"Publishing":"Publish"})]})]}),!I&&d.jsx("div",{className:"small",style:{marginTop:10,opacity:.85},children:"No local changes."}),I&&!cn&&d.jsx("div",{className:"small",style:{marginTop:10,opacity:.85},children:"Publishing is disabled until the config is valid and has unsaved changes."})]})]})]})}function q5(){return d.jsxs(d.Fragment,{children:[d.jsx(jF,{}),d.jsx("div",{className:"app-shell",children:d.jsxs($P,{children:[d.jsx(Bn,{path:"/",element:d.jsx(lg,{to:"/dashboard",replace:!0})}),d.jsx(Bn,{path:"/dashboard",element:d.jsx(E5,{})}),d.jsx(Bn,{path:"/login",element:d.jsx(I5,{})}),d.jsx(Bn,{path:"/signup",element:d.jsx(k5,{})}),d.jsx(Bn,{path:"/reset-password",element:d.jsx(C5,{})}),d.jsx(Bn,{path:"/profile",element:d.jsx(_u,{children:d.jsx(j5,{})})}),d.jsx(Bn,{path:"/admin",element:d.jsx(_u,{children:d.jsx(K5,{})})}),d.jsx(Bn,{path:"/notifications",element:d.jsx(_u,{children:d.jsx(S5,{})})}),d.jsx(Bn,{path:"/entry",element:d.jsx(_u,{children:d.jsx(U5,{})})}),d.jsx(Bn,{path:"*",element:d.jsx(lg,{to:"/dashboard",replace:!0})})]})})]})}class G5 extends Yg.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?d.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[d.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),d.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),d.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),d.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}fp.createRoot(document.getElementById("root")).render(d.jsx(Yg.StrictMode,{children:d.jsx(JP,{basename:"/Body-Recomp-Tracker/",children:d.jsx(NF,{children:d.jsx(MF,{children:d.jsx(G5,{children:d.jsx(q5,{})})})})})}));
