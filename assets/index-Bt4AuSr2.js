var Yk=Object.defineProperty;var Xk=(t,e,n)=>e in t?Yk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>Xk(t,typeof e!="symbol"?e+"":e,n);function Jk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Zk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var EE={exports:{}},Ih={},TE={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=Symbol.for("react.element"),eC=Symbol.for("react.portal"),tC=Symbol.for("react.fragment"),nC=Symbol.for("react.strict_mode"),iC=Symbol.for("react.profiler"),rC=Symbol.for("react.provider"),sC=Symbol.for("react.context"),oC=Symbol.for("react.forward_ref"),aC=Symbol.for("react.suspense"),lC=Symbol.for("react.memo"),uC=Symbol.for("react.lazy"),y_=Symbol.iterator;function cC(t){return t===null||typeof t!="object"?null:(t=y_&&t[y_]||t["@@iterator"],typeof t=="function"?t:null)}var IE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SE=Object.assign,xE={};function wo(t,e,n){this.props=t,this.context=e,this.refs=xE,this.updater=n||IE}wo.prototype.isReactComponent={};wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bE(){}bE.prototype=wo.prototype;function lm(t,e,n){this.props=t,this.context=e,this.refs=xE,this.updater=n||IE}var um=lm.prototype=new bE;um.constructor=lm;SE(um,wo.prototype);um.isPureReactComponent=!0;var __=Array.isArray,kE=Object.prototype.hasOwnProperty,cm={current:null},CE={key:!0,ref:!0,__self:!0,__source:!0};function AE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)kE.call(e,i)&&!CE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:kl,type:t,key:s,ref:o,props:r,_owner:cm.current}}function hC(t,e){return{$$typeof:kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hm(t){return typeof t=="object"&&t!==null&&t.$$typeof===kl}function dC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var v_=/\/+/g;function Rd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dC(""+t.key):e.toString(36)}function Qu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case kl:case eC:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Rd(o,0):i,__(r)?(n="",t!=null&&(n=t.replace(v_,"$&/")+"/"),Qu(r,e,n,"",function(u){return u})):r!=null&&(hm(r)&&(r=hC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(v_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",__(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Rd(s,a);o+=Qu(s,e,n,l,r)}else if(l=cC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Rd(s,a++),o+=Qu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function du(t,e,n){if(t==null)return t;var i=[],r=0;return Qu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function fC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},Yu={transition:null},pC={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Yu,ReactCurrentOwner:cm};function PE(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:du,forEach:function(t,e,n){du(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return du(t,function(){e++}),e},toArray:function(t){return du(t,function(e){return e})||[]},only:function(t){if(!hm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=wo;oe.Fragment=tC;oe.Profiler=iC;oe.PureComponent=lm;oe.StrictMode=nC;oe.Suspense=aC;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pC;oe.act=PE;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=SE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=cm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)kE.call(e,l)&&!CE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:kl,type:t.type,key:r,ref:s,props:i,_owner:o}};oe.createContext=function(t){return t={$$typeof:sC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rC,_context:t},t.Consumer=t};oe.createElement=AE;oe.createFactory=function(t){var e=AE.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:oC,render:t}};oe.isValidElement=hm;oe.lazy=function(t){return{$$typeof:uC,_payload:{_status:-1,_result:t},_init:fC}};oe.memo=function(t,e){return{$$typeof:lC,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Yu.transition;Yu.transition={};try{t()}finally{Yu.transition=e}};oe.unstable_act=PE;oe.useCallback=function(t,e){return Pt.current.useCallback(t,e)};oe.useContext=function(t){return Pt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Pt.current.useEffect(t,e)};oe.useId=function(){return Pt.current.useId()};oe.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Pt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};oe.useRef=function(t){return Pt.current.useRef(t)};oe.useState=function(t){return Pt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Pt.current.useTransition()};oe.version="18.3.1";TE.exports=oe;var O=TE.exports;const dm=Zk(O),mC=Jk({__proto__:null,default:dm},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC=O,yC=Symbol.for("react.element"),_C=Symbol.for("react.fragment"),vC=Object.prototype.hasOwnProperty,wC=gC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EC={key:!0,ref:!0,__self:!0,__source:!0};function RE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)vC.call(e,i)&&!EC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:yC,type:t,key:s,ref:o,props:r,_owner:wC.current}}Ih.Fragment=_C;Ih.jsx=RE;Ih.jsxs=RE;EE.exports=Ih;var y=EE.exports,Pf={},NE={exports:{}},Jt={},DE={exports:{}},ME={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,G){var q=B.length;B.push(G);e:for(;0<q;){var de=q-1>>>1,te=B[de];if(0<r(te,G))B[de]=G,B[q]=te,q=de;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var G=B[0],q=B.pop();if(q!==G){B[0]=q;e:for(var de=0,te=B.length,_e=te>>>1;de<_e;){var Ne=2*(de+1)-1,Ke=B[Ne],De=Ne+1,Nt=B[De];if(0>r(Ke,q))De<te&&0>r(Nt,Ke)?(B[de]=Nt,B[De]=q,de=De):(B[de]=Ke,B[Ne]=q,de=Ne);else if(De<te&&0>r(Nt,q))B[de]=Nt,B[De]=q,de=De;else break e}}return G}function r(B,G){var q=B.sortIndex-G.sortIndex;return q!==0?q:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,g=!1,T=!1,I=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(B){for(var G=n(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=B)i(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(u)}}function P(B){if(I=!1,x(B),!T)if(n(l)!==null)T=!0,le(M);else{var G=n(u);G!==null&&ye(P,G.startTime-B)}}function M(B,G){T=!1,I&&(I=!1,v(_),_=-1),g=!0;var q=f;try{for(x(G),d=n(l);d!==null&&(!(d.expirationTime>G)||B&&!R());){var de=d.callback;if(typeof de=="function"){d.callback=null,f=d.priorityLevel;var te=de(d.expirationTime<=G);G=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(l)&&i(l),x(G)}else i(l);d=n(l)}if(d!==null)var _e=!0;else{var Ne=n(u);Ne!==null&&ye(P,Ne.startTime-G),_e=!1}return _e}finally{d=null,f=q,g=!1}}var N=!1,S=null,_=-1,k=5,C=-1;function R(){return!(t.unstable_now()-C<k)}function D(){if(S!==null){var B=t.unstable_now();C=B;var G=!0;try{G=S(!0,B)}finally{G?A():(N=!1,S=null)}}else N=!1}var A;if(typeof E=="function")A=function(){E(D)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,re=ie.port2;ie.port1.onmessage=D,A=function(){re.postMessage(null)}}else A=function(){w(D,0)};function le(B){S=B,N||(N=!0,A())}function ye(B,G){_=w(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,le(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var q=f;f=G;try{return B()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=f;f=B;try{return G()}finally{f=q}},t.unstable_scheduleCallback=function(B,G,q){var de=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?de+q:de):q=de,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=q+te,B={id:h++,callback:G,priorityLevel:B,startTime:q,expirationTime:te,sortIndex:-1},q>de?(B.sortIndex=q,e(u,B),n(l)===null&&B===n(u)&&(I?(v(_),_=-1):I=!0,ye(P,q-de))):(B.sortIndex=te,e(l,B),T||g||(T=!0,le(M))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var G=f;return function(){var q=f;f=G;try{return B.apply(this,arguments)}finally{f=q}}}})(ME);DE.exports=ME;var TC=DE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC=O,Xt=TC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OE=new Set,Ka={};function us(t,e){to(t,e),to(t+"Capture",e)}function to(t,e){for(Ka[t]=e,t=0;t<e.length;t++)OE.add(e[t])}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rf=Object.prototype.hasOwnProperty,SC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w_={},E_={};function xC(t){return Rf.call(E_,t)?!0:Rf.call(w_,t)?!1:SC.test(t)?E_[t]=!0:(w_[t]=!0,!1)}function bC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kC(t,e,n,i){if(e===null||typeof e>"u"||bC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var fm=/[\-:]([a-z])/g;function pm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fm,pm);ct[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fm,pm);ct[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fm,pm);ct[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function mm(t,e,n,i){var r=ct.hasOwnProperty(e)?ct[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kC(e,n,r,i)&&(n=null),i||r===null?xC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var gi=IC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fu=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),gm=Symbol.for("react.strict_mode"),Nf=Symbol.for("react.profiler"),LE=Symbol.for("react.provider"),VE=Symbol.for("react.context"),ym=Symbol.for("react.forward_ref"),Df=Symbol.for("react.suspense"),Mf=Symbol.for("react.suspense_list"),_m=Symbol.for("react.memo"),Ai=Symbol.for("react.lazy"),FE=Symbol.for("react.offscreen"),T_=Symbol.iterator;function Go(t){return t===null||typeof t!="object"?null:(t=T_&&t[T_]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,Nd;function ha(t){if(Nd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nd=e&&e[1]||""}return`
`+Nd+t}var Dd=!1;function Md(t,e){if(!t||Dd)return"";Dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Dd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ha(t):""}function CC(t){switch(t.tag){case 5:return ha(t.type);case 16:return ha("Lazy");case 13:return ha("Suspense");case 19:return ha("SuspenseList");case 0:case 2:case 15:return t=Md(t.type,!1),t;case 11:return t=Md(t.type.render,!1),t;case 1:return t=Md(t.type,!0),t;default:return""}}function Of(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Ps:return"Portal";case Nf:return"Profiler";case gm:return"StrictMode";case Df:return"Suspense";case Mf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VE:return(t.displayName||"Context")+".Consumer";case LE:return(t._context.displayName||"Context")+".Provider";case ym:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _m:return e=t.displayName||null,e!==null?e:Of(t.type)||"Memo";case Ai:e=t._payload,t=t._init;try{return Of(t(e))}catch{}}return null}function AC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Of(e);case 8:return e===gm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PC(t){var e=jE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pu(t){t._valueTracker||(t._valueTracker=PC(t))}function UE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=jE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lf(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function I_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function BE(t,e){e=e.checked,e!=null&&mm(t,"checked",e,!1)}function Vf(t,e){BE(t,e);var n=rr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ff(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ff(t,e.type,rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function S_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ff(t,e,n){(e!=="number"||wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var da=Array.isArray;function Ws(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+rr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function jf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(da(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rr(n)}}function zE(t,e){var n=rr(e.value),i=rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function b_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $E(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$E(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mu,WE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mu=mu||document.createElement("div"),mu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RC=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(t){RC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xa[e]=xa[t]})});function HE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xa.hasOwnProperty(t)&&xa[t]?(""+e).trim():e+"px"}function qE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=HE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var NC=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bf(t,e){if(e){if(NC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function zf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $f=null;function vm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wf=null,Hs=null,qs=null;function k_(t){if(t=Pl(t)){if(typeof Wf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ch(e),Wf(t.stateNode,t.type,e))}}function KE(t){Hs?qs?qs.push(t):qs=[t]:Hs=t}function GE(){if(Hs){var t=Hs,e=qs;if(qs=Hs=null,k_(t),e)for(t=0;t<e.length;t++)k_(e[t])}}function QE(t,e){return t(e)}function YE(){}var Od=!1;function XE(t,e,n){if(Od)return t(e,n);Od=!0;try{return QE(t,e,n)}finally{Od=!1,(Hs!==null||qs!==null)&&(YE(),GE())}}function Qa(t,e){var n=t.stateNode;if(n===null)return null;var i=Ch(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Hf=!1;if(li)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{Hf=!1}function DC(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ba=!1,Ec=null,Tc=!1,qf=null,MC={onError:function(t){ba=!0,Ec=t}};function OC(t,e,n,i,r,s,o,a,l){ba=!1,Ec=null,DC.apply(MC,arguments)}function LC(t,e,n,i,r,s,o,a,l){if(OC.apply(this,arguments),ba){if(ba){var u=Ec;ba=!1,Ec=null}else throw Error(U(198));Tc||(Tc=!0,qf=u)}}function cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function JE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function C_(t){if(cs(t)!==t)throw Error(U(188))}function VC(t){var e=t.alternate;if(!e){if(e=cs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return C_(r),t;if(s===i)return C_(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function ZE(t){return t=VC(t),t!==null?eT(t):null}function eT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eT(t);if(e!==null)return e;t=t.sibling}return null}var tT=Xt.unstable_scheduleCallback,A_=Xt.unstable_cancelCallback,FC=Xt.unstable_shouldYield,jC=Xt.unstable_requestPaint,$e=Xt.unstable_now,UC=Xt.unstable_getCurrentPriorityLevel,wm=Xt.unstable_ImmediatePriority,nT=Xt.unstable_UserBlockingPriority,Ic=Xt.unstable_NormalPriority,BC=Xt.unstable_LowPriority,iT=Xt.unstable_IdlePriority,Sh=null,Mn=null;function zC(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Sh,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:HC,$C=Math.log,WC=Math.LN2;function HC(t){return t>>>=0,t===0?32:31-($C(t)/WC|0)|0}var gu=64,yu=4194304;function fa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=fa(a):(s&=o,s!==0&&(i=fa(s)))}else o=n&~r,o!==0?i=fa(o):s!==0&&(i=fa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-_n(e),r=1<<n,i|=t[n],e&=~r;return i}function qC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_n(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=qC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Kf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rT(){var t=gu;return gu<<=1,!(gu&4194240)&&(gu=64),t}function Ld(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function GC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-_n(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Em(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-_n(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Te=0;function sT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oT,Tm,aT,lT,uT,Gf=!1,_u=[],Wi=null,Hi=null,qi=null,Ya=new Map,Xa=new Map,Ri=[],QC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P_(t,e){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(e.pointerId)}}function Yo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Pl(e),e!==null&&Tm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function YC(t,e,n,i,r){switch(e){case"focusin":return Wi=Yo(Wi,t,e,n,i,r),!0;case"dragenter":return Hi=Yo(Hi,t,e,n,i,r),!0;case"mouseover":return qi=Yo(qi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ya.set(s,Yo(Ya.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Xa.set(s,Yo(Xa.get(s)||null,t,e,n,i,r)),!0}return!1}function cT(t){var e=Lr(t.target);if(e!==null){var n=cs(e);if(n!==null){if(e=n.tag,e===13){if(e=JE(n),e!==null){t.blockedOn=e,uT(t.priority,function(){aT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);$f=i,n.target.dispatchEvent(i),$f=null}else return e=Pl(n),e!==null&&Tm(e),t.blockedOn=n,!1;e.shift()}return!0}function R_(t,e,n){Xu(t)&&n.delete(e)}function XC(){Gf=!1,Wi!==null&&Xu(Wi)&&(Wi=null),Hi!==null&&Xu(Hi)&&(Hi=null),qi!==null&&Xu(qi)&&(qi=null),Ya.forEach(R_),Xa.forEach(R_)}function Xo(t,e){t.blockedOn===e&&(t.blockedOn=null,Gf||(Gf=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,XC)))}function Ja(t){function e(r){return Xo(r,t)}if(0<_u.length){Xo(_u[0],t);for(var n=1;n<_u.length;n++){var i=_u[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Wi!==null&&Xo(Wi,t),Hi!==null&&Xo(Hi,t),qi!==null&&Xo(qi,t),Ya.forEach(e),Xa.forEach(e),n=0;n<Ri.length;n++)i=Ri[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ri.length&&(n=Ri[0],n.blockedOn===null);)cT(n),n.blockedOn===null&&Ri.shift()}var Ks=gi.ReactCurrentBatchConfig,xc=!0;function JC(t,e,n,i){var r=Te,s=Ks.transition;Ks.transition=null;try{Te=1,Im(t,e,n,i)}finally{Te=r,Ks.transition=s}}function ZC(t,e,n,i){var r=Te,s=Ks.transition;Ks.transition=null;try{Te=4,Im(t,e,n,i)}finally{Te=r,Ks.transition=s}}function Im(t,e,n,i){if(xc){var r=Qf(t,e,n,i);if(r===null)qd(t,e,i,bc,n),P_(t,i);else if(YC(r,t,e,n,i))i.stopPropagation();else if(P_(t,i),e&4&&-1<QC.indexOf(t)){for(;r!==null;){var s=Pl(r);if(s!==null&&oT(s),s=Qf(t,e,n,i),s===null&&qd(t,e,i,bc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else qd(t,e,i,null,n)}}var bc=null;function Qf(t,e,n,i){if(bc=null,t=vm(i),t=Lr(t),t!==null)if(e=cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=JE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bc=t,null}function hT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UC()){case wm:return 1;case nT:return 4;case Ic:case BC:return 16;case iT:return 536870912;default:return 16}default:return 16}}var Vi=null,Sm=null,Ju=null;function dT(){if(Ju)return Ju;var t,e=Sm,n=e.length,i,r="value"in Vi?Vi.value:Vi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Ju=r.slice(t,1<i?1-i:void 0)}function Zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vu(){return!0}function N_(){return!1}function Zt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vu:N_,this.isPropagationStopped=N_,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vu)},persist:function(){},isPersistent:vu}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=Zt(Eo),Al=Ve({},Eo,{view:0,detail:0}),eA=Zt(Al),Vd,Fd,Jo,xh=Ve({},Al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(Vd=t.screenX-Jo.screenX,Fd=t.screenY-Jo.screenY):Fd=Vd=0,Jo=t),Vd)},movementY:function(t){return"movementY"in t?t.movementY:Fd}}),D_=Zt(xh),tA=Ve({},xh,{dataTransfer:0}),nA=Zt(tA),iA=Ve({},Al,{relatedTarget:0}),jd=Zt(iA),rA=Ve({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),sA=Zt(rA),oA=Ve({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aA=Zt(oA),lA=Ve({},Eo,{data:0}),M_=Zt(lA),uA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hA[t])?!!e[t]:!1}function bm(){return dA}var fA=Ve({},Al,{key:function(t){if(t.key){var e=uA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bm,charCode:function(t){return t.type==="keypress"?Zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pA=Zt(fA),mA=Ve({},xh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O_=Zt(mA),gA=Ve({},Al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bm}),yA=Zt(gA),_A=Ve({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),vA=Zt(_A),wA=Ve({},xh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EA=Zt(wA),TA=[9,13,27,32],km=li&&"CompositionEvent"in window,ka=null;li&&"documentMode"in document&&(ka=document.documentMode);var IA=li&&"TextEvent"in window&&!ka,fT=li&&(!km||ka&&8<ka&&11>=ka),L_=" ",V_=!1;function pT(t,e){switch(t){case"keyup":return TA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ns=!1;function SA(t,e){switch(t){case"compositionend":return mT(e);case"keypress":return e.which!==32?null:(V_=!0,L_);case"textInput":return t=e.data,t===L_&&V_?null:t;default:return null}}function xA(t,e){if(Ns)return t==="compositionend"||!km&&pT(t,e)?(t=dT(),Ju=Sm=Vi=null,Ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fT&&e.locale!=="ko"?null:e.data;default:return null}}var bA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bA[t.type]:e==="textarea"}function gT(t,e,n,i){KE(i),e=kc(e,"onChange"),0<e.length&&(n=new xm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ca=null,Za=null;function kA(t){kT(t,0)}function bh(t){var e=Os(t);if(UE(e))return t}function CA(t,e){if(t==="change")return e}var yT=!1;if(li){var Ud;if(li){var Bd="oninput"in document;if(!Bd){var j_=document.createElement("div");j_.setAttribute("oninput","return;"),Bd=typeof j_.oninput=="function"}Ud=Bd}else Ud=!1;yT=Ud&&(!document.documentMode||9<document.documentMode)}function U_(){Ca&&(Ca.detachEvent("onpropertychange",_T),Za=Ca=null)}function _T(t){if(t.propertyName==="value"&&bh(Za)){var e=[];gT(e,Za,t,vm(t)),XE(kA,e)}}function AA(t,e,n){t==="focusin"?(U_(),Ca=e,Za=n,Ca.attachEvent("onpropertychange",_T)):t==="focusout"&&U_()}function PA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bh(Za)}function RA(t,e){if(t==="click")return bh(e)}function NA(t,e){if(t==="input"||t==="change")return bh(e)}function DA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:DA;function el(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Rf.call(e,r)||!wn(t[r],e[r]))return!1}return!0}function B_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z_(t,e){var n=B_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B_(n)}}function vT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wT(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function Cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MA(t){var e=wT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vT(n.ownerDocument.documentElement,n)){if(i!==null&&Cm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=z_(n,s);var o=z_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OA=li&&"documentMode"in document&&11>=document.documentMode,Ds=null,Yf=null,Aa=null,Xf=!1;function $_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xf||Ds==null||Ds!==wc(i)||(i=Ds,"selectionStart"in i&&Cm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Aa&&el(Aa,i)||(Aa=i,i=kc(Yf,"onSelect"),0<i.length&&(e=new xm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ds)))}function wu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ms={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},zd={},ET={};li&&(ET=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function kh(t){if(zd[t])return zd[t];if(!Ms[t])return t;var e=Ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ET)return zd[t]=e[n];return t}var TT=kh("animationend"),IT=kh("animationiteration"),ST=kh("animationstart"),xT=kh("transitionend"),bT=new Map,W_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(t,e){bT.set(t,e),us(e,[t])}for(var $d=0;$d<W_.length;$d++){var Wd=W_[$d],LA=Wd.toLowerCase(),VA=Wd[0].toUpperCase()+Wd.slice(1);hr(LA,"on"+VA)}hr(TT,"onAnimationEnd");hr(IT,"onAnimationIteration");hr(ST,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(xT,"onTransitionEnd");to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FA=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function H_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,LC(i,e,void 0,t),t.currentTarget=null}function kT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;H_(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;H_(r,a,u),s=l}}}if(Tc)throw t=qf,Tc=!1,qf=null,t}function Ce(t,e){var n=e[np];n===void 0&&(n=e[np]=new Set);var i=t+"__bubble";n.has(i)||(CT(e,t,2,!1),n.add(i))}function Hd(t,e,n){var i=0;e&&(i|=4),CT(n,t,i,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function tl(t){if(!t[Eu]){t[Eu]=!0,OE.forEach(function(n){n!=="selectionchange"&&(FA.has(n)||Hd(n,!1,t),Hd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,Hd("selectionchange",!1,e))}}function CT(t,e,n,i){switch(hT(e)){case 1:var r=JC;break;case 4:r=ZC;break;default:r=Im}n=r.bind(null,e,n,t),r=void 0,!Hf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Lr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}XE(function(){var u=s,h=vm(n),d=[];e:{var f=bT.get(t);if(f!==void 0){var g=xm,T=t;switch(t){case"keypress":if(Zu(n)===0)break e;case"keydown":case"keyup":g=pA;break;case"focusin":T="focus",g=jd;break;case"focusout":T="blur",g=jd;break;case"beforeblur":case"afterblur":g=jd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=D_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=nA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=yA;break;case TT:case IT:case ST:g=sA;break;case xT:g=vA;break;case"scroll":g=eA;break;case"wheel":g=EA;break;case"copy":case"cut":case"paste":g=aA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=O_}var I=(e&4)!==0,w=!I&&t==="scroll",v=I?f!==null?f+"Capture":null:f;I=[];for(var E=u,x;E!==null;){x=E;var P=x.stateNode;if(x.tag===5&&P!==null&&(x=P,v!==null&&(P=Qa(E,v),P!=null&&I.push(nl(E,P,x)))),w)break;E=E.return}0<I.length&&(f=new g(f,T,null,n,h),d.push({event:f,listeners:I}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==$f&&(T=n.relatedTarget||n.fromElement)&&(Lr(T)||T[ui]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=u,T=T?Lr(T):null,T!==null&&(w=cs(T),T!==w||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=u),g!==T)){if(I=D_,P="onMouseLeave",v="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(I=O_,P="onPointerLeave",v="onPointerEnter",E="pointer"),w=g==null?f:Os(g),x=T==null?f:Os(T),f=new I(P,E+"leave",g,n,h),f.target=w,f.relatedTarget=x,P=null,Lr(h)===u&&(I=new I(v,E+"enter",T,n,h),I.target=x,I.relatedTarget=w,P=I),w=P,g&&T)t:{for(I=g,v=T,E=0,x=I;x;x=Ts(x))E++;for(x=0,P=v;P;P=Ts(P))x++;for(;0<E-x;)I=Ts(I),E--;for(;0<x-E;)v=Ts(v),x--;for(;E--;){if(I===v||v!==null&&I===v.alternate)break t;I=Ts(I),v=Ts(v)}I=null}else I=null;g!==null&&q_(d,f,g,I,!1),T!==null&&w!==null&&q_(d,w,T,I,!0)}}e:{if(f=u?Os(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var M=CA;else if(F_(f))if(yT)M=NA;else{M=PA;var N=AA}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=RA);if(M&&(M=M(t,u))){gT(d,M,n,h);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Ff(f,"number",f.value)}switch(N=u?Os(u):window,t){case"focusin":(F_(N)||N.contentEditable==="true")&&(Ds=N,Yf=u,Aa=null);break;case"focusout":Aa=Yf=Ds=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,$_(d,n,h);break;case"selectionchange":if(OA)break;case"keydown":case"keyup":$_(d,n,h)}var S;if(km)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ns?pT(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(fT&&n.locale!=="ko"&&(Ns||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ns&&(S=dT()):(Vi=h,Sm="value"in Vi?Vi.value:Vi.textContent,Ns=!0)),N=kc(u,_),0<N.length&&(_=new M_(_,t,null,n,h),d.push({event:_,listeners:N}),S?_.data=S:(S=mT(n),S!==null&&(_.data=S)))),(S=IA?SA(t,n):xA(t,n))&&(u=kc(u,"onBeforeInput"),0<u.length&&(h=new M_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=S))}kT(d,e)})}function nl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Qa(t,n),s!=null&&i.unshift(nl(t,s,r)),s=Qa(t,e),s!=null&&i.push(nl(t,s,r))),t=t.return}return i}function Ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Qa(n,s),l!=null&&o.unshift(nl(n,l,a))):r||(l=Qa(n,s),l!=null&&o.push(nl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jA=/\r\n?/g,UA=/\u0000|\uFFFD/g;function K_(t){return(typeof t=="string"?t:""+t).replace(jA,`
`).replace(UA,"")}function Tu(t,e,n){if(e=K_(e),K_(t)!==e&&n)throw Error(U(425))}function Cc(){}var Jf=null,Zf=null;function ep(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tp=typeof setTimeout=="function"?setTimeout:void 0,BA=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,zA=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(t){return G_.resolve(null).then(t).catch($A)}:tp;function $A(t){setTimeout(function(){throw t})}function Kd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ja(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ja(e)}function Ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Q_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var To=Math.random().toString(36).slice(2),Nn="__reactFiber$"+To,il="__reactProps$"+To,ui="__reactContainer$"+To,np="__reactEvents$"+To,WA="__reactListeners$"+To,HA="__reactHandles$"+To;function Lr(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ui]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Q_(t);t!==null;){if(n=t[Nn])return n;t=Q_(t)}return e}t=n,n=t.parentNode}return null}function Pl(t){return t=t[Nn]||t[ui],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ch(t){return t[il]||null}var ip=[],Ls=-1;function dr(t){return{current:t}}function Pe(t){0>Ls||(t.current=ip[Ls],ip[Ls]=null,Ls--)}function xe(t,e){Ls++,ip[Ls]=t.current,t.current=e}var sr={},Et=dr(sr),jt=dr(!1),Kr=sr;function no(t,e){var n=t.type.contextTypes;if(!n)return sr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ut(t){return t=t.childContextTypes,t!=null}function Ac(){Pe(jt),Pe(Et)}function Y_(t,e,n){if(Et.current!==sr)throw Error(U(168));xe(Et,e),xe(jt,n)}function AT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,AC(t)||"Unknown",r));return Ve({},n,i)}function Pc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,Kr=Et.current,xe(Et,t),xe(jt,jt.current),!0}function X_(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=AT(t,e,Kr),i.__reactInternalMemoizedMergedChildContext=t,Pe(jt),Pe(Et),xe(Et,t)):Pe(jt),xe(jt,n)}var Zn=null,Ah=!1,Gd=!1;function PT(t){Zn===null?Zn=[t]:Zn.push(t)}function qA(t){Ah=!0,PT(t)}function fr(){if(!Gd&&Zn!==null){Gd=!0;var t=0,e=Te;try{var n=Zn;for(Te=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Zn=null,Ah=!1}catch(r){throw Zn!==null&&(Zn=Zn.slice(t+1)),tT(wm,fr),r}finally{Te=e,Gd=!1}}return null}var Vs=[],Fs=0,Rc=null,Nc=0,tn=[],nn=0,Gr=null,ti=1,ni="";function Pr(t,e){Vs[Fs++]=Nc,Vs[Fs++]=Rc,Rc=t,Nc=e}function RT(t,e,n){tn[nn++]=ti,tn[nn++]=ni,tn[nn++]=Gr,Gr=t;var i=ti;t=ni;var r=32-_n(i)-1;i&=~(1<<r),n+=1;var s=32-_n(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ti=1<<32-_n(e)+r|n<<r|i,ni=s+t}else ti=1<<s|n<<r|i,ni=t}function Am(t){t.return!==null&&(Pr(t,1),RT(t,1,0))}function Pm(t){for(;t===Rc;)Rc=Vs[--Fs],Vs[Fs]=null,Nc=Vs[--Fs],Vs[Fs]=null;for(;t===Gr;)Gr=tn[--nn],tn[nn]=null,ni=tn[--nn],tn[nn]=null,ti=tn[--nn],tn[nn]=null}var Qt=null,Kt=null,Re=!1,gn=null;function NT(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function J_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=Ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gr!==null?{id:ti,overflow:ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Kt=null,!0):!1;default:return!1}}function rp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sp(t){if(Re){var e=Kt;if(e){var n=e;if(!J_(t,e)){if(rp(t))throw Error(U(418));e=Ki(n.nextSibling);var i=Qt;e&&J_(t,e)?NT(i,n):(t.flags=t.flags&-4097|2,Re=!1,Qt=t)}}else{if(rp(t))throw Error(U(418));t.flags=t.flags&-4097|2,Re=!1,Qt=t}}}function Z_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Iu(t){if(t!==Qt)return!1;if(!Re)return Z_(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ep(t.type,t.memoizedProps)),e&&(e=Kt)){if(rp(t))throw DT(),Error(U(418));for(;e;)NT(t,e),e=Ki(e.nextSibling)}if(Z_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=Ki(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Qt?Ki(t.stateNode.nextSibling):null;return!0}function DT(){for(var t=Kt;t;)t=Ki(t.nextSibling)}function io(){Kt=Qt=null,Re=!1}function Rm(t){gn===null?gn=[t]:gn.push(t)}var KA=gi.ReactCurrentBatchConfig;function Zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Su(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ev(t){var e=t._init;return e(t._payload)}function MT(t){function e(v,E){if(t){var x=v.deletions;x===null?(v.deletions=[E],v.flags|=16):x.push(E)}}function n(v,E){if(!t)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function i(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function r(v,E){return v=Xi(v,E),v.index=0,v.sibling=null,v}function s(v,E,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<E?(v.flags|=2,E):x):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,E,x,P){return E===null||E.tag!==6?(E=tf(x,v.mode,P),E.return=v,E):(E=r(E,x),E.return=v,E)}function l(v,E,x,P){var M=x.type;return M===Rs?h(v,E,x.props.children,P,x.key):E!==null&&(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ai&&ev(M)===E.type)?(P=r(E,x.props),P.ref=Zo(v,E,x),P.return=v,P):(P=oc(x.type,x.key,x.props,null,v.mode,P),P.ref=Zo(v,E,x),P.return=v,P)}function u(v,E,x,P){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=nf(x,v.mode,P),E.return=v,E):(E=r(E,x.children||[]),E.return=v,E)}function h(v,E,x,P,M){return E===null||E.tag!==7?(E=Wr(x,v.mode,P,M),E.return=v,E):(E=r(E,x),E.return=v,E)}function d(v,E,x){if(typeof E=="string"&&E!==""||typeof E=="number")return E=tf(""+E,v.mode,x),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case fu:return x=oc(E.type,E.key,E.props,null,v.mode,x),x.ref=Zo(v,null,E),x.return=v,x;case Ps:return E=nf(E,v.mode,x),E.return=v,E;case Ai:var P=E._init;return d(v,P(E._payload),x)}if(da(E)||Go(E))return E=Wr(E,v.mode,x,null),E.return=v,E;Su(v,E)}return null}function f(v,E,x,P){var M=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:a(v,E,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fu:return x.key===M?l(v,E,x,P):null;case Ps:return x.key===M?u(v,E,x,P):null;case Ai:return M=x._init,f(v,E,M(x._payload),P)}if(da(x)||Go(x))return M!==null?null:h(v,E,x,P,null);Su(v,x)}return null}function g(v,E,x,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(x)||null,a(E,v,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case fu:return v=v.get(P.key===null?x:P.key)||null,l(E,v,P,M);case Ps:return v=v.get(P.key===null?x:P.key)||null,u(E,v,P,M);case Ai:var N=P._init;return g(v,E,x,N(P._payload),M)}if(da(P)||Go(P))return v=v.get(x)||null,h(E,v,P,M,null);Su(E,P)}return null}function T(v,E,x,P){for(var M=null,N=null,S=E,_=E=0,k=null;S!==null&&_<x.length;_++){S.index>_?(k=S,S=null):k=S.sibling;var C=f(v,S,x[_],P);if(C===null){S===null&&(S=k);break}t&&S&&C.alternate===null&&e(v,S),E=s(C,E,_),N===null?M=C:N.sibling=C,N=C,S=k}if(_===x.length)return n(v,S),Re&&Pr(v,_),M;if(S===null){for(;_<x.length;_++)S=d(v,x[_],P),S!==null&&(E=s(S,E,_),N===null?M=S:N.sibling=S,N=S);return Re&&Pr(v,_),M}for(S=i(v,S);_<x.length;_++)k=g(S,v,_,x[_],P),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?_:k.key),E=s(k,E,_),N===null?M=k:N.sibling=k,N=k);return t&&S.forEach(function(R){return e(v,R)}),Re&&Pr(v,_),M}function I(v,E,x,P){var M=Go(x);if(typeof M!="function")throw Error(U(150));if(x=M.call(x),x==null)throw Error(U(151));for(var N=M=null,S=E,_=E=0,k=null,C=x.next();S!==null&&!C.done;_++,C=x.next()){S.index>_?(k=S,S=null):k=S.sibling;var R=f(v,S,C.value,P);if(R===null){S===null&&(S=k);break}t&&S&&R.alternate===null&&e(v,S),E=s(R,E,_),N===null?M=R:N.sibling=R,N=R,S=k}if(C.done)return n(v,S),Re&&Pr(v,_),M;if(S===null){for(;!C.done;_++,C=x.next())C=d(v,C.value,P),C!==null&&(E=s(C,E,_),N===null?M=C:N.sibling=C,N=C);return Re&&Pr(v,_),M}for(S=i(v,S);!C.done;_++,C=x.next())C=g(S,v,_,C.value,P),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?_:C.key),E=s(C,E,_),N===null?M=C:N.sibling=C,N=C);return t&&S.forEach(function(D){return e(v,D)}),Re&&Pr(v,_),M}function w(v,E,x,P){if(typeof x=="object"&&x!==null&&x.type===Rs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case fu:e:{for(var M=x.key,N=E;N!==null;){if(N.key===M){if(M=x.type,M===Rs){if(N.tag===7){n(v,N.sibling),E=r(N,x.props.children),E.return=v,v=E;break e}}else if(N.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ai&&ev(M)===N.type){n(v,N.sibling),E=r(N,x.props),E.ref=Zo(v,N,x),E.return=v,v=E;break e}n(v,N);break}else e(v,N);N=N.sibling}x.type===Rs?(E=Wr(x.props.children,v.mode,P,x.key),E.return=v,v=E):(P=oc(x.type,x.key,x.props,null,v.mode,P),P.ref=Zo(v,E,x),P.return=v,v=P)}return o(v);case Ps:e:{for(N=x.key;E!==null;){if(E.key===N)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(v,E.sibling),E=r(E,x.children||[]),E.return=v,v=E;break e}else{n(v,E);break}else e(v,E);E=E.sibling}E=nf(x,v.mode,P),E.return=v,v=E}return o(v);case Ai:return N=x._init,w(v,E,N(x._payload),P)}if(da(x))return T(v,E,x,P);if(Go(x))return I(v,E,x,P);Su(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,E!==null&&E.tag===6?(n(v,E.sibling),E=r(E,x),E.return=v,v=E):(n(v,E),E=tf(x,v.mode,P),E.return=v,v=E),o(v)):n(v,E)}return w}var ro=MT(!0),OT=MT(!1),Dc=dr(null),Mc=null,js=null,Nm=null;function Dm(){Nm=js=Mc=null}function Mm(t){var e=Dc.current;Pe(Dc),t._currentValue=e}function op(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Gs(t,e){Mc=t,Nm=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Nm!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(Mc===null)throw Error(U(308));js=t,Mc.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var Vr=null;function Om(t){Vr===null?Vr=[t]:Vr.push(t)}function LT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Om(e)):(n.next=r.next,r.next=n),e.interleaved=n,ci(t,i)}function ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pi=!1;function Lm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,fe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ci(t,n)}return r=i.interleaved,r===null?(e.next=e,Om(i)):(e.next=r.next,r.next=e),i.interleaved=e,ci(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Em(t,n)}}function tv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,i){var r=t.updateQueue;Pi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,I=a;switch(f=e,g=n,I.tag){case 1:if(T=I.payload,typeof T=="function"){d=T.call(g,d,f);break e}d=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=I.payload,f=typeof T=="function"?T.call(g,d,f):T,f==null)break e;d=Ve({},d,f);break e;case 2:Pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Yr|=o,t.lanes=o,t.memoizedState=d}}function nv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var Rl={},On=dr(Rl),rl=dr(Rl),sl=dr(Rl);function Fr(t){if(t===Rl)throw Error(U(174));return t}function Vm(t,e){switch(xe(sl,e),xe(rl,t),xe(On,Rl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uf(e,t)}Pe(On),xe(On,e)}function so(){Pe(On),Pe(rl),Pe(sl)}function FT(t){Fr(sl.current);var e=Fr(On.current),n=Uf(e,t.type);e!==n&&(xe(rl,t),xe(On,n))}function Fm(t){rl.current===t&&(Pe(On),Pe(rl))}var Me=dr(0);function Lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qd=[];function jm(){for(var t=0;t<Qd.length;t++)Qd[t]._workInProgressVersionPrimary=null;Qd.length=0}var tc=gi.ReactCurrentDispatcher,Yd=gi.ReactCurrentBatchConfig,Qr=0,Oe=null,Qe=null,et=null,Vc=!1,Pa=!1,ol=0,GA=0;function pt(){throw Error(U(321))}function Um(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Bm(t,e,n,i,r,s){if(Qr=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?JA:ZA,t=n(i,r),Pa){s=0;do{if(Pa=!1,ol=0,25<=s)throw Error(U(301));s+=1,et=Qe=null,e.updateQueue=null,tc.current=e1,t=n(i,r)}while(Pa)}if(tc.current=Fc,e=Qe!==null&&Qe.next!==null,Qr=0,et=Qe=Oe=null,Vc=!1,e)throw Error(U(300));return t}function zm(){var t=ol!==0;return ol=0,t}function Pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Oe.memoizedState=et=t:et=et.next=t,et}function cn(){if(Qe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=et===null?Oe.memoizedState:et.next;if(e!==null)et=e,Qe=t;else{if(t===null)throw Error(U(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},et===null?Oe.memoizedState=et=t:et=et.next=t}return et}function al(t,e){return typeof e=="function"?e(t):e}function Xd(t){var e=cn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=Qe,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Qr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Oe.lanes|=h,Yr|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,wn(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Oe.lanes|=s,Yr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jd(t){var e=cn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);wn(s,e.memoizedState)||(Vt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function jT(){}function UT(t,e){var n=Oe,i=cn(),r=e(),s=!wn(i.memoizedState,r);if(s&&(i.memoizedState=r,Vt=!0),i=i.queue,$m($T.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,ll(9,zT.bind(null,n,i,r,e),void 0,null),nt===null)throw Error(U(349));Qr&30||BT(n,e,r)}return r}function BT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zT(t,e,n,i){e.value=n,e.getSnapshot=i,WT(e)&&HT(t)}function $T(t,e,n){return n(function(){WT(e)&&HT(t)})}function WT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function HT(t){var e=ci(t,1);e!==null&&vn(e,t,1,-1)}function iv(t){var e=Pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:t},e.queue=t,t=t.dispatch=XA.bind(null,Oe,t),[e.memoizedState,t]}function ll(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function qT(){return cn().memoizedState}function nc(t,e,n,i){var r=Pn();Oe.flags|=t,r.memoizedState=ll(1|e,n,void 0,i===void 0?null:i)}function Ph(t,e,n,i){var r=cn();i=i===void 0?null:i;var s=void 0;if(Qe!==null){var o=Qe.memoizedState;if(s=o.destroy,i!==null&&Um(i,o.deps)){r.memoizedState=ll(e,n,s,i);return}}Oe.flags|=t,r.memoizedState=ll(1|e,n,s,i)}function rv(t,e){return nc(8390656,8,t,e)}function $m(t,e){return Ph(2048,8,t,e)}function KT(t,e){return Ph(4,2,t,e)}function GT(t,e){return Ph(4,4,t,e)}function QT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YT(t,e,n){return n=n!=null?n.concat([t]):null,Ph(4,4,QT.bind(null,e,t),n)}function Wm(){}function XT(t,e){var n=cn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Um(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function JT(t,e){var n=cn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Um(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function ZT(t,e,n){return Qr&21?(wn(n,e)||(n=rT(),Oe.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function QA(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var i=Yd.transition;Yd.transition={};try{t(!1),e()}finally{Te=n,Yd.transition=i}}function eI(){return cn().memoizedState}function YA(t,e,n){var i=Yi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},tI(t))nI(e,n);else if(n=LT(t,e,n,i),n!==null){var r=Ct();vn(n,t,i,r),iI(n,e,i)}}function XA(t,e,n){var i=Yi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(tI(t))nI(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,wn(a,o)){var l=e.interleaved;l===null?(r.next=r,Om(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=LT(t,e,r,i),n!==null&&(r=Ct(),vn(n,t,i,r),iI(n,e,i))}}function tI(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function nI(t,e){Pa=Vc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iI(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Em(t,n)}}var Fc={readContext:un,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},JA={readContext:un,useCallback:function(t,e){return Pn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:rv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,QT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=Pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Pn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=YA.bind(null,Oe,t),[i.memoizedState,t]},useRef:function(t){var e=Pn();return t={current:t},e.memoizedState=t},useState:iv,useDebugValue:Wm,useDeferredValue:function(t){return Pn().memoizedState=t},useTransition:function(){var t=iv(!1),e=t[0];return t=QA.bind(null,t[1]),Pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Oe,r=Pn();if(Re){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),nt===null)throw Error(U(349));Qr&30||BT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,rv($T.bind(null,i,s,t),[t]),i.flags|=2048,ll(9,zT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Pn(),e=nt.identifierPrefix;if(Re){var n=ni,i=ti;n=(i&~(1<<32-_n(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ol++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZA={readContext:un,useCallback:XT,useContext:un,useEffect:$m,useImperativeHandle:YT,useInsertionEffect:KT,useLayoutEffect:GT,useMemo:JT,useReducer:Xd,useRef:qT,useState:function(){return Xd(al)},useDebugValue:Wm,useDeferredValue:function(t){var e=cn();return ZT(e,Qe.memoizedState,t)},useTransition:function(){var t=Xd(al)[0],e=cn().memoizedState;return[t,e]},useMutableSource:jT,useSyncExternalStore:UT,useId:eI,unstable_isNewReconciler:!1},e1={readContext:un,useCallback:XT,useContext:un,useEffect:$m,useImperativeHandle:YT,useInsertionEffect:KT,useLayoutEffect:GT,useMemo:JT,useReducer:Jd,useRef:qT,useState:function(){return Jd(al)},useDebugValue:Wm,useDeferredValue:function(t){var e=cn();return Qe===null?e.memoizedState=t:ZT(e,Qe.memoizedState,t)},useTransition:function(){var t=Jd(al)[0],e=cn().memoizedState;return[t,e]},useMutableSource:jT,useSyncExternalStore:UT,useId:eI,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ap(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rh={isMounted:function(t){return(t=t._reactInternals)?cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ct(),r=Yi(t),s=oi(i,r);s.payload=e,n!=null&&(s.callback=n),e=Gi(t,s,r),e!==null&&(vn(e,t,r,i),ec(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ct(),r=Yi(t),s=oi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gi(t,s,r),e!==null&&(vn(e,t,r,i),ec(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),i=Yi(t),r=oi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Gi(t,r,i),e!==null&&(vn(e,t,i,n),ec(e,t,i))}};function sv(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!el(n,i)||!el(r,s):!0}function rI(t,e,n){var i=!1,r=sr,s=e.contextType;return typeof s=="object"&&s!==null?s=un(s):(r=Ut(e)?Kr:Et.current,i=e.contextTypes,s=(i=i!=null)?no(t,r):sr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function ov(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Rh.enqueueReplaceState(e,e.state,null)}function lp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Lm(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=un(s):(s=Ut(e)?Kr:Et.current,r.context=no(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ap(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Rh.enqueueReplaceState(r,r.state,null),Oc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function oo(t,e){try{var n="",i=e;do n+=CC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Zd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function up(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var t1=typeof WeakMap=="function"?WeakMap:Map;function sI(t,e,n){n=oi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Uc||(Uc=!0,vp=i),up(t,e)},n}function oI(t,e,n){n=oi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){up(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){up(t,e),typeof i!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function av(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new t1;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=m1.bind(null,t,e,n),e.then(t,t))}function lv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=oi(-1,1),e.tag=2,Gi(n,e,1))),n.lanes|=1),t)}var n1=gi.ReactCurrentOwner,Vt=!1;function bt(t,e,n,i){e.child=t===null?OT(e,null,n,i):ro(e,t.child,n,i)}function cv(t,e,n,i,r){n=n.render;var s=e.ref;return Gs(e,r),i=Bm(t,e,n,i,s,r),n=zm(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,hi(t,e,r)):(Re&&n&&Am(e),e.flags|=1,bt(t,e,i,r),e.child)}function hv(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Jm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,aI(t,e,s,i,r)):(t=oc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(o,i)&&t.ref===e.ref)return hi(t,e,r)}return e.flags|=1,t=Xi(s,i),t.ref=e.ref,t.return=e,e.child=t}function aI(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(el(s,i)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,hi(t,e,r)}return cp(t,e,n,i,r)}function lI(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Bs,qt),qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Bs,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,xe(Bs,qt),qt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,xe(Bs,qt),qt|=i;return bt(t,e,r,n),e.child}function uI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cp(t,e,n,i,r){var s=Ut(n)?Kr:Et.current;return s=no(e,s),Gs(e,r),n=Bm(t,e,n,i,s,r),i=zm(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,hi(t,e,r)):(Re&&i&&Am(e),e.flags|=1,bt(t,e,n,r),e.child)}function dv(t,e,n,i,r){if(Ut(n)){var s=!0;Pc(e)}else s=!1;if(Gs(e,r),e.stateNode===null)ic(t,e),rI(e,n,i),lp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=un(u):(u=Ut(n)?Kr:Et.current,u=no(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&ov(e,o,i,u),Pi=!1;var f=e.memoizedState;o.state=f,Oc(e,i,o,r),l=e.memoizedState,a!==i||f!==l||jt.current||Pi?(typeof h=="function"&&(ap(e,n,h,i),l=e.memoizedState),(a=Pi||sv(e,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,VT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:pn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=un(l):(l=Ut(n)?Kr:Et.current,l=no(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&ov(e,o,i,l),Pi=!1,f=e.memoizedState,o.state=f,Oc(e,i,o,r);var T=e.memoizedState;a!==d||f!==T||jt.current||Pi?(typeof g=="function"&&(ap(e,n,g,i),T=e.memoizedState),(u=Pi||sv(e,n,u,i,f,T,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=T),o.props=i,o.state=T,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return hp(t,e,n,i,s,r)}function hp(t,e,n,i,r,s){uI(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&X_(e,n,!1),hi(t,e,s);i=e.stateNode,n1.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=ro(e,t.child,null,s),e.child=ro(e,null,a,s)):bt(t,e,a,s),e.memoizedState=i.state,r&&X_(e,n,!0),e.child}function cI(t){var e=t.stateNode;e.pendingContext?Y_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Y_(t,e.context,!1),Vm(t,e.containerInfo)}function fv(t,e,n,i,r){return io(),Rm(r),e.flags|=256,bt(t,e,n,i),e.child}var dp={dehydrated:null,treeContext:null,retryLane:0};function fp(t){return{baseLanes:t,cachePool:null,transitions:null}}function hI(t,e,n){var i=e.pendingProps,r=Me.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),xe(Me,r&1),t===null)return sp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Mh(o,i,0,null),t=Wr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=fp(n),e.memoizedState=dp,t):Hm(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return i1(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Xi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Xi(a,s):(s=Wr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?fp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=dp,i}return s=t.child,t=s.sibling,i=Xi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Hm(t,e){return e=Mh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xu(t,e,n,i){return i!==null&&Rm(i),ro(e,t.child,null,n),t=Hm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i1(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Zd(Error(U(422))),xu(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Mh({mode:"visible",children:i.children},r,0,null),s=Wr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ro(e,t.child,null,o),e.child.memoizedState=fp(o),e.memoizedState=dp,s);if(!(e.mode&1))return xu(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=Zd(s,i,void 0),xu(t,e,o,i)}if(a=(o&t.childLanes)!==0,Vt||a){if(i=nt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ci(t,r),vn(i,t,r,-1))}return Xm(),i=Zd(Error(U(421))),xu(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=g1.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Kt=Ki(r.nextSibling),Qt=e,Re=!0,gn=null,t!==null&&(tn[nn++]=ti,tn[nn++]=ni,tn[nn++]=Gr,ti=t.id,ni=t.overflow,Gr=e),e=Hm(e,i.children),e.flags|=4096,e)}function pv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),op(t.return,e,n)}function ef(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function dI(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(bt(t,e,i.children,n),i=Me.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pv(t,n,e);else if(t.tag===19)pv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(xe(Me,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Lc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ef(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Lc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ef(e,!0,n,null,s);break;case"together":ef(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Xi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function r1(t,e,n){switch(e.tag){case 3:cI(e),io();break;case 5:FT(e);break;case 1:Ut(e.type)&&Pc(e);break;case 4:Vm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;xe(Dc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(xe(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?hI(t,e,n):(xe(Me,Me.current&1),t=hi(t,e,n),t!==null?t.sibling:null);xe(Me,Me.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return dI(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xe(Me,Me.current),i)break;return null;case 22:case 23:return e.lanes=0,lI(t,e,n)}return hi(t,e,n)}var fI,pp,pI,mI;fI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pp=function(){};pI=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Fr(On.current);var s=null;switch(n){case"input":r=Lf(t,r),i=Lf(t,i),s=[];break;case"select":r=Ve({},r,{value:void 0}),i=Ve({},i,{value:void 0}),s=[];break;case"textarea":r=jf(t,r),i=jf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Cc)}Bf(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ka.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ka.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ce("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};mI=function(t,e,n,i){n!==i&&(e.flags|=4)};function ea(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function s1(t,e,n){var i=e.pendingProps;switch(Pm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Ut(e.type)&&Ac(),mt(e),null;case 3:return i=e.stateNode,so(),Pe(jt),Pe(Et),jm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Iu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(Tp(gn),gn=null))),pp(t,e),mt(e),null;case 5:Fm(e);var r=Fr(sl.current);if(n=e.type,t!==null&&e.stateNode!=null)pI(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return mt(e),null}if(t=Fr(On.current),Iu(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Nn]=e,i[il]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",i),Ce("close",i);break;case"iframe":case"object":case"embed":Ce("load",i);break;case"video":case"audio":for(r=0;r<pa.length;r++)Ce(pa[r],i);break;case"source":Ce("error",i);break;case"img":case"image":case"link":Ce("error",i),Ce("load",i);break;case"details":Ce("toggle",i);break;case"input":I_(i,s),Ce("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",i);break;case"textarea":x_(i,s),Ce("invalid",i)}Bf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Tu(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Tu(i.textContent,a,t),r=["children",""+a]):Ka.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",i)}switch(n){case"input":pu(i),S_(i,s,!0);break;case"textarea":pu(i),b_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Cc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$E(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Nn]=e,t[il]=i,fI(t,e,!1,!1),e.stateNode=t;e:{switch(o=zf(n,i),n){case"dialog":Ce("cancel",t),Ce("close",t),r=i;break;case"iframe":case"object":case"embed":Ce("load",t),r=i;break;case"video":case"audio":for(r=0;r<pa.length;r++)Ce(pa[r],t);r=i;break;case"source":Ce("error",t),r=i;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),r=i;break;case"details":Ce("toggle",t),r=i;break;case"input":I_(t,i),r=Lf(t,i),Ce("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ve({},i,{value:void 0}),Ce("invalid",t);break;case"textarea":x_(t,i),r=jf(t,i),Ce("invalid",t);break;default:r=i}Bf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?qE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ga(t,l):typeof l=="number"&&Ga(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ka.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ce("scroll",t):l!=null&&mm(t,s,l,o))}switch(n){case"input":pu(t),S_(t,i,!1);break;case"textarea":pu(t),b_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+rr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Ws(t,!!i.multiple,s,!1):i.defaultValue!=null&&Ws(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Cc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)mI(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=Fr(sl.current),Fr(On.current),Iu(e)){if(i=e.stateNode,n=e.memoizedProps,i[Nn]=e,(s=i.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:Tu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tu(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Nn]=e,e.stateNode=i}return mt(e),null;case 13:if(Pe(Me),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Kt!==null&&e.mode&1&&!(e.flags&128))DT(),io(),e.flags|=98560,s=!1;else if(s=Iu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Nn]=e}else io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else gn!==null&&(Tp(gn),gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Xe===0&&(Xe=3):Xm())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return so(),pp(t,e),t===null&&tl(e.stateNode.containerInfo),mt(e),null;case 10:return Mm(e.type._context),mt(e),null;case 17:return Ut(e.type)&&Ac(),mt(e),null;case 19:if(Pe(Me),s=e.memoizedState,s===null)return mt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ea(s,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lc(t),o!==null){for(e.flags|=128,ea(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Me,Me.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>ao&&(e.flags|=128,i=!0,ea(s,!1),e.lanes=4194304)}else{if(!i)if(t=Lc(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Re)return mt(e),null}else 2*$e()-s.renderingStartTime>ao&&n!==1073741824&&(e.flags|=128,i=!0,ea(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=Me.current,xe(Me,i?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Ym(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?qt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function o1(t,e){switch(Pm(e),e.tag){case 1:return Ut(e.type)&&Ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return so(),Pe(jt),Pe(Et),jm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fm(e),null;case 13:if(Pe(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Me),null;case 4:return so(),null;case 10:return Mm(e.type._context),null;case 22:case 23:return Ym(),null;case 24:return null;default:return null}}var bu=!1,_t=!1,a1=typeof WeakSet=="function"?WeakSet:Set,$=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Be(t,e,i)}else n.current=null}function mp(t,e,n){try{n()}catch(i){Be(t,e,i)}}var mv=!1;function l1(t,e){if(Jf=xc,t=wT(),Cm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++h===i&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zf={focusedElem:t,selectionRange:n},xc=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var I=T.memoizedProps,w=T.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?I:pn(e.type,I),w);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(P){Be(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return T=mv,mv=!1,T}function Ra(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&mp(e,n,s)}r=r.next}while(r!==i)}}function Nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function gp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gI(t){var e=t.alternate;e!==null&&(t.alternate=null,gI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[il],delete e[np],delete e[WA],delete e[HA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yI(t){return t.tag===5||t.tag===3||t.tag===4}function gv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cc));else if(i!==4&&(t=t.child,t!==null))for(yp(t,e,n),t=t.sibling;t!==null;)yp(t,e,n),t=t.sibling}function _p(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(_p(t,e,n),t=t.sibling;t!==null;)_p(t,e,n),t=t.sibling}var rt=null,mn=!1;function Si(t,e,n){for(n=n.child;n!==null;)_I(t,e,n),n=n.sibling}function _I(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Sh,n)}catch{}switch(n.tag){case 5:_t||Us(n,e);case 6:var i=rt,r=mn;rt=null,Si(t,e,n),rt=i,mn=r,rt!==null&&(mn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(mn?(t=rt,n=n.stateNode,t.nodeType===8?Kd(t.parentNode,n):t.nodeType===1&&Kd(t,n),Ja(t)):Kd(rt,n.stateNode));break;case 4:i=rt,r=mn,rt=n.stateNode.containerInfo,mn=!0,Si(t,e,n),rt=i,mn=r;break;case 0:case 11:case 14:case 15:if(!_t&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mp(n,e,o),r=r.next}while(r!==i)}Si(t,e,n);break;case 1:if(!_t&&(Us(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Be(n,e,a)}Si(t,e,n);break;case 21:Si(t,e,n);break;case 22:n.mode&1?(_t=(i=_t)||n.memoizedState!==null,Si(t,e,n),_t=i):Si(t,e,n);break;default:Si(t,e,n)}}function yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new a1),e.forEach(function(i){var r=y1.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,mn=!1;break e;case 3:rt=a.stateNode.containerInfo,mn=!0;break e;case 4:rt=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(rt===null)throw Error(U(160));_I(s,o,r),rt=null,mn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Be(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vI(e,t),e=e.sibling}function vI(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),bn(t),i&4){try{Ra(3,t,t.return),Nh(3,t)}catch(I){Be(t,t.return,I)}try{Ra(5,t,t.return)}catch(I){Be(t,t.return,I)}}break;case 1:fn(e,t),bn(t),i&512&&n!==null&&Us(n,n.return);break;case 5:if(fn(e,t),bn(t),i&512&&n!==null&&Us(n,n.return),t.flags&32){var r=t.stateNode;try{Ga(r,"")}catch(I){Be(t,t.return,I)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&BE(r,s),zf(a,o);var u=zf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?qE(r,d):h==="dangerouslySetInnerHTML"?WE(r,d):h==="children"?Ga(r,d):mm(r,h,d,u)}switch(a){case"input":Vf(r,s);break;case"textarea":zE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ws(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ws(r,!!s.multiple,s.defaultValue,!0):Ws(r,!!s.multiple,s.multiple?[]:"",!1))}r[il]=s}catch(I){Be(t,t.return,I)}}break;case 6:if(fn(e,t),bn(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(I){Be(t,t.return,I)}}break;case 3:if(fn(e,t),bn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ja(e.containerInfo)}catch(I){Be(t,t.return,I)}break;case 4:fn(e,t),bn(t);break;case 13:fn(e,t),bn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Gm=$e())),i&4&&yv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(u=_t)||h,fn(e,t),_t=u):fn(e,t),bn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(d=$=h;$!==null;){switch(f=$,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ra(4,f,f.return);break;case 1:Us(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(I){Be(i,n,I)}}break;case 5:Us(f,f.return);break;case 22:if(f.memoizedState!==null){vv(d);continue}}g!==null?(g.return=f,$=g):vv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=HE("display",o))}catch(I){Be(t,t.return,I)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(I){Be(t,t.return,I)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fn(e,t),bn(t),i&4&&yv(t);break;case 21:break;default:fn(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yI(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ga(r,""),i.flags&=-33);var s=gv(t);_p(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=gv(t);yp(t,a,o);break;default:throw Error(U(161))}}catch(l){Be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function u1(t,e,n){$=t,wI(t)}function wI(t,e,n){for(var i=(t.mode&1)!==0;$!==null;){var r=$,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||bu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||_t;a=bu;var u=_t;if(bu=o,(_t=l)&&!u)for($=r;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?wv(r):l!==null?(l.return=o,$=l):wv(r);for(;s!==null;)$=s,wI(s),s=s.sibling;$=r,bu=a,_t=u}_v(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$=s):_v(t)}}function _v(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||Nh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!_t)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nv(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ja(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}_t||e.flags&512&&gp(e)}catch(f){Be(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function vv(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function wv(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nh(4,e)}catch(l){Be(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Be(e,r,l)}}var s=e.return;try{gp(e)}catch(l){Be(e,s,l)}break;case 5:var o=e.return;try{gp(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var c1=Math.ceil,jc=gi.ReactCurrentDispatcher,qm=gi.ReactCurrentOwner,on=gi.ReactCurrentBatchConfig,fe=0,nt=null,qe=null,lt=0,qt=0,Bs=dr(0),Xe=0,ul=null,Yr=0,Dh=0,Km=0,Na=null,Ot=null,Gm=0,ao=1/0,Jn=null,Uc=!1,vp=null,Qi=null,ku=!1,Fi=null,Bc=0,Da=0,wp=null,rc=-1,sc=0;function Ct(){return fe&6?$e():rc!==-1?rc:rc=$e()}function Yi(t){return t.mode&1?fe&2&&lt!==0?lt&-lt:KA.transition!==null?(sc===0&&(sc=rT()),sc):(t=Te,t!==0||(t=window.event,t=t===void 0?16:hT(t.type)),t):1}function vn(t,e,n,i){if(50<Da)throw Da=0,wp=null,Error(U(185));Cl(t,n,i),(!(fe&2)||t!==nt)&&(t===nt&&(!(fe&2)&&(Dh|=n),Xe===4&&Ni(t,lt)),Bt(t,i),n===1&&fe===0&&!(e.mode&1)&&(ao=$e()+500,Ah&&fr()))}function Bt(t,e){var n=t.callbackNode;KC(t,e);var i=Sc(t,t===nt?lt:0);if(i===0)n!==null&&A_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&A_(n),e===1)t.tag===0?qA(Ev.bind(null,t)):PT(Ev.bind(null,t)),zA(function(){!(fe&6)&&fr()}),n=null;else{switch(sT(i)){case 1:n=wm;break;case 4:n=nT;break;case 16:n=Ic;break;case 536870912:n=iT;break;default:n=Ic}n=CI(n,EI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function EI(t,e){if(rc=-1,sc=0,fe&6)throw Error(U(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var i=Sc(t,t===nt?lt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=zc(t,i);else{e=i;var r=fe;fe|=2;var s=II();(nt!==t||lt!==e)&&(Jn=null,ao=$e()+500,$r(t,e));do try{f1();break}catch(a){TI(t,a)}while(!0);Dm(),jc.current=s,fe=r,qe!==null?e=0:(nt=null,lt=0,e=Xe)}if(e!==0){if(e===2&&(r=Kf(t),r!==0&&(i=r,e=Ep(t,r))),e===1)throw n=ul,$r(t,0),Ni(t,i),Bt(t,$e()),n;if(e===6)Ni(t,i);else{if(r=t.current.alternate,!(i&30)&&!h1(r)&&(e=zc(t,i),e===2&&(s=Kf(t),s!==0&&(i=s,e=Ep(t,s))),e===1))throw n=ul,$r(t,0),Ni(t,i),Bt(t,$e()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:Rr(t,Ot,Jn);break;case 3:if(Ni(t,i),(i&130023424)===i&&(e=Gm+500-$e(),10<e)){if(Sc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ct(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=tp(Rr.bind(null,t,Ot,Jn),e);break}Rr(t,Ot,Jn);break;case 4:if(Ni(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-_n(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=$e()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*c1(i/1960))-i,10<i){t.timeoutHandle=tp(Rr.bind(null,t,Ot,Jn),i);break}Rr(t,Ot,Jn);break;case 5:Rr(t,Ot,Jn);break;default:throw Error(U(329))}}}return Bt(t,$e()),t.callbackNode===n?EI.bind(null,t):null}function Ep(t,e){var n=Na;return t.current.memoizedState.isDehydrated&&($r(t,e).flags|=256),t=zc(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&Tp(e)),t}function Tp(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function h1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!wn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ni(t,e){for(e&=~Km,e&=~Dh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),i=1<<n;t[n]=-1,e&=~i}}function Ev(t){if(fe&6)throw Error(U(327));Qs();var e=Sc(t,0);if(!(e&1))return Bt(t,$e()),null;var n=zc(t,e);if(t.tag!==0&&n===2){var i=Kf(t);i!==0&&(e=i,n=Ep(t,i))}if(n===1)throw n=ul,$r(t,0),Ni(t,e),Bt(t,$e()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rr(t,Ot,Jn),Bt(t,$e()),null}function Qm(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(ao=$e()+500,Ah&&fr())}}function Xr(t){Fi!==null&&Fi.tag===0&&!(fe&6)&&Qs();var e=fe;fe|=1;var n=on.transition,i=Te;try{if(on.transition=null,Te=1,t)return t()}finally{Te=i,on.transition=n,fe=e,!(fe&6)&&fr()}}function Ym(){qt=Bs.current,Pe(Bs)}function $r(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BA(n)),qe!==null)for(n=qe.return;n!==null;){var i=n;switch(Pm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ac();break;case 3:so(),Pe(jt),Pe(Et),jm();break;case 5:Fm(i);break;case 4:so();break;case 13:Pe(Me);break;case 19:Pe(Me);break;case 10:Mm(i.type._context);break;case 22:case 23:Ym()}n=n.return}if(nt=t,qe=t=Xi(t.current,null),lt=qt=e,Xe=0,ul=null,Km=Dh=Yr=0,Ot=Na=null,Vr!==null){for(e=0;e<Vr.length;e++)if(n=Vr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Vr=null}return t}function TI(t,e){do{var n=qe;try{if(Dm(),tc.current=Fc,Vc){for(var i=Oe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Vc=!1}if(Qr=0,et=Qe=Oe=null,Pa=!1,ol=0,qm.current=null,n===null||n.return===null){Xe=1,ul=e,qe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=lt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=lv(o);if(g!==null){g.flags&=-257,uv(g,o,a,s,e),g.mode&1&&av(s,u,e),e=g,l=u;var T=e.updateQueue;if(T===null){var I=new Set;I.add(l),e.updateQueue=I}else T.add(l);break e}else{if(!(e&1)){av(s,u,e),Xm();break e}l=Error(U(426))}}else if(Re&&a.mode&1){var w=lv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),uv(w,o,a,s,e),Rm(oo(l,a));break e}}s=l=oo(l,a),Xe!==4&&(Xe=2),Na===null?Na=[s]:Na.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=sI(s,l,e);tv(s,v);break e;case 1:a=l;var E=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Qi===null||!Qi.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=oI(s,a,e);tv(s,P);break e}}s=s.return}while(s!==null)}xI(n)}catch(M){e=M,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function II(){var t=jc.current;return jc.current=Fc,t===null?Fc:t}function Xm(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),nt===null||!(Yr&268435455)&&!(Dh&268435455)||Ni(nt,lt)}function zc(t,e){var n=fe;fe|=2;var i=II();(nt!==t||lt!==e)&&(Jn=null,$r(t,e));do try{d1();break}catch(r){TI(t,r)}while(!0);if(Dm(),fe=n,jc.current=i,qe!==null)throw Error(U(261));return nt=null,lt=0,Xe}function d1(){for(;qe!==null;)SI(qe)}function f1(){for(;qe!==null&&!FC();)SI(qe)}function SI(t){var e=kI(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?xI(t):qe=e,qm.current=null}function xI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o1(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,qe=null;return}}else if(n=s1(n,e,qt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Xe===0&&(Xe=5)}function Rr(t,e,n){var i=Te,r=on.transition;try{on.transition=null,Te=1,p1(t,e,n,i)}finally{on.transition=r,Te=i}return null}function p1(t,e,n,i){do Qs();while(Fi!==null);if(fe&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(GC(t,s),t===nt&&(qe=nt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ku||(ku=!0,CI(Ic,function(){return Qs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=on.transition,on.transition=null;var o=Te;Te=1;var a=fe;fe|=4,qm.current=null,l1(t,n),vI(n,t),MA(Zf),xc=!!Jf,Zf=Jf=null,t.current=n,u1(n),jC(),fe=a,Te=o,on.transition=s}else t.current=n;if(ku&&(ku=!1,Fi=t,Bc=r),s=t.pendingLanes,s===0&&(Qi=null),zC(n.stateNode),Bt(t,$e()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Uc)throw Uc=!1,t=vp,vp=null,t;return Bc&1&&t.tag!==0&&Qs(),s=t.pendingLanes,s&1?t===wp?Da++:(Da=0,wp=t):Da=0,fr(),null}function Qs(){if(Fi!==null){var t=sT(Bc),e=on.transition,n=Te;try{if(on.transition=null,Te=16>t?16:t,Fi===null)var i=!1;else{if(t=Fi,Fi=null,Bc=0,fe&6)throw Error(U(331));var r=fe;for(fe|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($=u;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:Ra(8,h,s)}var d=h.child;if(d!==null)d.return=h,$=d;else for(;$!==null;){h=$;var f=h.sibling,g=h.return;if(gI(h),h===u){$=null;break}if(f!==null){f.return=g,$=f;break}$=g}}}var T=s.alternate;if(T!==null){var I=T.child;if(I!==null){T.child=null;do{var w=I.sibling;I.sibling=null,I=w}while(I!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ra(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,$=v;break e}$=s.return}}var E=t.current;for($=E;$!==null;){o=$;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,$=x;else e:for(o=E;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nh(9,a)}}catch(M){Be(a,a.return,M)}if(a===o){$=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,$=P;break e}$=a.return}}if(fe=r,fr(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Sh,t)}catch{}i=!0}return i}finally{Te=n,on.transition=e}}return!1}function Tv(t,e,n){e=oo(n,e),e=sI(t,e,1),t=Gi(t,e,1),e=Ct(),t!==null&&(Cl(t,1,e),Bt(t,e))}function Be(t,e,n){if(t.tag===3)Tv(t,t,n);else for(;e!==null;){if(e.tag===3){Tv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qi===null||!Qi.has(i))){t=oo(n,t),t=oI(e,t,1),e=Gi(e,t,1),t=Ct(),e!==null&&(Cl(e,1,t),Bt(e,t));break}}e=e.return}}function m1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(lt&n)===n&&(Xe===4||Xe===3&&(lt&130023424)===lt&&500>$e()-Gm?$r(t,0):Km|=n),Bt(t,e)}function bI(t,e){e===0&&(t.mode&1?(e=yu,yu<<=1,!(yu&130023424)&&(yu=4194304)):e=1);var n=Ct();t=ci(t,e),t!==null&&(Cl(t,e,n),Bt(t,n))}function g1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bI(t,n)}function y1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),bI(t,n)}var kI;kI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,r1(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Re&&e.flags&1048576&&RT(e,Nc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ic(t,e),t=e.pendingProps;var r=no(e,Et.current);Gs(e,n),r=Bm(null,e,i,t,r,n);var s=zm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(i)?(s=!0,Pc(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Lm(e),r.updater=Rh,e.stateNode=r,r._reactInternals=e,lp(e,i,t,n),e=hp(null,e,i,!0,s,n)):(e.tag=0,Re&&s&&Am(e),bt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ic(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=v1(i),t=pn(i,t),r){case 0:e=cp(null,e,i,t,n);break e;case 1:e=dv(null,e,i,t,n);break e;case 11:e=cv(null,e,i,t,n);break e;case 14:e=hv(null,e,i,pn(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pn(i,r),cp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pn(i,r),dv(t,e,i,r,n);case 3:e:{if(cI(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,VT(t,e),Oc(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=oo(Error(U(423)),e),e=fv(t,e,i,n,r);break e}else if(i!==r){r=oo(Error(U(424)),e),e=fv(t,e,i,n,r);break e}else for(Kt=Ki(e.stateNode.containerInfo.firstChild),Qt=e,Re=!0,gn=null,n=OT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(io(),i===r){e=hi(t,e,n);break e}bt(t,e,i,n)}e=e.child}return e;case 5:return FT(e),t===null&&sp(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,ep(i,r)?o=null:s!==null&&ep(i,s)&&(e.flags|=32),uI(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&sp(e),null;case 13:return hI(t,e,n);case 4:return Vm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ro(e,null,i,n):bt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pn(i,r),cv(t,e,i,r,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,xe(Dc,i._currentValue),i._currentValue=o,s!==null)if(wn(s.value,o)){if(s.children===r.children&&!jt.current){e=hi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=oi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),op(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),op(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Gs(e,n),r=un(r),i=i(r),e.flags|=1,bt(t,e,i,n),e.child;case 14:return i=e.type,r=pn(i,e.pendingProps),r=pn(i.type,r),hv(t,e,i,r,n);case 15:return aI(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pn(i,r),ic(t,e),e.tag=1,Ut(i)?(t=!0,Pc(e)):t=!1,Gs(e,n),rI(e,i,r),lp(e,i,r,n),hp(null,e,i,!0,t,n);case 19:return dI(t,e,n);case 22:return lI(t,e,n)}throw Error(U(156,e.tag))};function CI(t,e){return tT(t,e)}function _1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,i){return new _1(t,e,n,i)}function Jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function v1(t){if(typeof t=="function")return Jm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ym)return 11;if(t===_m)return 14}return 2}function Xi(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Jm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return Wr(n.children,r,s,e);case gm:o=8,r|=8;break;case Nf:return t=rn(12,n,e,r|2),t.elementType=Nf,t.lanes=s,t;case Df:return t=rn(13,n,e,r),t.elementType=Df,t.lanes=s,t;case Mf:return t=rn(19,n,e,r),t.elementType=Mf,t.lanes=s,t;case FE:return Mh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LE:o=10;break e;case VE:o=9;break e;case ym:o=11;break e;case _m:o=14;break e;case Ai:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=rn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Wr(t,e,n,i){return t=rn(7,t,i,e),t.lanes=n,t}function Mh(t,e,n,i){return t=rn(22,t,i,e),t.elementType=FE,t.lanes=n,t.stateNode={isHidden:!1},t}function tf(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function nf(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function w1(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ld(0),this.expirationTimes=Ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ld(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Zm(t,e,n,i,r,s,o,a,l){return t=new w1(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lm(s),t}function E1(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function AI(t){if(!t)return sr;t=t._reactInternals;e:{if(cs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ut(n))return AT(t,n,e)}return e}function PI(t,e,n,i,r,s,o,a,l){return t=Zm(n,i,!0,t,r,s,o,a,l),t.context=AI(null),n=t.current,i=Ct(),r=Yi(n),s=oi(i,r),s.callback=e??null,Gi(n,s,r),t.current.lanes=r,Cl(t,r,i),Bt(t,i),t}function Oh(t,e,n,i){var r=e.current,s=Ct(),o=Yi(r);return n=AI(n),e.context===null?e.context=n:e.pendingContext=n,e=oi(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Gi(r,e,o),t!==null&&(vn(t,r,o,s),ec(t,r,o)),o}function $c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eg(t,e){Iv(t,e),(t=t.alternate)&&Iv(t,e)}function T1(){return null}var RI=typeof reportError=="function"?reportError:function(t){console.error(t)};function tg(t){this._internalRoot=t}Lh.prototype.render=tg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Oh(t,e,null,null)};Lh.prototype.unmount=tg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){Oh(null,t,null,null)}),e[ui]=null}};function Lh(t){this._internalRoot=t}Lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=lT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ri.length&&e!==0&&e<Ri[n].priority;n++);Ri.splice(n,0,t),n===0&&cT(t)}};function ng(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sv(){}function I1(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=$c(o);s.call(u)}}var o=PI(e,i,t,0,null,!1,!1,"",Sv);return t._reactRootContainer=o,t[ui]=o.current,tl(t.nodeType===8?t.parentNode:t),Xr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=$c(l);a.call(u)}}var l=Zm(t,0,!1,null,null,!1,!1,"",Sv);return t._reactRootContainer=l,t[ui]=l.current,tl(t.nodeType===8?t.parentNode:t),Xr(function(){Oh(e,l,n,i)}),l}function Fh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=$c(o);a.call(l)}}Oh(e,o,t,r)}else o=I1(n,e,t,r,i);return $c(o)}oT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fa(e.pendingLanes);n!==0&&(Em(e,n|1),Bt(e,$e()),!(fe&6)&&(ao=$e()+500,fr()))}break;case 13:Xr(function(){var i=ci(t,1);if(i!==null){var r=Ct();vn(i,t,1,r)}}),eg(t,1)}};Tm=function(t){if(t.tag===13){var e=ci(t,134217728);if(e!==null){var n=Ct();vn(e,t,134217728,n)}eg(t,134217728)}};aT=function(t){if(t.tag===13){var e=Yi(t),n=ci(t,e);if(n!==null){var i=Ct();vn(n,t,e,i)}eg(t,e)}};lT=function(){return Te};uT=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Wf=function(t,e,n){switch(e){case"input":if(Vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Ch(i);if(!r)throw Error(U(90));UE(i),Vf(i,r)}}}break;case"textarea":zE(t,n);break;case"select":e=n.value,e!=null&&Ws(t,!!n.multiple,e,!1)}};QE=Qm;YE=Xr;var S1={usingClientEntryPoint:!1,Events:[Pl,Os,Ch,KE,GE,Qm]},ta={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x1={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ZE(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||T1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{Sh=Cu.inject(x1),Mn=Cu}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S1;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ng(e))throw Error(U(200));return E1(t,e,null,n)};Jt.createRoot=function(t,e){if(!ng(t))throw Error(U(299));var n=!1,i="",r=RI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Zm(t,1,!1,null,null,n,!1,i,r),t[ui]=e.current,tl(t.nodeType===8?t.parentNode:t),new tg(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=ZE(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Xr(t)};Jt.hydrate=function(t,e,n){if(!Vh(e))throw Error(U(200));return Fh(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!ng(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=RI;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PI(e,null,t,1,n??null,r,!1,s,o),t[ui]=e.current,tl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Lh(e)};Jt.render=function(t,e,n){if(!Vh(e))throw Error(U(200));return Fh(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!Vh(t))throw Error(U(40));return t._reactRootContainer?(Xr(function(){Fh(null,null,t,!1,function(){t._reactRootContainer=null,t[ui]=null})}),!0):!1};Jt.unstable_batchedUpdates=Qm;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Vh(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Fh(t,e,n,!1,i)};Jt.version="18.3.1-next-f1338f8080-20240426";function NI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NI)}catch(t){console.error(t)}}NI(),NE.exports=Jt;var b1=NE.exports,xv=b1;Pf.createRoot=xv.createRoot,Pf.hydrateRoot=xv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cl.apply(this,arguments)}var ji;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ji||(ji={}));const bv="popstate";function k1(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Ip("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Wc(r)}return A1(e,n,null,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ig(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C1(){return Math.random().toString(36).substr(2,8)}function kv(t,e){return{usr:t.state,key:t.key,idx:e}}function Ip(t,e,n,i){return n===void 0&&(n=null),cl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Io(e):e,{state:n,key:e&&e.key||i||C1()})}function Wc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function A1(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=ji.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(cl({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=ji.Pop;let w=h(),v=w==null?null:w-u;u=w,l&&l({action:a,location:I.location,delta:v})}function f(w,v){a=ji.Push;let E=Ip(I.location,w,v);u=h()+1;let x=kv(E,u),P=I.createHref(E);try{o.pushState(x,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(P)}s&&l&&l({action:a,location:I.location,delta:1})}function g(w,v){a=ji.Replace;let E=Ip(I.location,w,v);u=h();let x=kv(E,u),P=I.createHref(E);o.replaceState(x,"",P),s&&l&&l({action:a,location:I.location,delta:0})}function T(w){let v=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof w=="string"?w:Wc(w);return E=E.replace(/ $/,"%20"),Le(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let I={get action(){return a},get location(){return t(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(bv,d),l=w,()=>{r.removeEventListener(bv,d),l=null}},createHref(w){return e(r,w)},createURL:T,encodeLocation(w){let v=T(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(w){return o.go(w)}};return I}var Cv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cv||(Cv={}));function P1(t,e,n){return n===void 0&&(n="/"),R1(t,e,n)}function R1(t,e,n,i){let r=typeof e=="string"?Io(e):e,s=lo(r.pathname||"/",n);if(s==null)return null;let o=DI(t);N1(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=$1(s);a=B1(o[l],u)}return a}function DI(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Le(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Ji([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Le(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),DI(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:j1(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of MI(s.path))r(s,o,l)}),e}function MI(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=MI(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function N1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:U1(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const D1=/^:[\w-]+$/,M1=3,O1=2,L1=1,V1=10,F1=-2,Av=t=>t==="*";function j1(t,e){let n=t.split("/"),i=n.length;return n.some(Av)&&(i+=F1),e&&(i+=O1),n.filter(r=>!Av(r)).reduce((r,s)=>r+(D1.test(s)?M1:s===""?L1:V1),i)}function U1(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function B1(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Sp({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Ji([s,d.pathname]),pathnameBase:G1(Ji([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ji([s,d.pathnameBase]))}return o}function Sp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=z1(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let I=a[d]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const T=a[d];return g&&!T?u[f]=void 0:u[f]=(T||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function z1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ig(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function $1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ig(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function lo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const W1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H1=t=>W1.test(t);function q1(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Io(t):t,s;if(n)if(H1(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ig(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Pv(n.substring(1),"/"):s=Pv(n,e)}else s=e;return{pathname:s,search:Q1(i),hash:Y1(r)}}function Pv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function rf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function K1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rg(t,e){let n=K1(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function sg(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Io(t):(r=cl({},t),Le(!r.pathname||!r.pathname.includes("?"),rf("?","pathname","search",r)),Le(!r.pathname||!r.pathname.includes("#"),rf("#","pathname","hash",r)),Le(!r.search||!r.search.includes("#"),rf("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=q1(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Ji=t=>t.join("/").replace(/\/\/+/g,"/"),G1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Q1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Y1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function X1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OI=["post","put","patch","delete"];new Set(OI);const J1=["get",...OI];new Set(J1);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hl.apply(this,arguments)}const jh=O.createContext(null),LI=O.createContext(null),yi=O.createContext(null),Uh=O.createContext(null),pr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),VI=O.createContext(null);function Z1(t,e){let{relative:n}=e===void 0?{}:e;So()||Le(!1);let{basename:i,navigator:r}=O.useContext(yi),{hash:s,pathname:o,search:a}=Bh(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Ji([i,o])),r.createHref({pathname:l,search:a,hash:s})}function So(){return O.useContext(Uh)!=null}function mr(){return So()||Le(!1),O.useContext(Uh).location}function FI(t){O.useContext(yi).static||O.useLayoutEffect(t)}function xo(){let{isDataRoute:t}=O.useContext(pr);return t?dP():eP()}function eP(){So()||Le(!1);let t=O.useContext(jh),{basename:e,future:n,navigator:i}=O.useContext(yi),{matches:r}=O.useContext(pr),{pathname:s}=mr(),o=JSON.stringify(rg(r,n.v7_relativeSplatPath)),a=O.useRef(!1);return FI(()=>{a.current=!0}),O.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=sg(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ji([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function Bh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(yi),{matches:r}=O.useContext(pr),{pathname:s}=mr(),o=JSON.stringify(rg(r,i.v7_relativeSplatPath));return O.useMemo(()=>sg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function tP(t,e){return nP(t,e)}function nP(t,e,n,i){So()||Le(!1);let{navigator:r}=O.useContext(yi),{matches:s}=O.useContext(pr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=mr(),h;if(e){var d;let w=typeof e=="string"?Io(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||Le(!1),h=w}else h=u;let f=h.pathname||"/",g=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let T=P1(t,{pathname:g}),I=aP(T&&T.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ji([l,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Ji([l,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,i);return e&&I?O.createElement(Uh.Provider,{value:{location:hl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ji.Pop}},I):I}function iP(){let t=hP(),e=X1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const rP=O.createElement(iP,null);class sP extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(pr.Provider,{value:this.props.routeContext},O.createElement(VI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oP(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(jh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(pr.Provider,{value:e},i)}function aP(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Le(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:g}=n,T=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||T){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,T=!1,I=null,w=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,I=d.route.errorElement||rP,l&&(u<0&&f===0?(fP("route-fallback"),T=!0,w=null):u===f&&(T=!0,w=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),E=()=>{let x;return g?x=I:T?x=w:d.route.Component?x=O.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=h,O.createElement(oP,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(sP,{location:n.location,revalidation:n.revalidation,component:I,error:g,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var jI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jI||{}),UI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(UI||{});function lP(t){let e=O.useContext(jh);return e||Le(!1),e}function uP(t){let e=O.useContext(LI);return e||Le(!1),e}function cP(t){let e=O.useContext(pr);return e||Le(!1),e}function BI(t){let e=cP(),n=e.matches[e.matches.length-1];return n.route.id||Le(!1),n.route.id}function hP(){var t;let e=O.useContext(VI),n=uP(),i=BI();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function dP(){let{router:t}=lP(jI.UseNavigateStable),e=BI(UI.UseNavigateStable),n=O.useRef(!1);return FI(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,hl({fromRouteId:e},s)))},[t,e])}const Rv={};function fP(t,e,n){Rv[t]||(Rv[t]=!0)}function pP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xp(t){let{to:e,replace:n,state:i,relative:r}=t;So()||Le(!1);let{future:s,static:o}=O.useContext(yi),{matches:a}=O.useContext(pr),{pathname:l}=mr(),u=xo(),h=sg(e,rg(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return O.useEffect(()=>u(JSON.parse(d),{replace:n,state:i,relative:r}),[u,d,r,n,i]),null}function Cn(t){Le(!1)}function mP(t){let{basename:e="/",children:n=null,location:i,navigationType:r=ji.Pop,navigator:s,static:o=!1,future:a}=t;So()&&Le(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:o,future:hl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Io(i));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:T="default"}=i,I=O.useMemo(()=>{let w=lo(h,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:g,key:T},navigationType:r}},[l,h,d,f,g,T,r]);return I==null?null:O.createElement(yi.Provider,{value:u},O.createElement(Uh.Provider,{children:n,value:I}))}function gP(t){let{children:e,location:n}=t;return tP(bp(e),n)}new Promise(()=>{});function bp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,bp(i.props.children,s));return}i.type!==Cn&&Le(!1),!i.props.index||!i.props.children||Le(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=bp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hc.apply(this,arguments)}function zI(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function yP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _P(t,e){return t.button===0&&(!e||e==="_self")&&!yP(t)}const vP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],EP="6";try{window.__reactRouterVersion=EP}catch{}const TP=O.createContext({isTransitioning:!1}),IP="startTransition",Nv=mC[IP];function SP(t){let{basename:e,children:n,future:i,window:r}=t,s=O.useRef();s.current==null&&(s.current=k1({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=O.useCallback(d=>{u&&Nv?Nv(()=>l(d)):l(d)},[l,u]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>pP(i),[i]),O.createElement(mP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const xP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dl=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d}=e,f=zI(e,vP),{basename:g}=O.useContext(yi),T,I=!1;if(typeof u=="string"&&bP.test(u)&&(T=u,xP))try{let x=new URL(window.location.href),P=u.startsWith("//")?new URL(x.protocol+u):new URL(u),M=lo(P.pathname,g);P.origin===x.origin&&M!=null?u=M+P.search+P.hash:I=!0}catch{}let w=Z1(u,{relative:r}),v=CP(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function E(x){i&&i(x),x.defaultPrevented||v(x)}return O.createElement("a",Hc({},f,{href:T||w,onClick:I||s?i:E,ref:n,target:l}))}),Is=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,d=zI(e,wP),f=Bh(l,{relative:d.relative}),g=mr(),T=O.useContext(LI),{navigator:I,basename:w}=O.useContext(yi),v=T!=null&&AP(f)&&u===!0,E=I.encodeLocation?I.encodeLocation(f).pathname:f.pathname,x=g.pathname,P=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;r||(x=x.toLowerCase(),P=P?P.toLowerCase():null,E=E.toLowerCase()),P&&w&&(P=lo(P,w)||P);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let N=x===E||!o&&x.startsWith(E)&&x.charAt(M)==="/",S=P!=null&&(P===E||!o&&P.startsWith(E)&&P.charAt(E.length)==="/"),_={isActive:N,isPending:S,isTransitioning:v},k=N?i:void 0,C;typeof s=="function"?C=s(_):C=[s,N?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(_):a;return O.createElement(dl,Hc({},d,{"aria-current":k,className:C,ref:n,style:R,to:l,viewTransition:u}),typeof h=="function"?h(_):h)});var kp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kp||(kp={}));var Dv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Dv||(Dv={}));function kP(t){let e=O.useContext(jh);return e||Le(!1),e}function CP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=xo(),u=mr(),h=Bh(t,{relative:o});return O.useCallback(d=>{if(_P(d,n)){d.preventDefault();let f=i!==void 0?i:Wc(u)===Wc(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,n,t,s,o,a])}function AP(t,e){e===void 0&&(e={});let n=O.useContext(TP);n==null&&Le(!1);let{basename:i}=kP(kp.useViewTransitionState),r=Bh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=lo(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=lo(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Sp(r.pathname,o)!=null||Sp(r.pathname,s)!=null}var Mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},PP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},WI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),i.push(n[h],n[d],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($I(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||d==null)throw new RP;const f=s<<2|a>>4;if(i.push(f),u!==64){const g=a<<4&240|u>>2;if(i.push(g),d!==64){const T=u<<6&192|d;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NP=function(t){const e=$I(t);return WI.encodeByteArray(e,!0)},qc=function(t){return NP(t).replace(/\./g,"")},HI=function(t){try{return WI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=()=>DP().__FIREBASE_DEFAULTS__,OP=()=>{if(typeof process>"u"||typeof Mv>"u")return;const t=Mv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HI(t[1]);return e&&JSON.parse(e)},zh=()=>{try{return MP()||OP()||LP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qI=t=>{var e,n;return(n=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VP=t=>{const e=qI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},KI=()=>{var t;return(t=zh())===null||t===void 0?void 0:t.config},GI=t=>{var e;return(e=zh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qc(JSON.stringify(n)),qc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function BP(){var t;const e=(t=zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $P(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WP(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HP(){return!BP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YI(){try{return typeof indexedDB=="object"}catch{return!1}}function XI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function qP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="FirebaseError";class Sn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=KP,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hs.prototype.create)}}class hs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?GP(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Sn(r,a,i)}}function GP(t,e){return t.replace(QP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const QP=/\{\$([^}]+)}/g;function YP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Ov(s)&&Ov(o)){if(!Kc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ov(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ma(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ga(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function XP(t,e){const n=new JP(t,e);return n.subscribe.bind(n)}class JP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");ZP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=sf),r.error===void 0&&(r.error=sf),r.complete===void 0&&(r.complete=sf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=1e3,tR=2,nR=4*60*60*1e3,iR=.5;function Lv(t,e=eR,n=tR){const i=e*Math.pow(n,t),r=Math.round(iR*i*(Math.random()-.5)*2);return Math.min(nR,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t){return t&&t._delegate?t._delegate:t}class En{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new FP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oR(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:sR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sR(t){return t===Nr?void 0:t}function oR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const lR={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},uR=ue.INFO,cR={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},hR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=cR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $h{constructor(e){this.name=e,this._logLevel=uR,this._logHandler=hR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const dR=(t,e)=>e.some(n=>t instanceof n);let Vv,Fv;function fR(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pR(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JI=new WeakMap,Cp=new WeakMap,ZI=new WeakMap,of=new WeakMap,og=new WeakMap;function mR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Zi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JI.set(n,t)}).catch(()=>{}),og.set(e,t),e}function gR(t){if(Cp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Cp.set(t,e)}let Ap={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yR(t){Ap=t(Ap)}function _R(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(af(this),e,...n);return ZI.set(i,e.sort?e.sort():[e]),Zi(i)}:pR().includes(t)?function(...e){return t.apply(af(this),e),Zi(JI.get(this))}:function(...e){return Zi(t.apply(af(this),e))}}function vR(t){return typeof t=="function"?_R(t):(t instanceof IDBTransaction&&gR(t),dR(t,fR())?new Proxy(t,Ap):t)}function Zi(t){if(t instanceof IDBRequest)return mR(t);if(of.has(t))return of.get(t);const e=vR(t);return e!==t&&(of.set(t,e),og.set(e,t)),e}const af=t=>og.get(t);function eS(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Zi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Zi(o.result),l.oldVersion,l.newVersion,Zi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const wR=["get","getKey","getAll","getAllKeys","count"],ER=["put","add","delete","clear"],lf=new Map;function jv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lf.get(e))return lf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=ER.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||wR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return lf.set(e,s),s}yR(t=>({...t,get:(e,n,i)=>jv(e,n)||t.get(e,n,i),has:(e,n)=>!!jv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function IR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pp="@firebase/app",Uv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new $h("@firebase/app"),SR="@firebase/app-compat",xR="@firebase/analytics-compat",bR="@firebase/analytics",kR="@firebase/app-check-compat",CR="@firebase/app-check",AR="@firebase/auth",PR="@firebase/auth-compat",RR="@firebase/database",NR="@firebase/data-connect",DR="@firebase/database-compat",MR="@firebase/functions",OR="@firebase/functions-compat",LR="@firebase/installations",VR="@firebase/installations-compat",FR="@firebase/messaging",jR="@firebase/messaging-compat",UR="@firebase/performance",BR="@firebase/performance-compat",zR="@firebase/remote-config",$R="@firebase/remote-config-compat",WR="@firebase/storage",HR="@firebase/storage-compat",qR="@firebase/firestore",KR="@firebase/vertexai-preview",GR="@firebase/firestore-compat",QR="firebase",YR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",XR={[Pp]:"fire-core",[SR]:"fire-core-compat",[bR]:"fire-analytics",[xR]:"fire-analytics-compat",[CR]:"fire-app-check",[kR]:"fire-app-check-compat",[AR]:"fire-auth",[PR]:"fire-auth-compat",[RR]:"fire-rtdb",[NR]:"fire-data-connect",[DR]:"fire-rtdb-compat",[MR]:"fire-fn",[OR]:"fire-fn-compat",[LR]:"fire-iid",[VR]:"fire-iid-compat",[FR]:"fire-fcm",[jR]:"fire-fcm-compat",[UR]:"fire-perf",[BR]:"fire-perf-compat",[zR]:"fire-rc",[$R]:"fire-rc-compat",[WR]:"fire-gcs",[HR]:"fire-gcs-compat",[qR]:"fire-fst",[GR]:"fire-fst-compat",[KR]:"fire-vertex","fire-js":"fire-js",[QR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,JR=new Map,Np=new Map;function Bv(t,e){try{t.container.addComponent(e)}catch(n){di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bn(t){const e=t.name;if(Np.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;Np.set(e,t);for(const n of Gc.values())Bv(n,t);for(const n of JR.values())Bv(n,t);return!0}function Dl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new hs("app","Firebase",ZR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=YR;function tS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Rp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw er.create("bad-app-name",{appName:String(r)});if(n||(n=KI()),!n)throw er.create("no-options");const s=Gc.get(r);if(s){if(Kc(n,s.options)&&Kc(i,s.config))return s;throw er.create("duplicate-app",{appName:r})}const o=new aR(r);for(const l of Np.values())o.addComponent(l);const a=new eN(n,i,o);return Gc.set(r,a),a}function nS(t=Rp){const e=Gc.get(t);if(!e&&t===Rp&&KI())return tS();if(!e)throw er.create("no-app",{appName:t});return e}function an(t,e,n){var i;let r=(i=XR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(a.join(" "));return}Bn(new En(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="firebase-heartbeat-database",nN=1,fl="firebase-heartbeat-store";let uf=null;function iS(){return uf||(uf=eS(tN,nN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fl)}catch(n){console.warn(n)}}}}).catch(t=>{throw er.create("idb-open",{originalErrorMessage:t.message})})),uf}async function iN(t){try{const n=(await iS()).transaction(fl),i=await n.objectStore(fl).get(rS(t));return await n.done,i}catch(e){if(e instanceof Sn)di.warn(e.message);else{const n=er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(n.message)}}}async function zv(t,e){try{const i=(await iS()).transaction(fl,"readwrite");await i.objectStore(fl).put(e,rS(t)),await i.done}catch(n){if(n instanceof Sn)di.warn(n.message);else{const i=er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(i.message)}}}function rS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=1024,sN=30*24*60*60*1e3;class oN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$v();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=sN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){di.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$v(),{heartbeatsToSend:i,unsentEntries:r}=aN(this._heartbeatsCache.heartbeats),s=qc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return di.warn(n),""}}}function $v(){return new Date().toISOString().substring(0,10)}function aN(t,e=rN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Wv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Wv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class lN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YI()?XI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wv(t){return qc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t){Bn(new En("platform-logger",e=>new TR(e),"PRIVATE")),Bn(new En("heartbeat",e=>new oN(e),"PRIVATE")),an(Pp,Uv,t),an(Pp,Uv,"esm2017"),an("fire-js","")}uN("");function ag(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function sS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cN=sS,oS=new hs("auth","Firebase",sS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new $h("@firebase/auth");function hN(t,...e){Qc.logLevel<=ue.WARN&&Qc.warn(`Auth (${bo}): ${t}`,...e)}function ac(t,...e){Qc.logLevel<=ue.ERROR&&Qc.error(`Auth (${bo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,...e){throw lg(t,...e)}function Ln(t,...e){return lg(t,...e)}function aS(t,e,n){const i=Object.assign(Object.assign({},cN()),{[e]:n});return new hs("auth","Firebase",i).create(e,{appName:t.name})}function ai(t){return aS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return oS.create(t,...e)}function Z(t,e,...n){if(!t)throw lg(e,...n)}function ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function fi(t,e){t||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dN(){return Hv()==="http:"||Hv()==="https:"}function Hv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dN()||QI()||"connection"in navigator)?navigator.onLine:!0}function pN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.shortDelay=e,this.longDelay=n,fi(n>e,"Short delay should be less than long delay!"),this.isMobile=UP()||$P()}get(){return fN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){fi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new Ml(3e4,6e4);function _i(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Hn(t,e,n,i,r={}){return uS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Nl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return zP()||(u.referrerPolicy="no-referrer"),lS.fetch()(cS(t,t.config.apiHost,n,a),u)})}async function uS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},mN),e);try{const r=new _N(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Au(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Au(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Au(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Au(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw aS(t,h,u);Tn(t,h)}}catch(r){if(r instanceof Sn)throw r;Tn(t,"network-request-failed",{message:String(r)})}}async function Ol(t,e,n,i,r={}){const s=await Hn(t,e,n,i,r);return"mfaPendingCredential"in s&&Tn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?ug(t.config,r):`${t.config.apiScheme}://${r}`}function yN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _N{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ln(this.auth,"network-request-failed")),gN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Au(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ln(t,e,i);return r.customData._tokenResponse=n,r}function qv(t){return t!==void 0&&t.enterprise!==void 0}class vN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function wN(t,e){return Hn(t,"GET","/v2/recaptchaConfig",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e){return Hn(t,"POST","/v1/accounts:delete",e)}async function hS(t,e){return Hn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TN(t,e=!1){const n=Fe(t),i=await n.getIdToken(e),r=cg(i);Z(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ma(cf(r.auth_time)),issuedAtTime:Ma(cf(r.iat)),expirationTime:Ma(cf(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cf(t){return Number(t)*1e3}function cg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ac("JWT malformed, contained fewer than 3 sections"),null;try{const r=HI(n);return r?JSON.parse(r):(ac("Failed to decode base64 JWT payload"),null)}catch(r){return ac("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Kv(t){const e=cg(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sn&&IN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function IN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ma(this.lastLoginAt),this.creationTime=Ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await uo(t,hS(n,{idToken:i}));Z(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?dS(s.providerUserInfo):[],a=bN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Mp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function xN(t){const e=Fe(t);await Yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function dS(t){return t.map(e=>{var{providerId:n}=e,i=ag(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e){const n=await uS(t,{},async()=>{const i=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=cS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",lS.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CN(t,e){return Hn(t,"POST","/v2/accounts:revokeToken",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=Kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await kN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Ys;return i&&(Z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Z(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ys,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ri{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await uo(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TN(this,e)}reload(){return xN(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Yc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(ai(this.auth));const e=await this.getIdToken();return await uo(this,EN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:P,isAnonymous:M,providerData:N,stsTokenManager:S}=n;Z(x&&S,e,"internal-error");const _=Ys.fromJSON(this.name,S);Z(typeof x=="string",e,"internal-error"),xi(d,e.name),xi(f,e.name),Z(typeof P=="boolean",e,"internal-error"),Z(typeof M=="boolean",e,"internal-error"),xi(g,e.name),xi(T,e.name),xi(I,e.name),xi(w,e.name),xi(v,e.name),xi(E,e.name);const k=new ri({uid:x,auth:e,email:f,emailVerified:P,displayName:d,isAnonymous:M,photoURL:T,phoneNumber:g,tenantId:I,stsTokenManager:_,createdAt:v,lastLoginAt:E});return N&&Array.isArray(N)&&(k.providerData=N.map(C=>Object.assign({},C))),w&&(k._redirectEventId=w),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ys;r.updateFromServerResponse(n);const s=new ri({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Yc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Z(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?dS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ys;a.updateFromIdToken(i);const l=new ri({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Mp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;function si(t){fi(t instanceof Function,"Expected a class definition");let e=Gv.get(t);return e?(fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fS.type="NONE";const Qv=fS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e,n){return`firebase:${t}:${e}:${n}`}class Xs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=lc(this.userKey,r.apiKey,s),this.fullPersistenceKey=lc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Xs(si(Qv),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||si(Qv);const o=lc(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=ri._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Xs(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Xs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vS(e))return"Blackberry";if(wS(e))return"Webos";if(mS(e))return"Safari";if((e.includes("chrome/")||gS(e))&&!e.includes("edge/"))return"Chrome";if(_S(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function pS(t=Tt()){return/firefox\//i.test(t)}function mS(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gS(t=Tt()){return/crios\//i.test(t)}function yS(t=Tt()){return/iemobile/i.test(t)}function _S(t=Tt()){return/android/i.test(t)}function vS(t=Tt()){return/blackberry/i.test(t)}function wS(t=Tt()){return/webos/i.test(t)}function hg(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AN(t=Tt()){var e;return hg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PN(){return WP()&&document.documentMode===10}function ES(t=Tt()){return hg(t)||_S(t)||wS(t)||vS(t)||/windows phone/i.test(t)||yS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t,e=[]){let n;switch(t){case"Browser":n=Yv(Tt());break;case"Worker":n=`${Yv(Tt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e={}){return Hn(t,"GET","/v2/passwordPolicy",_i(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=6;class MN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:DN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xv(this),this.idTokenSubscription=new Xv(this),this.beforeStateQueue=new RN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=si(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Xs.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hS(this,{idToken:e}),i=await ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(ai(this));const n=e?Fe(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NN(this),n=new MN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await CN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&si(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Xs.create(this,[si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gr(t){return Fe(t)}class Xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=XP(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LN(t){Wh=t}function IS(t){return Wh.loadJS(t)}function VN(){return Wh.recaptchaEnterpriseScript}function FN(){return Wh.gapiScript}function jN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const UN="recaptcha-enterprise",BN="NO_RECAPTCHA";class zN{constructor(e){this.type=UN,this.auth=gr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{wN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new vN(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;qv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(BN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&qv(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=VN();l.length!==0&&(l+=a),IS(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Jv(t,e,n,i=!1){const r=new zN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Xc(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Jv(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Jv(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e){const n=Dl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Kc(s,e??{}))return r;Tn(r,"already-initialized")}return n.initialize({options:e})}function WN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(si);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function HN(t,e,n){const i=gr(t);Z(i._canInitEmulator,i,"emulator-config-failed"),Z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=SS(e),{host:o,port:a}=qN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),KN()}function SS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qN(t){const e=SS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Zv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Zv(o)}}}function Zv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function KN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,n){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}async function GN(t,e){return Hn(t,"POST","/v1/accounts:update",e)}async function QN(t,e){return Hn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e){return Ol(t,"POST","/v1/accounts:signInWithPassword",_i(t,e))}async function XN(t,e){return Hn(t,"POST","/v1/accounts:sendOobCode",_i(t,e))}async function JN(t,e){return XN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return Ol(t,"POST","/v1/accounts:signInWithEmailLink",_i(t,e))}async function eD(t,e){return Ol(t,"POST","/v1/accounts:signInWithEmailLink",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends dg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new pl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new pl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xc(e,n,"signInWithPassword",YN);case"emailLink":return ZN(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xc(e,i,"signUpPassword",QN);case"emailLink":return eD(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e){return Ol(t,"POST","/v1/accounts:signInWithIdp",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="http://localhost";class Jr extends dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=ag(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Jr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Js(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:tD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iD(t){const e=ma(ga(t)).link,n=e?ma(ga(e)).deep_link_id:null,i=ma(ga(t)).deep_link_id;return(i?ma(ga(i)).link:null)||i||n||e||t}class fg{constructor(e){var n,i,r,s,o,a;const l=ma(ga(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=nD((r=l.mode)!==null&&r!==void 0?r:null);Z(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=iD(e);try{return new fg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.providerId=ds.PROVIDER_ID}static credential(e,n){return pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=fg.parseLink(n);return Z(i,"argument-error"),pl._fromEmailAndCode(e,i.code,i.tenantId)}}ds.PROVIDER_ID="password";ds.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ds.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends xS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Ll{constructor(){super("facebook.com")}static credential(e){return Jr._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jr._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Ll{constructor(){super("github.com")}static credential(e){return Jr._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Ll{constructor(){super("twitter.com")}static credential(e,n){return Jr._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Li.credential(n,i)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,e){return Ol(t,"POST","/v1/accounts:signUp",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ri._fromIdTokenResponse(e,i,r),o=e0(i);return new Zr({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=e0(i);return new Zr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function e0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends Sn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Jc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Jc(e,n,i,r)}}function bS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jc._fromErrorAndOperation(t,s,e,i):s})}async function sD(t,e,n=!1){const i=await uo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(t,e,n=!1){const{auth:i}=t;if(Dn(i.app))return Promise.reject(ai(i));const r="reauthenticate";try{const s=await uo(t,bS(i,r,e,t),n);Z(s.idToken,i,"internal-error");const o=cg(s.idToken);Z(o,i,"internal-error");const{sub:a}=o;return Z(t.uid===a,i,"user-mismatch"),Zr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Tn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(t,e,n=!1){if(Dn(t.app))return Promise.reject(ai(t));const i="signIn",r=await bS(t,i,e),s=await Zr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function oD(t,e){return CS(gr(t),e)}async function aD(t,e){return kS(Fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t){const e=gr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lD(t,e,n){const i=gr(t);await Xc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",JN)}async function uD(t,e,n){if(Dn(t.app))return Promise.reject(ai(t));const i=gr(t),o=await Xc(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&AS(t),l}),a=await Zr._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function cD(t,e,n){return Dn(t.app)?Promise.reject(ai(t)):oD(Fe(t),ds.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&AS(t),i})}function hD(t,e){return dD(Fe(t),null,e)}async function dD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await uo(t,GN(i,s));await t._updateTokensIfNecessary(o,!0)}function fD(t,e,n,i){return Fe(t).onIdTokenChanged(e,n,i)}function pD(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function mD(t,e,n,i){return Fe(t).onAuthStateChanged(e,n,i)}function gD(t){return Fe(t).signOut()}const Zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zc,"1"),this.storage.removeItem(Zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1e3,_D=10;class RS extends PS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ES(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);PN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,_D):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RS.type="LOCAL";const vD=RS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS extends PS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}NS.type="SESSION";const DS=NS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Hh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await wD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=pg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function TD(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function ID(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xD(){return MS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="firebaseLocalStorageDb",bD=1,eh="firebaseLocalStorage",LS="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qh(t,e){return t.transaction([eh],e?"readwrite":"readonly").objectStore(eh)}function kD(){const t=indexedDB.deleteDatabase(OS);return new Vl(t).toPromise()}function Op(){const t=indexedDB.open(OS,bD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(eh,{keyPath:LS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(eh)?e(i):(i.close(),await kD(),e(await Op()))})})}async function t0(t,e,n){const i=qh(t,!0).put({[LS]:e,value:n});return new Vl(i).toPromise()}async function CD(t,e){const n=qh(t,!1).get(e),i=await new Vl(n).toPromise();return i===void 0?null:i.value}function n0(t,e){const n=qh(t,!0).delete(e);return new Vl(n).toPromise()}const AD=800,PD=3;class VS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Op(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>PD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hh._getInstance(xD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ID(),!this.activeServiceWorker)return;this.sender=new ED(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Op();return await t0(e,Zc,"1"),await n0(e,Zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>t0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>CD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=qh(r,!1).getAll();return new Vl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VS.type="LOCAL";const RD=VS;new Ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t,e){return e?si(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DD(t){return CS(t.auth,new mg(t),t.bypassAuthState)}function MD(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),kS(n,new mg(t),t.bypassAuthState)}async function OD(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),sD(n,new mg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DD;case"linkViaPopup":case"linkViaRedirect":return OD;case"reauthViaPopup":case"reauthViaRedirect":return MD;default:Tn(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new Ml(2e3,1e4);class zs extends FS{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,zs.currentPopupAction&&zs.currentPopupAction.cancel(),zs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LD.get())};e()}}zs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="pendingRedirect",uc=new Map;class FD extends FS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=uc.get(this.auth._key());if(!e){try{const i=await jD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jD(t,e){const n=zD(e),i=BD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function UD(t,e){uc.set(t._key(),e)}function BD(t){return si(t._redirectPersistence)}function zD(t){return lc(VD,t.config.apiKey,t.name)}async function $D(t,e,n=!1){if(Dn(t.app))return Promise.reject(ai(t));const i=gr(t),r=ND(i,e),o=await new FD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=10*60*1e3;class HD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!jS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ln(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WD&&this.cachedEventUids.clear(),this.cachedEventUids.has(i0(e))}saveEventToCache(e){this.cachedEventUids.add(i0(e)),this.lastProcessedEventTime=Date.now()}}function i0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e={}){return Hn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QD=/^https?/;async function YD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KD(t);for(const n of e)try{if(XD(n))return}catch{}Tn(t,"unauthorized-domain")}function XD(t){const e=Dp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!QD.test(n))return!1;if(GD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Ml(3e4,6e4);function r0(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZD(t){return new Promise((e,n)=>{var i,r,s;function o(){r0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r0(),n(Ln(t,"network-request-failed"))},timeout:JD.get()})}if(!((r=(i=Vn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Vn().gapi)===null||s===void 0)&&s.load)o();else{const a=jN("iframefcb");return Vn()[a]=()=>{gapi.load?o():n(Ln(t,"network-request-failed"))},IS(`${FN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw cc=null,e})}let cc=null;function eM(t){return cc=cc||ZD(t),cc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new Ml(5e3,15e3),nM="__/auth/iframe",iM="emulator/auth/iframe",rM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oM(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ug(e,iM):`https://${t.config.authDomain}/${nM}`,i={apiKey:e.apiKey,appName:t.name,v:bo},r=sM.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Nl(i).slice(1)}`}async function aM(t){const e=await eM(t),n=Vn().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:oM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Ln(t,"network-request-failed"),a=Vn().setTimeout(()=>{s(o)},tM.get());function l(){Vn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uM=500,cM=600,hM="_blank",dM="http://localhost";class s0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fM(t,e,n,i=uM,r=cM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},lM),{width:i.toString(),height:r.toString(),top:s,left:o}),u=Tt().toLowerCase();n&&(a=gS(u)?hM:n),pS(u)&&(e=e||dM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,T])=>`${f}${g}=${T},`,"");if(AN(u)&&a!=="_self")return pM(e||"",a),new s0(null);const d=window.open(e||"",a,h);Z(d,t,"popup-blocked");try{d.focus()}catch{}return new s0(d)}function pM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="__/auth/handler",gM="emulator/auth/handler",yM=encodeURIComponent("fac");async function o0(t,e,n,i,r,s){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:bo,eventId:r};if(e instanceof xS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Ll){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${yM}=${encodeURIComponent(l)}`:"";return`${_M(t)}?${Nl(a).slice(1)}${u}`}function _M({config:t}){return t.emulator?ug(t,gM):`https://${t.authDomain}/${mM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="webStorageSupport";class vM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DS,this._completeRedirectFn=$D,this._overrideRedirectResult=UD}async _openPopup(e,n,i,r){var s;fi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await o0(e,n,i,Dp(),r);return fM(e,o,pg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await o0(e,n,i,Dp(),r);return TD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(fi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await aM(e),i=new HD(e);return n.register("authEvent",r=>(Z(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hf,{type:hf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[hf];o!==void 0&&n(!!o),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ES()||mS()||hg()}}const wM=vM;var a0="@firebase/auth",l0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IM(t){Bn(new En("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TS(t)},u=new ON(i,r,s,l);return WN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Bn(new En("auth-internal",e=>{const n=gr(e.getProvider("auth").getImmediate());return(i=>new EM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),an(a0,l0,TM(t)),an(a0,l0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=5*60,xM=GI("authIdTokenMaxAge")||SM;let u0=null;const bM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>xM)return;const r=n==null?void 0:n.token;u0!==r&&(u0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function kM(t=nS()){const e=Dl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$N(t,{popupRedirectResolver:wM,persistence:[RD,vD,DS]}),i=GI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=bM(s.toString());pD(n,o,()=>o(n.currentUser)),fD(n,a=>o(a))}}const r=qI("auth");return r&&HN(n,`http://${r}`),n}function CM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Ln("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",CM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IM("Browser");var AM="firebase",PM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an(AM,PM,"app");var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,US;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function k(){}k.prototype=_.prototype,S.D=_.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(C,R,D){for(var A=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)A[ie-2]=arguments[ie];return _.prototype[R].apply(C,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,_,k){k||(k=0);var C=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)C[R]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(R=0;16>R;++R)C[R]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=S.g[0],k=S.g[1],R=S.g[2];var D=S.g[3],A=_+(D^k&(R^D))+C[0]+3614090360&4294967295;_=k+(A<<7&4294967295|A>>>25),A=D+(R^_&(k^R))+C[1]+3905402710&4294967295,D=_+(A<<12&4294967295|A>>>20),A=R+(k^D&(_^k))+C[2]+606105819&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(_^R&(D^_))+C[3]+3250441966&4294967295,k=R+(A<<22&4294967295|A>>>10),A=_+(D^k&(R^D))+C[4]+4118548399&4294967295,_=k+(A<<7&4294967295|A>>>25),A=D+(R^_&(k^R))+C[5]+1200080426&4294967295,D=_+(A<<12&4294967295|A>>>20),A=R+(k^D&(_^k))+C[6]+2821735955&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(_^R&(D^_))+C[7]+4249261313&4294967295,k=R+(A<<22&4294967295|A>>>10),A=_+(D^k&(R^D))+C[8]+1770035416&4294967295,_=k+(A<<7&4294967295|A>>>25),A=D+(R^_&(k^R))+C[9]+2336552879&4294967295,D=_+(A<<12&4294967295|A>>>20),A=R+(k^D&(_^k))+C[10]+4294925233&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(_^R&(D^_))+C[11]+2304563134&4294967295,k=R+(A<<22&4294967295|A>>>10),A=_+(D^k&(R^D))+C[12]+1804603682&4294967295,_=k+(A<<7&4294967295|A>>>25),A=D+(R^_&(k^R))+C[13]+4254626195&4294967295,D=_+(A<<12&4294967295|A>>>20),A=R+(k^D&(_^k))+C[14]+2792965006&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(_^R&(D^_))+C[15]+1236535329&4294967295,k=R+(A<<22&4294967295|A>>>10),A=_+(R^D&(k^R))+C[1]+4129170786&4294967295,_=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(_^k))+C[6]+3225465664&4294967295,D=_+(A<<9&4294967295|A>>>23),A=R+(_^k&(D^_))+C[11]+643717713&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^_&(R^D))+C[0]+3921069994&4294967295,k=R+(A<<20&4294967295|A>>>12),A=_+(R^D&(k^R))+C[5]+3593408605&4294967295,_=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(_^k))+C[10]+38016083&4294967295,D=_+(A<<9&4294967295|A>>>23),A=R+(_^k&(D^_))+C[15]+3634488961&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^_&(R^D))+C[4]+3889429448&4294967295,k=R+(A<<20&4294967295|A>>>12),A=_+(R^D&(k^R))+C[9]+568446438&4294967295,_=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(_^k))+C[14]+3275163606&4294967295,D=_+(A<<9&4294967295|A>>>23),A=R+(_^k&(D^_))+C[3]+4107603335&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^_&(R^D))+C[8]+1163531501&4294967295,k=R+(A<<20&4294967295|A>>>12),A=_+(R^D&(k^R))+C[13]+2850285829&4294967295,_=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(_^k))+C[2]+4243563512&4294967295,D=_+(A<<9&4294967295|A>>>23),A=R+(_^k&(D^_))+C[7]+1735328473&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^_&(R^D))+C[12]+2368359562&4294967295,k=R+(A<<20&4294967295|A>>>12),A=_+(k^R^D)+C[5]+4294588738&4294967295,_=k+(A<<4&4294967295|A>>>28),A=D+(_^k^R)+C[8]+2272392833&4294967295,D=_+(A<<11&4294967295|A>>>21),A=R+(D^_^k)+C[11]+1839030562&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^_)+C[14]+4259657740&4294967295,k=R+(A<<23&4294967295|A>>>9),A=_+(k^R^D)+C[1]+2763975236&4294967295,_=k+(A<<4&4294967295|A>>>28),A=D+(_^k^R)+C[4]+1272893353&4294967295,D=_+(A<<11&4294967295|A>>>21),A=R+(D^_^k)+C[7]+4139469664&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^_)+C[10]+3200236656&4294967295,k=R+(A<<23&4294967295|A>>>9),A=_+(k^R^D)+C[13]+681279174&4294967295,_=k+(A<<4&4294967295|A>>>28),A=D+(_^k^R)+C[0]+3936430074&4294967295,D=_+(A<<11&4294967295|A>>>21),A=R+(D^_^k)+C[3]+3572445317&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^_)+C[6]+76029189&4294967295,k=R+(A<<23&4294967295|A>>>9),A=_+(k^R^D)+C[9]+3654602809&4294967295,_=k+(A<<4&4294967295|A>>>28),A=D+(_^k^R)+C[12]+3873151461&4294967295,D=_+(A<<11&4294967295|A>>>21),A=R+(D^_^k)+C[15]+530742520&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^_)+C[2]+3299628645&4294967295,k=R+(A<<23&4294967295|A>>>9),A=_+(R^(k|~D))+C[0]+4096336452&4294967295,_=k+(A<<6&4294967295|A>>>26),A=D+(k^(_|~R))+C[7]+1126891415&4294967295,D=_+(A<<10&4294967295|A>>>22),A=R+(_^(D|~k))+C[14]+2878612391&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~_))+C[5]+4237533241&4294967295,k=R+(A<<21&4294967295|A>>>11),A=_+(R^(k|~D))+C[12]+1700485571&4294967295,_=k+(A<<6&4294967295|A>>>26),A=D+(k^(_|~R))+C[3]+2399980690&4294967295,D=_+(A<<10&4294967295|A>>>22),A=R+(_^(D|~k))+C[10]+4293915773&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~_))+C[1]+2240044497&4294967295,k=R+(A<<21&4294967295|A>>>11),A=_+(R^(k|~D))+C[8]+1873313359&4294967295,_=k+(A<<6&4294967295|A>>>26),A=D+(k^(_|~R))+C[15]+4264355552&4294967295,D=_+(A<<10&4294967295|A>>>22),A=R+(_^(D|~k))+C[6]+2734768916&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~_))+C[13]+1309151649&4294967295,k=R+(A<<21&4294967295|A>>>11),A=_+(R^(k|~D))+C[4]+4149444226&4294967295,_=k+(A<<6&4294967295|A>>>26),A=D+(k^(_|~R))+C[11]+3174756917&4294967295,D=_+(A<<10&4294967295|A>>>22),A=R+(_^(D|~k))+C[2]+718787259&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~_))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+D&4294967295}i.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var k=_-this.blockSize,C=this.B,R=this.h,D=0;D<_;){if(R==0)for(;D<=k;)r(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<_;)if(C[R++]=S.charCodeAt(D++),R==this.blockSize){r(this,C),R=0;break}}else for(;D<_;)if(C[R++]=S[D++],R==this.blockSize){r(this,C),R=0;break}}this.h=R,this.o+=_},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var k=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=k&255,k/=256;for(this.u(S),S=Array(16),_=k=0;4>_;++_)for(var C=0;32>C;C+=8)S[k++]=this.g[_]>>>C&255;return S};function s(S,_){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=_(S)}function o(S,_){this.h=_;for(var k=[],C=!0,R=S.length-1;0<=R;R--){var D=S[R]|0;C&&D==_||(k[R]=D,C=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return w(u(-S));for(var _=[],k=1,C=0;S>=k;C++)_[C]=S/k|0,k*=4294967296;return new o(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return w(h(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(_,8)),C=d,R=0;R<S.length;R+=8){var D=Math.min(8,S.length-R),A=parseInt(S.substring(R,R+D),_);8>D?(D=u(Math.pow(_,D)),C=C.j(D).add(u(A))):(C=C.j(k),C=C.add(u(A)))}return C}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-w(this).m();for(var S=0,_=1,k=0;k<this.g.length;k++){var C=this.i(k);S+=(0<=C?C:4294967296+C)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(I(this))return"-"+w(this).toString(S);for(var _=u(Math.pow(S,6)),k=this,C="";;){var R=P(k,_).g;k=v(k,R.j(_));var D=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=R,T(k))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function I(S){return S.h==-1}t.l=function(S){return S=v(this,S),I(S)?-1:T(S)?0:1};function w(S){for(var _=S.g.length,k=[],C=0;C<_;C++)k[C]=~S.g[C];return new o(k,~S.h).add(f)}t.abs=function(){return I(this)?w(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],C=0,R=0;R<=_;R++){var D=C+(this.i(R)&65535)+(S.i(R)&65535),A=(D>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);C=A>>>16,D&=65535,A&=65535,k[R]=A<<16|D}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(S,_){return S.add(w(_))}t.j=function(S){if(T(this)||T(S))return d;if(I(this))return I(S)?w(this).j(w(S)):w(w(this).j(S));if(I(S))return w(this.j(w(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var _=this.g.length+S.g.length,k=[],C=0;C<2*_;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<S.g.length;R++){var D=this.i(C)>>>16,A=this.i(C)&65535,ie=S.i(R)>>>16,re=S.i(R)&65535;k[2*C+2*R]+=A*re,E(k,2*C+2*R),k[2*C+2*R+1]+=D*re,E(k,2*C+2*R+1),k[2*C+2*R+1]+=A*ie,E(k,2*C+2*R+1),k[2*C+2*R+2]+=D*ie,E(k,2*C+2*R+2)}for(C=0;C<_;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=_;C<2*_;C++)k[C]=0;return new o(k,0)};function E(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function x(S,_){this.g=S,this.h=_}function P(S,_){if(T(_))throw Error("division by zero");if(T(S))return new x(d,d);if(I(S))return _=P(w(S),_),new x(w(_.g),w(_.h));if(I(_))return _=P(S,w(_)),new x(w(_.g),_.h);if(30<S.g.length){if(I(S)||I(_))throw Error("slowDivide_ only works with positive integers.");for(var k=f,C=_;0>=C.l(S);)k=M(k),C=M(C);var R=N(k,1),D=N(C,1);for(C=N(C,2),k=N(k,2);!T(C);){var A=D.add(C);0>=A.l(S)&&(R=R.add(k),D=A),C=N(C,1),k=N(k,1)}return _=v(S,R.j(_)),new x(R,_)}for(R=d;0<=S.l(_);){for(k=Math.max(1,Math.floor(S.m()/_.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=u(k),A=D.j(_);I(A)||0<A.l(S);)k-=C,D=u(k),A=D.j(_);T(D)&&(D=f),R=R.add(D),S=v(S,A)}return new x(R,S)}t.A=function(S){return P(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)&S.i(C);return new o(k,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)|S.i(C);return new o(k,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)^S.i(C);return new o(k,this.h^S.h)};function M(S){for(var _=S.g.length+1,k=[],C=0;C<_;C++)k[C]=S.i(C)<<1|S.i(C-1)>>>31;return new o(k,S.h)}function N(S,_){var k=_>>5;_%=32;for(var C=S.g.length-k,R=[],D=0;D<C;D++)R[D]=0<_?S.i(D+k)>>>_|S.i(D+k+1)<<32-_:S.i(D+k);return new o(R,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,US=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Hr=o}).apply(typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BS,ya,zS,hc,Lp,$S,WS,HS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,m){return c==Array.prototype||c==Object.prototype||(c[p]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var p=0;p<c.length;++p){var m=c[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=n(this);function r(c,p){if(p)e:{var m=i;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in m))break e;m=m[L]}c=c[c.length-1],b=m[c],p=p(b),p!=b&&p!=null&&e(m,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var m=0,b=!1,L={next:function(){if(!b&&m<c.length){var V=m++;return{value:p(V,c[V]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(c){return c||function(){return s(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,m){return c.call.apply(c.bind,arguments)}function d(c,p,m){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function f(c,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(c,p){var m=Array.prototype.slice.call(arguments,1);return function(){var b=m.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function T(c,p){function m(){}m.prototype=p.prototype,c.aa=p.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(b,L,V){for(var z=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)z[Ie-2]=arguments[Ie];return p.prototype[L].apply(b,z)}}function I(c){const p=c.length;if(0<p){const m=Array(p);for(let b=0;b<p;b++)m[b]=c[b];return m}return[]}function w(c,p){for(let m=1;m<arguments.length;m++){const b=arguments[m];if(l(b)){const L=c.length||0,V=b.length||0;c.length=L+V;for(let z=0;z<V;z++)c[L+z]=b[z]}else c.push(b)}}class v{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var M=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function N(c,p,m){for(const b in c)p.call(m,c[b],b,c)}function S(c,p){for(const m in c)p.call(void 0,c[m],m,c)}function _(c){const p={};for(const m in c)p[m]=c[m];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,p){let m,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(m in b)c[m]=b[m];for(let V=0;V<k.length;V++)m=k[V],Object.prototype.hasOwnProperty.call(b,m)&&(c[m]=b[m])}}function R(c){var p=1;c=c.split(":");const m=[];for(;0<p&&c.length;)m.push(c.shift()),p--;return c.length&&m.push(c.join(":")),m}function D(c){a.setTimeout(()=>{throw c},0)}function A(){var c=G;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ie{constructor(){this.h=this.g=null}add(p,m){const b=re.get();b.set(p,m),this.h?this.h.next=b:this.g=b,this.h=b}}var re=new v(()=>new le,c=>c.reset());class le{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,B=!1,G=new ie,q=()=>{const c=a.Promise.resolve(void 0);ye=()=>{c.then(de)}};var de=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(m){D(m)}var p=re;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}B=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return c}();function Ke(c,p){if(_e.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(M){e:{try{P(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else m=="mouseover"?p=c.fromElement:m=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:De[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ke.aa.h.call(this)}}T(Ke,_e);var De={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),_r=0;function Ro(c,p,m,b,L){this.listener=c,this.proxy=null,this.src=p,this.type=m,this.capture=!!b,this.ha=L,this.key=++_r,this.da=this.fa=!1}function xn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function W(c){this.src=c,this.g={},this.h=0}W.prototype.add=function(c,p,m,b,L){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var z=Dt(c,p,b,L);return-1<z?(p=c[z],m||(p.fa=!1)):(p=new Ro(p,this.src,V,!!b,L),p.fa=m,c.push(p)),p};function se(c,p){var m=p.type;if(m in c.g){var b=c.g[m],L=Array.prototype.indexOf.call(b,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(b,L,1),V&&(xn(p),c.g[m].length==0&&(delete c.g[m],c.h--))}}function Dt(c,p,m,b){for(var L=0;L<c.length;++L){var V=c[L];if(!V.da&&V.listener==p&&V.capture==!!m&&V.ha==b)return L}return-1}var $t="closure_lm_"+(1e6*Math.random()|0),vr={};function wi(c,p,m,b,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)wi(c,p[V],m,b,L);return null}return m=Mo(m),c&&c[Nt]?c.K(p,m,u(b)?!!b.capture:!1,L):Gl(c,p,m,!1,b,L)}function Gl(c,p,m,b,L,V){if(!p)throw Error("Invalid event type");var z=u(L)?!!L.capture:!!L,Ie=Q(c);if(Ie||(c[$t]=Ie=new W(c)),m=Ie.add(p,m,b,z,V),m.proxy)return m;if(b=Ql(),m.proxy=b,b.src=c,b.listener=m,c.addEventListener)Ne||(L=z),L===void 0&&(L=!1),c.addEventListener(p.toString(),b,L);else if(c.attachEvent)c.attachEvent(Do(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ql(){function c(m){return p.call(c.src,c.listener,m)}const p=pd;return c}function No(c,p,m,b,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)No(c,p[V],m,b,L);else b=u(b)?!!b.capture:!!b,m=Mo(m),c&&c[Nt]?(c=c.i,p=String(p).toString(),p in c.g&&(V=c.g[p],m=Dt(V,m,b,L),-1<m&&(xn(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete c.g[p],c.h--)))):c&&(c=Q(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Dt(p,m,b,L)),(m=-1<c?p[c]:null)&&gs(m))}function gs(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Nt])se(p.i,c);else{var m=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(m,b,c.capture):p.detachEvent?p.detachEvent(Do(m),b):p.addListener&&p.removeListener&&p.removeListener(b),(m=Q(p))?(se(m,c),m.h==0&&(m.src=null,p[$t]=null)):xn(c)}}}function Do(c){return c in vr?vr[c]:vr[c]="on"+c}function pd(c,p){if(c.da)c=!0;else{p=new Ke(p,this);var m=c.listener,b=c.ha||c.src;c.fa&&gs(c),c=m.call(b,p)}return c}function Q(c){return c=c[$t],c instanceof W?c:null}var ys="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mo(c){return typeof c=="function"?c:(c[ys]||(c[ys]=function(p){return c.handleEvent(p)}),c[ys])}function Ge(){te.call(this),this.i=new W(this),this.M=this,this.F=null}T(Ge,te),Ge.prototype[Nt]=!0,Ge.prototype.removeEventListener=function(c,p,m,b){No(this,c,p,m,b)};function we(c,p){var m,b=c.F;if(b)for(m=[];b;b=b.F)m.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new _e(p,c);else if(p instanceof _e)p.target=p.target||c;else{var L=p;p=new _e(b,c),C(p,L)}if(L=!0,m)for(var V=m.length-1;0<=V;V--){var z=p.g=m[V];L=Yl(z,b,!0,p)&&L}if(z=p.g=c,L=Yl(z,b,!0,p)&&L,L=Yl(z,b,!1,p)&&L,m)for(V=0;V<m.length;V++)z=p.g=m[V],L=Yl(z,b,!1,p)&&L}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var m=c.g[p],b=0;b<m.length;b++)xn(m[b]);delete c.g[p],c.h--}}this.F=null},Ge.prototype.K=function(c,p,m,b){return this.i.add(String(c),p,!1,m,b)},Ge.prototype.L=function(c,p,m,b){return this.i.add(String(c),p,!0,m,b)};function Yl(c,p,m,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var z=p[V];if(z&&!z.da&&z.capture==m){var Ie=z.listener,it=z.ha||z.src;z.fa&&se(c.i,z),L=Ie.call(it,b)!==!1&&L}}return L&&!b.defaultPrevented}function Ty(c,p,m){if(typeof c=="function")m&&(c=f(c,m));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function Iy(c){c.g=Ty(()=>{c.g=null,c.i&&(c.i=!1,Iy(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Sk extends te{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Iy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oo(c){te.call(this),this.h=c,this.g={}}T(Oo,te);var Sy=[];function xy(c){N(c.g,function(p,m){this.g.hasOwnProperty(m)&&gs(p)},c),c.g={}}Oo.prototype.N=function(){Oo.aa.N.call(this),xy(this)},Oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var md=a.JSON.stringify,xk=a.JSON.parse,bk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function gd(){}gd.prototype.h=null;function by(c){return c.h||(c.h=c.i())}function ky(){}var Lo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yd(){_e.call(this,"d")}T(yd,_e);function _d(){_e.call(this,"c")}T(_d,_e);var wr={},Cy=null;function Xl(){return Cy=Cy||new Ge}wr.La="serverreachability";function Ay(c){_e.call(this,wr.La,c)}T(Ay,_e);function Vo(c){const p=Xl();we(p,new Ay(p))}wr.STAT_EVENT="statevent";function Py(c,p){_e.call(this,wr.STAT_EVENT,c),this.stat=p}T(Py,_e);function It(c){const p=Xl();we(p,new Py(p,c))}wr.Ma="timingevent";function Ry(c,p){_e.call(this,wr.Ma,c),this.size=p}T(Ry,_e);function Fo(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function jo(){this.g=!0}jo.prototype.xa=function(){this.g=!1};function kk(c,p,m,b,L,V){c.info(function(){if(c.g)if(V)for(var z="",Ie=V.split("&"),it=0;it<Ie.length;it++){var me=Ie[it].split("=");if(1<me.length){var dt=me[0];me=me[1];var ft=dt.split("_");z=2<=ft.length&&ft[1]=="type"?z+(dt+"="+me+"&"):z+(dt+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+p+`
`+m+`
`+z})}function Ck(c,p,m,b,L,V,z){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+p+`
`+m+`
`+V+" "+z})}function _s(c,p,m,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Pk(c,m)+(b?" "+b:"")})}function Ak(c,p){c.info(function(){return"TIMEOUT: "+p})}jo.prototype.info=function(){};function Pk(c,p){if(!c.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var b=m[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return md(m)}catch{return p}}var Jl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ny={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vd;function Zl(){}T(Zl,gd),Zl.prototype.g=function(){return new XMLHttpRequest},Zl.prototype.i=function(){return{}},vd=new Zl;function Ei(c,p,m,b){this.j=c,this.i=p,this.l=m,this.R=b||1,this.U=new Oo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dy}function Dy(){this.i=null,this.g="",this.h=!1}var My={},wd={};function Ed(c,p,m){c.L=1,c.v=iu(qn(p)),c.m=m,c.P=!0,Oy(c,null)}function Oy(c,p){c.F=Date.now(),eu(c),c.A=qn(c.v);var m=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Qy(m.i,"t",b),c.C=0,m=c.j.J,c.h=new Dy,c.g=f_(c.j,m?p:null,!c.m),0<c.O&&(c.M=new Sk(f(c.Y,c,c.g),c.O)),p=c.U,m=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Sy[0]=L.toString()),L=Sy);for(var V=0;V<L.length;V++){var z=wi(m,L[V],b||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Vo(),kk(c.i,c.u,c.A,c.l,c.R,c.m)}Ei.prototype.ca=function(c){c=c.target;const p=this.M;p&&Kn(c)==3?p.j():this.Y(c)},Ei.prototype.Y=function(c){try{if(c==this.g)e:{const ft=Kn(this.g);var p=this.g.Ba();const Es=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||n_(this.g)))){this.J||ft!=4||p==7||(p==8||0>=Es?Vo(3):Vo(2)),Td(this);var m=this.g.Z();this.X=m;t:if(Ly(this)){var b=n_(this.g);c="";var L=b.length,V=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),Uo(this);var z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(V&&p==L-1)});b.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,Ck(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,it=this.g;if((Ie=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ie)){var me=Ie;break t}}me=null}if(m=me)_s(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Id(this,m);else{this.o=!1,this.s=3,It(12),Er(this),Uo(this);break e}}if(this.P){m=!0;let dn;for(;!this.J&&this.C<z.length;)if(dn=Rk(this,z),dn==wd){ft==4&&(this.s=4,It(14),m=!1),_s(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==My){this.s=4,It(15),_s(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else _s(this.i,this.l,dn,null),Id(this,dn);if(Ly(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||z.length!=0||this.h.h||(this.s=1,It(16),m=!1),this.o=this.o&&m,!m)_s(this.i,this.l,z,"[Invalid Chunked Response]"),Er(this),Uo(this);else if(0<z.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Ad(dt),dt.M=!0,It(11))}}else _s(this.i,this.l,z,null),Id(this,z);ft==4&&Er(this),this.o&&!this.J&&(ft==4?u_(this.j,this):(this.o=!1,eu(this)))}else Gk(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Er(this),Uo(this)}}}catch{}finally{}};function Ly(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Rk(c,p){var m=c.C,b=p.indexOf(`
`,m);return b==-1?wd:(m=Number(p.substring(m,b)),isNaN(m)?My:(b+=1,b+m>p.length?wd:(p=p.slice(b,b+m),c.C=b+m,p)))}Ei.prototype.cancel=function(){this.J=!0,Er(this)};function eu(c){c.S=Date.now()+c.I,Vy(c,c.I)}function Vy(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fo(f(c.ba,c),p)}function Td(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ei.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ak(this.i,this.A),this.L!=2&&(Vo(),It(17)),Er(this),this.s=2,Uo(this)):Vy(this,this.S-c)};function Uo(c){c.j.G==0||c.J||u_(c.j,c)}function Er(c){Td(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,xy(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Id(c,p){try{var m=c.j;if(m.G!=0&&(m.g==c||Sd(m.h,c))){if(!c.K&&Sd(m.h,c)&&m.G==3){try{var b=m.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)uu(m),au(m);else break e;Cd(m),It(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Fo(f(m.Za,m),6e3));if(1>=Uy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ir(m,11)}else if((c.K||m.g==c)&&uu(m),!E(p))for(L=m.Da.g.parse(p),p=0;p<L.length;p++){let me=L[p];if(m.T=me[0],me=me[1],m.G==2)if(me[0]=="c"){m.K=me[1],m.ia=me[2];const dt=me[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const ft=me[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const Es=me[5];Es!=null&&typeof Es=="number"&&0<Es&&(b=1.5*Es,m.L=b,m.j.info("backChannelRequestTimeoutMs_="+b)),b=m;const dn=c.g;if(dn){const hu=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hu){var V=b.h;V.g||hu.indexOf("spdy")==-1&&hu.indexOf("quic")==-1&&hu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(xd(V,V.h),V.h=null))}if(b.D){const Pd=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pd&&(b.ya=Pd,ke(b.I,b.D,Pd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),b=m;var z=c;if(b.qa=d_(b,b.J?b.ia:null,b.W),z.K){By(b.h,z);var Ie=z,it=b.L;it&&(Ie.I=it),Ie.B&&(Td(Ie),eu(Ie)),b.g=z}else a_(b);0<m.i.length&&lu(m)}else me[0]!="stop"&&me[0]!="close"||Ir(m,7);else m.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Ir(m,7):kd(m):me[0]!="noop"&&m.l&&m.l.ta(me),m.v=0)}}Vo(4)}catch{}}var Nk=class{constructor(c,p){this.g=c,this.map=p}};function Fy(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jy(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Uy(c){return c.h?1:c.g?c.g.size:0}function Sd(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function xd(c,p){c.g?c.g.add(p):c.h=p}function By(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Fy.prototype.cancel=function(){if(this.i=zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function zy(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const m of c.g.values())p=p.concat(m.D);return p}return I(c.i)}function Dk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],m=c.length,b=0;b<m;b++)p.push(c[b]);return p}p=[],m=0;for(b in c)p[m++]=c[b];return p}function Mk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var m=0;m<c;m++)p.push(m);return p}p=[],m=0;for(const b in c)p[m++]=b;return p}}}function $y(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var m=Mk(c),b=Dk(c),L=b.length,V=0;V<L;V++)p.call(void 0,b[V],m&&m[V],c)}var Wy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ok(c,p){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var b=c[m].indexOf("="),L=null;if(0<=b){var V=c[m].substring(0,b);L=c[m].substring(b+1)}else V=c[m];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Tr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Tr){this.h=c.h,tu(this,c.j),this.o=c.o,this.g=c.g,nu(this,c.s),this.l=c.l;var p=c.i,m=new $o;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),Hy(this,m),this.m=c.m}else c&&(p=String(c).match(Wy))?(this.h=!1,tu(this,p[1]||"",!0),this.o=Bo(p[2]||""),this.g=Bo(p[3]||"",!0),nu(this,p[4]),this.l=Bo(p[5]||"",!0),Hy(this,p[6]||"",!0),this.m=Bo(p[7]||"")):(this.h=!1,this.i=new $o(null,this.h))}Tr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(zo(p,qy,!0),":");var m=this.g;return(m||p=="file")&&(c.push("//"),(p=this.o)&&c.push(zo(p,qy,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(zo(m,m.charAt(0)=="/"?Fk:Vk,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",zo(m,Uk)),c.join("")};function qn(c){return new Tr(c)}function tu(c,p,m){c.j=m?Bo(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function nu(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Hy(c,p,m){p instanceof $o?(c.i=p,Bk(c.i,c.h)):(m||(p=zo(p,jk)),c.i=new $o(p,c.h))}function ke(c,p,m){c.i.set(p,m)}function iu(c){return ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Bo(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function zo(c,p,m){return typeof c=="string"?(c=encodeURI(c).replace(p,Lk),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Lk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var qy=/[#\/\?@]/g,Vk=/[#\?:]/g,Fk=/[#\?]/g,jk=/[#\?@]/g,Uk=/#/g;function $o(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Ti(c){c.g||(c.g=new Map,c.h=0,c.i&&Ok(c.i,function(p,m){c.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=$o.prototype,t.add=function(c,p){Ti(this),this.i=null,c=vs(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(p),this.h+=1,this};function Ky(c,p){Ti(c),p=vs(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Gy(c,p){return Ti(c),p=vs(c,p),c.g.has(p)}t.forEach=function(c,p){Ti(this),this.g.forEach(function(m,b){m.forEach(function(L){c.call(p,L,b,this)},this)},this)},t.na=function(){Ti(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let b=0;b<p.length;b++){const L=c[b];for(let V=0;V<L.length;V++)m.push(p[b])}return m},t.V=function(c){Ti(this);let p=[];if(typeof c=="string")Gy(this,c)&&(p=p.concat(this.g.get(vs(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)p=p.concat(c[m])}return p},t.set=function(c,p){return Ti(this),this.i=null,c=vs(this,c),Gy(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Qy(c,p,m){Ky(c,p),0<m.length&&(c.i=null,c.g.set(vs(c,p),I(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var b=p[m];const V=encodeURIComponent(String(b)),z=this.V(b);for(b=0;b<z.length;b++){var L=V;z[b]!==""&&(L+="="+encodeURIComponent(String(z[b]))),c.push(L)}}return this.i=c.join("&")};function vs(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Bk(c,p){p&&!c.j&&(Ti(c),c.i=null,c.g.forEach(function(m,b){var L=b.toLowerCase();b!=L&&(Ky(this,b),Qy(this,L,m))},c)),c.j=p}function zk(c,p){const m=new jo;if(a.Image){const b=new Image;b.onload=g(Ii,m,"TestLoadImage: loaded",!0,p,b),b.onerror=g(Ii,m,"TestLoadImage: error",!1,p,b),b.onabort=g(Ii,m,"TestLoadImage: abort",!1,p,b),b.ontimeout=g(Ii,m,"TestLoadImage: timeout",!1,p,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function $k(c,p){const m=new jo,b=new AbortController,L=setTimeout(()=>{b.abort(),Ii(m,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(V=>{clearTimeout(L),V.ok?Ii(m,"TestPingServer: ok",!0,p):Ii(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Ii(m,"TestPingServer: error",!1,p)})}function Ii(c,p,m,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(m)}catch{}}function Wk(){this.g=new bk}function Hk(c,p,m){const b=m||"";try{$y(c,function(L,V){let z=L;u(L)&&(z=md(L)),p.push(b+V+"="+encodeURIComponent(z))})}catch(L){throw p.push(b+"type="+encodeURIComponent("_badmap")),L}}function ru(c){this.l=c.Ub||null,this.j=c.eb||!1}T(ru,gd),ru.prototype.g=function(){return new su(this.l,this.j)},ru.prototype.i=function(c){return function(){return c}}({});function su(c,p){Ge.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(su,Ge),t=su.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ho(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ho(this)),this.g&&(this.readyState=3,Ho(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yy(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yy(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Wo(this):Ho(this),this.readyState==3&&Yy(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Wo(this))},t.Qa=function(c){this.g&&(this.response=c,Wo(this))},t.ga=function(){this.g&&Wo(this)};function Wo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ho(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=p.next();return c.join(`\r
`)};function Ho(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xy(c){let p="";return N(c,function(m,b){p+=b,p+=":",p+=m,p+=`\r
`}),p}function bd(c,p,m){e:{for(b in m){var b=!1;break e}b=!0}b||(m=Xy(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):ke(c,p,m))}function Ue(c){Ge.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ue,Ge);var qk=/^https?$/i,Kk=["POST","PUT"];t=Ue.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,m,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vd.g(),this.v=this.o?by(this.o):by(vd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(V){Jy(this,V);return}if(c=m||"",m=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)m.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const V of b.keys())m.set(V,b.get(V));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Kk,p,void 0))||b||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of m)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{t_(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){Jy(this,V)}};function Jy(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Zy(c),ou(c)}function Zy(c){c.A||(c.A=!0,we(c,"complete"),we(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,we(this,"complete"),we(this,"abort"),ou(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ou(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?e_(this):this.bb())},t.bb=function(){e_(this)};function e_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Kn(c)!=4||c.Z()!=2)){if(c.u&&Kn(c)==4)Ty(c.Ea,0,c);else if(we(c,"readystatechange"),Kn(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var b;if(b=z===0){var L=String(c.D).match(Wy)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),b=!qk.test(L?L.toLowerCase():"")}m=b}if(m)we(c,"complete"),we(c,"success");else{c.m=6;try{var V=2<Kn(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",Zy(c)}}finally{ou(c)}}}}function ou(c,p){if(c.g){t_(c);const m=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||we(c,"ready");try{m.onreadystatechange=b}catch{}}}function t_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Kn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),xk(p)}};function n_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Gk(c){const p={};c=(c.g&&2<=Kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(E(c[b]))continue;var m=R(c[b]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=p[L]||[];p[L]=V,V.push(m)}S(p,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(c,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||p}function i_(c){this.Aa=0,this.i=[],this.j=new jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,c),this.cb=qo("retryDelaySeedMs",1e4,c),this.Wa=qo("forwardChannelMaxRetries",2,c),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Fy(c&&c.concurrentRequestLimit),this.Da=new Wk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=i_.prototype,t.la=8,t.G=1,t.connect=function(c,p,m,b){It(0),this.W=c,this.H=p||{},m&&b!==void 0&&(this.H.OSID=m,this.H.OAID=b),this.F=this.X,this.I=d_(this,null,this.W),lu(this)};function kd(c){if(r_(c),c.G==3){var p=c.U++,m=qn(c.I);if(ke(m,"SID",c.K),ke(m,"RID",p),ke(m,"TYPE","terminate"),Ko(c,m),p=new Ei(c,c.j,p),p.L=2,p.v=iu(qn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=f_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),eu(p)}h_(c)}function au(c){c.g&&(Ad(c),c.g.cancel(),c.g=null)}function r_(c){au(c),c.u&&(a.clearTimeout(c.u),c.u=null),uu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function lu(c){if(!jy(c.h)&&!c.s){c.s=!0;var p=c.Ga;ye||q(),B||(ye(),B=!0),G.add(p,c),c.B=0}}function Qk(c,p){return Uy(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fo(f(c.Ga,c,p),c_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Ei(this,this.j,c);let V=this.o;if(this.S&&(V?(V=_(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var b=this.i[m];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=o_(this,L,p),m=qn(this.I),ke(m,"RID",c),ke(m,"CVER",22),this.D&&ke(m,"X-HTTP-Session-Id",this.D),Ko(this,m),V&&(this.O?p="headers="+encodeURIComponent(String(Xy(V)))+"&"+p:this.m&&bd(m,this.m,V)),xd(this.h,L),this.Ua&&ke(m,"TYPE","init"),this.P?(ke(m,"$req",p),ke(m,"SID","null"),L.T=!0,Ed(L,m,null)):Ed(L,m,p),this.G=2}}else this.G==3&&(c?s_(this,c):this.i.length==0||jy(this.h)||s_(this))};function s_(c,p){var m;p?m=p.l:m=c.U++;const b=qn(c.I);ke(b,"SID",c.K),ke(b,"RID",m),ke(b,"AID",c.T),Ko(c,b),c.m&&c.o&&bd(b,c.m,c.o),m=new Ei(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),p&&(c.i=p.D.concat(c.i)),p=o_(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xd(c.h,m),Ed(m,b,p)}function Ko(c,p){c.H&&N(c.H,function(m,b){ke(p,b,m)}),c.l&&$y({},function(m,b){ke(p,b,m)})}function o_(c,p,m){m=Math.min(c.i.length,m);var b=c.l?f(c.l.Na,c.l,c):null;e:{var L=c.i;let V=-1;for(;;){const z=["count="+m];V==-1?0<m?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Ie=!0;for(let it=0;it<m;it++){let me=L[it].g;const dt=L[it].map;if(me-=V,0>me)V=Math.max(0,L[it].g-100),Ie=!1;else try{Hk(dt,z,"req"+me+"_")}catch{b&&b(dt)}}if(Ie){b=z.join("&");break e}}}return c=c.i.splice(0,m),p.D=c,b}function a_(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ye||q(),B||(ye(),B=!0),G.add(p,c),c.v=0}}function Cd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fo(f(c.Fa,c),c_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,l_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fo(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),au(this),l_(this))};function Ad(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function l_(c){c.g=new Ei(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=qn(c.qa);ke(p,"RID","rpc"),ke(p,"SID",c.K),ke(p,"AID",c.T),ke(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&ke(p,"TO",c.ja),ke(p,"TYPE","xmlhttp"),Ko(c,p),c.m&&c.o&&bd(p,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=iu(qn(p)),m.m=null,m.P=!0,Oy(m,c)}t.Za=function(){this.C!=null&&(this.C=null,au(this),Cd(this),It(19))};function uu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function u_(c,p){var m=null;if(c.g==p){uu(c),Ad(c),c.g=null;var b=2}else if(Sd(c.h,p))m=p.D,By(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;b=Xl(),we(b,new Ry(b,m)),lu(c)}else a_(c);else if(L=p.s,L==3||L==0&&0<p.X||!(b==1&&Qk(c,p)||b==2&&Cd(c)))switch(m&&0<m.length&&(p=c.h,p.i=p.i.concat(m)),L){case 1:Ir(c,5);break;case 4:Ir(c,10);break;case 3:Ir(c,6);break;default:Ir(c,2)}}}function c_(c,p){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*p}function Ir(c,p){if(c.j.info("Error code "+p),p==2){var m=f(c.fb,c),b=c.Xa;const L=!b;b=new Tr(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tu(b,"https"),iu(b),L?zk(b.toString(),m):$k(b.toString(),m)}else It(2);c.G=0,c.l&&c.l.sa(p),h_(c),r_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function h_(c){if(c.G=0,c.ka=[],c.l){const p=zy(c.h);(p.length!=0||c.i.length!=0)&&(w(c.ka,p),w(c.ka,c.i),c.h.i.length=0,I(c.i),c.i.length=0),c.l.ra()}}function d_(c,p,m){var b=m instanceof Tr?qn(m):new Tr(m);if(b.g!="")p&&(b.g=p+"."+b.g),nu(b,b.s);else{var L=a.location;b=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new Tr(null);b&&tu(V,b),p&&(V.g=p),L&&nu(V,L),m&&(V.l=m),b=V}return m=c.D,p=c.ya,m&&p&&ke(b,m,p),ke(b,"VER",c.la),Ko(c,b),b}function f_(c,p,m){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ue(new ru({eb:m})):new Ue(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function p_(){}t=p_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function cu(){}cu.prototype.g=function(c,p){return new Wt(c,p)};function Wt(c,p){Ge.call(this),this.g=new i_(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!E(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ws(this)}T(Wt,Ge),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){kd(this.g)},Wt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=md(c),c=m);p.i.push(new Nk(p.Ya++,c)),p.G==3&&lu(p)},Wt.prototype.N=function(){this.g.l=null,delete this.j,kd(this.g),delete this.g,Wt.aa.N.call(this)};function m_(c){yd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const m in p){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}T(m_,yd);function g_(){_d.call(this),this.status=1}T(g_,_d);function ws(c){this.g=c}T(ws,p_),ws.prototype.ua=function(){we(this.g,"a")},ws.prototype.ta=function(c){we(this.g,new m_(c))},ws.prototype.sa=function(c){we(this.g,new g_)},ws.prototype.ra=function(){we(this.g,"b")},cu.prototype.createWebChannel=cu.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,HS=function(){return new cu},WS=function(){return Xl()},$S=wr,Lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jl.NO_ERROR=0,Jl.TIMEOUT=8,Jl.HTTP_ERROR=6,hc=Jl,Ny.COMPLETE="complete",zS=Ny,ky.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,ya=ky,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,BS=Ue}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});const h0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new $h("@firebase/firestore");function na(){return es.logLevel}function H(t,...e){if(es.logLevel<=ue.DEBUG){const n=e.map(gg);es.debug(`Firestore (${ko}): ${t}`,...n)}}function pi(t,...e){if(es.logLevel<=ue.ERROR){const n=e.map(gg);es.error(`Firestore (${ko}): ${t}`,...n)}}function co(t,...e){if(es.logLevel<=ue.WARN){const n=e.map(gg);es.warn(`Firestore (${ko}): ${t}`,...n)}}function gg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+t;throw pi(e),new Error(e)}function pe(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class NM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DM{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new tr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pe(typeof i.accessToken=="string"),new qS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new yt(e)}}class MM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new MM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new LM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=FM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ge(t,e){return t<e?-1:t>e?1:0}function ho(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Je(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Je(0,0))}static max(){return new J(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(),i===void 0?i=e.length-n:i>e.length-n&&X(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends ml{construct(e,n,i){return new Se(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const jM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends ml{construct(e,n,i){return new ot(e,n,i)}static isValidIdentifier(e){return jM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Se.fromString(e))}static fromName(e){return new Y(Se.fromString(e).popFirst(5))}static empty(){return new Y(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Se(e.slice()))}}function UM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new Je(n+1,0):new Je(n,i));return new or(r,Y.empty(),e)}function BM(t){return new or(t.readTime,t.key,-1)}class or{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new or(J.min(),Y.empty(),-1)}static max(){return new or(J.max(),Y.empty(),-1)}}function zM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==$M)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(r=>r?j.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new j((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new j((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function HM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}yg.oe=-1;function Ul(t){return t==null}function th(t){return t===0&&1/t==-1/0}function qM(t){return typeof t=="number"&&Number.isInteger(t)&&!th(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ru(this.root,e,this.comparator,!0)}}class Ru{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??st.RED,this.left=r??st.EMPTY,this.right=s??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new st(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return st.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,i,r,s){return this}insert(e,n,i){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new f0(this.data.getIterator())}getIteratorFrom(e){return new f0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class f0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new ut(ot.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new QS("Invalid base64 string: "+s):s}}(e);return new ht(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const KM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(pe(!!t),typeof t=="string"){let e=0;const n=KM.exec(t);if(pe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vg(t){const e=t.mapValue.fields.__previous_value__;return _g(e)?vg(e):e}function gl(t){const e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class yl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu={mapValue:{}};function ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_g(t)?4:YM(t)?9007199254740991:QM(t)?10:11:X()}function zn(t,e){if(t===e)return!0;const n=ns(t);if(n!==ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gl(t).isEqual(gl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=ar(r.timestampValue),a=ar(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ts(r.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ze(r.geoPointValue.latitude)===ze(s.geoPointValue.latitude)&&ze(r.geoPointValue.longitude)===ze(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ze(r.integerValue)===ze(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=ze(r.doubleValue),a=ze(s.doubleValue);return o===a?th(o)===th(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(d0(o)!==d0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!zn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function _l(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function fo(t,e){if(t===e)return 0;const n=ns(t),i=ns(e);if(n!==i)return ge(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ze(s.integerValue||s.doubleValue),l=ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return p0(t.timestampValue,e.timestampValue);case 4:return p0(gl(t),gl(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ts(s),l=ts(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ge(a[u],l[u]);if(h!==0)return h}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(ze(s.latitude),ze(o.latitude));return a!==0?a:ge(ze(s.longitude),ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return m0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,T=(l=f.value)===null||l===void 0?void 0:l.arrayValue,I=ge(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:m0(g,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nu.mapValue&&o===Nu.mapValue)return 0;if(s===Nu.mapValue)return 1;if(o===Nu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ge(l[d],h[d]);if(f!==0)return f;const g=fo(a[l[d]],u[h[d]]);if(g!==0)return g}return ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function p0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=ar(t),i=ar(e),r=ge(n.seconds,i.seconds);return r!==0?r:ge(n.nanos,i.nanos)}function m0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=fo(n[r],i[r]);if(s)return s}return ge(n.length,i.length)}function po(t){return Vp(t)}function Vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ar(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Vp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Vp(n.fields[o])}`;return r+"}"}(t.mapValue):X()}function Fp(t){return!!t&&"integerValue"in t}function wg(t){return!!t&&"arrayValue"in t}function g0(t){return!!t&&"nullValue"in t}function y0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dc(t){return!!t&&"mapValue"in t}function QM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Oa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Oa(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function YM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oa(n)}setAll(e){let n=ot.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Oa(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){fs(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new kt(Oa(this.value))}}function YS(t){const e=[];return fs(t.fields,(n,i)=>{const r=new ot([n]);if(dc(i)){const s=YS(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tt(e,0,J.min(),J.min(),J.min(),kt.empty(),0)}static newFoundDocument(e,n,i,r){return new tt(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new tt(e,2,n,J.min(),J.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new tt(e,3,n,J.min(),J.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.position=e,this.inclusive=n}}function _0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Y.comparator(Y.fromName(o.referenceValue),n.key):i=fo(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function v0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function XM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{}class Ye extends XS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new ZM(e,n,i):n==="array-contains"?new n2(e,i):n==="in"?new i2(e,i):n==="not-in"?new r2(e,i):n==="array-contains-any"?new s2(e,i):new Ye(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new e2(e,i):new t2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fo(n,this.value)):n!==null&&ns(this.value)===ns(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends XS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $n(e,n)}matches(e){return JS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function JS(t){return t.op==="and"}function ZS(t){return JM(t)&&JS(t)}function JM(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function jp(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+po(t.value);if(ZS(t))return t.filters.map(e=>jp(e)).join(",");{const e=t.filters.map(n=>jp(n)).join(",");return`${t.op}(${e})`}}function ex(t,e){return t instanceof Ye?function(i,r){return r instanceof Ye&&i.op===r.op&&i.field.isEqual(r.field)&&zn(i.value,r.value)}(t,e):t instanceof $n?function(i,r){return r instanceof $n&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&ex(o,r.filters[a]),!0):!1}(t,e):void X()}function tx(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(tx).join(" ,")+"}"}(t):"Filter"}class ZM extends Ye{constructor(e,n,i){super(e,n,i),this.key=Y.fromName(i.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class e2 extends Ye{constructor(e,n){super(e,"in",n),this.keys=nx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class t2 extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=nx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Y.fromName(i.referenceValue))}class n2 extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wg(n)&&_l(n.arrayValue,this.value)}}class i2 extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_l(this.value.arrayValue,n)}}class r2 extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_l(this.value.arrayValue,n)}}class s2 extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>_l(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function w0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new o2(t,e,n,i,r,s,o)}function Eg(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>jp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>po(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>po(i)).join(",")),e.ue=n}return e.ue}function Tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ex(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v0(t.startAt,e.startAt)&&v0(t.endAt,e.endAt)}function Up(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function a2(t,e,n,i,r,s,o,a){return new Kh(t,e,n,i,r,s,o,a)}function Ig(t){return new Kh(t)}function E0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function l2(t){return t.collectionGroup!==null}function La(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ut(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ih(s,i))}),n.has(ot.keyField().canonicalString())||e.ce.push(new ih(ot.keyField(),i))}return e.ce}function Fn(t){const e=ee(t);return e.le||(e.le=u2(e,La(t))),e.le}function u2(t,e){if(t.limitType==="F")return w0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ih(r.field,s)});const n=t.endAt?new nh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new nh(t.startAt.position,t.startAt.inclusive):null;return w0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Bp(t,e,n){return new Kh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gh(t,e){return Tg(Fn(t),Fn(e))&&t.limitType===e.limitType}function ix(t){return`${Eg(Fn(t))}|lt:${t.limitType}`}function ks(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>tx(r)).join(", ")}]`),Ul(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>po(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>po(r)).join(",")),`Target(${i})`}(Fn(t))}; limitType=${t.limitType})`}function Qh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Y.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of La(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=_0(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,La(i),r)||i.endAt&&!function(o,a,l){const u=_0(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,La(i),r))}(t,e)}function c2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rx(t){return(e,n)=>{let i=!1;for(const r of La(t)){const s=h2(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function h2(t,e,n){const i=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?fo(l,u):X()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return GS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=new je(Y.comparator);function mi(){return d2}const sx=new je(Y.comparator);function _a(...t){let e=sx;for(const n of t)e=e.insert(n.key,n);return e}function ox(t){let e=sx;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function jr(){return Va()}function ax(){return Va()}function Va(){return new Co(t=>t.toString(),(t,e)=>t.isEqual(e))}const f2=new je(Y.comparator),p2=new ut(Y.comparator);function ae(...t){let e=p2;for(const n of t)e=e.add(n);return e}const m2=new ut(ge);function g2(){return m2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function lx(t){return{integerValue:""+t}}function y2(t,e){return qM(e)?lx(e):Sg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this._=void 0}}function _2(t,e,n){return t instanceof vl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&_g(s)&&(s=vg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof wl?cx(t,e):t instanceof El?hx(t,e):function(r,s){const o=ux(r,s),a=T0(o)+T0(r.Pe);return Fp(o)&&Fp(r.Pe)?lx(a):Sg(r.serializer,a)}(t,e)}function v2(t,e,n){return t instanceof wl?cx(t,e):t instanceof El?hx(t,e):n}function ux(t,e){return t instanceof rh?function(i){return Fp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class vl extends Yh{}class wl extends Yh{constructor(e){super(),this.elements=e}}function cx(t,e){const n=dx(e);for(const i of t.elements)n.some(r=>zn(r,i))||n.push(i);return{arrayValue:{values:n}}}class El extends Yh{constructor(e){super(),this.elements=e}}function hx(t,e){let n=dx(e);for(const i of t.elements)n=n.filter(r=>!zn(r,i));return{arrayValue:{values:n}}}class rh extends Yh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function T0(t){return ze(t.integerValue||t.doubleValue)}function dx(t){return wg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.field=e,this.transform=n}}function E2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof wl&&r instanceof wl||i instanceof El&&r instanceof El?ho(i.elements,r.elements,zn):i instanceof rh&&r instanceof rh?zn(i.Pe,r.Pe):i instanceof vl&&r instanceof vl}(t.transform,e.transform)}class T2{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xh{}function fx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jh(t.key,vt.none()):new Bl(t.key,t.data,vt.none());{const n=t.data,i=kt.empty();let r=new ut(ot.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new yr(t.key,i,new Gt(r.toArray()),vt.none())}}function I2(t,e,n){t instanceof Bl?function(r,s,o){const a=r.value.clone(),l=S0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof yr?function(r,s,o){if(!fc(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=S0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(px(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fa(t,e,n,i){return t instanceof Bl?function(s,o,a,l){if(!fc(s.precondition,o))return a;const u=s.value.clone(),h=x0(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof yr?function(s,o,a,l){if(!fc(s.precondition,o))return a;const u=x0(s.fieldTransforms,l,o),h=o.data;return h.setAll(px(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return fc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function S2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=ux(i.transform,r||null);s!=null&&(n===null&&(n=kt.empty()),n.set(i.field,s))}return n||null}function I0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ho(i,r,(s,o)=>E2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bl extends Xh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class yr extends Xh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function px(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function S0(t,e,n){const i=new Map;pe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,v2(o,a,n[r]))}return i}function x0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,_2(s,o,e))}return i}class Jh extends Xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mx extends Xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&I2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Fa(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Fa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ax();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=fx(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(n,i)=>I0(n,i))&&ho(this.baseMutations,e.baseMutations,(n,i)=>I0(n,i))}}class xg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){pe(e.mutations.length===i.length);let r=function(){return f2}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new xg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,ce;function gx(t){switch(t){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function yx(t){if(t===void 0)return pi("GRPC error has no .code"),F.UNKNOWN;switch(t){case He.OK:return F.OK;case He.CANCELLED:return F.CANCELLED;case He.UNKNOWN:return F.UNKNOWN;case He.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case He.INTERNAL:return F.INTERNAL;case He.UNAVAILABLE:return F.UNAVAILABLE;case He.UNAUTHENTICATED:return F.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case He.NOT_FOUND:return F.NOT_FOUND;case He.ALREADY_EXISTS:return F.ALREADY_EXISTS;case He.PERMISSION_DENIED:return F.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case He.ABORTED:return F.ABORTED;case He.OUT_OF_RANGE:return F.OUT_OF_RANGE;case He.UNIMPLEMENTED:return F.UNIMPLEMENTED;case He.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(ce=He||(He={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new Hr([4294967295,4294967295],0);function b0(t){const e=C2().encode(t),n=new US;return n.update(e),new Uint8Array(n.digest())}function k0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hr([n,i],0),new Hr([r,s],0)]}class bg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new va(`Invalid padding: ${n}`);if(i<0)throw new va(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new va(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new va(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Hr.fromNumber(i)));return r.compare(A2)===1&&(r=new Hr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=b0(e),[i,r]=k0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new bg(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=b0(e),[i,r]=k0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,zl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Zh(J.min(),r,new je(ge),mi(),ae())}}class zl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new zl(i,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class _x{constructor(e,n){this.targetId=e,this.me=n}}class vx{constructor(e,n,i=ht.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class C0{constructor(){this.fe=0,this.ge=P0(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),i=ae();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X()}}),new zl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=P0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class P2{constructor(e){this.Le=e,this.Be=new Map,this.ke=mi(),this.qe=A0(),this.Qe=new je(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(Up(s))if(i===0){const o=new Y(s.path);this.Ue(n,o,tt.newNoDocument(o,J.min()))}else pe(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=ts(i).toUint8Array()}catch(l){if(l instanceof QS)return co("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new bg(o,r,s)}catch(l){return co(l instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Up(a.target)){const l=new Y(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,tt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ae();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Zh(e,n,this.Qe,this.ke,i);return this.ke=mi(),this.qe=A0(),this.Qe=new je(ge),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new C0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new C0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function A0(){return new je(Y.comparator)}function P0(){return new je(Y.comparator)}const R2={asc:"ASCENDING",desc:"DESCENDING"},N2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D2={and:"AND",or:"OR"};class M2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zp(t,e){return t.useProto3Json||Ul(e)?e:{value:e}}function sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O2(t,e){return sh(t,e.toTimestamp())}function Yt(t){return pe(!!t),J.fromTimestamp(function(n){const i=ar(n);return new Je(i.seconds,i.nanos)}(t))}function kg(t,e){return $p(t,e).canonicalString()}function $p(t,e){const n=function(r){return new Se(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ex(t){const e=Se.fromString(t);return pe(kx(e)),e}function oh(t,e){return kg(t.databaseId,e.path)}function ja(t,e){const n=Ex(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(Ix(n))}function Tx(t,e){return kg(t.databaseId,e)}function L2(t){const e=Ex(t);return e.length===4?Se.emptyPath():Ix(e)}function Wp(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ix(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function R0(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function V2(t,e){return"found"in e?function(i,r){pe(!!r.found),r.found.name,r.found.updateTime;const s=ja(i,r.found.name),o=Yt(r.found.updateTime),a=r.found.createTime?Yt(r.found.createTime):J.min(),l=new kt({mapValue:{fields:r.found.fields}});return tt.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(i,r){pe(!!r.missing),pe(!!r.readTime);const s=ja(i,r.missing),o=Yt(r.readTime);return tt.newNoDocument(s,o)}(t,e):X()}function F2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(pe(h===void 0||typeof h=="string"),ht.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ht.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?F.UNKNOWN:yx(u.code);return new K(h,u.message||"")}(o);n=new vx(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ja(t,i.document.name),s=Yt(i.document.updateTime),o=i.document.createTime?Yt(i.document.createTime):J.min(),a=new kt({mapValue:{fields:i.document.fields}}),l=tt.newFoundDocument(r,s,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new pc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ja(t,i.document),s=i.readTime?Yt(i.readTime):J.min(),o=tt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new pc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ja(t,i.document),s=i.removedTargetIds||[];n=new pc([],s,r,null)}else{if(!("filter"in e))return X();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new k2(r,s),a=i.targetId;n=new _x(a,o)}}return n}function Sx(t,e){let n;if(e instanceof Bl)n={update:R0(t,e.key,e.value)};else if(e instanceof Jh)n={delete:oh(t,e.key)};else if(e instanceof yr)n={update:R0(t,e.key,e.data),updateMask:K2(e.fieldMask)};else{if(!(e instanceof mx))return X();n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof vl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof El)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:O2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function j2(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Yt(r.updateTime):Yt(s);return o.isEqual(J.min())&&(o=Yt(s)),new T2(o,r.transformResults||[])}(n,e))):[]}function U2(t,e){return{documents:[Tx(t,e.path)]}}function B2(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Tx(t,r);const s=function(u){if(u.length!==0)return bx($n.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:Cs(f.field),direction:W2(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function z2(t){let e=L2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){pe(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=xx(d);return f instanceof $n&&ZS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(T){return new ih(As(T.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Ul(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new nh(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,g=d.values||[];return new nh(g,f)}(n.endAt)),a2(e,r,o,s,a,"F",l,u)}function $2(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=As(n.unaryFilter.field);return Ye.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=As(n.unaryFilter.field);return Ye.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=As(n.unaryFilter.field);return Ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=As(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(As(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(i=>xx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function W2(t){return R2[t]}function H2(t){return N2[t]}function q2(t){return D2[t]}function Cs(t){return{fieldPath:t.canonicalString()}}function As(t){return ot.fromServerFormat(t.fieldPath)}function bx(t){return t instanceof Ye?function(n){if(n.op==="=="){if(y0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(g0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(y0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(g0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:H2(n.op),value:n.value}}}(t):t instanceof $n?function(n){const i=n.getFilters().map(r=>bx(r));return i.length===1?i[0]:{compositeFilter:{op:q2(n.op),filters:i}}}(t):X()}function K2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,i,r,s=J.min(),o=J.min(),a=ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.ct=e}}function Q2(t){const e=z2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.un=new X2}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(or.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class X2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new ut(Se.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ut(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new mo(0)}static kn(){return new mo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.changes=new Co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Fa(i.mutation,r,Gt.empty(),Je.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ae()){const r=jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=_a();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ae()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=mi();const o=Va(),a=function(){return Va()}();return n.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof yr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Fa(h.mutation,u,h.mutation.getFieldMask(),Je.now())):o.set(u.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new Z2(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Va();let r=new je((o,a)=>o-a),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=i.get(l)||Gt.empty();h=a.applyToLocalView(u,h),i.set(l,h);const d=(r.get(a.batchId)||ae()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=ax();h.forEach(f=>{if(!s.has(f)){const g=fx(n.get(f),i.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return j.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):l2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):j.resolve(jr());let a=-1,l=s;return o.next(u=>j.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ae())).next(h=>({batchId:a,changes:ox(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(i=>{let r=_a();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=_a();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const u=function(d,f){return new Kh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,tt.newInvalidDocument(h)))});let a=_a();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Fa(h.mutation,u,Gt.empty(),Je.now()),Qh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Yt(r.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Q2(r.bundledQuery),readTime:Yt(r.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.overlays=new je(Y.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=jr();return j.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const r=jr(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return j.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new je((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=jr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=jr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return j.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new b2(n,i));let s=this.Ir.get(n);s===void 0&&(s=ae(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this.Tr=new ut(Ze.Er),this.dr=new ut(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ze(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Ze(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Y(new Se([])),i=new Ze(n,e),r=new Ze(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Se([])),i=new Ze(n,e),r=new Ze(n,e+1);let s=ae();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ze(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(Ze.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new x2(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Ze(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ze(n,0),r=new Ze(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ut(ge);return n.forEach(r=>{const s=new Ze(r,0),o=new Ze(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),j.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Y.isDocumentKey(s)||(s=s.child(""));const o=new Ze(new Y(s),0);let a=new ut(ge);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return j.forEach(n.mutations,r=>{const s=new Ze(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Ze(n,0),r=this.br.firstAfterOrEqual(i);return j.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.Mr=e,this.docs=function(){return new je(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let i=mi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():tt.newInvalidDocument(r))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=mi();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||zM(BM(h),i)<=0||(r.has(h.key)||Qh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,i,r){X()}Or(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new oO(this)}getSize(e){return j.resolve(this.size)}}class oO extends J2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.persistence=e,this.Nr=new Co(n=>Eg(n),Tg),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cg,this.targetCount=0,this.kr=mo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new mo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),j.waitFor(s).next(()=>r)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new yg(0),this.Kr=!1,this.Kr=!0,this.$r=new iO,this.referenceDelegate=e(this),this.Ur=new aO(this),this.indexManager=new Y2,this.remoteDocumentCache=function(r){return new sO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new G2(n),this.Gr=new tO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new rO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);const r=new uO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class uO extends WM{constructor(e){super(),this.currentSequenceNumber=e}}class Ag{constructor(e){this.persistence=e,this.Jr=new Cg,this.Yr=null}static Zr(e){return new Ag(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,i=>{const r=Y.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ae(),r=ae();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Pg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return HP()?8:HM(Tt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(na()<=ue.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(na()<=ue.DEBUG&&H("QueryEngine","Query:",ks(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(na()<=ue.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):j.resolve())}Yi(e,n){if(E0(n))return j.resolve(null);let i=Fn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Bp(n,null,"F"),i=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ae(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Bp(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return E0(n)||r.isEqual(J.min())?j.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?j.resolve(null):(na()<=ue.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ks(n)),this.rs(e,o,n,UM(r,-1)).next(a=>a))})}ts(e,n){let i=new ut(rx(e));return n.forEach((r,s)=>{Qh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return na()<=ue.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,or.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new je(ge),this._s=new Co(s=>Eg(s),Tg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function fO(t,e,n,i){return new dO(t,e,n,i)}async function Cx(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ae();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function pO(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let g=j.resolve();return f.forEach(T=>{g=g.next(()=>h.getEntry(l,T)).next(I=>{const w=u.docVersions.get(T);pe(w!==null),I.version.compareTo(w)<0&&(d.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),h.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ae();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Ax(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function mO(t,e){const n=ee(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ht.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(I,w,v){return I.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=mi(),u=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(gO(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!i.isEqual(J.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function gO(t,e,n){let i=ae(),r=ae();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=mi();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function yO(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _O(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,j.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Ui(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Hp(t,e,n){const i=ee(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!jl(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function N0(t,e,n){const i=ee(t);let r=J.min(),s=ae();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=ee(l),f=d._s.get(h);return f!==void 0?j.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(i,o,Fn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:J.min(),n?s:ae())).next(a=>(vO(i,c2(e),a),{documents:a,Ts:s})))}function vO(t,e,n){let i=t.us.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class D0{constructor(){this.activeTargetIds=g2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wO{constructor(){this.so=new D0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new D0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function df(){return Du===null?Du=function(){return 268435456+Math.round(2147483648*Math.random())}():Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class SO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=df(),l=this.xo(n,i.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw co("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=TO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=df();return new Promise((o,a)=>{const l=new BS;l.setWithCredentials(!0),l.listenOnce(zS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case hc.NO_ERROR:const h=l.getResponseJson();H(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case hc.TIMEOUT:H(gt,`RPC '${e}' ${s} timed out`),a(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const d=l.getStatus();if(H(gt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const T=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(g.status);a(new K(T,g.message))}else a(new K(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{H(gt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);H(gt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=df(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=HS(),a=WS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");H(gt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,g=!1;const T=new IO({Io:w=>{g?H(gt,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(f||(H(gt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),H(gt,`RPC '${e}' stream ${r} sending:`,w),d.send(w))},To:()=>d.close()}),I=(w,v,E)=>{w.listen(v,x=>{try{E(x)}catch(P){setTimeout(()=>{throw P},0)}})};return I(d,ya.EventType.OPEN,()=>{g||(H(gt,`RPC '${e}' stream ${r} transport opened.`),T.yo())}),I(d,ya.EventType.CLOSE,()=>{g||(g=!0,H(gt,`RPC '${e}' stream ${r} transport closed`),T.So())}),I(d,ya.EventType.ERROR,w=>{g||(g=!0,co(gt,`RPC '${e}' stream ${r} transport errored:`,w),T.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),I(d,ya.EventType.MESSAGE,w=>{var v;if(!g){const E=w.data[0];pe(!!E);const x=E,P=x.error||((v=x[0])===null||v===void 0?void 0:v.error);if(P){H(gt,`RPC '${e}' stream ${r} received error:`,P);const M=P.status;let N=function(k){const C=He[k];if(C!==void 0)return yx(C)}(M),S=P.message;N===void 0&&(N=F.INTERNAL,S="Unknown error status: "+M+" with message "+P.message),g=!0,T.So(new K(N,S)),d.close()}else H(gt,`RPC '${e}' stream ${r} received:`,E),T.bo(E)}}),I(a,$S.STAT_EVENT,w=>{w.stat===Lp.PROXY?H(gt,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===Lp.NOPROXY&&H(gt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return new M2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Rg(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(pi(n.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new K(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xO extends Px{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=F2(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Yt(o.readTime):J.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Wp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Up(l)?{documents:U2(s,l)}:{query:B2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wx(s,o.resumeToken);const u=zp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=sh(s,o.snapshotVersion.toTimestamp());const u=zp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=$2(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Wp(this.serializer),n.removeTarget=e,this.a_(n)}}class bO extends Px{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=j2(e.writeResults,e.commitTime),i=Yt(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Wp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Sx(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,$p(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,$p(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pi(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{ps(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ee(l);u.L_.add(4),await $l(u),u.q_.set("Unknown"),u.L_.delete(4),await td(u)}(this))})}),this.q_=new CO(i,r)}}async function td(t){if(ps(t))for(const e of t.B_)await e(!0)}async function $l(t){for(const e of t.B_)await e(!1)}function Rx(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Og(n)?Mg(n):Ao(n).r_()&&Dg(n,e))}function Ng(t,e){const n=ee(t),i=Ao(n);n.N_.delete(e),i.r_()&&Nx(n,e),n.N_.size===0&&(i.r_()?i.o_():ps(n)&&n.q_.set("Unknown"))}function Dg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(t).A_(e)}function Nx(t,e){t.Q_.xe(e),Ao(t).R_(e)}function Mg(t){t.Q_=new P2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ao(t).start(),t.q_.v_()}function Og(t){return ps(t)&&!Ao(t).n_()&&t.N_.size>0}function ps(t){return ee(t).L_.size===0}function Dx(t){t.Q_=void 0}async function PO(t){t.q_.set("Online")}async function RO(t){t.N_.forEach((e,n)=>{Dg(t,e)})}async function NO(t,e){Dx(t),Og(t)?(t.q_.M_(e),Mg(t)):t.q_.set("Unknown")}async function DO(t,e,n){if(t.q_.set("Online"),e instanceof vx&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ah(t,i)}else if(e instanceof pc?t.Q_.Ke(e):e instanceof _x?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const i=await Ax(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),Nx(s,l);const d=new Ui(h.target,l,u,h.sequenceNumber);Dg(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){H("RemoteStore","Failed to raise snapshot:",i),await ah(t,i)}}async function ah(t,e,n){if(!jl(e))throw e;t.L_.add(1),await $l(t),t.q_.set("Offline"),n||(n=()=>Ax(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await td(t)})}function Mx(t,e){return e().catch(n=>ah(t,n,e))}async function nd(t){const e=ee(t),n=lr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;MO(e);)try{const r=await yO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,OO(e,r)}catch(r){await ah(e,r)}Ox(e)&&Lx(e)}function MO(t){return ps(t)&&t.O_.length<10}function OO(t,e){t.O_.push(e);const n=lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Ox(t){return ps(t)&&!lr(t).n_()&&t.O_.length>0}function Lx(t){lr(t).start()}async function LO(t){lr(t).p_()}async function VO(t){const e=lr(t);for(const n of t.O_)e.m_(n.mutations)}async function FO(t,e,n){const i=t.O_.shift(),r=xg.from(i,e,n);await Mx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await nd(t)}async function jO(t,e){e&&lr(t).V_&&await async function(i,r){if(function(o){return gx(o)&&o!==F.ABORTED}(r.code)){const s=i.O_.shift();lr(i).s_(),await Mx(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await nd(i)}}(t,e),Ox(t)&&Lx(t)}async function O0(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const i=ps(n);n.L_.add(3),await $l(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await td(n)}async function UO(t,e){const n=ee(t);e?(n.L_.delete(2),await td(n)):e||(n.L_.add(2),await $l(n),n.q_.set("Unknown"))}function Ao(t){return t.K_||(t.K_=function(n,i,r){const s=ee(n);return s.w_(),new xO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:PO.bind(null,t),Ro:RO.bind(null,t),mo:NO.bind(null,t),d_:DO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Og(t)?Mg(t):t.q_.set("Unknown")):(await t.K_.stop(),Dx(t))})),t.K_}function lr(t){return t.U_||(t.U_=function(n,i,r){const s=ee(n);return s.w_(),new bO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:LO.bind(null,t),mo:jO.bind(null,t),f_:VO.bind(null,t),g_:FO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nd(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Lg(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vg(t,e){if(pi("AsyncQueue",`${e}: ${t}`),jl(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Y.comparator(n.key,i.key):(n,i)=>Y.comparator(n.key,i.key),this.keyedMap=_a(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new Zs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Zs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.W_=new je(Y.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class go{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new go(e,n,Zs.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zO{constructor(){this.queries=V0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ee(n),s=r.queries;r.queries=V0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function V0(){return new Co(t=>ix(t),Gh)}async function $O(t,e){const n=ee(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new BO,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Vg(o,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Fg(n)}async function WO(t,e){const n=ee(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function HO(t,e){const n=ee(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Fg(n)}function qO(t,e,n){const i=ee(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Fg(t){t.Y_.forEach(e=>{e.next()})}var qp,F0;(F0=qp||(qp={})).ea="default",F0.Cache="cache";class KO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new go(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.key=e}}class Fx{constructor(e){this.key=e}}class GO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=rx(e),this.Ra=new Zs(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new L0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),g=Qh(this.query,d)?d:null,T=!!f&&this.mutatedKeys.has(f.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;f&&g?f.data.isEqual(g.data)?T!==I&&(i.track({type:3,doc:g}),w=!0):this.ga(f,g)||(i.track({type:2,doc:g}),w=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!f&&g?(i.track({type:0,doc:g}),w=!0):f&&!g&&(i.track({type:1,doc:f}),w=!0,(l||u)&&(a=!0)),w&&(g?(o=o.add(g),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,T){const I=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return I(g)-I(T)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new go(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new L0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Fx(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Vx(i))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return go.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class QO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class YO{constructor(e){this.key=e,this.va=!1}}class XO{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Co(a=>ix(a),Gh),this.Ma=new Map,this.xa=new Set,this.Oa=new je(Y.comparator),this.Na=new Map,this.La=new Cg,this.Ba={},this.ka=new Map,this.qa=mo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JO(t,e,n=!0){const i=Wx(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await jx(i,e,n,!0),r}async function ZO(t,e){const n=Wx(t);await jx(n,e,!0,!1)}async function jx(t,e,n,i){const r=await _O(t.localStore,Fn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await eL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Rx(t.remoteStore,r),a}async function eL(t,e,n,i,r){t.Ka=(d,f,g)=>async function(I,w,v,E){let x=w.view.ma(v);x.ns&&(x=await N0(I.localStore,w.query,!1).then(({documents:S})=>w.view.ma(S,x)));const P=E&&E.targetChanges.get(w.targetId),M=E&&E.targetMismatches.get(w.targetId)!=null,N=w.view.applyChanges(x,I.isPrimaryClient,P,M);return U0(I,w.targetId,N.wa),N.snapshot}(t,d,f,g);const s=await N0(t.localStore,e,!0),o=new GO(e,s.Ts),a=o.ma(s.documents),l=zl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);U0(t,n,u.wa);const h=new QO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function tL(t,e,n){const i=ee(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Gh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Hp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ng(i.remoteStore,r.targetId),Kp(i,r.targetId)}).catch(Fl)):(Kp(i,r.targetId),await Hp(i.localStore,r.targetId,!0))}async function nL(t,e){const n=ee(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ng(n.remoteStore,i.targetId))}async function iL(t,e,n){const i=cL(t);try{const r=await function(o,a){const l=ee(o),u=Je.now(),h=a.reduce((g,T)=>g.add(T.key),ae());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=mi(),I=ae();return l.cs.getEntries(g,h).next(w=>{T=w,T.forEach((v,E)=>{E.isValidDocument()||(I=I.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,T)).next(w=>{d=w;const v=[];for(const E of a){const x=S2(E,d.get(E.key).overlayedDocument);x!=null&&v.push(new yr(E.key,x,YS(x.value.mapValue),vt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,v,a)}).next(w=>{f=w;const v=w.applyToLocalDocumentSet(d,I);return l.documentOverlayCache.saveOverlays(g,w.batchId,v)})}).then(()=>({batchId:f.batchId,changes:ox(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new je(ge)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await Wl(i,r.changes),await nd(i.remoteStore)}catch(r){const s=Vg(r,"Failed to persist write");n.reject(s)}}async function Ux(t,e){const n=ee(t);try{const i=await mO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(pe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?pe(o.va):r.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await Wl(n,i,e)}catch(i){await Fl(i)}}function j0(t,e,n){const i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&Fg(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rL(t,e,n){const i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new je(Y.comparator);o=o.insert(s,tt.newNoDocument(s,J.min()));const a=ae().add(s),l=new Zh(J.min(),new Map,new je(ge),o,a);await Ux(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),jg(i)}else await Hp(i.localStore,e,!1).then(()=>Kp(i,e,n)).catch(Fl)}async function sL(t,e){const n=ee(t),i=e.batch.batchId;try{const r=await pO(n.localStore,e);zx(n,i,null),Bx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Wl(n,r)}catch(r){await Fl(r)}}async function oL(t,e,n){const i=ee(t);try{const r=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(pe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);zx(i,e,n),Bx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Wl(i,r)}catch(r){await Fl(r)}}function Bx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function zx(t,e,n){const i=ee(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Kp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||$x(t,i)})}function $x(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ng(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),jg(t))}function U0(t,e,n){for(const i of n)i instanceof Vx?(t.La.addReference(i.key,e),aL(t,i)):i instanceof Fx?(H("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||$x(t,i.key)):X()}function aL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(i),jg(t))}function jg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Se.fromString(e)),i=t.qa.next();t.Na.set(i,new YO(n)),t.Oa=t.Oa.insert(n,i),Rx(t.remoteStore,new Ui(Fn(Ig(n.path)),i,"TargetPurposeLimboResolution",yg.oe))}}async function Wl(t,e,n){const i=ee(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){r.push(u);const d=Pg.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(u,f=>j.forEach(f.$i,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>j.forEach(f.Ui,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!jl(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=h.os.get(f),T=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(f,I)}}}(i.localStore,s))}async function lL(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const i=await Cx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new K(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wl(n,i.hs)}}function uL(t,e){const n=ee(t),i=n.Na.get(e);if(i&&i.va)return ae().add(i.key);{let r=ae();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function Wx(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ux.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rL.bind(null,e),e.Ca.d_=HO.bind(null,e.eventManager),e.Ca.$a=qO.bind(null,e.eventManager),e}function cL(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oL.bind(null,e),e}class lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ed(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return fO(this.persistence,new hO,e.initialUser,this.serializer)}Ga(e){return new lO(Ag.Zr,this.serializer)}Wa(e){return new wO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lh.provider={build:()=>new lh};class Gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>j0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lL.bind(null,this.syncEngine),await UO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zO}()}createDatastore(e){const n=ed(e.databaseInfo.databaseId),i=function(s){return new SO(s)}(e.databaseInfo);return function(s,o,a,l){return new kO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new AO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>j0(this.syncEngine,n,0),function(){return M0.D()?new M0:new EO}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,h){const d=new XO(r,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ee(r);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await $l(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gp.provider={build:()=>new Gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=ee(r),a={documents:s.map(d=>oh(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Se.emptyPath(),a,s.length),u=new Map;l.forEach(d=>{const f=V2(o.serializer,d);u.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=u.get(d.toString());pe(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=Y.fromPath(i);this.mutations.push(new mx(r,this.precondition(r)))}),await async function(i,r){const s=ee(i),o={writes:r.map(a=>Sx(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Se.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X();n=J.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new K(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(J.min())?vt.exists(!1):vt.updateTime(n):vt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new K(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(n)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new Rg(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new dL(this.datastore),n=this.cu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const n=this.updateFunction(e);return!Ul(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!gx(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=yt.UNAUTHENTICATED,this.clientId=KS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Vg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function pf(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Cx(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function B0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mL(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>O0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>O0(e.remoteStore,r)),t._onlineComponents=e}async function mL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await pf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===F.FAILED_PRECONDITION||r.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;co("Error using user provided cache. Falling back to memory cache: "+n),await pf(t,new lh)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await pf(t,new lh);return t._offlineComponents}async function Ug(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await B0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await B0(t,new Gp))),t._onlineComponents}function gL(t){return Ug(t).then(e=>e.syncEngine)}function yL(t){return Ug(t).then(e=>e.datastore)}async function z0(t){const e=await Ug(t),n=e.eventManager;return n.onListen=JO.bind(null,e.syncEngine),n.onUnlisten=tL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _L(t,e,n,i){if(e===!0&&i===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function W0(t){if(!Y.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function H0(t){if(Y.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bg(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_L("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class id{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new RM;switch(i.type){case"firstParty":return new OM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=$0.get(n);i&&(H("ComponentProvider","Removing Datastore"),$0.delete(n),i.terminate())}(this),Promise.resolve()}}function vL(t,e,n,i={}){var r;const s=(t=jn(t,id))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=yt.MOCK_USER;else{a=jP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(u)}t._authCredentials=new NM(new qS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new rd(this.firestore,e,this._query)}}class At{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class nr extends rd{constructor(e,n,i){super(e,n,Ig(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Y(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function wL(t,e,...n){if(t=Fe(t),qx("collection","path",e),t instanceof id){const i=Se.fromString(e,...n);return H0(i),new nr(t,null,i)}{if(!(t instanceof At||t instanceof nr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Se.fromString(e,...n));return H0(i),new nr(t.firestore,null,i)}}function is(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=KS.newId()),qx("doc","path",e),t instanceof id){const i=Se.fromString(e,...n);return W0(i),new At(t,null,new Y(i))}{if(!(t instanceof At||t instanceof nr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Se.fromString(e,...n));return W0(i),new At(t.firestore,t instanceof nr?t.converter:null,new Y(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Rg(this,"async_queue_retry"),this.Vu=()=>{const i=ff();i&&H("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=ff();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ff();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!jl(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw pi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Lg.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function G0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class rs extends id{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new K0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K0(e),this._firestoreClient=void 0,await e}}}function EL(t,e){const n=typeof t=="object"?t:nS(),i=typeof t=="string"?t:"(default)",r=Dl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=VP("firestore");s&&vL(r,...s)}return r}function zg(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TL(t),t._firestoreClient}function TL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,h){return new GM(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Hx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new pL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ss(ht.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ss(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=/^__.*__$/;class SL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bl(e,this.data,n,this.fieldTransforms)}}class Kx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Gx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Hg{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Hg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Gx(this.Cu)&&IL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ed(e)}Qu(e,n,i,r=!1){return new Hg({Cu:e,methodName:n,qu:i,path:ot.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qg(t){const e=t._freezeSettings(),n=ed(t._databaseId);return new xL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qx(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Gg("Data must be an object, but it was:",o,i);const a=Jx(i,o);let l,u;if(s.merge)l=new Gt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Qp(e,d,n);if(!o.contains(f))throw new K(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);eb(h,f)||h.push(f)}l=new Gt(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new SL(new kt(a),l,u)}class od extends sd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}class Kg extends sd{_toFieldTransform(e){return new w2(e.path,new vl)}isEqual(e){return e instanceof Kg}}function Yx(t,e,n,i){const r=t.Qu(1,e,n);Gg("Data must be an object, but it was:",r,i);const s=[],o=kt.empty();fs(i,(l,u)=>{const h=Qg(e,l,n);u=Fe(u);const d=r.Nu(h);if(u instanceof od)s.push(h);else{const f=ad(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Gt(s);return new Kx(o,a,r.fieldTransforms)}function Xx(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Qp(e,i,n)],l=[r];if(s.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Qp(e,s[f])),l.push(s[f+1]);const u=[],h=kt.empty();for(let f=a.length-1;f>=0;--f)if(!eb(u,a[f])){const g=a[f];let T=l[f];T=Fe(T);const I=o.Nu(g);if(T instanceof od)u.push(g);else{const w=ad(T,I);w!=null&&(u.push(g),h.set(g,w))}}const d=new Gt(u);return new Kx(h,d,o.fieldTransforms)}function ad(t,e){if(Zx(t=Fe(t)))return Gg("Unsupported field value:",e,t),Jx(t,e);if(t instanceof sd)return function(i,r){if(!Gx(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=ad(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Fe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return y2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Je.fromDate(i);return{timestampValue:sh(r.serializer,s)}}if(i instanceof Je){const s=new Je(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:sh(r.serializer,s)}}if(i instanceof $g)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ss)return{bytesValue:wx(r.serializer,i._byteString)};if(i instanceof At){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Wg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Sg(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Bg(i)}`)}(t,e)}function Jx(t,e){const n={};return GS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(t,(i,r)=>{const s=ad(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Zx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof $g||t instanceof ss||t instanceof At||t instanceof sd||t instanceof Wg)}function Gg(t,e,n){if(!Zx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Bg(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Qp(t,e,n){if((e=Fe(e))instanceof Hl)return e._internalPath;if(typeof e=="string")return Qg(t,e);throw uh("Field path arguments must be of type string or ",t,!1,void 0,n)}const bL=new RegExp("[~\\*/\\[\\]]");function Qg(t,e,n){if(e.search(bL)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hl(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new K(F.INVALID_ARGUMENT,a+t+l)}function eb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kL extends ch{data(){return super.data()}}function tb(t,e){return typeof e=="string"?Qg(t,e):e instanceof Hl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nb{convertValue(e,n="none"){switch(ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return fs(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>ze(o.doubleValue));return new Wg(s)}convertGeoPoint(e){return new $g(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=vg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const n=ar(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Se.fromString(e);pe(kx(i));const r=new yl(i.get(1),i.get(3)),s=new Y(i.popFirst(5));return r.isEqual(n)||pi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class AL extends nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yg extends ch{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(tb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class mc extends Yg{data(e={}){return super.data(e)}}class PL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new $s(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new mc(this._firestore,this._userDataWriter,i.key,i,new $s(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new mc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new $s(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new mc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new $s(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:RL(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class Xg extends nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function rb(t,e,n){t=jn(t,At);const i=jn(t.firestore,rs),r=ib(t.converter,e,n);return Jg(i,[Qx(qg(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,vt.none())])}function sb(t,e,n,...i){t=jn(t,At);const r=jn(t.firestore,rs),s=qg(r);let o;return o=typeof(e=Fe(e))=="string"||e instanceof Hl?Xx(s,"updateDoc",t._key,e,n,i):Yx(s,"updateDoc",t._key,e),Jg(r,[o.toMutation(t._key,vt.exists(!0))])}function NL(t){return Jg(jn(t.firestore,rs),[new Jh(t._key,vt.none())])}function ob(t,...e){var n,i,r;t=Fe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||G0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(G0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,u,h;if(t instanceof At)u=jn(t.firestore,rs),h=Ig(t._key.path),l={next:d=>{e[o]&&e[o](DL(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=jn(t,rd);u=jn(d.firestore,rs),h=d._query;const f=new Xg(u);l={next:g=>{e[o]&&e[o](new PL(u,f,d,g))},error:e[o+1],complete:e[o+2]},CL(t._query)}return function(f,g,T,I){const w=new hL(I),v=new KO(g,w,T);return f.asyncQueue.enqueueAndForget(async()=>$O(await z0(f),v)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>WO(await z0(f),v))}}(zg(u),h,a,l)}function Jg(t,e){return function(i,r){const s=new tr;return i.asyncQueue.enqueueAndForget(async()=>iL(await gL(i),r,s)),s.promise}(zg(t),e)}function DL(t,e,n){const i=n.docs.get(e._key),r=new Xg(t);return new Yg(t,r,e._key,i,new $s(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML={maxAttempts:5};function ia(t,e){if((t=Fe(t)).firestore!==e)throw new K(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=qg(n)}get(n){const i=ia(n,this._firestore),r=new AL(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return X();const o=s[0];if(o.isFoundDocument())return new ch(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new ch(this._firestore,r,i._key,null,i.converter);throw X()})}set(n,i,r){const s=ia(n,this._firestore),o=ib(s.converter,i,r),a=Qx(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){const o=ia(n,this._firestore);let a;return a=typeof(i=Fe(i))=="string"||i instanceof Hl?Xx(this._dataReader,"Transaction.update",o._key,i,r,s):Yx(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=ia(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ia(e,this._firestore),i=new Xg(this._firestore);return super.get(e).then(r=>new Yg(this._firestore,i,n._key,r._document,new $s(!1,!1),n.converter))}}function ab(t,e,n){t=jn(t,rs);const i=Object.assign(Object.assign({},ML),n);return function(s){if(s.maxAttempts<1)throw new K(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new tr;return s.asyncQueue.enqueueAndForget(async()=>{const u=await yL(s);new fL(s.asyncQueue,u,a,o,l).au()}),l.promise}(zg(t),r=>e(new OL(t,r)),i)}function ql(){return new Kg("serverTimestamp")}(function(e,n=!0){(function(r){ko=r})(bo),Bn(new En("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new rs(new DM(i.getProvider("auth-internal")),new VM(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),an(h0,"4.7.3",e),an(h0,"4.7.3","esm2017")})();const lb="@firebase/installations",Zg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=1e4,cb=`w:${Zg}`,hb="FIS_v2",LL="https://firebaseinstallations.googleapis.com/v1",VL=60*60*1e3,FL="installations",jL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},os=new hs(FL,jL,UL);function db(t){return t instanceof Sn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb({projectId:t}){return`${LL}/projects/${t}/installations`}function pb(t){return{token:t.token,requestStatus:2,expiresIn:zL(t.expiresIn),creationTime:Date.now()}}async function mb(t,e){const i=(await e.json()).error;return os.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function gb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function BL(t,{refreshToken:e}){const n=gb(t);return n.append("Authorization",$L(e)),n}async function yb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function zL(t){return Number(t.replace("s","000"))}function $L(t){return`${hb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=fb(t),r=gb(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:hb,appId:t.appId,sdkVersion:cb},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await yb(()=>fetch(i,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:pb(u.authToken)}}else throw await mb("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=/^[cdef][\w-]{21}$/,Yp="";function KL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=GL(t);return qL.test(n)?n:Yp}catch{return Yp}}function GL(t){return HL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new Map;function wb(t,e){const n=ld(t);Eb(n,e),QL(n,e)}function Eb(t,e){const n=vb.get(t);if(n)for(const i of n)i(e)}function QL(t,e){const n=YL();n&&n.postMessage({key:t,fid:e}),XL()}let Ur=null;function YL(){return!Ur&&"BroadcastChannel"in self&&(Ur=new BroadcastChannel("[Firebase] FID Change"),Ur.onmessage=t=>{Eb(t.data.key,t.data.fid)}),Ur}function XL(){vb.size===0&&Ur&&(Ur.close(),Ur=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="firebase-installations-database",ZL=1,as="firebase-installations-store";let mf=null;function ey(){return mf||(mf=eS(JL,ZL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(as)}}})),mf}async function hh(t,e){const n=ld(t),r=(await ey()).transaction(as,"readwrite"),s=r.objectStore(as),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&wb(t,e.fid),e}async function Tb(t){const e=ld(t),i=(await ey()).transaction(as,"readwrite");await i.objectStore(as).delete(e),await i.done}async function ud(t,e){const n=ld(t),r=(await ey()).transaction(as,"readwrite"),s=r.objectStore(as),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&wb(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(t){let e;const n=await ud(t.appConfig,i=>{const r=eV(i),s=tV(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Yp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function eV(t){const e=t||{fid:KL(),registrationStatus:0};return Ib(e)}function tV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(os.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=nV(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:iV(t)}:{installationEntry:e}}async function nV(t,e){try{const n=await WL(t,e);return hh(t.appConfig,n)}catch(n){throw db(n)&&n.customData.serverCode===409?await Tb(t.appConfig):await hh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function iV(t){let e=await Q0(t.appConfig);for(;e.registrationStatus===1;)await _b(100),e=await Q0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await ty(t);return i||n}return e}function Q0(t){return ud(t,e=>{if(!e)throw os.create("installation-not-found");return Ib(e)})}function Ib(t){return rV(t)?{fid:t.fid,registrationStatus:0}:t}function rV(t){return t.registrationStatus===1&&t.registrationTime+ub<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV({appConfig:t,heartbeatServiceProvider:e},n){const i=oV(t,n),r=BL(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:cb,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await yb(()=>fetch(i,a));if(l.ok){const u=await l.json();return pb(u)}else throw await mb("Generate Auth Token",l)}function oV(t,{fid:e}){return`${fb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ny(t,e=!1){let n;const i=await ud(t.appConfig,s=>{if(!Sb(s))throw os.create("not-registered");const o=s.authToken;if(!e&&uV(o))return s;if(o.requestStatus===1)return n=aV(t,e),s;{if(!navigator.onLine)throw os.create("app-offline");const a=hV(s);return n=lV(t,a),a}});return n?await n:i.authToken}async function aV(t,e){let n=await Y0(t.appConfig);for(;n.authToken.requestStatus===1;)await _b(100),n=await Y0(t.appConfig);const i=n.authToken;return i.requestStatus===0?ny(t,e):i}function Y0(t){return ud(t,e=>{if(!Sb(e))throw os.create("not-registered");const n=e.authToken;return dV(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function lV(t,e){try{const n=await sV(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await hh(t.appConfig,i),n}catch(n){if(db(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Tb(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hh(t.appConfig,i)}throw n}}function Sb(t){return t!==void 0&&t.registrationStatus===2}function uV(t){return t.requestStatus===2&&!cV(t)}function cV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+VL}function hV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function dV(t){return t.requestStatus===1&&t.requestTime+ub<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fV(t){const e=t,{installationEntry:n,registrationPromise:i}=await ty(e);return i?i.catch(console.error):ny(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(t,e=!1){const n=t;return await mV(n),(await ny(n,e)).token}async function mV(t){const{registrationPromise:e}=await ty(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t){if(!t||!t.options)throw gf("App Configuration");if(!t.name)throw gf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw gf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function gf(t){return os.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="installations",yV="installations-internal",_V=t=>{const e=t.getProvider("app").getImmediate(),n=gV(e),i=Dl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},vV=t=>{const e=t.getProvider("app").getImmediate(),n=Dl(e,xb).getImmediate();return{getId:()=>fV(n),getToken:r=>pV(n,r)}};function wV(){Bn(new En(xb,_V,"PUBLIC")),Bn(new En(yV,vV,"PRIVATE"))}wV();an(lb,Zg);an(lb,Zg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="analytics",EV="firebase_id",TV="origin",IV=60*1e3,SV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",iy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt=new $h("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ln=new hs("analytics","Analytics",xV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){if(!t.startsWith(iy)){const e=ln.create("invalid-gtag-resource",{gtagURL:t});return zt.warn(e.message),""}return t}function bb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function CV(t,e){const n=kV("firebase-js-sdk-policy",{createScriptURL:bV}),i=document.createElement("script"),r=`${iy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function AV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function PV(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await bb(n)).find(u=>u.measurementId===r);l&&await e[l.appId]}}catch(a){zt.error(a)}t("config",r,s)}async function RV(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await bb(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){zt.error(s)}}function NV(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await RV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await PV(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){zt.error(a)}}return r}function DV(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=NV(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function MV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(iy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=30,LV=1e3;class VV{constructor(e={},n=LV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const kb=new VV;function FV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function jV(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:FV(i)},s=SV.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw ln.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function UV(t,e=kb,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw ln.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw ln.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new $V;return setTimeout(async()=>{a.abort()},IV),Cb({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Cb(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=kb){var s;const{appId:o,measurementId:a}=t;try{await BV(i,e)}catch(l){if(a)return zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await jV(t);return r.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!zV(u)){if(r.deleteThrottleMetadata(o),a)return zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Lv(n,r.intervalMillis,OV):Lv(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),zt.debug(`Calling attemptFetch again in ${h} millis`),Cb(t,d,i,r)}}function BV(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function zV(t){if(!(t instanceof Sn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class $V{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function WV(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(){if(YI())try{await XI()}catch(t){return zt.warn(ln.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zt.warn(ln.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qV(t,e,n,i,r,s,o){var a;const l=UV(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&zt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>zt.error(g)),e.push(l);const u=HV().then(g=>{if(g)return i.getId()}),[h,d]=await Promise.all([l,u]);MV(s)||CV(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[TV]="firebase",f.update=!0,d!=null&&(f[EV]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.app=e}_delete(){return delete Ua[this.app.options.appId],Promise.resolve()}}let Ua={},J0=[];const Z0={};let yf="dataLayer",GV="gtag",ew,Ab,tw=!1;function QV(){const t=[];if(QI()&&t.push("This is a browser extension environment."),qP()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=ln.create("invalid-analytics-context",{errorInfo:e});zt.warn(n.message)}}function YV(t,e,n){QV();const i=t.options.appId;if(!i)throw ln.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ln.create("no-api-key");if(Ua[i]!=null)throw ln.create("already-exists",{id:i});if(!tw){AV(yf);const{wrappedGtag:s,gtagCore:o}=DV(Ua,J0,Z0,yf,GV);Ab=s,ew=o,tw=!0}return Ua[i]=qV(t,J0,Z0,e,ew,yf,n),new KV(t)}function XV(t,e,n,i){t=Fe(t),WV(Ab,Ua[t.app.options.appId],e,n,i).catch(r=>zt.error(r))}const nw="@firebase/analytics",iw="0.10.8";function JV(){Bn(new En(X0,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return YV(i,r,n)},"PUBLIC")),Bn(new En("analytics-internal",t,"PRIVATE")),an(nw,iw),an(nw,iw,"esm2017");function t(e){try{const n=e.getProvider(X0).getImmediate();return{logEvent:(i,r,s)=>XV(n,i,r,s)}}catch(n){throw ln.create("interop-component-reg-failed",{reason:n})}}}JV();const ZV={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},Pb=tS(ZV),ra=kM(Pb),Wn=EL(Pb),Rb=O.createContext(null);function eF({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{const l=mD(ra,u=>{n(u),r(!1)});return()=>l()},[]);const a=O.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,u){o(null);try{return(await uD(ra,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,u){o(null);try{return(await cD(ra,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await gD(ra)},async resetPassword(l){o(null);try{await lD(ra,l)}catch(u){throw o((u==null?void 0:u.message)||"Failed to send reset email."),u}}}),[e,i,s]);return y.jsx(Rb.Provider,{value:a,children:t})}function vi(){return O.useContext(Rb)}function tF(){const{user:t,logout:e}=vi(),n=xo();async function i(){await e(),n("/dashboard")}return y.jsx("div",{className:"nav",children:y.jsxs("div",{className:"nav-inner",children:[y.jsxs("div",{className:"brand",children:[y.jsx("div",{className:"badge"}),y.jsxs("div",{children:[y.jsx("h1",{children:"Body Recomposition Tracker"}),y.jsx("div",{className:"small",children:"Trend-first logging: weight , strength /"})]})]}),y.jsxs("div",{className:"nav-links",children:[y.jsxs("div",{className:"nav-tabs",children:[y.jsx(Is,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),y.jsx(Is,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&y.jsx(Is,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&y.jsx(Is,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),y.jsx("div",{className:"nav-actions",children:t?y.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):y.jsxs(y.Fragment,{children:[y.jsx(Is,{to:"/login",className:"btn",children:"Log in"}),y.jsx(Is,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function rw({children:t}){const{user:e,initializing:n}=vi();return n?y.jsx("div",{className:"panel",children:y.jsx("div",{className:"muted",children:"Loading"})}):e?t:y.jsx(xp,{to:"/login",replace:!0})}const Nb=O.createContext(null),sw={email:"",sex:"",height:"",targetWeight:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],createdAt:null};function nF({children:t}){const{user:e}=vi(),[n,i]=O.useState(sw),[r,s]=O.useState(!1),[o,a]=O.useState(null);O.useEffect(()=>{if(i(sw),a(null),!e)return;const u=is(Wn,"users",e.uid);s(!0);const h=ob(u,async d=>{if(!d.exists()){await rb(u,{email:e.email||"",sex:"",height:"",targetWeight:null,triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],createdAt:ql()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",targetWeight:f.targetWeight??"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],cycles:Array.isArray(f.cycles)?f.cycles:[],createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=O.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(u){if(!e)throw new Error("Not authenticated");a(null);const h=is(Wn,"users",e.uid);await sb(h,u)}}),[n,r,o,e]);return y.jsx(Nb.Provider,{value:l,children:t})}function ry(){return O.useContext(Nb)}function sy(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function dh(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function fh(){return sy(new Date)}function iF(t,e){const n=dh(t);return n.setDate(n.getDate()+Number(e)),sy(n)}function rF(t,e){return t.dateIso.localeCompare(e.dateIso)}function oy(t,e,n){const i=wL(Wn,"users",t,"entries");return ob(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(rF);e(o)},n)}async function sF(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=is(Wn,"users",t,"entries",n),r=dh(n),s={...e,dateIso:n,date:e.date||r,updatedAt:ql()};await rb(i,s,{merge:!0})}async function Mu(t,e,n){const i=is(Wn,"users",t,"entries",e);await sb(i,{...n,updatedAt:ql()})}async function oF(t,e){const n=is(Wn,"users",t,"entries",e);await NL(n)}const aF=2/8;function Db({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function Dr(t,e){const n=Number(t),i=Number(e);if(!Number.isFinite(n)||n<=0||!Number.isFinite(i)||i<=0||i>=37)return null;const r=n*(36/(37-i));return Number.isFinite(r)?r:null}function lF({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>r==null||r===""?NaN:Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function Ss(t,e=aF){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function uF(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function _f(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=uF(i,r,s);return Number.isFinite(o)?o:null}function cF({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=_f(n,"neck",i),a=_f(n,"waist",i),l=_f(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const u=a-o;if(!(u>0))return null;const h=495/(1.0324-.19077*Math.log10(u)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const u=a+l-o;if(!(u>0))return null;const h=495/(1.29579-.35004*Math.log10(u)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function hF({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function Mb(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(a=>({dateIso:a.dateIso,weight:Sr(a.weight),protein:Sr(a.protein),carbs:Sr(a.carbs),fats:Sr(a.fats),bench:Sr(a.bench),squat:Sr(a.squat),deadlift:Sr(a.deadlift),calories:Db(a),avgStrength:lF(a),bfPct:cF({sex:i,heightCm:r,entry:a,tripleEnabled:n})}));s.forEach(a=>{a.lbm=hF({weightKg:a.weight,bfPct:a.bfPct})});const o={weight:Ss(s.map(a=>a.weight)),bench:Ss(s.map(a=>a.bench)),squat:Ss(s.map(a=>a.squat)),deadlift:Ss(s.map(a=>a.deadlift)),calories:Ss(s.map(a=>a.calories)),avgStrength:Ss(s.map(a=>a.avgStrength))};return s.map((a,l)=>({...a,wma:{weight:o.weight[l],bench:o.bench[l],squat:o.squat[l],deadlift:o.deadlift[l],calories:o.calories[l],avgStrength:o.avgStrength[l]}}))}function dF(t){var f,g,T,I;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=w=>w*7-1;function s(w){var v;for(let E=w;E>=0;E--){const x=(v=t[E])==null?void 0:v.lbm;if(Number.isFinite(x))return x}return null}for(let w=1;w<=i;w++){const v=(w-1)*7,E=r(w),x=t.slice(v,E+1),P=sa(x.map(A=>A.calories)),M=sa(x.map(A=>{var ie;return(ie=A==null?void 0:A.wma)==null?void 0:ie.avgStrength})),N=(g=(f=x[0])==null?void 0:f.wma)==null?void 0:g.weight,S=(I=(T=x[x.length-1])==null?void 0:T.wma)==null?void 0:I.weight,_=Number.isFinite(N)&&Number.isFinite(S)?S-N:null;let k=null;if(Number.isFinite(P)&&Number.isFinite(_)){const ie=-_*7700/7;k=P+ie}const C=s(E);let R=null,D="";Number.isFinite(C)&&Number.isFinite(_)&&(R=Math.max(0,-_)/C*100,R<.5?D="Conservative":R<=1?D="Optimal":D="Aggressive"),e.push({week:w,avgCalories:P,weightChange:_,tdee:k,avgStrengthWma:M,lbm:C,lossRatePct:R,lossRateStatus:D,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(w=>w.tdee).filter(Number.isFinite),a=o.length?sa(o):null,l=e.slice(0,2).map(w=>w.avgStrengthWma).filter(Number.isFinite),u=l.length?sa(l):null,h=e.slice(0,2).map(w=>Number.isFinite(w.weightChange)?Math.max(0,-w.weightChange):null).filter(Number.isFinite),d=h.length?sa(h):null;if(Number.isFinite(a))for(const w of e)Number.isFinite(w.tdee)&&(w.tdeeChangeFromBaseline=w.tdee-a,w.adaptationPct=w.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:u,baselineWeeklyLoss:d}}function Sr(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function sa(t){const e=(t||[]).map(n=>n==null||n===""?NaN:Number(n)).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function Gn(){let t=0,e=0;for(;t===0;)t=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}function ow(t,e,n){return Math.max(e,Math.min(n,t))}function fF(){return{email:"sample@demo.local",sex:"male",height:175,targetWeight:82,triplemeasurements:!1,createdAt:null}}function pF(t=60){const e=new Date;e.setDate(e.getDate()-(t-1));const n=[];let i=90,r=100,s=140,o=180;for(let a=0;a<t;a++){const l=new Date(e);l.setDate(e.getDate()+a);const u=sy(l),d=2400-Math.floor(a/14)*125;i-=5.5/(t-1),r+=4/(t-1),s+=4/(t-1),o+=5/(t-1);const f=i+Gn()*.8,g=r+Gn()*2,T=s+Gn()*2.5,I=o+Gn()*2.8,w=180+Gn()*10,v=70+Gn()*6,E=(d-4*w-9*v)/4+Gn()*10,x={id:u,dateIso:u,date:null,weight:Ou(f),protein:vf(w),carbs:vf(ow(E,100,320)),fats:vf(ow(v,45,95)),bench:Ou(g),squat:Ou(T),deadlift:Ou(I),neck:null,waist:null,hip:null};if(a%7===0){const N=96+-7*(a/(t-1));x.neck=40+Gn()*.3,x.waist=N+Gn()*.6}n.push(x)}return n}function vf(t){return Number.isFinite(t)?Math.round(t):null}function Ou(t){return Number.isFinite(t)?Math.round(t*10)/10:null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Kl(t){return t+.5|0}const Bi=(t,e,n)=>Math.max(Math.min(t,n),e);function wa(t){return Bi(Kl(t*2.55),0,255)}function ir(t){return Bi(Kl(t*255),0,255)}function ei(t){return Bi(Kl(t/2.55)/100,0,1)}function aw(t){return Bi(Kl(t*100),0,100)}const en={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xp=[..."0123456789ABCDEF"],mF=t=>Xp[t&15],gF=t=>Xp[(t&240)>>4]+Xp[t&15],Lu=t=>(t&240)>>4===(t&15),yF=t=>Lu(t.r)&&Lu(t.g)&&Lu(t.b)&&Lu(t.a);function _F(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&en[t[1]]*17,g:255&en[t[2]]*17,b:255&en[t[3]]*17,a:e===5?en[t[4]]*17:255}:(e===7||e===9)&&(n={r:en[t[1]]<<4|en[t[2]],g:en[t[3]]<<4|en[t[4]],b:en[t[5]]<<4|en[t[6]],a:e===9?en[t[7]]<<4|en[t[8]]:255})),n}const vF=(t,e)=>t<255?e(t):"";function wF(t){var e=yF(t)?mF:gF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+vF(t.a,e):void 0}const EF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ob(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function TF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function IF(t,e,n){const i=Ob(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function SF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function ay(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=SF(n,i,r,h,s),l=l*60+.5),[l|0,u||0,a]}function ly(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ir)}function uy(t,e,n){return ly(Ob,t,e,n)}function xF(t,e,n){return ly(IF,t,e,n)}function bF(t,e,n){return ly(TF,t,e,n)}function Lb(t){return(t%360+360)%360}function kF(t){const e=EF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?wa(+e[5]):ir(+e[5]));const r=Lb(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=xF(r,s,o):e[1]==="hsv"?i=bF(r,s,o):i=uy(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function CF(t,e){var n=ay(t);n[0]=Lb(n[0]+e),n=uy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function AF(t){if(!t)return;const e=ay(t),n=e[0],i=aw(e[1]),r=aw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${ei(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const lw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},uw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function PF(){const t={},e=Object.keys(uw),n=Object.keys(lw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,lw[s]);s=parseInt(uw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Vu;function RF(t){Vu||(Vu=PF(),Vu.transparent=[0,0,0,0]);const e=Vu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const NF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function DF(t){const e=NF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?wa(o):Bi(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?wa(i):Bi(i,0,255)),r=255&(e[4]?wa(r):Bi(r,0,255)),s=255&(e[6]?wa(s):Bi(s,0,255)),{r:i,g:r,b:s,a:n}}}function MF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ei(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const wf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,xs=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function OF(t,e,n){const i=xs(ei(t.r)),r=xs(ei(t.g)),s=xs(ei(t.b));return{r:ir(wf(i+n*(xs(ei(e.r))-i))),g:ir(wf(r+n*(xs(ei(e.g))-r))),b:ir(wf(s+n*(xs(ei(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Fu(t,e,n){if(t){let i=ay(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=uy(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Vb(t,e){return t&&Object.assign(e||{},t)}function cw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ir(t[3]))):(e=Vb(t,{r:0,g:0,b:0,a:1}),e.a=ir(e.a)),e}function LF(t){return t.charAt(0)==="r"?DF(t):kF(t)}class Tl{constructor(e){if(e instanceof Tl)return e;const n=typeof e;let i;n==="object"?i=cw(e):n==="string"&&(i=_F(e)||RF(e)||LF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Vb(this._rgb);return e&&(e.a=ei(e.a)),e}set rgb(e){this._rgb=cw(e)}rgbString(){return this._valid?MF(this._rgb):void 0}hexString(){return this._valid?wF(this._rgb):void 0}hslString(){return this._valid?AF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=OF(this._rgb,e._rgb,n)),this}clone(){return new Tl(this.rgb)}alpha(e){return this._rgb.a=ir(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Kl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fu(this._rgb,2,e),this}darken(e){return Fu(this._rgb,2,-e),this}saturate(e){return Fu(this._rgb,1,e),this}desaturate(e){return Fu(this._rgb,1,-e),this}rotate(e){return CF(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Qn(){}const VF=(()=>{let t=0;return()=>t++})();function be(t){return t==null}function at(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function hn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function kn(t,e){return hn(t)?t:e}function he(t,e){return typeof t>"u"?e:t}const FF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ee(t,e,n,i){let r,s,o;if(at(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ve(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function ph(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function mh(t){if(at(t))return t.map(mh);if(ve(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=mh(t[n[r]]);return e}return t}function Fb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function jF(t,e,n,i){if(!Fb(t))return;const r=e[t],s=n[t];ve(r)&&ve(s)?Il(r,s,i):e[t]=mh(s)}function Il(t,e,n){const i=at(e)?e:[e],r=i.length;if(!ve(t))return t;n=n||{};const s=n.merger||jF;let o;for(let a=0;a<r;++a){if(o=i[a],!ve(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],t,o,n)}return t}function Ba(t,e){return Il(t,e,{merger:UF})}function UF(t,e,n){if(!Fb(t))return;const i=e[t],r=n[t];ve(i)&&ve(r)?Ba(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=mh(r))}const hw={"":t=>t,x:t=>t.x,y:t=>t.y};function BF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function zF(t){const e=BF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function gh(t,e){return(hw[e]||(hw[e]=zF(e)))(t)}function cy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const yh=t=>typeof t<"u",ur=t=>typeof t=="function",dw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function $F(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const wt=Math.PI,Un=2*wt,WF=Un+wt,_h=Number.POSITIVE_INFINITY,HF=wt/180,yn=wt/2,xr=wt/4,fw=wt*2/3,jb=Math.log10,yo=Math.sign;function za(t,e,n){return Math.abs(t-e)<n}function pw(t){const e=Math.round(t);t=za(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(jb(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function qF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function KF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Sl(t){return!KF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function GF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function QF(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Br(t){return t*(wt/180)}function YF(t){return t*(180/wt)}function mw(t){if(!hn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function XF(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*wt&&(s+=Un),{angle:s,distance:r}}function Jp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function JF(t,e){return(t-e+WF)%Un-wt}function Ci(t){return(t%Un+Un)%Un}function Ub(t,e,n,i){const r=Ci(t),s=Ci(e),o=Ci(n),a=Ci(s-r),l=Ci(o-r),u=Ci(r-s),h=Ci(r-o);return r===s||r===o||i&&s===o||a>l&&u<h}function sn(t,e,n){return Math.max(e,Math.min(n,t))}function ZF(t){return sn(t,-32768,32767)}function Ea(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function hy(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const zr=(t,e,n,i)=>hy(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),ej=(t,e,n)=>hy(t,n,i=>t[i][e]>=n);function tj(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Bb=["push","pop","shift","splice","unshift"];function nj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Bb.forEach(n=>{const i="_onData"+cy(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function gw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Bb.forEach(s=>{delete t[s]}),delete t._chartjs)}function ij(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const zb=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function $b(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,zb.call(window,()=>{i=!1,t.apply(e,n)}))}}function rj(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Wb=t=>t==="start"?"left":t==="end"?"right":"center",Ht=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,sj=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function oj(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:g,maxDefined:T}=o.getUserBounds();if(g){if(r=Math.min(zr(l,h,d).lo,n?i:zr(e,h,o.getPixelForValue(d)).lo),u){const I=l.slice(0,r+1).reverse().findIndex(w=>!be(w[a.axis]));r-=Math.max(0,I)}r=sn(r,0,i-1)}if(T){let I=Math.max(zr(l,o.axis,f,!0).hi+1,n?0:zr(e,h,o.getPixelForValue(f),!0).hi+1);if(u){const w=l.slice(I-1).findIndex(v=>!be(v[a.axis]));I+=Math.max(0,w)}s=sn(I,r,i)-r}else s=i-r}return{start:r,count:s}}function aj(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const ju=t=>t===0||t===1,yw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Un/n)),_w=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Un/n)+1,$a={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*yn)+1,easeOutSine:t=>Math.sin(t*yn),easeInOutSine:t=>-.5*(Math.cos(wt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ju(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ju(t)?t:yw(t,.075,.3),easeOutElastic:t=>ju(t)?t:_w(t,.075,.3),easeInOutElastic(t){return ju(t)?t:t<.5?.5*yw(t*2,.1125,.45):.5+.5*_w(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-$a.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?$a.easeInBounce(t*2)*.5:$a.easeOutBounce(t*2-1)*.5+.5};function dy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function vw(t){return dy(t)?t:new Tl(t)}function Ef(t){return dy(t)?t:new Tl(t).saturate(.5).darken(.1).hexString()}const lj=["x","y","borderWidth","radius","tension"],uj=["color","borderColor","backgroundColor"];function cj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:uj},numbers:{type:"number",properties:lj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function hj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ww=new Map;function dj(t,e){e=e||{};const n=t+JSON.stringify(e);let i=ww.get(n);return i||(i=new Intl.NumberFormat(t,e),ww.set(n,i)),i}function Hb(t,e,n){return dj(e,n).format(t)}const fj={values(t){return at(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=pj(t,n)}const o=jb(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Hb(t,i,l)}};function pj(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var qb={formatters:fj};function mj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ls=Object.create(null),Zp=Object.create(null);function Wa(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Tf(t,e,n){return typeof e=="string"?Il(Wa(t,e),n):Il(Wa(t,""),e)}class gj{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Ef(r.backgroundColor),this.hoverBorderColor=(i,r)=>Ef(r.borderColor),this.hoverColor=(i,r)=>Ef(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Tf(this,e,n)}get(e){return Wa(this,e)}describe(e,n){return Tf(Zp,e,n)}override(e,n){return Tf(ls,e,n)}route(e,n,i,r){const s=Wa(this,e),o=Wa(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return ve(l)?Object.assign({},u,l):he(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var We=new gj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[cj,hj,mj]);function yj(t){return!t||be(t.size)||be(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ew(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function br(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Tw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function em(t,e,n,i){Kb(t,e,n,i,null)}function Kb(t,e,n,i,r){let s,o,a,l,u,h,d,f;const g=e.pointStyle,T=e.rotation,I=e.radius;let w=(T||0)*HF;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(I)||I<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,i,r/2,I,0,0,Un):t.arc(n,i,I,0,Un),t.closePath();break;case"triangle":h=r?r/2:I,t.moveTo(n+Math.sin(w)*h,i-Math.cos(w)*I),w+=fw,t.lineTo(n+Math.sin(w)*h,i-Math.cos(w)*I),w+=fw,t.lineTo(n+Math.sin(w)*h,i-Math.cos(w)*I),t.closePath();break;case"rectRounded":u=I*.516,l=I-u,o=Math.cos(w+xr)*l,d=Math.cos(w+xr)*(r?r/2-u:l),a=Math.sin(w+xr)*l,f=Math.sin(w+xr)*(r?r/2-u:l),t.arc(n-d,i-a,u,w-wt,w-yn),t.arc(n+f,i-o,u,w-yn,w),t.arc(n+d,i+a,u,w,w+yn),t.arc(n-f,i+o,u,w+yn,w+wt),t.closePath();break;case"rect":if(!T){l=Math.SQRT1_2*I,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}w+=xr;case"rectRot":d=Math.cos(w)*(r?r/2:I),o=Math.cos(w)*I,a=Math.sin(w)*I,f=Math.sin(w)*(r?r/2:I),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":w+=xr;case"cross":d=Math.cos(w)*(r?r/2:I),o=Math.cos(w)*I,a=Math.sin(w)*I,f=Math.sin(w)*(r?r/2:I),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(w)*(r?r/2:I),o=Math.cos(w)*I,a=Math.sin(w)*I,f=Math.sin(w)*(r?r/2:I),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),w+=xr,d=Math.cos(w)*(r?r/2:I),o=Math.cos(w)*I,a=Math.sin(w)*I,f=Math.sin(w)*(r?r/2:I),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(w)*I,a=Math.sin(w)*I,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(r?r/2:I),i+Math.sin(w)*I);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function xl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function fy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function py(t){t.restore()}function _j(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function vj(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function wj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),be(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Ej(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function Tj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function vh(t,e,n,i,r,s={}){const o=at(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,wj(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&Tj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),be(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,i,s.maxWidth)),t.fillText(u,n,i,s.maxWidth),Ej(t,n,i,u,s),i+=Number(r.lineHeight);t.restore()}function tm(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*wt,wt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,wt,yn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,yn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-yn,!0),t.lineTo(n+o.topLeft,i)}const Ij=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Sj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function xj(t,e){const n=(""+t).match(Ij);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const bj=t=>+t||0;function Gb(t,e){const n={},i=ve(e),r=i?Object.keys(e):e,s=ve(t)?i?o=>he(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=bj(s(o));return n}function kj(t){return Gb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ha(t){return Gb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function In(t){const e=kj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ft(t,e){t=t||{},e=e||We.font;let n=he(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=he(t.style,e.style);i&&!(""+i).match(Sj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:he(t.family,e.family),lineHeight:xj(he(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:he(t.weight,e.weight),string:""};return r.string=yj(r),r}function Uu(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Cj(t,e,n){const{min:i,max:r}=t,s=FF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ms(t,e){return Object.assign(Object.create(t),e)}function my(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Jb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>my([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Yb(a,l,()=>Lj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Sw(a).includes(l)},ownKeys(a){return Sw(a)},set(a,l,u){const h=a._storage||(a._storage=r());return a[l]=h[l]=u,delete a._keys,!0}})}function _o(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Qb(t,i),setContext:s=>_o(t,s,n,i),override:s=>_o(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return Yb(s,o,()=>Pj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function Qb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ur(n)?n:()=>n,isIndexable:ur(i)?i:()=>i}}const Aj=(t,e)=>t?t+cy(e):e,gy=(t,e)=>ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Yb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Pj(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return ur(a)&&o.isScriptable(e)&&(a=Rj(e,a,t,n)),at(a)&&a.length&&(a=Nj(e,a,t,o.isIndexable)),gy(e,a)&&(a=_o(a,r,s&&s[e],o)),a}function Rj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),gy(t,l)&&(l=yy(r._scopes,r,t,l)),l}function Nj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ve(e[0])){const l=e,u=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=yy(u,r,t,h);e.push(_o(d,s,o&&o[t],a))}}return e}function Xb(t,e,n){return ur(t)?t(e,n):t}const Dj=(t,e)=>t===!0?e:typeof t=="string"?gh(e,t):void 0;function Mj(t,e,n,i,r){for(const s of e){const o=Dj(n,s);if(o){t.add(o);const a=Xb(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function yy(t,e,n,i){const r=e._rootScopes,s=Xb(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Iw(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=Iw(a,o,s,l,i),l===null)?!1:my(Array.from(a),[""],r,s,()=>Oj(e,n,i))}function Iw(t,e,n,i,r){for(;n;)n=Mj(t,e,n,i,r);return n}function Oj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return at(r)&&ve(n)?n:r||{}}function Lj(t,e,n,i){let r;for(const s of e)if(r=Jb(Aj(s,t),n),typeof r<"u")return gy(t,r)?yy(n,i,t,r):r}function Jb(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Sw(t){let e=t._keys;return e||(e=t._keys=Vj(t._scopes)),e}function Vj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const Fj=Number.EPSILON||1e-14,vo=(t,e)=>e<t.length&&!t[e].skip&&t[e],Zb=t=>t==="x"?"y":"x";function jj(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Jp(s,r),l=Jp(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function Uj(t,e,n){const i=t.length;let r,s,o,a,l,u=vo(t,0);for(let h=0;h<i-1;++h)if(l=u,u=vo(t,h+1),!(!l||!u)){if(za(e[h],0,Fj)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function Bj(t,e,n="x"){const i=Zb(n),r=t.length;let s,o,a,l=vo(t,0);for(let u=0;u<r;++u){if(o=a,a=l,l=vo(t,u+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[u]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[u])}}function zj(t,e="x"){const n=Zb(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,u=vo(t,0);for(o=0;o<i;++o)if(a=l,l=u,u=vo(t,o+1),!!l){if(u){const h=u[e]-l[e];r[o]=h!==0?(u[n]-l[n])/h:0}s[o]=a?u?yo(r[o-1])!==yo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Uj(t,r,s),Bj(t,s,e)}function Bu(t,e,n){return Math.max(Math.min(t,n),e)}function $j(t,e){let n,i,r,s,o,a=xl(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&xl(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Bu(r.cp1x,e.left,e.right),r.cp1y=Bu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Bu(r.cp2x,e.left,e.right),r.cp2y=Bu(r.cp2y,e.top,e.bottom)))}function Wj(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")zj(t,r);else{let u=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=jj(u,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&$j(t,n)}function _y(){return typeof window<"u"&&typeof document<"u"}function vy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function wh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const cd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Hj(t,e){return cd(t).getPropertyValue(e)}const qj=["top","right","bottom","left"];function qr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=qj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Kj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Gj(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Kj(r,s,t.target))a=r,l=s;else{const u=e.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Mr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=cd(n),s=r.boxSizing==="border-box",o=qr(r,"padding"),a=qr(r,"border","width"),{x:l,y:u,box:h}=Gj(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:T}=e;return s&&(g-=o.width+a.width,T-=o.height+a.height),{x:Math.round((l-d)/g*n.width/i),y:Math.round((u-f)/T*n.height/i)}}function Qj(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&vy(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=cd(s),l=qr(a,"border","width"),u=qr(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,i=wh(a.maxWidth,s,"clientWidth"),r=wh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||_h,maxHeight:r||_h}}const zi=t=>Math.round(t*10)/10;function Yj(t,e,n,i){const r=cd(t),s=qr(r,"margin"),o=wh(r.maxWidth,t,"clientWidth")||_h,a=wh(r.maxHeight,t,"clientHeight")||_h,l=Qj(t,e,n);let{width:u,height:h}=l;if(r.boxSizing==="content-box"){const f=qr(r,"border","width"),g=qr(r,"padding");u-=g.width+f.width,h-=g.height+f.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=zi(Math.min(u,o,l.maxWidth)),h=zi(Math.min(h,a,l.maxHeight)),u&&!h&&(h=zi(u/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,u=zi(Math.floor(h*i))),{width:u,height:h}}function xw(t,e,n){const i=e||1,r=zi(t.height*i),s=zi(t.width*i);t.height=zi(t.height),t.width=zi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Xj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_y()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function bw(t,e){const n=Hj(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Or(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Jj(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Zj(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Or(t,r,n),a=Or(r,s,n),l=Or(s,e,n),u=Or(o,a,n),h=Or(a,l,n);return Or(u,h,n)}const e4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},t4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function eo(t,e,n){return t?e4(e,n):t4()}function ek(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function tk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function nk(t){return t==="angle"?{between:Ub,compare:JF,normalize:Ci}:{between:Ea,compare:(e,n)=>e-n,normalize:e=>e}}function kw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function n4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=nk(i),l=e.length;let{start:u,end:h,loop:d}=t,f,g;if(d){for(u+=l,h+=l,f=0,g=l;f<g&&o(a(e[u%l][i]),r,s);++f)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:d,style:t.style}}function i4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=nk(i),{start:h,end:d,loop:f,style:g}=n4(t,e,n),T=[];let I=!1,w=null,v,E,x;const P=()=>l(r,x,v)&&a(r,x)!==0,M=()=>a(s,v)===0||l(s,x,v),N=()=>I||P(),S=()=>!I||M();for(let _=h,k=h;_<=d;++_)E=e[_%o],!E.skip&&(v=u(E[i]),v!==x&&(I=l(v,r,s),w===null&&N()&&(w=a(v,r)===0?_:k),w!==null&&S()&&(T.push(kw({start:w,end:_,loop:f,count:o,style:g})),w=null),k=_,x=v));return w!==null&&T.push(kw({start:w,end:d,loop:f,count:o,style:g})),T}function r4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=i4(i[r],t.points,e);s.length&&n.push(...s)}return n}function s4(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function o4(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function a4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=s4(n,r,s,i);if(i===!0)return Cw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,u=!!t._fullLoop&&o===0&&a===r-1;return Cw(t,o4(n,o,l,u),n,e)}function Cw(t,e,n,i){return!i||!i.setContext||!n?e:l4(t,e,n,i)}function l4(t,e,n,i){const r=t._chart.getContext(),s=Aw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=s,d=e[0].start,f=d;function g(T,I,w,v){const E=a?-1:1;if(T!==I){for(T+=l;n[T%l].skip;)T-=E;for(;n[I%l].skip;)I+=E;T%l!==I%l&&(u.push({start:T%l,end:I%l,loop:w,style:v}),h=v,d=I%l)}}for(const T of e){d=a?d:T.start;let I=n[d%l],w;for(f=d+1;f<=T.end;f++){const v=n[f%l];w=Aw(i.setContext(ms(r,{type:"segment",p0:I,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),u4(w,h)&&g(d,f-1,T.loop,h),I=v,h=w}d<f-1&&g(d,f-1,T.loop,h)}return u}function Aw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function u4(t,e){if(!e)return!1;const n=[],i=function(r,s){return dy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function zu(t,e,n){return t.options.clip?t[n]:e[n]}function c4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:zu(n,e,"left"),right:zu(n,e,"right"),top:zu(i,e,"top"),bottom:zu(i,e,"bottom")}:e}function h4(t,e){const n=e._clip;if(n.disabled)return!1;const i=c4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class d4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=zb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Yn=new d4;const Pw="transparent",f4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=vw(t||Pw),r=i.valid&&vw(e||Pw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class p4{constructor(e,n,i,r){const s=n[i];r=Uu([e.to,r,s,e.from]);const o=Uu([e.from,s,r]);this._active=!0,this._fn=e.fn||f4[e.type||typeof o],this._easing=$a[e.easing]||$a.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Uu([e.to,n,r,e.from]),this._from=Uu([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class ik{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ve(e))return;const n=Object.keys(We.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ve(s))return;const o={};for(const a of n)o[a]=s[a];(at(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=g4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&m4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[u];let d=s[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}s[u]=d=new p4(f,e,u,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Yn.add(this._chart,i),!0}}function m4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function g4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Rw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function y4(t,e,n){if(n===!1)return!1;const i=Rw(t,n),r=Rw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function _4(t){let e,n,i,r;return ve(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function rk(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Nw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}u=t.values[l],hn(u)&&(s||e===0||yo(e)===yo(u))&&(e+=u)}return!h&&!i.all?0:e}function v4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function If(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function w4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function E4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function T4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Dw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Mw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,u=o.axis,h=w4(s,o,i),d=e.length;let f;for(let g=0;g<d;++g){const T=e[g],{[l]:I,[u]:w}=T,v=T._stacks||(T._stacks={});f=v[u]=T4(r,h,I),f[a]=w,f._top=Dw(f,o,!0,i.type),f._bottom=Dw(f,o,!1,i.type);const E=f._visualValues||(f._visualValues={});E[a]=w}}function Sf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function I4(t,e){return ms(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function S4(t,e,n){return ms(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function oa(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const xf=t=>t==="reset"||t==="none",Ow=(t,e)=>e?t:Object.assign({},t),x4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:rk(n,!0),values:null};class qa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=If(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&oa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,g,T)=>d==="x"?f:d==="r"?T:g,s=n.xAxisID=he(i.xAxisID,Sf(e,"x")),o=n.yAxisID=he(i.yAxisID,Sf(e,"y")),a=n.rAxisID=he(i.rAxisID,Sf(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&gw(this._data,this),e._stacked&&oa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ve(n)){const r=this._cachedMeta;this._data=v4(n,r)}else if(i!==n){if(i){gw(i,this);const r=this._cachedMeta;oa(r),r._parsed=[]}n&&Object.isExtensible(n)&&nj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=If(n.vScale,n),n.stack!==i.stack&&(r=!0,oa(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(Mw(this,n._parsed),n._stacked=If(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{at(r[e])?f=this.parseArrayData(i,r,e,n):ve(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const g=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(g()&&(l=!1),u=d);i._sorted=l}o&&Mw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,d=new Array(r);let f,g,T;for(f=0,g=r;f<g;++f)T=f+i,d[f]={[a]:h||s.parse(u[T],T),[l]:o.parse(n[T],T)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let h,d,f,g;for(h=0,d=r;h<d;++h)f=h+i,g=n[f],u[h]={x:s.parse(gh(g,a),f),y:o.parse(gh(g,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:rk(r,!0),values:n._stacks[e.axis]._visualValues};return Nw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=Nw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=x4(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=E4(a);let f,g;function T(){g=r[f];const I=g[a.axis];return!hn(g[e.axis])||h>I||d<I}for(f=0;f<o&&!(!T()&&(this.updateRangeFromParsed(u,e,g,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!T()){this.updateRangeFromParsed(u,e,g,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],hn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_4(he(this.options.clip,y4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&u?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=S4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=I4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&yh(i);if(a)return Ow(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),g=Object.keys(We.elements[e]),T=()=>this.getContext(i,r,n),I=u.resolveNamedOptions(f,g,T,d);return I.$shared&&(I.$shared=l,s[o]=Object.freeze(Ow(I,l))),I}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const u=new ik(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||xf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){xf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!xf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&oa(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ne(qa,"defaults",{}),ne(qa,"datasetElementType",null),ne(qa,"dataElementType",null);class gc extends qa{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=oj(n,r,o);this._drawStart=a,this._drawCount=l,aj(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,g=a.axis,{spanGaps:T,segment:I}=this.options,w=Sl(T)?T:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none",E=n+i,x=e.length;let P=n>0&&this.getParsed(n-1);for(let M=0;M<x;++M){const N=e[M],S=v?N:{};if(M<n||M>=E){S.skip=!0;continue}const _=this.getParsed(M),k=be(_[g]),C=S[f]=o.getPixelForValue(_[f],M),R=S[g]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[g],M);S.skip=isNaN(C)||isNaN(R)||k,S.stop=M>0&&Math.abs(_[f]-P[f])>w,I&&(S.parsed=_,S.raw=u.data[M]),d&&(S.options=h||this.resolveDataElementOptions(M,N.active?"active":r)),v||this.updateElement(N,M,S,r),P=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ne(gc,"id","line"),ne(gc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ne(gc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function kr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class wy{constructor(e){ne(this,"options");this.options=e||{}}static override(e){Object.assign(wy.prototype,e)}init(){}formats(){return kr()}parse(){return kr()}format(){return kr()}add(){return kr()}diff(){return kr()}startOf(){return kr()}endOf(){return kr()}}var b4={_date:wy};function k4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?ej:zr;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(s,e,n-d),g=u(s,e,n+d);return{lo:f.lo,hi:g.hi}}}}else{const h=u(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,g=f.slice(0,h.lo+1).reverse().findIndex(I=>!be(I[d.axis]));h.lo-=Math.max(0,g);const T=f.slice(h.hi).findIndex(I=>!be(I[d.axis]));h.hi+=Math.max(0,T)}return h}}return{lo:0,hi:s.length-1}}function hd(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:d,hi:f}=k4(s[a],e,o,r);for(let g=d;g<=f;++g){const T=h[g];T.skip||i(T,u,g)}}}function C4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function bf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||hd(t,n,e,function(a,l,u){!r&&!xl(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function A4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=XF(o,{x:e.x,y:e.y});Ub(d,u,h)&&r.push({element:o,datasetIndex:a,index:l})}return hd(t,n,e,s),r}function P4(t,e,n,i,r,s){let o=[];const a=C4(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const g=h.inRange(e.x,e.y,r);if(i&&!g)return;const T=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(T))&&!g)return;const w=a(e,T);w<l?(o=[{element:h,datasetIndex:d,index:f}],l=w):w===l&&o.push({element:h,datasetIndex:d,index:f})}return hd(t,n,e,u),o}function kf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?A4(t,e,n,r):P4(t,e,n,i,r,s)}function Lw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return hd(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var R4={modes:{index(t,e,n,i){const r=Mr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?bf(t,r,s,i,o):kf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Mr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?bf(t,r,s,i,o):kf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Mr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return bf(t,r,s,i,o)},nearest(t,e,n,i){const r=Mr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return kf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Mr(e,t);return Lw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Mr(e,t);return Lw(t,r,"y",n.intersect,i)}}};const sk=["left","top","right","bottom"];function aa(t,e){return t.filter(n=>n.pos===e)}function Vw(t,e){return t.filter(n=>sk.indexOf(n.pos)===-1&&n.box.axis===e)}function la(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function N4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function D4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!sk.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function M4(t,e){const n=D4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function O4(t){const e=N4(t),n=la(e.filter(u=>u.box.fullSize),!0),i=la(aa(e,"left"),!0),r=la(aa(e,"right")),s=la(aa(e,"top"),!0),o=la(aa(e,"bottom")),a=Vw(e,"x"),l=Vw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:aa(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Fw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function ok(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function L4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ve(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&ok(o,s.getPadding());const a=Math.max(0,e.outerWidth-Fw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Fw(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function V4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function F4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Ta(t,e,n,i){const r=[];let s,o,a,l,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,F4(a.horizontal,e));const{same:d,other:f}=L4(e,n,a,i);u|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return u&&Ta(r,e,n,i)||h}function $u(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function jw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=e.w*h,f=u.size||l.height;yh(u.start)&&(o=u.start),l.fullSize?$u(l,r.left,o,n.outerWidth-r.right-r.left,f):$u(l,e.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=e.h*h,f=u.size||l.width;yh(u.start)&&(s=u.start),l.fullSize?$u(l,s,r.top,f,n.outerHeight-r.bottom-r.top):$u(l,s,e.top+u.placed,f,d),u.start=s,u.placed+=d,s=l.right}}e.x=s,e.y=o}var $i={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=In(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=O4(t.boxes),l=a.vertical,u=a.horizontal;Ee(t.boxes,I=>{typeof I.beforeLayout=="function"&&I.beforeLayout()});const h=l.reduce((I,w)=>w.box.options&&w.box.options.display===!1?I:I+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);ok(f,In(i));const g=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),T=M4(l.concat(u),d);Ta(a.fullSize,g,d,T),Ta(l,g,d,T),Ta(u,g,d,T)&&Ta(l,g,d,T),V4(g),jw(a.leftAndTop,g,d,T),g.x+=g.w,g.y+=g.h,jw(a.rightAndBottom,g,d,T),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ee(a.chartArea,I=>{const w=I.box;Object.assign(w,t.chartArea),w.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class ak{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class j4 extends ak{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yc="$chartjs",U4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Uw=t=>t===null||t==="";function B4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[yc]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Uw(r)){const s=bw(t,"width");s!==void 0&&(t.width=s)}if(Uw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=bw(t,"height");s!==void 0&&(t.height=s)}return t}const lk=Xj?{passive:!0}:!1;function z4(t,e,n){t&&t.addEventListener(e,n,lk)}function $4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,lk)}function W4(t,e){const n=U4[t.type]||t.type,{x:i,y:r}=Mr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Eh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function H4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Eh(a.addedNodes,i),o=o&&!Eh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function q4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Eh(a.removedNodes,i),o=o&&!Eh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const bl=new Map;let Bw=0;function uk(){const t=window.devicePixelRatio;t!==Bw&&(Bw=t,bl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function K4(t,e){bl.size||window.addEventListener("resize",uk),bl.set(t,e)}function G4(t){bl.delete(t),bl.size||window.removeEventListener("resize",uk)}function Q4(t,e,n){const i=t.canvas,r=i&&vy(i);if(!r)return;const s=$b((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),K4(t,s),o}function Cf(t,e,n){n&&n.disconnect(),e==="resize"&&G4(t)}function Y4(t,e,n){const i=t.canvas,r=$b(s=>{t.ctx!==null&&n(W4(s,t))},t);return z4(i,e,r),r}class X4 extends ak{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(B4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[yc])return!1;const i=n[yc].initial;["height","width"].forEach(s=>{const o=i[s];be(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[yc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:H4,detach:q4,resize:Q4}[n]||Y4;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Cf,detach:Cf,resize:Cf}[n]||$4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return Yj(e,n,i,r)}isAttached(e){const n=e&&vy(e);return!!(n&&n.isConnected)}}function J4(t){return!_y()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?j4:X4}class cr{constructor(){ne(this,"x");ne(this,"y");ne(this,"active",!1);ne(this,"options");ne(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Sl(this.x)&&Sl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}ne(cr,"defaults",{}),ne(cr,"defaultRoutes");function Z4(t,e){const n=t.options.ticks,i=eU(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?nU(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return iU(e,u,s,o/r),u;const h=tU(s,e,r);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(Wu(e,u,h,be(g)?0:a-g,a),d=0,f=o-1;d<f;d++)Wu(e,u,h,s[d],s[d+1]);return Wu(e,u,h,l,be(g)?e.length:l+g),u}return Wu(e,u,h),u}function eU(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function tU(t,e,n){const i=rU(t),r=e.length/n;if(!i)return Math.max(r,1);const s=qF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function nU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function iU(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Wu(t,e,n,i,r){const s=he(i,0),o=Math.min(he(r,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function rU(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const sU=t=>t==="left"?"right":t==="right"?"left":t,zw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,$w=(t,e)=>Math.min(e||t,t);function Ww(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function oU(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(i===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<s-a||l>o+a)))return l}function aU(t,e){Ee(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function ua(t){return t.drawTicks?t.tickLength:0}function Hw(t,e){if(!t.display)return 0;const n=Ft(t.font,e),i=In(t.padding);return(at(t.text)?t.text.length:1)*n.lineHeight+i.height}function lU(t,e){return ms(t,{scale:e,type:"scale"})}function uU(t,e,n){return ms(t,{tick:n,index:e,type:"tick"})}function cU(t,e,n){let i=Wb(t);return(n&&e!=="right"||!n&&e==="right")&&(i=sU(i)),i}function hU(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let d=0,f,g,T;const I=o-r,w=a-s;if(t.isHorizontal()){if(g=Ht(i,s,a),ve(n)){const v=Object.keys(n)[0],E=n[v];T=h[v].getPixelForValue(E)+I-e}else n==="center"?T=(u.bottom+u.top)/2+I-e:T=zw(t,n,e);f=a-s}else{if(ve(n)){const v=Object.keys(n)[0],E=n[v];g=h[v].getPixelForValue(E)-w+e}else n==="center"?g=(u.left+u.right)/2-w+e:g=zw(t,n,e);T=Ht(i,o,r),d=n==="left"?-yn:yn}return{titleX:g,titleY:T,maxWidth:f,rotation:d}}class Po extends cr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=kn(e,Number.POSITIVE_INFINITY),n=kn(n,Number.NEGATIVE_INFINITY),i=kn(i,Number.POSITIVE_INFINITY),r=kn(r,Number.NEGATIVE_INFINITY),{min:kn(e,i),max:kn(n,r),minDefined:hn(e),maxDefined:hn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:kn(n,kn(i,n)),max:kn(i,kn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Cj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ww(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Z4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Ae(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=$w(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=sn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),d+6>a&&(a=g/(i-(e.offset?.5:1)),l=this.maxHeight-ua(e.grid)-n.padding-Hw(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=YF(Math.min(Math.asin(sn((h.highest.height+6)/a,-1,1)),Math.asin(sn(l/u,-1,1))-Math.asin(sn(f/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Hw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ua(s)+l):(e.height=this.maxHeight,e.width=ua(s)+l),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),g=i.padding*2,T=Br(this.labelRotation),I=Math.cos(T),w=Math.sin(T);if(a){const v=i.mirror?0:w*d.width+I*f.height;e.height=Math.min(this.maxHeight,e.height+v+g)}else{const v=i.mirror?0:I*d.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+v+g)}this._calculatePadding(u,h,w,I)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?u?(f=r*e.width,g=i*n.height):(f=i*e.height,g=r*n.width):s==="start"?g=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)be(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Ww(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/$w(n,i));let u=0,h=0,d,f,g,T,I,w,v,E,x,P,M;for(d=0;d<n;d+=l){if(T=e[d].label,I=this._resolveTickFontOptions(d),r.font=w=I.string,v=s[w]=s[w]||{data:{},gc:[]},E=I.lineHeight,x=P=0,!be(T)&&!at(T))x=Ew(r,v.data,v.gc,x,T),P=E;else if(at(T))for(f=0,g=T.length;f<g;++f)M=T[f],!be(M)&&!at(M)&&(x=Ew(r,v.data,v.gc,x,M),P+=E);o.push(x),a.push(P),u=Math.max(x,u),h=Math.max(P,h)}aU(s,n);const N=o.indexOf(u),S=a.indexOf(h),_=k=>({width:o[k]||0,height:a[k]||0});return{first:_(0),last:_(n-1),widest:_(N),highest:_(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return ZF(this._alignToPixels?br(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=uU(this.getContext(),e,i))}return this.$context||(this.$context=lU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Br(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ua(s),g=[],T=a.setContext(this.getContext()),I=T.display?T.width:0,w=I/2,v=function(le){return br(i,le,I)};let E,x,P,M,N,S,_,k,C,R,D,A;if(o==="top")E=v(this.bottom),S=this.bottom-f,k=E-w,R=v(e.top)+w,A=e.bottom;else if(o==="bottom")E=v(this.top),R=e.top,A=v(e.bottom)-w,S=E+w,k=this.top+f;else if(o==="left")E=v(this.right),N=this.right-f,_=E-w,C=v(e.left)+w,D=e.right;else if(o==="right")E=v(this.left),C=e.left,D=v(e.right)-w,N=E+w,_=this.left+f;else if(n==="x"){if(o==="center")E=v((e.top+e.bottom)/2+.5);else if(ve(o)){const le=Object.keys(o)[0],ye=o[le];E=v(this.chart.scales[le].getPixelForValue(ye))}R=e.top,A=e.bottom,S=E+w,k=S+f}else if(n==="y"){if(o==="center")E=v((e.left+e.right)/2);else if(ve(o)){const le=Object.keys(o)[0],ye=o[le];E=v(this.chart.scales[le].getPixelForValue(ye))}N=E-w,_=N-f,C=e.left,D=e.right}const ie=he(r.ticks.maxTicksLimit,d),re=Math.max(1,Math.ceil(d/ie));for(x=0;x<d;x+=re){const le=this.getContext(x),ye=s.setContext(le),B=a.setContext(le),G=ye.lineWidth,q=ye.color,de=B.dash||[],te=B.dashOffset,_e=ye.tickWidth,Ne=ye.tickColor,Ke=ye.tickBorderDash||[],De=ye.tickBorderDashOffset;P=oU(this,x,l),P!==void 0&&(M=br(i,P,G),u?N=_=C=D=M:S=k=R=A=M,g.push({tx1:N,ty1:S,tx2:_,ty2:k,x1:C,y1:R,x2:D,y2:A,width:G,color:q,borderDash:de,borderDashOffset:te,tickWidth:_e,tickColor:Ne,tickBorderDash:Ke,tickBorderDashOffset:De}))}return this._ticksLength=d,this._borderValue=E,g}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=s,f=ua(i.grid),g=f+h,T=d?-h:g,I=-Br(this.labelRotation),w=[];let v,E,x,P,M,N,S,_,k,C,R,D,A="middle";if(r==="top")N=this.bottom-T,S=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+T,S=this._getXAxisLabelAlignment();else if(r==="left"){const re=this._getYAxisLabelAlignment(f);S=re.textAlign,M=re.x}else if(r==="right"){const re=this._getYAxisLabelAlignment(f);S=re.textAlign,M=re.x}else if(n==="x"){if(r==="center")N=(e.top+e.bottom)/2+g;else if(ve(r)){const re=Object.keys(r)[0],le=r[re];N=this.chart.scales[re].getPixelForValue(le)+g}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-g;else if(ve(r)){const re=Object.keys(r)[0],le=r[re];M=this.chart.scales[re].getPixelForValue(le)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const ie=this._getLabelSizes();for(v=0,E=a.length;v<E;++v){x=a[v],P=x.label;const re=s.setContext(this.getContext(v));_=this.getPixelForTick(v)+s.labelOffset,k=this._resolveTickFontOptions(v),C=k.lineHeight,R=at(P)?P.length:1;const le=R/2,ye=re.color,B=re.textStrokeColor,G=re.textStrokeWidth;let q=S;o?(M=_,S==="inner"&&(v===E-1?q=this.options.reverse?"left":"right":v===0?q=this.options.reverse?"right":"left":q="center"),r==="top"?u==="near"||I!==0?D=-R*C+C/2:u==="center"?D=-ie.highest.height/2-le*C+C:D=-ie.highest.height+C/2:u==="near"||I!==0?D=C/2:u==="center"?D=ie.highest.height/2-le*C:D=ie.highest.height-R*C,d&&(D*=-1),I!==0&&!re.showLabelBackdrop&&(M+=C/2*Math.sin(I))):(N=_,D=(1-R)*C/2);let de;if(re.showLabelBackdrop){const te=In(re.backdropPadding),_e=ie.heights[v],Ne=ie.widths[v];let Ke=D-te.top,De=0-te.left;switch(A){case"middle":Ke-=_e/2;break;case"bottom":Ke-=_e;break}switch(S){case"center":De-=Ne/2;break;case"right":De-=Ne;break;case"inner":v===E-1?De-=Ne:v>0&&(De-=Ne/2);break}de={left:De,top:Ke,width:Ne+te.width,height:_e+te.height,color:re.backdropColor}}w.push({label:P,font:k,textOffset:D,options:{rotation:I,color:ye,strokeColor:B,strokeWidth:G,textAlign:q,textBaseline:A,translation:[M,N],backdrop:de}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Br(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return n==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=br(e,this.left,o)-o/2,h=br(e,this.right,a)+a/2,d=f=l):(d=br(e,this.top,o)-o/2,f=br(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&fy(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;vh(i,u,0,h,l,a)}r&&py(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Ft(i.font),o=In(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ve(n)?(l+=o.bottom,at(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=hU(this,l,n,a);vh(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:cU(a,n,r),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=he(e.grid&&e.grid.z,-1),r=he(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Po.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ft(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Hu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;pU(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,dU(e,o,i),this.override&&We.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in We[r]&&(delete We[r][i],this.override&&delete ls[i])}}function dU(t,e,n){const i=Il(Object.create(null),[n?We.get(n):{},We.get(e),t.defaults]);We.set(e,i),t.defaultRoutes&&fU(e,t.defaultRoutes),t.descriptors&&We.describe(e,t.descriptors)}function fU(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");We.route(s,r,l,a)})}function pU(t){return"id"in t&&"defaults"in t}class mU{constructor(){this.controllers=new Hu(qa,"datasets",!0),this.elements=new Hu(cr,"elements"),this.plugins=new Hu(Object,"plugins"),this.scales=new Hu(Po,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Ee(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=cy(e);Ae(i["before"+r],[],i),n[e](i),Ae(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Rn=new mU;class gU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Ae(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=he(i.options&&i.options.plugins,{}),s=yU(i);return r===!1&&!n?[]:vU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function yU(t){const e={},n=[],i=Object.keys(Rn.plugins.items);for(let s=0;s<i.length;s++)n.push(Rn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function _U(t,e){return!e&&t===!1?null:t===!0?{}:t}function vU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=_U(i[l],r);u!==null&&s.push({plugin:a,options:wU(t.config,{plugin:a,local:n[l]},u,o)})}return s}function wU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nm(t,e){const n=We.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function EU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function TU(t,e){return t===e?"_index_":"_value_"}function qw(t){if(t==="x"||t==="y"||t==="r")return t}function IU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function im(t,...e){if(qw(t))return t;for(const n of e){const i=n.axis||IU(n.position)||t.length>1&&qw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Kw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function SU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Kw(t,"x",n[0])||Kw(t,"y",n[0])}return{}}function xU(t,e){const n=ls[t.type]||{scales:{}},i=e.scales||{},r=nm(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ve(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=im(o,a,SU(o,t),We.scales[a.type]),u=TU(l,r),h=n.scales||{};s[o]=Ba(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||nm(a,e),h=(ls[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=EU(d,l),g=o[f+"AxisID"]||f;s[g]=s[g]||Object.create(null),Ba(s[g],[{axis:f},i[g],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ba(a,[We.scales[a.type],We.scale])}),s}function ck(t){const e=t.options||(t.options={});e.plugins=he(e.plugins,{}),e.scales=xU(t,e)}function hk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function bU(t){return t=t||{},t.data=hk(t.data),ck(t),t}const Gw=new Map,dk=new Set;function qu(t,e){let n=Gw.get(t);return n||(n=e(),Gw.set(t,n),dk.add(n)),n}const ca=(t,e,n)=>{const i=gh(e,n);i!==void 0&&t.add(i)};class kU{constructor(e){this._config=bU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ck(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return qu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return qu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return qu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return qu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ca(l,e,d))),h.forEach(d=>ca(l,r,d)),h.forEach(d=>ca(l,ls[s]||{},d)),h.forEach(d=>ca(l,We,d)),h.forEach(d=>ca(l,Zp,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),dk.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,ls[n]||{},We.datasets[n]||{},{type:n},We,Zp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Qw(this._resolverCache,e,r);let l=o;if(AU(o,n)){s.$shared=!1,i=ur(i)?i():i;const u=this.createResolver(e,i,a);l=_o(o,i,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Qw(this._resolverCache,e,i);return ve(n)?_o(s,n,void 0,r):s}}function Qw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:my(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const CU=t=>ve(t)&&Object.getOwnPropertyNames(t).some(e=>ur(t[e]));function AU(t,e){const{isScriptable:n,isIndexable:i}=Qb(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(ur(a)||CU(a))||o&&at(a))return!0}return!1}var PU="4.5.1";const RU=["top","bottom","left","right","chartArea"];function Yw(t,e){return t==="top"||t==="bottom"||RU.indexOf(t)===-1&&e==="x"}function Xw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Jw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ae(n&&n.onComplete,[t],e)}function NU(t){const e=t.chart,n=e.options.animation;Ae(n&&n.onProgress,[t],e)}function fk(t){return _y()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _c={},Zw=t=>{const e=fk(t);return Object.values(_c).filter(n=>n.canvas===e).pop()};function DU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function MU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var ki;let dd=(ki=class{static register(...e){Rn.add(...e),eE()}static unregister(...e){Rn.remove(...e),eE()}constructor(e,n){const i=this.config=new kU(n),r=fk(e),s=Zw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||J4(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=VF(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rj(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],_c[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Yn.listen(this,"complete",Jw),Yn.listen(this,"progress",NU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return be(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Rn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Tw(this.canvas,this.ctx),this}stop(){return Yn.stop(this),this}resize(e,n){Yn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,xw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ae(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ee(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=im(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Ee(s,o=>{const a=o.options,l=a.id,u=im(l,a),h=he(a.type,o.dtype);(a.position===void 0||Yw(a.position,u)!==Yw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Rn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Ee(r,(o,a)=>{o||delete i[a]}),Ee(i,o=>{$i.configure(this,o,o.options),$i.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Xw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||nm(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Rn.getController(a),{datasetElementType:u,dataElementType:h}=We.datasets[a];Object.assign(l,{dataElementType:Rn.getElement(h),datasetElementType:u&&Rn.getElement(u)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ee(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ee(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Xw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ee(this.scales,e=>{$i.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!dw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;DU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!dw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$i.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ee(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ur(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Yn.has(this)?this.attached&&!Yn.running(this)&&Yn.start(this):(this.draw(),Jw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=h4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&fy(n,r),e.controller.draw(),r&&py(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return xl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=R4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ms(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);yh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Yn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Tw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _c[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ee(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ee(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ee(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ph(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=$F(e),u=MU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ae(s.onHover,[e,a,this],this),l&&Ae(s.onClick,[e,a,this],this));const h=!ph(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},ne(ki,"defaults",We),ne(ki,"instances",_c),ne(ki,"overrides",ls),ne(ki,"registry",Rn),ne(ki,"version",PU),ne(ki,"getChart",Zw),ki);function eE(){return Ee(dd.instances,t=>t._plugins.invalidate())}function pk(t,e,n=e){t.lineCap=he(n.borderCapStyle,e.borderCapStyle),t.setLineDash(he(n.borderDash,e.borderDash)),t.lineDashOffset=he(n.borderDashOffset,e.borderDashOffset),t.lineJoin=he(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=he(n.borderWidth,e.borderWidth),t.strokeStyle=he(n.borderColor,e.borderColor)}function OU(t,e,n){t.lineTo(n.x,n.y)}function LU(t){return t.stepped?_j:t.tension||t.cubicInterpolationMode==="monotone"?vj:OU}function mk(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:u<l&&!h?i+u-l:u-l}}function VU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:u}=mk(r,n,i),h=LU(s);let{move:d=!0,reverse:f}=i||{},g,T,I;for(g=0;g<=u;++g)T=r[(a+(f?u-g:g))%o],!T.skip&&(d?(t.moveTo(T.x,T.y),d=!1):h(t,I,T,f,s.stepped),I=T);return l&&(T=r[(a+(f?u:0))%o],h(t,I,T,f,s.stepped)),!!l}function FU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=mk(r,n,i),{move:l=!0,reverse:u}=i||{};let h=0,d=0,f,g,T,I,w,v;const E=P=>(o+(u?a-P:P))%s,x=()=>{I!==w&&(t.lineTo(h,w),t.lineTo(h,I),t.lineTo(h,v))};for(l&&(g=r[E(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=r[E(f)],g.skip)continue;const P=g.x,M=g.y,N=P|0;N===T?(M<I?I=M:M>w&&(w=M),h=(d*h+P)/++d):(x(),t.lineTo(P,M),T=N,d=0,I=w=M),v=M}x()}function rm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?FU:VU}function jU(t){return t.stepped?Jj:t.tension||t.cubicInterpolationMode==="monotone"?Zj:Or}function UU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),pk(t,e.options),t.stroke(r)}function BU(t,e,n,i){const{segments:r,options:s}=e,o=rm(e);for(const a of r)pk(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const zU=typeof Path2D=="function";function $U(t,e,n,i){zU&&!e.options.segment?UU(t,e,n,i):BU(t,e,n,i)}class Ia extends cr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Wj(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=a4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=r4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=jU(i);let u,h;for(u=0,h=o.length;u<h;++u){const{start:d,end:f}=o[u],g=s[d],T=s[f];if(g===T){a.push(g);continue}const I=Math.abs((r-g[n])/(T[n]-g[n])),w=l(g,T,I,i.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,i){return rm(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=rm(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),$U(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ne(Ia,"id","line"),ne(Ia,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ne(Ia,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ne(Ia,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function tE(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class vc extends cr{constructor(n){super();ne(this,"parsed");ne(this,"skip");ne(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return tE(this,n,"x",i)}inYRange(n,i){return tE(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!xl(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,em(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ne(vc,"id","point"),ne(vc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ne(vc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const nE=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},WU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class iE extends cr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Ft(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=nE(i,s);let u,h;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((T,I)=>{const w=i+n/2+s.measureText(T.text).width;(I===0||u[u.length-1]+w+2*a>o)&&(d+=h,u[u.length-(I>0?0:1)]=0,g+=h,f++),l[I]={left:0,top:g,row:f,width:w,height:r},u[u.length-1]+=w+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let d=a,f=0,g=0,T=0,I=0;return this.legendItems.forEach((w,v)=>{const{itemWidth:E,itemHeight:x}=HU(i,n,s,w,r);v>0&&g+x+2*a>h&&(d+=f+a,u.push({width:f,height:g}),T+=f+a,I++,f=g=0),l[v]={left:T,top:g,col:I,width:E,height:x},f=Math.max(f,E),g+=x+a}),d+=f,u.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=eo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ht(i,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Ht(i,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=Ht(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Ht(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;fy(e,this),this._draw(),py(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=We.color,l=eo(e.rtl,this.left,this.width),u=Ft(o.font),{padding:h}=o,d=u.size,f=d/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:T,boxHeight:I,itemHeight:w}=nE(o,d),v=function(N,S,_){if(isNaN(T)||T<=0||isNaN(I)||I<0)return;r.save();const k=he(_.lineWidth,1);if(r.fillStyle=he(_.fillStyle,a),r.lineCap=he(_.lineCap,"butt"),r.lineDashOffset=he(_.lineDashOffset,0),r.lineJoin=he(_.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=he(_.strokeStyle,a),r.setLineDash(he(_.lineDash,[])),o.usePointStyle){const C={radius:I*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:k},R=l.xPlus(N,T/2),D=S+f;Kb(r,C,R,D,o.pointStyleWidth&&T)}else{const C=S+Math.max((d-I)/2,0),R=l.leftForLtr(N,T),D=Ha(_.borderRadius);r.beginPath(),Object.values(D).some(A=>A!==0)?tm(r,{x:R,y:C,w:T,h:I,radius:D}):r.rect(R,C,T,I),r.fill(),k!==0&&r.stroke()}r.restore()},E=function(N,S,_){vh(r,_.text,N,S+w/2,u,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},x=this.isHorizontal(),P=this._computeTitleHeight();x?g={x:Ht(s,this.left+h,this.right-i[0]),y:this.top+h+P,line:0}:g={x:this.left+h,y:Ht(s,this.top+P+h,this.bottom-n[0].height),line:0},ek(this.ctx,e.textDirection);const M=w+h;this.legendItems.forEach((N,S)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const _=r.measureText(N.text).width,k=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),C=T+f+_;let R=g.x,D=g.y;l.setWidth(this.width),x?S>0&&R+C+h>this.right&&(D=g.y+=M,g.line++,R=g.x=Ht(s,this.left+h,this.right-i[g.line])):S>0&&D+M>this.bottom&&(R=g.x=R+n[g.line].width+h,g.line++,D=g.y=Ht(s,this.top+P+h,this.bottom-n[g.line].height));const A=l.x(R);if(v(A,D,N),R=sj(k,R+T+f,x?R+C:this.right,e.rtl),E(l.x(R),D,N),x)g.x+=C+h;else if(typeof N.text!="string"){const ie=u.lineHeight;g.y+=gk(N,ie)+h}else g.y+=M}),tk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Ft(n.font),r=In(n.padding);if(!n.display)return;const s=eo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,u=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=Ht(e.align,d,this.right-f);else{const T=this.columnSizes.reduce((I,w)=>Math.max(I,w.height),0);h=u+Ht(e.align,this.top,this.bottom-T-e.labels.padding-this._computeTitleHeight())}const g=Ht(a,d,d+f);o.textAlign=s.textAlign(Wb(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,vh(o,n.text,g,h,i)}_computeTitleHeight(){const e=this.options.title,n=Ft(e.font),i=In(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Ea(e,this.left,this.right)&&Ea(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ea(e,r.left,r.left+r.width)&&Ea(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!GU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=WU(r,i);r&&!s&&Ae(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Ae(n.onHover,[e,i,this],this)}else i&&Ae(n.onClick,[e,i,this],this)}}function HU(t,e,n,i,r){const s=qU(i,t,e,n),o=KU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function qU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function KU(t,e,n){let i=t;return typeof e.text!="string"&&(i=gk(e,n)),i}function gk(t,e){const n=t.text?t.text.length:0;return e*n}function GU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var QU={id:"legend",_element:iE,start(t,e,n){const i=t.legend=new iE({ctx:t.ctx,options:n,chart:t});$i.configure(t,i,n),$i.addBox(t,i)},stop(t){$i.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;$i.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=In(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Sa={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Jp(e,u);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function An(t,e){return e&&(at(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Xn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function YU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function rE(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Ft(e.bodyFont),u=Ft(e.titleFont),h=Ft(e.footerFont),d=s.length,f=r.length,g=i.length,T=In(e.padding);let I=T.height,w=0,v=i.reduce((P,M)=>P+M.before.length+M.lines.length+M.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(I+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const P=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;I+=g*P+(v-g)*l.lineHeight+(v-1)*e.bodySpacing}f&&(I+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let E=0;const x=function(P){w=Math.max(w,n.measureText(P).width+E)};return n.save(),n.font=u.string,Ee(t.title,x),n.font=l.string,Ee(t.beforeBody.concat(t.afterBody),x),E=e.displayColors?o+2+e.boxPadding:0,Ee(i,P=>{Ee(P.before,x),Ee(P.lines,x),Ee(P.after,x)}),E=0,n.font=h.string,Ee(t.footer,x),n.restore(),w+=T.width,{width:w,height:I}}function XU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function JU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function ZU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return i==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),JU(u,t,e,n)&&(u="center"),u}function sE(t,e,n){const i=n.yAlign||e.yAlign||XU(t,n);return{xAlign:n.xAlign||e.xAlign||ZU(t,e,n,i),yAlign:i}}function e5(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function t5(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function oE(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Ha(o);let T=e5(e,a);const I=t5(e,l,u);return l==="center"?a==="left"?T+=u:a==="right"&&(T-=u):a==="left"?T-=Math.max(h,f)+r:a==="right"&&(T+=Math.max(d,g)+r),{x:sn(T,0,i.width-e.width),y:sn(I,0,i.height-e.height)}}function Ku(t,e,n){const i=In(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function aE(t){return An([],Xn(t))}function n5(t,e,n){return ms(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function lE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const yk={beforeTitle:Qn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Qn,beforeBody:Qn,beforeLabel:Qn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return be(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Qn,afterBody:Qn,beforeFooter:Qn,footer:Qn,afterFooter:Qn};function Mt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?yk[e].call(n,i):r}class sm extends cr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new ik(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=n5(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Mt(i,"beforeTitle",this,e),s=Mt(i,"title",this,e),o=Mt(i,"afterTitle",this,e);let a=[];return a=An(a,Xn(r)),a=An(a,Xn(s)),a=An(a,Xn(o)),a}getBeforeBody(e,n){return aE(Mt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Ee(e,s=>{const o={before:[],lines:[],after:[]},a=lE(i,s);An(o.before,Xn(Mt(a,"beforeLabel",this,s))),An(o.lines,Mt(a,"label",this,s)),An(o.after,Xn(Mt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return aE(Mt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Mt(i,"beforeFooter",this,e),s=Mt(i,"footer",this,e),o=Mt(i,"afterFooter",this,e);let a=[];return a=An(a,Xn(r)),a=An(a,Xn(s)),a=An(a,Xn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(YU(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),Ee(a,h=>{const d=lE(e.callbacks,h);r.push(Mt(d,"labelColor",this,h)),s.push(Mt(d,"labelPointStyle",this,h)),o.push(Mt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Sa[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=rE(this,i),u=Object.assign({},a,l),h=sE(this.chart,i,u),d=oE(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=Ha(a),{x:f,y:g}=e,{width:T,height:I}=n;let w,v,E,x,P,M;return s==="center"?(P=g+I/2,r==="left"?(w=f,v=w-o,x=P+o,M=P-o):(w=f+T,v=w+o,x=P-o,M=P+o),E=w):(r==="left"?v=f+Math.max(l,h)+o:r==="right"?v=f+T-Math.max(u,d)-o:v=this.caretX,s==="top"?(x=g,P=x-o,w=v-o,E=v+o):(x=g+I,P=x+o,w=v+o,E=v-o),M=x),{x1:w,x2:v,x3:E,y1:x,y2:P,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const u=eo(i.rtl,this.x,this.width);for(e.x=Ku(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",o=Ft(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=Ft(s.bodyFont),d=Ku(this,"left",s),f=r.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,T=n.y+g;if(s.usePointStyle){const I={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(f,u)+u/2,v=T+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,em(e,I,w,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,em(e,I,w,v)}else{e.lineWidth=ve(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const I=r.leftForLtr(f,u),w=r.leftForLtr(r.xPlus(f,1),u-2),v=Ha(o.borderRadius);Object.values(v).some(E=>E!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,tm(e,{x:I,y:T,w:u,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),tm(e,{x:w,y:T+1,w:u-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(I,T,u,l),e.strokeRect(I,T,u,l),e.fillStyle=o.backgroundColor,e.fillRect(w,T+1,u-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=i,d=Ft(i.bodyFont);let f=d.lineHeight,g=0;const T=eo(i.rtl,this.x,this.width),I=function(_){n.fillText(_,T.x(e.x+g),e.y+f/2),e.y+=f+s},w=T.textAlign(o);let v,E,x,P,M,N,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Ku(this,w,i),n.fillStyle=i.bodyColor,Ee(this.beforeBody,I),g=a&&w!=="right"?o==="center"?u/2+h:u+2+h:0,P=0,N=r.length;P<N;++P){for(v=r[P],E=this.labelTextColors[P],n.fillStyle=E,Ee(v.before,I),x=v.lines,a&&x.length&&(this._drawColorBox(n,e,P,T,i),f=Math.max(d.lineHeight,l)),M=0,S=x.length;M<S;++M)I(x[M]),f=d.lineHeight;Ee(v.after,I)}g=0,f=d.lineHeight,Ee(this.afterBody,I),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=eo(i.rtl,this.x,this.width);for(e.x=Ku(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Ft(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:T}=Ha(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+u,l+h-T),n.quadraticCurveTo(a+u,l+h,a+u-T,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Sa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=rE(this,e),l=Object.assign({},o,this._size),u=sE(n,e,l),h=oE(e,l,u,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=In(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),ek(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),tk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!ph(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!ph(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Sa[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}ne(sm,"positioners",Sa);var i5={id:"tooltip",_element:sm,positioners:Sa,afterInit(t,e,n){n&&(t.tooltip=new sm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const r5=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function s5(t,e,n,i){const r=t.indexOf(e);if(r===-1)return r5(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const o5=(t,e)=>t===null?null:sn(Math.round(t),0,e);function uE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class om extends Po{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(be(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:s5(i,e,he(n,e),this._addedLabels),o5(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return uE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ne(om,"id","category"),ne(om,"defaults",{ticks:{callback:uE}});function a5(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=t,g=s||1,T=h-1,{min:I,max:w}=e,v=!be(o),E=!be(a),x=!be(u),P=(w-I)/(d+1);let M=pw((w-I)/T/g)*g,N,S,_,k;if(M<1e-14&&!v&&!E)return[{value:I},{value:w}];k=Math.ceil(w/M)-Math.floor(I/M),k>T&&(M=pw(k*M/T/g)*g),be(l)||(N=Math.pow(10,l),M=Math.ceil(M*N)/N),r==="ticks"?(S=Math.floor(I/M)*M,_=Math.ceil(w/M)*M):(S=I,_=w),v&&E&&s&&GF((a-o)/s,M/1e3)?(k=Math.round(Math.min((a-o)/M,h)),M=(a-o)/k,S=o,_=a):x?(S=v?o:S,_=E?a:_,k=u-1,M=(_-S)/k):(k=(_-S)/M,za(k,Math.round(k),M/1e3)?k=Math.round(k):k=Math.ceil(k));const C=Math.max(mw(M),mw(S));N=Math.pow(10,be(l)?C:l),S=Math.round(S*N)/N,_=Math.round(_*N)/N;let R=0;for(v&&(f&&S!==o?(n.push({value:o}),S<o&&R++,za(Math.round((S+R*M)*N)/N,o,cE(o,P,t))&&R++):S<o&&R++);R<k;++R){const D=Math.round((S+R*M)*N)/N;if(E&&D>a)break;n.push({value:D})}return E&&f&&_!==a?n.length&&za(n[n.length-1].value,a,cE(a,P,t))?n[n.length-1].value=a:n.push({value:a}):(!E||_===a)&&n.push({value:_}),n}function cE(t,e,{horizontal:n,minRotation:i}){const r=Br(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class l5 extends Po{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return be(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=yo(r),u=yo(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=a5(r,s);return e.bounds==="ticks"&&QF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Hb(e,this.chart.options.locale,this.options.ticks.format)}}class am extends l5{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=hn(e)?e:0,this.max=hn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Br(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ne(am,"id","linear"),ne(am,"defaults",{ticks:{callback:qb.formatters.numeric}});const fd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Lt=Object.keys(fd);function hE(t,e){return t-e}function dE(t,e){if(be(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),hn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Sl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function fE(t,e,n,i){const r=Lt.length;for(let s=Lt.indexOf(t);s<r-1;++s){const o=fd[Lt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Lt[s]}return Lt[r-1]}function u5(t,e,n,i,r){for(let s=Lt.length-1;s>=Lt.indexOf(n);s--){const o=Lt[s];if(fd[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Lt[n?Lt.indexOf(n):0]}function c5(t){for(let e=Lt.indexOf(t)+1,n=Lt.length;e<n;++e)if(fd[Lt[e]].common)return Lt[e]}function pE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=hy(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function h5(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function mE(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:h5(t,i,r,n)}class Th extends Po{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new b4._date(e.adapters.date);r.init(n),Ba(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:dE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=hn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=hn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=tj(r,s,o);return this._unit=n.unit||(i.autoSkip?fE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):u5(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:c5(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),mE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=sn(n,0,o),i=sn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||fE(s.minUnit,n,i,this._getLabelCapacity(n)),a=he(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=Sl(l)||l===!0,h={};let d=n,f,g;if(u&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,u?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const T=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<i;f=+e.add(f,a,o),g++)pE(h,f,T);return(f===i||r.bounds==="ticks"||g===1)&&pE(h,f,T),Object.keys(h).sort(hE).map(I=>+I)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Ae(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=i[n],g=u&&d&&f&&f.major;return this._adapter.format(e,r||(g?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Br(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,mE(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(dE(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ij(e.sort(hE))}}ne(Th,"id","time"),ne(Th,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Gu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=zr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=zr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class gE extends Th{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Gu(n,this.min),this._tableRange=Gu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=i&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],u=r[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Gu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Gu(this._table,i*this._tableRange+this._minPos,!0)}}ne(gE,"id","timeseries"),ne(gE,"defaults",Th.defaults);dd.register(Ia,vc,am,om,i5,QU);const _k="label";function yE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function d5(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function vk(t,e){t.labels=e}function wk(t,e,n=_k){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function f5(t,e=_k){const n={labels:[],datasets:[]};return vk(n,t.labels),wk(n,t.datasets,e),n}function p5(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:d,...f}=t,g=O.useRef(null),T=O.useRef(null),I=()=>{g.current&&(T.current=new dd(g.current,{type:o,data:f5(a,s),options:l&&{...l},plugins:u}),yE(e,T.current))},w=()=>{yE(e,null),T.current&&(T.current.destroy(),T.current=null)};return O.useEffect(()=>{!r&&T.current&&l&&d5(T.current,l)},[r,l]),O.useEffect(()=>{!r&&T.current&&vk(T.current.config.data,a.labels)},[r,a.labels]),O.useEffect(()=>{!r&&T.current&&a.datasets&&wk(T.current.config.data,a.datasets,s)},[r,a.datasets]),O.useEffect(()=>{T.current&&(r?(w(),setTimeout(I)):T.current.update(d))},[r,l,a.labels,a.datasets,d]),O.useEffect(()=>{T.current&&(w(),setTimeout(I))},[o]),O.useEffect(()=>(I(),()=>w()),[]),y.jsx("canvas",{ref:g,role:"img",height:n,width:i,...f,children:h})}const m5=O.forwardRef(p5);function g5(t,e){return dd.register(e),O.forwardRef((n,i)=>y.jsx(m5,{...n,ref:i,type:t}))}const Ey=g5("line",gc);function y5({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Ey,{data:r,options:s})})]})}function _5({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],i=t.map(u=>u.dateIso),r=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.bench}),s=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.squat}),o=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.deadlift}),a={labels:i,datasets:[{label:`${n[0]} (7-day WMA)`,data:r,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[1]} (7-day WMA)`,data:s,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[2]} (7-day WMA)`,data:o,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:u=>{var h,d;return`${u.dataset.label}: ${(d=(h=u.parsed.y)==null?void 0:h.toFixed)==null?void 0:d.call(h,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Ey,{data:a,options:l})})]})}function v5({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>a.calories),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (raw)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.15}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Smoothed Weight/Strength vs Raw Calories"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Ey,{data:s,options:o})})]})}function Cr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function w5(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function E5(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function T5({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Weekly Analysis"}),y.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Week #"}),y.jsx("th",{children:"Avg Calories"}),y.jsx("th",{children:"Weight Change (kg)"}),y.jsx("th",{children:"Calculated TDEE"}),y.jsx("th",{children:"TDEE "}),y.jsx("th",{children:"Adaptation %"}),y.jsx("th",{children:"LBM (kg)"}),y.jsx("th",{children:"Loss Rate vs LBM %"}),y.jsx("th",{children:"Status"})]})}),y.jsx("tbody",{children:t.weeks.map(n=>y.jsxs("tr",{children:[y.jsx("td",{children:n.week}),y.jsx("td",{children:Cr(n.avgCalories,0)}),y.jsx("td",{children:Cr(n.weightChange,2)}),y.jsx("td",{children:Cr(n.tdee,0)}),y.jsx("td",{children:Cr(n.tdeeChangeFromBaseline,0)}),y.jsx("td",{className:w5(n.adaptationPct),children:Cr(n.adaptationPct,1)}),y.jsx("td",{children:Cr(n.lbm,1)}),y.jsx("td",{children:Cr(n.lossRatePct,2)}),y.jsx("td",{className:E5(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),y.jsxs("div",{className:"notice info",style:{marginTop:12},children:[y.jsx("div",{children:y.jsx("b",{children:"How to read this:"})}),y.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[y.jsxs("div",{children:[y.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",y.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function St(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function _E(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function vE(t,e){const n=dh(t).getTime(),i=dh(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function wE(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function I5(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function S5({derived:t,weekly:e,profile:n}){const i=O.useMemo(()=>{var E,x,P,M;if(!(t!=null&&t.length))return[];const r=t[t.length-1],s=r.dateIso,o=(E=e==null?void 0:e.weeks)!=null&&E.length?e.weeks[e.weeks.length-1]:null,a=e==null?void 0:e.baselineTdee,l=e==null?void 0:e.baselineStrength,u=e==null?void 0:e.baselineWeeklyLoss,h=t.filter(N=>{const S=vE(s,N.dateIso);return S>=0&&S<=6}),d=h.length,f=wE(h.map(N=>N.protein)),g=wE(h.map(N=>N.calories)),T=Number.isFinite((x=r==null?void 0:r.wma)==null?void 0:x.weight)?r.wma.weight:r.weight,I=[];if(o&&Number.isFinite(a)&&Number.isFinite(o.tdee)&&Number.isFinite(o.adaptationPct)){const N=Math.max(0,-o.adaptationPct);let S="good";N>=10?S="bad":N>=5&&(S="warn");const _=o.adaptationPct<0?"dropped":"increased",k=`${St(Math.abs(o.adaptationPct),0)}%`;I.push({key:"adaptation",level:S,title:"Metabolic adaptation",message:`Your TDEE has ${_} ${k} from baseline (${St(a,0)}  ${St(o.tdee,0)} kcal).`,action:S!=="good"?"Consider a refeed day or reducing training volume.":null})}if(o&&Number.isFinite(o.lossRatePct)){const N=String(o.lossRateStatus||"").toUpperCase();let S="info";o.lossRateStatus==="Optimal"&&(S="good"),o.lossRateStatus==="Aggressive"&&(S="bad");const _=o.lossRateStatus==="Aggressive"?"Risk of muscle loss.":o.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";I.push({key:"lossrate",level:S,title:"Loss rate vs LBM",message:`This week: ${St(o.lossRatePct,1)}% of LBM lost  ${N}. ${_}`,action:null})}if(o&&Number.isFinite(l)&&Number.isFinite(o.avgStrengthWma)){const N=(o.avgStrengthWma-l)/l*100;let S="good",_="",k="Strength maintained/increasing.",C=null;N<-7.5?(S="bad",_="",k="Strength declining significantly.",C="Consider eating more or reducing cardio."):N<-5&&(S="warn",_="",k="Strength declining.",C="Consider eating more or reducing cardio."),I.push({key:"strength",level:S,title:"Strength trend",message:`${k} ${_} (${St(N,1)}% vs baseline)`,action:C})}if(o&&Number.isFinite(o.tdee)&&Number.isFinite(o.lbm)){const N=o.lbm,S=.005*N,_=.01*N,k=S*7700/7,C=_*7700/7,R=o.tdee-k,D=o.tdee-C,A=_E(Math.min(D,R),50),ie=_E(Math.max(D,R),50);I.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${A}-${ie} kcal/day this week.`,action:null})}d<6&&I.push({key:"completeness",level:"warn",title:"Data completeness",message:`${d}/7 days logged this week  missing data may affect accuracy.`,action:null});let w=null;for(let N=t.length-1;N>=0;N--)if(Number.isFinite((P=t[N])==null?void 0:P.bfPct)){w=t[N].dateIso;break}if(!w)I.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const N=vE(s,w);N>=7?I.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):I.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-N} day(s).`,action:null})}if(Number.isFinite(f)&&Number.isFinite(T)){const N=1.6*T,S=2.2*T;if(f<N){const _=(N-f)/N*100;I.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${St(_,0)}% below the muscle-retention range (${St(f,0)}g/day vs ${St(N,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else f>S?I.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${St(f,0)}g/day).`,action:null}):I.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${St(f,0)}g/day).`,action:null})}if(o&&Number.isFinite(u)&&Number.isFinite(o.weightChange)){const N=Math.max(0,-o.weightChange),S=u;(N<.2||S>.2&&N<S*.35)&&I.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${St(N,1)}kg this week vs ${St(S,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const v=Number(n==null?void 0:n.targetWeight);if(Number.isFinite(v)&&Number.isFinite((M=t[0])==null?void 0:M.weight)&&Number.isFinite(T)){const N=t[0].weight;if(N>v){const S=N-T,_=N-v,k=Math.max(0,Math.min(1,S/_))*100,C=Math.floor(S/5)*5;C>=5&&I.push({key:"milestone",level:"good",title:"Progress milestone",message:`${St(C,0)}kg down! Youre ${St(k,0)}% to your goal.`,action:null})}}return o||(I.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(g)&&I.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${St(g,0)} kcal/day.`,action:null})),I},[t,e,n]);return i.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Insights"}),y.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),y.jsx("div",{className:"grid",style:{marginTop:12},children:i.map(r=>y.jsxs("div",{className:`card insight-card ${I5(r.level)}`,style:{gridColumn:"span 6"},children:[y.jsx("div",{className:"insight-title",children:r.title}),y.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:r.message}),r.action&&y.jsx("div",{className:"small",style:{marginTop:8},children:r.action})]},r.key))})]}):null}function x5(t){return t==="cut"?"Cut":t==="bulk"?"Bulk":t==="maintain"?"Maintain":String(t||"")}function bi(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function Ek({view:t="dashboard"}){const e=xo(),{user:n}=vi(),{profile:i}=ry(),r=Array.isArray(i==null?void 0:i.liftNames)&&i.liftNames.length===3?i.liftNames:["Bench Press","Squat","Deadlift"],[s,o]=O.useState([]),a=Array.isArray(i==null?void 0:i.cycles)?i.cycles:[],[l,u]=O.useState(null);O.useEffect(()=>{if(u(null),!n)return;const M=oy(n.uid,N=>o(N),N=>u((N==null?void 0:N.message)||"Failed to load entries."));return()=>M()},[n]);const h=O.useMemo(()=>fF(),[]),d=O.useMemo(()=>pF(60),[]),f=O.useMemo(()=>d!=null&&d.length?[{id:"demo",type:"cut",startDateIso:d[0].dateIso,endDateIso:null}]:[],[d]),g=n?i:h,T=n?s:d,I=n?a:f,w=O.useMemo(()=>{if(!(I!=null&&I.length))return null;const M=fh(),N=I.find(_=>!_.endDateIso);return N||I.find(_=>(_.startDateIso||"")<=M&&(_.endDateIso||"")>=M)||null},[I]);function v(){if(!n){e("/signup");return}e("/profile#cycles")}const E=O.useMemo(()=>Mb(T,g||{}),[T,g]),x=O.useMemo(()=>dF(E),[E]),P=O.useMemo(()=>{var le;if(!E.length)return null;const M=E[0],N=E[E.length-1],S=(le=N==null?void 0:N.wma)==null?void 0:le.weight,_=Number.isFinite(M.weight)&&Number.isFinite(N.weight)?N.weight-M.weight:null,k=N.calories,C=M.calories,R=Number.isFinite(k)&&Number.isFinite(C)?k-C:null,D=N.avgStrength,A=M.avgStrength,ie=Number.isFinite(D)&&Number.isFinite(A)?D-A:null;let re=null;for(let ye=E.length-1;ye>=0;ye--)if(Number.isFinite(E[ye].bfPct)){re=E[ye].bfPct;break}return{weightTrend:S,totalLost:_,calNow:k,calDelta:R,strengthNow:D,strengthDelta:ie,bf:re}},[E]);return y.jsxs(y.Fragment,{children:[!n&&y.jsxs("div",{className:"notice info",style:{marginTop:14},children:[y.jsx("b",{children:"Demo mode:"})," This dashboard is showing 60 days of realistic sample data. Log in to start tracking your own."]}),n&&(!(g!=null&&g.sex)||!(g!=null&&g.height))&&y.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",y.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),l&&y.jsx("div",{className:"notice error",style:{marginTop:14},children:l}),t==="insights"&&y.jsx(S5,{derived:E,weekly:x,profile:g||{}}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Summary"}),y.jsx("button",{className:"btn",type:"button",onClick:v,style:{textTransform:"none"},children:w?x5(w.type):"Create new cycle"})]}),!P||!E.length?y.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",y.jsx("b",{children:"Entry"}),"."]}):y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),y.jsxs("div",{className:"big",children:[bi(P.weightTrend,1)," kg"]}),y.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Total weight change"}),y.jsxs("div",{className:"big",children:[bi(P.totalLost,1)," kg"]}),y.jsx("div",{className:"small",children:"Negative = loss"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Calories now / change from start"}),y.jsxs("div",{className:"big",children:[bi(P.calNow,0)," kcal"]}),y.jsxs("div",{className:"small",children:[" ",bi(P.calDelta,0)," kcal"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Average strength now"}),y.jsxs("div",{className:"big",children:[bi(P.strengthNow,1)," kg"]}),y.jsxs("div",{className:"small",children:[" ",bi(P.strengthDelta,1)," kg"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),y.jsx("div",{className:"big",children:P.bf===null?"":`${bi(P.bf,1)}%`}),y.jsx("div",{className:"small",children:"Most recent measurement day"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),y.jsx("div",{className:"big",children:Number.isFinite(x.baselineTdee)?`${bi(x.baselineTdee,0)} kcal`:""}),y.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),E.length>0&&y.jsxs("div",{className:"grid",style:{marginTop:14},children:[y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(y5,{derived:E})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(_5,{derived:E,liftNames:r})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(v5,{derived:E})})]}),E.length>=14&&y.jsx(T5,{weekly:x})]})}function b5(){return y.jsx(Ek,{view:"insights"})}function k5(){const{user:t,login:e,authError:n,clearAuthError:i}=vi(),r=xo(),s=mr(),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,g]=O.useState(null);O.useEffect(()=>{i==null||i()},[]),O.useEffect(()=>{t&&r("/dashboard")},[t]);async function T(I){var w;I.preventDefault(),g(null),d(!0);try{await e(o.trim(),l);const v=((w=s.state)==null?void 0:w.from)||"/dashboard";r(v)}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Log in"}),y.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&y.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),y.jsxs("form",{onSubmit:T,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:o,onChange:I=>a(I.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:l,onChange:I=>u(I.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),y.jsx(dl,{className:"btn",to:"/reset-password",children:"Forgot password"}),y.jsx(dl,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function C5(){const{signup:t,authError:e,clearAuthError:n}=vi(),i=xo(),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,g]=O.useState(null);O.useEffect(()=>{n==null||n()},[]);async function T(I){if(I.preventDefault(),g(null),o!==l){g({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Create account"}),y.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&y.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),y.jsxs("form",{onSubmit:T,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:r,onChange:I=>s(I.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:o,onChange:I=>a(I.target.value),type:"password",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm password"}),y.jsx("input",{value:l,onChange:I=>u(I.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),y.jsx(dl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function A5(){const{resetPassword:t,authError:e,clearAuthError:n}=vi(),[i,r]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(!1);O.useEffect(()=>{n==null||n()},[]);async function u(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Reset password"}),y.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&y.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),y.jsxs("form",{onSubmit:u,style:{marginTop:12},children:[y.jsx("div",{className:"row",children:y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),y.jsx(dl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function P5(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function R5(t,e){const n=e.map(o=>o.map(P5).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function N5({entries:t,derived:e}){var s,o,a,l,u,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchLoadKg","benchReps","bench1rmKg","squatLoadKg","squatReps","squat1rmKg","deadliftLoadKg","deadliftReps","deadlift1rmKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.benchLoad,d.benchReps,d.bench,d.squatLoad,d.squatReps,d.squat,d.deadliftLoad,d.deadliftReps,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(u=f==null?void 0:f.wma)==null?void 0:u.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}function Tk(t){return["cut","bulk","maintain"].includes(t)}function Ik(t){return Array.isArray(t)?t.filter(e=>e&&typeof e=="object").map(e=>({id:String(e.id||""),type:String(e.type||""),startDateIso:e.startDateIso||"",endDateIso:e.endDateIso??null})).filter(e=>e.id&&Tk(e.type)&&e.startDateIso):[]}function D5(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}async function M5(t,{type:e,startDateIso:n}){if(!t)throw new Error("Not authenticated");if(!Tk(e))throw new Error("Invalid cycle type");if(!n)throw new Error("Start date is required");const i=is(Wn,"users",t);await ab(Wn,async r=>{const s=await r.get(i);if(!s.exists())throw new Error("Profile not found. Please refresh and try again.");const o=s.data()||{},l=Ik(o.cycles).map(h=>({...h})),u=l.findIndex(h=>h.endDateIso===null);if(u>=0){const h=l[u];let d=iF(n,-1);h.startDateIso&&d<h.startDateIso&&(d=h.startDateIso),l[u]={...h,endDateIso:d}}l.push({id:D5(),type:e,startDateIso:n,endDateIso:null}),r.update(i,{cycles:l,updatedAt:ql()})})}async function O5(t,e,n){if(!t)throw new Error("Not authenticated");if(!e)throw new Error("cycleId is required");if(!n)throw new Error("End date is required");const i=is(Wn,"users",t);await ab(Wn,async r=>{const s=await r.get(i);if(!s.exists())throw new Error("Profile not found. Please refresh and try again.");const o=s.data()||{},a=Ik(o.cycles),l=a.findIndex(h=>h.id===e);if(l<0)throw new Error("Cycle not found.");const u=a.map(h=>({...h}));u[l]={...u[l],endDateIso:n},r.update(i,{cycles:u,updatedAt:ql()})})}const bs=["Bench Press","Squat","Deadlift"];function Af(t){return t==="cut"?"Cut":t==="bulk"?"Bulk":t==="maintain"?"Maintain":String(t||"")}function L5(){const{user:t}=vi(),e=mr(),{profile:n,updateProfile:i,loading:r,profileError:s}=ry(),[o,a]=O.useState(n.sex||""),[l,u]=O.useState(n.height||""),[h,d]=O.useState(n.targetWeight??""),[f,g]=O.useState(!!n.triplemeasurements),T=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:bs,[I,w]=O.useState(T[0]),[v,E]=O.useState(T[1]),[x,P]=O.useState(T[2]),[M,N]=O.useState(!1),[S,_]=O.useState(null),[k,C]=O.useState(""),[R,D]=O.useState(""),[A,ie]=O.useState(""),re=O.useMemo(()=>Array.isArray(n.cycles)?[...n.cycles].sort((W,se)=>String(se.startDateIso||"").localeCompare(String(W.startDateIso||""))):[],[n.cycles]),[le,ye]=O.useState("cut"),[B,G]=O.useState(fh()),q=O.useMemo(()=>re.find(W=>!W.endDateIso)||null,[re]),[de,te]=O.useState([]),[_e,Ne]=O.useState(!1);O.useEffect(()=>{a(n.sex||""),u(n.height||""),d(n.targetWeight??""),g(!!n.triplemeasurements);const W=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:bs;w(W[0]),E(W[1]),P(W[2])},[n.sex,n.height,n.targetWeight,n.triplemeasurements,n.liftNames]),O.useEffect(()=>{(e==null?void 0:e.hash)==="#cycles"&&setTimeout(()=>{var W;(W=document.getElementById("cycles"))==null||W.scrollIntoView({behavior:"smooth",block:"start"})},50)},[e==null?void 0:e.hash]);async function Ke(W){W.preventDefault(),_(null),N(!0);try{const se=Number(l);if(!o)throw new Error("Sex is required.");if(!Number.isFinite(se)||se<=0)throw new Error("Height must be a positive number (cm).");let Dt=null;if(String(h).trim()!==""&&(Dt=Number(h),!Number.isFinite(Dt)||Dt<=0))throw new Error("Target weight must be a positive number (kg).");const $t=[I,v,x].map((vr,wi)=>String(vr??"").trim()||bs[wi]);await i({sex:o,height:se,targetWeight:Dt,triplemeasurements:!!f,liftNames:$t}),_({type:"success",text:"Profile saved."})}catch(se){_({type:"error",text:(se==null?void 0:se.message)||"Failed to save profile."})}finally{N(!1)}}async function De(W){W.preventDefault(),_(null),N(!0);try{if(!le)throw new Error("Pick a cycle type.");if(!B)throw new Error("Pick a start date.");await M5(t.uid,{type:le,startDateIso:B}),_({type:"success",text:`Cycle started: ${Af(le)}.`})}catch(se){_({type:"error",text:(se==null?void 0:se.message)||"Failed to start cycle."})}finally{N(!1)}}async function Nt(W){_(null),N(!0);try{await O5(t.uid,W,fh()),_({type:"success",text:"Cycle ended."})}catch(se){_({type:"error",text:(se==null?void 0:se.message)||"Failed to end cycle."})}finally{N(!1)}}async function _r(W){if(W.preventDefault(),_(null),!!(t!=null&&t.email)){if(R!==A){_({type:"error",text:"New passwords do not match."});return}N(!0);try{const se=ds.credential(t.email,k);await aD(t,se),await hD(t,R),C(""),D(""),ie(""),_({type:"success",text:"Password updated."})}catch(se){_({type:"error",text:(se==null?void 0:se.message)||"Failed to update password."})}finally{N(!1)}}}async function Ro(){if(!_e)return new Promise((W,se)=>{const Dt=oy(t.uid,$t=>{te($t),Ne(!0),Dt(),W()},$t=>{se($t)})})}async function xn(){_(null),N(!0);try{await Ro();const W=Mb(de,{...n,sex:o,height:Number(l),triplemeasurements:!!f}),se=N5({entries:de,derived:W}),Dt=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;R5(Dt,se),_({type:"success",text:"CSV downloaded."})}catch(W){_({type:"error",text:(W==null?void 0:W.message)||"Failed to export CSV."})}finally{N(!1)}}return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Profile & Settings"}),y.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),s&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:s}),S&&y.jsx("div",{className:`notice ${S.type==="error"?"error":"success"}`,style:{marginTop:12},children:S.text}),y.jsxs("form",{onSubmit:Ke,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Sex (required for Navy BF%)"}),y.jsxs("select",{value:o,onChange:W=>a(W.target.value),required:!0,children:[y.jsx("option",{value:"",children:"Select"}),y.jsx("option",{value:"male",children:"Male"}),y.jsx("option",{value:"female",children:"Female"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Height (cm)"}),y.jsx("input",{inputMode:"numeric",value:l,onChange:W=>u(W.target.value),placeholder:"e.g. 175",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Target weight (kg) (optional)"}),y.jsx("input",{inputMode:"numeric",value:h,onChange:W=>d(W.target.value),placeholder:"e.g. 82"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Triple measurements mode"}),y.jsxs("select",{value:f?"1":"0",onChange:W=>g(W.target.value==="1"),children:[y.jsx("option",{value:"0",children:"Off (single value per site)"}),y.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 1 name"}),y.jsx("input",{value:I,onChange:W=>w(W.target.value),placeholder:bs[0]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 2 name"}),y.jsx("input",{value:v,onChange:W=>E(W.target.value),placeholder:bs[1]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 3 name"}),y.jsx("input",{value:x,onChange:W=>P(W.target.value),placeholder:bs[2]})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:M||r,children:M?"Saving":"Save profile"}),y.jsx("button",{className:"btn",type:"button",onClick:xn,disabled:M,children:"Export CSV"})]})]})]}),y.jsxs("div",{className:"panel",id:"cycles",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Cycles"}),y.jsx("div",{className:"muted",children:"Cut / Bulk / Maintain  track your phases over time."})]}),y.jsxs("form",{onSubmit:De,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Cycle type"}),y.jsxs("select",{value:le,onChange:W=>ye(W.target.value),children:[y.jsx("option",{value:"cut",children:"Cut"}),y.jsx("option",{value:"bulk",children:"Bulk"}),y.jsx("option",{value:"maintain",children:"Maintain"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Start date"}),y.jsx("input",{type:"date",value:B,onChange:W=>G(W.target.value)})]}),y.jsxs("div",{className:"field",style:{minWidth:220},children:[y.jsx("label",{children:"Current"}),y.jsx("input",{value:q?`${Af(q.type)} (since ${q.startDateIso})`:"No active cycle",readOnly:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:M,children:q?"Start new cycle (ends current)":"Start cycle"}),q&&y.jsx("button",{className:"btn",type:"button",onClick:()=>Nt(q.id),disabled:M,children:"End current cycle (today)"})]})]}),y.jsx("hr",{className:"sep"}),y.jsx("div",{className:"table-wrap",children:y.jsxs("table",{className:"table",style:{minWidth:760},children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Type"}),y.jsx("th",{children:"Began"}),y.jsx("th",{children:"Ended"}),y.jsx("th",{children:"Status"}),y.jsx("th",{children:"Actions"})]})}),y.jsx("tbody",{children:re.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:5,className:"muted",children:"No cycles yet. Start one above."})}):re.map(W=>{const se=!W.endDateIso;return y.jsxs("tr",{children:[y.jsx("td",{children:y.jsx("b",{children:Af(W.type)})}),y.jsx("td",{children:W.startDateIso||""}),y.jsx("td",{children:W.endDateIso||""}),y.jsx("td",{children:se?y.jsx("span",{className:"text-green strong",children:"Active"}):y.jsx("span",{className:"muted",children:"Ended"})}),y.jsx("td",{children:se?y.jsx("button",{className:"btn",type:"button",onClick:()=>Nt(W.id),disabled:M,children:"End today"}):y.jsx("span",{className:"muted",children:""})})]},W.id)})})]})})]}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Change Password"}),y.jsx("div",{className:"muted",children:"Re-auth required."})]}),y.jsxs("form",{onSubmit:_r,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Current password"}),y.jsx("input",{type:"password",value:k,onChange:W=>C(W.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"New password"}),y.jsx("input",{type:"password",value:R,onChange:W=>D(W.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm new password"}),y.jsx("input",{type:"password",value:A,onChange:W=>ie(W.target.value),required:!0})]})]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",disabled:M,children:"Update password"})})]})]})]})}function xt(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function V5({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:r}){const s=String(t||"").toLowerCase()==="female",[o,a]=O.useState(fh()),[l,u]=O.useState(""),[h,d]=O.useState(""),[f,g]=O.useState(""),[T,I]=O.useState(""),[w,v]=O.useState(""),[E,x]=O.useState(""),[P,M]=O.useState(""),[N,S]=O.useState(""),[_,k]=O.useState(""),[C,R]=O.useState(""),[D,A]=O.useState(""),[ie,re]=O.useState(""),[le,ye]=O.useState(""),[B,G]=O.useState(""),[q,de]=O.useState(""),[te,_e]=O.useState(""),[Ne,Ke]=O.useState(""),[De,Nt]=O.useState(""),[_r,Ro]=O.useState(""),[xn,W]=O.useState(""),[se,Dt]=O.useState(""),[$t,vr]=O.useState(""),wi=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],Gl=O.useMemo(()=>{const Q=Db({protein:xt(h)||0,carbs:xt(f)||0,fats:xt(T)||0});return Number.isFinite(Q)?Math.round(Q):0},[h,f,T]),Ql=O.useMemo(()=>Dr(xt(w),xt(E)),[w,E]),No=O.useMemo(()=>Dr(xt(P),xt(N)),[P,N]),gs=O.useMemo(()=>Dr(xt(_),xt(C)),[_,C]),Do=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f))&&Number.isFinite(Number(T));async function pd(Q){if(Q.preventDefault(),!Do())return;const ys=Dr(xt(w),xt(E)),Mo=Dr(xt(P),xt(N)),Ge=Dr(xt(_),xt(C)),we={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(f),fats:Number(T),benchLoad:w===""?null:Number(w),benchReps:E===""?null:Number(E),squatLoad:P===""?null:Number(P),squatReps:N===""?null:Number(N),deadliftLoad:_===""?null:Number(_),deadliftReps:C===""?null:Number(C),bench:Number.isFinite(ys)?Math.round(ys*10)/10:null,squat:Number.isFinite(Mo)?Math.round(Mo*10)/10:null,deadlift:Number.isFinite(Ge)?Math.round(Ge*10)/10:null};e?(we.neck1=B===""?null:Number(B),we.neck2=q===""?null:Number(q),we.neck3=te===""?null:Number(te),we.waist1=Ne===""?null:Number(Ne),we.waist2=De===""?null:Number(De),we.waist3=_r===""?null:Number(_r),we.hip1=s?xn===""?null:Number(xn):null,we.hip2=s?se===""?null:Number(se):null,we.hip3=s?$t===""?null:Number($t):null):(we.neck=D===""?null:Number(D),we.waist=ie===""?null:Number(ie),we.hip=s?le===""?null:Number(le):null),await i(we)}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Daily Entry"}),y.jsxs("div",{className:"muted",children:["Calories preview: ",y.jsx("b",{children:Gl})," kcal"]})]}),y.jsxs("form",{onSubmit:pd,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Date"}),y.jsx("input",{type:"date",value:o,onChange:Q=>a(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Weight (kg)"}),y.jsx("input",{inputMode:"decimal",value:l,onChange:Q=>u(Q.target.value),placeholder:"e.g. 85.2",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Protein (g)"}),y.jsx("input",{inputMode:"numeric",value:h,onChange:Q=>d(Q.target.value),placeholder:"e.g. 180"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Carbs (g)"}),y.jsx("input",{inputMode:"numeric",value:f,onChange:Q=>g(Q.target.value),placeholder:"e.g. 220",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Fats (g)"}),y.jsx("input",{inputMode:"numeric",value:T,onChange:Q=>I(Q.target.value),placeholder:"e.g. 70",required:!0})]})]}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[wi[0]," ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsxs("div",{className:"inline2",children:[y.jsx("input",{inputMode:"decimal",value:w,onChange:Q=>v(Q.target.value),placeholder:"Load (kg)"}),y.jsx("input",{inputMode:"numeric",value:E,onChange:Q=>x(Q.target.value),placeholder:"Reps"})]}),y.jsxs("div",{className:"muted small",children:["Est. 1RM: ",y.jsx("b",{children:Number.isFinite(Ql)?Math.round(Ql*10)/10:""})," kg"]})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[wi[1]," ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsxs("div",{className:"inline2",children:[y.jsx("input",{inputMode:"decimal",value:P,onChange:Q=>M(Q.target.value),placeholder:"Load (kg)"}),y.jsx("input",{inputMode:"numeric",value:N,onChange:Q=>S(Q.target.value),placeholder:"Reps"})]}),y.jsxs("div",{className:"muted small",children:["Est. 1RM: ",y.jsx("b",{children:Number.isFinite(No)?Math.round(No*10)/10:""})," kg"]})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[wi[2]," ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsxs("div",{className:"inline2",children:[y.jsx("input",{inputMode:"decimal",value:_,onChange:Q=>k(Q.target.value),placeholder:"Load (kg)"}),y.jsx("input",{inputMode:"numeric",value:C,onChange:Q=>R(Q.target.value),placeholder:"Reps"})]}),y.jsxs("div",{className:"muted small",children:["Est. 1RM: ",y.jsx("b",{children:Number.isFinite(gs)?Math.round(gs*10)/10:""})," kg"]})]})]}),y.jsx("div",{className:"muted small",style:{marginTop:6},children:"Enter both load + reps to calculate 1RM. If left blank, strength trends will carry forward the last known value."}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"notice info",children:[y.jsx("b",{children:"Navy measurements (weekly)"}),y.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",s?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),y.jsx("div",{style:{height:10}}),e?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:B,onChange:Q=>G(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:q,onChange:Q=>de(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:te,onChange:Q=>_e(Q.target.value)})]})]}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:Ne,onChange:Q=>Ke(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:De,onChange:Q=>Nt(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:_r,onChange:Q=>Ro(Q.target.value)})]})]}),s?y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:xn,onChange:Q=>W(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:se,onChange:Q=>Dt(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:$t,onChange:Q=>vr(Q.target.value)})]})]}):null]}):y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck (cm)"}),y.jsx("input",{inputMode:"decimal",value:D,onChange:Q=>A(Q.target.value),placeholder:"optional"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist (cm)"}),y.jsx("input",{inputMode:"decimal",value:ie,onChange:Q=>re(Q.target.value),placeholder:"optional"})]}),s?y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip (cm)"}),y.jsx("input",{inputMode:"decimal",value:le,onChange:Q=>ye(Q.target.value),placeholder:"optional"})]}):null]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",type:"submit",disabled:!Do()||r,children:r?"Saving":"Add / Update Entry"})})]})]})}function F5(t){return t==null?"":String(t)}function Ar(t){if(t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function j5({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:r}){const[s,o]=O.useState(!1),a=String(t||"").toLowerCase()==="female",l=Array.isArray(r)&&r.length===3?r:["Bench Press","Squat","Deadlift"],[u,h]=O.useState(null),d=O.useMemo(()=>{const w=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"benchLoad",label:`${l[0]} Load`},{key:"benchReps",label:`${l[0]} Reps`},{key:"squatLoad",label:`${l[1]} Load`},{key:"squatReps",label:`${l[1]} Reps`},{key:"deadliftLoad",label:`${l[2]} Load`},{key:"deadliftReps",label:`${l[2]} Reps`}];return i?(w.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),a&&w.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):(w.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),a&&w.push({key:"hip",label:"Hip"})),w.push({key:"_actions",label:"Actions",readOnly:!0}),w},[i,r,t]);function f(w){return(n||[]).find(v=>v.dateIso===w)||null}function g(w,v){const E=Dr(w,v);return Number.isFinite(E)?Math.round(E*10)/10:null}async function T(w,v,E){if(!(v==="dateIso"||v==="_actions")){h(null),o(!0);try{const x=Ar(E),P=f(w);if(v==="benchLoad"||v==="benchReps"){const M=v==="benchLoad"?x:Ar((P==null?void 0:P.benchLoad)??""),N=v==="benchReps"?x:Ar((P==null?void 0:P.benchReps)??"");await Mu(e,w,{[v]:x,bench:g(M,N)})}else if(v==="squatLoad"||v==="squatReps"){const M=v==="squatLoad"?x:Ar((P==null?void 0:P.squatLoad)??""),N=v==="squatReps"?x:Ar((P==null?void 0:P.squatReps)??"");await Mu(e,w,{[v]:x,squat:g(M,N)})}else if(v==="deadliftLoad"||v==="deadliftReps"){const M=v==="deadliftLoad"?x:Ar((P==null?void 0:P.deadliftLoad)??""),N=v==="deadliftReps"?x:Ar((P==null?void 0:P.deadliftReps)??"");await Mu(e,w,{[v]:x,deadlift:g(M,N)})}else await Mu(e,w,{[v]:x});h({type:"success",text:"Saved."})}catch(x){h({type:"error",text:(x==null?void 0:x.message)||"Failed to save."})}finally{o(!1)}}}async function I(w){if(confirm(`Delete entry for ${w}?`)){h(null),o(!0);try{await oF(e,w),h({type:"success",text:"Deleted."})}catch(v){h({type:"error",text:(v==null?void 0:v.message)||"Failed to delete."})}finally{o(!1)}}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"All Entries"}),y.jsxs("div",{className:"muted",children:["Inline edit  blur to save. ",s?"Saving":""]})]}),u&&y.jsx("div",{className:`notice ${u.type==="error"?"error":"success"}`,style:{marginTop:12},children:u.text}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsx("tr",{children:d.map(w=>y.jsx("th",{children:w.label},w.key))})}),y.jsx("tbody",{children:n.map(w=>y.jsx("tr",{children:d.map(v=>v.key==="_actions"?y.jsx("td",{children:y.jsx("button",{className:"btn danger",onClick:()=>I(w.dateIso),children:"Delete"})},v.key):v.readOnly?y.jsx("td",{children:w[v.key]},v.key):y.jsx("td",{children:y.jsx("input",{defaultValue:F5(w[v.key]),onBlur:E=>T(w.dateIso,v.key,E.target.value),inputMode:"decimal"})},v.key))},w.dateIso))})]})})]})}function U5(){const{user:t}=vi(),{profile:e}=ry(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=O.useState([]),[s,o]=O.useState(!1),[a,l]=O.useState(null);O.useEffect(()=>{if(!t)return;const f=oy(t.uid,g=>r(g),g=>l({type:"error",text:(g==null?void 0:g.message)||"Failed to load entries."}));return()=>f()},[t]);const u=O.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function d(f){l(null),o(!0);try{await sF(t.uid,f),l({type:"success",text:"Entry saved."})}catch(g){l({type:"error",text:(g==null?void 0:g.message)||"Failed to save entry."})}finally{o(!1)}}return y.jsxs(y.Fragment,{children:[a&&y.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),y.jsx(V5,{sex:h,tripleEnabled:u,liftNames:n,onSubmit:d,busy:s}),y.jsx(j5,{sex:h,userId:t.uid,entries:i,tripleEnabled:u,liftNames:n})]})}function B5(){return y.jsxs(y.Fragment,{children:[y.jsx(tF,{}),y.jsx("div",{className:"app-shell",children:y.jsxs(gP,{children:[y.jsx(Cn,{path:"/",element:y.jsx(xp,{to:"/dashboard",replace:!0})}),y.jsx(Cn,{path:"/dashboard",element:y.jsx(Ek,{})}),y.jsx(Cn,{path:"/insights",element:y.jsx(b5,{})}),y.jsx(Cn,{path:"/login",element:y.jsx(k5,{})}),y.jsx(Cn,{path:"/signup",element:y.jsx(C5,{})}),y.jsx(Cn,{path:"/reset-password",element:y.jsx(A5,{})}),y.jsx(Cn,{path:"/profile",element:y.jsx(rw,{children:y.jsx(L5,{})})}),y.jsx(Cn,{path:"/entry",element:y.jsx(rw,{children:y.jsx(U5,{})})}),y.jsx(Cn,{path:"*",element:y.jsx(xp,{to:"/dashboard",replace:!0})})]})})]})}class z5 extends dm.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?y.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[y.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),y.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),y.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),y.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}Pf.createRoot(document.getElementById("root")).render(y.jsx(dm.StrictMode,{children:y.jsx(SP,{basename:"/Body-Recomp-Tracker/",children:y.jsx(eF,{children:y.jsx(nF,{children:y.jsx(z5,{children:y.jsx(B5,{})})})})})}));
