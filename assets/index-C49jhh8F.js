var Kk=Object.defineProperty;var Gk=(t,e,n)=>e in t?Kk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>Gk(t,typeof e!="symbol"?e+"":e,n);function Qk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Yk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gE={exports:{}},hh={},yE={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=Symbol.for("react.element"),Xk=Symbol.for("react.portal"),Jk=Symbol.for("react.fragment"),Zk=Symbol.for("react.strict_mode"),eC=Symbol.for("react.profiler"),tC=Symbol.for("react.provider"),nC=Symbol.for("react.context"),iC=Symbol.for("react.forward_ref"),rC=Symbol.for("react.suspense"),sC=Symbol.for("react.memo"),oC=Symbol.for("react.lazy"),d_=Symbol.iterator;function aC(t){return t===null||typeof t!="object"?null:(t=d_&&t[d_]||t["@@iterator"],typeof t=="function"?t:null)}var _E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vE=Object.assign,wE={};function fo(t,e,n){this.props=t,this.context=e,this.refs=wE,this.updater=n||_E}fo.prototype.isReactComponent={};fo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EE(){}EE.prototype=fo.prototype;function Zp(t,e,n){this.props=t,this.context=e,this.refs=wE,this.updater=n||_E}var em=Zp.prototype=new EE;em.constructor=Zp;vE(em,fo.prototype);em.isPureReactComponent=!0;var f_=Array.isArray,TE=Object.prototype.hasOwnProperty,tm={current:null},IE={key:!0,ref:!0,__self:!0,__source:!0};function SE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)TE.call(e,i)&&!IE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:yl,type:t,key:s,ref:o,props:r,_owner:tm.current}}function lC(t,e){return{$$typeof:yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nm(t){return typeof t=="object"&&t!==null&&t.$$typeof===yl}function uC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var p_=/\/+/g;function Ed(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uC(""+t.key):e.toString(36)}function Vu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yl:case Xk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Ed(o,0):i,f_(r)?(n="",t!=null&&(n=t.replace(p_,"$&/")+"/"),Vu(r,e,n,"",function(u){return u})):r!=null&&(nm(r)&&(r=lC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(p_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",f_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Ed(s,a);o+=Vu(s,e,n,l,r)}else if(l=aC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Ed(s,a++),o+=Vu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tu(t,e,n){if(t==null)return t;var i=[],r=0;return Vu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function cC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},Fu={transition:null},hC={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Fu,ReactCurrentOwner:tm};function xE(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:tu,forEach:function(t,e,n){tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tu(t,function(){e++}),e},toArray:function(t){return tu(t,function(e){return e})||[]},only:function(t){if(!nm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=fo;oe.Fragment=Jk;oe.Profiler=eC;oe.PureComponent=Zp;oe.StrictMode=Zk;oe.Suspense=rC;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hC;oe.act=xE;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=vE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=tm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)TE.call(e,l)&&!IE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:yl,type:t.type,key:r,ref:s,props:i,_owner:o}};oe.createContext=function(t){return t={$$typeof:nC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tC,_context:t},t.Consumer=t};oe.createElement=SE;oe.createFactory=function(t){var e=SE.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:iC,render:t}};oe.isValidElement=nm;oe.lazy=function(t){return{$$typeof:oC,_payload:{_status:-1,_result:t},_init:cC}};oe.memo=function(t,e){return{$$typeof:sC,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Fu.transition;Fu.transition={};try{t()}finally{Fu.transition=e}};oe.unstable_act=xE;oe.useCallback=function(t,e){return Pt.current.useCallback(t,e)};oe.useContext=function(t){return Pt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Pt.current.useEffect(t,e)};oe.useId=function(){return Pt.current.useId()};oe.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Pt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};oe.useRef=function(t){return Pt.current.useRef(t)};oe.useState=function(t){return Pt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Pt.current.useTransition()};oe.version="18.3.1";yE.exports=oe;var O=yE.exports;const im=Yk(O),dC=Qk({__proto__:null,default:im},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC=O,pC=Symbol.for("react.element"),mC=Symbol.for("react.fragment"),gC=Object.prototype.hasOwnProperty,yC=fC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_C={key:!0,ref:!0,__self:!0,__source:!0};function bE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)gC.call(e,i)&&!_C.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:pC,type:t,key:s,ref:o,props:r,_owner:yC.current}}hh.Fragment=mC;hh.jsx=bE;hh.jsxs=bE;gE.exports=hh;var y=gE.exports,Ef={},kE={exports:{}},Xt={},CE={exports:{}},AE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,G){var q=B.length;B.push(G);e:for(;0<q;){var de=q-1>>>1,te=B[de];if(0<r(te,G))B[de]=G,B[q]=te,q=de;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var G=B[0],q=B.pop();if(q!==G){B[0]=q;e:for(var de=0,te=B.length,_e=te>>>1;de<_e;){var Re=2*(de+1)-1,qe=B[Re],Ne=Re+1,Nt=B[Ne];if(0>r(qe,q))Ne<te&&0>r(Nt,qe)?(B[de]=Nt,B[Ne]=q,de=Ne):(B[de]=qe,B[Re]=q,de=Re);else if(Ne<te&&0>r(Nt,q))B[de]=Nt,B[Ne]=q,de=Ne;else break e}}return G}function r(B,G){var q=B.sortIndex-G.sortIndex;return q!==0?q:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,g=!1,v=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var G=n(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=B)i(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(u)}}function R(B){if(w=!1,b(B),!v)if(n(l)!==null)v=!0,le(M);else{var G=n(u);G!==null&&ye(R,G.startTime-B)}}function M(B,G){v=!1,w&&(w=!1,T(_),_=-1),g=!0;var q=f;try{for(b(G),d=n(l);d!==null&&(!(d.expirationTime>G)||B&&!P());){var de=d.callback;if(typeof de=="function"){d.callback=null,f=d.priorityLevel;var te=de(d.expirationTime<=G);G=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(l)&&i(l),b(G)}else i(l);d=n(l)}if(d!==null)var _e=!0;else{var Re=n(u);Re!==null&&ye(R,Re.startTime-G),_e=!1}return _e}finally{d=null,f=q,g=!1}}var N=!1,S=null,_=-1,k=5,C=-1;function P(){return!(t.unstable_now()-C<k)}function D(){if(S!==null){var B=t.unstable_now();C=B;var G=!0;try{G=S(!0,B)}finally{G?A():(N=!1,S=null)}}else N=!1}var A;if(typeof E=="function")A=function(){E(D)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,re=ie.port2;ie.port1.onmessage=D,A=function(){re.postMessage(null)}}else A=function(){I(D,0)};function le(B){S=B,N||(N=!0,A())}function ye(B,G){_=I(function(){B(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,le(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var q=f;f=G;try{return B()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=f;f=B;try{return G()}finally{f=q}},t.unstable_scheduleCallback=function(B,G,q){var de=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?de+q:de):q=de,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=q+te,B={id:h++,callback:G,priorityLevel:B,startTime:q,expirationTime:te,sortIndex:-1},q>de?(B.sortIndex=q,e(u,B),n(l)===null&&B===n(u)&&(w?(T(_),_=-1):w=!0,ye(R,q-de))):(B.sortIndex=te,e(l,B),v||g||(v=!0,le(M))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var G=f;return function(){var q=f;f=G;try{return B.apply(this,arguments)}finally{f=q}}}})(AE);CE.exports=AE;var vC=CE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wC=O,Yt=vC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PE=new Set,Va={};function rs(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for(Va[t]=e,t=0;t<e.length;t++)PE.add(e[t])}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tf=Object.prototype.hasOwnProperty,EC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m_={},g_={};function TC(t){return Tf.call(g_,t)?!0:Tf.call(m_,t)?!1:EC.test(t)?g_[t]=!0:(m_[t]=!0,!1)}function IC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SC(t,e,n,i){if(e===null||typeof e>"u"||IC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rm=/[\-:]([a-z])/g;function sm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rm,sm);ut[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rm,sm);ut[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rm,sm);ut[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function om(t,e,n,i){var r=ut.hasOwnProperty(e)?ut[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SC(e,n,r,i)&&(n=null),i||r===null?TC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var mi=wC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),am=Symbol.for("react.strict_mode"),If=Symbol.for("react.profiler"),RE=Symbol.for("react.provider"),NE=Symbol.for("react.context"),lm=Symbol.for("react.forward_ref"),Sf=Symbol.for("react.suspense"),xf=Symbol.for("react.suspense_list"),um=Symbol.for("react.memo"),ki=Symbol.for("react.lazy"),DE=Symbol.for("react.offscreen"),y_=Symbol.iterator;function Fo(t){return t===null||typeof t!="object"?null:(t=y_&&t[y_]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Td;function ta(t){if(Td===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Td=e&&e[1]||""}return`
`+Td+t}var Id=!1;function Sd(t,e){if(!t||Id)return"";Id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Id=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ta(t):""}function xC(t){switch(t.tag){case 5:return ta(t.type);case 16:return ta("Lazy");case 13:return ta("Suspense");case 19:return ta("SuspenseList");case 0:case 2:case 15:return t=Sd(t.type,!1),t;case 11:return t=Sd(t.type.render,!1),t;case 1:return t=Sd(t.type,!0),t;default:return""}}function bf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ss:return"Fragment";case Is:return"Portal";case If:return"Profiler";case am:return"StrictMode";case Sf:return"Suspense";case xf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NE:return(t.displayName||"Context")+".Consumer";case RE:return(t._context.displayName||"Context")+".Provider";case lm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case um:return e=t.displayName||null,e!==null?e:bf(t.type)||"Memo";case ki:e=t._payload,t=t._init;try{return bf(t(e))}catch{}}return null}function bC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bf(e);case 8:return e===am?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ME(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kC(t){var e=ME(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function iu(t){t._valueTracker||(t._valueTracker=kC(t))}function OE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ME(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function lc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kf(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function __(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LE(t,e){e=e.checked,e!=null&&om(t,"checked",e,!1)}function Cf(t,e){LE(t,e);var n=nr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Af(t,e.type,n):e.hasOwnProperty("defaultValue")&&Af(t,e.type,nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function v_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Af(t,e,n){(e!=="number"||lc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var na=Array.isArray;function Vs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+nr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Pf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function w_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(na(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:nr(n)}}function VE(t,e){var n=nr(e.value),i=nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function E_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function FE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?FE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ru,jE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ru=ru||document.createElement("div"),ru.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ru.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CC=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){CC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});function UE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ma.hasOwnProperty(t)&&ma[t]?(""+e).trim():e+"px"}function BE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=UE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var AC=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nf(t,e){if(e){if(AC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Df(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mf=null;function cm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Of=null,Fs=null,js=null;function T_(t){if(t=wl(t)){if(typeof Of!="function")throw Error(U(280));var e=t.stateNode;e&&(e=gh(e),Of(t.stateNode,t.type,e))}}function zE(t){Fs?js?js.push(t):js=[t]:Fs=t}function $E(){if(Fs){var t=Fs,e=js;if(js=Fs=null,T_(t),e)for(t=0;t<e.length;t++)T_(e[t])}}function WE(t,e){return t(e)}function HE(){}var xd=!1;function qE(t,e,n){if(xd)return t(e,n);xd=!0;try{return WE(t,e,n)}finally{xd=!1,(Fs!==null||js!==null)&&(HE(),$E())}}function ja(t,e){var n=t.stateNode;if(n===null)return null;var i=gh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Lf=!1;if(ai)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{Lf=!1}function PC(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ga=!1,uc=null,cc=!1,Vf=null,RC={onError:function(t){ga=!0,uc=t}};function NC(t,e,n,i,r,s,o,a,l){ga=!1,uc=null,PC.apply(RC,arguments)}function DC(t,e,n,i,r,s,o,a,l){if(NC.apply(this,arguments),ga){if(ga){var u=uc;ga=!1,uc=null}else throw Error(U(198));cc||(cc=!0,Vf=u)}}function ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function KE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I_(t){if(ss(t)!==t)throw Error(U(188))}function MC(t){var e=t.alternate;if(!e){if(e=ss(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return I_(r),t;if(s===i)return I_(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function GE(t){return t=MC(t),t!==null?QE(t):null}function QE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QE(t);if(e!==null)return e;t=t.sibling}return null}var YE=Yt.unstable_scheduleCallback,S_=Yt.unstable_cancelCallback,OC=Yt.unstable_shouldYield,LC=Yt.unstable_requestPaint,ze=Yt.unstable_now,VC=Yt.unstable_getCurrentPriorityLevel,hm=Yt.unstable_ImmediatePriority,XE=Yt.unstable_UserBlockingPriority,hc=Yt.unstable_NormalPriority,FC=Yt.unstable_LowPriority,JE=Yt.unstable_IdlePriority,dh=null,Dn=null;function jC(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(dh,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:zC,UC=Math.log,BC=Math.LN2;function zC(t){return t>>>=0,t===0?32:31-(UC(t)/BC|0)|0}var su=64,ou=4194304;function ia(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=ia(a):(s&=o,s!==0&&(i=ia(s)))}else o=n&~r,o!==0?i=ia(o):s!==0&&(i=ia(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-yn(e),r=1<<n,i|=t[n],e&=~r;return i}function $C(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-yn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=$C(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ff(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZE(){var t=su;return su<<=1,!(su&4194240)&&(su=64),t}function bd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function HC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-yn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function dm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-yn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ee=0;function eT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tT,fm,nT,iT,rT,jf=!1,au=[],zi=null,$i=null,Wi=null,Ua=new Map,Ba=new Map,Ai=[],qC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x_(t,e){switch(t){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(e.pointerId)}}function Uo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=wl(e),e!==null&&fm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function KC(t,e,n,i,r){switch(e){case"focusin":return zi=Uo(zi,t,e,n,i,r),!0;case"dragenter":return $i=Uo($i,t,e,n,i,r),!0;case"mouseover":return Wi=Uo(Wi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ua.set(s,Uo(Ua.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ba.set(s,Uo(Ba.get(s)||null,t,e,n,i,r)),!0}return!1}function sT(t){var e=Rr(t.target);if(e!==null){var n=ss(e);if(n!==null){if(e=n.tag,e===13){if(e=KE(n),e!==null){t.blockedOn=e,rT(t.priority,function(){nT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Mf=i,n.target.dispatchEvent(i),Mf=null}else return e=wl(n),e!==null&&fm(e),t.blockedOn=n,!1;e.shift()}return!0}function b_(t,e,n){ju(t)&&n.delete(e)}function GC(){jf=!1,zi!==null&&ju(zi)&&(zi=null),$i!==null&&ju($i)&&($i=null),Wi!==null&&ju(Wi)&&(Wi=null),Ua.forEach(b_),Ba.forEach(b_)}function Bo(t,e){t.blockedOn===e&&(t.blockedOn=null,jf||(jf=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,GC)))}function za(t){function e(r){return Bo(r,t)}if(0<au.length){Bo(au[0],t);for(var n=1;n<au.length;n++){var i=au[n];i.blockedOn===t&&(i.blockedOn=null)}}for(zi!==null&&Bo(zi,t),$i!==null&&Bo($i,t),Wi!==null&&Bo(Wi,t),Ua.forEach(e),Ba.forEach(e),n=0;n<Ai.length;n++)i=Ai[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ai.length&&(n=Ai[0],n.blockedOn===null);)sT(n),n.blockedOn===null&&Ai.shift()}var Us=mi.ReactCurrentBatchConfig,fc=!0;function QC(t,e,n,i){var r=Ee,s=Us.transition;Us.transition=null;try{Ee=1,pm(t,e,n,i)}finally{Ee=r,Us.transition=s}}function YC(t,e,n,i){var r=Ee,s=Us.transition;Us.transition=null;try{Ee=4,pm(t,e,n,i)}finally{Ee=r,Us.transition=s}}function pm(t,e,n,i){if(fc){var r=Uf(t,e,n,i);if(r===null)Ld(t,e,i,pc,n),x_(t,i);else if(KC(r,t,e,n,i))i.stopPropagation();else if(x_(t,i),e&4&&-1<qC.indexOf(t)){for(;r!==null;){var s=wl(r);if(s!==null&&tT(s),s=Uf(t,e,n,i),s===null&&Ld(t,e,i,pc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Ld(t,e,i,null,n)}}var pc=null;function Uf(t,e,n,i){if(pc=null,t=cm(i),t=Rr(t),t!==null)if(e=ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=KE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pc=t,null}function oT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VC()){case hm:return 1;case XE:return 4;case hc:case FC:return 16;case JE:return 536870912;default:return 16}default:return 16}}var Oi=null,mm=null,Uu=null;function aT(){if(Uu)return Uu;var t,e=mm,n=e.length,i,r="value"in Oi?Oi.value:Oi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Uu=r.slice(t,1<i?1-i:void 0)}function Bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lu(){return!0}function k_(){return!1}function Jt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lu:k_,this.isPropagationStopped=k_,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),e}var po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gm=Jt(po),vl=Le({},po,{view:0,detail:0}),XC=Jt(vl),kd,Cd,zo,fh=Le({},vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ym,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zo&&(zo&&t.type==="mousemove"?(kd=t.screenX-zo.screenX,Cd=t.screenY-zo.screenY):Cd=kd=0,zo=t),kd)},movementY:function(t){return"movementY"in t?t.movementY:Cd}}),C_=Jt(fh),JC=Le({},fh,{dataTransfer:0}),ZC=Jt(JC),eA=Le({},vl,{relatedTarget:0}),Ad=Jt(eA),tA=Le({},po,{animationName:0,elapsedTime:0,pseudoElement:0}),nA=Jt(tA),iA=Le({},po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rA=Jt(iA),sA=Le({},po,{data:0}),A_=Jt(sA),oA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lA[t])?!!e[t]:!1}function ym(){return uA}var cA=Le({},vl,{key:function(t){if(t.key){var e=oA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ym,charCode:function(t){return t.type==="keypress"?Bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hA=Jt(cA),dA=Le({},fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P_=Jt(dA),fA=Le({},vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ym}),pA=Jt(fA),mA=Le({},po,{propertyName:0,elapsedTime:0,pseudoElement:0}),gA=Jt(mA),yA=Le({},fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_A=Jt(yA),vA=[9,13,27,32],_m=ai&&"CompositionEvent"in window,ya=null;ai&&"documentMode"in document&&(ya=document.documentMode);var wA=ai&&"TextEvent"in window&&!ya,lT=ai&&(!_m||ya&&8<ya&&11>=ya),R_=" ",N_=!1;function uT(t,e){switch(t){case"keyup":return vA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xs=!1;function EA(t,e){switch(t){case"compositionend":return cT(e);case"keypress":return e.which!==32?null:(N_=!0,R_);case"textInput":return t=e.data,t===R_&&N_?null:t;default:return null}}function TA(t,e){if(xs)return t==="compositionend"||!_m&&uT(t,e)?(t=aT(),Uu=mm=Oi=null,xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lT&&e.locale!=="ko"?null:e.data;default:return null}}var IA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IA[t.type]:e==="textarea"}function hT(t,e,n,i){zE(i),e=mc(e,"onChange"),0<e.length&&(n=new gm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var _a=null,$a=null;function SA(t){TT(t,0)}function ph(t){var e=Cs(t);if(OE(e))return t}function xA(t,e){if(t==="change")return e}var dT=!1;if(ai){var Pd;if(ai){var Rd="oninput"in document;if(!Rd){var M_=document.createElement("div");M_.setAttribute("oninput","return;"),Rd=typeof M_.oninput=="function"}Pd=Rd}else Pd=!1;dT=Pd&&(!document.documentMode||9<document.documentMode)}function O_(){_a&&(_a.detachEvent("onpropertychange",fT),$a=_a=null)}function fT(t){if(t.propertyName==="value"&&ph($a)){var e=[];hT(e,$a,t,cm(t)),qE(SA,e)}}function bA(t,e,n){t==="focusin"?(O_(),_a=e,$a=n,_a.attachEvent("onpropertychange",fT)):t==="focusout"&&O_()}function kA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ph($a)}function CA(t,e){if(t==="click")return ph(e)}function AA(t,e){if(t==="input"||t==="change")return ph(e)}function PA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:PA;function Wa(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Tf.call(e,r)||!vn(t[r],e[r]))return!1}return!0}function L_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function V_(t,e){var n=L_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L_(n)}}function pT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mT(){for(var t=window,e=lc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lc(t.document)}return e}function vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function RA(t){var e=mT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pT(n.ownerDocument.documentElement,n)){if(i!==null&&vm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=V_(n,s);var o=V_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NA=ai&&"documentMode"in document&&11>=document.documentMode,bs=null,Bf=null,va=null,zf=!1;function F_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zf||bs==null||bs!==lc(i)||(i=bs,"selectionStart"in i&&vm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),va&&Wa(va,i)||(va=i,i=mc(Bf,"onSelect"),0<i.length&&(e=new gm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=bs)))}function uu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},Nd={},gT={};ai&&(gT=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function mh(t){if(Nd[t])return Nd[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gT)return Nd[t]=e[n];return t}var yT=mh("animationend"),_T=mh("animationiteration"),vT=mh("animationstart"),wT=mh("transitionend"),ET=new Map,j_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){ET.set(t,e),rs(e,[t])}for(var Dd=0;Dd<j_.length;Dd++){var Md=j_[Dd],DA=Md.toLowerCase(),MA=Md[0].toUpperCase()+Md.slice(1);ur(DA,"on"+MA)}ur(yT,"onAnimationEnd");ur(_T,"onAnimationIteration");ur(vT,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(wT,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function U_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,DC(i,e,void 0,t),t.currentTarget=null}function TT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;U_(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;U_(r,a,u),s=l}}}if(cc)throw t=Vf,cc=!1,Vf=null,t}function ke(t,e){var n=e[Kf];n===void 0&&(n=e[Kf]=new Set);var i=t+"__bubble";n.has(i)||(IT(e,t,2,!1),n.add(i))}function Od(t,e,n){var i=0;e&&(i|=4),IT(n,t,i,e)}var cu="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[cu]){t[cu]=!0,PE.forEach(function(n){n!=="selectionchange"&&(OA.has(n)||Od(n,!1,t),Od(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cu]||(e[cu]=!0,Od("selectionchange",!1,e))}}function IT(t,e,n,i){switch(oT(e)){case 1:var r=QC;break;case 4:r=YC;break;default:r=pm}n=r.bind(null,e,n,t),r=void 0,!Lf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ld(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Rr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}qE(function(){var u=s,h=cm(n),d=[];e:{var f=ET.get(t);if(f!==void 0){var g=gm,v=t;switch(t){case"keypress":if(Bu(n)===0)break e;case"keydown":case"keyup":g=hA;break;case"focusin":v="focus",g=Ad;break;case"focusout":v="blur",g=Ad;break;case"beforeblur":case"afterblur":g=Ad;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=C_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ZC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=pA;break;case yT:case _T:case vT:g=nA;break;case wT:g=gA;break;case"scroll":g=XC;break;case"wheel":g=_A;break;case"copy":case"cut":case"paste":g=rA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=P_}var w=(e&4)!==0,I=!w&&t==="scroll",T=w?f!==null?f+"Capture":null:f;w=[];for(var E=u,b;E!==null;){b=E;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,T!==null&&(R=ja(E,T),R!=null&&w.push(qa(E,R,b)))),I)break;E=E.return}0<w.length&&(f=new g(f,v,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Mf&&(v=n.relatedTarget||n.fromElement)&&(Rr(v)||v[li]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Rr(v):null,v!==null&&(I=ss(v),v!==I||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(w=C_,R="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(w=P_,R="onPointerLeave",T="onPointerEnter",E="pointer"),I=g==null?f:Cs(g),b=v==null?f:Cs(v),f=new w(R,E+"leave",g,n,h),f.target=I,f.relatedTarget=b,R=null,Rr(h)===u&&(w=new w(T,E+"enter",v,n,h),w.target=b,w.relatedTarget=I,R=w),I=R,g&&v)t:{for(w=g,T=v,E=0,b=w;b;b=ms(b))E++;for(b=0,R=T;R;R=ms(R))b++;for(;0<E-b;)w=ms(w),E--;for(;0<b-E;)T=ms(T),b--;for(;E--;){if(w===T||T!==null&&w===T.alternate)break t;w=ms(w),T=ms(T)}w=null}else w=null;g!==null&&B_(d,f,g,w,!1),v!==null&&I!==null&&B_(d,I,v,w,!0)}}e:{if(f=u?Cs(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var M=xA;else if(D_(f))if(dT)M=AA;else{M=kA;var N=bA}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=CA);if(M&&(M=M(t,u))){hT(d,M,n,h);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Af(f,"number",f.value)}switch(N=u?Cs(u):window,t){case"focusin":(D_(N)||N.contentEditable==="true")&&(bs=N,Bf=u,va=null);break;case"focusout":va=Bf=bs=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,F_(d,n,h);break;case"selectionchange":if(NA)break;case"keydown":case"keyup":F_(d,n,h)}var S;if(_m)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else xs?uT(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(lT&&n.locale!=="ko"&&(xs||_!=="onCompositionStart"?_==="onCompositionEnd"&&xs&&(S=aT()):(Oi=h,mm="value"in Oi?Oi.value:Oi.textContent,xs=!0)),N=mc(u,_),0<N.length&&(_=new A_(_,t,null,n,h),d.push({event:_,listeners:N}),S?_.data=S:(S=cT(n),S!==null&&(_.data=S)))),(S=wA?EA(t,n):TA(t,n))&&(u=mc(u,"onBeforeInput"),0<u.length&&(h=new A_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=S))}TT(d,e)})}function qa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ja(t,n),s!=null&&i.unshift(qa(t,s,r)),s=ja(t,e),s!=null&&i.push(qa(t,s,r))),t=t.return}return i}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function B_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=ja(n,s),l!=null&&o.unshift(qa(n,l,a))):r||(l=ja(n,s),l!=null&&o.push(qa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LA=/\r\n?/g,VA=/\u0000|\uFFFD/g;function z_(t){return(typeof t=="string"?t:""+t).replace(LA,`
`).replace(VA,"")}function hu(t,e,n){if(e=z_(e),z_(t)!==e&&n)throw Error(U(425))}function gc(){}var $f=null,Wf=null;function Hf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qf=typeof setTimeout=="function"?setTimeout:void 0,FA=typeof clearTimeout=="function"?clearTimeout:void 0,$_=typeof Promise=="function"?Promise:void 0,jA=typeof queueMicrotask=="function"?queueMicrotask:typeof $_<"u"?function(t){return $_.resolve(null).then(t).catch(UA)}:qf;function UA(t){setTimeout(function(){throw t})}function Vd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),za(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);za(e)}function Hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mo=Math.random().toString(36).slice(2),Rn="__reactFiber$"+mo,Ka="__reactProps$"+mo,li="__reactContainer$"+mo,Kf="__reactEvents$"+mo,BA="__reactListeners$"+mo,zA="__reactHandles$"+mo;function Rr(t){var e=t[Rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[li]||n[Rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=W_(t);t!==null;){if(n=t[Rn])return n;t=W_(t)}return e}t=n,n=t.parentNode}return null}function wl(t){return t=t[Rn]||t[li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function gh(t){return t[Ka]||null}var Gf=[],As=-1;function cr(t){return{current:t}}function Ae(t){0>As||(t.current=Gf[As],Gf[As]=null,As--)}function Se(t,e){As++,Gf[As]=t.current,t.current=e}var ir={},Et=cr(ir),jt=cr(!1),zr=ir;function Qs(t,e){var n=t.type.contextTypes;if(!n)return ir;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ut(t){return t=t.childContextTypes,t!=null}function yc(){Ae(jt),Ae(Et)}function H_(t,e,n){if(Et.current!==ir)throw Error(U(168));Se(Et,e),Se(jt,n)}function ST(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,bC(t)||"Unknown",r));return Le({},n,i)}function _c(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ir,zr=Et.current,Se(Et,t),Se(jt,jt.current),!0}function q_(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=ST(t,e,zr),i.__reactInternalMemoizedMergedChildContext=t,Ae(jt),Ae(Et),Se(Et,t)):Ae(jt),Se(jt,n)}var Jn=null,yh=!1,Fd=!1;function xT(t){Jn===null?Jn=[t]:Jn.push(t)}function $A(t){yh=!0,xT(t)}function hr(){if(!Fd&&Jn!==null){Fd=!0;var t=0,e=Ee;try{var n=Jn;for(Ee=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Jn=null,yh=!1}catch(r){throw Jn!==null&&(Jn=Jn.slice(t+1)),YE(hm,hr),r}finally{Ee=e,Fd=!1}}return null}var Ps=[],Rs=0,vc=null,wc=0,en=[],tn=0,$r=null,ei=1,ti="";function br(t,e){Ps[Rs++]=wc,Ps[Rs++]=vc,vc=t,wc=e}function bT(t,e,n){en[tn++]=ei,en[tn++]=ti,en[tn++]=$r,$r=t;var i=ei;t=ti;var r=32-yn(i)-1;i&=~(1<<r),n+=1;var s=32-yn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ei=1<<32-yn(e)+r|n<<r|i,ti=s+t}else ei=1<<s|n<<r|i,ti=t}function wm(t){t.return!==null&&(br(t,1),bT(t,1,0))}function Em(t){for(;t===vc;)vc=Ps[--Rs],Ps[Rs]=null,wc=Ps[--Rs],Ps[Rs]=null;for(;t===$r;)$r=en[--tn],en[tn]=null,ti=en[--tn],en[tn]=null,ei=en[--tn],en[tn]=null}var Gt=null,qt=null,Pe=!1,mn=null;function kT(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function K_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,qt=Hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$r!==null?{id:ei,overflow:ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,qt=null,!0):!1;default:return!1}}function Qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yf(t){if(Pe){var e=qt;if(e){var n=e;if(!K_(t,e)){if(Qf(t))throw Error(U(418));e=Hi(n.nextSibling);var i=Gt;e&&K_(t,e)?kT(i,n):(t.flags=t.flags&-4097|2,Pe=!1,Gt=t)}}else{if(Qf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Pe=!1,Gt=t}}}function G_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function du(t){if(t!==Gt)return!1;if(!Pe)return G_(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hf(t.type,t.memoizedProps)),e&&(e=qt)){if(Qf(t))throw CT(),Error(U(418));for(;e;)kT(t,e),e=Hi(e.nextSibling)}if(G_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qt=Hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qt=null}}else qt=Gt?Hi(t.stateNode.nextSibling):null;return!0}function CT(){for(var t=qt;t;)t=Hi(t.nextSibling)}function Ys(){qt=Gt=null,Pe=!1}function Tm(t){mn===null?mn=[t]:mn.push(t)}var WA=mi.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function fu(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Q_(t){var e=t._init;return e(t._payload)}function AT(t){function e(T,E){if(t){var b=T.deletions;b===null?(T.deletions=[E],T.flags|=16):b.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function i(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function r(T,E){return T=Qi(T,E),T.index=0,T.sibling=null,T}function s(T,E,b){return T.index=b,t?(b=T.alternate,b!==null?(b=b.index,b<E?(T.flags|=2,E):b):(T.flags|=2,E)):(T.flags|=1048576,E)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,E,b,R){return E===null||E.tag!==6?(E=Hd(b,T.mode,R),E.return=T,E):(E=r(E,b),E.return=T,E)}function l(T,E,b,R){var M=b.type;return M===Ss?h(T,E,b.props.children,R,b.key):E!==null&&(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ki&&Q_(M)===E.type)?(R=r(E,b.props),R.ref=$o(T,E,b),R.return=T,R):(R=Gu(b.type,b.key,b.props,null,T.mode,R),R.ref=$o(T,E,b),R.return=T,R)}function u(T,E,b,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=qd(b,T.mode,R),E.return=T,E):(E=r(E,b.children||[]),E.return=T,E)}function h(T,E,b,R,M){return E===null||E.tag!==7?(E=jr(b,T.mode,R,M),E.return=T,E):(E=r(E,b),E.return=T,E)}function d(T,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Hd(""+E,T.mode,b),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nu:return b=Gu(E.type,E.key,E.props,null,T.mode,b),b.ref=$o(T,null,E),b.return=T,b;case Is:return E=qd(E,T.mode,b),E.return=T,E;case ki:var R=E._init;return d(T,R(E._payload),b)}if(na(E)||Fo(E))return E=jr(E,T.mode,b,null),E.return=T,E;fu(T,E)}return null}function f(T,E,b,R){var M=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return M!==null?null:a(T,E,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nu:return b.key===M?l(T,E,b,R):null;case Is:return b.key===M?u(T,E,b,R):null;case ki:return M=b._init,f(T,E,M(b._payload),R)}if(na(b)||Fo(b))return M!==null?null:h(T,E,b,R,null);fu(T,b)}return null}function g(T,E,b,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return T=T.get(b)||null,a(E,T,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case nu:return T=T.get(R.key===null?b:R.key)||null,l(E,T,R,M);case Is:return T=T.get(R.key===null?b:R.key)||null,u(E,T,R,M);case ki:var N=R._init;return g(T,E,b,N(R._payload),M)}if(na(R)||Fo(R))return T=T.get(b)||null,h(E,T,R,M,null);fu(E,R)}return null}function v(T,E,b,R){for(var M=null,N=null,S=E,_=E=0,k=null;S!==null&&_<b.length;_++){S.index>_?(k=S,S=null):k=S.sibling;var C=f(T,S,b[_],R);if(C===null){S===null&&(S=k);break}t&&S&&C.alternate===null&&e(T,S),E=s(C,E,_),N===null?M=C:N.sibling=C,N=C,S=k}if(_===b.length)return n(T,S),Pe&&br(T,_),M;if(S===null){for(;_<b.length;_++)S=d(T,b[_],R),S!==null&&(E=s(S,E,_),N===null?M=S:N.sibling=S,N=S);return Pe&&br(T,_),M}for(S=i(T,S);_<b.length;_++)k=g(S,T,_,b[_],R),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?_:k.key),E=s(k,E,_),N===null?M=k:N.sibling=k,N=k);return t&&S.forEach(function(P){return e(T,P)}),Pe&&br(T,_),M}function w(T,E,b,R){var M=Fo(b);if(typeof M!="function")throw Error(U(150));if(b=M.call(b),b==null)throw Error(U(151));for(var N=M=null,S=E,_=E=0,k=null,C=b.next();S!==null&&!C.done;_++,C=b.next()){S.index>_?(k=S,S=null):k=S.sibling;var P=f(T,S,C.value,R);if(P===null){S===null&&(S=k);break}t&&S&&P.alternate===null&&e(T,S),E=s(P,E,_),N===null?M=P:N.sibling=P,N=P,S=k}if(C.done)return n(T,S),Pe&&br(T,_),M;if(S===null){for(;!C.done;_++,C=b.next())C=d(T,C.value,R),C!==null&&(E=s(C,E,_),N===null?M=C:N.sibling=C,N=C);return Pe&&br(T,_),M}for(S=i(T,S);!C.done;_++,C=b.next())C=g(S,T,_,C.value,R),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?_:C.key),E=s(C,E,_),N===null?M=C:N.sibling=C,N=C);return t&&S.forEach(function(D){return e(T,D)}),Pe&&br(T,_),M}function I(T,E,b,R){if(typeof b=="object"&&b!==null&&b.type===Ss&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case nu:e:{for(var M=b.key,N=E;N!==null;){if(N.key===M){if(M=b.type,M===Ss){if(N.tag===7){n(T,N.sibling),E=r(N,b.props.children),E.return=T,T=E;break e}}else if(N.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ki&&Q_(M)===N.type){n(T,N.sibling),E=r(N,b.props),E.ref=$o(T,N,b),E.return=T,T=E;break e}n(T,N);break}else e(T,N);N=N.sibling}b.type===Ss?(E=jr(b.props.children,T.mode,R,b.key),E.return=T,T=E):(R=Gu(b.type,b.key,b.props,null,T.mode,R),R.ref=$o(T,E,b),R.return=T,T=R)}return o(T);case Is:e:{for(N=b.key;E!==null;){if(E.key===N)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){n(T,E.sibling),E=r(E,b.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else e(T,E);E=E.sibling}E=qd(b,T.mode,R),E.return=T,T=E}return o(T);case ki:return N=b._init,I(T,E,N(b._payload),R)}if(na(b))return v(T,E,b,R);if(Fo(b))return w(T,E,b,R);fu(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(n(T,E.sibling),E=r(E,b),E.return=T,T=E):(n(T,E),E=Hd(b,T.mode,R),E.return=T,T=E),o(T)):n(T,E)}return I}var Xs=AT(!0),PT=AT(!1),Ec=cr(null),Tc=null,Ns=null,Im=null;function Sm(){Im=Ns=Tc=null}function xm(t){var e=Ec.current;Ae(Ec),t._currentValue=e}function Xf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){Tc=t,Im=Ns=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(Im!==t)if(t={context:t,memoizedValue:e,next:null},Ns===null){if(Tc===null)throw Error(U(308));Ns=t,Tc.dependencies={lanes:0,firstContext:t}}else Ns=Ns.next=t;return e}var Nr=null;function bm(t){Nr===null?Nr=[t]:Nr.push(t)}function RT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,bm(e)):(n.next=r.next,r.next=n),e.interleaved=n,ui(t,i)}function ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ci=!1;function km(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function si(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,fe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ui(t,n)}return r=i.interleaved,r===null?(e.next=e,bm(i)):(e.next=r.next,r.next=e),i.interleaved=e,ui(t,n)}function zu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,dm(t,n)}}function Y_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ic(t,e,n,i){var r=t.updateQueue;Ci=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=Le({},d,f);break e;case 2:Ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Hr|=o,t.lanes=o,t.memoizedState=d}}function X_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var El={},Mn=cr(El),Ga=cr(El),Qa=cr(El);function Dr(t){if(t===El)throw Error(U(174));return t}function Cm(t,e){switch(Se(Qa,e),Se(Ga,t),Se(Mn,El),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rf(e,t)}Ae(Mn),Se(Mn,e)}function Js(){Ae(Mn),Ae(Ga),Ae(Qa)}function DT(t){Dr(Qa.current);var e=Dr(Mn.current),n=Rf(e,t.type);e!==n&&(Se(Ga,t),Se(Mn,n))}function Am(t){Ga.current===t&&(Ae(Mn),Ae(Ga))}var De=cr(0);function Sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jd=[];function Pm(){for(var t=0;t<jd.length;t++)jd[t]._workInProgressVersionPrimary=null;jd.length=0}var $u=mi.ReactCurrentDispatcher,Ud=mi.ReactCurrentBatchConfig,Wr=0,Me=null,Ge=null,Ze=null,xc=!1,wa=!1,Ya=0,HA=0;function pt(){throw Error(U(321))}function Rm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function Nm(t,e,n,i,r,s){if(Wr=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$u.current=t===null||t.memoizedState===null?QA:YA,t=n(i,r),wa){s=0;do{if(wa=!1,Ya=0,25<=s)throw Error(U(301));s+=1,Ze=Ge=null,e.updateQueue=null,$u.current=XA,t=n(i,r)}while(wa)}if($u.current=bc,e=Ge!==null&&Ge.next!==null,Wr=0,Ze=Ge=Me=null,xc=!1,e)throw Error(U(300));return t}function Dm(){var t=Ya!==0;return Ya=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Me.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function un(){if(Ge===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Ze===null?Me.memoizedState:Ze.next;if(e!==null)Ze=e,Ge=t;else{if(t===null)throw Error(U(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Ze===null?Me.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Xa(t,e){return typeof e=="function"?e(t):e}function Bd(t){var e=un(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=Ge,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Wr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Me.lanes|=h,Hr|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,vn(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Me.lanes|=s,Hr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zd(t){var e=un(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);vn(s,e.memoizedState)||(Vt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function MT(){}function OT(t,e){var n=Me,i=un(),r=e(),s=!vn(i.memoizedState,r);if(s&&(i.memoizedState=r,Vt=!0),i=i.queue,Mm(FT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Ja(9,VT.bind(null,n,i,r,e),void 0,null),tt===null)throw Error(U(349));Wr&30||LT(n,e,r)}return r}function LT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function VT(t,e,n,i){e.value=n,e.getSnapshot=i,jT(e)&&UT(t)}function FT(t,e,n){return n(function(){jT(e)&&UT(t)})}function jT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function UT(t){var e=ui(t,1);e!==null&&_n(e,t,1,-1)}function J_(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:t},e.queue=t,t=t.dispatch=GA.bind(null,Me,t),[e.memoizedState,t]}function Ja(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function BT(){return un().memoizedState}function Wu(t,e,n,i){var r=An();Me.flags|=t,r.memoizedState=Ja(1|e,n,void 0,i===void 0?null:i)}function _h(t,e,n,i){var r=un();i=i===void 0?null:i;var s=void 0;if(Ge!==null){var o=Ge.memoizedState;if(s=o.destroy,i!==null&&Rm(i,o.deps)){r.memoizedState=Ja(e,n,s,i);return}}Me.flags|=t,r.memoizedState=Ja(1|e,n,s,i)}function Z_(t,e){return Wu(8390656,8,t,e)}function Mm(t,e){return _h(2048,8,t,e)}function zT(t,e){return _h(4,2,t,e)}function $T(t,e){return _h(4,4,t,e)}function WT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HT(t,e,n){return n=n!=null?n.concat([t]):null,_h(4,4,WT.bind(null,e,t),n)}function Om(){}function qT(t,e){var n=un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Rm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function KT(t,e){var n=un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Rm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function GT(t,e,n){return Wr&21?(vn(n,e)||(n=ZE(),Me.lanes|=n,Hr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function qA(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var i=Ud.transition;Ud.transition={};try{t(!1),e()}finally{Ee=n,Ud.transition=i}}function QT(){return un().memoizedState}function KA(t,e,n){var i=Gi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},YT(t))XT(e,n);else if(n=RT(t,e,n,i),n!==null){var r=Ct();_n(n,t,i,r),JT(n,e,i)}}function GA(t,e,n){var i=Gi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(YT(t))XT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,vn(a,o)){var l=e.interleaved;l===null?(r.next=r,bm(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=RT(t,e,r,i),n!==null&&(r=Ct(),_n(n,t,i,r),JT(n,e,i))}}function YT(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function XT(t,e){wa=xc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,dm(t,n)}}var bc={readContext:ln,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},QA={readContext:ln,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Z_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wu(4194308,4,WT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wu(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=An();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=KA.bind(null,Me,t),[i.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:J_,useDebugValue:Om,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=J_(!1),e=t[0];return t=qA.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Me,r=An();if(Pe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),tt===null)throw Error(U(349));Wr&30||LT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Z_(FT.bind(null,i,s,t),[t]),i.flags|=2048,Ja(9,VT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=An(),e=tt.identifierPrefix;if(Pe){var n=ti,i=ei;n=(i&~(1<<32-yn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ya++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=HA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YA={readContext:ln,useCallback:qT,useContext:ln,useEffect:Mm,useImperativeHandle:HT,useInsertionEffect:zT,useLayoutEffect:$T,useMemo:KT,useReducer:Bd,useRef:BT,useState:function(){return Bd(Xa)},useDebugValue:Om,useDeferredValue:function(t){var e=un();return GT(e,Ge.memoizedState,t)},useTransition:function(){var t=Bd(Xa)[0],e=un().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:OT,useId:QT,unstable_isNewReconciler:!1},XA={readContext:ln,useCallback:qT,useContext:ln,useEffect:Mm,useImperativeHandle:HT,useInsertionEffect:zT,useLayoutEffect:$T,useMemo:KT,useReducer:zd,useRef:BT,useState:function(){return zd(Xa)},useDebugValue:Om,useDeferredValue:function(t){var e=un();return Ge===null?e.memoizedState=t:GT(e,Ge.memoizedState,t)},useTransition:function(){var t=zd(Xa)[0],e=un().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:OT,useId:QT,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vh={isMounted:function(t){return(t=t._reactInternals)?ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ct(),r=Gi(t),s=si(i,r);s.payload=e,n!=null&&(s.callback=n),e=qi(t,s,r),e!==null&&(_n(e,t,r,i),zu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ct(),r=Gi(t),s=si(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=qi(t,s,r),e!==null&&(_n(e,t,r,i),zu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),i=Gi(t),r=si(n,i);r.tag=2,e!=null&&(r.callback=e),e=qi(t,r,i),e!==null&&(_n(e,t,i,n),zu(e,t,i))}};function ev(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wa(n,i)||!Wa(r,s):!0}function ZT(t,e,n){var i=!1,r=ir,s=e.contextType;return typeof s=="object"&&s!==null?s=ln(s):(r=Ut(e)?zr:Et.current,i=e.contextTypes,s=(i=i!=null)?Qs(t,r):ir),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function tv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&vh.enqueueReplaceState(e,e.state,null)}function Zf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},km(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ln(s):(s=Ut(e)?zr:Et.current,r.context=Qs(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jf(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&vh.enqueueReplaceState(r,r.state,null),Ic(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",i=e;do n+=xC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function $d(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ep(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JA=typeof WeakMap=="function"?WeakMap:Map;function eI(t,e,n){n=si(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Cc||(Cc=!0,cp=i),ep(t,e)},n}function tI(t,e,n){n=si(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ep(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ep(t,e),typeof i!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function nv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new JA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=d1.bind(null,t,e,n),e.then(t,t))}function iv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=si(-1,1),e.tag=2,qi(n,e,1))),n.lanes|=1),t)}var ZA=mi.ReactCurrentOwner,Vt=!1;function bt(t,e,n,i){e.child=t===null?PT(e,null,n,i):Xs(e,t.child,n,i)}function sv(t,e,n,i,r){n=n.render;var s=e.ref;return Bs(e,r),i=Nm(t,e,n,i,s,r),n=Dm(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ci(t,e,r)):(Pe&&n&&wm(e),e.flags|=1,bt(t,e,i,r),e.child)}function ov(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!$m(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,nI(t,e,s,i,r)):(t=Gu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wa,n(o,i)&&t.ref===e.ref)return ci(t,e,r)}return e.flags|=1,t=Qi(s,i),t.ref=e.ref,t.return=e,e.child=t}function nI(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Wa(s,i)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,ci(t,e,r)}return tp(t,e,n,i,r)}function iI(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Ms,Ht),Ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Ms,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Se(Ms,Ht),Ht|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Se(Ms,Ht),Ht|=i;return bt(t,e,r,n),e.child}function rI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tp(t,e,n,i,r){var s=Ut(n)?zr:Et.current;return s=Qs(e,s),Bs(e,r),n=Nm(t,e,n,i,s,r),i=Dm(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ci(t,e,r)):(Pe&&i&&wm(e),e.flags|=1,bt(t,e,n,r),e.child)}function av(t,e,n,i,r){if(Ut(n)){var s=!0;_c(e)}else s=!1;if(Bs(e,r),e.stateNode===null)Hu(t,e),ZT(e,n,i),Zf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ln(u):(u=Ut(n)?zr:Et.current,u=Qs(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&tv(e,o,i,u),Ci=!1;var f=e.memoizedState;o.state=f,Ic(e,i,o,r),l=e.memoizedState,a!==i||f!==l||jt.current||Ci?(typeof h=="function"&&(Jf(e,n,h,i),l=e.memoizedState),(a=Ci||ev(e,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,NT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:fn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=Ut(n)?zr:Et.current,l=Qs(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&tv(e,o,i,l),Ci=!1,f=e.memoizedState,o.state=f,Ic(e,i,o,r);var v=e.memoizedState;a!==d||f!==v||jt.current||Ci?(typeof g=="function"&&(Jf(e,n,g,i),v=e.memoizedState),(u=Ci||ev(e,n,u,i,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return np(t,e,n,i,s,r)}function np(t,e,n,i,r,s){rI(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&q_(e,n,!1),ci(t,e,s);i=e.stateNode,ZA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Xs(e,t.child,null,s),e.child=Xs(e,null,a,s)):bt(t,e,a,s),e.memoizedState=i.state,r&&q_(e,n,!0),e.child}function sI(t){var e=t.stateNode;e.pendingContext?H_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&H_(t,e.context,!1),Cm(t,e.containerInfo)}function lv(t,e,n,i,r){return Ys(),Tm(r),e.flags|=256,bt(t,e,n,i),e.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function rp(t){return{baseLanes:t,cachePool:null,transitions:null}}function oI(t,e,n){var i=e.pendingProps,r=De.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Se(De,r&1),t===null)return Yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Th(o,i,0,null),t=jr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rp(n),e.memoizedState=ip,t):Lm(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return e1(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Qi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Qi(a,s):(s=jr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?rp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ip,i}return s=t.child,t=s.sibling,i=Qi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Lm(t,e){return e=Th({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pu(t,e,n,i){return i!==null&&Tm(i),Xs(e,t.child,null,n),t=Lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function e1(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=$d(Error(U(422))),pu(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Th({mode:"visible",children:i.children},r,0,null),s=jr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Xs(e,t.child,null,o),e.child.memoizedState=rp(o),e.memoizedState=ip,s);if(!(e.mode&1))return pu(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=$d(s,i,void 0),pu(t,e,o,i)}if(a=(o&t.childLanes)!==0,Vt||a){if(i=tt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ui(t,r),_n(i,t,r,-1))}return zm(),i=$d(Error(U(421))),pu(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=f1.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,qt=Hi(r.nextSibling),Gt=e,Pe=!0,mn=null,t!==null&&(en[tn++]=ei,en[tn++]=ti,en[tn++]=$r,ei=t.id,ti=t.overflow,$r=e),e=Lm(e,i.children),e.flags|=4096,e)}function uv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Xf(t.return,e,n)}function Wd(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function aI(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(bt(t,e,i.children,n),i=De.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uv(t,n,e);else if(t.tag===19)uv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Se(De,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Sc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Wd(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Sc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Wd(e,!0,n,null,s);break;case"together":Wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function t1(t,e,n){switch(e.tag){case 3:sI(e),Ys();break;case 5:DT(e);break;case 1:Ut(e.type)&&_c(e);break;case 4:Cm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Se(Ec,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Se(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?oI(t,e,n):(Se(De,De.current&1),t=ci(t,e,n),t!==null?t.sibling:null);Se(De,De.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return aI(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Se(De,De.current),i)break;return null;case 22:case 23:return e.lanes=0,iI(t,e,n)}return ci(t,e,n)}var lI,sp,uI,cI;lI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sp=function(){};uI=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Dr(Mn.current);var s=null;switch(n){case"input":r=kf(t,r),i=kf(t,i),s=[];break;case"select":r=Le({},r,{value:void 0}),i=Le({},i,{value:void 0}),s=[];break;case"textarea":r=Pf(t,r),i=Pf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=gc)}Nf(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Va.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Va.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};cI=function(t,e,n,i){n!==i&&(e.flags|=4)};function Wo(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function n1(t,e,n){var i=e.pendingProps;switch(Em(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Ut(e.type)&&yc(),mt(e),null;case 3:return i=e.stateNode,Js(),Ae(jt),Ae(Et),Pm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(du(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(fp(mn),mn=null))),sp(t,e),mt(e),null;case 5:Am(e);var r=Dr(Qa.current);if(n=e.type,t!==null&&e.stateNode!=null)uI(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return mt(e),null}if(t=Dr(Mn.current),du(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Rn]=e,i[Ka]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(r=0;r<ra.length;r++)ke(ra[r],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":__(i,s),ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ke("invalid",i);break;case"textarea":w_(i,s),ke("invalid",i)}Nf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&hu(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hu(i.textContent,a,t),r=["children",""+a]):Va.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",i)}switch(n){case"input":iu(i),v_(i,s,!0);break;case"textarea":iu(i),E_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=gc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Rn]=e,t[Ka]=i,lI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Df(n,i),n){case"dialog":ke("cancel",t),ke("close",t),r=i;break;case"iframe":case"object":case"embed":ke("load",t),r=i;break;case"video":case"audio":for(r=0;r<ra.length;r++)ke(ra[r],t);r=i;break;case"source":ke("error",t),r=i;break;case"img":case"image":case"link":ke("error",t),ke("load",t),r=i;break;case"details":ke("toggle",t),r=i;break;case"input":__(t,i),r=kf(t,i),ke("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Le({},i,{value:void 0}),ke("invalid",t);break;case"textarea":w_(t,i),r=Pf(t,i),ke("invalid",t);break;default:r=i}Nf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?BE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fa(t,l):typeof l=="number"&&Fa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Va.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",t):l!=null&&om(t,s,l,o))}switch(n){case"input":iu(t),v_(t,i,!1);break;case"textarea":iu(t),E_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+nr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Vs(t,!!i.multiple,s,!1):i.defaultValue!=null&&Vs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=gc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)cI(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=Dr(Qa.current),Dr(Mn.current),du(e)){if(i=e.stateNode,n=e.memoizedProps,i[Rn]=e,(s=i.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:hu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hu(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Rn]=e,e.stateNode=i}return mt(e),null;case 13:if(Ae(De),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&qt!==null&&e.mode&1&&!(e.flags&128))CT(),Ys(),e.flags|=98560,s=!1;else if(s=du(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Rn]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else mn!==null&&(fp(mn),mn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ye===0&&(Ye=3):zm())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Js(),sp(t,e),t===null&&Ha(e.stateNode.containerInfo),mt(e),null;case 10:return xm(e.type._context),mt(e),null;case 17:return Ut(e.type)&&yc(),mt(e),null;case 19:if(Ae(De),s=e.memoizedState,s===null)return mt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Wo(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sc(t),o!==null){for(e.flags|=128,Wo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&ze()>eo&&(e.flags|=128,i=!0,Wo(s,!1),e.lanes=4194304)}else{if(!i)if(t=Sc(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pe)return mt(e),null}else 2*ze()-s.renderingStartTime>eo&&n!==1073741824&&(e.flags|=128,i=!0,Wo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ze(),e.sibling=null,n=De.current,Se(De,i?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Bm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ht&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function i1(t,e){switch(Em(e),e.tag){case 1:return Ut(e.type)&&yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),Ae(jt),Ae(Et),Pm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Am(e),null;case 13:if(Ae(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(De),null;case 4:return Js(),null;case 10:return xm(e.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var mu=!1,_t=!1,r1=typeof WeakSet=="function"?WeakSet:Set,$=null;function Ds(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ue(t,e,i)}else n.current=null}function op(t,e,n){try{n()}catch(i){Ue(t,e,i)}}var cv=!1;function s1(t,e){if($f=fc,t=mT(),vm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++h===i&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wf={focusedElem:t,selectionRange:n},fc=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,I=v.memoizedState,T=e.stateNode,E=T.getSnapshotBeforeUpdate(e.elementType===e.type?w:fn(e.type,w),I);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Ue(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return v=cv,cv=!1,v}function Ea(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&op(e,n,s)}r=r.next}while(r!==i)}}function wh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ap(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hI(t){var e=t.alternate;e!==null&&(t.alternate=null,hI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rn],delete e[Ka],delete e[Kf],delete e[BA],delete e[zA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dI(t){return t.tag===5||t.tag===3||t.tag===4}function hv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gc));else if(i!==4&&(t=t.child,t!==null))for(lp(t,e,n),t=t.sibling;t!==null;)lp(t,e,n),t=t.sibling}function up(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(up(t,e,n),t=t.sibling;t!==null;)up(t,e,n),t=t.sibling}var it=null,pn=!1;function Ti(t,e,n){for(n=n.child;n!==null;)fI(t,e,n),n=n.sibling}function fI(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(dh,n)}catch{}switch(n.tag){case 5:_t||Ds(n,e);case 6:var i=it,r=pn;it=null,Ti(t,e,n),it=i,pn=r,it!==null&&(pn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(pn?(t=it,n=n.stateNode,t.nodeType===8?Vd(t.parentNode,n):t.nodeType===1&&Vd(t,n),za(t)):Vd(it,n.stateNode));break;case 4:i=it,r=pn,it=n.stateNode.containerInfo,pn=!0,Ti(t,e,n),it=i,pn=r;break;case 0:case 11:case 14:case 15:if(!_t&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&op(n,e,o),r=r.next}while(r!==i)}Ti(t,e,n);break;case 1:if(!_t&&(Ds(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ue(n,e,a)}Ti(t,e,n);break;case 21:Ti(t,e,n);break;case 22:n.mode&1?(_t=(i=_t)||n.memoizedState!==null,Ti(t,e,n),_t=i):Ti(t,e,n);break;default:Ti(t,e,n)}}function dv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r1),e.forEach(function(i){var r=p1.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:it=a.stateNode,pn=!1;break e;case 3:it=a.stateNode.containerInfo,pn=!0;break e;case 4:it=a.stateNode.containerInfo,pn=!0;break e}a=a.return}if(it===null)throw Error(U(160));fI(s,o,r),it=null,pn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Ue(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pI(e,t),e=e.sibling}function pI(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),xn(t),i&4){try{Ea(3,t,t.return),wh(3,t)}catch(w){Ue(t,t.return,w)}try{Ea(5,t,t.return)}catch(w){Ue(t,t.return,w)}}break;case 1:dn(e,t),xn(t),i&512&&n!==null&&Ds(n,n.return);break;case 5:if(dn(e,t),xn(t),i&512&&n!==null&&Ds(n,n.return),t.flags&32){var r=t.stateNode;try{Fa(r,"")}catch(w){Ue(t,t.return,w)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&LE(r,s),Df(a,o);var u=Df(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?BE(r,d):h==="dangerouslySetInnerHTML"?jE(r,d):h==="children"?Fa(r,d):om(r,h,d,u)}switch(a){case"input":Cf(r,s);break;case"textarea":VE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Vs(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Vs(r,!!s.multiple,s.defaultValue,!0):Vs(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ka]=s}catch(w){Ue(t,t.return,w)}}break;case 6:if(dn(e,t),xn(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(w){Ue(t,t.return,w)}}break;case 3:if(dn(e,t),xn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{za(e.containerInfo)}catch(w){Ue(t,t.return,w)}break;case 4:dn(e,t),xn(t);break;case 13:dn(e,t),xn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(jm=ze())),i&4&&dv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(u=_t)||h,dn(e,t),_t=u):dn(e,t),xn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(d=$=h;$!==null;){switch(f=$,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ea(4,f,f.return);break;case 1:Ds(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Ue(i,n,w)}}break;case 5:Ds(f,f.return);break;case 22:if(f.memoizedState!==null){pv(d);continue}}g!==null?(g.return=f,$=g):pv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UE("display",o))}catch(w){Ue(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Ue(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dn(e,t),xn(t),i&4&&dv(t);break;case 21:break;default:dn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dI(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Fa(r,""),i.flags&=-33);var s=hv(t);up(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=hv(t);lp(t,a,o);break;default:throw Error(U(161))}}catch(l){Ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function o1(t,e,n){$=t,mI(t)}function mI(t,e,n){for(var i=(t.mode&1)!==0;$!==null;){var r=$,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||mu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||_t;a=mu;var u=_t;if(mu=o,(_t=l)&&!u)for($=r;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?mv(r):l!==null?(l.return=o,$=l):mv(r);for(;s!==null;)$=s,mI(s),s=s.sibling;$=r,mu=a,_t=u}fv(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$=s):fv(t)}}function fv(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||wh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!_t)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&X_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}X_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&za(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}_t||e.flags&512&&ap(e)}catch(f){Ue(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function pv(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function mv(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wh(4,e)}catch(l){Ue(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ue(e,r,l)}}var s=e.return;try{ap(e)}catch(l){Ue(e,s,l)}break;case 5:var o=e.return;try{ap(e)}catch(l){Ue(e,o,l)}}}catch(l){Ue(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var a1=Math.ceil,kc=mi.ReactCurrentDispatcher,Vm=mi.ReactCurrentOwner,sn=mi.ReactCurrentBatchConfig,fe=0,tt=null,He=null,at=0,Ht=0,Ms=cr(0),Ye=0,Za=null,Hr=0,Eh=0,Fm=0,Ta=null,Ot=null,jm=0,eo=1/0,Xn=null,Cc=!1,cp=null,Ki=null,gu=!1,Li=null,Ac=0,Ia=0,hp=null,qu=-1,Ku=0;function Ct(){return fe&6?ze():qu!==-1?qu:qu=ze()}function Gi(t){return t.mode&1?fe&2&&at!==0?at&-at:WA.transition!==null?(Ku===0&&(Ku=ZE()),Ku):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:oT(t.type)),t):1}function _n(t,e,n,i){if(50<Ia)throw Ia=0,hp=null,Error(U(185));_l(t,n,i),(!(fe&2)||t!==tt)&&(t===tt&&(!(fe&2)&&(Eh|=n),Ye===4&&Pi(t,at)),Bt(t,i),n===1&&fe===0&&!(e.mode&1)&&(eo=ze()+500,yh&&hr()))}function Bt(t,e){var n=t.callbackNode;WC(t,e);var i=dc(t,t===tt?at:0);if(i===0)n!==null&&S_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&S_(n),e===1)t.tag===0?$A(gv.bind(null,t)):xT(gv.bind(null,t)),jA(function(){!(fe&6)&&hr()}),n=null;else{switch(eT(i)){case 1:n=hm;break;case 4:n=XE;break;case 16:n=hc;break;case 536870912:n=JE;break;default:n=hc}n=II(n,gI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gI(t,e){if(qu=-1,Ku=0,fe&6)throw Error(U(327));var n=t.callbackNode;if(zs()&&t.callbackNode!==n)return null;var i=dc(t,t===tt?at:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Pc(t,i);else{e=i;var r=fe;fe|=2;var s=_I();(tt!==t||at!==e)&&(Xn=null,eo=ze()+500,Fr(t,e));do try{c1();break}catch(a){yI(t,a)}while(!0);Sm(),kc.current=s,fe=r,He!==null?e=0:(tt=null,at=0,e=Ye)}if(e!==0){if(e===2&&(r=Ff(t),r!==0&&(i=r,e=dp(t,r))),e===1)throw n=Za,Fr(t,0),Pi(t,i),Bt(t,ze()),n;if(e===6)Pi(t,i);else{if(r=t.current.alternate,!(i&30)&&!l1(r)&&(e=Pc(t,i),e===2&&(s=Ff(t),s!==0&&(i=s,e=dp(t,s))),e===1))throw n=Za,Fr(t,0),Pi(t,i),Bt(t,ze()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:kr(t,Ot,Xn);break;case 3:if(Pi(t,i),(i&130023424)===i&&(e=jm+500-ze(),10<e)){if(dc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ct(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=qf(kr.bind(null,t,Ot,Xn),e);break}kr(t,Ot,Xn);break;case 4:if(Pi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-yn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*a1(i/1960))-i,10<i){t.timeoutHandle=qf(kr.bind(null,t,Ot,Xn),i);break}kr(t,Ot,Xn);break;case 5:kr(t,Ot,Xn);break;default:throw Error(U(329))}}}return Bt(t,ze()),t.callbackNode===n?gI.bind(null,t):null}function dp(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(Fr(t,e).flags|=256),t=Pc(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&fp(e)),t}function fp(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function l1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!vn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pi(t,e){for(e&=~Fm,e&=~Eh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),i=1<<n;t[n]=-1,e&=~i}}function gv(t){if(fe&6)throw Error(U(327));zs();var e=dc(t,0);if(!(e&1))return Bt(t,ze()),null;var n=Pc(t,e);if(t.tag!==0&&n===2){var i=Ff(t);i!==0&&(e=i,n=dp(t,i))}if(n===1)throw n=Za,Fr(t,0),Pi(t,e),Bt(t,ze()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kr(t,Ot,Xn),Bt(t,ze()),null}function Um(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(eo=ze()+500,yh&&hr())}}function qr(t){Li!==null&&Li.tag===0&&!(fe&6)&&zs();var e=fe;fe|=1;var n=sn.transition,i=Ee;try{if(sn.transition=null,Ee=1,t)return t()}finally{Ee=i,sn.transition=n,fe=e,!(fe&6)&&hr()}}function Bm(){Ht=Ms.current,Ae(Ms)}function Fr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,FA(n)),He!==null)for(n=He.return;n!==null;){var i=n;switch(Em(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&yc();break;case 3:Js(),Ae(jt),Ae(Et),Pm();break;case 5:Am(i);break;case 4:Js();break;case 13:Ae(De);break;case 19:Ae(De);break;case 10:xm(i.type._context);break;case 22:case 23:Bm()}n=n.return}if(tt=t,He=t=Qi(t.current,null),at=Ht=e,Ye=0,Za=null,Fm=Eh=Hr=0,Ot=Ta=null,Nr!==null){for(e=0;e<Nr.length;e++)if(n=Nr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Nr=null}return t}function yI(t,e){do{var n=He;try{if(Sm(),$u.current=bc,xc){for(var i=Me.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}xc=!1}if(Wr=0,Ze=Ge=Me=null,wa=!1,Ya=0,Vm.current=null,n===null||n.return===null){Ye=1,Za=e,He=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=iv(o);if(g!==null){g.flags&=-257,rv(g,o,a,s,e),g.mode&1&&nv(s,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){nv(s,u,e),zm();break e}l=Error(U(426))}}else if(Pe&&a.mode&1){var I=iv(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),rv(I,o,a,s,e),Tm(Zs(l,a));break e}}s=l=Zs(l,a),Ye!==4&&(Ye=2),Ta===null?Ta=[s]:Ta.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=eI(s,l,e);Y_(s,T);break e;case 1:a=l;var E=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ki===null||!Ki.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=tI(s,a,e);Y_(s,R);break e}}s=s.return}while(s!==null)}wI(n)}catch(M){e=M,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function _I(){var t=kc.current;return kc.current=bc,t===null?bc:t}function zm(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),tt===null||!(Hr&268435455)&&!(Eh&268435455)||Pi(tt,at)}function Pc(t,e){var n=fe;fe|=2;var i=_I();(tt!==t||at!==e)&&(Xn=null,Fr(t,e));do try{u1();break}catch(r){yI(t,r)}while(!0);if(Sm(),fe=n,kc.current=i,He!==null)throw Error(U(261));return tt=null,at=0,Ye}function u1(){for(;He!==null;)vI(He)}function c1(){for(;He!==null&&!OC();)vI(He)}function vI(t){var e=TI(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?wI(t):He=e,Vm.current=null}function wI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=i1(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,He=null;return}}else if(n=n1(n,e,Ht),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ye===0&&(Ye=5)}function kr(t,e,n){var i=Ee,r=sn.transition;try{sn.transition=null,Ee=1,h1(t,e,n,i)}finally{sn.transition=r,Ee=i}return null}function h1(t,e,n,i){do zs();while(Li!==null);if(fe&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(HC(t,s),t===tt&&(He=tt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gu||(gu=!0,II(hc,function(){return zs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sn.transition,sn.transition=null;var o=Ee;Ee=1;var a=fe;fe|=4,Vm.current=null,s1(t,n),pI(n,t),RA(Wf),fc=!!$f,Wf=$f=null,t.current=n,o1(n),LC(),fe=a,Ee=o,sn.transition=s}else t.current=n;if(gu&&(gu=!1,Li=t,Ac=r),s=t.pendingLanes,s===0&&(Ki=null),jC(n.stateNode),Bt(t,ze()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Cc)throw Cc=!1,t=cp,cp=null,t;return Ac&1&&t.tag!==0&&zs(),s=t.pendingLanes,s&1?t===hp?Ia++:(Ia=0,hp=t):Ia=0,hr(),null}function zs(){if(Li!==null){var t=eT(Ac),e=sn.transition,n=Ee;try{if(sn.transition=null,Ee=16>t?16:t,Li===null)var i=!1;else{if(t=Li,Li=null,Ac=0,fe&6)throw Error(U(331));var r=fe;for(fe|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($=u;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:Ea(8,h,s)}var d=h.child;if(d!==null)d.return=h,$=d;else for(;$!==null;){h=$;var f=h.sibling,g=h.return;if(hI(h),h===u){$=null;break}if(f!==null){f.return=g,$=f;break}$=g}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var I=w.sibling;w.sibling=null,w=I}while(w!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ea(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,$=T;break e}$=s.return}}var E=t.current;for($=E;$!==null;){o=$;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,$=b;else e:for(o=E;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wh(9,a)}}catch(M){Ue(a,a.return,M)}if(a===o){$=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,$=R;break e}$=a.return}}if(fe=r,hr(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(dh,t)}catch{}i=!0}return i}finally{Ee=n,sn.transition=e}}return!1}function yv(t,e,n){e=Zs(n,e),e=eI(t,e,1),t=qi(t,e,1),e=Ct(),t!==null&&(_l(t,1,e),Bt(t,e))}function Ue(t,e,n){if(t.tag===3)yv(t,t,n);else for(;e!==null;){if(e.tag===3){yv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ki===null||!Ki.has(i))){t=Zs(n,t),t=tI(e,t,1),e=qi(e,t,1),t=Ct(),e!==null&&(_l(e,1,t),Bt(e,t));break}}e=e.return}}function d1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(at&n)===n&&(Ye===4||Ye===3&&(at&130023424)===at&&500>ze()-jm?Fr(t,0):Fm|=n),Bt(t,e)}function EI(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=Ct();t=ui(t,e),t!==null&&(_l(t,e,n),Bt(t,n))}function f1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EI(t,n)}function p1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),EI(t,n)}var TI;TI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,t1(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Pe&&e.flags&1048576&&bT(e,wc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Hu(t,e),t=e.pendingProps;var r=Qs(e,Et.current);Bs(e,n),r=Nm(null,e,i,t,r,n);var s=Dm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(i)?(s=!0,_c(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,km(e),r.updater=vh,e.stateNode=r,r._reactInternals=e,Zf(e,i,t,n),e=np(null,e,i,!0,s,n)):(e.tag=0,Pe&&s&&wm(e),bt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Hu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=g1(i),t=fn(i,t),r){case 0:e=tp(null,e,i,t,n);break e;case 1:e=av(null,e,i,t,n);break e;case 11:e=sv(null,e,i,t,n);break e;case 14:e=ov(null,e,i,fn(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),tp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),av(t,e,i,r,n);case 3:e:{if(sI(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,NT(t,e),Ic(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Zs(Error(U(423)),e),e=lv(t,e,i,n,r);break e}else if(i!==r){r=Zs(Error(U(424)),e),e=lv(t,e,i,n,r);break e}else for(qt=Hi(e.stateNode.containerInfo.firstChild),Gt=e,Pe=!0,mn=null,n=PT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),i===r){e=ci(t,e,n);break e}bt(t,e,i,n)}e=e.child}return e;case 5:return DT(e),t===null&&Yf(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Hf(i,r)?o=null:s!==null&&Hf(i,s)&&(e.flags|=32),rI(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&Yf(e),null;case 13:return oI(t,e,n);case 4:return Cm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Xs(e,null,i,n):bt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),sv(t,e,i,r,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Se(Ec,i._currentValue),i._currentValue=o,s!==null)if(vn(s.value,o)){if(s.children===r.children&&!jt.current){e=ci(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=si(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Bs(e,n),r=ln(r),i=i(r),e.flags|=1,bt(t,e,i,n),e.child;case 14:return i=e.type,r=fn(i,e.pendingProps),r=fn(i.type,r),ov(t,e,i,r,n);case 15:return nI(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),Hu(t,e),e.tag=1,Ut(i)?(t=!0,_c(e)):t=!1,Bs(e,n),ZT(e,i,r),Zf(e,i,r,n),np(null,e,i,!0,t,n);case 19:return aI(t,e,n);case 22:return iI(t,e,n)}throw Error(U(156,e.tag))};function II(t,e){return YE(t,e)}function m1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,i){return new m1(t,e,n,i)}function $m(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g1(t){if(typeof t=="function")return $m(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lm)return 11;if(t===um)return 14}return 2}function Qi(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")$m(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ss:return jr(n.children,r,s,e);case am:o=8,r|=8;break;case If:return t=nn(12,n,e,r|2),t.elementType=If,t.lanes=s,t;case Sf:return t=nn(13,n,e,r),t.elementType=Sf,t.lanes=s,t;case xf:return t=nn(19,n,e,r),t.elementType=xf,t.lanes=s,t;case DE:return Th(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RE:o=10;break e;case NE:o=9;break e;case lm:o=11;break e;case um:o=14;break e;case ki:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=nn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function jr(t,e,n,i){return t=nn(7,t,i,e),t.lanes=n,t}function Th(t,e,n,i){return t=nn(22,t,i,e),t.elementType=DE,t.lanes=n,t.stateNode={isHidden:!1},t}function Hd(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function qd(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function y1(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Wm(t,e,n,i,r,s,o,a,l){return t=new y1(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},km(s),t}function _1(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function SI(t){if(!t)return ir;t=t._reactInternals;e:{if(ss(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ut(n))return ST(t,n,e)}return e}function xI(t,e,n,i,r,s,o,a,l){return t=Wm(n,i,!0,t,r,s,o,a,l),t.context=SI(null),n=t.current,i=Ct(),r=Gi(n),s=si(i,r),s.callback=e??null,qi(n,s,r),t.current.lanes=r,_l(t,r,i),Bt(t,i),t}function Ih(t,e,n,i){var r=e.current,s=Ct(),o=Gi(r);return n=SI(n),e.context===null?e.context=n:e.pendingContext=n,e=si(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=qi(r,e,o),t!==null&&(_n(t,r,o,s),zu(t,r,o)),o}function Rc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _v(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hm(t,e){_v(t,e),(t=t.alternate)&&_v(t,e)}function v1(){return null}var bI=typeof reportError=="function"?reportError:function(t){console.error(t)};function qm(t){this._internalRoot=t}Sh.prototype.render=qm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ih(t,e,null,null)};Sh.prototype.unmount=qm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qr(function(){Ih(null,t,null,null)}),e[li]=null}};function Sh(t){this._internalRoot=t}Sh.prototype.unstable_scheduleHydration=function(t){if(t){var e=iT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ai.length&&e!==0&&e<Ai[n].priority;n++);Ai.splice(n,0,t),n===0&&sT(t)}};function Km(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vv(){}function w1(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Rc(o);s.call(u)}}var o=xI(e,i,t,0,null,!1,!1,"",vv);return t._reactRootContainer=o,t[li]=o.current,Ha(t.nodeType===8?t.parentNode:t),qr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Rc(l);a.call(u)}}var l=Wm(t,0,!1,null,null,!1,!1,"",vv);return t._reactRootContainer=l,t[li]=l.current,Ha(t.nodeType===8?t.parentNode:t),qr(function(){Ih(e,l,n,i)}),l}function bh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Rc(o);a.call(l)}}Ih(e,o,t,r)}else o=w1(n,e,t,r,i);return Rc(o)}tT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ia(e.pendingLanes);n!==0&&(dm(e,n|1),Bt(e,ze()),!(fe&6)&&(eo=ze()+500,hr()))}break;case 13:qr(function(){var i=ui(t,1);if(i!==null){var r=Ct();_n(i,t,1,r)}}),Hm(t,1)}};fm=function(t){if(t.tag===13){var e=ui(t,134217728);if(e!==null){var n=Ct();_n(e,t,134217728,n)}Hm(t,134217728)}};nT=function(t){if(t.tag===13){var e=Gi(t),n=ui(t,e);if(n!==null){var i=Ct();_n(n,t,e,i)}Hm(t,e)}};iT=function(){return Ee};rT=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Of=function(t,e,n){switch(e){case"input":if(Cf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=gh(i);if(!r)throw Error(U(90));OE(i),Cf(i,r)}}}break;case"textarea":VE(t,n);break;case"select":e=n.value,e!=null&&Vs(t,!!n.multiple,e,!1)}};WE=Um;HE=qr;var E1={usingClientEntryPoint:!1,Events:[wl,Cs,gh,zE,$E,Um]},Ho={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T1={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||v1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{dh=yu.inject(T1),Dn=yu}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E1;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(e))throw Error(U(200));return _1(t,e,null,n)};Xt.createRoot=function(t,e){if(!Km(t))throw Error(U(299));var n=!1,i="",r=bI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Wm(t,1,!1,null,null,n,!1,i,r),t[li]=e.current,Ha(t.nodeType===8?t.parentNode:t),new qm(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=GE(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return qr(t)};Xt.hydrate=function(t,e,n){if(!xh(e))throw Error(U(200));return bh(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Km(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=bI;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xI(e,null,t,1,n??null,r,!1,s,o),t[li]=e.current,Ha(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Sh(e)};Xt.render=function(t,e,n){if(!xh(e))throw Error(U(200));return bh(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!xh(t))throw Error(U(40));return t._reactRootContainer?(qr(function(){bh(null,null,t,!1,function(){t._reactRootContainer=null,t[li]=null})}),!0):!1};Xt.unstable_batchedUpdates=Um;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!xh(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return bh(t,e,n,!1,i)};Xt.version="18.3.1-next-f1338f8080-20240426";function kI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kI)}catch(t){console.error(t)}}kI(),kE.exports=Xt;var I1=kE.exports,wv=I1;Ef.createRoot=wv.createRoot,Ef.hydrateRoot=wv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},el.apply(this,arguments)}var Vi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vi||(Vi={}));const Ev="popstate";function S1(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return pp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Nc(r)}return b1(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x1(){return Math.random().toString(36).substr(2,8)}function Tv(t,e){return{usr:t.state,key:t.key,idx:e}}function pp(t,e,n,i){return n===void 0&&(n=null),el({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?go(e):e,{state:n,key:e&&e.key||i||x1()})}function Nc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function b1(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Vi.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(el({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Vi.Pop;let I=h(),T=I==null?null:I-u;u=I,l&&l({action:a,location:w.location,delta:T})}function f(I,T){a=Vi.Push;let E=pp(w.location,I,T);u=h()+1;let b=Tv(E,u),R=w.createHref(E);try{o.pushState(b,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(R)}s&&l&&l({action:a,location:w.location,delta:1})}function g(I,T){a=Vi.Replace;let E=pp(w.location,I,T);u=h();let b=Tv(E,u),R=w.createHref(E);o.replaceState(b,"",R),s&&l&&l({action:a,location:w.location,delta:0})}function v(I){let T=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof I=="string"?I:Nc(I);return E=E.replace(/ $/,"%20"),Oe(T,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,T)}let w={get action(){return a},get location(){return t(r,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Ev,d),l=I,()=>{r.removeEventListener(Ev,d),l=null}},createHref(I){return e(r,I)},createURL:v,encodeLocation(I){let T=v(I);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:g,go(I){return o.go(I)}};return w}var Iv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Iv||(Iv={}));function k1(t,e,n){return n===void 0&&(n="/"),C1(t,e,n)}function C1(t,e,n,i){let r=typeof e=="string"?go(e):e,s=to(r.pathname||"/",n);if(s==null)return null;let o=CI(t);A1(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=U1(s);a=F1(o[l],u)}return a}function CI(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Yi([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Oe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),CI(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:L1(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of AI(s.path))r(s,o,l)}),e}function AI(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=AI(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function A1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:V1(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const P1=/^:[\w-]+$/,R1=3,N1=2,D1=1,M1=10,O1=-2,Sv=t=>t==="*";function L1(t,e){let n=t.split("/"),i=n.length;return n.some(Sv)&&(i+=O1),e&&(i+=N1),n.filter(r=>!Sv(r)).reduce((r,s)=>r+(P1.test(s)?R1:s===""?D1:M1),i)}function V1(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function F1(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=mp({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Yi([s,d.pathname]),pathnameBase:H1(Yi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Yi([s,d.pathnameBase]))}return o}function mp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=j1(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[d];return g&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function j1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Gm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function U1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function to(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const B1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z1=t=>B1.test(t);function $1(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?go(t):t,s;if(n)if(z1(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Gm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=xv(n.substring(1),"/"):s=xv(n,e)}else s=e;return{pathname:s,search:q1(i),hash:K1(r)}}function xv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Kd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function W1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qm(t,e){let n=W1(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Ym(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=go(t):(r=el({},t),Oe(!r.pathname||!r.pathname.includes("?"),Kd("?","pathname","search",r)),Oe(!r.pathname||!r.pathname.includes("#"),Kd("#","pathname","hash",r)),Oe(!r.search||!r.search.includes("#"),Kd("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=$1(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Yi=t=>t.join("/").replace(/\/\/+/g,"/"),H1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,K1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function G1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const PI=["post","put","patch","delete"];new Set(PI);const Q1=["get",...PI];new Set(Q1);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tl.apply(this,arguments)}const kh=O.createContext(null),RI=O.createContext(null),gi=O.createContext(null),Ch=O.createContext(null),dr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),NI=O.createContext(null);function Y1(t,e){let{relative:n}=e===void 0?{}:e;yo()||Oe(!1);let{basename:i,navigator:r}=O.useContext(gi),{hash:s,pathname:o,search:a}=Ah(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Yi([i,o])),r.createHref({pathname:l,search:a,hash:s})}function yo(){return O.useContext(Ch)!=null}function fr(){return yo()||Oe(!1),O.useContext(Ch).location}function DI(t){O.useContext(gi).static||O.useLayoutEffect(t)}function _o(){let{isDataRoute:t}=O.useContext(dr);return t?uP():X1()}function X1(){yo()||Oe(!1);let t=O.useContext(kh),{basename:e,future:n,navigator:i}=O.useContext(gi),{matches:r}=O.useContext(dr),{pathname:s}=fr(),o=JSON.stringify(Qm(r,n.v7_relativeSplatPath)),a=O.useRef(!1);return DI(()=>{a.current=!0}),O.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=Ym(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Yi([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function Ah(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(gi),{matches:r}=O.useContext(dr),{pathname:s}=fr(),o=JSON.stringify(Qm(r,i.v7_relativeSplatPath));return O.useMemo(()=>Ym(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function J1(t,e){return Z1(t,e)}function Z1(t,e,n,i){yo()||Oe(!1);let{navigator:r}=O.useContext(gi),{matches:s}=O.useContext(dr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=fr(),h;if(e){var d;let I=typeof e=="string"?go(e):e;l==="/"||(d=I.pathname)!=null&&d.startsWith(l)||Oe(!1),h=I}else h=u;let f=h.pathname||"/",g=f;if(l!=="/"){let I=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let v=k1(t,{pathname:g}),w=rP(v&&v.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Yi([l,r.encodeLocation?r.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Yi([l,r.encodeLocation?r.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,i);return e&&w?O.createElement(Ch.Provider,{value:{location:tl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Vi.Pop}},w):w}function eP(){let t=lP(),e=G1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const tP=O.createElement(eP,null);class nP extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(dr.Provider,{value:this.props.routeContext},O.createElement(NI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iP(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(kh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(dr.Provider,{value:e},i)}function rP(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Oe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:g}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,v=!1,w=null,I=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||tP,l&&(u<0&&f===0?(cP("route-fallback"),v=!0,I=null):u===f&&(v=!0,I=d.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,f+1)),E=()=>{let b;return g?b=w:v?b=I:d.route.Component?b=O.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,O.createElement(iP,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(nP,{location:n.location,revalidation:n.revalidation,component:w,error:g,children:E(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):E()},null)}var MI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(MI||{}),OI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(OI||{});function sP(t){let e=O.useContext(kh);return e||Oe(!1),e}function oP(t){let e=O.useContext(RI);return e||Oe(!1),e}function aP(t){let e=O.useContext(dr);return e||Oe(!1),e}function LI(t){let e=aP(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function lP(){var t;let e=O.useContext(NI),n=oP(),i=LI();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function uP(){let{router:t}=sP(MI.UseNavigateStable),e=LI(OI.UseNavigateStable),n=O.useRef(!1);return DI(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,tl({fromRouteId:e},s)))},[t,e])}const bv={};function cP(t,e,n){bv[t]||(bv[t]=!0)}function hP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gp(t){let{to:e,replace:n,state:i,relative:r}=t;yo()||Oe(!1);let{future:s,static:o}=O.useContext(gi),{matches:a}=O.useContext(dr),{pathname:l}=fr(),u=_o(),h=Ym(e,Qm(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return O.useEffect(()=>u(JSON.parse(d),{replace:n,state:i,relative:r}),[u,d,r,n,i]),null}function kn(t){Oe(!1)}function dP(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Vi.Pop,navigator:s,static:o=!1,future:a}=t;yo()&&Oe(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:o,future:tl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=go(i));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:v="default"}=i,w=O.useMemo(()=>{let I=to(h,l);return I==null?null:{location:{pathname:I,search:d,hash:f,state:g,key:v},navigationType:r}},[l,h,d,f,g,v,r]);return w==null?null:O.createElement(gi.Provider,{value:u},O.createElement(Ch.Provider,{children:n,value:w}))}function fP(t){let{children:e,location:n}=t;return J1(yp(e),n)}new Promise(()=>{});function yp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,yp(i.props.children,s));return}i.type!==kn&&Oe(!1),!i.props.index||!i.props.children||Oe(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=yp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Dc.apply(this,arguments)}function VI(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function pP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mP(t,e){return t.button===0&&(!e||e==="_self")&&!pP(t)}const gP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_P="6";try{window.__reactRouterVersion=_P}catch{}const vP=O.createContext({isTransitioning:!1}),wP="startTransition",kv=dC[wP];function EP(t){let{basename:e,children:n,future:i,window:r}=t,s=O.useRef();s.current==null&&(s.current=S1({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=O.useCallback(d=>{u&&kv?kv(()=>l(d)):l(d)},[l,u]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>hP(i),[i]),O.createElement(dP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const TP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nl=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d}=e,f=VI(e,gP),{basename:g}=O.useContext(gi),v,w=!1;if(typeof u=="string"&&IP.test(u)&&(v=u,TP))try{let b=new URL(window.location.href),R=u.startsWith("//")?new URL(b.protocol+u):new URL(u),M=to(R.pathname,g);R.origin===b.origin&&M!=null?u=M+R.search+R.hash:w=!0}catch{}let I=Y1(u,{relative:r}),T=xP(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function E(b){i&&i(b),b.defaultPrevented||T(b)}return O.createElement("a",Dc({},f,{href:v||I,onClick:w||s?i:E,ref:n,target:l}))}),gs=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,d=VI(e,yP),f=Ah(l,{relative:d.relative}),g=fr(),v=O.useContext(RI),{navigator:w,basename:I}=O.useContext(gi),T=v!=null&&bP(f)&&u===!0,E=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,b=g.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(b=b.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&I&&(R=to(R,I)||R);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let N=b===E||!o&&b.startsWith(E)&&b.charAt(M)==="/",S=R!=null&&(R===E||!o&&R.startsWith(E)&&R.charAt(E.length)==="/"),_={isActive:N,isPending:S,isTransitioning:T},k=N?i:void 0,C;typeof s=="function"?C=s(_):C=[s,N?"active":null,S?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(_):a;return O.createElement(nl,Dc({},d,{"aria-current":k,className:C,ref:n,style:P,to:l,viewTransition:u}),typeof h=="function"?h(_):h)});var _p;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_p||(_p={}));var Cv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Cv||(Cv={}));function SP(t){let e=O.useContext(kh);return e||Oe(!1),e}function xP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=_o(),u=fr(),h=Ah(t,{relative:o});return O.useCallback(d=>{if(mP(d,n)){d.preventDefault();let f=i!==void 0?i:Nc(u)===Nc(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,n,t,s,o,a])}function bP(t,e){e===void 0&&(e={});let n=O.useContext(vP);n==null&&Oe(!1);let{basename:i}=SP(_p.useViewTransitionState),r=Ah(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=to(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=to(n.nextLocation.pathname,i)||n.nextLocation.pathname;return mp(r.pathname,o)!=null||mp(r.pathname,s)!=null}var Av={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),i.push(n[h],n[d],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||d==null)throw new CP;const f=s<<2|a>>4;if(i.push(f),u!==64){const g=a<<4&240|u>>2;if(i.push(g),d!==64){const v=u<<6&192|d;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AP=function(t){const e=FI(t);return jI.encodeByteArray(e,!0)},Mc=function(t){return AP(t).replace(/\./g,"")},UI=function(t){try{return jI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=()=>PP().__FIREBASE_DEFAULTS__,NP=()=>{if(typeof process>"u"||typeof Av>"u")return;const t=Av.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UI(t[1]);return e&&JSON.parse(e)},Ph=()=>{try{return RP()||NP()||DP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BI=t=>{var e,n;return(n=(e=Ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},MP=t=>{const e=BI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},zI=()=>{var t;return(t=Ph())===null||t===void 0?void 0:t.config},$I=t=>{var e;return(e=Ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mc(JSON.stringify(n)),Mc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function FP(){var t;const e=(t=Ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BP(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zP(){return!FP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HI(){try{return typeof indexedDB=="object"}catch{return!1}}function qI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function $P(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="FirebaseError";class In extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=WP,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,os.prototype.create)}}class os{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?HP(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new In(r,a,i)}}function HP(t,e){return t.replace(qP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const qP=/\{\$([^}]+)}/g;function KP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Pv(s)&&Pv(o)){if(!Oc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Pv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function oa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function GP(t,e){const n=new QP(t,e);return n.subscribe.bind(n)}class QP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");YP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Gd),r.error===void 0&&(r.error=Gd),r.complete===void 0&&(r.complete=Gd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1e3,JP=2,ZP=4*60*60*1e3,eR=.5;function Rv(t,e=XP,n=JP){const i=e*Math.pow(n,t),r=Math.round(eR*i*(Math.random()-.5)*2);return Math.min(ZP,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return t&&t._delegate?t._delegate:t}class wn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new OP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iR(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cr){return this.instances.has(e)}getOptions(e=Cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:nR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Cr){return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nR(t){return t===Cr?void 0:t}function iR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const sR={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},oR=ue.INFO,aR={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},lR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=aR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rh{constructor(e){this.name=e,this._logLevel=oR,this._logHandler=lR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const uR=(t,e)=>e.some(n=>t instanceof n);let Nv,Dv;function cR(){return Nv||(Nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hR(){return Dv||(Dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KI=new WeakMap,vp=new WeakMap,GI=new WeakMap,Qd=new WeakMap,Xm=new WeakMap;function dR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&KI.set(n,t)}).catch(()=>{}),Xm.set(e,t),e}function fR(t){if(vp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vp.set(t,e)}let wp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pR(t){wp=t(wp)}function mR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Yd(this),e,...n);return GI.set(i,e.sort?e.sort():[e]),Xi(i)}:hR().includes(t)?function(...e){return t.apply(Yd(this),e),Xi(KI.get(this))}:function(...e){return Xi(t.apply(Yd(this),e))}}function gR(t){return typeof t=="function"?mR(t):(t instanceof IDBTransaction&&fR(t),uR(t,cR())?new Proxy(t,wp):t)}function Xi(t){if(t instanceof IDBRequest)return dR(t);if(Qd.has(t))return Qd.get(t);const e=gR(t);return e!==t&&(Qd.set(t,e),Xm.set(e,t)),e}const Yd=t=>Xm.get(t);function QI(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Xi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Xi(o.result),l.oldVersion,l.newVersion,Xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const yR=["get","getKey","getAll","getAllKeys","count"],_R=["put","add","delete","clear"],Xd=new Map;function Mv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xd.get(e))return Xd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=_R.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||yR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return Xd.set(e,s),s}pR(t=>({...t,get:(e,n,i)=>Mv(e,n)||t.get(e,n,i),has:(e,n)=>!!Mv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ep="@firebase/app",Ov="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Rh("@firebase/app"),ER="@firebase/app-compat",TR="@firebase/analytics-compat",IR="@firebase/analytics",SR="@firebase/app-check-compat",xR="@firebase/app-check",bR="@firebase/auth",kR="@firebase/auth-compat",CR="@firebase/database",AR="@firebase/data-connect",PR="@firebase/database-compat",RR="@firebase/functions",NR="@firebase/functions-compat",DR="@firebase/installations",MR="@firebase/installations-compat",OR="@firebase/messaging",LR="@firebase/messaging-compat",VR="@firebase/performance",FR="@firebase/performance-compat",jR="@firebase/remote-config",UR="@firebase/remote-config-compat",BR="@firebase/storage",zR="@firebase/storage-compat",$R="@firebase/firestore",WR="@firebase/vertexai-preview",HR="@firebase/firestore-compat",qR="firebase",KR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="[DEFAULT]",GR={[Ep]:"fire-core",[ER]:"fire-core-compat",[IR]:"fire-analytics",[TR]:"fire-analytics-compat",[xR]:"fire-app-check",[SR]:"fire-app-check-compat",[bR]:"fire-auth",[kR]:"fire-auth-compat",[CR]:"fire-rtdb",[AR]:"fire-data-connect",[PR]:"fire-rtdb-compat",[RR]:"fire-fn",[NR]:"fire-fn-compat",[DR]:"fire-iid",[MR]:"fire-iid-compat",[OR]:"fire-fcm",[LR]:"fire-fcm-compat",[VR]:"fire-perf",[FR]:"fire-perf-compat",[jR]:"fire-rc",[UR]:"fire-rc-compat",[BR]:"fire-gcs",[zR]:"fire-gcs-compat",[$R]:"fire-fst",[HR]:"fire-fst-compat",[WR]:"fire-vertex","fire-js":"fire-js",[qR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,QR=new Map,Ip=new Map;function Lv(t,e){try{t.container.addComponent(e)}catch(n){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Un(t){const e=t.name;if(Ip.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,t);for(const n of Lc.values())Lv(n,t);for(const n of QR.values())Lv(n,t);return!0}function Il(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new os("app","Firebase",YR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=KR;function YI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Tp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ji.create("bad-app-name",{appName:String(r)});if(n||(n=zI()),!n)throw Ji.create("no-options");const s=Lc.get(r);if(s){if(Oc(n,s.options)&&Oc(i,s.config))return s;throw Ji.create("duplicate-app",{appName:r})}const o=new rR(r);for(const l of Ip.values())o.addComponent(l);const a=new XR(n,i,o);return Lc.set(r,a),a}function XI(t=Tp){const e=Lc.get(t);if(!e&&t===Tp&&zI())return YI();if(!e)throw Ji.create("no-app",{appName:t});return e}function on(t,e,n){var i;let r=(i=GR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(a.join(" "));return}Un(new wn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="firebase-heartbeat-database",ZR=1,il="firebase-heartbeat-store";let Jd=null;function JI(){return Jd||(Jd=QI(JR,ZR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(il)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),Jd}async function eN(t){try{const n=(await JI()).transaction(il),i=await n.objectStore(il).get(ZI(t));return await n.done,i}catch(e){if(e instanceof In)hi.warn(e.message);else{const n=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(n.message)}}}async function Vv(t,e){try{const i=(await JI()).transaction(il,"readwrite");await i.objectStore(il).put(e,ZI(t)),await i.done}catch(n){if(n instanceof In)hi.warn(n.message);else{const i=Ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(i.message)}}}function ZI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1024,nN=30*24*60*60*1e3;class iN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Fv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=nN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){hi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fv(),{heartbeatsToSend:i,unsentEntries:r}=rN(this._heartbeatsCache.heartbeats),s=Mc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return hi.warn(n),""}}}function Fv(){return new Date().toISOString().substring(0,10)}function rN(t,e=tN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),jv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),jv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class sN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HI()?qI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jv(t){return Mc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){Un(new wn("platform-logger",e=>new vR(e),"PRIVATE")),Un(new wn("heartbeat",e=>new iN(e),"PRIVATE")),on(Ep,Ov,t),on(Ep,Ov,"esm2017"),on("fire-js","")}oN("");function Jm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function eS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aN=eS,tS=new os("auth","Firebase",eS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new Rh("@firebase/auth");function lN(t,...e){Vc.logLevel<=ue.WARN&&Vc.warn(`Auth (${vo}): ${t}`,...e)}function Qu(t,...e){Vc.logLevel<=ue.ERROR&&Vc.error(`Auth (${vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,...e){throw Zm(t,...e)}function On(t,...e){return Zm(t,...e)}function nS(t,e,n){const i=Object.assign(Object.assign({},aN()),{[e]:n});return new os("auth","Firebase",i).create(e,{appName:t.name})}function oi(t){return nS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return tS.create(t,...e)}function Z(t,e,...n){if(!t)throw Zm(e,...n)}function ni(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qu(e),new Error(e)}function di(t,e){t||ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uN(){return Uv()==="http:"||Uv()==="https:"}function Uv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uN()||WI()||"connection"in navigator)?navigator.onLine:!0}function hN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n){this.shortDelay=e,this.longDelay=n,di(n>e,"Short delay should be less than long delay!"),this.isMobile=VP()||UP()}get(){return cN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t,e){di(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new Sl(3e4,6e4);function yi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Wn(t,e,n,i,r={}){return rS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Tl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return jP()||(u.referrerPolicy="no-referrer"),iS.fetch()(sS(t,t.config.apiHost,n,a),u)})}async function rS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},dN),e);try{const r=new mN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _u(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw _u(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw _u(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw nS(t,h,u);En(t,h)}}catch(r){if(r instanceof In)throw r;En(t,"network-request-failed",{message:String(r)})}}async function xl(t,e,n,i,r={}){const s=await Wn(t,e,n,i,r);return"mfaPendingCredential"in s&&En(t,"multi-factor-auth-required",{_serverResponse:s}),s}function sS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?eg(t.config,r):`${t.config.apiScheme}://${r}`}function pN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(On(this.auth,"network-request-failed")),fN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _u(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=On(t,e,i);return r.customData._tokenResponse=n,r}function Bv(t){return t!==void 0&&t.enterprise!==void 0}class gN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function yN(t,e){return Wn(t,"GET","/v2/recaptchaConfig",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(t,e){return Wn(t,"POST","/v1/accounts:delete",e)}async function oS(t,e){return Wn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vN(t,e=!1){const n=Ve(t),i=await n.getIdToken(e),r=tg(i);Z(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Sa(Zd(r.auth_time)),issuedAtTime:Sa(Zd(r.iat)),expirationTime:Sa(Zd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zd(t){return Number(t)*1e3}function tg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const r=UI(n);return r?JSON.parse(r):(Qu("Failed to decode base64 JWT payload"),null)}catch(r){return Qu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function zv(t){const e=tg(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof In&&wN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function wN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sa(this.lastLoginAt),this.creationTime=Sa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await no(t,oS(n,{idToken:i}));Z(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aS(s.providerUserInfo):[],a=IN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function TN(t){const e=Ve(t);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function aS(t){return t.map(e=>{var{providerId:n}=e,i=Jm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e){const n=await rS(t,{},async()=>{const i=Tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=sS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",iS.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xN(t,e){return Wn(t,"POST","/v2/accounts:revokeToken",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=zv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await SN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new $s;return i&&(Z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Z(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ii{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Jm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await no(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vN(this,e)}reload(){return TN(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(oi(this.auth));const e=await this.getIdToken();return await no(this,_N(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(u=n.createdAt)!==null&&u!==void 0?u:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:R,isAnonymous:M,providerData:N,stsTokenManager:S}=n;Z(b&&S,e,"internal-error");const _=$s.fromJSON(this.name,S);Z(typeof b=="string",e,"internal-error"),Ii(d,e.name),Ii(f,e.name),Z(typeof R=="boolean",e,"internal-error"),Z(typeof M=="boolean",e,"internal-error"),Ii(g,e.name),Ii(v,e.name),Ii(w,e.name),Ii(I,e.name),Ii(T,e.name),Ii(E,e.name);const k=new ii({uid:b,auth:e,email:f,emailVerified:R,displayName:d,isAnonymous:M,photoURL:v,phoneNumber:g,tenantId:w,stsTokenManager:_,createdAt:T,lastLoginAt:E});return N&&Array.isArray(N)&&(k.providerData=N.map(C=>Object.assign({},C))),I&&(k._redirectEventId=I),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new $s;r.updateFromServerResponse(n);const s=new ii({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Fc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Z(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?aS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new $s;a.updateFromIdToken(i);const l=new ii({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new xp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;function ri(t){di(t instanceof Function,"Expected a class definition");let e=$v.get(t);return e?(di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$v.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lS.type="NONE";const Wv=lS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ws{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Yu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Yu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ii._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ws(ri(Wv),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||ri(Wv);const o=Yu(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=ii._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ws(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ws(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pS(e))return"Blackberry";if(mS(e))return"Webos";if(cS(e))return"Safari";if((e.includes("chrome/")||hS(e))&&!e.includes("edge/"))return"Chrome";if(fS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function uS(t=Tt()){return/firefox\//i.test(t)}function cS(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hS(t=Tt()){return/crios\//i.test(t)}function dS(t=Tt()){return/iemobile/i.test(t)}function fS(t=Tt()){return/android/i.test(t)}function pS(t=Tt()){return/blackberry/i.test(t)}function mS(t=Tt()){return/webos/i.test(t)}function ng(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bN(t=Tt()){var e;return ng(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kN(){return BP()&&document.documentMode===10}function gS(t=Tt()){return ng(t)||fS(t)||mS(t)||pS(t)||/windows phone/i.test(t)||dS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e=[]){let n;switch(t){case"Browser":n=Hv(Tt());break;case"Worker":n=`${Hv(Tt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e={}){return Wn(t,"GET","/v2/passwordPolicy",yi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=6;class RN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new CN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ri(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ws.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oS(this,{idToken:e}),i=await ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(oi(this));const n=e?Ve(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AN(this),n=new RN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new os("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await xN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ri(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Ws.create(this,[ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&lN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function pr(t){return Ve(t)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=GP(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DN(t){Nh=t}function _S(t){return Nh.loadJS(t)}function MN(){return Nh.recaptchaEnterpriseScript}function ON(){return Nh.gapiScript}function LN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const VN="recaptcha-enterprise",FN="NO_RECAPTCHA";class jN{constructor(e){this.type=VN,this.auth=pr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{yN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new gN(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;Bv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(FN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&Bv(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=MN();l.length!==0&&(l+=a),_S(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Kv(t,e,n,i=!1){const r=new jN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function jc(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Kv(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Kv(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t,e){const n=Il(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Oc(s,e??{}))return r;En(r,"already-initialized")}return n.initialize({options:e})}function BN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ri);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function zN(t,e,n){const i=pr(t);Z(i._canInitEmulator,i,"emulator-config-failed"),Z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=vS(e),{host:o,port:a}=$N(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),WN()}function vS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $N(t){const e=vS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Gv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Gv(o)}}}function Gv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,n){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}async function HN(t,e){return Wn(t,"POST","/v1/accounts:update",e)}async function qN(t,e){return Wn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e){return xl(t,"POST","/v1/accounts:signInWithPassword",yi(t,e))}async function GN(t,e){return Wn(t,"POST","/v1/accounts:sendOobCode",yi(t,e))}async function QN(t,e){return GN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e){return xl(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}async function XN(t,e){return xl(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends ig{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new rl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new rl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jc(e,n,"signInWithPassword",KN);case"emailLink":return YN(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jc(e,i,"signUpPassword",qN);case"emailLink":return XN(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e){return xl(t,"POST","/v1/accounts:signInWithIdp",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="http://localhost";class Kr extends ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Kr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Jm(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Kr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Hs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hs(e,n)}buildRequest(){const e={requestUri:JN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eD(t){const e=sa(oa(t)).link,n=e?sa(oa(e)).deep_link_id:null,i=sa(oa(t)).deep_link_id;return(i?sa(oa(i)).link:null)||i||n||e||t}class rg{constructor(e){var n,i,r,s,o,a;const l=sa(oa(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=ZN((r=l.mode)!==null&&r!==void 0?r:null);Z(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=eD(e);try{return new rg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.providerId=as.PROVIDER_ID}static credential(e,n){return rl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=rg.parseLink(n);return Z(i,"argument-error"),rl._fromEmailAndCode(e,i.code,i.tenantId)}}as.PROVIDER_ID="password";as.EMAIL_PASSWORD_SIGN_IN_METHOD="password";as.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends wS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends bl{constructor(){super("facebook.com")}static credential(e){return Kr._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Kr._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ni.credential(n,i)}catch{return null}}}Ni.GOOGLE_SIGN_IN_METHOD="google.com";Ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends bl{constructor(){super("github.com")}static credential(e){return Kr._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.GITHUB_SIGN_IN_METHOD="github.com";Di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends bl{constructor(){super("twitter.com")}static credential(e,n){return Kr._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(t,e){return xl(t,"POST","/v1/accounts:signUp",yi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ii._fromIdTokenResponse(e,i,r),o=Qv(i);return new Gr({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Qv(i);return new Gr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Qv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends In{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Uc(e,n,i,r)}}function ES(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Uc._fromErrorAndOperation(t,s,e,i):s})}async function nD(t,e,n=!1){const i=await no(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Gr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(t,e,n=!1){const{auth:i}=t;if(Nn(i.app))return Promise.reject(oi(i));const r="reauthenticate";try{const s=await no(t,ES(i,r,e,t),n);Z(s.idToken,i,"internal-error");const o=tg(s.idToken);Z(o,i,"internal-error");const{sub:a}=o;return Z(t.uid===a,i,"user-mismatch"),Gr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&En(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(t,e,n=!1){if(Nn(t.app))return Promise.reject(oi(t));const i="signIn",r=await ES(t,i,e),s=await Gr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function iD(t,e){return IS(pr(t),e)}async function rD(t,e){return TS(Ve(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(t){const e=pr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sD(t,e,n){const i=pr(t);await jc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",QN)}async function oD(t,e,n){if(Nn(t.app))return Promise.reject(oi(t));const i=pr(t),o=await jc(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&SS(t),l}),a=await Gr._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function aD(t,e,n){return Nn(t.app)?Promise.reject(oi(t)):iD(Ve(t),as.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&SS(t),i})}function lD(t,e){return uD(Ve(t),null,e)}async function uD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await no(t,HN(i,s));await t._updateTokensIfNecessary(o,!0)}function cD(t,e,n,i){return Ve(t).onIdTokenChanged(e,n,i)}function hD(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function dD(t,e,n,i){return Ve(t).onAuthStateChanged(e,n,i)}function fD(t){return Ve(t).signOut()}const Bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bc,"1"),this.storage.removeItem(Bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=1e3,mD=10;class bS extends xS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);kN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,mD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},pD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bS.type="LOCAL";const gD=bS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS extends xS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kS.type="SESSION";const CS=kS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Dh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await yD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=sg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function vD(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function wD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ED(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TD(){return AS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="firebaseLocalStorageDb",ID=1,zc="firebaseLocalStorage",RS="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mh(t,e){return t.transaction([zc],e?"readwrite":"readonly").objectStore(zc)}function SD(){const t=indexedDB.deleteDatabase(PS);return new kl(t).toPromise()}function bp(){const t=indexedDB.open(PS,ID);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(zc,{keyPath:RS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(zc)?e(i):(i.close(),await SD(),e(await bp()))})})}async function Yv(t,e,n){const i=Mh(t,!0).put({[RS]:e,value:n});return new kl(i).toPromise()}async function xD(t,e){const n=Mh(t,!1).get(e),i=await new kl(n).toPromise();return i===void 0?null:i.value}function Xv(t,e){const n=Mh(t,!0).delete(e);return new kl(n).toPromise()}const bD=800,kD=3;class NS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>kD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dh._getInstance(TD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wD(),!this.activeServiceWorker)return;this.sender=new _D(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ED()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await Yv(e,Bc,"1"),await Xv(e,Bc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Yv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>xD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Mh(r,!1).getAll();return new kl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NS.type="LOCAL";const CD=NS;new Sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t,e){return e?ri(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PD(t){return IS(t.auth,new og(t),t.bypassAuthState)}function RD(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),TS(n,new og(t),t.bypassAuthState)}async function ND(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),nD(n,new og(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PD;case"linkViaPopup":case"linkViaRedirect":return ND;case"reauthViaPopup":case"reauthViaRedirect":return RD;default:En(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new Sl(2e3,1e4);class Os extends DS{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DD.get())};e()}}Os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="pendingRedirect",Xu=new Map;class OD extends DS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const i=await LD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LD(t,e){const n=jD(e),i=FD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function VD(t,e){Xu.set(t._key(),e)}function FD(t){return ri(t._redirectPersistence)}function jD(t){return Yu(MD,t.config.apiKey,t.name)}async function UD(t,e,n=!1){if(Nn(t.app))return Promise.reject(oi(t));const i=pr(t),r=AD(i,e),o=await new OD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=10*60*1e3;class zD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$D(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!MS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(On(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jv(e))}saveEventToCache(e){this.cachedEventUids.add(Jv(e)),this.lastProcessedEventTime=Date.now()}}function Jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $D(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e={}){return Wn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qD=/^https?/;async function KD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WD(t);for(const n of e)try{if(GD(n))return}catch{}En(t,"unauthorized-domain")}function GD(t){const e=Sp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!qD.test(n))return!1;if(HD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=new Sl(3e4,6e4);function Zv(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function YD(t){return new Promise((e,n)=>{var i,r,s;function o(){Zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zv(),n(On(t,"network-request-failed"))},timeout:QD.get()})}if(!((r=(i=Ln().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ln().gapi)===null||s===void 0)&&s.load)o();else{const a=LN("iframefcb");return Ln()[a]=()=>{gapi.load?o():n(On(t,"network-request-failed"))},_S(`${ON()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function XD(t){return Ju=Ju||YD(t),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Sl(5e3,15e3),ZD="__/auth/iframe",eM="emulator/auth/iframe",tM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iM(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?eg(e,eM):`https://${t.config.authDomain}/${ZD}`,i={apiKey:e.apiKey,appName:t.name,v:vo},r=nM.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Tl(i).slice(1)}`}async function rM(t){const e=await XD(t),n=Ln().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:iM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=On(t,"network-request-failed"),a=Ln().setTimeout(()=>{s(o)},JD.get());function l(){Ln().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oM=500,aM=600,lM="_blank",uM="http://localhost";class e0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cM(t,e,n,i=oM,r=aM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sM),{width:i.toString(),height:r.toString(),top:s,left:o}),u=Tt().toLowerCase();n&&(a=hS(u)?lM:n),uS(u)&&(e=e||uM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(bN(u)&&a!=="_self")return hM(e||"",a),new e0(null);const d=window.open(e||"",a,h);Z(d,t,"popup-blocked");try{d.focus()}catch{}return new e0(d)}function hM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="__/auth/handler",fM="emulator/auth/handler",pM=encodeURIComponent("fac");async function t0(t,e,n,i,r,s){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:vo,eventId:r};if(e instanceof wS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",KP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof bl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${pM}=${encodeURIComponent(l)}`:"";return`${mM(t)}?${Tl(a).slice(1)}${u}`}function mM({config:t}){return t.emulator?eg(t,fM):`https://${t.authDomain}/${dM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="webStorageSupport";class gM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CS,this._completeRedirectFn=UD,this._overrideRedirectResult=VD}async _openPopup(e,n,i,r){var s;di((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await t0(e,n,i,Sp(),r);return cM(e,o,sg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await t0(e,n,i,Sp(),r);return vD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(di(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await rM(e),i=new zD(e);return n.register("authEvent",r=>(Z(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ef,{type:ef},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[ef];o!==void 0&&n(!!o),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gS()||cS()||ng()}}const yM=gM;var n0="@firebase/auth",i0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wM(t){Un(new wn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yS(t)},u=new NN(i,r,s,l);return BN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Un(new wn("auth-internal",e=>{const n=pr(e.getProvider("auth").getImmediate());return(i=>new _M(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(n0,i0,vM(t)),on(n0,i0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=5*60,TM=$I("authIdTokenMaxAge")||EM;let r0=null;const IM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>TM)return;const r=n==null?void 0:n.token;r0!==r&&(r0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function SM(t=XI()){const e=Il(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UN(t,{popupRedirectResolver:yM,persistence:[CD,gD,CS]}),i=$I("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=IM(s.toString());hD(n,o,()=>o(n.currentUser)),cD(n,a=>o(a))}}const r=BI("auth");return r&&zN(n,`http://${r}`),n}function xM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=On("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",xM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wM("Browser");var bM="firebase",kM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on(bM,kM,"app");var s0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ur,OS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function k(){}k.prototype=_.prototype,S.D=_.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(C,P,D){for(var A=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)A[ie-2]=arguments[ie];return _.prototype[P].apply(C,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,_,k){k||(k=0);var C=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)C[P]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(P=0;16>P;++P)C[P]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=S.g[0],k=S.g[1],P=S.g[2];var D=S.g[3],A=_+(D^k&(P^D))+C[0]+3614090360&4294967295;_=k+(A<<7&4294967295|A>>>25),A=D+(P^_&(k^P))+C[1]+3905402710&4294967295,D=_+(A<<12&4294967295|A>>>20),A=P+(k^D&(_^k))+C[2]+606105819&4294967295,P=D+(A<<17&4294967295|A>>>15),A=k+(_^P&(D^_))+C[3]+3250441966&4294967295,k=P+(A<<22&4294967295|A>>>10),A=_+(D^k&(P^D))+C[4]+4118548399&4294967295,_=k+(A<<7&4294967295|A>>>25),A=D+(P^_&(k^P))+C[5]+1200080426&4294967295,D=_+(A<<12&4294967295|A>>>20),A=P+(k^D&(_^k))+C[6]+2821735955&4294967295,P=D+(A<<17&4294967295|A>>>15),A=k+(_^P&(D^_))+C[7]+4249261313&4294967295,k=P+(A<<22&4294967295|A>>>10),A=_+(D^k&(P^D))+C[8]+1770035416&4294967295,_=k+(A<<7&4294967295|A>>>25),A=D+(P^_&(k^P))+C[9]+2336552879&4294967295,D=_+(A<<12&4294967295|A>>>20),A=P+(k^D&(_^k))+C[10]+4294925233&4294967295,P=D+(A<<17&4294967295|A>>>15),A=k+(_^P&(D^_))+C[11]+2304563134&4294967295,k=P+(A<<22&4294967295|A>>>10),A=_+(D^k&(P^D))+C[12]+1804603682&4294967295,_=k+(A<<7&4294967295|A>>>25),A=D+(P^_&(k^P))+C[13]+4254626195&4294967295,D=_+(A<<12&4294967295|A>>>20),A=P+(k^D&(_^k))+C[14]+2792965006&4294967295,P=D+(A<<17&4294967295|A>>>15),A=k+(_^P&(D^_))+C[15]+1236535329&4294967295,k=P+(A<<22&4294967295|A>>>10),A=_+(P^D&(k^P))+C[1]+4129170786&4294967295,_=k+(A<<5&4294967295|A>>>27),A=D+(k^P&(_^k))+C[6]+3225465664&4294967295,D=_+(A<<9&4294967295|A>>>23),A=P+(_^k&(D^_))+C[11]+643717713&4294967295,P=D+(A<<14&4294967295|A>>>18),A=k+(D^_&(P^D))+C[0]+3921069994&4294967295,k=P+(A<<20&4294967295|A>>>12),A=_+(P^D&(k^P))+C[5]+3593408605&4294967295,_=k+(A<<5&4294967295|A>>>27),A=D+(k^P&(_^k))+C[10]+38016083&4294967295,D=_+(A<<9&4294967295|A>>>23),A=P+(_^k&(D^_))+C[15]+3634488961&4294967295,P=D+(A<<14&4294967295|A>>>18),A=k+(D^_&(P^D))+C[4]+3889429448&4294967295,k=P+(A<<20&4294967295|A>>>12),A=_+(P^D&(k^P))+C[9]+568446438&4294967295,_=k+(A<<5&4294967295|A>>>27),A=D+(k^P&(_^k))+C[14]+3275163606&4294967295,D=_+(A<<9&4294967295|A>>>23),A=P+(_^k&(D^_))+C[3]+4107603335&4294967295,P=D+(A<<14&4294967295|A>>>18),A=k+(D^_&(P^D))+C[8]+1163531501&4294967295,k=P+(A<<20&4294967295|A>>>12),A=_+(P^D&(k^P))+C[13]+2850285829&4294967295,_=k+(A<<5&4294967295|A>>>27),A=D+(k^P&(_^k))+C[2]+4243563512&4294967295,D=_+(A<<9&4294967295|A>>>23),A=P+(_^k&(D^_))+C[7]+1735328473&4294967295,P=D+(A<<14&4294967295|A>>>18),A=k+(D^_&(P^D))+C[12]+2368359562&4294967295,k=P+(A<<20&4294967295|A>>>12),A=_+(k^P^D)+C[5]+4294588738&4294967295,_=k+(A<<4&4294967295|A>>>28),A=D+(_^k^P)+C[8]+2272392833&4294967295,D=_+(A<<11&4294967295|A>>>21),A=P+(D^_^k)+C[11]+1839030562&4294967295,P=D+(A<<16&4294967295|A>>>16),A=k+(P^D^_)+C[14]+4259657740&4294967295,k=P+(A<<23&4294967295|A>>>9),A=_+(k^P^D)+C[1]+2763975236&4294967295,_=k+(A<<4&4294967295|A>>>28),A=D+(_^k^P)+C[4]+1272893353&4294967295,D=_+(A<<11&4294967295|A>>>21),A=P+(D^_^k)+C[7]+4139469664&4294967295,P=D+(A<<16&4294967295|A>>>16),A=k+(P^D^_)+C[10]+3200236656&4294967295,k=P+(A<<23&4294967295|A>>>9),A=_+(k^P^D)+C[13]+681279174&4294967295,_=k+(A<<4&4294967295|A>>>28),A=D+(_^k^P)+C[0]+3936430074&4294967295,D=_+(A<<11&4294967295|A>>>21),A=P+(D^_^k)+C[3]+3572445317&4294967295,P=D+(A<<16&4294967295|A>>>16),A=k+(P^D^_)+C[6]+76029189&4294967295,k=P+(A<<23&4294967295|A>>>9),A=_+(k^P^D)+C[9]+3654602809&4294967295,_=k+(A<<4&4294967295|A>>>28),A=D+(_^k^P)+C[12]+3873151461&4294967295,D=_+(A<<11&4294967295|A>>>21),A=P+(D^_^k)+C[15]+530742520&4294967295,P=D+(A<<16&4294967295|A>>>16),A=k+(P^D^_)+C[2]+3299628645&4294967295,k=P+(A<<23&4294967295|A>>>9),A=_+(P^(k|~D))+C[0]+4096336452&4294967295,_=k+(A<<6&4294967295|A>>>26),A=D+(k^(_|~P))+C[7]+1126891415&4294967295,D=_+(A<<10&4294967295|A>>>22),A=P+(_^(D|~k))+C[14]+2878612391&4294967295,P=D+(A<<15&4294967295|A>>>17),A=k+(D^(P|~_))+C[5]+4237533241&4294967295,k=P+(A<<21&4294967295|A>>>11),A=_+(P^(k|~D))+C[12]+1700485571&4294967295,_=k+(A<<6&4294967295|A>>>26),A=D+(k^(_|~P))+C[3]+2399980690&4294967295,D=_+(A<<10&4294967295|A>>>22),A=P+(_^(D|~k))+C[10]+4293915773&4294967295,P=D+(A<<15&4294967295|A>>>17),A=k+(D^(P|~_))+C[1]+2240044497&4294967295,k=P+(A<<21&4294967295|A>>>11),A=_+(P^(k|~D))+C[8]+1873313359&4294967295,_=k+(A<<6&4294967295|A>>>26),A=D+(k^(_|~P))+C[15]+4264355552&4294967295,D=_+(A<<10&4294967295|A>>>22),A=P+(_^(D|~k))+C[6]+2734768916&4294967295,P=D+(A<<15&4294967295|A>>>17),A=k+(D^(P|~_))+C[13]+1309151649&4294967295,k=P+(A<<21&4294967295|A>>>11),A=_+(P^(k|~D))+C[4]+4149444226&4294967295,_=k+(A<<6&4294967295|A>>>26),A=D+(k^(_|~P))+C[11]+3174756917&4294967295,D=_+(A<<10&4294967295|A>>>22),A=P+(_^(D|~k))+C[2]+718787259&4294967295,P=D+(A<<15&4294967295|A>>>17),A=k+(D^(P|~_))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+D&4294967295}i.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var k=_-this.blockSize,C=this.B,P=this.h,D=0;D<_;){if(P==0)for(;D<=k;)r(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<_;)if(C[P++]=S.charCodeAt(D++),P==this.blockSize){r(this,C),P=0;break}}else for(;D<_;)if(C[P++]=S[D++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=_},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var k=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=k&255,k/=256;for(this.u(S),S=Array(16),_=k=0;4>_;++_)for(var C=0;32>C;C+=8)S[k++]=this.g[_]>>>C&255;return S};function s(S,_){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=_(S)}function o(S,_){this.h=_;for(var k=[],C=!0,P=S.length-1;0<=P;P--){var D=S[P]|0;C&&D==_||(k[P]=D,C=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return I(u(-S));for(var _=[],k=1,C=0;S>=k;C++)_[C]=S/k|0,k*=4294967296;return new o(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return I(h(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(_,8)),C=d,P=0;P<S.length;P+=8){var D=Math.min(8,S.length-P),A=parseInt(S.substring(P,P+D),_);8>D?(D=u(Math.pow(_,D)),C=C.j(D).add(u(A))):(C=C.j(k),C=C.add(u(A)))}return C}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-I(this).m();for(var S=0,_=1,k=0;k<this.g.length;k++){var C=this.i(k);S+=(0<=C?C:4294967296+C)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(w(this))return"-"+I(this).toString(S);for(var _=u(Math.pow(S,6)),k=this,C="";;){var P=R(k,_).g;k=T(k,P.j(_));var D=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=P,v(k))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function w(S){return S.h==-1}t.l=function(S){return S=T(this,S),w(S)?-1:v(S)?0:1};function I(S){for(var _=S.g.length,k=[],C=0;C<_;C++)k[C]=~S.g[C];return new o(k,~S.h).add(f)}t.abs=function(){return w(this)?I(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],C=0,P=0;P<=_;P++){var D=C+(this.i(P)&65535)+(S.i(P)&65535),A=(D>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);C=A>>>16,D&=65535,A&=65535,k[P]=A<<16|D}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(S,_){return S.add(I(_))}t.j=function(S){if(v(this)||v(S))return d;if(w(this))return w(S)?I(this).j(I(S)):I(I(this).j(S));if(w(S))return I(this.j(I(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var _=this.g.length+S.g.length,k=[],C=0;C<2*_;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<S.g.length;P++){var D=this.i(C)>>>16,A=this.i(C)&65535,ie=S.i(P)>>>16,re=S.i(P)&65535;k[2*C+2*P]+=A*re,E(k,2*C+2*P),k[2*C+2*P+1]+=D*re,E(k,2*C+2*P+1),k[2*C+2*P+1]+=A*ie,E(k,2*C+2*P+1),k[2*C+2*P+2]+=D*ie,E(k,2*C+2*P+2)}for(C=0;C<_;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=_;C<2*_;C++)k[C]=0;return new o(k,0)};function E(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function b(S,_){this.g=S,this.h=_}function R(S,_){if(v(_))throw Error("division by zero");if(v(S))return new b(d,d);if(w(S))return _=R(I(S),_),new b(I(_.g),I(_.h));if(w(_))return _=R(S,I(_)),new b(I(_.g),_.h);if(30<S.g.length){if(w(S)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var k=f,C=_;0>=C.l(S);)k=M(k),C=M(C);var P=N(k,1),D=N(C,1);for(C=N(C,2),k=N(k,2);!v(C);){var A=D.add(C);0>=A.l(S)&&(P=P.add(k),D=A),C=N(C,1),k=N(k,1)}return _=T(S,P.j(_)),new b(P,_)}for(P=d;0<=S.l(_);){for(k=Math.max(1,Math.floor(S.m()/_.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=u(k),A=D.j(_);w(A)||0<A.l(S);)k-=C,D=u(k),A=D.j(_);v(D)&&(D=f),P=P.add(D),S=T(S,A)}return new b(P,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)&S.i(C);return new o(k,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)|S.i(C);return new o(k,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)^S.i(C);return new o(k,this.h^S.h)};function M(S){for(var _=S.g.length+1,k=[],C=0;C<_;C++)k[C]=S.i(C)<<1|S.i(C-1)>>>31;return new o(k,S.h)}function N(S,_){var k=_>>5;_%=32;for(var C=S.g.length-k,P=[],D=0;D<C;D++)P[D]=0<_?S.i(D+k)>>>_|S.i(D+k+1)<<32-_:S.i(D+k);return new o(P,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,OS=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ur=o}).apply(typeof s0<"u"?s0:typeof self<"u"?self:typeof window<"u"?window:{});var vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LS,aa,VS,Zu,kp,FS,jS,US;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,m){return c==Array.prototype||c==Object.prototype||(c[p]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof vu=="object"&&vu];for(var p=0;p<c.length;++p){var m=c[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=n(this);function r(c,p){if(p)e:{var m=i;c=c.split(".");for(var x=0;x<c.length-1;x++){var L=c[x];if(!(L in m))break e;m=m[L]}c=c[c.length-1],x=m[c],p=p(x),p!=x&&p!=null&&e(m,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var m=0,x=!1,L={next:function(){if(!x&&m<c.length){var V=m++;return{value:p(V,c[V]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(c){return c||function(){return s(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,m){return c.call.apply(c.bind,arguments)}function d(c,p,m){if(!c)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function f(c,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(c,p){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function v(c,p){function m(){}m.prototype=p.prototype,c.aa=p.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(x,L,V){for(var z=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)z[Te-2]=arguments[Te];return p.prototype[L].apply(x,z)}}function w(c){const p=c.length;if(0<p){const m=Array(p);for(let x=0;x<p;x++)m[x]=c[x];return m}return[]}function I(c,p){for(let m=1;m<arguments.length;m++){const x=arguments[m];if(l(x)){const L=c.length||0,V=x.length||0;c.length=L+V;for(let z=0;z<V;z++)c[L+z]=x[z]}else c.push(x)}}class T{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var M=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function N(c,p,m){for(const x in c)p.call(m,c[x],x,c)}function S(c,p){for(const m in c)p.call(void 0,c[m],m,c)}function _(c){const p={};for(const m in c)p[m]=c[m];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,p){let m,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(m in x)c[m]=x[m];for(let V=0;V<k.length;V++)m=k[V],Object.prototype.hasOwnProperty.call(x,m)&&(c[m]=x[m])}}function P(c){var p=1;c=c.split(":");const m=[];for(;0<p&&c.length;)m.push(c.shift()),p--;return c.length&&m.push(c.join(":")),m}function D(c){a.setTimeout(()=>{throw c},0)}function A(){var c=G;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ie{constructor(){this.h=this.g=null}add(p,m){const x=re.get();x.set(p,m),this.h?this.h.next=x:this.g=x,this.h=x}}var re=new T(()=>new le,c=>c.reset());class le{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,B=!1,G=new ie,q=()=>{const c=a.Promise.resolve(void 0);ye=()=>{c.then(de)}};var de=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(m){D(m)}var p=re;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}B=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return c}();function qe(c,p){if(_e.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(M){e:{try{R(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else m=="mouseover"?p=c.fromElement:m=="mouseout"&&(p=c.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ne[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&qe.aa.h.call(this)}}v(qe,_e);var Ne={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),gr=0;function So(c,p,m,x,L){this.listener=c,this.proxy=null,this.src=p,this.type=m,this.capture=!!x,this.ha=L,this.key=++gr,this.da=this.fa=!1}function Sn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function W(c){this.src=c,this.g={},this.h=0}W.prototype.add=function(c,p,m,x,L){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var z=Dt(c,p,x,L);return-1<z?(p=c[z],m||(p.fa=!1)):(p=new So(p,this.src,V,!!x,L),p.fa=m,c.push(p)),p};function se(c,p){var m=p.type;if(m in c.g){var x=c.g[m],L=Array.prototype.indexOf.call(x,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(x,L,1),V&&(Sn(p),c.g[m].length==0&&(delete c.g[m],c.h--))}}function Dt(c,p,m,x){for(var L=0;L<c.length;++L){var V=c[L];if(!V.da&&V.listener==p&&V.capture==!!m&&V.ha==x)return L}return-1}var Q="closure_lm_"+(1e6*Math.random()|0),Ke={};function Fl(c,p,m,x,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)Fl(c,p[V],m,x,L);return null}return m=gy(m),c&&c[Nt]?c.K(p,m,u(x)?!!x.capture:!1,L):fy(c,p,m,!1,x,L)}function fy(c,p,m,x,L,V){if(!p)throw Error("Invalid event type");var z=u(L)?!!L.capture:!!L,Te=id(c);if(Te||(c[Q]=Te=new W(c)),m=Te.add(p,m,x,z,V),m.proxy)return m;if(x=vk(),m.proxy=x,x.src=c,x.listener=m,c.addEventListener)Re||(L=z),L===void 0&&(L=!1),c.addEventListener(p.toString(),x,L);else if(c.attachEvent)c.attachEvent(my(p.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function vk(){function c(m){return p.call(c.src,c.listener,m)}const p=wk;return c}function py(c,p,m,x,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)py(c,p[V],m,x,L);else x=u(x)?!!x.capture:!!x,m=gy(m),c&&c[Nt]?(c=c.i,p=String(p).toString(),p in c.g&&(V=c.g[p],m=Dt(V,m,x,L),-1<m&&(Sn(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete c.g[p],c.h--)))):c&&(c=id(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Dt(p,m,x,L)),(m=-1<c?p[c]:null)&&nd(m))}function nd(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Nt])se(p.i,c);else{var m=c.type,x=c.proxy;p.removeEventListener?p.removeEventListener(m,x,c.capture):p.detachEvent?p.detachEvent(my(m),x):p.addListener&&p.removeListener&&p.removeListener(x),(m=id(p))?(se(m,c),m.h==0&&(m.src=null,p[Q]=null)):Sn(c)}}}function my(c){return c in Ke?Ke[c]:Ke[c]="on"+c}function wk(c,p){if(c.da)c=!0;else{p=new qe(p,this);var m=c.listener,x=c.ha||c.src;c.fa&&nd(c),c=m.call(x,p)}return c}function id(c){return c=c[Q],c instanceof W?c:null}var rd="__closure_events_fn_"+(1e9*Math.random()>>>0);function gy(c){return typeof c=="function"?c:(c[rd]||(c[rd]=function(p){return c.handleEvent(p)}),c[rd])}function ht(){te.call(this),this.i=new W(this),this.M=this,this.F=null}v(ht,te),ht.prototype[Nt]=!0,ht.prototype.removeEventListener=function(c,p,m,x){py(this,c,p,m,x)};function It(c,p){var m,x=c.F;if(x)for(m=[];x;x=x.F)m.push(x);if(c=c.M,x=p.type||p,typeof p=="string")p=new _e(p,c);else if(p instanceof _e)p.target=p.target||c;else{var L=p;p=new _e(x,c),C(p,L)}if(L=!0,m)for(var V=m.length-1;0<=V;V--){var z=p.g=m[V];L=jl(z,x,!0,p)&&L}if(z=p.g=c,L=jl(z,x,!0,p)&&L,L=jl(z,x,!1,p)&&L,m)for(V=0;V<m.length;V++)z=p.g=m[V],L=jl(z,x,!1,p)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var m=c.g[p],x=0;x<m.length;x++)Sn(m[x]);delete c.g[p],c.h--}}this.F=null},ht.prototype.K=function(c,p,m,x){return this.i.add(String(c),p,!1,m,x)},ht.prototype.L=function(c,p,m,x){return this.i.add(String(c),p,!0,m,x)};function jl(c,p,m,x){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var z=p[V];if(z&&!z.da&&z.capture==m){var Te=z.listener,nt=z.ha||z.src;z.fa&&se(c.i,z),L=Te.call(nt,x)!==!1&&L}}return L&&!x.defaultPrevented}function yy(c,p,m){if(typeof c=="function")m&&(c=f(c,m));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function _y(c){c.g=yy(()=>{c.g=null,c.i&&(c.i=!1,_y(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Ek extends te{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:_y(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xo(c){te.call(this),this.h=c,this.g={}}v(xo,te);var vy=[];function wy(c){N(c.g,function(p,m){this.g.hasOwnProperty(m)&&nd(p)},c),c.g={}}xo.prototype.N=function(){xo.aa.N.call(this),wy(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sd=a.JSON.stringify,Tk=a.JSON.parse,Ik=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function od(){}od.prototype.h=null;function Ey(c){return c.h||(c.h=c.i())}function Ty(){}var bo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ad(){_e.call(this,"d")}v(ad,_e);function ld(){_e.call(this,"c")}v(ld,_e);var yr={},Iy=null;function Ul(){return Iy=Iy||new ht}yr.La="serverreachability";function Sy(c){_e.call(this,yr.La,c)}v(Sy,_e);function ko(c){const p=Ul();It(p,new Sy(p))}yr.STAT_EVENT="statevent";function xy(c,p){_e.call(this,yr.STAT_EVENT,c),this.stat=p}v(xy,_e);function St(c){const p=Ul();It(p,new xy(p,c))}yr.Ma="timingevent";function by(c,p){_e.call(this,yr.Ma,c),this.size=p}v(by,_e);function Co(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function Sk(c,p,m,x,L,V){c.info(function(){if(c.g)if(V)for(var z="",Te=V.split("&"),nt=0;nt<Te.length;nt++){var me=Te[nt].split("=");if(1<me.length){var dt=me[0];me=me[1];var ft=dt.split("_");z=2<=ft.length&&ft[1]=="type"?z+(dt+"="+me+"&"):z+(dt+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+p+`
`+m+`
`+z})}function xk(c,p,m,x,L,V,z){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+p+`
`+m+`
`+V+" "+z})}function hs(c,p,m,x){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+kk(c,m)+(x?" "+x:"")})}function bk(c,p){c.info(function(){return"TIMEOUT: "+p})}Ao.prototype.info=function(){};function kk(c,p){if(!c.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var x=m[c];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return sd(m)}catch{return p}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ky={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ud;function zl(){}v(zl,od),zl.prototype.g=function(){return new XMLHttpRequest},zl.prototype.i=function(){return{}},ud=new zl;function vi(c,p,m,x){this.j=c,this.i=p,this.l=m,this.R=x||1,this.U=new xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cy}function Cy(){this.i=null,this.g="",this.h=!1}var Ay={},cd={};function hd(c,p,m){c.L=1,c.v=ql(Hn(p)),c.m=m,c.P=!0,Py(c,null)}function Py(c,p){c.F=Date.now(),$l(c),c.A=Hn(c.v);var m=c.A,x=c.R;Array.isArray(x)||(x=[String(x)]),Wy(m.i,"t",x),c.C=0,m=c.j.J,c.h=new Cy,c.g=l_(c.j,m?p:null,!c.m),0<c.O&&(c.M=new Ek(f(c.Y,c,c.g),c.O)),p=c.U,m=c.g,x=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(vy[0]=L.toString()),L=vy);for(var V=0;V<L.length;V++){var z=Fl(m,L[V],x||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),ko(),Sk(c.i,c.u,c.A,c.l,c.R,c.m)}vi.prototype.ca=function(c){c=c.target;const p=this.M;p&&qn(c)==3?p.j():this.Y(c)},vi.prototype.Y=function(c){try{if(c==this.g)e:{const ft=qn(this.g);var p=this.g.Ba();const ps=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Xy(this.g)))){this.J||ft!=4||p==7||(p==8||0>=ps?ko(3):ko(2)),dd(this);var m=this.g.Z();this.X=m;t:if(Ry(this)){var x=Xy(this.g);c="";var L=x.length,V=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),Po(this);var z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(x[p],{stream:!(V&&p==L-1)});x.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,xk(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,nt=this.g;if((Te=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Te)){var me=Te;break t}}me=null}if(m=me)hs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fd(this,m);else{this.o=!1,this.s=3,St(12),_r(this),Po(this);break e}}if(this.P){m=!0;let hn;for(;!this.J&&this.C<z.length;)if(hn=Ck(this,z),hn==cd){ft==4&&(this.s=4,St(14),m=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Ay){this.s=4,St(15),hs(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else hs(this.i,this.l,hn,null),fd(this,hn);if(Ry(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||z.length!=0||this.h.h||(this.s=1,St(16),m=!1),this.o=this.o&&m,!m)hs(this.i,this.l,z,"[Invalid Chunked Response]"),_r(this),Po(this);else if(0<z.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),vd(dt),dt.M=!0,St(11))}}else hs(this.i,this.l,z,null),fd(this,z);ft==4&&_r(this),this.o&&!this.J&&(ft==4?r_(this.j,this):(this.o=!1,$l(this)))}else Hk(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),_r(this),Po(this)}}}catch{}finally{}};function Ry(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ck(c,p){var m=c.C,x=p.indexOf(`
`,m);return x==-1?cd:(m=Number(p.substring(m,x)),isNaN(m)?Ay:(x+=1,x+m>p.length?cd:(p=p.slice(x,x+m),c.C=x+m,p)))}vi.prototype.cancel=function(){this.J=!0,_r(this)};function $l(c){c.S=Date.now()+c.I,Ny(c,c.I)}function Ny(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Co(f(c.ba,c),p)}function dd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}vi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(bk(this.i,this.A),this.L!=2&&(ko(),St(17)),_r(this),this.s=2,Po(this)):Ny(this,this.S-c)};function Po(c){c.j.G==0||c.J||r_(c.j,c)}function _r(c){dd(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,wy(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function fd(c,p){try{var m=c.j;if(m.G!=0&&(m.g==c||pd(m.h,c))){if(!c.K&&pd(m.h,c)&&m.G==3){try{var x=m.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)Jl(m),Yl(m);else break e;_d(m),St(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Co(f(m.Za,m),6e3));if(1>=Oy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else wr(m,11)}else if((c.K||m.g==c)&&Jl(m),!E(p))for(L=m.Da.g.parse(p),p=0;p<L.length;p++){let me=L[p];if(m.T=me[0],me=me[1],m.G==2)if(me[0]=="c"){m.K=me[1],m.ia=me[2];const dt=me[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const ft=me[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const ps=me[5];ps!=null&&typeof ps=="number"&&0<ps&&(x=1.5*ps,m.L=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;const hn=c.g;if(hn){const eu=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eu){var V=x.h;V.g||eu.indexOf("spdy")==-1&&eu.indexOf("quic")==-1&&eu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(md(V,V.h),V.h=null))}if(x.D){const wd=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;wd&&(x.ya=wd,be(x.I,x.D,wd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),x=m;var z=c;if(x.qa=a_(x,x.J?x.ia:null,x.W),z.K){Ly(x.h,z);var Te=z,nt=x.L;nt&&(Te.I=nt),Te.B&&(dd(Te),$l(Te)),x.g=z}else n_(x);0<m.i.length&&Xl(m)}else me[0]!="stop"&&me[0]!="close"||wr(m,7);else m.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?wr(m,7):yd(m):me[0]!="noop"&&m.l&&m.l.ta(me),m.v=0)}}ko(4)}catch{}}var Ak=class{constructor(c,p){this.g=c,this.map=p}};function Dy(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function My(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Oy(c){return c.h?1:c.g?c.g.size:0}function pd(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function md(c,p){c.g?c.g.add(p):c.h=p}function Ly(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Dy.prototype.cancel=function(){if(this.i=Vy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Vy(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const m of c.g.values())p=p.concat(m.D);return p}return w(c.i)}function Pk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],m=c.length,x=0;x<m;x++)p.push(c[x]);return p}p=[],m=0;for(x in c)p[m++]=c[x];return p}function Rk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var m=0;m<c;m++)p.push(m);return p}p=[],m=0;for(const x in c)p[m++]=x;return p}}}function Fy(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var m=Rk(c),x=Pk(c),L=x.length,V=0;V<L;V++)p.call(void 0,x[V],m&&m[V],c)}var jy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nk(c,p){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var x=c[m].indexOf("="),L=null;if(0<=x){var V=c[m].substring(0,x);L=c[m].substring(x+1)}else V=c[m];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function vr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof vr){this.h=c.h,Wl(this,c.j),this.o=c.o,this.g=c.g,Hl(this,c.s),this.l=c.l;var p=c.i,m=new Do;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),Uy(this,m),this.m=c.m}else c&&(p=String(c).match(jy))?(this.h=!1,Wl(this,p[1]||"",!0),this.o=Ro(p[2]||""),this.g=Ro(p[3]||"",!0),Hl(this,p[4]),this.l=Ro(p[5]||"",!0),Uy(this,p[6]||"",!0),this.m=Ro(p[7]||"")):(this.h=!1,this.i=new Do(null,this.h))}vr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(No(p,By,!0),":");var m=this.g;return(m||p=="file")&&(c.push("//"),(p=this.o)&&c.push(No(p,By,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(No(m,m.charAt(0)=="/"?Ok:Mk,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",No(m,Vk)),c.join("")};function Hn(c){return new vr(c)}function Wl(c,p,m){c.j=m?Ro(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Hl(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Uy(c,p,m){p instanceof Do?(c.i=p,Fk(c.i,c.h)):(m||(p=No(p,Lk)),c.i=new Do(p,c.h))}function be(c,p,m){c.i.set(p,m)}function ql(c){return be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ro(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function No(c,p,m){return typeof c=="string"?(c=encodeURI(c).replace(p,Dk),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Dk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var By=/[#\/\?@]/g,Mk=/[#\?:]/g,Ok=/[#\?]/g,Lk=/[#\?@]/g,Vk=/#/g;function Do(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function wi(c){c.g||(c.g=new Map,c.h=0,c.i&&Nk(c.i,function(p,m){c.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=Do.prototype,t.add=function(c,p){wi(this),this.i=null,c=ds(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(p),this.h+=1,this};function zy(c,p){wi(c),p=ds(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function $y(c,p){return wi(c),p=ds(c,p),c.g.has(p)}t.forEach=function(c,p){wi(this),this.g.forEach(function(m,x){m.forEach(function(L){c.call(p,L,x,this)},this)},this)},t.na=function(){wi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let x=0;x<p.length;x++){const L=c[x];for(let V=0;V<L.length;V++)m.push(p[x])}return m},t.V=function(c){wi(this);let p=[];if(typeof c=="string")$y(this,c)&&(p=p.concat(this.g.get(ds(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)p=p.concat(c[m])}return p},t.set=function(c,p){return wi(this),this.i=null,c=ds(this,c),$y(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Wy(c,p,m){zy(c,p),0<m.length&&(c.i=null,c.g.set(ds(c,p),w(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var x=p[m];const V=encodeURIComponent(String(x)),z=this.V(x);for(x=0;x<z.length;x++){var L=V;z[x]!==""&&(L+="="+encodeURIComponent(String(z[x]))),c.push(L)}}return this.i=c.join("&")};function ds(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Fk(c,p){p&&!c.j&&(wi(c),c.i=null,c.g.forEach(function(m,x){var L=x.toLowerCase();x!=L&&(zy(this,x),Wy(this,L,m))},c)),c.j=p}function jk(c,p){const m=new Ao;if(a.Image){const x=new Image;x.onload=g(Ei,m,"TestLoadImage: loaded",!0,p,x),x.onerror=g(Ei,m,"TestLoadImage: error",!1,p,x),x.onabort=g(Ei,m,"TestLoadImage: abort",!1,p,x),x.ontimeout=g(Ei,m,"TestLoadImage: timeout",!1,p,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else p(!1)}function Uk(c,p){const m=new Ao,x=new AbortController,L=setTimeout(()=>{x.abort(),Ei(m,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:x.signal}).then(V=>{clearTimeout(L),V.ok?Ei(m,"TestPingServer: ok",!0,p):Ei(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Ei(m,"TestPingServer: error",!1,p)})}function Ei(c,p,m,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(m)}catch{}}function Bk(){this.g=new Ik}function zk(c,p,m){const x=m||"";try{Fy(c,function(L,V){let z=L;u(L)&&(z=sd(L)),p.push(x+V+"="+encodeURIComponent(z))})}catch(L){throw p.push(x+"type="+encodeURIComponent("_badmap")),L}}function Kl(c){this.l=c.Ub||null,this.j=c.eb||!1}v(Kl,od),Kl.prototype.g=function(){return new Gl(this.l,this.j)},Kl.prototype.i=function(c){return function(){return c}}({});function Gl(c,p){ht.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Gl,ht),t=Gl.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Oo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Oo(this)),this.g&&(this.readyState=3,Oo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hy(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hy(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Mo(this):Oo(this),this.readyState==3&&Hy(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Mo(this))},t.Qa=function(c){this.g&&(this.response=c,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Oo(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=p.next();return c.join(`\r
`)};function Oo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qy(c){let p="";return N(c,function(m,x){p+=x,p+=":",p+=m,p+=`\r
`}),p}function gd(c,p,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=qy(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):be(c,p,m))}function je(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(je,ht);var $k=/^https?$/i,Wk=["POST","PUT"];t=je.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ud.g(),this.v=this.o?Ey(this.o):Ey(ud),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(V){Ky(this,V);return}if(c=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)m.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const V of x.keys())m.set(V,x.get(V));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Wk,p,void 0))||x||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of m)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yy(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){Ky(this,V)}};function Ky(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Gy(c),Ql(c)}function Gy(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,It(this,"complete"),It(this,"abort"),Ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ql(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qy(this):this.bb())},t.bb=function(){Qy(this)};function Qy(c){if(c.h&&typeof o<"u"&&(!c.v[1]||qn(c)!=4||c.Z()!=2)){if(c.u&&qn(c)==4)yy(c.Ea,0,c);else if(It(c,"readystatechange"),qn(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var x;if(x=z===0){var L=String(c.D).match(jy)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),x=!$k.test(L?L.toLowerCase():"")}m=x}if(m)It(c,"complete"),It(c,"success");else{c.m=6;try{var V=2<qn(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",Gy(c)}}finally{Ql(c)}}}}function Ql(c,p){if(c.g){Yy(c);const m=c.g,x=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||It(c,"ready");try{m.onreadystatechange=x}catch{}}}function Yy(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function qn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Tk(p)}};function Xy(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Hk(c){const p={};c=(c.g&&2<=qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(E(c[x]))continue;var m=P(c[x]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=p[L]||[];p[L]=V,V.push(m)}S(p,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(c,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||p}function Jy(c){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lo("baseRetryDelayMs",5e3,c),this.cb=Lo("retryDelaySeedMs",1e4,c),this.Wa=Lo("forwardChannelMaxRetries",2,c),this.wa=Lo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Dy(c&&c.concurrentRequestLimit),this.Da=new Bk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jy.prototype,t.la=8,t.G=1,t.connect=function(c,p,m,x){St(0),this.W=c,this.H=p||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.I=a_(this,null,this.W),Xl(this)};function yd(c){if(Zy(c),c.G==3){var p=c.U++,m=Hn(c.I);if(be(m,"SID",c.K),be(m,"RID",p),be(m,"TYPE","terminate"),Vo(c,m),p=new vi(c,c.j,p),p.L=2,p.v=ql(Hn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=l_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),$l(p)}o_(c)}function Yl(c){c.g&&(vd(c),c.g.cancel(),c.g=null)}function Zy(c){Yl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Jl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Xl(c){if(!My(c.h)&&!c.s){c.s=!0;var p=c.Ga;ye||q(),B||(ye(),B=!0),G.add(p,c),c.B=0}}function qk(c,p){return Oy(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Co(f(c.Ga,c,p),s_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new vi(this,this.j,c);let V=this.o;if(this.S&&(V?(V=_(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=t_(this,L,p),m=Hn(this.I),be(m,"RID",c),be(m,"CVER",22),this.D&&be(m,"X-HTTP-Session-Id",this.D),Vo(this,m),V&&(this.O?p="headers="+encodeURIComponent(String(qy(V)))+"&"+p:this.m&&gd(m,this.m,V)),md(this.h,L),this.Ua&&be(m,"TYPE","init"),this.P?(be(m,"$req",p),be(m,"SID","null"),L.T=!0,hd(L,m,null)):hd(L,m,p),this.G=2}}else this.G==3&&(c?e_(this,c):this.i.length==0||My(this.h)||e_(this))};function e_(c,p){var m;p?m=p.l:m=c.U++;const x=Hn(c.I);be(x,"SID",c.K),be(x,"RID",m),be(x,"AID",c.T),Vo(c,x),c.m&&c.o&&gd(x,c.m,c.o),m=new vi(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),p&&(c.i=p.D.concat(c.i)),p=t_(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),md(c.h,m),hd(m,x,p)}function Vo(c,p){c.H&&N(c.H,function(m,x){be(p,x,m)}),c.l&&Fy({},function(m,x){be(p,x,m)})}function t_(c,p,m){m=Math.min(c.i.length,m);var x=c.l?f(c.l.Na,c.l,c):null;e:{var L=c.i;let V=-1;for(;;){const z=["count="+m];V==-1?0<m?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Te=!0;for(let nt=0;nt<m;nt++){let me=L[nt].g;const dt=L[nt].map;if(me-=V,0>me)V=Math.max(0,L[nt].g-100),Te=!1;else try{zk(dt,z,"req"+me+"_")}catch{x&&x(dt)}}if(Te){x=z.join("&");break e}}}return c=c.i.splice(0,m),p.D=c,x}function n_(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ye||q(),B||(ye(),B=!0),G.add(p,c),c.v=0}}function _d(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Co(f(c.Fa,c),s_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,i_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Co(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Yl(this),i_(this))};function vd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function i_(c){c.g=new vi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Hn(c.qa);be(p,"RID","rpc"),be(p,"SID",c.K),be(p,"AID",c.T),be(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&be(p,"TO",c.ja),be(p,"TYPE","xmlhttp"),Vo(c,p),c.m&&c.o&&gd(p,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=ql(Hn(p)),m.m=null,m.P=!0,Py(m,c)}t.Za=function(){this.C!=null&&(this.C=null,Yl(this),_d(this),St(19))};function Jl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function r_(c,p){var m=null;if(c.g==p){Jl(c),vd(c),c.g=null;var x=2}else if(pd(c.h,p))m=p.D,Ly(c.h,p),x=1;else return;if(c.G!=0){if(p.o)if(x==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;x=Ul(),It(x,new by(x,m)),Xl(c)}else n_(c);else if(L=p.s,L==3||L==0&&0<p.X||!(x==1&&qk(c,p)||x==2&&_d(c)))switch(m&&0<m.length&&(p=c.h,p.i=p.i.concat(m)),L){case 1:wr(c,5);break;case 4:wr(c,10);break;case 3:wr(c,6);break;default:wr(c,2)}}}function s_(c,p){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*p}function wr(c,p){if(c.j.info("Error code "+p),p==2){var m=f(c.fb,c),x=c.Xa;const L=!x;x=new vr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wl(x,"https"),ql(x),L?jk(x.toString(),m):Uk(x.toString(),m)}else St(2);c.G=0,c.l&&c.l.sa(p),o_(c),Zy(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function o_(c){if(c.G=0,c.ka=[],c.l){const p=Vy(c.h);(p.length!=0||c.i.length!=0)&&(I(c.ka,p),I(c.ka,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.ra()}}function a_(c,p,m){var x=m instanceof vr?Hn(m):new vr(m);if(x.g!="")p&&(x.g=p+"."+x.g),Hl(x,x.s);else{var L=a.location;x=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new vr(null);x&&Wl(V,x),p&&(V.g=p),L&&Hl(V,L),m&&(V.l=m),x=V}return m=c.D,p=c.ya,m&&p&&be(x,m,p),be(x,"VER",c.la),Vo(c,x),x}function l_(c,p,m){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new je(new Kl({eb:m})):new je(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function u_(){}t=u_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zl(){}Zl.prototype.g=function(c,p){return new $t(c,p)};function $t(c,p){ht.call(this),this.g=new Jy(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!E(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new fs(this)}v($t,ht),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){yd(this.g)},$t.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=sd(c),c=m);p.i.push(new Ak(p.Ya++,c)),p.G==3&&Xl(p)},$t.prototype.N=function(){this.g.l=null,delete this.j,yd(this.g),delete this.g,$t.aa.N.call(this)};function c_(c){ad.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const m in p){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}v(c_,ad);function h_(){ld.call(this),this.status=1}v(h_,ld);function fs(c){this.g=c}v(fs,u_),fs.prototype.ua=function(){It(this.g,"a")},fs.prototype.ta=function(c){It(this.g,new c_(c))},fs.prototype.sa=function(c){It(this.g,new h_)},fs.prototype.ra=function(){It(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,US=function(){return new Zl},jS=function(){return Ul()},FS=yr,kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,Zu=Bl,ky.COMPLETE="complete",VS=ky,Ty.EventType=bo,bo.OPEN="a",bo.CLOSE="b",bo.ERROR="c",bo.MESSAGE="d",ht.prototype.listen=ht.prototype.K,aa=Ty,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,LS=je}).apply(typeof vu<"u"?vu:typeof self<"u"?self:typeof window<"u"?window:{});const o0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new Rh("@firebase/firestore");function qo(){return Qr.logLevel}function H(t,...e){if(Qr.logLevel<=ue.DEBUG){const n=e.map(ag);Qr.debug(`Firestore (${wo}): ${t}`,...n)}}function fi(t,...e){if(Qr.logLevel<=ue.ERROR){const n=e.map(ag);Qr.error(`Firestore (${wo}): ${t}`,...n)}}function io(t,...e){if(Qr.logLevel<=ue.WARN){const n=e.map(ag);Qr.warn(`Firestore (${wo}): ${t}`,...n)}}function ag(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: `+t;throw fi(e),new Error(e)}function pe(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends In{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class AM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PM{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zi,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pe(typeof i.accessToken=="string"),new BS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new yt(e)}}class RM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class NM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new RM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new DM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=OM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ge(t,e){return t<e?-1:t>e?1:0}function ro(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Xe(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Xe(0,0))}static max(){return new J(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(),i===void 0?i=e.length-n:i>e.length-n&&X(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return sl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends sl{construct(e,n,i){return new Ie(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const LM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends sl{construct(e,n,i){return new st(e,n,i)}static isValidIdentifier(e){return LM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ie.fromString(e))}static fromName(e){return new Y(Ie.fromString(e).popFirst(5))}static empty(){return new Y(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ie(e.slice()))}}function VM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new Xe(n+1,0):new Xe(n,i));return new rr(r,Y.empty(),e)}function FM(t){return new rr(t.readTime,t.key,-1)}class rr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new rr(J.min(),Y.empty(),-1)}static max(){return new rr(J.max(),Y.empty(),-1)}}function jM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==UM)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(r=>r?j.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new j((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new j((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function zM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Al(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lg.oe=-1;function Pl(t){return t==null}function $c(t){return t===0&&1/t==-1/0}function $M(t){return typeof t=="number"&&Number.isInteger(t)&&!$c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wu(this.root,e,this.comparator,!0)}}class wu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??rt.RED,this.left=r??rt.EMPTY,this.right=s??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new rt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return rt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,i,r,s){return this}insert(e,n,i){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new l0(this.data.getIterator())}getIteratorFrom(e){return new l0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class l0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new lt(st.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new WS("Invalid base64 string: "+s):s}}(e);return new ct(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const WM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(t){if(pe(!!t),typeof t=="string"){let e=0;const n=WM.exec(t);if(pe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yr(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cg(t){const e=t.mapValue.fields.__previous_value__;return ug(e)?cg(e):e}function ol(t){const e=sr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class al{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new al("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu={mapValue:{}};function Xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ug(t)?4:KM(t)?9007199254740991:qM(t)?10:11:X()}function Bn(t,e){if(t===e)return!0;const n=Xr(t);if(n!==Xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ol(t).isEqual(ol(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=sr(r.timestampValue),a=sr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Yr(r.bytesValue).isEqual(Yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Be(r.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(r.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Be(r.integerValue)===Be(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Be(r.doubleValue),a=Be(s.doubleValue);return o===a?$c(o)===$c(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ro(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(a0(o)!==a0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function ll(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function so(t,e){if(t===e)return 0;const n=Xr(t),i=Xr(e);if(n!==i)return ge(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Be(s.integerValue||s.doubleValue),l=Be(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return u0(t.timestampValue,e.timestampValue);case 4:return u0(ol(t),ol(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Yr(s),l=Yr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ge(a[u],l[u]);if(h!==0)return h}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(Be(s.latitude),Be(o.latitude));return a!==0?a:ge(Be(s.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return c0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,w=ge(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:c0(g,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Eu.mapValue&&o===Eu.mapValue)return 0;if(s===Eu.mapValue)return 1;if(o===Eu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ge(l[d],h[d]);if(f!==0)return f;const g=so(a[l[d]],u[h[d]]);if(g!==0)return g}return ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function u0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=sr(t),i=sr(e),r=ge(n.seconds,i.seconds);return r!==0?r:ge(n.nanos,i.nanos)}function c0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=so(n[r],i[r]);if(s)return s}return ge(n.length,i.length)}function oo(t){return Cp(t)}function Cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=sr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Cp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Cp(n.fields[o])}`;return r+"}"}(t.mapValue):X()}function Ap(t){return!!t&&"integerValue"in t}function hg(t){return!!t&&"arrayValue"in t}function h0(t){return!!t&&"nullValue"in t}function d0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ec(t){return!!t&&"mapValue"in t}function qM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function xa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ls(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xa(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ec(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xa(n)}setAll(e){let n=st.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=xa(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());ec(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];ec(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ls(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new kt(xa(this.value))}}function HS(t){const e=[];return ls(t.fields,(n,i)=>{const r=new st([n]);if(ec(i)){const s=HS(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new et(e,0,J.min(),J.min(),J.min(),kt.empty(),0)}static newFoundDocument(e,n,i,r){return new et(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new et(e,2,n,J.min(),J.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new et(e,3,n,J.min(),J.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.position=e,this.inclusive=n}}function f0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Y.comparator(Y.fromName(o.referenceValue),n.key):i=so(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function p0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function GM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{}class Qe extends qS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new YM(e,n,i):n==="array-contains"?new ZM(e,i):n==="in"?new e2(e,i):n==="not-in"?new t2(e,i):n==="array-contains-any"?new n2(e,i):new Qe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new XM(e,i):new JM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(so(n,this.value)):n!==null&&Xr(this.value)===Xr(n)&&this.matchesComparison(so(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends qS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new zn(e,n)}matches(e){return KS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function KS(t){return t.op==="and"}function GS(t){return QM(t)&&KS(t)}function QM(t){for(const e of t.filters)if(e instanceof zn)return!1;return!0}function Pp(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+oo(t.value);if(GS(t))return t.filters.map(e=>Pp(e)).join(",");{const e=t.filters.map(n=>Pp(n)).join(",");return`${t.op}(${e})`}}function QS(t,e){return t instanceof Qe?function(i,r){return r instanceof Qe&&i.op===r.op&&i.field.isEqual(r.field)&&Bn(i.value,r.value)}(t,e):t instanceof zn?function(i,r){return r instanceof zn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&QS(o,r.filters[a]),!0):!1}(t,e):void X()}function YS(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${oo(n.value)}`}(t):t instanceof zn?function(n){return n.op.toString()+" {"+n.getFilters().map(YS).join(" ,")+"}"}(t):"Filter"}class YM extends Qe{constructor(e,n,i){super(e,n,i),this.key=Y.fromName(i.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class XM extends Qe{constructor(e,n){super(e,"in",n),this.keys=XS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JM extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=XS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Y.fromName(i.referenceValue))}class ZM extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hg(n)&&ll(n.arrayValue,this.value)}}class e2 extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ll(this.value.arrayValue,n)}}class t2 extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ll(this.value.arrayValue,n)}}class n2 extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ll(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function m0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new i2(t,e,n,i,r,s,o)}function dg(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Pp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Pl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>oo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>oo(i)).join(",")),e.ue=n}return e.ue}function fg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p0(t.startAt,e.startAt)&&p0(t.endAt,e.endAt)}function Rp(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function r2(t,e,n,i,r,s,o,a){return new Oh(t,e,n,i,r,s,o,a)}function pg(t){return new Oh(t)}function g0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s2(t){return t.collectionGroup!==null}function ba(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(st.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Hc(s,i))}),n.has(st.keyField().canonicalString())||e.ce.push(new Hc(st.keyField(),i))}return e.ce}function Vn(t){const e=ee(t);return e.le||(e.le=o2(e,ba(t))),e.le}function o2(t,e){if(t.limitType==="F")return m0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Hc(r.field,s)});const n=t.endAt?new Wc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wc(t.startAt.position,t.startAt.inclusive):null;return m0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Np(t,e,n){return new Oh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lh(t,e){return fg(Vn(t),Vn(e))&&t.limitType===e.limitType}function JS(t){return`${dg(Vn(t))}|lt:${t.limitType}`}function ws(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>YS(r)).join(", ")}]`),Pl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>oo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>oo(r)).join(",")),`Target(${i})`}(Vn(t))}; limitType=${t.limitType})`}function Vh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Y.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of ba(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=f0(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,ba(i),r)||i.endAt&&!function(o,a,l){const u=f0(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,ba(i),r))}(t,e)}function a2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZS(t){return(e,n)=>{let i=!1;for(const r of ba(t)){const s=l2(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function l2(t,e,n){const i=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?so(l,u):X()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return $S(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Fe(Y.comparator);function pi(){return u2}const ex=new Fe(Y.comparator);function la(...t){let e=ex;for(const n of t)e=e.insert(n.key,n);return e}function tx(t){let e=ex;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Mr(){return ka()}function nx(){return ka()}function ka(){return new Eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const c2=new Fe(Y.comparator),h2=new lt(Y.comparator);function ae(...t){let e=h2;for(const n of t)e=e.add(n);return e}const d2=new lt(ge);function f2(){return d2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function ix(t){return{integerValue:""+t}}function p2(t,e){return $M(e)?ix(e):mg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this._=void 0}}function m2(t,e,n){return t instanceof ul?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ug(s)&&(s=cg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof cl?sx(t,e):t instanceof hl?ox(t,e):function(r,s){const o=rx(r,s),a=y0(o)+y0(r.Pe);return Ap(o)&&Ap(r.Pe)?ix(a):mg(r.serializer,a)}(t,e)}function g2(t,e,n){return t instanceof cl?sx(t,e):t instanceof hl?ox(t,e):n}function rx(t,e){return t instanceof qc?function(i){return Ap(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class ul extends Fh{}class cl extends Fh{constructor(e){super(),this.elements=e}}function sx(t,e){const n=ax(e);for(const i of t.elements)n.some(r=>Bn(r,i))||n.push(i);return{arrayValue:{values:n}}}class hl extends Fh{constructor(e){super(),this.elements=e}}function ox(t,e){let n=ax(e);for(const i of t.elements)n=n.filter(r=>!Bn(r,i));return{arrayValue:{values:n}}}class qc extends Fh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function y0(t){return Be(t.integerValue||t.doubleValue)}function ax(t){return hg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.field=e,this.transform=n}}function _2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof cl&&r instanceof cl||i instanceof hl&&r instanceof hl?ro(i.elements,r.elements,Bn):i instanceof qc&&r instanceof qc?Bn(i.Pe,r.Pe):i instanceof ul&&r instanceof ul}(t.transform,e.transform)}class v2{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jh{}function lx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uh(t.key,vt.none()):new Rl(t.key,t.data,vt.none());{const n=t.data,i=kt.empty();let r=new lt(st.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new mr(t.key,i,new Kt(r.toArray()),vt.none())}}function w2(t,e,n){t instanceof Rl?function(r,s,o){const a=r.value.clone(),l=v0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mr?function(r,s,o){if(!tc(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=v0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ux(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ca(t,e,n,i){return t instanceof Rl?function(s,o,a,l){if(!tc(s.precondition,o))return a;const u=s.value.clone(),h=w0(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof mr?function(s,o,a,l){if(!tc(s.precondition,o))return a;const u=w0(s.fieldTransforms,l,o),h=o.data;return h.setAll(ux(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return tc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function E2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=rx(i.transform,r||null);s!=null&&(n===null&&(n=kt.empty()),n.set(i.field,s))}return n||null}function _0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ro(i,r,(s,o)=>_2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rl extends jh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mr extends jh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ux(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function v0(t,e,n){const i=new Map;pe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,g2(o,a,n[r]))}return i}function w0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,m2(s,o,e))}return i}class Uh extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cx extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&w2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ca(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ca(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=nx();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=lx(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(n,i)=>_0(n,i))&&ro(this.baseMutations,e.baseMutations,(n,i)=>_0(n,i))}}class gg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){pe(e.mutations.length===i.length);let r=function(){return c2}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new gg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,ce;function hx(t){switch(t){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function dx(t){if(t===void 0)return fi("GRPC error has no .code"),F.UNKNOWN;switch(t){case We.OK:return F.OK;case We.CANCELLED:return F.CANCELLED;case We.UNKNOWN:return F.UNKNOWN;case We.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case We.INTERNAL:return F.INTERNAL;case We.UNAVAILABLE:return F.UNAVAILABLE;case We.UNAUTHENTICATED:return F.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case We.NOT_FOUND:return F.NOT_FOUND;case We.ALREADY_EXISTS:return F.ALREADY_EXISTS;case We.PERMISSION_DENIED:return F.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case We.ABORTED:return F.ABORTED;case We.OUT_OF_RANGE:return F.OUT_OF_RANGE;case We.UNIMPLEMENTED:return F.UNIMPLEMENTED;case We.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(ce=We||(We={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new Ur([4294967295,4294967295],0);function E0(t){const e=x2().encode(t),n=new OS;return n.update(e),new Uint8Array(n.digest())}function T0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ur([n,i],0),new Ur([r,s],0)]}class yg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ua(`Invalid padding: ${n}`);if(i<0)throw new ua(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ua(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ua(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ur.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Ur.fromNumber(i)));return r.compare(b2)===1&&(r=new Ur([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=E0(e),[i,r]=T0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new yg(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=E0(e),[i,r]=T0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Nl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Bh(J.min(),r,new Fe(ge),pi(),ae())}}class Nl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Nl(i,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class fx{constructor(e,n){this.targetId=e,this.me=n}}class px{constructor(e,n,i=ct.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class I0{constructor(){this.fe=0,this.ge=x0(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),i=ae();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X()}}),new Nl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=x0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class k2{constructor(e){this.Le=e,this.Be=new Map,this.ke=pi(),this.qe=S0(),this.Qe=new Fe(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(Rp(s))if(i===0){const o=new Y(s.path);this.Ue(n,o,et.newNoDocument(o,J.min()))}else pe(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Yr(i).toUint8Array()}catch(l){if(l instanceof WS)return io("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new yg(o,r,s)}catch(l){return io(l instanceof ua?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Rp(a.target)){const l=new Y(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,et.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ae();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Bh(e,n,this.Qe,this.ke,i);return this.ke=pi(),this.qe=S0(),this.Qe=new Fe(ge),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new I0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new I0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function S0(){return new Fe(Y.comparator)}function x0(){return new Fe(Y.comparator)}const C2={asc:"ASCENDING",desc:"DESCENDING"},A2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P2={and:"AND",or:"OR"};class R2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dp(t,e){return t.useProto3Json||Pl(e)?e:{value:e}}function Kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N2(t,e){return Kc(t,e.toTimestamp())}function Qt(t){return pe(!!t),J.fromTimestamp(function(n){const i=sr(n);return new Xe(i.seconds,i.nanos)}(t))}function _g(t,e){return Mp(t,e).canonicalString()}function Mp(t,e){const n=function(r){return new Ie(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gx(t){const e=Ie.fromString(t);return pe(Tx(e)),e}function Gc(t,e){return _g(t.databaseId,e.path)}function Aa(t,e){const n=gx(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(_x(n))}function yx(t,e){return _g(t.databaseId,e)}function D2(t){const e=gx(t);return e.length===4?Ie.emptyPath():_x(e)}function Op(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _x(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function b0(t,e,n){return{name:Gc(t,e),fields:n.value.mapValue.fields}}function M2(t,e){return"found"in e?function(i,r){pe(!!r.found),r.found.name,r.found.updateTime;const s=Aa(i,r.found.name),o=Qt(r.found.updateTime),a=r.found.createTime?Qt(r.found.createTime):J.min(),l=new kt({mapValue:{fields:r.found.fields}});return et.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(i,r){pe(!!r.missing),pe(!!r.readTime);const s=Aa(i,r.missing),o=Qt(r.readTime);return et.newNoDocument(s,o)}(t,e):X()}function O2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(pe(h===void 0||typeof h=="string"),ct.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?F.UNKNOWN:dx(u.code);return new K(h,u.message||"")}(o);n=new px(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Aa(t,i.document.name),s=Qt(i.document.updateTime),o=i.document.createTime?Qt(i.document.createTime):J.min(),a=new kt({mapValue:{fields:i.document.fields}}),l=et.newFoundDocument(r,s,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new nc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Aa(t,i.document),s=i.readTime?Qt(i.readTime):J.min(),o=et.newNoDocument(r,s),a=i.removedTargetIds||[];n=new nc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Aa(t,i.document),s=i.removedTargetIds||[];n=new nc([],s,r,null)}else{if(!("filter"in e))return X();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new S2(r,s),a=i.targetId;n=new fx(a,o)}}return n}function vx(t,e){let n;if(e instanceof Rl)n={update:b0(t,e.key,e.value)};else if(e instanceof Uh)n={delete:Gc(t,e.key)};else if(e instanceof mr)n={update:b0(t,e.key,e.data),updateMask:W2(e.fieldMask)};else{if(!(e instanceof cx))return X();n={verify:Gc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof ul)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:N2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function L2(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Qt(r.updateTime):Qt(s);return o.isEqual(J.min())&&(o=Qt(s)),new v2(o,r.transformResults||[])}(n,e))):[]}function V2(t,e){return{documents:[yx(t,e.path)]}}function F2(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=yx(t,r);const s=function(u){if(u.length!==0)return Ex(zn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:Es(f.field),direction:B2(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Dp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function j2(t){let e=D2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){pe(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=wx(d);return f instanceof zn&&GS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new Hc(Ts(v.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Pl(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new Wc(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,g=d.values||[];return new Wc(g,f)}(n.endAt)),r2(e,r,o,s,a,"F",l,u)}function U2(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ts(n.unaryFilter.field);return Qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ts(n.unaryFilter.field);return Qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ts(n.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ts(n.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(Ts(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zn.create(n.compositeFilter.filters.map(i=>wx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function B2(t){return C2[t]}function z2(t){return A2[t]}function $2(t){return P2[t]}function Es(t){return{fieldPath:t.canonicalString()}}function Ts(t){return st.fromServerFormat(t.fieldPath)}function Ex(t){return t instanceof Qe?function(n){if(n.op==="=="){if(d0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(h0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(h0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:z2(n.op),value:n.value}}}(t):t instanceof zn?function(n){const i=n.getFilters().map(r=>Ex(r));return i.length===1?i[0]:{compositeFilter:{op:$2(n.op),filters:i}}}(t):X()}function W2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,i,r,s=J.min(),o=J.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.ct=e}}function q2(t){const e=j2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.un=new G2}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(rr.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class G2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new lt(Ie.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new lt(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ao(0)}static kn(){return new ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.changes=new Eo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ca(i.mutation,r,Kt.empty(),Xe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ae()){const r=Mr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=la();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Mr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ae()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=pi();const o=ka(),a=function(){return ka()}();return n.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof mr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ca(h.mutation,u,h.mutation.getFieldMask(),Xe.now())):o.set(u.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new Y2(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=ka();let r=new Fe((o,a)=>o-a),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=i.get(l)||Kt.empty();h=a.applyToLocalView(u,h),i.set(l,h);const d=(r.get(a.batchId)||ae()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=nx();h.forEach(f=>{if(!s.has(f)){const g=lx(n.get(f),i.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return j.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):s2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):j.resolve(Mr());let a=-1,l=s;return o.next(u=>j.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ae())).next(h=>({batchId:a,changes:tx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(i=>{let r=la();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=la();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const u=function(d,f){return new Oh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,et.newInvalidDocument(h)))});let a=la();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Ca(h.mutation,u,Kt.empty(),Xe.now()),Vh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Qt(r.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:q2(r.bundledQuery),readTime:Qt(r.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.overlays=new Fe(Y.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Mr();return j.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const r=Mr(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return j.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Fe((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=Mr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Mr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return j.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new I2(n,i));let s=this.Ir.get(n);s===void 0&&(s=ae(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(){this.Tr=new lt(Je.Er),this.dr=new lt(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Je(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Y(new Ie([])),i=new Je(n,e),r=new Je(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Ie([])),i=new Je(n,e),r=new Je(n,e+1);let s=ae();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Je(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(Je.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new T2(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Je(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Je(n,0),r=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new lt(ge);return n.forEach(r=>{const s=new Je(r,0),o=new Je(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),j.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Y.isDocumentKey(s)||(s=s.child(""));const o=new Je(new Y(s),0);let a=new lt(ge);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return j.forEach(n.mutations,r=>{const s=new Je(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Je(n,0),r=this.br.firstAfterOrEqual(i);return j.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.Mr=e,this.docs=function(){return new Fe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():et.newInvalidDocument(n))}getEntries(e,n){let i=pi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():et.newInvalidDocument(r))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=pi();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||jM(FM(h),i)<=0||(r.has(h.key)||Vh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,i,r){X()}Or(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new iO(this)}getSize(e){return j.resolve(this.size)}}class iO extends Q2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.persistence=e,this.Nr=new Eo(n=>dg(n),fg),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vg,this.targetCount=0,this.kr=ao.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ao(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),j.waitFor(s).next(()=>r)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lg(0),this.Kr=!1,this.Kr=!0,this.$r=new eO,this.referenceDelegate=e(this),this.Ur=new rO(this),this.indexManager=new K2,this.remoteDocumentCache=function(r){return new nO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new H2(n),this.Gr=new J2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new tO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);const r=new oO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class oO extends BM{constructor(e){super(),this.currentSequenceNumber=e}}class wg{constructor(e){this.persistence=e,this.Jr=new vg,this.Yr=null}static Zr(e){return new wg(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,i=>{const r=Y.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ae(),r=ae();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Eg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zP()?8:zM(Tt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new aO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(qo()<=ue.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(qo()<=ue.DEBUG&&H("QueryEngine","Query:",ws(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(qo()<=ue.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):j.resolve())}Yi(e,n){if(g0(n))return j.resolve(null);let i=Vn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Np(n,null,"F"),i=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ae(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Np(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return g0(n)||r.isEqual(J.min())?j.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?j.resolve(null):(qo()<=ue.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ws(n)),this.rs(e,o,n,VM(r,-1)).next(a=>a))})}ts(e,n){let i=new lt(ZS(e));return n.forEach((r,s)=>{Vh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return qo()<=ue.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ws(n)),this.Ji.getDocumentsMatchingQuery(e,n,rr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Fe(ge),this._s=new Eo(s=>dg(s),fg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function cO(t,e,n,i){return new uO(t,e,n,i)}async function Ix(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ae();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function hO(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let g=j.resolve();return f.forEach(v=>{g=g.next(()=>h.getEntry(l,v)).next(w=>{const I=u.docVersions.get(v);pe(I!==null),w.version.compareTo(I)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ae();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Sx(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function dO(t,e){const n=ee(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ct.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(w,I,T){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=pi(),u=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(fO(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!i.isEqual(J.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function fO(t,e,n){let i=ae(),r=ae();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=pi();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function pO(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function mO(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,j.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Fi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Lp(t,e,n){const i=ee(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Al(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function k0(t,e,n){const i=ee(t);let r=J.min(),s=ae();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=ee(l),f=d._s.get(h);return f!==void 0?j.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(i,o,Vn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:J.min(),n?s:ae())).next(a=>(gO(i,a2(e),a),{documents:a,Ts:s})))}function gO(t,e,n){let i=t.us.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class C0{constructor(){this.activeTargetIds=f2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yO{constructor(){this.so=new C0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new C0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu=null;function tf(){return Tu===null?Tu=function(){return 268435456+Math.round(2147483648*Math.random())}():Tu++,"0x"+Tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class EO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=tf(),l=this.xo(n,i.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw io("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=vO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=tf();return new Promise((o,a)=>{const l=new LS;l.setWithCredentials(!0),l.listenOnce(VS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zu.NO_ERROR:const h=l.getResponseJson();H(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Zu.TIMEOUT:H(gt,`RPC '${e}' ${s} timed out`),a(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const d=l.getStatus();if(H(gt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const v=function(I){const T=I.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(T)>=0?T:F.UNKNOWN}(g.status);a(new K(v,g.message))}else a(new K(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{H(gt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);H(gt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=tf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=US(),a=jS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");H(gt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,g=!1;const v=new wO({Io:I=>{g?H(gt,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(f||(H(gt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),H(gt,`RPC '${e}' stream ${r} sending:`,I),d.send(I))},To:()=>d.close()}),w=(I,T,E)=>{I.listen(T,b=>{try{E(b)}catch(R){setTimeout(()=>{throw R},0)}})};return w(d,aa.EventType.OPEN,()=>{g||(H(gt,`RPC '${e}' stream ${r} transport opened.`),v.yo())}),w(d,aa.EventType.CLOSE,()=>{g||(g=!0,H(gt,`RPC '${e}' stream ${r} transport closed`),v.So())}),w(d,aa.EventType.ERROR,I=>{g||(g=!0,io(gt,`RPC '${e}' stream ${r} transport errored:`,I),v.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),w(d,aa.EventType.MESSAGE,I=>{var T;if(!g){const E=I.data[0];pe(!!E);const b=E,R=b.error||((T=b[0])===null||T===void 0?void 0:T.error);if(R){H(gt,`RPC '${e}' stream ${r} received error:`,R);const M=R.status;let N=function(k){const C=We[k];if(C!==void 0)return dx(C)}(M),S=R.message;N===void 0&&(N=F.INTERNAL,S="Unknown error status: "+M+" with message "+R.message),g=!0,v.So(new K(N,S)),d.close()}else H(gt,`RPC '${e}' stream ${r} received:`,E),v.bo(E)}}),w(a,FS.STAT_EVENT,I=>{I.stat===kp.PROXY?H(gt,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===kp.NOPROXY&&H(gt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t){return new R2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tg(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(fi(n.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new K(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TO extends xx{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=O2(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Qt(o.readTime):J.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Op(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Rp(l)?{documents:V2(s,l)}:{query:F2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=mx(s,o.resumeToken);const u=Dp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Kc(s,o.snapshotVersion.toTimestamp());const u=Dp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=U2(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Op(this.serializer),n.removeTarget=e,this.a_(n)}}class IO extends xx{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=L2(e.writeResults,e.commitTime),i=Qt(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Op(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>vx(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Mp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Mp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fi(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{us(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ee(l);u.L_.add(4),await Dl(u),u.q_.set("Unknown"),u.L_.delete(4),await $h(u)}(this))})}),this.q_=new xO(i,r)}}async function $h(t){if(us(t))for(const e of t.B_)await e(!0)}async function Dl(t){for(const e of t.B_)await e(!1)}function bx(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),bg(n)?xg(n):To(n).r_()&&Sg(n,e))}function Ig(t,e){const n=ee(t),i=To(n);n.N_.delete(e),i.r_()&&kx(n,e),n.N_.size===0&&(i.r_()?i.o_():us(n)&&n.q_.set("Unknown"))}function Sg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(t).A_(e)}function kx(t,e){t.Q_.xe(e),To(t).R_(e)}function xg(t){t.Q_=new k2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),To(t).start(),t.q_.v_()}function bg(t){return us(t)&&!To(t).n_()&&t.N_.size>0}function us(t){return ee(t).L_.size===0}function Cx(t){t.Q_=void 0}async function kO(t){t.q_.set("Online")}async function CO(t){t.N_.forEach((e,n)=>{Sg(t,e)})}async function AO(t,e){Cx(t),bg(t)?(t.q_.M_(e),xg(t)):t.q_.set("Unknown")}async function PO(t,e,n){if(t.q_.set("Online"),e instanceof px&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Qc(t,i)}else if(e instanceof nc?t.Q_.Ke(e):e instanceof fx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const i=await Sx(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),kx(s,l);const d=new Fi(h.target,l,u,h.sequenceNumber);Sg(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){H("RemoteStore","Failed to raise snapshot:",i),await Qc(t,i)}}async function Qc(t,e,n){if(!Al(e))throw e;t.L_.add(1),await Dl(t),t.q_.set("Offline"),n||(n=()=>Sx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $h(t)})}function Ax(t,e){return e().catch(n=>Qc(t,n,e))}async function Wh(t){const e=ee(t),n=or(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;RO(e);)try{const r=await pO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,NO(e,r)}catch(r){await Qc(e,r)}Px(e)&&Rx(e)}function RO(t){return us(t)&&t.O_.length<10}function NO(t,e){t.O_.push(e);const n=or(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Px(t){return us(t)&&!or(t).n_()&&t.O_.length>0}function Rx(t){or(t).start()}async function DO(t){or(t).p_()}async function MO(t){const e=or(t);for(const n of t.O_)e.m_(n.mutations)}async function OO(t,e,n){const i=t.O_.shift(),r=gg.from(i,e,n);await Ax(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Wh(t)}async function LO(t,e){e&&or(t).V_&&await async function(i,r){if(function(o){return hx(o)&&o!==F.ABORTED}(r.code)){const s=i.O_.shift();or(i).s_(),await Ax(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Wh(i)}}(t,e),Px(t)&&Rx(t)}async function P0(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const i=us(n);n.L_.add(3),await Dl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $h(n)}async function VO(t,e){const n=ee(t);e?(n.L_.delete(2),await $h(n)):e||(n.L_.add(2),await Dl(n),n.q_.set("Unknown"))}function To(t){return t.K_||(t.K_=function(n,i,r){const s=ee(n);return s.w_(),new TO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:kO.bind(null,t),Ro:CO.bind(null,t),mo:AO.bind(null,t),d_:PO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),bg(t)?xg(t):t.q_.set("Unknown")):(await t.K_.stop(),Cx(t))})),t.K_}function or(t){return t.U_||(t.U_=function(n,i,r){const s=ee(n);return s.w_(),new IO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DO.bind(null,t),mo:LO.bind(null,t),f_:MO.bind(null,t),g_:OO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wh(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new kg(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(t,e){if(fi("AsyncQueue",`${e}: ${t}`),Al(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Y.comparator(n.key,i.key):(n,i)=>Y.comparator(n.key,i.key),this.keyedMap=la(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new qs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new qs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.W_=new Fe(Y.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class lo{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new lo(e,n,qs.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class jO{constructor(){this.queries=N0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ee(n),s=r.queries;r.queries=N0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function N0(){return new Eo(t=>JS(t),Lh)}async function UO(t,e){const n=ee(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new FO,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Cg(o,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ag(n)}async function BO(t,e){const n=ee(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function zO(t,e){const n=ee(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Ag(n)}function $O(t,e,n){const i=ee(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Ag(t){t.Y_.forEach(e=>{e.next()})}var Vp,D0;(D0=Vp||(Vp={})).ea="default",D0.Cache="cache";class WO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.key=e}}class Dx{constructor(e){this.key=e}}class HO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=ZS(e),this.Ra=new qs(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new R0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),g=Vh(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let I=!1;f&&g?f.data.isEqual(g.data)?v!==w&&(i.track({type:3,doc:g}),I=!0):this.ga(f,g)||(i.track({type:2,doc:g}),I=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!f&&g?(i.track({type:0,doc:g}),I=!0):f&&!g&&(i.track({type:1,doc:f}),I=!0,(l||u)&&(a=!0)),I&&(g?(o=o.add(g),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,v){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return w(g)-w(v)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new lo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new R0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Dx(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Nx(i))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return lo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class qO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class KO{constructor(e){this.key=e,this.va=!1}}class GO{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Eo(a=>JS(a),Lh),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(Y.comparator),this.Na=new Map,this.La=new vg,this.Ba={},this.ka=new Map,this.qa=ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function QO(t,e,n=!0){const i=jx(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await Mx(i,e,n,!0),r}async function YO(t,e){const n=jx(t);await Mx(n,e,!0,!1)}async function Mx(t,e,n,i){const r=await mO(t.localStore,Vn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await XO(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&bx(t.remoteStore,r),a}async function XO(t,e,n,i,r){t.Ka=(d,f,g)=>async function(w,I,T,E){let b=I.view.ma(T);b.ns&&(b=await k0(w.localStore,I.query,!1).then(({documents:S})=>I.view.ma(S,b)));const R=E&&E.targetChanges.get(I.targetId),M=E&&E.targetMismatches.get(I.targetId)!=null,N=I.view.applyChanges(b,w.isPrimaryClient,R,M);return O0(w,I.targetId,N.wa),N.snapshot}(t,d,f,g);const s=await k0(t.localStore,e,!0),o=new HO(e,s.Ts),a=o.ma(s.documents),l=Nl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);O0(t,n,u.wa);const h=new qO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function JO(t,e,n){const i=ee(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Lh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Lp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ig(i.remoteStore,r.targetId),Fp(i,r.targetId)}).catch(Cl)):(Fp(i,r.targetId),await Lp(i.localStore,r.targetId,!0))}async function ZO(t,e){const n=ee(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ig(n.remoteStore,i.targetId))}async function eL(t,e,n){const i=aL(t);try{const r=await function(o,a){const l=ee(o),u=Xe.now(),h=a.reduce((g,v)=>g.add(v.key),ae());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=pi(),w=ae();return l.cs.getEntries(g,h).next(I=>{v=I,v.forEach((T,E)=>{E.isValidDocument()||(w=w.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(I=>{d=I;const T=[];for(const E of a){const b=E2(E,d.get(E.key).overlayedDocument);b!=null&&T.push(new mr(E.key,b,HS(b.value.mapValue),vt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,T,a)}).next(I=>{f=I;const T=I.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(g,I.batchId,T)})}).then(()=>({batchId:f.batchId,changes:tx(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Fe(ge)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await Ml(i,r.changes),await Wh(i.remoteStore)}catch(r){const s=Cg(r,"Failed to persist write");n.reject(s)}}async function Ox(t,e){const n=ee(t);try{const i=await dO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(pe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?pe(o.va):r.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await Ml(n,i,e)}catch(i){await Cl(i)}}function M0(t,e,n){const i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&Ag(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tL(t,e,n){const i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Fe(Y.comparator);o=o.insert(s,et.newNoDocument(s,J.min()));const a=ae().add(s),l=new Bh(J.min(),new Map,new Fe(ge),o,a);await Ox(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Pg(i)}else await Lp(i.localStore,e,!1).then(()=>Fp(i,e,n)).catch(Cl)}async function nL(t,e){const n=ee(t),i=e.batch.batchId;try{const r=await hO(n.localStore,e);Vx(n,i,null),Lx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ml(n,r)}catch(r){await Cl(r)}}async function iL(t,e,n){const i=ee(t);try{const r=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(pe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);Vx(i,e,n),Lx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ml(i,r)}catch(r){await Cl(r)}}function Lx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Vx(t,e,n){const i=ee(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Fp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||Fx(t,i)})}function Fx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ig(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Pg(t))}function O0(t,e,n){for(const i of n)i instanceof Nx?(t.La.addReference(i.key,e),rL(t,i)):i instanceof Dx?(H("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Fx(t,i.key)):X()}function rL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(i),Pg(t))}function Pg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Ie.fromString(e)),i=t.qa.next();t.Na.set(i,new KO(n)),t.Oa=t.Oa.insert(n,i),bx(t.remoteStore,new Fi(Vn(pg(n.path)),i,"TargetPurposeLimboResolution",lg.oe))}}async function Ml(t,e,n){const i=ee(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){r.push(u);const d=Eg.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(u,f=>j.forEach(f.$i,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>j.forEach(f.Ui,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Al(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=h.os.get(f),v=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(f,w)}}}(i.localStore,s))}async function sL(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const i=await Ix(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new K(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ml(n,i.hs)}}function oL(t,e){const n=ee(t),i=n.Na.get(e);if(i&&i.va)return ae().add(i.key);{let r=ae();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function jx(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ox.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tL.bind(null,e),e.Ca.d_=zO.bind(null,e.eventManager),e.Ca.$a=$O.bind(null,e.eventManager),e}function aL(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iL.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return cO(this.persistence,new lO,e.initialUser,this.serializer)}Ga(e){return new sO(wg.Zr,this.serializer)}Wa(e){return new yO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>M0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sL.bind(null,this.syncEngine),await VO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jO}()}createDatastore(e){const n=zh(e.databaseInfo.databaseId),i=function(s){return new EO(s)}(e.databaseInfo);return function(s,o,a,l){return new SO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new bO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>M0(this.syncEngine,n,0),function(){return A0.D()?new A0:new _O}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,h){const d=new GO(r,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ee(r);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Dl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jp.provider={build:()=>new jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=ee(r),a={documents:s.map(d=>Gc(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ie.emptyPath(),a,s.length),u=new Map;l.forEach(d=>{const f=M2(o.serializer,d);u.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=u.get(d.toString());pe(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=Y.fromPath(i);this.mutations.push(new cx(r,this.precondition(r)))}),await async function(i,r){const s=ee(i),o={writes:r.map(a=>vx(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Ie.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X();n=J.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new K(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(J.min())?vt.exists(!1):vt.updateTime(n):vt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new K(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(n)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new Tg(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new uL(this.datastore),n=this.cu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const n=this.updateFunction(e);return!Pl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!hx(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=yt.UNAUTHENTICATED,this.clientId=zS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Cg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function rf(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Ix(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function L0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dL(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>P0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>P0(e.remoteStore,r)),t._onlineComponents=e}async function dL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await rf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===F.FAILED_PRECONDITION||r.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;io("Error using user provided cache. Falling back to memory cache: "+n),await rf(t,new Yc)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await rf(t,new Yc);return t._offlineComponents}async function Rg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await L0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await L0(t,new jp))),t._onlineComponents}function fL(t){return Rg(t).then(e=>e.syncEngine)}function pL(t){return Rg(t).then(e=>e.datastore)}async function V0(t){const e=await Rg(t),n=e.eventManager;return n.onListen=QO.bind(null,e.syncEngine),n.onUnlisten=JO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZO.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mL(t,e,n,i){if(e===!0&&i===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function j0(t){if(!Y.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U0(t){if(Y.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ng(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ng(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ux((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new CM;switch(i.type){case"firstParty":return new NM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=F0.get(n);i&&(H("ComponentProvider","Removing Datastore"),F0.delete(n),i.terminate())}(this),Promise.resolve()}}function gL(t,e,n,i={}){var r;const s=(t=Fn(t,Hh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=yt.MOCK_USER;else{a=LP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(u)}t._authCredentials=new AM(new BS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new qh(this.firestore,e,this._query)}}class At{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class er extends qh{constructor(e,n,i){super(e,n,pg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Y(e))}withConverter(e){return new er(this.firestore,e,this._path)}}function yL(t,e,...n){if(t=Ve(t),Bx("collection","path",e),t instanceof Hh){const i=Ie.fromString(e,...n);return U0(i),new er(t,null,i)}{if(!(t instanceof At||t instanceof er))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ie.fromString(e,...n));return U0(i),new er(t.firestore,null,i)}}function Jr(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=zS.newId()),Bx("doc","path",e),t instanceof Hh){const i=Ie.fromString(e,...n);return j0(i),new At(t,null,new Y(i))}{if(!(t instanceof At||t instanceof er))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ie.fromString(e,...n));return j0(i),new At(t.firestore,t instanceof er?t.converter:null,new Y(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tg(this,"async_queue_retry"),this.Vu=()=>{const i=nf();i&&H("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=nf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Zi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Al(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw fi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=kg.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function $0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Zr extends Hh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new z0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z0(e),this._firestoreClient=void 0,await e}}}function _L(t,e){const n=typeof t=="object"?t:XI(),i=typeof t=="string"?t:"(default)",r=Il(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=MP("firestore");s&&gL(r,...s)}return r}function Dg(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vL(t),t._firestoreClient}function vL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,h){return new HM(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ux(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new hL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es(ct.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new es(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=/^__.*__$/;class EL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rl(e,this.data,n,this.fieldTransforms)}}class zx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $x(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Lg{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($x(this.Cu)&&wL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class TL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||zh(e)}Qu(e,n,i,r=!1){return new Lg({Cu:e,methodName:n,qu:i,path:st.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vg(t){const e=t._freezeSettings(),n=zh(t._databaseId);return new TL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Wx(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);jg("Data must be an object, but it was:",o,i);const a=Kx(i,o);let l,u;if(s.merge)l=new Kt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Up(e,d,n);if(!o.contains(f))throw new K(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Qx(h,f)||h.push(f)}l=new Kt(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new EL(new kt(a),l,u)}class Gh extends Kh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gh}}class Fg extends Kh{_toFieldTransform(e){return new y2(e.path,new ul)}isEqual(e){return e instanceof Fg}}function Hx(t,e,n,i){const r=t.Qu(1,e,n);jg("Data must be an object, but it was:",r,i);const s=[],o=kt.empty();ls(i,(l,u)=>{const h=Ug(e,l,n);u=Ve(u);const d=r.Nu(h);if(u instanceof Gh)s.push(h);else{const f=Qh(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Kt(s);return new zx(o,a,r.fieldTransforms)}function qx(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Up(e,i,n)],l=[r];if(s.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Up(e,s[f])),l.push(s[f+1]);const u=[],h=kt.empty();for(let f=a.length-1;f>=0;--f)if(!Qx(u,a[f])){const g=a[f];let v=l[f];v=Ve(v);const w=o.Nu(g);if(v instanceof Gh)u.push(g);else{const I=Qh(v,w);I!=null&&(u.push(g),h.set(g,I))}}const d=new Kt(u);return new zx(h,d,o.fieldTransforms)}function Qh(t,e){if(Gx(t=Ve(t)))return jg("Unsupported field value:",e,t),Kx(t,e);if(t instanceof Kh)return function(i,r){if(!$x(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Qh(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ve(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return p2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Xe.fromDate(i);return{timestampValue:Kc(r.serializer,s)}}if(i instanceof Xe){const s=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kc(r.serializer,s)}}if(i instanceof Mg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof es)return{bytesValue:mx(r.serializer,i._byteString)};if(i instanceof At){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_g(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Og)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return mg(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Ng(i)}`)}(t,e)}function Kx(t,e){const n={};return $S(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(t,(i,r)=>{const s=Qh(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Gx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Mg||t instanceof es||t instanceof At||t instanceof Kh||t instanceof Og)}function jg(t,e,n){if(!Gx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Ng(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Up(t,e,n){if((e=Ve(e))instanceof Ol)return e._internalPath;if(typeof e=="string")return Ug(t,e);throw Xc("Field path arguments must be of type string or ",t,!1,void 0,n)}const IL=new RegExp("[~\\*/\\[\\]]");function Ug(t,e,n){if(e.search(IL)>=0)throw Xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ol(...e.split("."))._internalPath}catch{throw Xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new K(F.INVALID_ARGUMENT,a+t+l)}function Qx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SL extends Jc{data(){return super.data()}}function Yx(t,e){return typeof e=="string"?Ug(t,e):e instanceof Ol?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xx{convertValue(e,n="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ls(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Be(o.doubleValue));return new Og(s)}convertGeoPoint(e){return new Mg(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=cg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const n=sr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ie.fromString(e);pe(Tx(i));const r=new al(i.get(1),i.get(3)),s=new Y(i.popFirst(5));return r.isEqual(n)||fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class bL extends Xx{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bg extends Jc{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Yx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class ic extends Bg{data(e={}){return super.data(e)}}class kL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ls(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ic(this._firestore,this._userDataWriter,i.key,i,new Ls(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new ic(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ls(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ic(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ls(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:CL(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class zg extends Xx{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function Zx(t,e,n){t=Fn(t,At);const i=Fn(t.firestore,Zr),r=Jx(t.converter,e,n);return $g(i,[Wx(Vg(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,vt.none())])}function eb(t,e,n,...i){t=Fn(t,At);const r=Fn(t.firestore,Zr),s=Vg(r);let o;return o=typeof(e=Ve(e))=="string"||e instanceof Ol?qx(s,"updateDoc",t._key,e,n,i):Hx(s,"updateDoc",t._key,e),$g(r,[o.toMutation(t._key,vt.exists(!0))])}function AL(t){return $g(Fn(t.firestore,Zr),[new Uh(t._key,vt.none())])}function tb(t,...e){var n,i,r;t=Ve(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||$0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,u,h;if(t instanceof At)u=Fn(t.firestore,Zr),h=pg(t._key.path),l={next:d=>{e[o]&&e[o](PL(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Fn(t,qh);u=Fn(d.firestore,Zr),h=d._query;const f=new zg(u);l={next:g=>{e[o]&&e[o](new kL(u,f,d,g))},error:e[o+1],complete:e[o+2]},xL(t._query)}return function(f,g,v,w){const I=new lL(w),T=new WO(g,I,v);return f.asyncQueue.enqueueAndForget(async()=>UO(await V0(f),T)),()=>{I.Za(),f.asyncQueue.enqueueAndForget(async()=>BO(await V0(f),T))}}(Dg(u),h,a,l)}function $g(t,e){return function(i,r){const s=new Zi;return i.asyncQueue.enqueueAndForget(async()=>eL(await fL(i),r,s)),s.promise}(Dg(t),e)}function PL(t,e,n){const i=n.docs.get(e._key),r=new zg(t);return new Bg(t,r,e._key,i,new Ls(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL={maxAttempts:5};function Ko(t,e){if((t=Ve(t)).firestore!==e)throw new K(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Vg(n)}get(n){const i=Ko(n,this._firestore),r=new bL(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return X();const o=s[0];if(o.isFoundDocument())return new Jc(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new Jc(this._firestore,r,i._key,null,i.converter);throw X()})}set(n,i,r){const s=Ko(n,this._firestore),o=Jx(s.converter,i,r),a=Wx(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){const o=Ko(n,this._firestore);let a;return a=typeof(i=Ve(i))=="string"||i instanceof Ol?qx(this._dataReader,"Transaction.update",o._key,i,r,s):Hx(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=Ko(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ko(e,this._firestore),i=new zg(this._firestore);return super.get(e).then(r=>new Bg(this._firestore,i,n._key,r._document,new Ls(!1,!1),n.converter))}}function nb(t,e,n){t=Fn(t,Zr);const i=Object.assign(Object.assign({},RL),n);return function(s){if(s.maxAttempts<1)throw new K(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new Zi;return s.asyncQueue.enqueueAndForget(async()=>{const u=await pL(s);new cL(s.asyncQueue,u,a,o,l).au()}),l.promise}(Dg(t),r=>e(new NL(t,r)),i)}function Ll(){return new Fg("serverTimestamp")}(function(e,n=!0){(function(r){wo=r})(vo),Un(new wn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Zr(new PM(i.getProvider("auth-internal")),new MM(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),on(o0,"4.7.3",e),on(o0,"4.7.3","esm2017")})();const ib="@firebase/installations",Wg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=1e4,sb=`w:${Wg}`,ob="FIS_v2",DL="https://firebaseinstallations.googleapis.com/v1",ML=60*60*1e3,OL="installations",LL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ts=new os(OL,LL,VL);function ab(t){return t instanceof In&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb({projectId:t}){return`${DL}/projects/${t}/installations`}function ub(t){return{token:t.token,requestStatus:2,expiresIn:jL(t.expiresIn),creationTime:Date.now()}}async function cb(t,e){const i=(await e.json()).error;return ts.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function hb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function FL(t,{refreshToken:e}){const n=hb(t);return n.append("Authorization",UL(e)),n}async function db(t){const e=await t();return e.status>=500&&e.status<600?t():e}function jL(t){return Number(t.replace("s","000"))}function UL(t){return`${ob} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=lb(t),r=hb(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:ob,appId:t.appId,sdkVersion:sb},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await db(()=>fetch(i,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:ub(u.authToken)}}else throw await cb("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=/^[cdef][\w-]{21}$/,Bp="";function WL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=HL(t);return $L.test(n)?n:Bp}catch{return Bp}}function HL(t){return zL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;function mb(t,e){const n=Yh(t);gb(n,e),qL(n,e)}function gb(t,e){const n=pb.get(t);if(n)for(const i of n)i(e)}function qL(t,e){const n=KL();n&&n.postMessage({key:t,fid:e}),GL()}let Or=null;function KL(){return!Or&&"BroadcastChannel"in self&&(Or=new BroadcastChannel("[Firebase] FID Change"),Or.onmessage=t=>{gb(t.data.key,t.data.fid)}),Or}function GL(){pb.size===0&&Or&&(Or.close(),Or=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL="firebase-installations-database",YL=1,ns="firebase-installations-store";let sf=null;function Hg(){return sf||(sf=QI(QL,YL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ns)}}})),sf}async function Zc(t,e){const n=Yh(t),r=(await Hg()).transaction(ns,"readwrite"),s=r.objectStore(ns),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&mb(t,e.fid),e}async function yb(t){const e=Yh(t),i=(await Hg()).transaction(ns,"readwrite");await i.objectStore(ns).delete(e),await i.done}async function Xh(t,e){const n=Yh(t),r=(await Hg()).transaction(ns,"readwrite"),s=r.objectStore(ns),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&mb(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qg(t){let e;const n=await Xh(t.appConfig,i=>{const r=XL(i),s=JL(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Bp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function XL(t){const e=t||{fid:WL(),registrationStatus:0};return _b(e)}function JL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ts.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=ZL(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eV(t)}:{installationEntry:e}}async function ZL(t,e){try{const n=await BL(t,e);return Zc(t.appConfig,n)}catch(n){throw ab(n)&&n.customData.serverCode===409?await yb(t.appConfig):await Zc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function eV(t){let e=await W0(t.appConfig);for(;e.registrationStatus===1;)await fb(100),e=await W0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await qg(t);return i||n}return e}function W0(t){return Xh(t,e=>{if(!e)throw ts.create("installation-not-found");return _b(e)})}function _b(t){return tV(t)?{fid:t.fid,registrationStatus:0}:t}function tV(t){return t.registrationStatus===1&&t.registrationTime+rb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV({appConfig:t,heartbeatServiceProvider:e},n){const i=iV(t,n),r=FL(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:sb,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await db(()=>fetch(i,a));if(l.ok){const u=await l.json();return ub(u)}else throw await cb("Generate Auth Token",l)}function iV(t,{fid:e}){return`${lb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kg(t,e=!1){let n;const i=await Xh(t.appConfig,s=>{if(!vb(s))throw ts.create("not-registered");const o=s.authToken;if(!e&&oV(o))return s;if(o.requestStatus===1)return n=rV(t,e),s;{if(!navigator.onLine)throw ts.create("app-offline");const a=lV(s);return n=sV(t,a),a}});return n?await n:i.authToken}async function rV(t,e){let n=await H0(t.appConfig);for(;n.authToken.requestStatus===1;)await fb(100),n=await H0(t.appConfig);const i=n.authToken;return i.requestStatus===0?Kg(t,e):i}function H0(t){return Xh(t,e=>{if(!vb(e))throw ts.create("not-registered");const n=e.authToken;return uV(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function sV(t,e){try{const n=await nV(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Zc(t.appConfig,i),n}catch(n){if(ab(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yb(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Zc(t.appConfig,i)}throw n}}function vb(t){return t!==void 0&&t.registrationStatus===2}function oV(t){return t.requestStatus===2&&!aV(t)}function aV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ML}function lV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uV(t){return t.requestStatus===1&&t.requestTime+rb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(t){const e=t,{installationEntry:n,registrationPromise:i}=await qg(e);return i?i.catch(console.error):Kg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t,e=!1){const n=t;return await dV(n),(await Kg(n,e)).token}async function dV(t){const{registrationPromise:e}=await qg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t){if(!t||!t.options)throw of("App Configuration");if(!t.name)throw of("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw of(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function of(t){return ts.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="installations",pV="installations-internal",mV=t=>{const e=t.getProvider("app").getImmediate(),n=fV(e),i=Il(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},gV=t=>{const e=t.getProvider("app").getImmediate(),n=Il(e,wb).getImmediate();return{getId:()=>cV(n),getToken:r=>hV(n,r)}};function yV(){Un(new wn(wb,mV,"PUBLIC")),Un(new wn(pV,gV,"PRIVATE"))}yV();on(ib,Wg);on(ib,Wg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="analytics",_V="firebase_id",vV="origin",wV=60*1e3,EV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt=new Rh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},an=new os("analytics","Analytics",TV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){if(!t.startsWith(Gg)){const e=an.create("invalid-gtag-resource",{gtagURL:t});return zt.warn(e.message),""}return t}function Eb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function SV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function xV(t,e){const n=SV("firebase-js-sdk-policy",{createScriptURL:IV}),i=document.createElement("script"),r=`${Gg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function bV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function kV(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await Eb(n)).find(u=>u.measurementId===r);l&&await e[l.appId]}}catch(a){zt.error(a)}t("config",r,s)}async function CV(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await Eb(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){zt.error(s)}}function AV(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await CV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await kV(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){zt.error(a)}}return r}function PV(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=AV(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function RV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Gg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=30,DV=1e3;class MV{constructor(e={},n=DV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Tb=new MV;function OV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function LV(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:OV(i)},s=EV.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw an.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function VV(t,e=Tb,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw an.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw an.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new UV;return setTimeout(async()=>{a.abort()},wV),Ib({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Ib(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Tb){var s;const{appId:o,measurementId:a}=t;try{await FV(i,e)}catch(l){if(a)return zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await LV(t);return r.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!jV(u)){if(r.deleteThrottleMetadata(o),a)return zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Rv(n,r.intervalMillis,NV):Rv(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),zt.debug(`Calling attemptFetch again in ${h} millis`),Ib(t,d,i,r)}}function FV(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(an.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function jV(t){if(!(t instanceof In)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class UV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function BV(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(){if(HI())try{await qI()}catch(t){return zt.warn(an.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zt.warn(an.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $V(t,e,n,i,r,s,o){var a;const l=VV(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&zt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>zt.error(g)),e.push(l);const u=zV().then(g=>{if(g)return i.getId()}),[h,d]=await Promise.all([l,u]);RV(s)||xV(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[vV]="firebase",f.update=!0,d!=null&&(f[_V]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.app=e}_delete(){return delete Pa[this.app.options.appId],Promise.resolve()}}let Pa={},K0=[];const G0={};let af="dataLayer",HV="gtag",Q0,Sb,Y0=!1;function qV(){const t=[];if(WI()&&t.push("This is a browser extension environment."),$P()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=an.create("invalid-analytics-context",{errorInfo:e});zt.warn(n.message)}}function KV(t,e,n){qV();const i=t.options.appId;if(!i)throw an.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw an.create("no-api-key");if(Pa[i]!=null)throw an.create("already-exists",{id:i});if(!Y0){bV(af);const{wrappedGtag:s,gtagCore:o}=PV(Pa,K0,G0,af,HV);Sb=s,Q0=o,Y0=!0}return Pa[i]=$V(t,K0,G0,e,Q0,af,n),new WV(t)}function GV(t,e,n,i){t=Ve(t),BV(Sb,Pa[t.app.options.appId],e,n,i).catch(r=>zt.error(r))}const X0="@firebase/analytics",J0="0.10.8";function QV(){Un(new wn(q0,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return KV(i,r,n)},"PUBLIC")),Un(new wn("analytics-internal",t,"PRIVATE")),on(X0,J0),on(X0,J0,"esm2017");function t(e){try{const n=e.getProvider(q0).getImmediate();return{logEvent:(i,r,s)=>GV(n,i,r,s)}}catch(n){throw an.create("interop-component-reg-failed",{reason:n})}}}QV();const YV={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},xb=YI(YV),Go=SM(xb),$n=_L(xb),bb=O.createContext(null);function XV({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{const l=dD(Go,u=>{n(u),r(!1)});return()=>l()},[]);const a=O.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,u){o(null);try{return(await oD(Go,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,u){o(null);try{return(await aD(Go,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await fD(Go)},async resetPassword(l){o(null);try{await sD(Go,l)}catch(u){throw o((u==null?void 0:u.message)||"Failed to send reset email."),u}}}),[e,i,s]);return y.jsx(bb.Provider,{value:a,children:t})}function _i(){return O.useContext(bb)}function JV(){const{user:t,logout:e}=_i(),n=_o();async function i(){await e(),n("/dashboard")}return y.jsx("div",{className:"nav",children:y.jsxs("div",{className:"nav-inner",children:[y.jsxs("div",{className:"brand",children:[y.jsx("div",{className:"badge"}),y.jsxs("div",{children:[y.jsx("h1",{children:"Body Recomposition Tracker"}),y.jsx("div",{className:"small",children:"Trend-first logging: weight , strength /"})]})]}),y.jsxs("div",{className:"nav-links",children:[y.jsxs("div",{className:"nav-tabs",children:[y.jsx(gs,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),y.jsx(gs,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&y.jsx(gs,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&y.jsx(gs,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),y.jsx("div",{className:"nav-actions",children:t?y.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):y.jsxs(y.Fragment,{children:[y.jsx(gs,{to:"/login",className:"btn",children:"Log in"}),y.jsx(gs,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function Z0({children:t}){const{user:e,initializing:n}=_i();return n?y.jsx("div",{className:"panel",children:y.jsx("div",{className:"muted",children:"Loading"})}):e?t:y.jsx(gp,{to:"/login",replace:!0})}const kb=O.createContext(null),ew={email:"",sex:"",height:"",targetWeight:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],createdAt:null};function ZV({children:t}){const{user:e}=_i(),[n,i]=O.useState(ew),[r,s]=O.useState(!1),[o,a]=O.useState(null);O.useEffect(()=>{if(i(ew),a(null),!e)return;const u=Jr($n,"users",e.uid);s(!0);const h=tb(u,async d=>{if(!d.exists()){await Zx(u,{email:e.email||"",sex:"",height:"",targetWeight:null,triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],createdAt:Ll()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",targetWeight:f.targetWeight??"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],cycles:Array.isArray(f.cycles)?f.cycles:[],createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=O.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(u){if(!e)throw new Error("Not authenticated");a(null);const h=Jr($n,"users",e.uid);await eb(h,u)}}),[n,r,o,e]);return y.jsx(kb.Provider,{value:l,children:t})}function Qg(){return O.useContext(kb)}function Yg(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function eh(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function th(){return Yg(new Date)}function eF(t,e){const n=eh(t);return n.setDate(n.getDate()+Number(e)),Yg(n)}function tF(t,e){return t.dateIso.localeCompare(e.dateIso)}function Xg(t,e,n){const i=yL($n,"users",t,"entries");return tb(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(tF);e(o)},n)}async function nF(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=Jr($n,"users",t,"entries",n),r=eh(n),s={...e,dateIso:n,date:e.date||r,updatedAt:Ll()};await Zx(i,s,{merge:!0})}async function iF(t,e,n){const i=Jr($n,"users",t,"entries",e);await eb(i,{...n,updatedAt:Ll()})}async function rF(t,e){const n=Jr($n,"users",t,"entries",e);await AL(n)}const sF=2/8;function Cb({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function oF({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function ys(t,e=sF){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function aF(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function lf(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=aF(i,r,s);return Number.isFinite(o)?o:null}function lF({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=lf(n,"neck",i),a=lf(n,"waist",i),l=lf(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const u=a-o;if(!(u>0))return null;const h=495/(1.0324-.19077*Math.log10(u)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const u=a+l-o;if(!(u>0))return null;const h=495/(1.29579-.35004*Math.log10(u)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function uF({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function Ab(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(a=>({dateIso:a.dateIso,weight:Er(a.weight),protein:Er(a.protein),carbs:Er(a.carbs),fats:Er(a.fats),bench:Er(a.bench),squat:Er(a.squat),deadlift:Er(a.deadlift),calories:Cb(a),avgStrength:oF(a),bfPct:lF({sex:i,heightCm:r,entry:a,tripleEnabled:n})}));s.forEach(a=>{a.lbm=uF({weightKg:a.weight,bfPct:a.bfPct})});const o={weight:ys(s.map(a=>a.weight)),bench:ys(s.map(a=>a.bench)),squat:ys(s.map(a=>a.squat)),deadlift:ys(s.map(a=>a.deadlift)),calories:ys(s.map(a=>a.calories)),avgStrength:ys(s.map(a=>a.avgStrength))};return s.map((a,l)=>({...a,wma:{weight:o.weight[l],bench:o.bench[l],squat:o.squat[l],deadlift:o.deadlift[l],calories:o.calories[l],avgStrength:o.avgStrength[l]}}))}function cF(t){var f,g,v,w;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=I=>I*7-1;function s(I){var T;for(let E=I;E>=0;E--){const b=(T=t[E])==null?void 0:T.lbm;if(Number.isFinite(b))return b}return null}for(let I=1;I<=i;I++){const T=(I-1)*7,E=r(I),b=t.slice(T,E+1),R=Qo(b.map(A=>A.calories)),M=Qo(b.map(A=>{var ie;return(ie=A==null?void 0:A.wma)==null?void 0:ie.avgStrength})),N=(g=(f=b[0])==null?void 0:f.wma)==null?void 0:g.weight,S=(w=(v=b[b.length-1])==null?void 0:v.wma)==null?void 0:w.weight,_=Number.isFinite(N)&&Number.isFinite(S)?S-N:null;let k=null;if(Number.isFinite(R)&&Number.isFinite(_)){const ie=-_*7700/7;k=R+ie}const C=s(E);let P=null,D="";Number.isFinite(C)&&Number.isFinite(_)&&(P=Math.max(0,-_)/C*100,P<.5?D="Conservative":P<=1?D="Optimal":D="Aggressive"),e.push({week:I,avgCalories:R,weightChange:_,tdee:k,avgStrengthWma:M,lbm:C,lossRatePct:P,lossRateStatus:D,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(I=>I.tdee).filter(Number.isFinite),a=o.length?Qo(o):null,l=e.slice(0,2).map(I=>I.avgStrengthWma).filter(Number.isFinite),u=l.length?Qo(l):null,h=e.slice(0,2).map(I=>Number.isFinite(I.weightChange)?Math.max(0,-I.weightChange):null).filter(Number.isFinite),d=h.length?Qo(h):null;if(Number.isFinite(a))for(const I of e)Number.isFinite(I.tdee)&&(I.tdeeChangeFromBaseline=I.tdee-a,I.adaptationPct=I.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:u,baselineWeeklyLoss:d}}function Er(t){const e=Number(t);return Number.isFinite(e)?e:null}function Qo(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function Kn(){let t=0,e=0;for(;t===0;)t=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}function tw(t,e,n){return Math.max(e,Math.min(n,t))}function hF(){return{email:"sample@demo.local",sex:"male",height:175,targetWeight:82,triplemeasurements:!1,createdAt:null}}function dF(t=60){const e=new Date;e.setDate(e.getDate()-(t-1));const n=[];let i=90,r=100,s=140,o=180;for(let a=0;a<t;a++){const l=new Date(e);l.setDate(e.getDate()+a);const u=Yg(l),d=2400-Math.floor(a/14)*125;i-=5.5/(t-1),r+=4/(t-1),s+=4/(t-1),o+=5/(t-1);const f=i+Kn()*.8,g=r+Kn()*2,v=s+Kn()*2.5,w=o+Kn()*2.8,I=180+Kn()*10,T=70+Kn()*6,E=(d-4*I-9*T)/4+Kn()*10,b={id:u,dateIso:u,date:null,weight:Iu(f),protein:uf(I),carbs:uf(tw(E,100,320)),fats:uf(tw(T,45,95)),bench:Iu(g),squat:Iu(v),deadlift:Iu(w),neck:null,waist:null,hip:null};if(a%7===0){const N=96+-7*(a/(t-1));b.neck=40+Kn()*.3,b.waist=N+Kn()*.6}n.push(b)}return n}function uf(t){return Number.isFinite(t)?Math.round(t):null}function Iu(t){return Number.isFinite(t)?Math.round(t*10)/10:null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vl(t){return t+.5|0}const ji=(t,e,n)=>Math.max(Math.min(t,n),e);function ca(t){return ji(Vl(t*2.55),0,255)}function tr(t){return ji(Vl(t*255),0,255)}function Zn(t){return ji(Vl(t/2.55)/100,0,1)}function nw(t){return ji(Vl(t*100),0,100)}const Zt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zp=[..."0123456789ABCDEF"],fF=t=>zp[t&15],pF=t=>zp[(t&240)>>4]+zp[t&15],Su=t=>(t&240)>>4===(t&15),mF=t=>Su(t.r)&&Su(t.g)&&Su(t.b)&&Su(t.a);function gF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Zt[t[1]]*17,g:255&Zt[t[2]]*17,b:255&Zt[t[3]]*17,a:e===5?Zt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Zt[t[1]]<<4|Zt[t[2]],g:Zt[t[3]]<<4|Zt[t[4]],b:Zt[t[5]]<<4|Zt[t[6]],a:e===9?Zt[t[7]]<<4|Zt[t[8]]:255})),n}const yF=(t,e)=>t<255?e(t):"";function _F(t){var e=mF(t)?fF:pF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+yF(t.a,e):void 0}const vF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Pb(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function wF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function EF(t,e,n){const i=Pb(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function TF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Jg(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=TF(n,i,r,h,s),l=l*60+.5),[l|0,u||0,a]}function Zg(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(tr)}function ey(t,e,n){return Zg(Pb,t,e,n)}function IF(t,e,n){return Zg(EF,t,e,n)}function SF(t,e,n){return Zg(wF,t,e,n)}function Rb(t){return(t%360+360)%360}function xF(t){const e=vF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?ca(+e[5]):tr(+e[5]));const r=Rb(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=IF(r,s,o):e[1]==="hsv"?i=SF(r,s,o):i=ey(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function bF(t,e){var n=Jg(t);n[0]=Rb(n[0]+e),n=ey(n),t.r=n[0],t.g=n[1],t.b=n[2]}function kF(t){if(!t)return;const e=Jg(t),n=e[0],i=nw(e[1]),r=nw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Zn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const iw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function CF(){const t={},e=Object.keys(rw),n=Object.keys(iw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,iw[s]);s=parseInt(rw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let xu;function AF(t){xu||(xu=CF(),xu.transparent=[0,0,0,0]);const e=xu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const PF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function RF(t){const e=PF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?ca(o):ji(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?ca(i):ji(i,0,255)),r=255&(e[4]?ca(r):ji(r,0,255)),s=255&(e[6]?ca(s):ji(s,0,255)),{r:i,g:r,b:s,a:n}}}function NF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Zn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const cf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,_s=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function DF(t,e,n){const i=_s(Zn(t.r)),r=_s(Zn(t.g)),s=_s(Zn(t.b));return{r:tr(cf(i+n*(_s(Zn(e.r))-i))),g:tr(cf(r+n*(_s(Zn(e.g))-r))),b:tr(cf(s+n*(_s(Zn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function bu(t,e,n){if(t){let i=Jg(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=ey(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Nb(t,e){return t&&Object.assign(e||{},t)}function sw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=tr(t[3]))):(e=Nb(t,{r:0,g:0,b:0,a:1}),e.a=tr(e.a)),e}function MF(t){return t.charAt(0)==="r"?RF(t):xF(t)}class dl{constructor(e){if(e instanceof dl)return e;const n=typeof e;let i;n==="object"?i=sw(e):n==="string"&&(i=gF(e)||AF(e)||MF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Nb(this._rgb);return e&&(e.a=Zn(e.a)),e}set rgb(e){this._rgb=sw(e)}rgbString(){return this._valid?NF(this._rgb):void 0}hexString(){return this._valid?_F(this._rgb):void 0}hslString(){return this._valid?kF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=DF(this._rgb,e._rgb,n)),this}clone(){return new dl(this.rgb)}alpha(e){return this._rgb.a=tr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Vl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return bu(this._rgb,2,e),this}darken(e){return bu(this._rgb,2,-e),this}saturate(e){return bu(this._rgb,1,e),this}desaturate(e){return bu(this._rgb,1,-e),this}rotate(e){return bF(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Gn(){}const OF=(()=>{let t=0;return()=>t++})();function xe(t){return t==null}function ot(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function cn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function bn(t,e){return cn(t)?t:e}function he(t,e){return typeof t>"u"?e:t}const LF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ce(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function we(t,e,n,i){let r,s,o;if(ot(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ve(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function nh(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function ih(t){if(ot(t))return t.map(ih);if(ve(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=ih(t[n[r]]);return e}return t}function Db(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function VF(t,e,n,i){if(!Db(t))return;const r=e[t],s=n[t];ve(r)&&ve(s)?fl(r,s,i):e[t]=ih(s)}function fl(t,e,n){const i=ot(e)?e:[e],r=i.length;if(!ve(t))return t;n=n||{};const s=n.merger||VF;let o;for(let a=0;a<r;++a){if(o=i[a],!ve(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],t,o,n)}return t}function Ra(t,e){return fl(t,e,{merger:FF})}function FF(t,e,n){if(!Db(t))return;const i=e[t],r=n[t];ve(i)&&ve(r)?Ra(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ih(r))}const ow={"":t=>t,x:t=>t.x,y:t=>t.y};function jF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function UF(t){const e=jF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function rh(t,e){return(ow[e]||(ow[e]=UF(e)))(t)}function ty(t){return t.charAt(0).toUpperCase()+t.slice(1)}const sh=t=>typeof t<"u",ar=t=>typeof t=="function",aw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function BF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const wt=Math.PI,jn=2*wt,zF=jn+wt,oh=Number.POSITIVE_INFINITY,$F=wt/180,gn=wt/2,Tr=wt/4,lw=wt*2/3,Mb=Math.log10,uo=Math.sign;function Na(t,e,n){return Math.abs(t-e)<n}function uw(t){const e=Math.round(t);t=Na(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Mb(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function WF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function HF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function pl(t){return!HF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function qF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function KF(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Lr(t){return t*(wt/180)}function GF(t){return t*(180/wt)}function cw(t){if(!cn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function QF(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*wt&&(s+=jn),{angle:s,distance:r}}function $p(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function YF(t,e){return(t-e+zF)%jn-wt}function bi(t){return(t%jn+jn)%jn}function Ob(t,e,n,i){const r=bi(t),s=bi(e),o=bi(n),a=bi(s-r),l=bi(o-r),u=bi(r-s),h=bi(r-o);return r===s||r===o||i&&s===o||a>l&&u<h}function rn(t,e,n){return Math.max(e,Math.min(n,t))}function XF(t){return rn(t,-32768,32767)}function ha(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function ny(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Vr=(t,e,n,i)=>ny(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),JF=(t,e,n)=>ny(t,n,i=>t[i][e]>=n);function ZF(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Lb=["push","pop","shift","splice","unshift"];function ej(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Lb.forEach(n=>{const i="_onData"+ty(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function hw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Lb.forEach(s=>{delete t[s]}),delete t._chartjs)}function tj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Vb=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Fb(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Vb.call(window,()=>{i=!1,t.apply(e,n)}))}}function nj(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const jb=t=>t==="start"?"left":t==="end"?"right":"center",Wt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,ij=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function rj(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:g,maxDefined:v}=o.getUserBounds();if(g){if(r=Math.min(Vr(l,h,d).lo,n?i:Vr(e,h,o.getPixelForValue(d)).lo),u){const w=l.slice(0,r+1).reverse().findIndex(I=>!xe(I[a.axis]));r-=Math.max(0,w)}r=rn(r,0,i-1)}if(v){let w=Math.max(Vr(l,o.axis,f,!0).hi+1,n?0:Vr(e,h,o.getPixelForValue(f),!0).hi+1);if(u){const I=l.slice(w-1).findIndex(T=>!xe(T[a.axis]));w+=Math.max(0,I)}s=rn(w,r,i)-r}else s=i-r}return{start:r,count:s}}function sj(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const ku=t=>t===0||t===1,dw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*jn/n)),fw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*jn/n)+1,Da={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*gn)+1,easeOutSine:t=>Math.sin(t*gn),easeInOutSine:t=>-.5*(Math.cos(wt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ku(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ku(t)?t:dw(t,.075,.3),easeOutElastic:t=>ku(t)?t:fw(t,.075,.3),easeInOutElastic(t){return ku(t)?t:t<.5?.5*dw(t*2,.1125,.45):.5+.5*fw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Da.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Da.easeInBounce(t*2)*.5:Da.easeOutBounce(t*2-1)*.5+.5};function iy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function pw(t){return iy(t)?t:new dl(t)}function hf(t){return iy(t)?t:new dl(t).saturate(.5).darken(.1).hexString()}const oj=["x","y","borderWidth","radius","tension"],aj=["color","borderColor","backgroundColor"];function lj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:aj},numbers:{type:"number",properties:oj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function uj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const mw=new Map;function cj(t,e){e=e||{};const n=t+JSON.stringify(e);let i=mw.get(n);return i||(i=new Intl.NumberFormat(t,e),mw.set(n,i)),i}function Ub(t,e,n){return cj(e,n).format(t)}const hj={values(t){return ot(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=dj(t,n)}const o=Mb(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Ub(t,i,l)}};function dj(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Bb={formatters:hj};function fj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Bb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const is=Object.create(null),Wp=Object.create(null);function Ma(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function df(t,e,n){return typeof e=="string"?fl(Ma(t,e),n):fl(Ma(t,""),e)}class pj{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>hf(r.backgroundColor),this.hoverBorderColor=(i,r)=>hf(r.borderColor),this.hoverColor=(i,r)=>hf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return df(this,e,n)}get(e){return Ma(this,e)}describe(e,n){return df(Wp,e,n)}override(e,n){return df(is,e,n)}route(e,n,i,r){const s=Ma(this,e),o=Ma(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return ve(l)?Object.assign({},u,l):he(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var $e=new pj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[lj,uj,fj]);function mj(t){return!t||xe(t.size)||xe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function gw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Ir(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function yw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Hp(t,e,n,i){zb(t,e,n,i,null)}function zb(t,e,n,i,r){let s,o,a,l,u,h,d,f;const g=e.pointStyle,v=e.rotation,w=e.radius;let I=(v||0)*$F;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(I),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,i,r/2,w,0,0,jn):t.arc(n,i,w,0,jn),t.closePath();break;case"triangle":h=r?r/2:w,t.moveTo(n+Math.sin(I)*h,i-Math.cos(I)*w),I+=lw,t.lineTo(n+Math.sin(I)*h,i-Math.cos(I)*w),I+=lw,t.lineTo(n+Math.sin(I)*h,i-Math.cos(I)*w),t.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(I+Tr)*l,d=Math.cos(I+Tr)*(r?r/2-u:l),a=Math.sin(I+Tr)*l,f=Math.sin(I+Tr)*(r?r/2-u:l),t.arc(n-d,i-a,u,I-wt,I-gn),t.arc(n+f,i-o,u,I-gn,I),t.arc(n+d,i+a,u,I,I+gn),t.arc(n-f,i+o,u,I+gn,I+wt),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}I+=Tr;case"rectRot":d=Math.cos(I)*(r?r/2:w),o=Math.cos(I)*w,a=Math.sin(I)*w,f=Math.sin(I)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":I+=Tr;case"cross":d=Math.cos(I)*(r?r/2:w),o=Math.cos(I)*w,a=Math.sin(I)*w,f=Math.sin(I)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(I)*(r?r/2:w),o=Math.cos(I)*w,a=Math.sin(I)*w,f=Math.sin(I)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),I+=Tr,d=Math.cos(I)*(r?r/2:w),o=Math.cos(I)*w,a=Math.sin(I)*w,f=Math.sin(I)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(I)*w,a=Math.sin(I)*w,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(I)*(r?r/2:w),i+Math.sin(I)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ml(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ry(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function sy(t){t.restore()}function gj(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function yj(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function _j(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),xe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function vj(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function wj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ah(t,e,n,i,r,s={}){const o=ot(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,_j(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&wj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),xe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,i,s.maxWidth)),t.fillText(u,n,i,s.maxWidth),vj(t,n,i,u,s),i+=Number(r.lineHeight);t.restore()}function qp(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*wt,wt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,wt,gn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,gn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-gn,!0),t.lineTo(n+o.topLeft,i)}const Ej=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Tj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ij(t,e){const n=(""+t).match(Ej);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Sj=t=>+t||0;function $b(t,e){const n={},i=ve(e),r=i?Object.keys(e):e,s=ve(t)?i?o=>he(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Sj(s(o));return n}function xj(t){return $b(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Oa(t){return $b(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Tn(t){const e=xj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ft(t,e){t=t||{},e=e||$e.font;let n=he(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=he(t.style,e.style);i&&!(""+i).match(Tj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:he(t.family,e.family),lineHeight:Ij(he(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:he(t.weight,e.weight),string:""};return r.string=mj(r),r}function Cu(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function bj(t,e,n){const{min:i,max:r}=t,s=LF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function cs(t,e){return Object.assign(Object.create(t),e)}function oy(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Kb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>oy([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Hb(a,l,()=>Mj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return vw(a).includes(l)},ownKeys(a){return vw(a)},set(a,l,u){const h=a._storage||(a._storage=r());return a[l]=h[l]=u,delete a._keys,!0}})}function co(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Wb(t,i),setContext:s=>co(t,s,n,i),override:s=>co(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return Hb(s,o,()=>Cj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function Wb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ar(n)?n:()=>n,isIndexable:ar(i)?i:()=>i}}const kj=(t,e)=>t?t+ty(e):e,ay=(t,e)=>ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Hb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Cj(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return ar(a)&&o.isScriptable(e)&&(a=Aj(e,a,t,n)),ot(a)&&a.length&&(a=Pj(e,a,t,o.isIndexable)),ay(e,a)&&(a=co(a,r,s&&s[e],o)),a}function Aj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),ay(t,l)&&(l=ly(r._scopes,r,t,l)),l}function Pj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ve(e[0])){const l=e,u=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=ly(u,r,t,h);e.push(co(d,s,o&&o[t],a))}}return e}function qb(t,e,n){return ar(t)?t(e,n):t}const Rj=(t,e)=>t===!0?e:typeof t=="string"?rh(e,t):void 0;function Nj(t,e,n,i,r){for(const s of e){const o=Rj(n,s);if(o){t.add(o);const a=qb(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function ly(t,e,n,i){const r=e._rootScopes,s=qb(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=_w(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=_w(a,o,s,l,i),l===null)?!1:oy(Array.from(a),[""],r,s,()=>Dj(e,n,i))}function _w(t,e,n,i,r){for(;n;)n=Nj(t,e,n,i,r);return n}function Dj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return ot(r)&&ve(n)?n:r||{}}function Mj(t,e,n,i){let r;for(const s of e)if(r=Kb(kj(s,t),n),typeof r<"u")return ay(t,r)?ly(n,i,t,r):r}function Kb(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function vw(t){let e=t._keys;return e||(e=t._keys=Oj(t._scopes)),e}function Oj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const Lj=Number.EPSILON||1e-14,ho=(t,e)=>e<t.length&&!t[e].skip&&t[e],Gb=t=>t==="x"?"y":"x";function Vj(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=$p(s,r),l=$p(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function Fj(t,e,n){const i=t.length;let r,s,o,a,l,u=ho(t,0);for(let h=0;h<i-1;++h)if(l=u,u=ho(t,h+1),!(!l||!u)){if(Na(e[h],0,Lj)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function jj(t,e,n="x"){const i=Gb(n),r=t.length;let s,o,a,l=ho(t,0);for(let u=0;u<r;++u){if(o=a,a=l,l=ho(t,u+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[u]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[u])}}function Uj(t,e="x"){const n=Gb(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,u=ho(t,0);for(o=0;o<i;++o)if(a=l,l=u,u=ho(t,o+1),!!l){if(u){const h=u[e]-l[e];r[o]=h!==0?(u[n]-l[n])/h:0}s[o]=a?u?uo(r[o-1])!==uo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Fj(t,r,s),jj(t,s,e)}function Au(t,e,n){return Math.max(Math.min(t,n),e)}function Bj(t,e){let n,i,r,s,o,a=ml(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&ml(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Au(r.cp1x,e.left,e.right),r.cp1y=Au(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Au(r.cp2x,e.left,e.right),r.cp2y=Au(r.cp2y,e.top,e.bottom)))}function zj(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Uj(t,r);else{let u=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Vj(u,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&Bj(t,n)}function uy(){return typeof window<"u"&&typeof document<"u"}function cy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function lh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Jh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function $j(t,e){return Jh(t).getPropertyValue(e)}const Wj=["top","right","bottom","left"];function Br(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Wj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Hj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function qj(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Hj(r,s,t.target))a=r,l=s;else{const u=e.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Ar(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Jh(n),s=r.boxSizing==="border-box",o=Br(r,"padding"),a=Br(r,"border","width"),{x:l,y:u,box:h}=qj(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:v}=e;return s&&(g-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/g*n.width/i),y:Math.round((u-f)/v*n.height/i)}}function Kj(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&cy(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Jh(s),l=Br(a,"border","width"),u=Br(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,i=lh(a.maxWidth,s,"clientWidth"),r=lh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||oh,maxHeight:r||oh}}const Ui=t=>Math.round(t*10)/10;function Gj(t,e,n,i){const r=Jh(t),s=Br(r,"margin"),o=lh(r.maxWidth,t,"clientWidth")||oh,a=lh(r.maxHeight,t,"clientHeight")||oh,l=Kj(t,e,n);let{width:u,height:h}=l;if(r.boxSizing==="content-box"){const f=Br(r,"border","width"),g=Br(r,"padding");u-=g.width+f.width,h-=g.height+f.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=Ui(Math.min(u,o,l.maxWidth)),h=Ui(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Ui(u/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,u=Ui(Math.floor(h*i))),{width:u,height:h}}function ww(t,e,n){const i=e||1,r=Ui(t.height*i),s=Ui(t.width*i);t.height=Ui(t.height),t.width=Ui(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Qj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};uy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Ew(t,e){const n=$j(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Pr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Yj(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Xj(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Pr(t,r,n),a=Pr(r,s,n),l=Pr(s,e,n),u=Pr(o,a,n),h=Pr(a,l,n);return Pr(u,h,n)}const Jj=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Zj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ks(t,e,n){return t?Jj(e,n):Zj()}function Qb(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Yb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Xb(t){return t==="angle"?{between:Ob,compare:YF,normalize:bi}:{between:ha,compare:(e,n)=>e-n,normalize:e=>e}}function Tw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function e4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=Xb(i),l=e.length;let{start:u,end:h,loop:d}=t,f,g;if(d){for(u+=l,h+=l,f=0,g=l;f<g&&o(a(e[u%l][i]),r,s);++f)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:d,style:t.style}}function t4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=Xb(i),{start:h,end:d,loop:f,style:g}=e4(t,e,n),v=[];let w=!1,I=null,T,E,b;const R=()=>l(r,b,T)&&a(r,b)!==0,M=()=>a(s,T)===0||l(s,b,T),N=()=>w||R(),S=()=>!w||M();for(let _=h,k=h;_<=d;++_)E=e[_%o],!E.skip&&(T=u(E[i]),T!==b&&(w=l(T,r,s),I===null&&N()&&(I=a(T,r)===0?_:k),I!==null&&S()&&(v.push(Tw({start:I,end:_,loop:f,count:o,style:g})),I=null),k=_,b=T));return I!==null&&v.push(Tw({start:I,end:d,loop:f,count:o,style:g})),v}function n4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=t4(i[r],t.points,e);s.length&&n.push(...s)}return n}function i4(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function r4(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function s4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=i4(n,r,s,i);if(i===!0)return Iw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,u=!!t._fullLoop&&o===0&&a===r-1;return Iw(t,r4(n,o,l,u),n,e)}function Iw(t,e,n,i){return!i||!i.setContext||!n?e:o4(t,e,n,i)}function o4(t,e,n,i){const r=t._chart.getContext(),s=Sw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=s,d=e[0].start,f=d;function g(v,w,I,T){const E=a?-1:1;if(v!==w){for(v+=l;n[v%l].skip;)v-=E;for(;n[w%l].skip;)w+=E;v%l!==w%l&&(u.push({start:v%l,end:w%l,loop:I,style:T}),h=T,d=w%l)}}for(const v of e){d=a?d:v.start;let w=n[d%l],I;for(f=d+1;f<=v.end;f++){const T=n[f%l];I=Sw(i.setContext(cs(r,{type:"segment",p0:w,p1:T,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),a4(I,h)&&g(d,f-1,v.loop,h),w=T,h=I}d<f-1&&g(d,f-1,v.loop,h)}return u}function Sw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function a4(t,e){if(!e)return!1;const n=[],i=function(r,s){return iy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Pu(t,e,n){return t.options.clip?t[n]:e[n]}function l4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Pu(n,e,"left"),right:Pu(n,e,"right"),top:Pu(i,e,"top"),bottom:Pu(i,e,"bottom")}:e}function u4(t,e){const n=e._clip;if(n.disabled)return!1;const i=l4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class c4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Vb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Qn=new c4;const xw="transparent",h4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=pw(t||xw),r=i.valid&&pw(e||xw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class d4{constructor(e,n,i,r){const s=n[i];r=Cu([e.to,r,s,e.from]);const o=Cu([e.from,s,r]);this._active=!0,this._fn=e.fn||h4[e.type||typeof o],this._easing=Da[e.easing]||Da.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Cu([e.to,n,r,e.from]),this._from=Cu([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class Jb{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ve(e))return;const n=Object.keys($e.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ve(s))return;const o={};for(const a of n)o[a]=s[a];(ot(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=p4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&f4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[u];let d=s[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}s[u]=d=new d4(f,e,u,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Qn.add(this._chart,i),!0}}function f4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function p4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function bw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function m4(t,e,n){if(n===!1)return!1;const i=bw(t,n),r=bw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function g4(t){let e,n,i,r;return ve(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function Zb(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function kw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}u=t.values[l],cn(u)&&(s||e===0||uo(e)===uo(u))&&(e+=u)}return!h&&!i.all?0:e}function y4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function ff(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function _4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function v4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function w4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Cw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Aw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,u=o.axis,h=_4(s,o,i),d=e.length;let f;for(let g=0;g<d;++g){const v=e[g],{[l]:w,[u]:I}=v,T=v._stacks||(v._stacks={});f=T[u]=w4(r,h,w),f[a]=I,f._top=Cw(f,o,!0,i.type),f._bottom=Cw(f,o,!1,i.type);const E=f._visualValues||(f._visualValues={});E[a]=I}}function pf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function E4(t,e){return cs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function T4(t,e,n){return cs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Yo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const mf=t=>t==="reset"||t==="none",Pw=(t,e)=>e?t:Object.assign({},t),I4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Zb(n,!0),values:null};class La{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ff(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Yo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,g,v)=>d==="x"?f:d==="r"?v:g,s=n.xAxisID=he(i.xAxisID,pf(e,"x")),o=n.yAxisID=he(i.yAxisID,pf(e,"y")),a=n.rAxisID=he(i.rAxisID,pf(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hw(this._data,this),e._stacked&&Yo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ve(n)){const r=this._cachedMeta;this._data=y4(n,r)}else if(i!==n){if(i){hw(i,this);const r=this._cachedMeta;Yo(r),r._parsed=[]}n&&Object.isExtensible(n)&&ej(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=ff(n.vScale,n),n.stack!==i.stack&&(r=!0,Yo(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(Aw(this,n._parsed),n._stacked=ff(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{ot(r[e])?f=this.parseArrayData(i,r,e,n):ve(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const g=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(g()&&(l=!1),u=d);i._sorted=l}o&&Aw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,d=new Array(r);let f,g,v;for(f=0,g=r;f<g;++f)v=f+i,d[f]={[a]:h||s.parse(u[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let h,d,f,g;for(h=0,d=r;h<d;++h)f=h+i,g=n[f],u[h]={x:s.parse(rh(g,a),f),y:o.parse(rh(g,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:Zb(r,!0),values:n._stacks[e.axis]._visualValues};return kw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=kw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=I4(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=v4(a);let f,g;function v(){g=r[f];const w=g[a.axis];return!cn(g[e.axis])||h>w||d<w}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(u,e,g,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(u,e,g,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],cn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=g4(he(this.options.clip,m4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&u?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=T4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=E4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&sh(i);if(a)return Pw(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),g=Object.keys($e.elements[e]),v=()=>this.getContext(i,r,n),w=u.resolveNamedOptions(f,g,v,d);return w.$shared&&(w.$shared=l,s[o]=Object.freeze(Pw(w,l))),w}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const u=new Jb(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||mf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){mf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!mf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Yo(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ne(La,"defaults",{}),ne(La,"datasetElementType",null),ne(La,"dataElementType",null);class rc extends La{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=rj(n,r,o);this._drawStart=a,this._drawCount=l,sj(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,g=a.axis,{spanGaps:v,segment:w}=this.options,I=pl(v)?v:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||r==="none",E=n+i,b=e.length;let R=n>0&&this.getParsed(n-1);for(let M=0;M<b;++M){const N=e[M],S=T?N:{};if(M<n||M>=E){S.skip=!0;continue}const _=this.getParsed(M),k=xe(_[g]),C=S[f]=o.getPixelForValue(_[f],M),P=S[g]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[g],M);S.skip=isNaN(C)||isNaN(P)||k,S.stop=M>0&&Math.abs(_[f]-R[f])>I,w&&(S.parsed=_,S.raw=u.data[M]),d&&(S.options=h||this.resolveDataElementOptions(M,N.active?"active":r)),T||this.updateElement(N,M,S,r),R=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ne(rc,"id","line"),ne(rc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ne(rc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Sr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hy{constructor(e){ne(this,"options");this.options=e||{}}static override(e){Object.assign(hy.prototype,e)}init(){}formats(){return Sr()}parse(){return Sr()}format(){return Sr()}add(){return Sr()}diff(){return Sr()}startOf(){return Sr()}endOf(){return Sr()}}var S4={_date:hy};function x4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?JF:Vr;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(s,e,n-d),g=u(s,e,n+d);return{lo:f.lo,hi:g.hi}}}}else{const h=u(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,g=f.slice(0,h.lo+1).reverse().findIndex(w=>!xe(w[d.axis]));h.lo-=Math.max(0,g);const v=f.slice(h.hi).findIndex(w=>!xe(w[d.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:s.length-1}}function Zh(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:d,hi:f}=x4(s[a],e,o,r);for(let g=d;g<=f;++g){const v=h[g];v.skip||i(v,u,g)}}}function b4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function gf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Zh(t,n,e,function(a,l,u){!r&&!ml(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function k4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=QF(o,{x:e.x,y:e.y});Ob(d,u,h)&&r.push({element:o,datasetIndex:a,index:l})}return Zh(t,n,e,s),r}function C4(t,e,n,i,r,s){let o=[];const a=b4(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const g=h.inRange(e.x,e.y,r);if(i&&!g)return;const v=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(v))&&!g)return;const I=a(e,v);I<l?(o=[{element:h,datasetIndex:d,index:f}],l=I):I===l&&o.push({element:h,datasetIndex:d,index:f})}return Zh(t,n,e,u),o}function yf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?k4(t,e,n,r):C4(t,e,n,i,r,s)}function Rw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Zh(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var A4={modes:{index(t,e,n,i){const r=Ar(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?gf(t,r,s,i,o):yf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Ar(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?gf(t,r,s,i,o):yf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Ar(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return gf(t,r,s,i,o)},nearest(t,e,n,i){const r=Ar(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return yf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Ar(e,t);return Rw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Ar(e,t);return Rw(t,r,"y",n.intersect,i)}}};const ek=["left","top","right","bottom"];function Xo(t,e){return t.filter(n=>n.pos===e)}function Nw(t,e){return t.filter(n=>ek.indexOf(n.pos)===-1&&n.box.axis===e)}function Jo(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function P4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function R4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!ek.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function N4(t,e){const n=R4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function D4(t){const e=P4(t),n=Jo(e.filter(u=>u.box.fullSize),!0),i=Jo(Xo(e,"left"),!0),r=Jo(Xo(e,"right")),s=Jo(Xo(e,"top"),!0),o=Jo(Xo(e,"bottom")),a=Nw(e,"x"),l=Nw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Xo(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Dw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function tk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function M4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ve(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&tk(o,s.getPadding());const a=Math.max(0,e.outerWidth-Dw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Dw(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function O4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function L4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function da(t,e,n,i){const r=[];let s,o,a,l,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,L4(a.horizontal,e));const{same:d,other:f}=M4(e,n,a,i);u|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return u&&da(r,e,n,i)||h}function Ru(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Mw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=e.w*h,f=u.size||l.height;sh(u.start)&&(o=u.start),l.fullSize?Ru(l,r.left,o,n.outerWidth-r.right-r.left,f):Ru(l,e.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=e.h*h,f=u.size||l.width;sh(u.start)&&(s=u.start),l.fullSize?Ru(l,s,r.top,f,n.outerHeight-r.bottom-r.top):Ru(l,s,e.top+u.placed,f,d),u.start=s,u.placed+=d,s=l.right}}e.x=s,e.y=o}var Bi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Tn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=D4(t.boxes),l=a.vertical,u=a.horizontal;we(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,I)=>I.box.options&&I.box.options.display===!1?w:w+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);tk(f,Tn(i));const g=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),v=N4(l.concat(u),d);da(a.fullSize,g,d,v),da(l,g,d,v),da(u,g,d,v)&&da(l,g,d,v),O4(g),Mw(a.leftAndTop,g,d,v),g.x+=g.w,g.y+=g.h,Mw(a.rightAndBottom,g,d,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},we(a.chartArea,w=>{const I=w.box;Object.assign(I,t.chartArea),I.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class nk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class V4 extends nk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const sc="$chartjs",F4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ow=t=>t===null||t==="";function j4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[sc]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ow(r)){const s=Ew(t,"width");s!==void 0&&(t.width=s)}if(Ow(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Ew(t,"height");s!==void 0&&(t.height=s)}return t}const ik=Qj?{passive:!0}:!1;function U4(t,e,n){t&&t.addEventListener(e,n,ik)}function B4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,ik)}function z4(t,e){const n=F4[t.type]||t.type,{x:i,y:r}=Ar(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function uh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function $4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||uh(a.addedNodes,i),o=o&&!uh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function W4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||uh(a.removedNodes,i),o=o&&!uh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const gl=new Map;let Lw=0;function rk(){const t=window.devicePixelRatio;t!==Lw&&(Lw=t,gl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function H4(t,e){gl.size||window.addEventListener("resize",rk),gl.set(t,e)}function q4(t){gl.delete(t),gl.size||window.removeEventListener("resize",rk)}function K4(t,e,n){const i=t.canvas,r=i&&cy(i);if(!r)return;const s=Fb((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),H4(t,s),o}function _f(t,e,n){n&&n.disconnect(),e==="resize"&&q4(t)}function G4(t,e,n){const i=t.canvas,r=Fb(s=>{t.ctx!==null&&n(z4(s,t))},t);return U4(i,e,r),r}class Q4 extends nk{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(j4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[sc])return!1;const i=n[sc].initial;["height","width"].forEach(s=>{const o=i[s];xe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[sc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:$4,detach:W4,resize:K4}[n]||G4;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:_f,detach:_f,resize:_f}[n]||B4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return Gj(e,n,i,r)}isAttached(e){const n=e&&cy(e);return!!(n&&n.isConnected)}}function Y4(t){return!uy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?V4:Q4}class lr{constructor(){ne(this,"x");ne(this,"y");ne(this,"active",!1);ne(this,"options");ne(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return pl(this.x)&&pl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}ne(lr,"defaults",{}),ne(lr,"defaultRoutes");function X4(t,e){const n=t.options.ticks,i=J4(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?eU(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return tU(e,u,s,o/r),u;const h=Z4(s,e,r);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(Nu(e,u,h,xe(g)?0:a-g,a),d=0,f=o-1;d<f;d++)Nu(e,u,h,s[d],s[d+1]);return Nu(e,u,h,l,xe(g)?e.length:l+g),u}return Nu(e,u,h),u}function J4(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function Z4(t,e,n){const i=nU(t),r=e.length/n;if(!i)return Math.max(r,1);const s=WF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function eU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function tU(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Nu(t,e,n,i,r){const s=he(i,0),o=Math.min(he(r,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function nU(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const iU=t=>t==="left"?"right":t==="right"?"left":t,Vw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Fw=(t,e)=>Math.min(e||t,t);function jw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function rU(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(i===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<s-a||l>o+a)))return l}function sU(t,e){we(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Zo(t){return t.drawTicks?t.tickLength:0}function Uw(t,e){if(!t.display)return 0;const n=Ft(t.font,e),i=Tn(t.padding);return(ot(t.text)?t.text.length:1)*n.lineHeight+i.height}function oU(t,e){return cs(t,{scale:e,type:"scale"})}function aU(t,e,n){return cs(t,{tick:n,index:e,type:"tick"})}function lU(t,e,n){let i=jb(t);return(n&&e!=="right"||!n&&e==="right")&&(i=iU(i)),i}function uU(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let d=0,f,g,v;const w=o-r,I=a-s;if(t.isHorizontal()){if(g=Wt(i,s,a),ve(n)){const T=Object.keys(n)[0],E=n[T];v=h[T].getPixelForValue(E)+w-e}else n==="center"?v=(u.bottom+u.top)/2+w-e:v=Vw(t,n,e);f=a-s}else{if(ve(n)){const T=Object.keys(n)[0],E=n[T];g=h[T].getPixelForValue(E)-I+e}else n==="center"?g=(u.left+u.right)/2-I+e:g=Vw(t,n,e);v=Wt(i,o,r),d=n==="left"?-gn:gn}return{titleX:g,titleY:v,maxWidth:f,rotation:d}}class Io extends lr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=bn(e,Number.POSITIVE_INFINITY),n=bn(n,Number.NEGATIVE_INFINITY),i=bn(i,Number.POSITIVE_INFINITY),r=bn(r,Number.NEGATIVE_INFINITY),{min:bn(e,i),max:bn(n,r),minDefined:cn(e),maxDefined:cn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:bn(n,bn(i,n)),max:bn(i,bn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ce(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?jw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=X4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ce(this.options.afterUpdate,[this])}beforeSetDimensions(){Ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ce(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ce(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Ce(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Fw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=rn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),d+6>a&&(a=g/(i-(e.offset?.5:1)),l=this.maxHeight-Zo(e.grid)-n.padding-Uw(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=GF(Math.min(Math.asin(rn((h.highest.height+6)/a,-1,1)),Math.asin(rn(l/u,-1,1))-Math.asin(rn(f/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ce(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Uw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Zo(s)+l):(e.height=this.maxHeight,e.width=Zo(s)+l),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),g=i.padding*2,v=Lr(this.labelRotation),w=Math.cos(v),I=Math.sin(v);if(a){const T=i.mirror?0:I*d.width+w*f.height;e.height=Math.min(this.maxHeight,e.height+T+g)}else{const T=i.mirror?0:w*d.width+I*f.height;e.width=Math.min(this.maxWidth,e.width+T+g)}this._calculatePadding(u,h,I,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?u?(f=r*e.width,g=i*n.height):(f=i*e.height,g=r*n.width):s==="start"?g=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ce(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)xe(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=jw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Fw(n,i));let u=0,h=0,d,f,g,v,w,I,T,E,b,R,M;for(d=0;d<n;d+=l){if(v=e[d].label,w=this._resolveTickFontOptions(d),r.font=I=w.string,T=s[I]=s[I]||{data:{},gc:[]},E=w.lineHeight,b=R=0,!xe(v)&&!ot(v))b=gw(r,T.data,T.gc,b,v),R=E;else if(ot(v))for(f=0,g=v.length;f<g;++f)M=v[f],!xe(M)&&!ot(M)&&(b=gw(r,T.data,T.gc,b,M),R+=E);o.push(b),a.push(R),u=Math.max(b,u),h=Math.max(R,h)}sU(s,n);const N=o.indexOf(u),S=a.indexOf(h),_=k=>({width:o[k]||0,height:a[k]||0});return{first:_(0),last:_(n-1),widest:_(N),highest:_(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return XF(this._alignToPixels?Ir(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=aU(this.getContext(),e,i))}return this.$context||(this.$context=oU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Lr(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Zo(s),g=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,I=w/2,T=function(le){return Ir(i,le,w)};let E,b,R,M,N,S,_,k,C,P,D,A;if(o==="top")E=T(this.bottom),S=this.bottom-f,k=E-I,P=T(e.top)+I,A=e.bottom;else if(o==="bottom")E=T(this.top),P=e.top,A=T(e.bottom)-I,S=E+I,k=this.top+f;else if(o==="left")E=T(this.right),N=this.right-f,_=E-I,C=T(e.left)+I,D=e.right;else if(o==="right")E=T(this.left),C=e.left,D=T(e.right)-I,N=E+I,_=this.left+f;else if(n==="x"){if(o==="center")E=T((e.top+e.bottom)/2+.5);else if(ve(o)){const le=Object.keys(o)[0],ye=o[le];E=T(this.chart.scales[le].getPixelForValue(ye))}P=e.top,A=e.bottom,S=E+I,k=S+f}else if(n==="y"){if(o==="center")E=T((e.left+e.right)/2);else if(ve(o)){const le=Object.keys(o)[0],ye=o[le];E=T(this.chart.scales[le].getPixelForValue(ye))}N=E-I,_=N-f,C=e.left,D=e.right}const ie=he(r.ticks.maxTicksLimit,d),re=Math.max(1,Math.ceil(d/ie));for(b=0;b<d;b+=re){const le=this.getContext(b),ye=s.setContext(le),B=a.setContext(le),G=ye.lineWidth,q=ye.color,de=B.dash||[],te=B.dashOffset,_e=ye.tickWidth,Re=ye.tickColor,qe=ye.tickBorderDash||[],Ne=ye.tickBorderDashOffset;R=rU(this,b,l),R!==void 0&&(M=Ir(i,R,G),u?N=_=C=D=M:S=k=P=A=M,g.push({tx1:N,ty1:S,tx2:_,ty2:k,x1:C,y1:P,x2:D,y2:A,width:G,color:q,borderDash:de,borderDashOffset:te,tickWidth:_e,tickColor:Re,tickBorderDash:qe,tickBorderDashOffset:Ne}))}return this._ticksLength=d,this._borderValue=E,g}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=s,f=Zo(i.grid),g=f+h,v=d?-h:g,w=-Lr(this.labelRotation),I=[];let T,E,b,R,M,N,S,_,k,C,P,D,A="middle";if(r==="top")N=this.bottom-v,S=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+v,S=this._getXAxisLabelAlignment();else if(r==="left"){const re=this._getYAxisLabelAlignment(f);S=re.textAlign,M=re.x}else if(r==="right"){const re=this._getYAxisLabelAlignment(f);S=re.textAlign,M=re.x}else if(n==="x"){if(r==="center")N=(e.top+e.bottom)/2+g;else if(ve(r)){const re=Object.keys(r)[0],le=r[re];N=this.chart.scales[re].getPixelForValue(le)+g}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-g;else if(ve(r)){const re=Object.keys(r)[0],le=r[re];M=this.chart.scales[re].getPixelForValue(le)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const ie=this._getLabelSizes();for(T=0,E=a.length;T<E;++T){b=a[T],R=b.label;const re=s.setContext(this.getContext(T));_=this.getPixelForTick(T)+s.labelOffset,k=this._resolveTickFontOptions(T),C=k.lineHeight,P=ot(R)?R.length:1;const le=P/2,ye=re.color,B=re.textStrokeColor,G=re.textStrokeWidth;let q=S;o?(M=_,S==="inner"&&(T===E-1?q=this.options.reverse?"left":"right":T===0?q=this.options.reverse?"right":"left":q="center"),r==="top"?u==="near"||w!==0?D=-P*C+C/2:u==="center"?D=-ie.highest.height/2-le*C+C:D=-ie.highest.height+C/2:u==="near"||w!==0?D=C/2:u==="center"?D=ie.highest.height/2-le*C:D=ie.highest.height-P*C,d&&(D*=-1),w!==0&&!re.showLabelBackdrop&&(M+=C/2*Math.sin(w))):(N=_,D=(1-P)*C/2);let de;if(re.showLabelBackdrop){const te=Tn(re.backdropPadding),_e=ie.heights[T],Re=ie.widths[T];let qe=D-te.top,Ne=0-te.left;switch(A){case"middle":qe-=_e/2;break;case"bottom":qe-=_e;break}switch(S){case"center":Ne-=Re/2;break;case"right":Ne-=Re;break;case"inner":T===E-1?Ne-=Re:T>0&&(Ne-=Re/2);break}de={left:Ne,top:qe,width:Re+te.width,height:_e+te.height,color:re.backdropColor}}I.push({label:R,font:k,textOffset:D,options:{rotation:w,color:ye,strokeColor:B,strokeWidth:G,textAlign:q,textBaseline:A,translation:[M,N],backdrop:de}})}return I}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Lr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return n==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=Ir(e,this.left,o)-o/2,h=Ir(e,this.right,a)+a/2,d=f=l):(d=Ir(e,this.top,o)-o/2,f=Ir(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&ry(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;ah(i,u,0,h,l,a)}r&&sy(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Ft(i.font),o=Tn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ve(n)?(l+=o.bottom,ot(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=uU(this,l,n,a);ah(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:lU(a,n,r),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=he(e.grid&&e.grid.z,-1),r=he(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Io.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ft(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Du{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;dU(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,cU(e,o,i),this.override&&$e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in $e[r]&&(delete $e[r][i],this.override&&delete is[i])}}function cU(t,e,n){const i=fl(Object.create(null),[n?$e.get(n):{},$e.get(e),t.defaults]);$e.set(e,i),t.defaultRoutes&&hU(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function hU(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");$e.route(s,r,l,a)})}function dU(t){return"id"in t&&"defaults"in t}class fU{constructor(){this.controllers=new Du(La,"datasets",!0),this.elements=new Du(lr,"elements"),this.plugins=new Du(Object,"plugins"),this.scales=new Du(Io,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):we(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=ty(e);Ce(i["before"+r],[],i),n[e](i),Ce(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Pn=new fU;class pU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Ce(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){xe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=he(i.options&&i.options.plugins,{}),s=mU(i);return r===!1&&!n?[]:yU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function mU(t){const e={},n=[],i=Object.keys(Pn.plugins.items);for(let s=0;s<i.length;s++)n.push(Pn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function gU(t,e){return!e&&t===!1?null:t===!0?{}:t}function yU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=gU(i[l],r);u!==null&&s.push({plugin:a,options:_U(t.config,{plugin:a,local:n[l]},u,o)})}return s}function _U(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Kp(t,e){const n=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function vU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function wU(t,e){return t===e?"_index_":"_value_"}function Bw(t){if(t==="x"||t==="y"||t==="r")return t}function EU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Gp(t,...e){if(Bw(t))return t;for(const n of e){const i=n.axis||EU(n.position)||t.length>1&&Bw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function zw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function TU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return zw(t,"x",n[0])||zw(t,"y",n[0])}return{}}function IU(t,e){const n=is[t.type]||{scales:{}},i=e.scales||{},r=Kp(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ve(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Gp(o,a,TU(o,t),$e.scales[a.type]),u=wU(l,r),h=n.scales||{};s[o]=Ra(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Kp(a,e),h=(is[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=vU(d,l),g=o[f+"AxisID"]||f;s[g]=s[g]||Object.create(null),Ra(s[g],[{axis:f},i[g],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ra(a,[$e.scales[a.type],$e.scale])}),s}function sk(t){const e=t.options||(t.options={});e.plugins=he(e.plugins,{}),e.scales=IU(t,e)}function ok(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function SU(t){return t=t||{},t.data=ok(t.data),sk(t),t}const $w=new Map,ak=new Set;function Mu(t,e){let n=$w.get(t);return n||(n=e(),$w.set(t,n),ak.add(n)),n}const ea=(t,e,n)=>{const i=rh(e,n);i!==void 0&&t.add(i)};class xU{constructor(e){this._config=SU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ok(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),sk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Mu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Mu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Mu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Mu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ea(l,e,d))),h.forEach(d=>ea(l,r,d)),h.forEach(d=>ea(l,is[s]||{},d)),h.forEach(d=>ea(l,$e,d)),h.forEach(d=>ea(l,Wp,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),ak.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,is[n]||{},$e.datasets[n]||{},{type:n},$e,Wp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Ww(this._resolverCache,e,r);let l=o;if(kU(o,n)){s.$shared=!1,i=ar(i)?i():i;const u=this.createResolver(e,i,a);l=co(o,i,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Ww(this._resolverCache,e,i);return ve(n)?co(s,n,void 0,r):s}}function Ww(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:oy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const bU=t=>ve(t)&&Object.getOwnPropertyNames(t).some(e=>ar(t[e]));function kU(t,e){const{isScriptable:n,isIndexable:i}=Wb(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(ar(a)||bU(a))||o&&ot(a))return!0}return!1}var CU="4.5.1";const AU=["top","bottom","left","right","chartArea"];function Hw(t,e){return t==="top"||t==="bottom"||AU.indexOf(t)===-1&&e==="x"}function qw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Kw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ce(n&&n.onComplete,[t],e)}function PU(t){const e=t.chart,n=e.options.animation;Ce(n&&n.onProgress,[t],e)}function lk(t){return uy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const oc={},Gw=t=>{const e=lk(t);return Object.values(oc).filter(n=>n.canvas===e).pop()};function RU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function NU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var xi;let ed=(xi=class{static register(...e){Pn.add(...e),Qw()}static unregister(...e){Pn.remove(...e),Qw()}constructor(e,n){const i=this.config=new xU(n),r=lk(e),s=Gw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Y4(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=OF(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new pU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=nj(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],oc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Qn.listen(this,"complete",Kw),Qn.listen(this,"progress",PU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return xe(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Pn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ww(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yw(this.canvas,this.ctx),this}stop(){return Qn.stop(this),this}resize(e,n){Qn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ww(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ce(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};we(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Gp(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),we(s,o=>{const a=o.options,l=a.id,u=Gp(l,a),h=he(a.type,o.dtype);(a.position===void 0||Hw(a.position,u)!==Hw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Pn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),we(r,(o,a)=>{o||delete i[a]}),we(i,o=>{Bi.configure(this,o,o.options),Bi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(qw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Kp(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Pn.getController(a),{datasetElementType:u,dataElementType:h}=$e.datasets[a];Object.assign(l,{dataElementType:Pn.getElement(h),datasetElementType:u&&Pn.getElement(u)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){we(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||we(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(qw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){we(this.scales,e=>{Bi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!aw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;RU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!aw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bi.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],we(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ar(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qn.has(this)?this.attached&&!Qn.running(this)&&Qn.start(this):(this.draw(),Kw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=u4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&ry(n,r),e.controller.draw(),r&&sy(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return ml(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=A4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=cs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);sh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Qn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),yw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete oc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};we(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){we(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},we(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!nh(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=BF(e),u=NU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ce(s.onHover,[e,a,this],this),l&&Ce(s.onClick,[e,a,this],this));const h=!nh(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},ne(xi,"defaults",$e),ne(xi,"instances",oc),ne(xi,"overrides",is),ne(xi,"registry",Pn),ne(xi,"version",CU),ne(xi,"getChart",Gw),xi);function Qw(){return we(ed.instances,t=>t._plugins.invalidate())}function uk(t,e,n=e){t.lineCap=he(n.borderCapStyle,e.borderCapStyle),t.setLineDash(he(n.borderDash,e.borderDash)),t.lineDashOffset=he(n.borderDashOffset,e.borderDashOffset),t.lineJoin=he(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=he(n.borderWidth,e.borderWidth),t.strokeStyle=he(n.borderColor,e.borderColor)}function DU(t,e,n){t.lineTo(n.x,n.y)}function MU(t){return t.stepped?gj:t.tension||t.cubicInterpolationMode==="monotone"?yj:DU}function ck(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:u<l&&!h?i+u-l:u-l}}function OU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:u}=ck(r,n,i),h=MU(s);let{move:d=!0,reverse:f}=i||{},g,v,w;for(g=0;g<=u;++g)v=r[(a+(f?u-g:g))%o],!v.skip&&(d?(t.moveTo(v.x,v.y),d=!1):h(t,w,v,f,s.stepped),w=v);return l&&(v=r[(a+(f?u:0))%o],h(t,w,v,f,s.stepped)),!!l}function LU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=ck(r,n,i),{move:l=!0,reverse:u}=i||{};let h=0,d=0,f,g,v,w,I,T;const E=R=>(o+(u?a-R:R))%s,b=()=>{w!==I&&(t.lineTo(h,I),t.lineTo(h,w),t.lineTo(h,T))};for(l&&(g=r[E(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=r[E(f)],g.skip)continue;const R=g.x,M=g.y,N=R|0;N===v?(M<w?w=M:M>I&&(I=M),h=(d*h+R)/++d):(b(),t.lineTo(R,M),v=N,d=0,w=I=M),T=M}b()}function Qp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?LU:OU}function VU(t){return t.stepped?Yj:t.tension||t.cubicInterpolationMode==="monotone"?Xj:Pr}function FU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),uk(t,e.options),t.stroke(r)}function jU(t,e,n,i){const{segments:r,options:s}=e,o=Qp(e);for(const a of r)uk(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const UU=typeof Path2D=="function";function BU(t,e,n,i){UU&&!e.options.segment?FU(t,e,n,i):jU(t,e,n,i)}class fa extends lr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;zj(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=s4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=n4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=VU(i);let u,h;for(u=0,h=o.length;u<h;++u){const{start:d,end:f}=o[u],g=s[d],v=s[f];if(g===v){a.push(g);continue}const w=Math.abs((r-g[n])/(v[n]-g[n])),I=l(g,v,w,i.stepped);I[n]=e[n],a.push(I)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Qp(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Qp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),BU(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ne(fa,"id","line"),ne(fa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ne(fa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ne(fa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Yw(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class ac extends lr{constructor(n){super();ne(this,"parsed");ne(this,"skip");ne(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Yw(this,n,"x",i)}inYRange(n,i){return Yw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!ml(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Hp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ne(ac,"id","point"),ne(ac,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ne(ac,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Xw=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},zU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Jw extends lr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ce(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Ft(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Xw(i,s);let u,h;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((v,w)=>{const I=i+n/2+s.measureText(v.text).width;(w===0||u[u.length-1]+I+2*a>o)&&(d+=h,u[u.length-(w>0?0:1)]=0,g+=h,f++),l[w]={left:0,top:g,row:f,width:I,height:r},u[u.length-1]+=I+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let d=a,f=0,g=0,v=0,w=0;return this.legendItems.forEach((I,T)=>{const{itemWidth:E,itemHeight:b}=$U(i,n,s,I,r);T>0&&g+b+2*a>h&&(d+=f+a,u.push({width:f,height:g}),v+=f+a,w++,f=g=0),l[T]={left:v,top:g,col:w,width:E,height:b},f=Math.max(f,E),g+=b+a}),d+=f,u.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Ks(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Wt(i,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Wt(i,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=Wt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Wt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ry(e,this),this._draw(),sy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=$e.color,l=Ks(e.rtl,this.left,this.width),u=Ft(o.font),{padding:h}=o,d=u.size,f=d/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:v,boxHeight:w,itemHeight:I}=Xw(o,d),T=function(N,S,_){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;r.save();const k=he(_.lineWidth,1);if(r.fillStyle=he(_.fillStyle,a),r.lineCap=he(_.lineCap,"butt"),r.lineDashOffset=he(_.lineDashOffset,0),r.lineJoin=he(_.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=he(_.strokeStyle,a),r.setLineDash(he(_.lineDash,[])),o.usePointStyle){const C={radius:w*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:k},P=l.xPlus(N,v/2),D=S+f;zb(r,C,P,D,o.pointStyleWidth&&v)}else{const C=S+Math.max((d-w)/2,0),P=l.leftForLtr(N,v),D=Oa(_.borderRadius);r.beginPath(),Object.values(D).some(A=>A!==0)?qp(r,{x:P,y:C,w:v,h:w,radius:D}):r.rect(P,C,v,w),r.fill(),k!==0&&r.stroke()}r.restore()},E=function(N,S,_){ah(r,_.text,N,S+I/2,u,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?g={x:Wt(s,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:g={x:this.left+h,y:Wt(s,this.top+R+h,this.bottom-n[0].height),line:0},Qb(this.ctx,e.textDirection);const M=I+h;this.legendItems.forEach((N,S)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const _=r.measureText(N.text).width,k=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),C=v+f+_;let P=g.x,D=g.y;l.setWidth(this.width),b?S>0&&P+C+h>this.right&&(D=g.y+=M,g.line++,P=g.x=Wt(s,this.left+h,this.right-i[g.line])):S>0&&D+M>this.bottom&&(P=g.x=P+n[g.line].width+h,g.line++,D=g.y=Wt(s,this.top+R+h,this.bottom-n[g.line].height));const A=l.x(P);if(T(A,D,N),P=ij(k,P+v+f,b?P+C:this.right,e.rtl),E(l.x(P),D,N),b)g.x+=C+h;else if(typeof N.text!="string"){const ie=u.lineHeight;g.y+=hk(N,ie)+h}else g.y+=M}),Yb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Ft(n.font),r=Tn(n.padding);if(!n.display)return;const s=Ks(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,u=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=Wt(e.align,d,this.right-f);else{const v=this.columnSizes.reduce((w,I)=>Math.max(w,I.height),0);h=u+Wt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=Wt(a,d,d+f);o.textAlign=s.textAlign(jb(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,ah(o,n.text,g,h,i)}_computeTitleHeight(){const e=this.options.title,n=Ft(e.font),i=Tn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(ha(e,this.left,this.right)&&ha(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],ha(e,r.left,r.left+r.width)&&ha(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!qU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=zU(r,i);r&&!s&&Ce(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Ce(n.onHover,[e,i,this],this)}else i&&Ce(n.onClick,[e,i,this],this)}}function $U(t,e,n,i,r){const s=WU(i,t,e,n),o=HU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function WU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function HU(t,e,n){let i=t;return typeof e.text!="string"&&(i=hk(e,n)),i}function hk(t,e){const n=t.text?t.text.length:0;return e*n}function qU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var KU={id:"legend",_element:Jw,start(t,e,n){const i=t.legend=new Jw({ctx:t.ctx,options:n,chart:t});Bi.configure(t,i,n),Bi.addBox(t,i)},stop(t){Bi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Bi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=Tn(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const pa={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=$p(e,u);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Cn(t,e){return e&&(ot(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Yn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function GU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Zw(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Ft(e.bodyFont),u=Ft(e.titleFont),h=Ft(e.footerFont),d=s.length,f=r.length,g=i.length,v=Tn(e.padding);let w=v.height,I=0,T=i.reduce((R,M)=>R+M.before.length+M.lines.length+M.after.length,0);if(T+=t.beforeBody.length+t.afterBody.length,d&&(w+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),T){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=g*R+(T-g)*l.lineHeight+(T-1)*e.bodySpacing}f&&(w+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let E=0;const b=function(R){I=Math.max(I,n.measureText(R).width+E)};return n.save(),n.font=u.string,we(t.title,b),n.font=l.string,we(t.beforeBody.concat(t.afterBody),b),E=e.displayColors?o+2+e.boxPadding:0,we(i,R=>{we(R.before,b),we(R.lines,b),we(R.after,b)}),E=0,n.font=h.string,we(t.footer,b),n.restore(),I+=v.width,{width:I,height:w}}function QU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function YU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function XU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return i==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),YU(u,t,e,n)&&(u="center"),u}function eE(t,e,n){const i=n.yAlign||e.yAlign||QU(t,n);return{xAlign:n.xAlign||e.xAlign||XU(t,e,n,i),yAlign:i}}function JU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function ZU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function tE(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Oa(o);let v=JU(e,a);const w=ZU(e,l,u);return l==="center"?a==="left"?v+=u:a==="right"&&(v-=u):a==="left"?v-=Math.max(h,f)+r:a==="right"&&(v+=Math.max(d,g)+r),{x:rn(v,0,i.width-e.width),y:rn(w,0,i.height-e.height)}}function Ou(t,e,n){const i=Tn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function nE(t){return Cn([],Yn(t))}function e5(t,e,n){return cs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function iE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const dk={beforeTitle:Gn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Gn,beforeBody:Gn,beforeLabel:Gn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return xe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Gn,afterBody:Gn,beforeFooter:Gn,footer:Gn,afterFooter:Gn};function Mt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?dk[e].call(n,i):r}class Yp extends lr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new Jb(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=e5(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Mt(i,"beforeTitle",this,e),s=Mt(i,"title",this,e),o=Mt(i,"afterTitle",this,e);let a=[];return a=Cn(a,Yn(r)),a=Cn(a,Yn(s)),a=Cn(a,Yn(o)),a}getBeforeBody(e,n){return nE(Mt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return we(e,s=>{const o={before:[],lines:[],after:[]},a=iE(i,s);Cn(o.before,Yn(Mt(a,"beforeLabel",this,s))),Cn(o.lines,Mt(a,"label",this,s)),Cn(o.after,Yn(Mt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return nE(Mt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Mt(i,"beforeFooter",this,e),s=Mt(i,"footer",this,e),o=Mt(i,"afterFooter",this,e);let a=[];return a=Cn(a,Yn(r)),a=Cn(a,Yn(s)),a=Cn(a,Yn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(GU(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),we(a,h=>{const d=iE(e.callbacks,h);r.push(Mt(d,"labelColor",this,h)),s.push(Mt(d,"labelPointStyle",this,h)),o.push(Mt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=pa[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Zw(this,i),u=Object.assign({},a,l),h=eE(this.chart,i,u),d=tE(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=Oa(a),{x:f,y:g}=e,{width:v,height:w}=n;let I,T,E,b,R,M;return s==="center"?(R=g+w/2,r==="left"?(I=f,T=I-o,b=R+o,M=R-o):(I=f+v,T=I+o,b=R-o,M=R+o),E=I):(r==="left"?T=f+Math.max(l,h)+o:r==="right"?T=f+v-Math.max(u,d)-o:T=this.caretX,s==="top"?(b=g,R=b-o,I=T-o,E=T+o):(b=g+w,R=b+o,I=T+o,E=T-o),M=b),{x1:I,x2:T,x3:E,y1:b,y2:R,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const u=Ks(i.rtl,this.x,this.width);for(e.x=Ou(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",o=Ft(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=Ft(s.bodyFont),d=Ou(this,"left",s),f=r.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+g;if(s.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},I=r.leftForLtr(f,u)+u/2,T=v+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Hp(e,w,I,T),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Hp(e,w,I,T)}else{e.lineWidth=ve(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=r.leftForLtr(f,u),I=r.leftForLtr(r.xPlus(f,1),u-2),T=Oa(o.borderRadius);Object.values(T).some(E=>E!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,qp(e,{x:w,y:v,w:u,h:l,radius:T}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),qp(e,{x:I,y:v+1,w:u-2,h:l-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(w,v,u,l),e.strokeRect(w,v,u,l),e.fillStyle=o.backgroundColor,e.fillRect(I,v+1,u-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=i,d=Ft(i.bodyFont);let f=d.lineHeight,g=0;const v=Ks(i.rtl,this.x,this.width),w=function(_){n.fillText(_,v.x(e.x+g),e.y+f/2),e.y+=f+s},I=v.textAlign(o);let T,E,b,R,M,N,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Ou(this,I,i),n.fillStyle=i.bodyColor,we(this.beforeBody,w),g=a&&I!=="right"?o==="center"?u/2+h:u+2+h:0,R=0,N=r.length;R<N;++R){for(T=r[R],E=this.labelTextColors[R],n.fillStyle=E,we(T.before,w),b=T.lines,a&&b.length&&(this._drawColorBox(n,e,R,v,i),f=Math.max(d.lineHeight,l)),M=0,S=b.length;M<S;++M)w(b[M]),f=d.lineHeight;we(T.after,w)}g=0,f=d.lineHeight,we(this.afterBody,w),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Ks(i.rtl,this.x,this.width);for(e.x=Ou(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Ft(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:v}=Oa(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+u,l+h-v),n.quadraticCurveTo(a+u,l+h,a+u-v,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=pa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Zw(this,e),l=Object.assign({},o,this._size),u=eE(n,e,l),h=tE(e,l,u,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Tn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),Qb(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),Yb(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!nh(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!nh(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=pa[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}ne(Yp,"positioners",pa);var t5={id:"tooltip",_element:Yp,positioners:pa,afterInit(t,e,n){n&&(t.tooltip=new Yp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:dk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const n5=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function i5(t,e,n,i){const r=t.indexOf(e);if(r===-1)return n5(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const r5=(t,e)=>t===null?null:rn(Math.round(t),0,e);function rE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Xp extends Io{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(xe(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:i5(i,e,he(n,e),this._addedLabels),r5(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return rE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ne(Xp,"id","category"),ne(Xp,"defaults",{ticks:{callback:rE}});function s5(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=t,g=s||1,v=h-1,{min:w,max:I}=e,T=!xe(o),E=!xe(a),b=!xe(u),R=(I-w)/(d+1);let M=uw((I-w)/v/g)*g,N,S,_,k;if(M<1e-14&&!T&&!E)return[{value:w},{value:I}];k=Math.ceil(I/M)-Math.floor(w/M),k>v&&(M=uw(k*M/v/g)*g),xe(l)||(N=Math.pow(10,l),M=Math.ceil(M*N)/N),r==="ticks"?(S=Math.floor(w/M)*M,_=Math.ceil(I/M)*M):(S=w,_=I),T&&E&&s&&qF((a-o)/s,M/1e3)?(k=Math.round(Math.min((a-o)/M,h)),M=(a-o)/k,S=o,_=a):b?(S=T?o:S,_=E?a:_,k=u-1,M=(_-S)/k):(k=(_-S)/M,Na(k,Math.round(k),M/1e3)?k=Math.round(k):k=Math.ceil(k));const C=Math.max(cw(M),cw(S));N=Math.pow(10,xe(l)?C:l),S=Math.round(S*N)/N,_=Math.round(_*N)/N;let P=0;for(T&&(f&&S!==o?(n.push({value:o}),S<o&&P++,Na(Math.round((S+P*M)*N)/N,o,sE(o,R,t))&&P++):S<o&&P++);P<k;++P){const D=Math.round((S+P*M)*N)/N;if(E&&D>a)break;n.push({value:D})}return E&&f&&_!==a?n.length&&Na(n[n.length-1].value,a,sE(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!E||_===a)&&n.push({value:_}),n}function sE(t,e,{horizontal:n,minRotation:i}){const r=Lr(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class o5 extends Io{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return xe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=uo(r),u=uo(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=s5(r,s);return e.bounds==="ticks"&&KF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Ub(e,this.chart.options.locale,this.options.ticks.format)}}class Jp extends o5{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=cn(e)?e:0,this.max=cn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Lr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ne(Jp,"id","linear"),ne(Jp,"defaults",{ticks:{callback:Bb.formatters.numeric}});const td={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Lt=Object.keys(td);function oE(t,e){return t-e}function aE(t,e){if(xe(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),cn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(pl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function lE(t,e,n,i){const r=Lt.length;for(let s=Lt.indexOf(t);s<r-1;++s){const o=td[Lt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Lt[s]}return Lt[r-1]}function a5(t,e,n,i,r){for(let s=Lt.length-1;s>=Lt.indexOf(n);s--){const o=Lt[s];if(td[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Lt[n?Lt.indexOf(n):0]}function l5(t){for(let e=Lt.indexOf(t)+1,n=Lt.length;e<n;++e)if(td[Lt[e]].common)return Lt[e]}function uE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=ny(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function u5(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function cE(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:u5(t,i,r,n)}class ch extends Io{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new S4._date(e.adapters.date);r.init(n),Ra(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:aE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=cn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=cn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=ZF(r,s,o);return this._unit=n.unit||(i.autoSkip?lE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):a5(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:l5(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),cE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=rn(n,0,o),i=rn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||lE(s.minUnit,n,i,this._getLabelCapacity(n)),a=he(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=pl(l)||l===!0,h={};let d=n,f,g;if(u&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,u?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<i;f=+e.add(f,a,o),g++)uE(h,f,v);return(f===i||r.bounds==="ticks"||g===1)&&uE(h,f,v),Object.keys(h).sort(oE).map(w=>+w)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Ce(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=i[n],g=u&&d&&f&&f.major;return this._adapter.format(e,r||(g?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Lr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,cE(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(aE(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return tj(e.sort(oE))}}ne(ch,"id","time"),ne(ch,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Lu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Vr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Vr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class hE extends ch{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Lu(n,this.min),this._tableRange=Lu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=i&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],u=r[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Lu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Lu(this._table,i*this._tableRange+this._minPos,!0)}}ne(hE,"id","timeseries"),ne(hE,"defaults",ch.defaults);ed.register(fa,ac,Jp,Xp,t5,KU);const fk="label";function dE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function c5(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function pk(t,e){t.labels=e}function mk(t,e,n=fk){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function h5(t,e=fk){const n={labels:[],datasets:[]};return pk(n,t.labels),mk(n,t.datasets,e),n}function d5(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:d,...f}=t,g=O.useRef(null),v=O.useRef(null),w=()=>{g.current&&(v.current=new ed(g.current,{type:o,data:h5(a,s),options:l&&{...l},plugins:u}),dE(e,v.current))},I=()=>{dE(e,null),v.current&&(v.current.destroy(),v.current=null)};return O.useEffect(()=>{!r&&v.current&&l&&c5(v.current,l)},[r,l]),O.useEffect(()=>{!r&&v.current&&pk(v.current.config.data,a.labels)},[r,a.labels]),O.useEffect(()=>{!r&&v.current&&a.datasets&&mk(v.current.config.data,a.datasets,s)},[r,a.datasets]),O.useEffect(()=>{v.current&&(r?(I(),setTimeout(w)):v.current.update(d))},[r,l,a.labels,a.datasets,d]),O.useEffect(()=>{v.current&&(I(),setTimeout(w))},[o]),O.useEffect(()=>(w(),()=>I()),[]),y.jsx("canvas",{ref:g,role:"img",height:n,width:i,...f,children:h})}const f5=O.forwardRef(d5);function p5(t,e){return ed.register(e),O.forwardRef((n,i)=>y.jsx(f5,{...n,ref:i,type:t}))}const dy=p5("line",rc);function m5({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(dy,{data:r,options:s})})]})}function g5({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],i=t.map(u=>u.dateIso),r=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.bench}),s=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.squat}),o=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.deadlift}),a={labels:i,datasets:[{label:`${n[0]} (7-day WMA)`,data:r,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[1]} (7-day WMA)`,data:s,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[2]} (7-day WMA)`,data:o,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:u=>{var h,d;return`${u.dataset.label}: ${(d=(h=u.parsed.y)==null?void 0:h.toFixed)==null?void 0:d.call(h,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(dy,{data:a,options:l})})]})}function y5({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>a.calories),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (raw)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.15}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Smoothed Weight/Strength vs Raw Calories"}),y.jsx("div",{className:"chart-inner",children:y.jsx(dy,{data:s,options:o})})]})}function xr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function _5(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function v5(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function w5({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Weekly Analysis"}),y.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Week #"}),y.jsx("th",{children:"Avg Calories"}),y.jsx("th",{children:"Weight Change (kg)"}),y.jsx("th",{children:"Calculated TDEE"}),y.jsx("th",{children:"TDEE "}),y.jsx("th",{children:"Adaptation %"}),y.jsx("th",{children:"LBM (kg)"}),y.jsx("th",{children:"Loss Rate vs LBM %"}),y.jsx("th",{children:"Status"})]})}),y.jsx("tbody",{children:t.weeks.map(n=>y.jsxs("tr",{children:[y.jsx("td",{children:n.week}),y.jsx("td",{children:xr(n.avgCalories,0)}),y.jsx("td",{children:xr(n.weightChange,2)}),y.jsx("td",{children:xr(n.tdee,0)}),y.jsx("td",{children:xr(n.tdeeChangeFromBaseline,0)}),y.jsx("td",{className:_5(n.adaptationPct),children:xr(n.adaptationPct,1)}),y.jsx("td",{children:xr(n.lbm,1)}),y.jsx("td",{children:xr(n.lossRatePct,2)}),y.jsx("td",{className:v5(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),y.jsxs("div",{className:"notice info",style:{marginTop:12},children:[y.jsx("div",{children:y.jsx("b",{children:"How to read this:"})}),y.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[y.jsxs("div",{children:[y.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",y.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function xt(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function fE(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function pE(t,e){const n=eh(t).getTime(),i=eh(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function mE(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function E5(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function T5({derived:t,weekly:e,profile:n}){const i=O.useMemo(()=>{var E,b,R,M;if(!(t!=null&&t.length))return[];const r=t[t.length-1],s=r.dateIso,o=(E=e==null?void 0:e.weeks)!=null&&E.length?e.weeks[e.weeks.length-1]:null,a=e==null?void 0:e.baselineTdee,l=e==null?void 0:e.baselineStrength,u=e==null?void 0:e.baselineWeeklyLoss,h=t.filter(N=>{const S=pE(s,N.dateIso);return S>=0&&S<=6}),d=h.length,f=mE(h.map(N=>N.protein)),g=mE(h.map(N=>N.calories)),v=Number.isFinite((b=r==null?void 0:r.wma)==null?void 0:b.weight)?r.wma.weight:r.weight,w=[];if(o&&Number.isFinite(a)&&Number.isFinite(o.tdee)&&Number.isFinite(o.adaptationPct)){const N=Math.max(0,-o.adaptationPct);let S="good";N>=10?S="bad":N>=5&&(S="warn");const _=o.adaptationPct<0?"dropped":"increased",k=`${xt(Math.abs(o.adaptationPct),0)}%`;w.push({key:"adaptation",level:S,title:"Metabolic adaptation",message:`Your TDEE has ${_} ${k} from baseline (${xt(a,0)}  ${xt(o.tdee,0)} kcal).`,action:S!=="good"?"Consider a refeed day or reducing training volume.":null})}if(o&&Number.isFinite(o.lossRatePct)){const N=String(o.lossRateStatus||"").toUpperCase();let S="info";o.lossRateStatus==="Optimal"&&(S="good"),o.lossRateStatus==="Aggressive"&&(S="bad");const _=o.lossRateStatus==="Aggressive"?"Risk of muscle loss.":o.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";w.push({key:"lossrate",level:S,title:"Loss rate vs LBM",message:`This week: ${xt(o.lossRatePct,1)}% of LBM lost  ${N}. ${_}`,action:null})}if(o&&Number.isFinite(l)&&Number.isFinite(o.avgStrengthWma)){const N=(o.avgStrengthWma-l)/l*100;let S="good",_="",k="Strength maintained/increasing.",C=null;N<-7.5?(S="bad",_="",k="Strength declining significantly.",C="Consider eating more or reducing cardio."):N<-5&&(S="warn",_="",k="Strength declining.",C="Consider eating more or reducing cardio."),w.push({key:"strength",level:S,title:"Strength trend",message:`${k} ${_} (${xt(N,1)}% vs baseline)`,action:C})}if(o&&Number.isFinite(o.tdee)&&Number.isFinite(o.lbm)){const N=o.lbm,S=.005*N,_=.01*N,k=S*7700/7,C=_*7700/7,P=o.tdee-k,D=o.tdee-C,A=fE(Math.min(D,P),50),ie=fE(Math.max(D,P),50);w.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${A}-${ie} kcal/day this week.`,action:null})}d<6&&w.push({key:"completeness",level:"warn",title:"Data completeness",message:`${d}/7 days logged this week  missing data may affect accuracy.`,action:null});let I=null;for(let N=t.length-1;N>=0;N--)if(Number.isFinite((R=t[N])==null?void 0:R.bfPct)){I=t[N].dateIso;break}if(!I)w.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const N=pE(s,I);N>=7?w.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):w.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-N} day(s).`,action:null})}if(Number.isFinite(f)&&Number.isFinite(v)){const N=1.6*v,S=2.2*v;if(f<N){const _=(N-f)/N*100;w.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${xt(_,0)}% below the muscle-retention range (${xt(f,0)}g/day vs ${xt(N,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else f>S?w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${xt(f,0)}g/day).`,action:null}):w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${xt(f,0)}g/day).`,action:null})}if(o&&Number.isFinite(u)&&Number.isFinite(o.weightChange)){const N=Math.max(0,-o.weightChange),S=u;(N<.2||S>.2&&N<S*.35)&&w.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${xt(N,1)}kg this week vs ${xt(S,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const T=Number(n==null?void 0:n.targetWeight);if(Number.isFinite(T)&&Number.isFinite((M=t[0])==null?void 0:M.weight)&&Number.isFinite(v)){const N=t[0].weight;if(N>T){const S=N-v,_=N-T,k=Math.max(0,Math.min(1,S/_))*100,C=Math.floor(S/5)*5;C>=5&&w.push({key:"milestone",level:"good",title:"Progress milestone",message:`${xt(C,0)}kg down! Youre ${xt(k,0)}% to your goal.`,action:null})}}return o||(w.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(g)&&w.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${xt(g,0)} kcal/day.`,action:null})),w},[t,e,n]);return i.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Insights"}),y.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),y.jsx("div",{className:"grid",style:{marginTop:12},children:i.map(r=>y.jsxs("div",{className:`card insight-card ${E5(r.level)}`,style:{gridColumn:"span 6"},children:[y.jsx("div",{className:"insight-title",children:r.title}),y.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:r.message}),r.action&&y.jsx("div",{className:"small",style:{marginTop:8},children:r.action})]},r.key))})]}):null}function I5(t){return t==="cut"?"Cut":t==="bulk"?"Bulk":t==="maintain"?"Maintain":String(t||"")}function Si(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function gk({view:t="dashboard"}){const e=_o(),{user:n}=_i(),{profile:i}=Qg(),r=Array.isArray(i==null?void 0:i.liftNames)&&i.liftNames.length===3?i.liftNames:["Bench Press","Squat","Deadlift"],[s,o]=O.useState([]),a=Array.isArray(i==null?void 0:i.cycles)?i.cycles:[],[l,u]=O.useState(null);O.useEffect(()=>{if(u(null),!n)return;const M=Xg(n.uid,N=>o(N),N=>u((N==null?void 0:N.message)||"Failed to load entries."));return()=>M()},[n]);const h=O.useMemo(()=>hF(),[]),d=O.useMemo(()=>dF(60),[]),f=O.useMemo(()=>d!=null&&d.length?[{id:"demo",type:"cut",startDateIso:d[0].dateIso,endDateIso:null}]:[],[d]),g=n?i:h,v=n?s:d,w=n?a:f,I=O.useMemo(()=>{if(!(w!=null&&w.length))return null;const M=th(),N=w.find(_=>!_.endDateIso);return N||w.find(_=>(_.startDateIso||"")<=M&&(_.endDateIso||"")>=M)||null},[w]);function T(){if(!n){e("/signup");return}e("/profile#cycles")}const E=O.useMemo(()=>Ab(v,g||{}),[v,g]),b=O.useMemo(()=>cF(E),[E]),R=O.useMemo(()=>{var le;if(!E.length)return null;const M=E[0],N=E[E.length-1],S=(le=N==null?void 0:N.wma)==null?void 0:le.weight,_=Number.isFinite(M.weight)&&Number.isFinite(N.weight)?N.weight-M.weight:null,k=N.calories,C=M.calories,P=Number.isFinite(k)&&Number.isFinite(C)?k-C:null,D=N.avgStrength,A=M.avgStrength,ie=Number.isFinite(D)&&Number.isFinite(A)?D-A:null;let re=null;for(let ye=E.length-1;ye>=0;ye--)if(Number.isFinite(E[ye].bfPct)){re=E[ye].bfPct;break}return{weightTrend:S,totalLost:_,calNow:k,calDelta:P,strengthNow:D,strengthDelta:ie,bf:re}},[E]);return y.jsxs(y.Fragment,{children:[!n&&y.jsxs("div",{className:"notice info",style:{marginTop:14},children:[y.jsx("b",{children:"Demo mode:"})," This dashboard is showing 60 days of realistic sample data. Log in to start tracking your own."]}),n&&(!(g!=null&&g.sex)||!(g!=null&&g.height))&&y.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",y.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),l&&y.jsx("div",{className:"notice error",style:{marginTop:14},children:l}),t==="insights"&&y.jsx(T5,{derived:E,weekly:b,profile:g||{}}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Summary"}),y.jsx("button",{className:"btn",type:"button",onClick:T,style:{textTransform:"none"},children:I?I5(I.type):"Create new cycle"})]}),!R||!E.length?y.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",y.jsx("b",{children:"Entry"}),"."]}):y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),y.jsxs("div",{className:"big",children:[Si(R.weightTrend,1)," kg"]}),y.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Total weight change"}),y.jsxs("div",{className:"big",children:[Si(R.totalLost,1)," kg"]}),y.jsx("div",{className:"small",children:"Negative = loss"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Calories now / change from start"}),y.jsxs("div",{className:"big",children:[Si(R.calNow,0)," kcal"]}),y.jsxs("div",{className:"small",children:[" ",Si(R.calDelta,0)," kcal"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Average strength now"}),y.jsxs("div",{className:"big",children:[Si(R.strengthNow,1)," kg"]}),y.jsxs("div",{className:"small",children:[" ",Si(R.strengthDelta,1)," kg"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),y.jsx("div",{className:"big",children:R.bf===null?"":`${Si(R.bf,1)}%`}),y.jsx("div",{className:"small",children:"Most recent measurement day"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),y.jsx("div",{className:"big",children:Number.isFinite(b.baselineTdee)?`${Si(b.baselineTdee,0)} kcal`:""}),y.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),E.length>0&&y.jsxs("div",{className:"grid",style:{marginTop:14},children:[y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(m5,{derived:E})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(g5,{derived:E,liftNames:r})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(y5,{derived:E})})]}),E.length>=14&&y.jsx(w5,{weekly:b})]})}function S5(){return y.jsx(gk,{view:"insights"})}function x5(){const{user:t,login:e,authError:n,clearAuthError:i}=_i(),r=_o(),s=fr(),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,g]=O.useState(null);O.useEffect(()=>{i==null||i()},[]),O.useEffect(()=>{t&&r("/dashboard")},[t]);async function v(w){var I;w.preventDefault(),g(null),d(!0);try{await e(o.trim(),l);const T=((I=s.state)==null?void 0:I.from)||"/dashboard";r(T)}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Log in"}),y.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&y.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),y.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:l,onChange:w=>u(w.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),y.jsx(nl,{className:"btn",to:"/reset-password",children:"Forgot password"}),y.jsx(nl,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function b5(){const{signup:t,authError:e,clearAuthError:n}=_i(),i=_o(),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,g]=O.useState(null);O.useEffect(()=>{n==null||n()},[]);async function v(w){if(w.preventDefault(),g(null),o!==l){g({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Create account"}),y.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&y.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),y.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:r,onChange:w=>s(w.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"password",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm password"}),y.jsx("input",{value:l,onChange:w=>u(w.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),y.jsx(nl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function k5(){const{resetPassword:t,authError:e,clearAuthError:n}=_i(),[i,r]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(!1);O.useEffect(()=>{n==null||n()},[]);async function u(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Reset password"}),y.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&y.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),y.jsxs("form",{onSubmit:u,style:{marginTop:12},children:[y.jsx("div",{className:"row",children:y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),y.jsx(nl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function C5(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function A5(t,e){const n=e.map(o=>o.map(C5).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function P5({entries:t,derived:e}){var s,o,a,l,u,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchKg","squatKg","deadliftKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.bench,d.squat,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(u=f==null?void 0:f.wma)==null?void 0:u.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}function yk(t){return["cut","bulk","maintain"].includes(t)}function _k(t){return Array.isArray(t)?t.filter(e=>e&&typeof e=="object").map(e=>({id:String(e.id||""),type:String(e.type||""),startDateIso:e.startDateIso||"",endDateIso:e.endDateIso??null})).filter(e=>e.id&&yk(e.type)&&e.startDateIso):[]}function R5(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}async function N5(t,{type:e,startDateIso:n}){if(!t)throw new Error("Not authenticated");if(!yk(e))throw new Error("Invalid cycle type");if(!n)throw new Error("Start date is required");const i=Jr($n,"users",t);await nb($n,async r=>{const s=await r.get(i);if(!s.exists())throw new Error("Profile not found. Please refresh and try again.");const o=s.data()||{},l=_k(o.cycles).map(h=>({...h})),u=l.findIndex(h=>h.endDateIso===null);if(u>=0){const h=l[u];let d=eF(n,-1);h.startDateIso&&d<h.startDateIso&&(d=h.startDateIso),l[u]={...h,endDateIso:d}}l.push({id:R5(),type:e,startDateIso:n,endDateIso:null}),r.update(i,{cycles:l,updatedAt:Ll()})})}async function D5(t,e,n){if(!t)throw new Error("Not authenticated");if(!e)throw new Error("cycleId is required");if(!n)throw new Error("End date is required");const i=Jr($n,"users",t);await nb($n,async r=>{const s=await r.get(i);if(!s.exists())throw new Error("Profile not found. Please refresh and try again.");const o=s.data()||{},a=_k(o.cycles),l=a.findIndex(h=>h.id===e);if(l<0)throw new Error("Cycle not found.");const u=a.map(h=>({...h}));u[l]={...u[l],endDateIso:n},r.update(i,{cycles:u,updatedAt:Ll()})})}const vs=["Bench Press","Squat","Deadlift"];function vf(t){return t==="cut"?"Cut":t==="bulk"?"Bulk":t==="maintain"?"Maintain":String(t||"")}function M5(){const{user:t}=_i(),e=fr(),{profile:n,updateProfile:i,loading:r,profileError:s}=Qg(),[o,a]=O.useState(n.sex||""),[l,u]=O.useState(n.height||""),[h,d]=O.useState(n.targetWeight??""),[f,g]=O.useState(!!n.triplemeasurements),v=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:vs,[w,I]=O.useState(v[0]),[T,E]=O.useState(v[1]),[b,R]=O.useState(v[2]),[M,N]=O.useState(!1),[S,_]=O.useState(null),[k,C]=O.useState(""),[P,D]=O.useState(""),[A,ie]=O.useState(""),re=O.useMemo(()=>Array.isArray(n.cycles)?[...n.cycles].sort((W,se)=>String(se.startDateIso||"").localeCompare(String(W.startDateIso||""))):[],[n.cycles]),[le,ye]=O.useState("cut"),[B,G]=O.useState(th()),q=O.useMemo(()=>re.find(W=>!W.endDateIso)||null,[re]),[de,te]=O.useState([]),[_e,Re]=O.useState(!1);O.useEffect(()=>{a(n.sex||""),u(n.height||""),d(n.targetWeight??""),g(!!n.triplemeasurements);const W=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:vs;I(W[0]),E(W[1]),R(W[2])},[n.sex,n.height,n.targetWeight,n.triplemeasurements,n.liftNames]),O.useEffect(()=>{(e==null?void 0:e.hash)==="#cycles"&&setTimeout(()=>{var W;(W=document.getElementById("cycles"))==null||W.scrollIntoView({behavior:"smooth",block:"start"})},50)},[e==null?void 0:e.hash]);async function qe(W){W.preventDefault(),_(null),N(!0);try{const se=Number(l);if(!o)throw new Error("Sex is required.");if(!Number.isFinite(se)||se<=0)throw new Error("Height must be a positive number (cm).");let Dt=null;if(String(h).trim()!==""&&(Dt=Number(h),!Number.isFinite(Dt)||Dt<=0))throw new Error("Target weight must be a positive number (kg).");const Q=[w,T,b].map((Ke,Fl)=>String(Ke??"").trim()||vs[Fl]);await i({sex:o,height:se,targetWeight:Dt,triplemeasurements:!!f,liftNames:Q}),_({type:"success",text:"Profile saved."})}catch(se){_({type:"error",text:(se==null?void 0:se.message)||"Failed to save profile."})}finally{N(!1)}}async function Ne(W){W.preventDefault(),_(null),N(!0);try{if(!le)throw new Error("Pick a cycle type.");if(!B)throw new Error("Pick a start date.");await N5(t.uid,{type:le,startDateIso:B}),_({type:"success",text:`Cycle started: ${vf(le)}.`})}catch(se){_({type:"error",text:(se==null?void 0:se.message)||"Failed to start cycle."})}finally{N(!1)}}async function Nt(W){_(null),N(!0);try{await D5(t.uid,W,th()),_({type:"success",text:"Cycle ended."})}catch(se){_({type:"error",text:(se==null?void 0:se.message)||"Failed to end cycle."})}finally{N(!1)}}async function gr(W){if(W.preventDefault(),_(null),!!(t!=null&&t.email)){if(P!==A){_({type:"error",text:"New passwords do not match."});return}N(!0);try{const se=as.credential(t.email,k);await rD(t,se),await lD(t,P),C(""),D(""),ie(""),_({type:"success",text:"Password updated."})}catch(se){_({type:"error",text:(se==null?void 0:se.message)||"Failed to update password."})}finally{N(!1)}}}async function So(){if(!_e)return new Promise((W,se)=>{const Dt=Xg(t.uid,Q=>{te(Q),Re(!0),Dt(),W()},Q=>{se(Q)})})}async function Sn(){_(null),N(!0);try{await So();const W=Ab(de,{...n,sex:o,height:Number(l),triplemeasurements:!!f}),se=P5({entries:de,derived:W}),Dt=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;A5(Dt,se),_({type:"success",text:"CSV downloaded."})}catch(W){_({type:"error",text:(W==null?void 0:W.message)||"Failed to export CSV."})}finally{N(!1)}}return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Profile & Settings"}),y.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),s&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:s}),S&&y.jsx("div",{className:`notice ${S.type==="error"?"error":"success"}`,style:{marginTop:12},children:S.text}),y.jsxs("form",{onSubmit:qe,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Sex (required for Navy BF%)"}),y.jsxs("select",{value:o,onChange:W=>a(W.target.value),required:!0,children:[y.jsx("option",{value:"",children:"Select"}),y.jsx("option",{value:"male",children:"Male"}),y.jsx("option",{value:"female",children:"Female"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Height (cm)"}),y.jsx("input",{inputMode:"numeric",value:l,onChange:W=>u(W.target.value),placeholder:"e.g. 175",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Target weight (kg) (optional)"}),y.jsx("input",{inputMode:"numeric",value:h,onChange:W=>d(W.target.value),placeholder:"e.g. 82"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Triple measurements mode"}),y.jsxs("select",{value:f?"1":"0",onChange:W=>g(W.target.value==="1"),children:[y.jsx("option",{value:"0",children:"Off (single value per site)"}),y.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 1 name"}),y.jsx("input",{value:w,onChange:W=>I(W.target.value),placeholder:vs[0]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 2 name"}),y.jsx("input",{value:T,onChange:W=>E(W.target.value),placeholder:vs[1]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 3 name"}),y.jsx("input",{value:b,onChange:W=>R(W.target.value),placeholder:vs[2]})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:M||r,children:M?"Saving":"Save profile"}),y.jsx("button",{className:"btn",type:"button",onClick:Sn,disabled:M,children:"Export CSV"})]})]})]}),y.jsxs("div",{className:"panel",id:"cycles",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Cycles"}),y.jsx("div",{className:"muted",children:"Cut / Bulk / Maintain  track your phases over time."})]}),y.jsxs("form",{onSubmit:Ne,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Cycle type"}),y.jsxs("select",{value:le,onChange:W=>ye(W.target.value),children:[y.jsx("option",{value:"cut",children:"Cut"}),y.jsx("option",{value:"bulk",children:"Bulk"}),y.jsx("option",{value:"maintain",children:"Maintain"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Start date"}),y.jsx("input",{type:"date",value:B,onChange:W=>G(W.target.value)})]}),y.jsxs("div",{className:"field",style:{minWidth:220},children:[y.jsx("label",{children:"Current"}),y.jsx("input",{value:q?`${vf(q.type)} (since ${q.startDateIso})`:"No active cycle",readOnly:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:M,children:q?"Start new cycle (ends current)":"Start cycle"}),q&&y.jsx("button",{className:"btn",type:"button",onClick:()=>Nt(q.id),disabled:M,children:"End current cycle (today)"})]})]}),y.jsx("hr",{className:"sep"}),y.jsx("div",{className:"table-wrap",children:y.jsxs("table",{className:"table",style:{minWidth:760},children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Type"}),y.jsx("th",{children:"Began"}),y.jsx("th",{children:"Ended"}),y.jsx("th",{children:"Status"}),y.jsx("th",{children:"Actions"})]})}),y.jsx("tbody",{children:re.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:5,className:"muted",children:"No cycles yet. Start one above."})}):re.map(W=>{const se=!W.endDateIso;return y.jsxs("tr",{children:[y.jsx("td",{children:y.jsx("b",{children:vf(W.type)})}),y.jsx("td",{children:W.startDateIso||""}),y.jsx("td",{children:W.endDateIso||""}),y.jsx("td",{children:se?y.jsx("span",{className:"text-green strong",children:"Active"}):y.jsx("span",{className:"muted",children:"Ended"})}),y.jsx("td",{children:se?y.jsx("button",{className:"btn",type:"button",onClick:()=>Nt(W.id),disabled:M,children:"End today"}):y.jsx("span",{className:"muted",children:""})})]},W.id)})})]})})]}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Change Password"}),y.jsx("div",{className:"muted",children:"Re-auth required."})]}),y.jsxs("form",{onSubmit:gr,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Current password"}),y.jsx("input",{type:"password",value:k,onChange:W=>C(W.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"New password"}),y.jsx("input",{type:"password",value:P,onChange:W=>D(W.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm new password"}),y.jsx("input",{type:"password",value:A,onChange:W=>ie(W.target.value),required:!0})]})]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",disabled:M,children:"Update password"})})]})]})]})}function wf(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function O5({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:r}){const s=String(t||"").toLowerCase()==="female",[o,a]=O.useState(th()),[l,u]=O.useState(""),[h,d]=O.useState(""),[f,g]=O.useState(""),[v,w]=O.useState(""),[I,T]=O.useState(""),[E,b]=O.useState(""),[R,M]=O.useState(""),[N,S]=O.useState(""),[_,k]=O.useState(""),[C,P]=O.useState(""),[D,A]=O.useState(""),[ie,re]=O.useState(""),[le,ye]=O.useState(""),[B,G]=O.useState(""),[q,de]=O.useState(""),[te,_e]=O.useState(""),[Re,qe]=O.useState(""),[Ne,Nt]=O.useState(""),[gr,So]=O.useState(""),Sn=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],W=O.useMemo(()=>{const Q=Cb({protein:wf(h)||0,carbs:wf(f)||0,fats:wf(v)||0});return Number.isFinite(Q)?Math.round(Q):0},[h,f,v]),se=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f))&&Number.isFinite(Number(v));async function Dt(Q){if(Q.preventDefault(),!se())return;const Ke={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(f),fats:Number(v),bench:I===""?null:Number(I),squat:E===""?null:Number(E),deadlift:R===""?null:Number(R)};e?(Ke.neck1=D===""?null:Number(D),Ke.neck2=ie===""?null:Number(ie),Ke.neck3=le===""?null:Number(le),Ke.waist1=B===""?null:Number(B),Ke.waist2=q===""?null:Number(q),Ke.waist3=te===""?null:Number(te),Ke.hip1=s?Re===""?null:Number(Re):null,Ke.hip2=s?Ne===""?null:Number(Ne):null,Ke.hip3=s?gr===""?null:Number(gr):null):(Ke.neck=N===""?null:Number(N),Ke.waist=_===""?null:Number(_),Ke.hip=s?C===""?null:Number(C):null),await i(Ke)}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Daily Entry"}),y.jsxs("div",{className:"muted",children:["Calories preview: ",y.jsx("b",{children:W})," kcal"]})]}),y.jsxs("form",{onSubmit:Dt,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Date"}),y.jsx("input",{type:"date",value:o,onChange:Q=>a(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Weight (kg)"}),y.jsx("input",{inputMode:"decimal",value:l,onChange:Q=>u(Q.target.value),placeholder:"e.g. 85.2",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Protein (g)"}),y.jsx("input",{inputMode:"numeric",value:h,onChange:Q=>d(Q.target.value),placeholder:"e.g. 180"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Carbs (g)"}),y.jsx("input",{inputMode:"numeric",value:f,onChange:Q=>g(Q.target.value),placeholder:"e.g. 220",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Fats (g)"}),y.jsx("input",{inputMode:"numeric",value:v,onChange:Q=>w(Q.target.value),placeholder:"e.g. 70",required:!0})]})]}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[Sn[0]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:I,onChange:Q=>T(Q.target.value),placeholder:"e.g. 100"})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[Sn[1]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:E,onChange:Q=>b(Q.target.value),placeholder:"e.g. 140"})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[Sn[2]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:R,onChange:Q=>M(Q.target.value),placeholder:"e.g. 180"})]})]}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"notice info",children:[y.jsx("b",{children:"Navy measurements (weekly)"}),y.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",s?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),y.jsx("div",{style:{height:10}}),e?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:D,onChange:Q=>A(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:ie,onChange:Q=>re(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:le,onChange:Q=>ye(Q.target.value)})]})]}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:B,onChange:Q=>G(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:q,onChange:Q=>de(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:te,onChange:Q=>_e(Q.target.value)})]})]}),s?y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:Re,onChange:Q=>qe(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:Ne,onChange:Q=>Nt(Q.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:gr,onChange:Q=>So(Q.target.value)})]})]}):null]}):y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck (cm)"}),y.jsx("input",{inputMode:"decimal",value:N,onChange:Q=>S(Q.target.value),placeholder:"optional"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist (cm)"}),y.jsx("input",{inputMode:"decimal",value:_,onChange:Q=>k(Q.target.value),placeholder:"optional"})]}),s?y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip (cm)"}),y.jsx("input",{inputMode:"decimal",value:C,onChange:Q=>P(Q.target.value),placeholder:"optional"})]}):null]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",type:"submit",disabled:!se()||r,children:r?"Saving":"Add / Update Entry"})})]})]})}function L5(t){return t==null?"":String(t)}function V5(t){if(t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function F5({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:r}){const[s,o]=O.useState(!1),a=String(t||"").toLowerCase()==="female",l=Array.isArray(r)&&r.length===3?r:["Bench Press","Squat","Deadlift"],[u,h]=O.useState(null),d=O.useMemo(()=>{const v=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"bench",label:l[0]},{key:"squat",label:l[1]},{key:"deadlift",label:l[2]}];return i?(v.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),a&&v.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):(v.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),a&&v.push({key:"hip",label:"Hip"})),v.push({key:"_actions",label:"Actions",readOnly:!0}),v},[i,r,t]);async function f(v,w,I){if(!(w==="dateIso"||w==="_actions")){h(null),o(!0);try{await iF(e,v,{[w]:V5(I)}),h({type:"success",text:"Saved."})}catch(T){h({type:"error",text:(T==null?void 0:T.message)||"Failed to save."})}finally{o(!1)}}}async function g(v){if(confirm(`Delete entry for ${v}?`)){h(null),o(!0);try{await rF(e,v),h({type:"success",text:"Deleted."})}catch(w){h({type:"error",text:(w==null?void 0:w.message)||"Failed to delete."})}finally{o(!1)}}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"All Entries"}),y.jsxs("div",{className:"muted",children:["Inline edit  blur to save. ",s?"Saving":""]})]}),u&&y.jsx("div",{className:`notice ${u.type==="error"?"error":"success"}`,style:{marginTop:12},children:u.text}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsx("tr",{children:d.map(v=>y.jsx("th",{children:v.label},v.key))})}),y.jsx("tbody",{children:n.map(v=>y.jsx("tr",{children:d.map(w=>w.key==="_actions"?y.jsx("td",{children:y.jsx("button",{className:"btn danger",onClick:()=>g(v.dateIso),children:"Delete"})},w.key):w.readOnly?y.jsx("td",{children:v[w.key]},w.key):y.jsx("td",{children:y.jsx("input",{defaultValue:L5(v[w.key]),onBlur:I=>f(v.dateIso,w.key,I.target.value),inputMode:"decimal"})},w.key))},v.dateIso))})]})})]})}function j5(){const{user:t}=_i(),{profile:e}=Qg(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=O.useState([]),[s,o]=O.useState(!1),[a,l]=O.useState(null);O.useEffect(()=>{if(!t)return;const f=Xg(t.uid,g=>r(g),g=>l({type:"error",text:(g==null?void 0:g.message)||"Failed to load entries."}));return()=>f()},[t]);const u=O.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function d(f){l(null),o(!0);try{await nF(t.uid,f),l({type:"success",text:"Entry saved."})}catch(g){l({type:"error",text:(g==null?void 0:g.message)||"Failed to save entry."})}finally{o(!1)}}return y.jsxs(y.Fragment,{children:[a&&y.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),y.jsx(O5,{sex:h,tripleEnabled:u,liftNames:n,onSubmit:d,busy:s}),y.jsx(F5,{sex:h,userId:t.uid,entries:i,tripleEnabled:u,liftNames:n})]})}function U5(){return y.jsxs(y.Fragment,{children:[y.jsx(JV,{}),y.jsx("div",{className:"app-shell",children:y.jsxs(fP,{children:[y.jsx(kn,{path:"/",element:y.jsx(gp,{to:"/dashboard",replace:!0})}),y.jsx(kn,{path:"/dashboard",element:y.jsx(gk,{})}),y.jsx(kn,{path:"/insights",element:y.jsx(S5,{})}),y.jsx(kn,{path:"/login",element:y.jsx(x5,{})}),y.jsx(kn,{path:"/signup",element:y.jsx(b5,{})}),y.jsx(kn,{path:"/reset-password",element:y.jsx(k5,{})}),y.jsx(kn,{path:"/profile",element:y.jsx(Z0,{children:y.jsx(M5,{})})}),y.jsx(kn,{path:"/entry",element:y.jsx(Z0,{children:y.jsx(j5,{})})}),y.jsx(kn,{path:"*",element:y.jsx(gp,{to:"/dashboard",replace:!0})})]})})]})}class B5 extends im.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?y.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[y.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),y.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),y.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),y.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}Ef.createRoot(document.getElementById("root")).render(y.jsx(im.StrictMode,{children:y.jsx(EP,{basename:"/Body-Recomp-Tracker/",children:y.jsx(XV,{children:y.jsx(ZV,{children:y.jsx(B5,{children:y.jsx(U5,{})})})})})}));
