var Vk=Object.defineProperty;var Fk=(t,e,n)=>e in t?Vk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>Fk(t,typeof e!="symbol"?e+"":e,n);function jk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Uk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aE={exports:{}},ih={},lE={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gl=Symbol.for("react.element"),Bk=Symbol.for("react.portal"),zk=Symbol.for("react.fragment"),$k=Symbol.for("react.strict_mode"),Wk=Symbol.for("react.profiler"),Hk=Symbol.for("react.provider"),qk=Symbol.for("react.context"),Kk=Symbol.for("react.forward_ref"),Gk=Symbol.for("react.suspense"),Qk=Symbol.for("react.memo"),Yk=Symbol.for("react.lazy"),t_=Symbol.iterator;function Xk(t){return t===null||typeof t!="object"?null:(t=t_&&t[t_]||t["@@iterator"],typeof t=="function"?t:null)}var cE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uE=Object.assign,hE={};function lo(t,e,n){this.props=t,this.context=e,this.refs=hE,this.updater=n||cE}lo.prototype.isReactComponent={};lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dE(){}dE.prototype=lo.prototype;function Kp(t,e,n){this.props=t,this.context=e,this.refs=hE,this.updater=n||cE}var Gp=Kp.prototype=new dE;Gp.constructor=Kp;uE(Gp,lo.prototype);Gp.isPureReactComponent=!0;var n_=Array.isArray,fE=Object.prototype.hasOwnProperty,Qp={current:null},pE={key:!0,ref:!0,__self:!0,__source:!0};function gE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fE.call(e,i)&&!pE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:gl,type:t,key:s,ref:o,props:r,_owner:Qp.current}}function Jk(t,e){return{$$typeof:gl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yp(t){return typeof t=="object"&&t!==null&&t.$$typeof===gl}function Zk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var i_=/\/+/g;function gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zk(""+t.key):e.toString(36)}function Dc(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gl:case Bk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+gd(o,0):i,n_(r)?(n="",t!=null&&(n=t.replace(i_,"$&/")+"/"),Dc(r,e,n,"",function(c){return c})):r!=null&&(Yp(r)&&(r=Jk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(i_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",n_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+gd(s,a);o+=Dc(s,e,n,l,r)}else if(l=Xk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+gd(s,a++),o+=Dc(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jl(t,e,n){if(t==null)return t;var i=[],r=0;return Dc(t,i,"","",function(s){return e.call(n,s,r++)}),i}function eC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},Mc={transition:null},tC={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Mc,ReactCurrentOwner:Qp};function mE(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Jl,forEach:function(t,e,n){Jl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jl(t,function(){e++}),e},toArray:function(t){return Jl(t,function(e){return e})||[]},only:function(t){if(!Yp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=lo;ae.Fragment=zk;ae.Profiler=Wk;ae.PureComponent=Kp;ae.StrictMode=$k;ae.Suspense=Gk;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tC;ae.act=mE;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=uE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Qp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fE.call(e,l)&&!pE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:gl,type:t.type,key:r,ref:s,props:i,_owner:o}};ae.createContext=function(t){return t={$$typeof:qk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Hk,_context:t},t.Consumer=t};ae.createElement=gE;ae.createFactory=function(t){var e=gE.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:Kk,render:t}};ae.isValidElement=Yp;ae.lazy=function(t){return{$$typeof:Yk,_payload:{_status:-1,_result:t},_init:eC}};ae.memo=function(t,e){return{$$typeof:Qk,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Mc.transition;Mc.transition={};try{t()}finally{Mc.transition=e}};ae.unstable_act=mE;ae.useCallback=function(t,e){return At.current.useCallback(t,e)};ae.useContext=function(t){return At.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return At.current.useDeferredValue(t)};ae.useEffect=function(t,e){return At.current.useEffect(t,e)};ae.useId=function(){return At.current.useId()};ae.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return At.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};ae.useRef=function(t){return At.current.useRef(t)};ae.useState=function(t){return At.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return At.current.useTransition()};ae.version="18.3.1";lE.exports=ae;var O=lE.exports;const yE=Uk(O),nC=jk({__proto__:null,default:yE},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC=O,rC=Symbol.for("react.element"),sC=Symbol.for("react.fragment"),oC=Object.prototype.hasOwnProperty,aC=iC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lC={key:!0,ref:!0,__self:!0,__source:!0};function _E(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)oC.call(e,i)&&!lC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:rC,type:t,key:s,ref:o,props:r,_owner:aC.current}}ih.Fragment=sC;ih.jsx=_E;ih.jsxs=_E;aE.exports=ih;var y=aE.exports,gf={},vE={exports:{}},Gt={},wE={exports:{}},EE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,q){var K=B.length;B.push(q);e:for(;0<K;){var $=K-1>>>1,J=B[$];if(0<r(J,q))B[$]=q,B[K]=J,K=$;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var q=B[0],K=B.pop();if(K!==q){B[0]=K;e:for(var $=0,J=B.length,ne=J>>>1;$<ne;){var ye=2*($+1)-1,Ee=B[ye],Te=ye+1,Fe=B[Te];if(0>r(Ee,K))Te<J&&0>r(Fe,Ee)?(B[$]=Fe,B[Te]=K,$=Te):(B[$]=Ee,B[ye]=K,$=ye);else if(Te<J&&0>r(Fe,K))B[$]=Fe,B[Te]=K,$=Te;else break e}}return q}function r(B,q){var K=B.sortIndex-q.sortIndex;return K!==0?K:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,g=!1,_=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var q=n(c);q!==null;){if(q.callback===null)i(c);else if(q.startTime<=B)i(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function A(B){if(w=!1,k(B),!_)if(n(l)!==null)_=!0,le(M);else{var q=n(c);q!==null&&se(A,q.startTime-B)}}function M(B,q){_=!1,w&&(w=!1,E(v),v=-1),g=!0;var K=f;try{for(k(q),d=n(l);d!==null&&(!(d.expirationTime>q)||B&&!P());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var J=$(d.expirationTime<=q);q=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&i(l),k(q)}else i(l);d=n(l)}if(d!==null)var ne=!0;else{var ye=n(c);ye!==null&&se(A,ye.startTime-q),ne=!1}return ne}finally{d=null,f=K,g=!1}}var D=!1,x=null,v=-1,b=5,C=-1;function P(){return!(t.unstable_now()-C<b)}function N(){if(x!==null){var B=t.unstable_now();C=B;var q=!0;try{q=x(!0,B)}finally{q?R():(D=!1,x=null)}}else D=!1}var R;if(typeof S=="function")R=function(){S(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,Q=Z.port2;Z.port1.onmessage=N,R=function(){Q.postMessage(null)}}else R=function(){T(N,0)};function le(B){x=B,D||(D=!0,R())}function se(B,q){v=T(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,le(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var K=f;f=q;try{return B()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=f;f=B;try{return q()}finally{f=K}},t.unstable_scheduleCallback=function(B,q,K){var $=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?$+K:$):K=$,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=K+J,B={id:h++,callback:q,priorityLevel:B,startTime:K,expirationTime:J,sortIndex:-1},K>$?(B.sortIndex=K,e(c,B),n(l)===null&&B===n(c)&&(w?(E(v),v=-1):w=!0,se(A,K-$))):(B.sortIndex=J,e(l,B),_||g||(_=!0,le(M))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var q=f;return function(){var K=f;f=q;try{return B.apply(this,arguments)}finally{f=K}}}})(EE);wE.exports=EE;var cC=wE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC=O,Kt=cC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TE=new Set,Na={};function Zr(t,e){zs(t,e),zs(t+"Capture",e)}function zs(t,e){for(Na[t]=e,t=0;t<e.length;t++)TE.add(e[t])}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mf=Object.prototype.hasOwnProperty,hC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r_={},s_={};function dC(t){return mf.call(s_,t)?!0:mf.call(r_,t)?!1:hC.test(t)?s_[t]=!0:(r_[t]=!0,!1)}function fC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pC(t,e,n,i){if(e===null||typeof e>"u"||fC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xp=/[\-:]([a-z])/g;function Jp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xp,Jp);ct[e]=new Pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xp,Jp);ct[e]=new Pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xp,Jp);ct[e]=new Pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Pt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zp(t,e,n,i){var r=ct.hasOwnProperty(e)?ct[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pC(e,n,r,i)&&(n=null),i||r===null?dC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var fi=uC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),ys=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),yf=Symbol.for("react.profiler"),SE=Symbol.for("react.provider"),xE=Symbol.for("react.context"),tg=Symbol.for("react.forward_ref"),_f=Symbol.for("react.suspense"),vf=Symbol.for("react.suspense_list"),ng=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),IE=Symbol.for("react.offscreen"),o_=Symbol.iterator;function Mo(t){return t===null||typeof t!="object"?null:(t=o_&&t[o_]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,md;function Yo(t){if(md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);md=e&&e[1]||""}return`
`+md+t}var yd=!1;function _d(t,e){if(!t||yd)return"";yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function gC(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=_d(t.type,!1),t;case 11:return t=_d(t.type.render,!1),t;case 1:return t=_d(t.type,!0),t;default:return""}}function wf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _s:return"Fragment";case ys:return"Portal";case yf:return"Profiler";case eg:return"StrictMode";case _f:return"Suspense";case vf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xE:return(t.displayName||"Context")+".Consumer";case SE:return(t._context.displayName||"Context")+".Provider";case tg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ng:return e=t.displayName||null,e!==null?e:wf(t.type)||"Memo";case Ii:e=t._payload,t=t._init;try{return wf(t(e))}catch{}}return null}function mC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wf(e);case 8:return e===eg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yC(t){var e=bE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ec(t){t._valueTracker||(t._valueTracker=yC(t))}function kE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=bE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ef(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function a_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ji(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CE(t,e){e=e.checked,e!=null&&Zp(t,"checked",e,!1)}function Tf(t,e){CE(t,e);var n=Ji(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sf(t,e.type,Ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function l_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sf(t,e,n){(e!=="number"||iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xo=Array.isArray;function Rs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ji(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function c_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Xo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ji(n)}}function AE(t,e){var n=Ji(e.value),i=Ji(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function u_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function If(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tc,RE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_C=["Webkit","ms","Moz","O"];Object.keys(ua).forEach(function(t){_C.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ua[e]=ua[t]})});function NE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ua.hasOwnProperty(t)&&ua[t]?(""+e).trim():e+"px"}function DE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=NE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var vC=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bf(t,e){if(e){if(vC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function kf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cf=null;function ig(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Af=null,Ns=null,Ds=null;function h_(t){if(t=_l(t)){if(typeof Af!="function")throw Error(U(280));var e=t.stateNode;e&&(e=lh(e),Af(t.stateNode,t.type,e))}}function ME(t){Ns?Ds?Ds.push(t):Ds=[t]:Ns=t}function OE(){if(Ns){var t=Ns,e=Ds;if(Ds=Ns=null,h_(t),e)for(t=0;t<e.length;t++)h_(e[t])}}function LE(t,e){return t(e)}function VE(){}var vd=!1;function FE(t,e,n){if(vd)return t(e,n);vd=!0;try{return LE(t,e,n)}finally{vd=!1,(Ns!==null||Ds!==null)&&(VE(),OE())}}function Ma(t,e){var n=t.stateNode;if(n===null)return null;var i=lh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Pf=!1;if(ri)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{Pf=!1}function wC(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ha=!1,ru=null,su=!1,Rf=null,EC={onError:function(t){ha=!0,ru=t}};function TC(t,e,n,i,r,s,o,a,l){ha=!1,ru=null,wC.apply(EC,arguments)}function SC(t,e,n,i,r,s,o,a,l){if(TC.apply(this,arguments),ha){if(ha){var c=ru;ha=!1,ru=null}else throw Error(U(198));su||(su=!0,Rf=c)}}function es(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function d_(t){if(es(t)!==t)throw Error(U(188))}function xC(t){var e=t.alternate;if(!e){if(e=es(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return d_(r),t;if(s===i)return d_(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function UE(t){return t=xC(t),t!==null?BE(t):null}function BE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=BE(t);if(e!==null)return e;t=t.sibling}return null}var zE=Kt.unstable_scheduleCallback,f_=Kt.unstable_cancelCallback,IC=Kt.unstable_shouldYield,bC=Kt.unstable_requestPaint,ze=Kt.unstable_now,kC=Kt.unstable_getCurrentPriorityLevel,rg=Kt.unstable_ImmediatePriority,$E=Kt.unstable_UserBlockingPriority,ou=Kt.unstable_NormalPriority,CC=Kt.unstable_LowPriority,WE=Kt.unstable_IdlePriority,rh=null,Nn=null;function AC(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(rh,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:NC,PC=Math.log,RC=Math.LN2;function NC(t){return t>>>=0,t===0?32:31-(PC(t)/RC|0)|0}var nc=64,ic=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function au(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Jo(a):(s&=o,s!==0&&(i=Jo(s)))}else o=n&~r,o!==0?i=Jo(o):s!==0&&(i=Jo(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-yn(e),r=1<<n,i|=t[n],e&=~r;return i}function DC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-yn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=DC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Nf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HE(){var t=nc;return nc<<=1,!(nc&4194240)&&(nc=64),t}function wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ml(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function OC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-yn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function sg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-yn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ve=0;function qE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var KE,og,GE,QE,YE,Df=!1,rc=[],ji=null,Ui=null,Bi=null,Oa=new Map,La=new Map,ki=[],LC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p_(t,e){switch(t){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Bi=null;break;case"pointerover":case"pointerout":Oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(e.pointerId)}}function Lo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=_l(e),e!==null&&og(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function VC(t,e,n,i,r){switch(e){case"focusin":return ji=Lo(ji,t,e,n,i,r),!0;case"dragenter":return Ui=Lo(Ui,t,e,n,i,r),!0;case"mouseover":return Bi=Lo(Bi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Oa.set(s,Lo(Oa.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,La.set(s,Lo(La.get(s)||null,t,e,n,i,r)),!0}return!1}function XE(t){var e=kr(t.target);if(e!==null){var n=es(e);if(n!==null){if(e=n.tag,e===13){if(e=jE(n),e!==null){t.blockedOn=e,YE(t.priority,function(){GE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Cf=i,n.target.dispatchEvent(i),Cf=null}else return e=_l(n),e!==null&&og(e),t.blockedOn=n,!1;e.shift()}return!0}function g_(t,e,n){Oc(t)&&n.delete(e)}function FC(){Df=!1,ji!==null&&Oc(ji)&&(ji=null),Ui!==null&&Oc(Ui)&&(Ui=null),Bi!==null&&Oc(Bi)&&(Bi=null),Oa.forEach(g_),La.forEach(g_)}function Vo(t,e){t.blockedOn===e&&(t.blockedOn=null,Df||(Df=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,FC)))}function Va(t){function e(r){return Vo(r,t)}if(0<rc.length){Vo(rc[0],t);for(var n=1;n<rc.length;n++){var i=rc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ji!==null&&Vo(ji,t),Ui!==null&&Vo(Ui,t),Bi!==null&&Vo(Bi,t),Oa.forEach(e),La.forEach(e),n=0;n<ki.length;n++)i=ki[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ki.length&&(n=ki[0],n.blockedOn===null);)XE(n),n.blockedOn===null&&ki.shift()}var Ms=fi.ReactCurrentBatchConfig,lu=!0;function jC(t,e,n,i){var r=ve,s=Ms.transition;Ms.transition=null;try{ve=1,ag(t,e,n,i)}finally{ve=r,Ms.transition=s}}function UC(t,e,n,i){var r=ve,s=Ms.transition;Ms.transition=null;try{ve=4,ag(t,e,n,i)}finally{ve=r,Ms.transition=s}}function ag(t,e,n,i){if(lu){var r=Mf(t,e,n,i);if(r===null)Pd(t,e,i,cu,n),p_(t,i);else if(VC(r,t,e,n,i))i.stopPropagation();else if(p_(t,i),e&4&&-1<LC.indexOf(t)){for(;r!==null;){var s=_l(r);if(s!==null&&KE(s),s=Mf(t,e,n,i),s===null&&Pd(t,e,i,cu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Pd(t,e,i,null,n)}}var cu=null;function Mf(t,e,n,i){if(cu=null,t=ig(i),t=kr(t),t!==null)if(e=es(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cu=t,null}function JE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kC()){case rg:return 1;case $E:return 4;case ou:case CC:return 16;case WE:return 536870912;default:return 16}default:return 16}}var Di=null,lg=null,Lc=null;function ZE(){if(Lc)return Lc;var t,e=lg,n=e.length,i,r="value"in Di?Di.value:Di.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Lc=r.slice(t,1<i?1-i:void 0)}function Vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function m_(){return!1}function Qt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sc:m_,this.isPropagationStopped=m_,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),e}var co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cg=Qt(co),yl=Le({},co,{view:0,detail:0}),BC=Qt(yl),Ed,Td,Fo,sh=Le({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fo&&(Fo&&t.type==="mousemove"?(Ed=t.screenX-Fo.screenX,Td=t.screenY-Fo.screenY):Td=Ed=0,Fo=t),Ed)},movementY:function(t){return"movementY"in t?t.movementY:Td}}),y_=Qt(sh),zC=Le({},sh,{dataTransfer:0}),$C=Qt(zC),WC=Le({},yl,{relatedTarget:0}),Sd=Qt(WC),HC=Le({},co,{animationName:0,elapsedTime:0,pseudoElement:0}),qC=Qt(HC),KC=Le({},co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GC=Qt(KC),QC=Le({},co,{data:0}),__=Qt(QC),YC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JC[t])?!!e[t]:!1}function ug(){return ZC}var e1=Le({},yl,{key:function(t){if(t.key){var e=YC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ug,charCode:function(t){return t.type==="keypress"?Vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),t1=Qt(e1),n1=Le({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v_=Qt(n1),i1=Le({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ug}),r1=Qt(i1),s1=Le({},co,{propertyName:0,elapsedTime:0,pseudoElement:0}),o1=Qt(s1),a1=Le({},sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),l1=Qt(a1),c1=[9,13,27,32],hg=ri&&"CompositionEvent"in window,da=null;ri&&"documentMode"in document&&(da=document.documentMode);var u1=ri&&"TextEvent"in window&&!da,eT=ri&&(!hg||da&&8<da&&11>=da),w_=" ",E_=!1;function tT(t,e){switch(t){case"keyup":return c1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vs=!1;function h1(t,e){switch(t){case"compositionend":return nT(e);case"keypress":return e.which!==32?null:(E_=!0,w_);case"textInput":return t=e.data,t===w_&&E_?null:t;default:return null}}function d1(t,e){if(vs)return t==="compositionend"||!hg&&tT(t,e)?(t=ZE(),Lc=lg=Di=null,vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eT&&e.locale!=="ko"?null:e.data;default:return null}}var f1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!f1[t.type]:e==="textarea"}function iT(t,e,n,i){ME(i),e=uu(e,"onChange"),0<e.length&&(n=new cg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var fa=null,Fa=null;function p1(t){pT(t,0)}function oh(t){var e=Ts(t);if(kE(e))return t}function g1(t,e){if(t==="change")return e}var rT=!1;if(ri){var xd;if(ri){var Id="oninput"in document;if(!Id){var S_=document.createElement("div");S_.setAttribute("oninput","return;"),Id=typeof S_.oninput=="function"}xd=Id}else xd=!1;rT=xd&&(!document.documentMode||9<document.documentMode)}function x_(){fa&&(fa.detachEvent("onpropertychange",sT),Fa=fa=null)}function sT(t){if(t.propertyName==="value"&&oh(Fa)){var e=[];iT(e,Fa,t,ig(t)),FE(p1,e)}}function m1(t,e,n){t==="focusin"?(x_(),fa=e,Fa=n,fa.attachEvent("onpropertychange",sT)):t==="focusout"&&x_()}function y1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oh(Fa)}function _1(t,e){if(t==="click")return oh(e)}function v1(t,e){if(t==="input"||t==="change")return oh(e)}function w1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:w1;function ja(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!mf.call(e,r)||!wn(t[r],e[r]))return!1}return!0}function I_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b_(t,e){var n=I_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=I_(n)}}function oT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aT(){for(var t=window,e=iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=iu(t.document)}return e}function dg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function E1(t){var e=aT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oT(n.ownerDocument.documentElement,n)){if(i!==null&&dg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=b_(n,s);var o=b_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T1=ri&&"documentMode"in document&&11>=document.documentMode,ws=null,Of=null,pa=null,Lf=!1;function k_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lf||ws==null||ws!==iu(i)||(i=ws,"selectionStart"in i&&dg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pa&&ja(pa,i)||(pa=i,i=uu(Of,"onSelect"),0<i.length&&(e=new cg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ws)))}function oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Es={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},bd={},lT={};ri&&(lT=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function ah(t){if(bd[t])return bd[t];if(!Es[t])return t;var e=Es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lT)return bd[t]=e[n];return t}var cT=ah("animationend"),uT=ah("animationiteration"),hT=ah("animationstart"),dT=ah("transitionend"),fT=new Map,C_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,e){fT.set(t,e),Zr(e,[t])}for(var kd=0;kd<C_.length;kd++){var Cd=C_[kd],S1=Cd.toLowerCase(),x1=Cd[0].toUpperCase()+Cd.slice(1);rr(S1,"on"+x1)}rr(cT,"onAnimationEnd");rr(uT,"onAnimationIteration");rr(hT,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(dT,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function A_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,SC(i,e,void 0,t),t.currentTarget=null}function pT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;A_(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;A_(r,a,c),s=l}}}if(su)throw t=Rf,su=!1,Rf=null,t}function ke(t,e){var n=e[Bf];n===void 0&&(n=e[Bf]=new Set);var i=t+"__bubble";n.has(i)||(gT(e,t,2,!1),n.add(i))}function Ad(t,e,n){var i=0;e&&(i|=4),gT(n,t,i,e)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Ua(t){if(!t[ac]){t[ac]=!0,TE.forEach(function(n){n!=="selectionchange"&&(I1.has(n)||Ad(n,!1,t),Ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ac]||(e[ac]=!0,Ad("selectionchange",!1,e))}}function gT(t,e,n,i){switch(JE(e)){case 1:var r=jC;break;case 4:r=UC;break;default:r=ag}n=r.bind(null,e,n,t),r=void 0,!Pf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Pd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=kr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}FE(function(){var c=s,h=ig(n),d=[];e:{var f=fT.get(t);if(f!==void 0){var g=cg,_=t;switch(t){case"keypress":if(Vc(n)===0)break e;case"keydown":case"keyup":g=t1;break;case"focusin":_="focus",g=Sd;break;case"focusout":_="blur",g=Sd;break;case"beforeblur":case"afterblur":g=Sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=y_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=$C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=r1;break;case cT:case uT:case hT:g=qC;break;case dT:g=o1;break;case"scroll":g=BC;break;case"wheel":g=l1;break;case"copy":case"cut":case"paste":g=GC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=v_}var w=(e&4)!==0,T=!w&&t==="scroll",E=w?f!==null?f+"Capture":null:f;w=[];for(var S=c,k;S!==null;){k=S;var A=k.stateNode;if(k.tag===5&&A!==null&&(k=A,E!==null&&(A=Ma(S,E),A!=null&&w.push(Ba(S,A,k)))),T)break;S=S.return}0<w.length&&(f=new g(f,_,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Cf&&(_=n.relatedTarget||n.fromElement)&&(kr(_)||_[si]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=c,_=_?kr(_):null,_!==null&&(T=es(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=c),g!==_)){if(w=y_,A="onMouseLeave",E="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(w=v_,A="onPointerLeave",E="onPointerEnter",S="pointer"),T=g==null?f:Ts(g),k=_==null?f:Ts(_),f=new w(A,S+"leave",g,n,h),f.target=T,f.relatedTarget=k,A=null,kr(h)===c&&(w=new w(E,S+"enter",_,n,h),w.target=k,w.relatedTarget=T,A=w),T=A,g&&_)t:{for(w=g,E=_,S=0,k=w;k;k=us(k))S++;for(k=0,A=E;A;A=us(A))k++;for(;0<S-k;)w=us(w),S--;for(;0<k-S;)E=us(E),k--;for(;S--;){if(w===E||E!==null&&w===E.alternate)break t;w=us(w),E=us(E)}w=null}else w=null;g!==null&&P_(d,f,g,w,!1),_!==null&&T!==null&&P_(d,T,_,w,!0)}}e:{if(f=c?Ts(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var M=g1;else if(T_(f))if(rT)M=v1;else{M=y1;var D=m1}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=_1);if(M&&(M=M(t,c))){iT(d,M,n,h);break e}D&&D(t,f,c),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&Sf(f,"number",f.value)}switch(D=c?Ts(c):window,t){case"focusin":(T_(D)||D.contentEditable==="true")&&(ws=D,Of=c,pa=null);break;case"focusout":pa=Of=ws=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,k_(d,n,h);break;case"selectionchange":if(T1)break;case"keydown":case"keyup":k_(d,n,h)}var x;if(hg)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else vs?tT(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(eT&&n.locale!=="ko"&&(vs||v!=="onCompositionStart"?v==="onCompositionEnd"&&vs&&(x=ZE()):(Di=h,lg="value"in Di?Di.value:Di.textContent,vs=!0)),D=uu(c,v),0<D.length&&(v=new __(v,t,null,n,h),d.push({event:v,listeners:D}),x?v.data=x:(x=nT(n),x!==null&&(v.data=x)))),(x=u1?h1(t,n):d1(t,n))&&(c=uu(c,"onBeforeInput"),0<c.length&&(h=new __("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=x))}pT(d,e)})}function Ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ma(t,n),s!=null&&i.unshift(Ba(t,s,r)),s=Ma(t,e),s!=null&&i.push(Ba(t,s,r))),t=t.return}return i}function us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function P_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Ma(n,s),l!=null&&o.unshift(Ba(n,l,a))):r||(l=Ma(n,s),l!=null&&o.push(Ba(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var b1=/\r\n?/g,k1=/\u0000|\uFFFD/g;function R_(t){return(typeof t=="string"?t:""+t).replace(b1,`
`).replace(k1,"")}function lc(t,e,n){if(e=R_(e),R_(t)!==e&&n)throw Error(U(425))}function hu(){}var Vf=null,Ff=null;function jf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uf=typeof setTimeout=="function"?setTimeout:void 0,C1=typeof clearTimeout=="function"?clearTimeout:void 0,N_=typeof Promise=="function"?Promise:void 0,A1=typeof queueMicrotask=="function"?queueMicrotask:typeof N_<"u"?function(t){return N_.resolve(null).then(t).catch(P1)}:Uf;function P1(t){setTimeout(function(){throw t})}function Rd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Va(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Va(e)}function zi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function D_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),Pn="__reactFiber$"+uo,za="__reactProps$"+uo,si="__reactContainer$"+uo,Bf="__reactEvents$"+uo,R1="__reactListeners$"+uo,N1="__reactHandles$"+uo;function kr(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[si]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=D_(t);t!==null;){if(n=t[Pn])return n;t=D_(t)}return e}t=n,n=t.parentNode}return null}function _l(t){return t=t[Pn]||t[si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function lh(t){return t[za]||null}var zf=[],Ss=-1;function sr(t){return{current:t}}function Ae(t){0>Ss||(t.current=zf[Ss],zf[Ss]=null,Ss--)}function xe(t,e){Ss++,zf[Ss]=t.current,t.current=e}var Zi={},Tt=sr(Zi),Lt=sr(!1),jr=Zi;function $s(t,e){var n=t.type.contextTypes;if(!n)return Zi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Vt(t){return t=t.childContextTypes,t!=null}function du(){Ae(Lt),Ae(Tt)}function M_(t,e,n){if(Tt.current!==Zi)throw Error(U(168));xe(Tt,e),xe(Lt,n)}function mT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,mC(t)||"Unknown",r));return Le({},n,i)}function fu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zi,jr=Tt.current,xe(Tt,t),xe(Lt,Lt.current),!0}function O_(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=mT(t,e,jr),i.__reactInternalMemoizedMergedChildContext=t,Ae(Lt),Ae(Tt),xe(Tt,t)):Ae(Lt),xe(Lt,n)}var Gn=null,ch=!1,Nd=!1;function yT(t){Gn===null?Gn=[t]:Gn.push(t)}function D1(t){ch=!0,yT(t)}function or(){if(!Nd&&Gn!==null){Nd=!0;var t=0,e=ve;try{var n=Gn;for(ve=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Gn=null,ch=!1}catch(r){throw Gn!==null&&(Gn=Gn.slice(t+1)),zE(rg,or),r}finally{ve=e,Nd=!1}}return null}var xs=[],Is=0,pu=null,gu=0,Xt=[],Jt=0,Ur=null,Yn=1,Xn="";function Tr(t,e){xs[Is++]=gu,xs[Is++]=pu,pu=t,gu=e}function _T(t,e,n){Xt[Jt++]=Yn,Xt[Jt++]=Xn,Xt[Jt++]=Ur,Ur=t;var i=Yn;t=Xn;var r=32-yn(i)-1;i&=~(1<<r),n+=1;var s=32-yn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Yn=1<<32-yn(e)+r|n<<r|i,Xn=s+t}else Yn=1<<s|n<<r|i,Xn=t}function fg(t){t.return!==null&&(Tr(t,1),_T(t,1,0))}function pg(t){for(;t===pu;)pu=xs[--Is],xs[Is]=null,gu=xs[--Is],xs[Is]=null;for(;t===Ur;)Ur=Xt[--Jt],Xt[Jt]=null,Xn=Xt[--Jt],Xt[Jt]=null,Yn=Xt[--Jt],Xt[Jt]=null}var qt=null,Wt=null,Re=!1,gn=null;function vT(t,e){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function L_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Wt=zi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ur!==null?{id:Yn,overflow:Xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Wt=null,!0):!1;default:return!1}}function $f(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wf(t){if(Re){var e=Wt;if(e){var n=e;if(!L_(t,e)){if($f(t))throw Error(U(418));e=zi(n.nextSibling);var i=qt;e&&L_(t,e)?vT(i,n):(t.flags=t.flags&-4097|2,Re=!1,qt=t)}}else{if($f(t))throw Error(U(418));t.flags=t.flags&-4097|2,Re=!1,qt=t}}}function V_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function cc(t){if(t!==qt)return!1;if(!Re)return V_(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jf(t.type,t.memoizedProps)),e&&(e=Wt)){if($f(t))throw wT(),Error(U(418));for(;e;)vT(t,e),e=zi(e.nextSibling)}if(V_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=zi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=qt?zi(t.stateNode.nextSibling):null;return!0}function wT(){for(var t=Wt;t;)t=zi(t.nextSibling)}function Ws(){Wt=qt=null,Re=!1}function gg(t){gn===null?gn=[t]:gn.push(t)}var M1=fi.ReactCurrentBatchConfig;function jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function uc(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function F_(t){var e=t._init;return e(t._payload)}function ET(t){function e(E,S){if(t){var k=E.deletions;k===null?(E.deletions=[S],E.flags|=16):k.push(S)}}function n(E,S){if(!t)return null;for(;S!==null;)e(E,S),S=S.sibling;return null}function i(E,S){for(E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function r(E,S){return E=qi(E,S),E.index=0,E.sibling=null,E}function s(E,S,k){return E.index=k,t?(k=E.alternate,k!==null?(k=k.index,k<S?(E.flags|=2,S):k):(E.flags|=2,S)):(E.flags|=1048576,S)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,S,k,A){return S===null||S.tag!==6?(S=jd(k,E.mode,A),S.return=E,S):(S=r(S,k),S.return=E,S)}function l(E,S,k,A){var M=k.type;return M===_s?h(E,S,k.props.children,A,k.key):S!==null&&(S.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ii&&F_(M)===S.type)?(A=r(S,k.props),A.ref=jo(E,S,k),A.return=E,A):(A=Wc(k.type,k.key,k.props,null,E.mode,A),A.ref=jo(E,S,k),A.return=E,A)}function c(E,S,k,A){return S===null||S.tag!==4||S.stateNode.containerInfo!==k.containerInfo||S.stateNode.implementation!==k.implementation?(S=Ud(k,E.mode,A),S.return=E,S):(S=r(S,k.children||[]),S.return=E,S)}function h(E,S,k,A,M){return S===null||S.tag!==7?(S=Or(k,E.mode,A,M),S.return=E,S):(S=r(S,k),S.return=E,S)}function d(E,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return S=jd(""+S,E.mode,k),S.return=E,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zl:return k=Wc(S.type,S.key,S.props,null,E.mode,k),k.ref=jo(E,null,S),k.return=E,k;case ys:return S=Ud(S,E.mode,k),S.return=E,S;case Ii:var A=S._init;return d(E,A(S._payload),k)}if(Xo(S)||Mo(S))return S=Or(S,E.mode,k,null),S.return=E,S;uc(E,S)}return null}function f(E,S,k,A){var M=S!==null?S.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return M!==null?null:a(E,S,""+k,A);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Zl:return k.key===M?l(E,S,k,A):null;case ys:return k.key===M?c(E,S,k,A):null;case Ii:return M=k._init,f(E,S,M(k._payload),A)}if(Xo(k)||Mo(k))return M!==null?null:h(E,S,k,A,null);uc(E,k)}return null}function g(E,S,k,A,M){if(typeof A=="string"&&A!==""||typeof A=="number")return E=E.get(k)||null,a(S,E,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Zl:return E=E.get(A.key===null?k:A.key)||null,l(S,E,A,M);case ys:return E=E.get(A.key===null?k:A.key)||null,c(S,E,A,M);case Ii:var D=A._init;return g(E,S,k,D(A._payload),M)}if(Xo(A)||Mo(A))return E=E.get(k)||null,h(S,E,A,M,null);uc(S,A)}return null}function _(E,S,k,A){for(var M=null,D=null,x=S,v=S=0,b=null;x!==null&&v<k.length;v++){x.index>v?(b=x,x=null):b=x.sibling;var C=f(E,x,k[v],A);if(C===null){x===null&&(x=b);break}t&&x&&C.alternate===null&&e(E,x),S=s(C,S,v),D===null?M=C:D.sibling=C,D=C,x=b}if(v===k.length)return n(E,x),Re&&Tr(E,v),M;if(x===null){for(;v<k.length;v++)x=d(E,k[v],A),x!==null&&(S=s(x,S,v),D===null?M=x:D.sibling=x,D=x);return Re&&Tr(E,v),M}for(x=i(E,x);v<k.length;v++)b=g(x,E,v,k[v],A),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?v:b.key),S=s(b,S,v),D===null?M=b:D.sibling=b,D=b);return t&&x.forEach(function(P){return e(E,P)}),Re&&Tr(E,v),M}function w(E,S,k,A){var M=Mo(k);if(typeof M!="function")throw Error(U(150));if(k=M.call(k),k==null)throw Error(U(151));for(var D=M=null,x=S,v=S=0,b=null,C=k.next();x!==null&&!C.done;v++,C=k.next()){x.index>v?(b=x,x=null):b=x.sibling;var P=f(E,x,C.value,A);if(P===null){x===null&&(x=b);break}t&&x&&P.alternate===null&&e(E,x),S=s(P,S,v),D===null?M=P:D.sibling=P,D=P,x=b}if(C.done)return n(E,x),Re&&Tr(E,v),M;if(x===null){for(;!C.done;v++,C=k.next())C=d(E,C.value,A),C!==null&&(S=s(C,S,v),D===null?M=C:D.sibling=C,D=C);return Re&&Tr(E,v),M}for(x=i(E,x);!C.done;v++,C=k.next())C=g(x,E,v,C.value,A),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?v:C.key),S=s(C,S,v),D===null?M=C:D.sibling=C,D=C);return t&&x.forEach(function(N){return e(E,N)}),Re&&Tr(E,v),M}function T(E,S,k,A){if(typeof k=="object"&&k!==null&&k.type===_s&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Zl:e:{for(var M=k.key,D=S;D!==null;){if(D.key===M){if(M=k.type,M===_s){if(D.tag===7){n(E,D.sibling),S=r(D,k.props.children),S.return=E,E=S;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ii&&F_(M)===D.type){n(E,D.sibling),S=r(D,k.props),S.ref=jo(E,D,k),S.return=E,E=S;break e}n(E,D);break}else e(E,D);D=D.sibling}k.type===_s?(S=Or(k.props.children,E.mode,A,k.key),S.return=E,E=S):(A=Wc(k.type,k.key,k.props,null,E.mode,A),A.ref=jo(E,S,k),A.return=E,E=A)}return o(E);case ys:e:{for(D=k.key;S!==null;){if(S.key===D)if(S.tag===4&&S.stateNode.containerInfo===k.containerInfo&&S.stateNode.implementation===k.implementation){n(E,S.sibling),S=r(S,k.children||[]),S.return=E,E=S;break e}else{n(E,S);break}else e(E,S);S=S.sibling}S=Ud(k,E.mode,A),S.return=E,E=S}return o(E);case Ii:return D=k._init,T(E,S,D(k._payload),A)}if(Xo(k))return _(E,S,k,A);if(Mo(k))return w(E,S,k,A);uc(E,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,S!==null&&S.tag===6?(n(E,S.sibling),S=r(S,k),S.return=E,E=S):(n(E,S),S=jd(k,E.mode,A),S.return=E,E=S),o(E)):n(E,S)}return T}var Hs=ET(!0),TT=ET(!1),mu=sr(null),yu=null,bs=null,mg=null;function yg(){mg=bs=yu=null}function _g(t){var e=mu.current;Ae(mu),t._currentValue=e}function Hf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Os(t,e){yu=t,mg=bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(mg!==t)if(t={context:t,memoizedValue:e,next:null},bs===null){if(yu===null)throw Error(U(308));bs=t,yu.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var Cr=null;function vg(t){Cr===null?Cr=[t]:Cr.push(t)}function ST(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,vg(e)):(n.next=r.next,r.next=n),e.interleaved=n,oi(t,i)}function oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bi=!1;function wg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ti(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $i(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,fe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,oi(t,n)}return r=i.interleaved,r===null?(e.next=e,vg(i)):(e.next=r.next,r.next=e),i.interleaved=e,oi(t,n)}function Fc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,sg(t,n)}}function j_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _u(t,e,n,i){var r=t.updateQueue;bi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(f=e,g=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){d=_.call(g,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,f=typeof _=="function"?_.call(g,d,f):_,f==null)break e;d=Le({},d,f);break e;case 2:bi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);zr|=o,t.lanes=o,t.memoizedState=d}}function U_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var vl={},Dn=sr(vl),$a=sr(vl),Wa=sr(vl);function Ar(t){if(t===vl)throw Error(U(174));return t}function Eg(t,e){switch(xe(Wa,e),xe($a,t),xe(Dn,vl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:If(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=If(e,t)}Ae(Dn),xe(Dn,e)}function qs(){Ae(Dn),Ae($a),Ae(Wa)}function IT(t){Ar(Wa.current);var e=Ar(Dn.current),n=If(e,t.type);e!==n&&(xe($a,t),xe(Dn,n))}function Tg(t){$a.current===t&&(Ae(Dn),Ae($a))}var De=sr(0);function vu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dd=[];function Sg(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var jc=fi.ReactCurrentDispatcher,Md=fi.ReactCurrentBatchConfig,Br=0,Me=null,Ke=null,Ze=null,wu=!1,ga=!1,Ha=0,O1=0;function pt(){throw Error(U(321))}function xg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Ig(t,e,n,i,r,s){if(Br=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jc.current=t===null||t.memoizedState===null?j1:U1,t=n(i,r),ga){s=0;do{if(ga=!1,Ha=0,25<=s)throw Error(U(301));s+=1,Ze=Ke=null,e.updateQueue=null,jc.current=B1,t=n(i,r)}while(ga)}if(jc.current=Eu,e=Ke!==null&&Ke.next!==null,Br=0,Ze=Ke=Me=null,wu=!1,e)throw Error(U(300));return t}function bg(){var t=Ha!==0;return Ha=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Me.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function an(){if(Ke===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ze===null?Me.memoizedState:Ze.next;if(e!==null)Ze=e,Ke=t;else{if(t===null)throw Error(U(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Me.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function qa(t,e){return typeof e=="function"?e(t):e}function Od(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=Ke,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Br&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Me.lanes|=h,zr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,wn(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Me.lanes|=s,zr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ld(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);wn(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function bT(){}function kT(t,e){var n=Me,i=an(),r=e(),s=!wn(i.memoizedState,r);if(s&&(i.memoizedState=r,Ot=!0),i=i.queue,kg(PT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Ka(9,AT.bind(null,n,i,r,e),void 0,null),tt===null)throw Error(U(349));Br&30||CT(n,e,r)}return r}function CT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AT(t,e,n,i){e.value=n,e.getSnapshot=i,RT(e)&&NT(t)}function PT(t,e,n){return n(function(){RT(e)&&NT(t)})}function RT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function NT(t){var e=oi(t,1);e!==null&&_n(e,t,1,-1)}function B_(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:t},e.queue=t,t=t.dispatch=F1.bind(null,Me,t),[e.memoizedState,t]}function Ka(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function DT(){return an().memoizedState}function Uc(t,e,n,i){var r=Cn();Me.flags|=t,r.memoizedState=Ka(1|e,n,void 0,i===void 0?null:i)}function uh(t,e,n,i){var r=an();i=i===void 0?null:i;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,i!==null&&xg(i,o.deps)){r.memoizedState=Ka(e,n,s,i);return}}Me.flags|=t,r.memoizedState=Ka(1|e,n,s,i)}function z_(t,e){return Uc(8390656,8,t,e)}function kg(t,e){return uh(2048,8,t,e)}function MT(t,e){return uh(4,2,t,e)}function OT(t,e){return uh(4,4,t,e)}function LT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VT(t,e,n){return n=n!=null?n.concat([t]):null,uh(4,4,LT.bind(null,e,t),n)}function Cg(){}function FT(t,e){var n=an();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function jT(t,e){var n=an();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function UT(t,e,n){return Br&21?(wn(n,e)||(n=HE(),Me.lanes|=n,zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function L1(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var i=Md.transition;Md.transition={};try{t(!1),e()}finally{ve=n,Md.transition=i}}function BT(){return an().memoizedState}function V1(t,e,n){var i=Hi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},zT(t))$T(e,n);else if(n=ST(t,e,n,i),n!==null){var r=Ct();_n(n,t,i,r),WT(n,e,i)}}function F1(t,e,n){var i=Hi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(zT(t))$T(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,wn(a,o)){var l=e.interleaved;l===null?(r.next=r,vg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=ST(t,e,r,i),n!==null&&(r=Ct(),_n(n,t,i,r),WT(n,e,i))}}function zT(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function $T(t,e){ga=wu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,sg(t,n)}}var Eu={readContext:on,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},j1={readContext:on,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:z_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uc(4194308,4,LT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uc(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Cn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=V1.bind(null,Me,t),[i.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:B_,useDebugValue:Cg,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=B_(!1),e=t[0];return t=L1.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Me,r=Cn();if(Re){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),tt===null)throw Error(U(349));Br&30||CT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,z_(PT.bind(null,i,s,t),[t]),i.flags|=2048,Ka(9,AT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Cn(),e=tt.identifierPrefix;if(Re){var n=Xn,i=Yn;n=(i&~(1<<32-yn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=O1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},U1={readContext:on,useCallback:FT,useContext:on,useEffect:kg,useImperativeHandle:VT,useInsertionEffect:MT,useLayoutEffect:OT,useMemo:jT,useReducer:Od,useRef:DT,useState:function(){return Od(qa)},useDebugValue:Cg,useDeferredValue:function(t){var e=an();return UT(e,Ke.memoizedState,t)},useTransition:function(){var t=Od(qa)[0],e=an().memoizedState;return[t,e]},useMutableSource:bT,useSyncExternalStore:kT,useId:BT,unstable_isNewReconciler:!1},B1={readContext:on,useCallback:FT,useContext:on,useEffect:kg,useImperativeHandle:VT,useInsertionEffect:MT,useLayoutEffect:OT,useMemo:jT,useReducer:Ld,useRef:DT,useState:function(){return Ld(qa)},useDebugValue:Cg,useDeferredValue:function(t){var e=an();return Ke===null?e.memoizedState=t:UT(e,Ke.memoizedState,t)},useTransition:function(){var t=Ld(qa)[0],e=an().memoizedState;return[t,e]},useMutableSource:bT,useSyncExternalStore:kT,useId:BT,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hh={isMounted:function(t){return(t=t._reactInternals)?es(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ct(),r=Hi(t),s=ti(i,r);s.payload=e,n!=null&&(s.callback=n),e=$i(t,s,r),e!==null&&(_n(e,t,r,i),Fc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ct(),r=Hi(t),s=ti(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=$i(t,s,r),e!==null&&(_n(e,t,r,i),Fc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),i=Hi(t),r=ti(n,i);r.tag=2,e!=null&&(r.callback=e),e=$i(t,r,i),e!==null&&(_n(e,t,i,n),Fc(e,t,i))}};function $_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ja(n,i)||!ja(r,s):!0}function HT(t,e,n){var i=!1,r=Zi,s=e.contextType;return typeof s=="object"&&s!==null?s=on(s):(r=Vt(e)?jr:Tt.current,i=e.contextTypes,s=(i=i!=null)?$s(t,r):Zi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function W_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&hh.enqueueReplaceState(e,e.state,null)}function Kf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},wg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=on(s):(s=Vt(e)?jr:Tt.current,r.context=$s(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qf(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&hh.enqueueReplaceState(r,r.state,null),_u(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ks(t,e){try{var n="",i=e;do n+=gC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z1=typeof WeakMap=="function"?WeakMap:Map;function qT(t,e,n){n=ti(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Su||(Su=!0,rp=i),Gf(t,e)},n}function KT(t,e,n){n=ti(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Gf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gf(t,e),typeof i!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function H_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new z1;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=nA.bind(null,t,e,n),e.then(t,t))}function q_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function K_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ti(-1,1),e.tag=2,$i(n,e,1))),n.lanes|=1),t)}var $1=fi.ReactCurrentOwner,Ot=!1;function kt(t,e,n,i){e.child=t===null?TT(e,null,n,i):Hs(e,t.child,n,i)}function G_(t,e,n,i,r){n=n.render;var s=e.ref;return Os(e,r),i=Ig(t,e,n,i,s,r),n=bg(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ai(t,e,r)):(Re&&n&&fg(e),e.flags|=1,kt(t,e,i,r),e.child)}function Q_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Lg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,GT(t,e,s,i,r)):(t=Wc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ja,n(o,i)&&t.ref===e.ref)return ai(t,e,r)}return e.flags|=1,t=qi(s,i),t.ref=e.ref,t.return=e,e.child=t}function GT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ja(s,i)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,ai(t,e,r)}return Qf(t,e,n,i,r)}function QT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Cs,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Cs,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,xe(Cs,$t),$t|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,xe(Cs,$t),$t|=i;return kt(t,e,r,n),e.child}function YT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qf(t,e,n,i,r){var s=Vt(n)?jr:Tt.current;return s=$s(e,s),Os(e,r),n=Ig(t,e,n,i,s,r),i=bg(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ai(t,e,r)):(Re&&i&&fg(e),e.flags|=1,kt(t,e,n,r),e.child)}function Y_(t,e,n,i,r){if(Vt(n)){var s=!0;fu(e)}else s=!1;if(Os(e,r),e.stateNode===null)Bc(t,e),HT(e,n,i),Kf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=on(c):(c=Vt(n)?jr:Tt.current,c=$s(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&W_(e,o,i,c),bi=!1;var f=e.memoizedState;o.state=f,_u(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Lt.current||bi?(typeof h=="function"&&(qf(e,n,h,i),l=e.memoizedState),(a=bi||$_(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,xT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=on(l):(l=Vt(n)?jr:Tt.current,l=$s(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&W_(e,o,i,l),bi=!1,f=e.memoizedState,o.state=f,_u(e,i,o,r);var _=e.memoizedState;a!==d||f!==_||Lt.current||bi?(typeof g=="function"&&(qf(e,n,g,i),_=e.memoizedState),(c=bi||$_(e,n,c,i,f,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Yf(t,e,n,i,s,r)}function Yf(t,e,n,i,r,s){YT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&O_(e,n,!1),ai(t,e,s);i=e.stateNode,$1.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Hs(e,t.child,null,s),e.child=Hs(e,null,a,s)):kt(t,e,a,s),e.memoizedState=i.state,r&&O_(e,n,!0),e.child}function XT(t){var e=t.stateNode;e.pendingContext?M_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&M_(t,e.context,!1),Eg(t,e.containerInfo)}function X_(t,e,n,i,r){return Ws(),gg(r),e.flags|=256,kt(t,e,n,i),e.child}var Xf={dehydrated:null,treeContext:null,retryLane:0};function Jf(t){return{baseLanes:t,cachePool:null,transitions:null}}function JT(t,e,n){var i=e.pendingProps,r=De.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),xe(De,r&1),t===null)return Wf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ph(o,i,0,null),t=Or(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Jf(n),e.memoizedState=Xf,t):Ag(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return W1(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=qi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=qi(a,s):(s=Or(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Jf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Xf,i}return s=t.child,t=s.sibling,i=qi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ag(t,e){return e=ph({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hc(t,e,n,i){return i!==null&&gg(i),Hs(e,t.child,null,n),t=Ag(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function W1(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Vd(Error(U(422))),hc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=ph({mode:"visible",children:i.children},r,0,null),s=Or(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Hs(e,t.child,null,o),e.child.memoizedState=Jf(o),e.memoizedState=Xf,s);if(!(e.mode&1))return hc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=Vd(s,i,void 0),hc(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ot||a){if(i=tt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,oi(t,r),_n(i,t,r,-1))}return Og(),i=Vd(Error(U(421))),hc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=iA.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Wt=zi(r.nextSibling),qt=e,Re=!0,gn=null,t!==null&&(Xt[Jt++]=Yn,Xt[Jt++]=Xn,Xt[Jt++]=Ur,Yn=t.id,Xn=t.overflow,Ur=e),e=Ag(e,i.children),e.flags|=4096,e)}function J_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Hf(t.return,e,n)}function Fd(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function ZT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(kt(t,e,i.children,n),i=De.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J_(t,n,e);else if(t.tag===19)J_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(xe(De,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&vu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Fd(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&vu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Fd(e,!0,n,null,s);break;case"together":Fd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function H1(t,e,n){switch(e.tag){case 3:XT(e),Ws();break;case 5:IT(e);break;case 1:Vt(e.type)&&fu(e);break;case 4:Eg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;xe(mu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(xe(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?JT(t,e,n):(xe(De,De.current&1),t=ai(t,e,n),t!==null?t.sibling:null);xe(De,De.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ZT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xe(De,De.current),i)break;return null;case 22:case 23:return e.lanes=0,QT(t,e,n)}return ai(t,e,n)}var eS,Zf,tS,nS;eS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zf=function(){};tS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ar(Dn.current);var s=null;switch(n){case"input":r=Ef(t,r),i=Ef(t,i),s=[];break;case"select":r=Le({},r,{value:void 0}),i=Le({},i,{value:void 0}),s=[];break;case"textarea":r=xf(t,r),i=xf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=hu)}bf(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Na.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Na.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};nS=function(t,e,n,i){n!==i&&(e.flags|=4)};function Uo(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function q1(t,e,n){var i=e.pendingProps;switch(pg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Vt(e.type)&&du(),gt(e),null;case 3:return i=e.stateNode,qs(),Ae(Lt),Ae(Tt),Sg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(cc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(ap(gn),gn=null))),Zf(t,e),gt(e),null;case 5:Tg(e);var r=Ar(Wa.current);if(n=e.type,t!==null&&e.stateNode!=null)tS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return gt(e),null}if(t=Ar(Dn.current),cc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Pn]=e,i[za]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(r=0;r<Zo.length;r++)ke(Zo[r],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":a_(i,s),ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ke("invalid",i);break;case"textarea":c_(i,s),ke("invalid",i)}bf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&lc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lc(i.textContent,a,t),r=["children",""+a]):Na.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",i)}switch(n){case"input":ec(i),l_(i,s,!0);break;case"textarea":ec(i),u_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=hu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Pn]=e,t[za]=i,eS(t,e,!1,!1),e.stateNode=t;e:{switch(o=kf(n,i),n){case"dialog":ke("cancel",t),ke("close",t),r=i;break;case"iframe":case"object":case"embed":ke("load",t),r=i;break;case"video":case"audio":for(r=0;r<Zo.length;r++)ke(Zo[r],t);r=i;break;case"source":ke("error",t),r=i;break;case"img":case"image":case"link":ke("error",t),ke("load",t),r=i;break;case"details":ke("toggle",t),r=i;break;case"input":a_(t,i),r=Ef(t,i),ke("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Le({},i,{value:void 0}),ke("invalid",t);break;case"textarea":c_(t,i),r=xf(t,i),ke("invalid",t);break;default:r=i}bf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?DE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&RE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Da(t,l):typeof l=="number"&&Da(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Na.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",t):l!=null&&Zp(t,s,l,o))}switch(n){case"input":ec(t),l_(t,i,!1);break;case"textarea":ec(t),u_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ji(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Rs(t,!!i.multiple,s,!1):i.defaultValue!=null&&Rs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=hu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)nS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=Ar(Wa.current),Ar(Dn.current),cc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Pn]=e,(s=i.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:lc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Pn]=e,e.stateNode=i}return gt(e),null;case 13:if(Ae(De),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Wt!==null&&e.mode&1&&!(e.flags&128))wT(),Ws(),e.flags|=98560,s=!1;else if(s=cc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Pn]=e}else Ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),s=!1}else gn!==null&&(ap(gn),gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Qe===0&&(Qe=3):Og())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return qs(),Zf(t,e),t===null&&Ua(e.stateNode.containerInfo),gt(e),null;case 10:return _g(e.type._context),gt(e),null;case 17:return Vt(e.type)&&du(),gt(e),null;case 19:if(Ae(De),s=e.memoizedState,s===null)return gt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Uo(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vu(t),o!==null){for(e.flags|=128,Uo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&ze()>Gs&&(e.flags|=128,i=!0,Uo(s,!1),e.lanes=4194304)}else{if(!i)if(t=vu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Uo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Re)return gt(e),null}else 2*ze()-s.renderingStartTime>Gs&&n!==1073741824&&(e.flags|=128,i=!0,Uo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ze(),e.sibling=null,n=De.current,xe(De,i?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return Mg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?$t&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function K1(t,e){switch(pg(e),e.tag){case 1:return Vt(e.type)&&du(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qs(),Ae(Lt),Ae(Tt),Sg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tg(e),null;case 13:if(Ae(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(De),null;case 4:return qs(),null;case 10:return _g(e.type._context),null;case 22:case 23:return Mg(),null;case 24:return null;default:return null}}var dc=!1,vt=!1,G1=typeof WeakSet=="function"?WeakSet:Set,W=null;function ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ue(t,e,i)}else n.current=null}function ep(t,e,n){try{n()}catch(i){Ue(t,e,i)}}var Z_=!1;function Q1(t,e){if(Vf=lu,t=aT(),dg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++h===i&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ff={focusedElem:t,selectionRange:n},lu=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,T=_.memoizedState,E=e.stateNode,S=E.getSnapshotBeforeUpdate(e.elementType===e.type?w:fn(e.type,w),T);E.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(A){Ue(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return _=Z_,Z_=!1,_}function ma(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&ep(e,n,s)}r=r.next}while(r!==i)}}function dh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function tp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iS(t){var e=t.alternate;e!==null&&(t.alternate=null,iS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[za],delete e[Bf],delete e[R1],delete e[N1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rS(t){return t.tag===5||t.tag===3||t.tag===4}function ev(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function np(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hu));else if(i!==4&&(t=t.child,t!==null))for(np(t,e,n),t=t.sibling;t!==null;)np(t,e,n),t=t.sibling}function ip(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ip(t,e,n),t=t.sibling;t!==null;)ip(t,e,n),t=t.sibling}var rt=null,pn=!1;function Ei(t,e,n){for(n=n.child;n!==null;)sS(t,e,n),n=n.sibling}function sS(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(rh,n)}catch{}switch(n.tag){case 5:vt||ks(n,e);case 6:var i=rt,r=pn;rt=null,Ei(t,e,n),rt=i,pn=r,rt!==null&&(pn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(pn?(t=rt,n=n.stateNode,t.nodeType===8?Rd(t.parentNode,n):t.nodeType===1&&Rd(t,n),Va(t)):Rd(rt,n.stateNode));break;case 4:i=rt,r=pn,rt=n.stateNode.containerInfo,pn=!0,Ei(t,e,n),rt=i,pn=r;break;case 0:case 11:case 14:case 15:if(!vt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ep(n,e,o),r=r.next}while(r!==i)}Ei(t,e,n);break;case 1:if(!vt&&(ks(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ue(n,e,a)}Ei(t,e,n);break;case 21:Ei(t,e,n);break;case 22:n.mode&1?(vt=(i=vt)||n.memoizedState!==null,Ei(t,e,n),vt=i):Ei(t,e,n);break;default:Ei(t,e,n)}}function tv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new G1),e.forEach(function(i){var r=rA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,pn=!1;break e;case 3:rt=a.stateNode.containerInfo,pn=!0;break e;case 4:rt=a.stateNode.containerInfo,pn=!0;break e}a=a.return}if(rt===null)throw Error(U(160));sS(s,o,r),rt=null,pn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ue(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oS(e,t),e=e.sibling}function oS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),xn(t),i&4){try{ma(3,t,t.return),dh(3,t)}catch(w){Ue(t,t.return,w)}try{ma(5,t,t.return)}catch(w){Ue(t,t.return,w)}}break;case 1:dn(e,t),xn(t),i&512&&n!==null&&ks(n,n.return);break;case 5:if(dn(e,t),xn(t),i&512&&n!==null&&ks(n,n.return),t.flags&32){var r=t.stateNode;try{Da(r,"")}catch(w){Ue(t,t.return,w)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CE(r,s),kf(a,o);var c=kf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?DE(r,d):h==="dangerouslySetInnerHTML"?RE(r,d):h==="children"?Da(r,d):Zp(r,h,d,c)}switch(a){case"input":Tf(r,s);break;case"textarea":AE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Rs(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Rs(r,!!s.multiple,s.defaultValue,!0):Rs(r,!!s.multiple,s.multiple?[]:"",!1))}r[za]=s}catch(w){Ue(t,t.return,w)}}break;case 6:if(dn(e,t),xn(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(w){Ue(t,t.return,w)}}break;case 3:if(dn(e,t),xn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Va(e.containerInfo)}catch(w){Ue(t,t.return,w)}break;case 4:dn(e,t),xn(t);break;case 13:dn(e,t),xn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ng=ze())),i&4&&tv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||h,dn(e,t),vt=c):dn(e,t),xn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(d=W=h;W!==null;){switch(f=W,g=f.child,f.tag){case 0:case 11:case 14:case 15:ma(4,f,f.return);break;case 1:ks(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){Ue(i,n,w)}}break;case 5:ks(f,f.return);break;case 22:if(f.memoizedState!==null){iv(d);continue}}g!==null?(g.return=f,W=g):iv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NE("display",o))}catch(w){Ue(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){Ue(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dn(e,t),xn(t),i&4&&tv(t);break;case 21:break;default:dn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rS(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Da(r,""),i.flags&=-33);var s=ev(t);ip(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=ev(t);np(t,a,o);break;default:throw Error(U(161))}}catch(l){Ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Y1(t,e,n){W=t,aS(t)}function aS(t,e,n){for(var i=(t.mode&1)!==0;W!==null;){var r=W,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||dc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||vt;a=dc;var c=vt;if(dc=o,(vt=l)&&!c)for(W=r;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?rv(r):l!==null?(l.return=o,W=l):rv(r);for(;s!==null;)W=s,aS(s),s=s.sibling;W=r,dc=a,vt=c}nv(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,W=s):nv(t)}}function nv(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||dh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!vt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&U_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}U_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Va(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}vt||e.flags&512&&tp(e)}catch(f){Ue(e,e.return,f)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function iv(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function rv(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dh(4,e)}catch(l){Ue(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ue(e,r,l)}}var s=e.return;try{tp(e)}catch(l){Ue(e,s,l)}break;case 5:var o=e.return;try{tp(e)}catch(l){Ue(e,o,l)}}}catch(l){Ue(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var X1=Math.ceil,Tu=fi.ReactCurrentDispatcher,Pg=fi.ReactCurrentOwner,nn=fi.ReactCurrentBatchConfig,fe=0,tt=null,He=null,at=0,$t=0,Cs=sr(0),Qe=0,Ga=null,zr=0,fh=0,Rg=0,ya=null,Nt=null,Ng=0,Gs=1/0,Kn=null,Su=!1,rp=null,Wi=null,fc=!1,Mi=null,xu=0,_a=0,sp=null,zc=-1,$c=0;function Ct(){return fe&6?ze():zc!==-1?zc:zc=ze()}function Hi(t){return t.mode&1?fe&2&&at!==0?at&-at:M1.transition!==null?($c===0&&($c=HE()),$c):(t=ve,t!==0||(t=window.event,t=t===void 0?16:JE(t.type)),t):1}function _n(t,e,n,i){if(50<_a)throw _a=0,sp=null,Error(U(185));ml(t,n,i),(!(fe&2)||t!==tt)&&(t===tt&&(!(fe&2)&&(fh|=n),Qe===4&&Ci(t,at)),Ft(t,i),n===1&&fe===0&&!(e.mode&1)&&(Gs=ze()+500,ch&&or()))}function Ft(t,e){var n=t.callbackNode;MC(t,e);var i=au(t,t===tt?at:0);if(i===0)n!==null&&f_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&f_(n),e===1)t.tag===0?D1(sv.bind(null,t)):yT(sv.bind(null,t)),A1(function(){!(fe&6)&&or()}),n=null;else{switch(qE(i)){case 1:n=rg;break;case 4:n=$E;break;case 16:n=ou;break;case 536870912:n=WE;break;default:n=ou}n=gS(n,lS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lS(t,e){if(zc=-1,$c=0,fe&6)throw Error(U(327));var n=t.callbackNode;if(Ls()&&t.callbackNode!==n)return null;var i=au(t,t===tt?at:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Iu(t,i);else{e=i;var r=fe;fe|=2;var s=uS();(tt!==t||at!==e)&&(Kn=null,Gs=ze()+500,Mr(t,e));do try{eA();break}catch(a){cS(t,a)}while(!0);yg(),Tu.current=s,fe=r,He!==null?e=0:(tt=null,at=0,e=Qe)}if(e!==0){if(e===2&&(r=Nf(t),r!==0&&(i=r,e=op(t,r))),e===1)throw n=Ga,Mr(t,0),Ci(t,i),Ft(t,ze()),n;if(e===6)Ci(t,i);else{if(r=t.current.alternate,!(i&30)&&!J1(r)&&(e=Iu(t,i),e===2&&(s=Nf(t),s!==0&&(i=s,e=op(t,s))),e===1))throw n=Ga,Mr(t,0),Ci(t,i),Ft(t,ze()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:Sr(t,Nt,Kn);break;case 3:if(Ci(t,i),(i&130023424)===i&&(e=Ng+500-ze(),10<e)){if(au(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ct(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Uf(Sr.bind(null,t,Nt,Kn),e);break}Sr(t,Nt,Kn);break;case 4:if(Ci(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-yn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*X1(i/1960))-i,10<i){t.timeoutHandle=Uf(Sr.bind(null,t,Nt,Kn),i);break}Sr(t,Nt,Kn);break;case 5:Sr(t,Nt,Kn);break;default:throw Error(U(329))}}}return Ft(t,ze()),t.callbackNode===n?lS.bind(null,t):null}function op(t,e){var n=ya;return t.current.memoizedState.isDehydrated&&(Mr(t,e).flags|=256),t=Iu(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&ap(e)),t}function ap(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function J1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!wn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ci(t,e){for(e&=~Rg,e&=~fh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),i=1<<n;t[n]=-1,e&=~i}}function sv(t){if(fe&6)throw Error(U(327));Ls();var e=au(t,0);if(!(e&1))return Ft(t,ze()),null;var n=Iu(t,e);if(t.tag!==0&&n===2){var i=Nf(t);i!==0&&(e=i,n=op(t,i))}if(n===1)throw n=Ga,Mr(t,0),Ci(t,e),Ft(t,ze()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sr(t,Nt,Kn),Ft(t,ze()),null}function Dg(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Gs=ze()+500,ch&&or())}}function $r(t){Mi!==null&&Mi.tag===0&&!(fe&6)&&Ls();var e=fe;fe|=1;var n=nn.transition,i=ve;try{if(nn.transition=null,ve=1,t)return t()}finally{ve=i,nn.transition=n,fe=e,!(fe&6)&&or()}}function Mg(){$t=Cs.current,Ae(Cs)}function Mr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,C1(n)),He!==null)for(n=He.return;n!==null;){var i=n;switch(pg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&du();break;case 3:qs(),Ae(Lt),Ae(Tt),Sg();break;case 5:Tg(i);break;case 4:qs();break;case 13:Ae(De);break;case 19:Ae(De);break;case 10:_g(i.type._context);break;case 22:case 23:Mg()}n=n.return}if(tt=t,He=t=qi(t.current,null),at=$t=e,Qe=0,Ga=null,Rg=fh=zr=0,Nt=ya=null,Cr!==null){for(e=0;e<Cr.length;e++)if(n=Cr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Cr=null}return t}function cS(t,e){do{var n=He;try{if(yg(),jc.current=Eu,wu){for(var i=Me.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}wu=!1}if(Br=0,Ze=Ke=Me=null,ga=!1,Ha=0,Pg.current=null,n===null||n.return===null){Qe=1,Ga=e,He=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=q_(o);if(g!==null){g.flags&=-257,K_(g,o,a,s,e),g.mode&1&&H_(s,c,e),e=g,l=c;var _=e.updateQueue;if(_===null){var w=new Set;w.add(l),e.updateQueue=w}else _.add(l);break e}else{if(!(e&1)){H_(s,c,e),Og();break e}l=Error(U(426))}}else if(Re&&a.mode&1){var T=q_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),K_(T,o,a,s,e),gg(Ks(l,a));break e}}s=l=Ks(l,a),Qe!==4&&(Qe=2),ya===null?ya=[s]:ya.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=qT(s,l,e);j_(s,E);break e;case 1:a=l;var S=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Wi===null||!Wi.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=KT(s,a,e);j_(s,A);break e}}s=s.return}while(s!==null)}dS(n)}catch(M){e=M,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function uS(){var t=Tu.current;return Tu.current=Eu,t===null?Eu:t}function Og(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(zr&268435455)&&!(fh&268435455)||Ci(tt,at)}function Iu(t,e){var n=fe;fe|=2;var i=uS();(tt!==t||at!==e)&&(Kn=null,Mr(t,e));do try{Z1();break}catch(r){cS(t,r)}while(!0);if(yg(),fe=n,Tu.current=i,He!==null)throw Error(U(261));return tt=null,at=0,Qe}function Z1(){for(;He!==null;)hS(He)}function eA(){for(;He!==null&&!IC();)hS(He)}function hS(t){var e=pS(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?dS(t):He=e,Pg.current=null}function dS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=K1(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(n=q1(n,e,$t),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function Sr(t,e,n){var i=ve,r=nn.transition;try{nn.transition=null,ve=1,tA(t,e,n,i)}finally{nn.transition=r,ve=i}return null}function tA(t,e,n,i){do Ls();while(Mi!==null);if(fe&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(OC(t,s),t===tt&&(He=tt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,gS(ou,function(){return Ls(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=nn.transition,nn.transition=null;var o=ve;ve=1;var a=fe;fe|=4,Pg.current=null,Q1(t,n),oS(n,t),E1(Ff),lu=!!Vf,Ff=Vf=null,t.current=n,Y1(n),bC(),fe=a,ve=o,nn.transition=s}else t.current=n;if(fc&&(fc=!1,Mi=t,xu=r),s=t.pendingLanes,s===0&&(Wi=null),AC(n.stateNode),Ft(t,ze()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Su)throw Su=!1,t=rp,rp=null,t;return xu&1&&t.tag!==0&&Ls(),s=t.pendingLanes,s&1?t===sp?_a++:(_a=0,sp=t):_a=0,or(),null}function Ls(){if(Mi!==null){var t=qE(xu),e=nn.transition,n=ve;try{if(nn.transition=null,ve=16>t?16:t,Mi===null)var i=!1;else{if(t=Mi,Mi=null,xu=0,fe&6)throw Error(U(331));var r=fe;for(fe|=4,W=t.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(W=c;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:ma(8,h,s)}var d=h.child;if(d!==null)d.return=h,W=d;else for(;W!==null;){h=W;var f=h.sibling,g=h.return;if(iS(h),h===c){W=null;break}if(f!==null){f.return=g,W=f;break}W=g}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ma(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,W=E;break e}W=s.return}}var S=t.current;for(W=S;W!==null;){o=W;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,W=k;else e:for(o=S;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dh(9,a)}}catch(M){Ue(a,a.return,M)}if(a===o){W=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,W=A;break e}W=a.return}}if(fe=r,or(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(rh,t)}catch{}i=!0}return i}finally{ve=n,nn.transition=e}}return!1}function ov(t,e,n){e=Ks(n,e),e=qT(t,e,1),t=$i(t,e,1),e=Ct(),t!==null&&(ml(t,1,e),Ft(t,e))}function Ue(t,e,n){if(t.tag===3)ov(t,t,n);else for(;e!==null;){if(e.tag===3){ov(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wi===null||!Wi.has(i))){t=Ks(n,t),t=KT(e,t,1),e=$i(e,t,1),t=Ct(),e!==null&&(ml(e,1,t),Ft(e,t));break}}e=e.return}}function nA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(at&n)===n&&(Qe===4||Qe===3&&(at&130023424)===at&&500>ze()-Ng?Mr(t,0):Rg|=n),Ft(t,e)}function fS(t,e){e===0&&(t.mode&1?(e=ic,ic<<=1,!(ic&130023424)&&(ic=4194304)):e=1);var n=Ct();t=oi(t,e),t!==null&&(ml(t,e,n),Ft(t,n))}function iA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fS(t,n)}function rA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),fS(t,n)}var pS;pS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,H1(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Re&&e.flags&1048576&&_T(e,gu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Bc(t,e),t=e.pendingProps;var r=$s(e,Tt.current);Os(e,n),r=Ig(null,e,i,t,r,n);var s=bg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(i)?(s=!0,fu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,wg(e),r.updater=hh,e.stateNode=r,r._reactInternals=e,Kf(e,i,t,n),e=Yf(null,e,i,!0,s,n)):(e.tag=0,Re&&s&&fg(e),kt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Bc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=oA(i),t=fn(i,t),r){case 0:e=Qf(null,e,i,t,n);break e;case 1:e=Y_(null,e,i,t,n);break e;case 11:e=G_(null,e,i,t,n);break e;case 14:e=Q_(null,e,i,fn(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),Qf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),Y_(t,e,i,r,n);case 3:e:{if(XT(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,xT(t,e),_u(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ks(Error(U(423)),e),e=X_(t,e,i,n,r);break e}else if(i!==r){r=Ks(Error(U(424)),e),e=X_(t,e,i,n,r);break e}else for(Wt=zi(e.stateNode.containerInfo.firstChild),qt=e,Re=!0,gn=null,n=TT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ws(),i===r){e=ai(t,e,n);break e}kt(t,e,i,n)}e=e.child}return e;case 5:return IT(e),t===null&&Wf(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,jf(i,r)?o=null:s!==null&&jf(i,s)&&(e.flags|=32),YT(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&Wf(e),null;case 13:return JT(t,e,n);case 4:return Eg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Hs(e,null,i,n):kt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),G_(t,e,i,r,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,xe(mu,i._currentValue),i._currentValue=o,s!==null)if(wn(s.value,o)){if(s.children===r.children&&!Lt.current){e=ai(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ti(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Hf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Hf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Os(e,n),r=on(r),i=i(r),e.flags|=1,kt(t,e,i,n),e.child;case 14:return i=e.type,r=fn(i,e.pendingProps),r=fn(i.type,r),Q_(t,e,i,r,n);case 15:return GT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fn(i,r),Bc(t,e),e.tag=1,Vt(i)?(t=!0,fu(e)):t=!1,Os(e,n),HT(e,i,r),Kf(e,i,r,n),Yf(null,e,i,!0,t,n);case 19:return ZT(t,e,n);case 22:return QT(t,e,n)}throw Error(U(156,e.tag))};function gS(t,e){return zE(t,e)}function sA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,i){return new sA(t,e,n,i)}function Lg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oA(t){if(typeof t=="function")return Lg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tg)return 11;if(t===ng)return 14}return 2}function qi(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wc(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Lg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _s:return Or(n.children,r,s,e);case eg:o=8,r|=8;break;case yf:return t=Zt(12,n,e,r|2),t.elementType=yf,t.lanes=s,t;case _f:return t=Zt(13,n,e,r),t.elementType=_f,t.lanes=s,t;case vf:return t=Zt(19,n,e,r),t.elementType=vf,t.lanes=s,t;case IE:return ph(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SE:o=10;break e;case xE:o=9;break e;case tg:o=11;break e;case ng:o=14;break e;case Ii:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Zt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Or(t,e,n,i){return t=Zt(7,t,i,e),t.lanes=n,t}function ph(t,e,n,i){return t=Zt(22,t,i,e),t.elementType=IE,t.lanes=n,t.stateNode={isHidden:!1},t}function jd(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function Ud(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wd(0),this.expirationTimes=wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vg(t,e,n,i,r,s,o,a,l){return t=new aA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Zt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wg(s),t}function lA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ys,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function mS(t){if(!t)return Zi;t=t._reactInternals;e:{if(es(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Vt(n))return mT(t,n,e)}return e}function yS(t,e,n,i,r,s,o,a,l){return t=Vg(n,i,!0,t,r,s,o,a,l),t.context=mS(null),n=t.current,i=Ct(),r=Hi(n),s=ti(i,r),s.callback=e??null,$i(n,s,r),t.current.lanes=r,ml(t,r,i),Ft(t,i),t}function gh(t,e,n,i){var r=e.current,s=Ct(),o=Hi(r);return n=mS(n),e.context===null?e.context=n:e.pendingContext=n,e=ti(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=$i(r,e,o),t!==null&&(_n(t,r,o,s),Fc(t,r,o)),o}function bu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function av(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fg(t,e){av(t,e),(t=t.alternate)&&av(t,e)}function cA(){return null}var _S=typeof reportError=="function"?reportError:function(t){console.error(t)};function jg(t){this._internalRoot=t}mh.prototype.render=jg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));gh(t,e,null,null)};mh.prototype.unmount=jg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$r(function(){gh(null,t,null,null)}),e[si]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var e=QE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ki.length&&e!==0&&e<ki[n].priority;n++);ki.splice(n,0,t),n===0&&XE(t)}};function Ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lv(){}function uA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=bu(o);s.call(c)}}var o=yS(e,i,t,0,null,!1,!1,"",lv);return t._reactRootContainer=o,t[si]=o.current,Ua(t.nodeType===8?t.parentNode:t),$r(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=bu(l);a.call(c)}}var l=Vg(t,0,!1,null,null,!1,!1,"",lv);return t._reactRootContainer=l,t[si]=l.current,Ua(t.nodeType===8?t.parentNode:t),$r(function(){gh(e,l,n,i)}),l}function _h(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=bu(o);a.call(l)}}gh(e,o,t,r)}else o=uA(n,e,t,r,i);return bu(o)}KE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jo(e.pendingLanes);n!==0&&(sg(e,n|1),Ft(e,ze()),!(fe&6)&&(Gs=ze()+500,or()))}break;case 13:$r(function(){var i=oi(t,1);if(i!==null){var r=Ct();_n(i,t,1,r)}}),Fg(t,1)}};og=function(t){if(t.tag===13){var e=oi(t,134217728);if(e!==null){var n=Ct();_n(e,t,134217728,n)}Fg(t,134217728)}};GE=function(t){if(t.tag===13){var e=Hi(t),n=oi(t,e);if(n!==null){var i=Ct();_n(n,t,e,i)}Fg(t,e)}};QE=function(){return ve};YE=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Af=function(t,e,n){switch(e){case"input":if(Tf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=lh(i);if(!r)throw Error(U(90));kE(i),Tf(i,r)}}}break;case"textarea":AE(t,n);break;case"select":e=n.value,e!=null&&Rs(t,!!n.multiple,e,!1)}};LE=Dg;VE=$r;var hA={usingClientEntryPoint:!1,Events:[_l,Ts,lh,ME,OE,Dg]},Bo={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dA={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UE(t),t===null?null:t.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance||cA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{rh=pc.inject(dA),Nn=pc}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hA;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ug(e))throw Error(U(200));return lA(t,e,null,n)};Gt.createRoot=function(t,e){if(!Ug(t))throw Error(U(299));var n=!1,i="",r=_S;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Vg(t,1,!1,null,null,n,!1,i,r),t[si]=e.current,Ua(t.nodeType===8?t.parentNode:t),new jg(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=UE(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return $r(t)};Gt.hydrate=function(t,e,n){if(!yh(e))throw Error(U(200));return _h(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!Ug(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=_S;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yS(e,null,t,1,n??null,r,!1,s,o),t[si]=e.current,Ua(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new mh(e)};Gt.render=function(t,e,n){if(!yh(e))throw Error(U(200));return _h(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!yh(t))throw Error(U(40));return t._reactRootContainer?($r(function(){_h(null,null,t,!1,function(){t._reactRootContainer=null,t[si]=null})}),!0):!1};Gt.unstable_batchedUpdates=Dg;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!yh(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return _h(t,e,n,!1,i)};Gt.version="18.3.1-next-f1338f8080-20240426";function vS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vS)}catch(t){console.error(t)}}vS(),vE.exports=Gt;var fA=vE.exports,cv=fA;gf.createRoot=cv.createRoot,gf.hydrateRoot=cv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qa.apply(this,arguments)}var Oi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Oi||(Oi={}));const uv="popstate";function pA(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return lp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:ku(r)}return mA(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gA(){return Math.random().toString(36).substr(2,8)}function hv(t,e){return{usr:t.state,key:t.key,idx:e}}function lp(t,e,n,i){return n===void 0&&(n=null),Qa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ho(e):e,{state:n,key:e&&e.key||i||gA()})}function ku(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ho(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function mA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Oi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Qa({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Oi.Pop;let T=h(),E=T==null?null:T-c;c=T,l&&l({action:a,location:w.location,delta:E})}function f(T,E){a=Oi.Push;let S=lp(w.location,T,E);c=h()+1;let k=hv(S,c),A=w.createHref(S);try{o.pushState(k,"",A)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(A)}s&&l&&l({action:a,location:w.location,delta:1})}function g(T,E){a=Oi.Replace;let S=lp(w.location,T,E);c=h();let k=hv(S,c),A=w.createHref(S);o.replaceState(k,"",A),s&&l&&l({action:a,location:w.location,delta:0})}function _(T){let E=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof T=="string"?T:ku(T);return S=S.replace(/ $/,"%20"),Oe(E,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,E)}let w={get action(){return a},get location(){return t(r,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(uv,d),l=T,()=>{r.removeEventListener(uv,d),l=null}},createHref(T){return e(r,T)},createURL:_,encodeLocation(T){let E=_(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:g,go(T){return o.go(T)}};return w}var dv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dv||(dv={}));function yA(t,e,n){return n===void 0&&(n="/"),_A(t,e,n)}function _A(t,e,n,i){let r=typeof e=="string"?ho(e):e,s=Qs(r.pathname||"/",n);if(s==null)return null;let o=wS(t);vA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=PA(s);a=CA(o[l],c)}return a}function wS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Ki([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Oe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),wS(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:bA(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of ES(s.path))r(s,o,l)}),e}function ES(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=ES(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function vA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const wA=/^:[\w-]+$/,EA=3,TA=2,SA=1,xA=10,IA=-2,fv=t=>t==="*";function bA(t,e){let n=t.split("/"),i=n.length;return n.some(fv)&&(i+=IA),e&&(i+=TA),n.filter(r=>!fv(r)).reduce((r,s)=>r+(wA.test(s)?EA:s===""?SA:xA),i)}function kA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function CA(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=cp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Ki([s,d.pathname]),pathnameBase:OA(Ki([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ki([s,d.pathnameBase]))}return o}function cp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=AA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const _=a[d];return g&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function AA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Bg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function PA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const RA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NA=t=>RA.test(t);function DA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ho(t):t,s;if(n)if(NA(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Bg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=pv(n.substring(1),"/"):s=pv(n,e)}else s=e;return{pathname:s,search:LA(i),hash:VA(r)}}function pv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Bd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zg(t,e){let n=MA(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function $g(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ho(t):(r=Qa({},t),Oe(!r.pathname||!r.pathname.includes("?"),Bd("?","pathname","search",r)),Oe(!r.pathname||!r.pathname.includes("#"),Bd("#","pathname","hash",r)),Oe(!r.search||!r.search.includes("#"),Bd("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=DA(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ki=t=>t.join("/").replace(/\/\/+/g,"/"),OA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),LA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TS=["post","put","patch","delete"];new Set(TS);const jA=["get",...TS];new Set(jA);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ya.apply(this,arguments)}const vh=O.createContext(null),SS=O.createContext(null),pi=O.createContext(null),wh=O.createContext(null),ar=O.createContext({outlet:null,matches:[],isDataRoute:!1}),xS=O.createContext(null);function UA(t,e){let{relative:n}=e===void 0?{}:e;fo()||Oe(!1);let{basename:i,navigator:r}=O.useContext(pi),{hash:s,pathname:o,search:a}=Eh(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Ki([i,o])),r.createHref({pathname:l,search:a,hash:s})}function fo(){return O.useContext(wh)!=null}function lr(){return fo()||Oe(!1),O.useContext(wh).location}function IS(t){O.useContext(pi).static||O.useLayoutEffect(t)}function ts(){let{isDataRoute:t}=O.useContext(ar);return t?ZA():BA()}function BA(){fo()||Oe(!1);let t=O.useContext(vh),{basename:e,future:n,navigator:i}=O.useContext(pi),{matches:r}=O.useContext(ar),{pathname:s}=lr(),o=JSON.stringify(zg(r,n.v7_relativeSplatPath)),a=O.useRef(!1);return IS(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=$g(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ki([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function Eh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(pi),{matches:r}=O.useContext(ar),{pathname:s}=lr(),o=JSON.stringify(zg(r,i.v7_relativeSplatPath));return O.useMemo(()=>$g(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function zA(t,e){return $A(t,e)}function $A(t,e,n,i){fo()||Oe(!1);let{navigator:r}=O.useContext(pi),{matches:s}=O.useContext(ar),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=lr(),h;if(e){var d;let T=typeof e=="string"?ho(e):e;l==="/"||(d=T.pathname)!=null&&d.startsWith(l)||Oe(!1),h=T}else h=c;let f=h.pathname||"/",g=f;if(l!=="/"){let T=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=yA(t,{pathname:g}),w=GA(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:Ki([l,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:Ki([l,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,i);return e&&w?O.createElement(wh.Provider,{value:{location:Ya({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Oi.Pop}},w):w}function WA(){let t=JA(),e=FA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const HA=O.createElement(WA,null);class qA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ar.Provider,{value:this.props.routeContext},O.createElement(xS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KA(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(vh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ar.Provider,{value:e},i)}function GA(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Oe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:g}=n,_=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,_=!1,w=null,T=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||HA,l&&(c<0&&f===0?(eP("route-fallback"),_=!0,T=null):c===f&&(_=!0,T=d.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),S=()=>{let k;return g?k=w:_?k=T:d.route.Component?k=O.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=h,O.createElement(KA,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:k})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(qA,{location:n.location,revalidation:n.revalidation,component:w,error:g,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}var bS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bS||{}),kS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kS||{});function QA(t){let e=O.useContext(vh);return e||Oe(!1),e}function YA(t){let e=O.useContext(SS);return e||Oe(!1),e}function XA(t){let e=O.useContext(ar);return e||Oe(!1),e}function CS(t){let e=XA(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function JA(){var t;let e=O.useContext(xS),n=YA(),i=CS();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function ZA(){let{router:t}=QA(bS.UseNavigateStable),e=CS(kS.UseNavigateStable),n=O.useRef(!1);return IS(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ya({fromRouteId:e},s)))},[t,e])}const gv={};function eP(t,e,n){gv[t]||(gv[t]=!0)}function tP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function up(t){let{to:e,replace:n,state:i,relative:r}=t;fo()||Oe(!1);let{future:s,static:o}=O.useContext(pi),{matches:a}=O.useContext(ar),{pathname:l}=lr(),c=ts(),h=$g(e,zg(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function bn(t){Oe(!1)}function nP(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Oi.Pop,navigator:s,static:o=!1,future:a}=t;fo()&&Oe(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:s,static:o,future:Ya({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=ho(i));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:_="default"}=i,w=O.useMemo(()=>{let T=Qs(h,l);return T==null?null:{location:{pathname:T,search:d,hash:f,state:g,key:_},navigationType:r}},[l,h,d,f,g,_,r]);return w==null?null:O.createElement(pi.Provider,{value:c},O.createElement(wh.Provider,{children:n,value:w}))}function iP(t){let{children:e,location:n}=t;return zA(hp(e),n)}new Promise(()=>{});function hp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,hp(i.props.children,s));return}i.type!==bn&&Oe(!1),!i.props.index||!i.props.children||Oe(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=hp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cu(){return Cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cu.apply(this,arguments)}function AS(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function rP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sP(t,e){return t.button===0&&(!e||e==="_self")&&!rP(t)}function dp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function oP(t,e){let n=dp(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}const aP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cP="6";try{window.__reactRouterVersion=cP}catch{}const uP=O.createContext({isTransitioning:!1}),hP="startTransition",mv=nC[hP];function dP(t){let{basename:e,children:n,future:i,window:r}=t,s=O.useRef();s.current==null&&(s.current=pA({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=O.useCallback(d=>{c&&mv?mv(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>tP(i),[i]),O.createElement(nP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const fP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xa=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=AS(e,aP),{basename:g}=O.useContext(pi),_,w=!1;if(typeof c=="string"&&pP.test(c)&&(_=c,fP))try{let k=new URL(window.location.href),A=c.startsWith("//")?new URL(k.protocol+c):new URL(c),M=Qs(A.pathname,g);A.origin===k.origin&&M!=null?c=M+A.search+A.hash:w=!0}catch{}let T=UA(c,{relative:r}),E=mP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function S(k){i&&i(k),k.defaultPrevented||E(k)}return O.createElement("a",Cu({},f,{href:_||T,onClick:w||s?i:S,ref:n,target:l}))}),hs=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=AS(e,lP),f=Eh(l,{relative:d.relative}),g=lr(),_=O.useContext(SS),{navigator:w,basename:T}=O.useContext(pi),E=_!=null&&yP(f)&&c===!0,S=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,k=g.pathname,A=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(k=k.toLowerCase(),A=A?A.toLowerCase():null,S=S.toLowerCase()),A&&T&&(A=Qs(A,T)||A);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=k===S||!o&&k.startsWith(S)&&k.charAt(M)==="/",x=A!=null&&(A===S||!o&&A.startsWith(S)&&A.charAt(S.length)==="/"),v={isActive:D,isPending:x,isTransitioning:E},b=D?i:void 0,C;typeof s=="function"?C=s(v):C=[s,D?"active":null,x?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(v):a;return O.createElement(Xa,Cu({},d,{"aria-current":b,className:C,ref:n,style:P,to:l,viewTransition:c}),typeof h=="function"?h(v):h)});var fp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fp||(fp={}));var yv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yv||(yv={}));function gP(t){let e=O.useContext(vh);return e||Oe(!1),e}function mP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ts(),c=lr(),h=Eh(t,{relative:o});return O.useCallback(d=>{if(sP(d,n)){d.preventDefault();let f=i!==void 0?i:ku(c)===ku(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}function PS(t){let e=O.useRef(dp(t)),n=O.useRef(!1),i=lr(),r=O.useMemo(()=>oP(i.search,n.current?null:e.current),[i.search]),s=ts(),o=O.useCallback((a,l)=>{const c=dp(typeof a=="function"?a(r):a);n.current=!0,s("?"+c,l)},[s,r]);return[r,o]}function yP(t,e){e===void 0&&(e={});let n=O.useContext(uP);n==null&&Oe(!1);let{basename:i}=gP(fp.useViewTransitionState),r=Eh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Qs(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Qs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return cp(r.pathname,o)!=null||cp(r.pathname,s)!=null}var _v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},_P=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},NS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),i.push(n[h],n[d],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_P(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new vP;const f=s<<2|a>>4;if(i.push(f),c!==64){const g=a<<4&240|c>>2;if(i.push(g),d!==64){const _=c<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wP=function(t){const e=RS(t);return NS.encodeByteArray(e,!0)},Au=function(t){return wP(t).replace(/\./g,"")},DS=function(t){try{return NS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=()=>EP().__FIREBASE_DEFAULTS__,SP=()=>{if(typeof process>"u"||typeof _v>"u")return;const t=_v.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DS(t[1]);return e&&JSON.parse(e)},Th=()=>{try{return TP()||SP()||xP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MS=t=>{var e,n;return(n=(e=Th())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},IP=t=>{const e=MS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},OS=()=>{var t;return(t=Th())===null||t===void 0?void 0:t.config},LS=t=>{var e;return(e=Th())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Au(JSON.stringify(n)),Au(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function AP(){var t;const e=(t=Th())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NP(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DP(){return!AP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FS(){try{return typeof indexedDB=="object"}catch{return!1}}function jS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function MP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="FirebaseError";class Sn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=OP,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ns.prototype.create)}}class ns{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?LP(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Sn(r,a,i)}}function LP(t,e){return t.replace(VP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const VP=/\{\$([^}]+)}/g;function FP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pu(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(vv(s)&&vv(o)){if(!Pu(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function vv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ea(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ta(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jP(t,e){const n=new UP(t,e);return n.subscribe.bind(n)}class UP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");BP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=zd),r.error===void 0&&(r.error=zd),r.complete===void 0&&(r.complete=zd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=1e3,$P=2,WP=4*60*60*1e3,HP=.5;function wv(t,e=zP,n=$P){const i=e*Math.pow(n,t),r=Math.round(HP*i*(Math.random()-.5)*2);return Math.min(WP,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class En{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new bP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GP(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:KP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KP(t){return t===xr?void 0:t}function GP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const YP={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},XP=ue.INFO,JP={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},ZP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=JP[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sh{constructor(e){this.name=e,this._logLevel=XP,this._logHandler=ZP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const eR=(t,e)=>e.some(n=>t instanceof n);let Ev,Tv;function tR(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nR(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const US=new WeakMap,pp=new WeakMap,BS=new WeakMap,$d=new WeakMap,Wg=new WeakMap;function iR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Gi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&US.set(n,t)}).catch(()=>{}),Wg.set(e,t),e}function rR(t){if(pp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});pp.set(t,e)}let gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sR(t){gp=t(gp)}function oR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Wd(this),e,...n);return BS.set(i,e.sort?e.sort():[e]),Gi(i)}:nR().includes(t)?function(...e){return t.apply(Wd(this),e),Gi(US.get(this))}:function(...e){return Gi(t.apply(Wd(this),e))}}function aR(t){return typeof t=="function"?oR(t):(t instanceof IDBTransaction&&rR(t),eR(t,tR())?new Proxy(t,gp):t)}function Gi(t){if(t instanceof IDBRequest)return iR(t);if($d.has(t))return $d.get(t);const e=aR(t);return e!==t&&($d.set(t,e),Wg.set(e,t)),e}const Wd=t=>Wg.get(t);function zS(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Gi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Gi(o.result),l.oldVersion,l.newVersion,Gi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const lR=["get","getKey","getAll","getAllKeys","count"],cR=["put","add","delete","clear"],Hd=new Map;function Sv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hd.get(e))return Hd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=cR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||lR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Hd.set(e,s),s}sR(t=>({...t,get:(e,n,i)=>Sv(e,n)||t.get(e,n,i),has:(e,n)=>!!Sv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function hR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mp="@firebase/app",xv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Sh("@firebase/app"),dR="@firebase/app-compat",fR="@firebase/analytics-compat",pR="@firebase/analytics",gR="@firebase/app-check-compat",mR="@firebase/app-check",yR="@firebase/auth",_R="@firebase/auth-compat",vR="@firebase/database",wR="@firebase/data-connect",ER="@firebase/database-compat",TR="@firebase/functions",SR="@firebase/functions-compat",xR="@firebase/installations",IR="@firebase/installations-compat",bR="@firebase/messaging",kR="@firebase/messaging-compat",CR="@firebase/performance",AR="@firebase/performance-compat",PR="@firebase/remote-config",RR="@firebase/remote-config-compat",NR="@firebase/storage",DR="@firebase/storage-compat",MR="@firebase/firestore",OR="@firebase/vertexai-preview",LR="@firebase/firestore-compat",VR="firebase",FR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",jR={[mp]:"fire-core",[dR]:"fire-core-compat",[pR]:"fire-analytics",[fR]:"fire-analytics-compat",[mR]:"fire-app-check",[gR]:"fire-app-check-compat",[yR]:"fire-auth",[_R]:"fire-auth-compat",[vR]:"fire-rtdb",[wR]:"fire-data-connect",[ER]:"fire-rtdb-compat",[TR]:"fire-fn",[SR]:"fire-fn-compat",[xR]:"fire-iid",[IR]:"fire-iid-compat",[bR]:"fire-fcm",[kR]:"fire-fcm-compat",[CR]:"fire-perf",[AR]:"fire-perf-compat",[PR]:"fire-rc",[RR]:"fire-rc-compat",[NR]:"fire-gcs",[DR]:"fire-gcs-compat",[MR]:"fire-fst",[LR]:"fire-fst-compat",[OR]:"fire-vertex","fire-js":"fire-js",[VR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new Map,UR=new Map,_p=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jn(t){const e=t.name;if(_p.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;_p.set(e,t);for(const n of Ru.values())Iv(n,t);for(const n of UR.values())Iv(n,t);return!0}function El(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new ns("app","Firebase",BR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=FR;function $S(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:yp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Qi.create("bad-app-name",{appName:String(r)});if(n||(n=OS()),!n)throw Qi.create("no-options");const s=Ru.get(r);if(s){if(Pu(n,s.options)&&Pu(i,s.config))return s;throw Qi.create("duplicate-app",{appName:r})}const o=new QP(r);for(const l of _p.values())o.addComponent(l);const a=new zR(n,i,o);return Ru.set(r,a),a}function WS(t=yp){const e=Ru.get(t);if(!e&&t===yp&&OS())return $S();if(!e)throw Qi.create("no-app",{appName:t});return e}function rn(t,e,n){var i;let r=(i=jR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(a.join(" "));return}jn(new En(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firebase-heartbeat-database",WR=1,Ja="firebase-heartbeat-store";let qd=null;function HS(){return qd||(qd=zS($R,WR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ja)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qi.create("idb-open",{originalErrorMessage:t.message})})),qd}async function HR(t){try{const n=(await HS()).transaction(Ja),i=await n.objectStore(Ja).get(qS(t));return await n.done,i}catch(e){if(e instanceof Sn)li.warn(e.message);else{const n=Qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(n.message)}}}async function bv(t,e){try{const i=(await HS()).transaction(Ja,"readwrite");await i.objectStore(Ja).put(e,qS(t)),await i.done}catch(n){if(n instanceof Sn)li.warn(n.message);else{const i=Qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});li.warn(i.message)}}}function qS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=1024,KR=30*24*60*60*1e3;class GR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=KR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){li.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kv(),{heartbeatsToSend:i,unsentEntries:r}=QR(this._heartbeatsCache.heartbeats),s=Au(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return li.warn(n),""}}}function kv(){return new Date().toISOString().substring(0,10)}function QR(t,e=qR){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Cv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Cv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class YR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FS()?jS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cv(t){return Au(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){jn(new En("platform-logger",e=>new uR(e),"PRIVATE")),jn(new En("heartbeat",e=>new GR(e),"PRIVATE")),rn(mp,xv,t),rn(mp,xv,"esm2017"),rn("fire-js","")}XR("");function Hg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function KS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JR=KS,GS=new ns("auth","Firebase",KS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new Sh("@firebase/auth");function ZR(t,...e){Nu.logLevel<=ue.WARN&&Nu.warn(`Auth (${po}): ${t}`,...e)}function Hc(t,...e){Nu.logLevel<=ue.ERROR&&Nu.error(`Auth (${po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,...e){throw qg(t,...e)}function Mn(t,...e){return qg(t,...e)}function QS(t,e,n){const i=Object.assign(Object.assign({},JR()),{[e]:n});return new ns("auth","Firebase",i).create(e,{appName:t.name})}function ni(t){return QS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return GS.create(t,...e)}function ee(t,e,...n){if(!t)throw qg(e,...n)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function ci(t,e){t||Jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eN(){return Av()==="http:"||Av()==="https:"}function Av(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eN()||VS()||"connection"in navigator)?navigator.onLine:!0}function nN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ci(n>e,"Short delay should be less than long delay!"),this.isMobile=CP()||RP()}get(){return tN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Tl(3e4,6e4);function gi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mi(t,e,n,i,r={}){return XS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=wl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return PP()||(c.referrerPolicy="no-referrer"),YS.fetch()(JS(t,t.config.apiHost,n,a),c)})}async function XS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},iN),e);try{const r=new oN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gc(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw QS(t,h,c);Tn(t,h)}}catch(r){if(r instanceof Sn)throw r;Tn(t,"network-request-failed",{message:String(r)})}}async function Sl(t,e,n,i,r={}){const s=await mi(t,e,n,i,r);return"mfaPendingCredential"in s&&Tn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function JS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Kg(t.config,r):`${t.config.apiScheme}://${r}`}function sN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Mn(this.auth,"network-request-failed")),rN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Mn(t,e,i);return r.customData._tokenResponse=n,r}function Pv(t){return t!==void 0&&t.enterprise!==void 0}class aN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function lN(t,e){return mi(t,"GET","/v2/recaptchaConfig",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e){return mi(t,"POST","/v1/accounts:delete",e)}async function ZS(t,e){return mi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uN(t,e=!1){const n=Xe(t),i=await n.getIdToken(e),r=Gg(i);ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:va(Kd(r.auth_time)),issuedAtTime:va(Kd(r.iat)),expirationTime:va(Kd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kd(t){return Number(t)*1e3}function Gg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const r=DS(n);return r?JSON.parse(r):(Hc("Failed to decode base64 JWT payload"),null)}catch(r){return Hc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Rv(t){const e=Gg(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sn&&hN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function hN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=va(this.lastLoginAt),this.creationTime=va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Za(t,ZS(n,{idToken:i}));ee(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ex(s.providerUserInfo):[],a=pN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function fN(t){const e=Xe(t);await Du(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function ex(t){return t.map(e=>{var{providerId:n}=e,i=Hg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(t,e){const n=await XS(t,{},async()=>{const i=wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=JS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",YS.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mN(t,e){return mi(t,"POST","/v2/accounts:revokeToken",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await gN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Vs;return i&&(ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ee(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vs,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Za(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uN(this,e)}reload(){return fN(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Du(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(ni(this.auth));const e=await this.getIdToken();return await Za(this,cN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,S=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:k,emailVerified:A,isAnonymous:M,providerData:D,stsTokenManager:x}=n;ee(k&&x,e,"internal-error");const v=Vs.fromJSON(this.name,x);ee(typeof k=="string",e,"internal-error"),Ti(d,e.name),Ti(f,e.name),ee(typeof A=="boolean",e,"internal-error"),ee(typeof M=="boolean",e,"internal-error"),Ti(g,e.name),Ti(_,e.name),Ti(w,e.name),Ti(T,e.name),Ti(E,e.name),Ti(S,e.name);const b=new Zn({uid:k,auth:e,email:f,emailVerified:A,displayName:d,isAnonymous:M,photoURL:_,phoneNumber:g,tenantId:w,stsTokenManager:v,createdAt:E,lastLoginAt:S});return D&&Array.isArray(D)&&(b.providerData=D.map(C=>Object.assign({},C))),T&&(b._redirectEventId=T),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new Vs;r.updateFromServerResponse(n);const s=new Zn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Du(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ee(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?ex(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Vs;a.updateFromIdToken(i);const l=new Zn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new wp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function ei(t){ci(t instanceof Function,"Expected a class definition");let e=Nv.get(t);return e?(ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Nv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tx.type="NONE";const Dv=tx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e,n){return`firebase:${t}:${e}:${n}`}class Fs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=qc(this.userKey,r.apiKey,s),this.fullPersistenceKey=qc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Fs(ei(Dv),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||ei(Dv);const o=qc(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Zn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Fs(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Fs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ax(e))return"Blackberry";if(lx(e))return"Webos";if(ix(e))return"Safari";if((e.includes("chrome/")||rx(e))&&!e.includes("edge/"))return"Chrome";if(ox(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function nx(t=St()){return/firefox\//i.test(t)}function ix(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rx(t=St()){return/crios\//i.test(t)}function sx(t=St()){return/iemobile/i.test(t)}function ox(t=St()){return/android/i.test(t)}function ax(t=St()){return/blackberry/i.test(t)}function lx(t=St()){return/webos/i.test(t)}function Qg(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yN(t=St()){var e;return Qg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _N(){return NP()&&document.documentMode===10}function cx(t=St()){return Qg(t)||ox(t)||lx(t)||ax(t)||/windows phone/i.test(t)||sx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e=[]){let n;switch(t){case"Browser":n=Mv(St());break;case"Worker":n=`${Mv(St())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${po}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e={}){return mi(t,"GET","/v2/passwordPolicy",gi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=6;class TN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:EN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ov(this),this.idTokenSubscription=new Ov(this),this.beforeStateQueue=new vN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Fs.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ZS(this,{idToken:e}),i=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Du(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(ni(this));const n=e?Xe(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wN(this),n=new TN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ns("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await mN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ei(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Fs.create(this,[ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ux(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ZR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function cr(t){return Xe(t)}class Ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=jP(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xN(t){xh=t}function hx(t){return xh.loadJS(t)}function IN(){return xh.recaptchaEnterpriseScript}function bN(){return xh.gapiScript}function kN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const CN="recaptcha-enterprise",AN="NO_RECAPTCHA";class PN{constructor(e){this.type=CN,this.auth=cr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{lN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new aN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;Pv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(AN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&Pv(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=IN();l.length!==0&&(l+=a),hx(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Lv(t,e,n,i=!1){const r=new PN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Mu(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Lv(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Lv(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e){const n=El(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Pu(s,e??{}))return r;Tn(r,"already-initialized")}return n.initialize({options:e})}function NN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ei);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function DN(t,e,n){const i=cr(t);ee(i._canInitEmulator,i,"emulator-config-failed"),ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=dx(e),{host:o,port:a}=MN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),ON()}function dx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MN(t){const e=dx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Vv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Vv(o)}}}function Vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ON(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}async function LN(t,e){return mi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){return Sl(t,"POST","/v1/accounts:signInWithPassword",gi(t,e))}async function FN(t,e){return mi(t,"POST","/v1/accounts:sendOobCode",gi(t,e))}async function jN(t,e){return FN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e){return Sl(t,"POST","/v1/accounts:signInWithEmailLink",gi(t,e))}async function BN(t,e){return Sl(t,"POST","/v1/accounts:signInWithEmailLink",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Yg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new el(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new el(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mu(e,n,"signInWithPassword",VN);case"emailLink":return UN(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mu(e,i,"signUpPassword",LN);case"emailLink":return BN(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e){return Sl(t,"POST","/v1/accounts:signInWithIdp",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="http://localhost";class Wr extends Yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Hg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Wr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return js(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,js(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,js(e,n)}buildRequest(){const e={requestUri:zN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WN(t){const e=ea(ta(t)).link,n=e?ea(ta(e)).deep_link_id:null,i=ea(ta(t)).deep_link_id;return(i?ea(ta(i)).link:null)||i||n||e||t}class Xg{constructor(e){var n,i,r,s,o,a;const l=ea(ta(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=$N((r=l.mode)!==null&&r!==void 0?r:null);ee(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=WN(e);try{return new Xg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.providerId=go.PROVIDER_ID}static credential(e,n){return el._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Xg.parseLink(n);return ee(i,"argument-error"),el._fromEmailAndCode(e,i.code,i.tenantId)}}go.PROVIDER_ID="password";go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends fx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends xl{constructor(){super("facebook.com")}static credential(e){return Wr._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends xl{constructor(){super("github.com")}static credential(e){return Wr._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends xl{constructor(){super("twitter.com")}static credential(e,n){return Wr._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ni.credential(n,i)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){return Sl(t,"POST","/v1/accounts:signUp",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Zn._fromIdTokenResponse(e,i,r),o=Fv(i);return new Hr({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Fv(i);return new Hr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Fv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Sn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ou.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Ou(e,n,i,r)}}function px(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ou._fromErrorAndOperation(t,s,e,i):s})}async function qN(t,e,n=!1){const i=await Za(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e,n=!1){const{auth:i}=t;if(Rn(i.app))return Promise.reject(ni(i));const r="reauthenticate";try{const s=await Za(t,px(i,r,e,t),n);ee(s.idToken,i,"internal-error");const o=Gg(s.idToken);ee(o,i,"internal-error");const{sub:a}=o;return ee(t.uid===a,i,"user-mismatch"),Hr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Tn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(t,e,n=!1){if(Rn(t.app))return Promise.reject(ni(t));const i="signIn",r=await px(t,i,e),s=await Hr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function GN(t,e){return gx(cr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(t){const e=cr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QN(t,e,n){const i=cr(t);await Mu(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",jN)}async function YN(t,e,n){if(Rn(t.app))return Promise.reject(ni(t));const i=cr(t),o=await Mu(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&mx(t),l}),a=await Hr._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function XN(t,e,n){return Rn(t.app)?Promise.reject(ni(t)):GN(Xe(t),go.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&mx(t),i})}function JN(t,e,n,i){return Xe(t).onIdTokenChanged(e,n,i)}function ZN(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function eD(t,e,n,i){return Xe(t).onAuthStateChanged(e,n,i)}function tD(t){return Xe(t).signOut()}const Lu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=1e3,iD=10;class _x extends yx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);_N()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,iD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},nD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_x.type="LOCAL";const rD=_x;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends yx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vx.type="SESSION";const wx=vx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Ih(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await sD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Jg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function aD(t){On().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function lD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uD(){return Ex()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="firebaseLocalStorageDb",hD=1,Vu="firebaseLocalStorage",Sx="fbase_key";class Il{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bh(t,e){return t.transaction([Vu],e?"readwrite":"readonly").objectStore(Vu)}function dD(){const t=indexedDB.deleteDatabase(Tx);return new Il(t).toPromise()}function Ep(){const t=indexedDB.open(Tx,hD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Vu,{keyPath:Sx})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Vu)?e(i):(i.close(),await dD(),e(await Ep()))})})}async function jv(t,e,n){const i=bh(t,!0).put({[Sx]:e,value:n});return new Il(i).toPromise()}async function fD(t,e){const n=bh(t,!1).get(e),i=await new Il(n).toPromise();return i===void 0?null:i.value}function Uv(t,e){const n=bh(t,!0).delete(e);return new Il(n).toPromise()}const pD=800,gD=3;class xx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>gD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ex()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ih._getInstance(uD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lD(),!this.activeServiceWorker)return;this.sender=new oD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ep();return await jv(e,Lu,"1"),await Uv(e,Lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>jv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>fD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=bh(r,!1).getAll();return new Il(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xx.type="LOCAL";const mD=xx;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t,e){return e?ei(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends Yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _D(t){return gx(t.auth,new Zg(t),t.bypassAuthState)}function vD(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),KN(n,new Zg(t),t.bypassAuthState)}async function wD(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),qN(n,new Zg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _D;case"linkViaPopup":case"linkViaRedirect":return wD;case"reauthViaPopup":case"reauthViaRedirect":return vD;default:Tn(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Tl(2e3,1e4);class As extends Ix{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const e=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ED.get())};e()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="pendingRedirect",Kc=new Map;class SD extends Ix{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Kc.get(this.auth._key());if(!e){try{const i=await xD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Kc.set(this.auth._key(),e)}return this.bypassAuthState||Kc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xD(t,e){const n=kD(e),i=bD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function ID(t,e){Kc.set(t._key(),e)}function bD(t){return ei(t._redirectPersistence)}function kD(t){return qc(TD,t.config.apiKey,t.name)}async function CD(t,e,n=!1){if(Rn(t.app))return Promise.reject(ni(t));const i=cr(t),r=yD(i,e),o=await new SD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=10*60*1e3;class PD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!bx(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bv(e))}saveEventToCache(e){this.cachedEventUids.add(Bv(e)),this.lastProcessedEventTime=Date.now()}}function Bv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e={}){return mi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MD=/^https?/;async function OD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ND(t);for(const n of e)try{if(LD(n))return}catch{}Tn(t,"unauthorized-domain")}function LD(t){const e=vp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!MD.test(n))return!1;if(DD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=new Tl(3e4,6e4);function zv(){const t=On().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FD(t){return new Promise((e,n)=>{var i,r,s;function o(){zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zv(),n(Mn(t,"network-request-failed"))},timeout:VD.get()})}if(!((r=(i=On().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=On().gapi)===null||s===void 0)&&s.load)o();else{const a=kN("iframefcb");return On()[a]=()=>{gapi.load?o():n(Mn(t,"network-request-failed"))},hx(`${bN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Gc=null,e})}let Gc=null;function jD(t){return Gc=Gc||FD(t),Gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=new Tl(5e3,15e3),BD="__/auth/iframe",zD="emulator/auth/iframe",$D={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HD(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kg(e,zD):`https://${t.config.authDomain}/${BD}`,i={apiKey:e.apiKey,appName:t.name,v:po},r=WD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${wl(i).slice(1)}`}async function qD(t){const e=await jD(t),n=On().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:HD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$D,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Mn(t,"network-request-failed"),a=On().setTimeout(()=>{s(o)},UD.get());function l(){On().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GD=500,QD=600,YD="_blank",XD="http://localhost";class $v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JD(t,e,n,i=GD,r=QD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},KD),{width:i.toString(),height:r.toString(),top:s,left:o}),c=St().toLowerCase();n&&(a=rx(c)?YD:n),nx(c)&&(e=e||XD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(yN(c)&&a!=="_self")return ZD(e||"",a),new $v(null);const d=window.open(e||"",a,h);ee(d,t,"popup-blocked");try{d.focus()}catch{}return new $v(d)}function ZD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="__/auth/handler",tM="emulator/auth/handler",nM=encodeURIComponent("fac");async function Wv(t,e,n,i,r,s){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:po,eventId:r};if(e instanceof fx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",FP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof xl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${nM}=${encodeURIComponent(l)}`:"";return`${iM(t)}?${wl(a).slice(1)}${c}`}function iM({config:t}){return t.emulator?Kg(t,tM):`https://${t.authDomain}/${eM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="webStorageSupport";class rM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wx,this._completeRedirectFn=CD,this._overrideRedirectResult=ID}async _openPopup(e,n,i,r){var s;ci((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Wv(e,n,i,vp(),r);return JD(e,o,Jg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await Wv(e,n,i,vp(),r);return aD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ci(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await qD(e),i=new PD(e);return n.register("authEvent",r=>(ee(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gd,{type:Gd},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Gd];o!==void 0&&n(!!o),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cx()||ix()||Qg()}}const sM=rM;var Hv="@firebase/auth",qv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lM(t){jn(new En("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ux(t)},c=new SN(i,r,s,l);return NN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),jn(new En("auth-internal",e=>{const n=cr(e.getProvider("auth").getImmediate());return(i=>new oM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rn(Hv,qv,aM(t)),rn(Hv,qv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=5*60,uM=LS("authIdTokenMaxAge")||cM;let Kv=null;const hM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>uM)return;const r=n==null?void 0:n.token;Kv!==r&&(Kv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function dM(t=WS()){const e=El(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RN(t,{popupRedirectResolver:sM,persistence:[mD,rD,wx]}),i=LS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=hM(s.toString());ZN(n,o,()=>o(n.currentUser)),JN(n,a=>o(a))}}const r=MS("auth");return r&&DN(n,`http://${r}`),n}function fM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Mn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",fM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lM("Browser");var pM="firebase",gM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn(pM,gM,"app");var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,kx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function b(){}b.prototype=v.prototype,x.D=v.prototype,x.prototype=new b,x.prototype.constructor=x,x.C=function(C,P,N){for(var R=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)R[Z-2]=arguments[Z];return v.prototype[P].apply(C,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,v,b){b||(b=0);var C=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)C[P]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(P=0;16>P;++P)C[P]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=x.g[0],b=x.g[1],P=x.g[2];var N=x.g[3],R=v+(N^b&(P^N))+C[0]+3614090360&4294967295;v=b+(R<<7&4294967295|R>>>25),R=N+(P^v&(b^P))+C[1]+3905402710&4294967295,N=v+(R<<12&4294967295|R>>>20),R=P+(b^N&(v^b))+C[2]+606105819&4294967295,P=N+(R<<17&4294967295|R>>>15),R=b+(v^P&(N^v))+C[3]+3250441966&4294967295,b=P+(R<<22&4294967295|R>>>10),R=v+(N^b&(P^N))+C[4]+4118548399&4294967295,v=b+(R<<7&4294967295|R>>>25),R=N+(P^v&(b^P))+C[5]+1200080426&4294967295,N=v+(R<<12&4294967295|R>>>20),R=P+(b^N&(v^b))+C[6]+2821735955&4294967295,P=N+(R<<17&4294967295|R>>>15),R=b+(v^P&(N^v))+C[7]+4249261313&4294967295,b=P+(R<<22&4294967295|R>>>10),R=v+(N^b&(P^N))+C[8]+1770035416&4294967295,v=b+(R<<7&4294967295|R>>>25),R=N+(P^v&(b^P))+C[9]+2336552879&4294967295,N=v+(R<<12&4294967295|R>>>20),R=P+(b^N&(v^b))+C[10]+4294925233&4294967295,P=N+(R<<17&4294967295|R>>>15),R=b+(v^P&(N^v))+C[11]+2304563134&4294967295,b=P+(R<<22&4294967295|R>>>10),R=v+(N^b&(P^N))+C[12]+1804603682&4294967295,v=b+(R<<7&4294967295|R>>>25),R=N+(P^v&(b^P))+C[13]+4254626195&4294967295,N=v+(R<<12&4294967295|R>>>20),R=P+(b^N&(v^b))+C[14]+2792965006&4294967295,P=N+(R<<17&4294967295|R>>>15),R=b+(v^P&(N^v))+C[15]+1236535329&4294967295,b=P+(R<<22&4294967295|R>>>10),R=v+(P^N&(b^P))+C[1]+4129170786&4294967295,v=b+(R<<5&4294967295|R>>>27),R=N+(b^P&(v^b))+C[6]+3225465664&4294967295,N=v+(R<<9&4294967295|R>>>23),R=P+(v^b&(N^v))+C[11]+643717713&4294967295,P=N+(R<<14&4294967295|R>>>18),R=b+(N^v&(P^N))+C[0]+3921069994&4294967295,b=P+(R<<20&4294967295|R>>>12),R=v+(P^N&(b^P))+C[5]+3593408605&4294967295,v=b+(R<<5&4294967295|R>>>27),R=N+(b^P&(v^b))+C[10]+38016083&4294967295,N=v+(R<<9&4294967295|R>>>23),R=P+(v^b&(N^v))+C[15]+3634488961&4294967295,P=N+(R<<14&4294967295|R>>>18),R=b+(N^v&(P^N))+C[4]+3889429448&4294967295,b=P+(R<<20&4294967295|R>>>12),R=v+(P^N&(b^P))+C[9]+568446438&4294967295,v=b+(R<<5&4294967295|R>>>27),R=N+(b^P&(v^b))+C[14]+3275163606&4294967295,N=v+(R<<9&4294967295|R>>>23),R=P+(v^b&(N^v))+C[3]+4107603335&4294967295,P=N+(R<<14&4294967295|R>>>18),R=b+(N^v&(P^N))+C[8]+1163531501&4294967295,b=P+(R<<20&4294967295|R>>>12),R=v+(P^N&(b^P))+C[13]+2850285829&4294967295,v=b+(R<<5&4294967295|R>>>27),R=N+(b^P&(v^b))+C[2]+4243563512&4294967295,N=v+(R<<9&4294967295|R>>>23),R=P+(v^b&(N^v))+C[7]+1735328473&4294967295,P=N+(R<<14&4294967295|R>>>18),R=b+(N^v&(P^N))+C[12]+2368359562&4294967295,b=P+(R<<20&4294967295|R>>>12),R=v+(b^P^N)+C[5]+4294588738&4294967295,v=b+(R<<4&4294967295|R>>>28),R=N+(v^b^P)+C[8]+2272392833&4294967295,N=v+(R<<11&4294967295|R>>>21),R=P+(N^v^b)+C[11]+1839030562&4294967295,P=N+(R<<16&4294967295|R>>>16),R=b+(P^N^v)+C[14]+4259657740&4294967295,b=P+(R<<23&4294967295|R>>>9),R=v+(b^P^N)+C[1]+2763975236&4294967295,v=b+(R<<4&4294967295|R>>>28),R=N+(v^b^P)+C[4]+1272893353&4294967295,N=v+(R<<11&4294967295|R>>>21),R=P+(N^v^b)+C[7]+4139469664&4294967295,P=N+(R<<16&4294967295|R>>>16),R=b+(P^N^v)+C[10]+3200236656&4294967295,b=P+(R<<23&4294967295|R>>>9),R=v+(b^P^N)+C[13]+681279174&4294967295,v=b+(R<<4&4294967295|R>>>28),R=N+(v^b^P)+C[0]+3936430074&4294967295,N=v+(R<<11&4294967295|R>>>21),R=P+(N^v^b)+C[3]+3572445317&4294967295,P=N+(R<<16&4294967295|R>>>16),R=b+(P^N^v)+C[6]+76029189&4294967295,b=P+(R<<23&4294967295|R>>>9),R=v+(b^P^N)+C[9]+3654602809&4294967295,v=b+(R<<4&4294967295|R>>>28),R=N+(v^b^P)+C[12]+3873151461&4294967295,N=v+(R<<11&4294967295|R>>>21),R=P+(N^v^b)+C[15]+530742520&4294967295,P=N+(R<<16&4294967295|R>>>16),R=b+(P^N^v)+C[2]+3299628645&4294967295,b=P+(R<<23&4294967295|R>>>9),R=v+(P^(b|~N))+C[0]+4096336452&4294967295,v=b+(R<<6&4294967295|R>>>26),R=N+(b^(v|~P))+C[7]+1126891415&4294967295,N=v+(R<<10&4294967295|R>>>22),R=P+(v^(N|~b))+C[14]+2878612391&4294967295,P=N+(R<<15&4294967295|R>>>17),R=b+(N^(P|~v))+C[5]+4237533241&4294967295,b=P+(R<<21&4294967295|R>>>11),R=v+(P^(b|~N))+C[12]+1700485571&4294967295,v=b+(R<<6&4294967295|R>>>26),R=N+(b^(v|~P))+C[3]+2399980690&4294967295,N=v+(R<<10&4294967295|R>>>22),R=P+(v^(N|~b))+C[10]+4293915773&4294967295,P=N+(R<<15&4294967295|R>>>17),R=b+(N^(P|~v))+C[1]+2240044497&4294967295,b=P+(R<<21&4294967295|R>>>11),R=v+(P^(b|~N))+C[8]+1873313359&4294967295,v=b+(R<<6&4294967295|R>>>26),R=N+(b^(v|~P))+C[15]+4264355552&4294967295,N=v+(R<<10&4294967295|R>>>22),R=P+(v^(N|~b))+C[6]+2734768916&4294967295,P=N+(R<<15&4294967295|R>>>17),R=b+(N^(P|~v))+C[13]+1309151649&4294967295,b=P+(R<<21&4294967295|R>>>11),R=v+(P^(b|~N))+C[4]+4149444226&4294967295,v=b+(R<<6&4294967295|R>>>26),R=N+(b^(v|~P))+C[11]+3174756917&4294967295,N=v+(R<<10&4294967295|R>>>22),R=P+(v^(N|~b))+C[2]+718787259&4294967295,P=N+(R<<15&4294967295|R>>>17),R=b+(N^(P|~v))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+N&4294967295}i.prototype.u=function(x,v){v===void 0&&(v=x.length);for(var b=v-this.blockSize,C=this.B,P=this.h,N=0;N<v;){if(P==0)for(;N<=b;)r(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<v;)if(C[P++]=x.charCodeAt(N++),P==this.blockSize){r(this,C),P=0;break}}else for(;N<v;)if(C[P++]=x[N++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=v},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;var b=8*this.o;for(v=x.length-8;v<x.length;++v)x[v]=b&255,b/=256;for(this.u(x),x=Array(16),v=b=0;4>v;++v)for(var C=0;32>C;C+=8)x[b++]=this.g[v]>>>C&255;return x};function s(x,v){var b=a;return Object.prototype.hasOwnProperty.call(b,x)?b[x]:b[x]=v(x)}function o(x,v){this.h=v;for(var b=[],C=!0,P=x.length-1;0<=P;P--){var N=x[P]|0;C&&N==v||(b[P]=N,C=!1)}this.g=b}var a={};function l(x){return-128<=x&&128>x?s(x,function(v){return new o([v|0],0>v?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return T(c(-x));for(var v=[],b=1,C=0;x>=b;C++)v[C]=x/b|0,b*=4294967296;return new o(v,0)}function h(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return T(h(x.substring(1),v));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(v,8)),C=d,P=0;P<x.length;P+=8){var N=Math.min(8,x.length-P),R=parseInt(x.substring(P,P+N),v);8>N?(N=c(Math.pow(v,N)),C=C.j(N).add(c(R))):(C=C.j(b),C=C.add(c(R)))}return C}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-T(this).m();for(var x=0,v=1,b=0;b<this.g.length;b++){var C=this.i(b);x+=(0<=C?C:4294967296+C)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(_(this))return"0";if(w(this))return"-"+T(this).toString(x);for(var v=c(Math.pow(x,6)),b=this,C="";;){var P=A(b,v).g;b=E(b,P.j(v));var N=((0<b.g.length?b.g[0]:b.h)>>>0).toString(x);if(b=P,_(b))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function _(x){if(x.h!=0)return!1;for(var v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function w(x){return x.h==-1}t.l=function(x){return x=E(this,x),w(x)?-1:_(x)?0:1};function T(x){for(var v=x.g.length,b=[],C=0;C<v;C++)b[C]=~x.g[C];return new o(b,~x.h).add(f)}t.abs=function(){return w(this)?T(this):this},t.add=function(x){for(var v=Math.max(this.g.length,x.g.length),b=[],C=0,P=0;P<=v;P++){var N=C+(this.i(P)&65535)+(x.i(P)&65535),R=(N>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);C=R>>>16,N&=65535,R&=65535,b[P]=R<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function E(x,v){return x.add(T(v))}t.j=function(x){if(_(this)||_(x))return d;if(w(this))return w(x)?T(this).j(T(x)):T(T(this).j(x));if(w(x))return T(this.j(T(x)));if(0>this.l(g)&&0>x.l(g))return c(this.m()*x.m());for(var v=this.g.length+x.g.length,b=[],C=0;C<2*v;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<x.g.length;P++){var N=this.i(C)>>>16,R=this.i(C)&65535,Z=x.i(P)>>>16,Q=x.i(P)&65535;b[2*C+2*P]+=R*Q,S(b,2*C+2*P),b[2*C+2*P+1]+=N*Q,S(b,2*C+2*P+1),b[2*C+2*P+1]+=R*Z,S(b,2*C+2*P+1),b[2*C+2*P+2]+=N*Z,S(b,2*C+2*P+2)}for(C=0;C<v;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=v;C<2*v;C++)b[C]=0;return new o(b,0)};function S(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function k(x,v){this.g=x,this.h=v}function A(x,v){if(_(v))throw Error("division by zero");if(_(x))return new k(d,d);if(w(x))return v=A(T(x),v),new k(T(v.g),T(v.h));if(w(v))return v=A(x,T(v)),new k(T(v.g),v.h);if(30<x.g.length){if(w(x)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var b=f,C=v;0>=C.l(x);)b=M(b),C=M(C);var P=D(b,1),N=D(C,1);for(C=D(C,2),b=D(b,2);!_(C);){var R=N.add(C);0>=R.l(x)&&(P=P.add(b),N=R),C=D(C,1),b=D(b,1)}return v=E(x,P.j(v)),new k(P,v)}for(P=d;0<=x.l(v);){for(b=Math.max(1,Math.floor(x.m()/v.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=c(b),R=N.j(v);w(R)||0<R.l(x);)b-=C,N=c(b),R=N.j(v);_(N)&&(N=f),P=P.add(N),x=E(x,R)}return new k(P,x)}t.A=function(x){return A(this,x).h},t.and=function(x){for(var v=Math.max(this.g.length,x.g.length),b=[],C=0;C<v;C++)b[C]=this.i(C)&x.i(C);return new o(b,this.h&x.h)},t.or=function(x){for(var v=Math.max(this.g.length,x.g.length),b=[],C=0;C<v;C++)b[C]=this.i(C)|x.i(C);return new o(b,this.h|x.h)},t.xor=function(x){for(var v=Math.max(this.g.length,x.g.length),b=[],C=0;C<v;C++)b[C]=this.i(C)^x.i(C);return new o(b,this.h^x.h)};function M(x){for(var v=x.g.length+1,b=[],C=0;C<v;C++)b[C]=x.i(C)<<1|x.i(C-1)>>>31;return new o(b,x.h)}function D(x,v){var b=v>>5;v%=32;for(var C=x.g.length-b,P=[],N=0;N<C;N++)P[N]=0<v?x.i(N+b)>>>v|x.i(N+b+1)<<32-v:x.i(N+b);return new o(P,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,kx=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Lr=o}).apply(typeof Gv<"u"?Gv:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cx,na,Ax,Qc,Tp,Px,Rx,Nx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,m){return u==Array.prototype||u==Object.prototype||(u[p]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var p=0;p<u.length;++p){var m=u[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var m=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in m))break e;m=m[L]}u=u[u.length-1],I=m[u],p=p(I),p!=I&&p!=null&&e(m,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var m=0,I=!1,L={next:function(){if(!I&&m<u.length){var V=m++;return{value:p(V,u[V]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(u){return u||function(){return s(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,m){return u.call.apply(u.bind,arguments)}function d(u,p,m){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function f(u,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(u,p){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function _(u,p){function m(){}m.prototype=p.prototype,u.aa=p.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(I,L,V){for(var z=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)z[Se-2]=arguments[Se];return p.prototype[L].apply(I,z)}}function w(u){const p=u.length;if(0<p){const m=Array(p);for(let I=0;I<p;I++)m[I]=u[I];return m}return[]}function T(u,p){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const L=u.length||0,V=I.length||0;u.length=L+V;for(let z=0;z<V;z++)u[L+z]=I[z]}else u.push(I)}}class E{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function S(u){return/^[\s\xa0]*$/.test(u)}function k(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function A(u){return A[" "](u),u}A[" "]=function(){};var M=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function D(u,p,m){for(const I in u)p.call(m,u[I],I,u)}function x(u,p){for(const m in u)p.call(void 0,u[m],m,u)}function v(u){const p={};for(const m in u)p[m]=u[m];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let m,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(m in I)u[m]=I[m];for(let V=0;V<b.length;V++)m=b[V],Object.prototype.hasOwnProperty.call(I,m)&&(u[m]=I[m])}}function P(u){var p=1;u=u.split(":");const m=[];for(;0<p&&u.length;)m.push(u.shift()),p--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function R(){var u=q;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Z{constructor(){this.h=this.g=null}add(p,m){const I=Q.get();I.set(p,m),this.h?this.h.next=I:this.g=I,this.h=I}}var Q=new E(()=>new le,u=>u.reset());class le{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let se,B=!1,q=new Z,K=()=>{const u=a.Promise.resolve(void 0);se=()=>{u.then($)}};var $=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(m){N(m)}var p=Q;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return u}();function Ee(u,p){if(ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(M){e:{try{A(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else m=="mouseover"?p=u.fromElement:m=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Te[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ee.aa.h.call(this)}}_(Ee,ne);var Te={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ml=0;function Ol(u,p,m,I,L){this.listener=u,this.proxy=null,this.src=p,this.type=m,this.capture=!!I,this.ha=L,this.key=++Ml,this.da=this.fa=!1}function hr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dr(u){this.src=u,this.g={},this.h=0}dr.prototype.add=function(u,p,m,I,L){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var z=wo(u,p,I,L);return-1<z?(p=u[z],m||(p.fa=!1)):(p=new Ol(p,this.src,V,!!I,L),p.fa=m,u.push(p)),p};function un(u,p){var m=p.type;if(m in u.g){var I=u.g[m],L=Array.prototype.indexOf.call(I,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(I,L,1),V&&(hr(p),u.g[m].length==0&&(delete u.g[m],u.h--))}}function wo(u,p,m,I){for(var L=0;L<u.length;++L){var V=u[L];if(!V.da&&V.listener==p&&V.capture==!!m&&V.ha==I)return L}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),Pe={};function ny(u,p,m,I,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)ny(u,p[V],m,I,L);return null}return m=sy(m),u&&u[Fe]?u.K(p,m,c(I)?!!I.capture:!1,L):lk(u,p,m,!1,I,L)}function lk(u,p,m,I,L,V){if(!p)throw Error("Invalid event type");var z=c(L)?!!L.capture:!!L,Se=Xh(u);if(Se||(u[Y]=Se=new dr(u)),m=Se.add(p,m,I,z,V),m.proxy)return m;if(I=ck(),m.proxy=I,I.src=u,I.listener=m,u.addEventListener)ye||(L=z),L===void 0&&(L=!1),u.addEventListener(p.toString(),I,L);else if(u.attachEvent)u.attachEvent(ry(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ck(){function u(m){return p.call(u.src,u.listener,m)}const p=uk;return u}function iy(u,p,m,I,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)iy(u,p[V],m,I,L);else I=c(I)?!!I.capture:!!I,m=sy(m),u&&u[Fe]?(u=u.i,p=String(p).toString(),p in u.g&&(V=u.g[p],m=wo(V,m,I,L),-1<m&&(hr(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete u.g[p],u.h--)))):u&&(u=Xh(u))&&(p=u.g[p.toString()],u=-1,p&&(u=wo(p,m,I,L)),(m=-1<u?p[u]:null)&&Yh(m))}function Yh(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Fe])un(p.i,u);else{var m=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(m,I,u.capture):p.detachEvent?p.detachEvent(ry(m),I):p.addListener&&p.removeListener&&p.removeListener(I),(m=Xh(p))?(un(m,u),m.h==0&&(m.src=null,p[Y]=null)):hr(u)}}}function ry(u){return u in Pe?Pe[u]:Pe[u]="on"+u}function uk(u,p){if(u.da)u=!0;else{p=new Ee(p,this);var m=u.listener,I=u.ha||u.src;u.fa&&Yh(u),u=m.call(I,p)}return u}function Xh(u){return u=u[Y],u instanceof dr?u:null}var Jh="__closure_events_fn_"+(1e9*Math.random()>>>0);function sy(u){return typeof u=="function"?u:(u[Jh]||(u[Jh]=function(p){return u.handleEvent(p)}),u[Jh])}function ht(){J.call(this),this.i=new dr(this),this.M=this,this.F=null}_(ht,J),ht.prototype[Fe]=!0,ht.prototype.removeEventListener=function(u,p,m,I){iy(this,u,p,m,I)};function xt(u,p){var m,I=u.F;if(I)for(m=[];I;I=I.F)m.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new ne(p,u);else if(p instanceof ne)p.target=p.target||u;else{var L=p;p=new ne(I,u),C(p,L)}if(L=!0,m)for(var V=m.length-1;0<=V;V--){var z=p.g=m[V];L=Ll(z,I,!0,p)&&L}if(z=p.g=u,L=Ll(z,I,!0,p)&&L,L=Ll(z,I,!1,p)&&L,m)for(V=0;V<m.length;V++)z=p.g=m[V],L=Ll(z,I,!1,p)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var m=u.g[p],I=0;I<m.length;I++)hr(m[I]);delete u.g[p],u.h--}}this.F=null},ht.prototype.K=function(u,p,m,I){return this.i.add(String(u),p,!1,m,I)},ht.prototype.L=function(u,p,m,I){return this.i.add(String(u),p,!0,m,I)};function Ll(u,p,m,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var z=p[V];if(z&&!z.da&&z.capture==m){var Se=z.listener,it=z.ha||z.src;z.fa&&un(u.i,z),L=Se.call(it,I)!==!1&&L}}return L&&!I.defaultPrevented}function oy(u,p,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function ay(u){u.g=oy(()=>{u.g=null,u.i&&(u.i=!1,ay(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class hk extends J{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ay(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eo(u){J.call(this),this.h=u,this.g={}}_(Eo,J);var ly=[];function cy(u){D(u.g,function(p,m){this.g.hasOwnProperty(m)&&Yh(p)},u),u.g={}}Eo.prototype.N=function(){Eo.aa.N.call(this),cy(this)},Eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zh=a.JSON.stringify,dk=a.JSON.parse,fk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ed(){}ed.prototype.h=null;function uy(u){return u.h||(u.h=u.i())}function hy(){}var To={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function td(){ne.call(this,"d")}_(td,ne);function nd(){ne.call(this,"c")}_(nd,ne);var fr={},dy=null;function Vl(){return dy=dy||new ht}fr.La="serverreachability";function fy(u){ne.call(this,fr.La,u)}_(fy,ne);function So(u){const p=Vl();xt(p,new fy(p))}fr.STAT_EVENT="statevent";function py(u,p){ne.call(this,fr.STAT_EVENT,u),this.stat=p}_(py,ne);function It(u){const p=Vl();xt(p,new py(p,u))}fr.Ma="timingevent";function gy(u,p){ne.call(this,fr.Ma,u),this.size=p}_(gy,ne);function xo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Io(){this.g=!0}Io.prototype.xa=function(){this.g=!1};function pk(u,p,m,I,L,V){u.info(function(){if(u.g)if(V)for(var z="",Se=V.split("&"),it=0;it<Se.length;it++){var pe=Se[it].split("=");if(1<pe.length){var dt=pe[0];pe=pe[1];var ft=dt.split("_");z=2<=ft.length&&ft[1]=="type"?z+(dt+"="+pe+"&"):z+(dt+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+p+`
`+m+`
`+z})}function gk(u,p,m,I,L,V,z){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+p+`
`+m+`
`+V+" "+z})}function os(u,p,m,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+yk(u,m)+(I?" "+I:"")})}function mk(u,p){u.info(function(){return"TIMEOUT: "+p})}Io.prototype.info=function(){};function yk(u,p){if(!u.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var I=m[u];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return Zh(m)}catch{return p}}var Fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},my={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},id;function jl(){}_(jl,ed),jl.prototype.g=function(){return new XMLHttpRequest},jl.prototype.i=function(){return{}},id=new jl;function _i(u,p,m,I){this.j=u,this.i=p,this.l=m,this.R=I||1,this.U=new Eo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yy}function yy(){this.i=null,this.g="",this.h=!1}var _y={},rd={};function sd(u,p,m){u.L=1,u.v=$l(zn(p)),u.m=m,u.P=!0,vy(u,null)}function vy(u,p){u.F=Date.now(),Ul(u),u.A=zn(u.v);var m=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Dy(m.i,"t",I),u.C=0,m=u.j.J,u.h=new yy,u.g=Xy(u.j,m?p:null,!u.m),0<u.O&&(u.M=new hk(f(u.Y,u,u.g),u.O)),p=u.U,m=u.g,I=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ly[0]=L.toString()),L=ly);for(var V=0;V<L.length;V++){var z=ny(m,L[V],I||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),So(),pk(u.i,u.u,u.A,u.l,u.R,u.m)}_i.prototype.ca=function(u){u=u.target;const p=this.M;p&&$n(u)==3?p.j():this.Y(u)},_i.prototype.Y=function(u){try{if(u==this.g)e:{const ft=$n(this.g);var p=this.g.Ba();const cs=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Uy(this.g)))){this.J||ft!=4||p==7||(p==8||0>=cs?So(3):So(2)),od(this);var m=this.g.Z();this.X=m;t:if(wy(this)){var I=Uy(this.g);u="";var L=I.length,V=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),bo(this);var z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(V&&p==L-1)});I.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,gk(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,it=this.g;if((Se=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Se)){var pe=Se;break t}}pe=null}if(m=pe)os(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ad(this,m);else{this.o=!1,this.s=3,It(12),pr(this),bo(this);break e}}if(this.P){m=!0;let hn;for(;!this.J&&this.C<z.length;)if(hn=_k(this,z),hn==rd){ft==4&&(this.s=4,It(14),m=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==_y){this.s=4,It(15),os(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else os(this.i,this.l,hn,null),ad(this,hn);if(wy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||z.length!=0||this.h.h||(this.s=1,It(16),m=!1),this.o=this.o&&m,!m)os(this.i,this.l,z,"[Invalid Chunked Response]"),pr(this),bo(this);else if(0<z.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),fd(dt),dt.M=!0,It(11))}}else os(this.i,this.l,z,null),ad(this,z);ft==4&&pr(this),this.o&&!this.J&&(ft==4?Ky(this.j,this):(this.o=!1,Ul(this)))}else Ok(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),pr(this),bo(this)}}}catch{}finally{}};function wy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _k(u,p){var m=u.C,I=p.indexOf(`
`,m);return I==-1?rd:(m=Number(p.substring(m,I)),isNaN(m)?_y:(I+=1,I+m>p.length?rd:(p=p.slice(I,I+m),u.C=I+m,p)))}_i.prototype.cancel=function(){this.J=!0,pr(this)};function Ul(u){u.S=Date.now()+u.I,Ey(u,u.I)}function Ey(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=xo(f(u.ba,u),p)}function od(u){u.B&&(a.clearTimeout(u.B),u.B=null)}_i.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(mk(this.i,this.A),this.L!=2&&(So(),It(17)),pr(this),this.s=2,bo(this)):Ey(this,this.S-u)};function bo(u){u.j.G==0||u.J||Ky(u.j,u)}function pr(u){od(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,cy(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function ad(u,p){try{var m=u.j;if(m.G!=0&&(m.g==u||ld(m.h,u))){if(!u.K&&ld(m.h,u)&&m.G==3){try{var I=m.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ql(m),Kl(m);else break e;dd(m),It(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=xo(f(m.Za,m),6e3));if(1>=xy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else mr(m,11)}else if((u.K||m.g==u)&&Ql(m),!S(p))for(L=m.Da.g.parse(p),p=0;p<L.length;p++){let pe=L[p];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const dt=pe[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const ft=pe[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const cs=pe[5];cs!=null&&typeof cs=="number"&&0<cs&&(I=1.5*cs,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const hn=u.g;if(hn){const Xl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xl){var V=I.h;V.g||Xl.indexOf("spdy")==-1&&Xl.indexOf("quic")==-1&&Xl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(cd(V,V.h),V.h=null))}if(I.D){const pd=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;pd&&(I.ya=pd,be(I.I,I.D,pd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var z=u;if(I.qa=Yy(I,I.J?I.ia:null,I.W),z.K){Iy(I.h,z);var Se=z,it=I.L;it&&(Se.I=it),Se.B&&(od(Se),Ul(Se)),I.g=z}else Hy(I);0<m.i.length&&Gl(m)}else pe[0]!="stop"&&pe[0]!="close"||mr(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?mr(m,7):hd(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}So(4)}catch{}}var vk=class{constructor(u,p){this.g=u,this.map=p}};function Ty(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xy(u){return u.h?1:u.g?u.g.size:0}function ld(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function cd(u,p){u.g?u.g.add(p):u.h=p}function Iy(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ty.prototype.cancel=function(){if(this.i=by(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function by(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const m of u.g.values())p=p.concat(m.D);return p}return w(u.i)}function wk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],m=u.length,I=0;I<m;I++)p.push(u[I]);return p}p=[],m=0;for(I in u)p[m++]=u[I];return p}function Ek(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var m=0;m<u;m++)p.push(m);return p}p=[],m=0;for(const I in u)p[m++]=I;return p}}}function ky(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var m=Ek(u),I=wk(u),L=I.length,V=0;V<L;V++)p.call(void 0,I[V],m&&m[V],u)}var Cy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tk(u,p){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var I=u[m].indexOf("="),L=null;if(0<=I){var V=u[m].substring(0,I);L=u[m].substring(I+1)}else V=u[m];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function gr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gr){this.h=u.h,Bl(this,u.j),this.o=u.o,this.g=u.g,zl(this,u.s),this.l=u.l;var p=u.i,m=new Ao;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),Ay(this,m),this.m=u.m}else u&&(p=String(u).match(Cy))?(this.h=!1,Bl(this,p[1]||"",!0),this.o=ko(p[2]||""),this.g=ko(p[3]||"",!0),zl(this,p[4]),this.l=ko(p[5]||"",!0),Ay(this,p[6]||"",!0),this.m=ko(p[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}gr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Co(p,Py,!0),":");var m=this.g;return(m||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Co(p,Py,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Co(m,m.charAt(0)=="/"?Ik:xk,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Co(m,kk)),u.join("")};function zn(u){return new gr(u)}function Bl(u,p,m){u.j=m?ko(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function zl(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ay(u,p,m){p instanceof Ao?(u.i=p,Ck(u.i,u.h)):(m||(p=Co(p,bk)),u.i=new Ao(p,u.h))}function be(u,p,m){u.i.set(p,m)}function $l(u){return be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ko(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Co(u,p,m){return typeof u=="string"?(u=encodeURI(u).replace(p,Sk),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Sk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Py=/[#\/\?@]/g,xk=/[#\?:]/g,Ik=/[#\?]/g,bk=/[#\?@]/g,kk=/#/g;function Ao(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function vi(u){u.g||(u.g=new Map,u.h=0,u.i&&Tk(u.i,function(p,m){u.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=Ao.prototype,t.add=function(u,p){vi(this),this.i=null,u=as(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(p),this.h+=1,this};function Ry(u,p){vi(u),p=as(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ny(u,p){return vi(u),p=as(u,p),u.g.has(p)}t.forEach=function(u,p){vi(this),this.g.forEach(function(m,I){m.forEach(function(L){u.call(p,L,I,this)},this)},this)},t.na=function(){vi(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let I=0;I<p.length;I++){const L=u[I];for(let V=0;V<L.length;V++)m.push(p[I])}return m},t.V=function(u){vi(this);let p=[];if(typeof u=="string")Ny(this,u)&&(p=p.concat(this.g.get(as(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)p=p.concat(u[m])}return p},t.set=function(u,p){return vi(this),this.i=null,u=as(this,u),Ny(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Dy(u,p,m){Ry(u,p),0<m.length&&(u.i=null,u.g.set(as(u,p),w(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var I=p[m];const V=encodeURIComponent(String(I)),z=this.V(I);for(I=0;I<z.length;I++){var L=V;z[I]!==""&&(L+="="+encodeURIComponent(String(z[I]))),u.push(L)}}return this.i=u.join("&")};function as(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Ck(u,p){p&&!u.j&&(vi(u),u.i=null,u.g.forEach(function(m,I){var L=I.toLowerCase();I!=L&&(Ry(this,I),Dy(this,L,m))},u)),u.j=p}function Ak(u,p){const m=new Io;if(a.Image){const I=new Image;I.onload=g(wi,m,"TestLoadImage: loaded",!0,p,I),I.onerror=g(wi,m,"TestLoadImage: error",!1,p,I),I.onabort=g(wi,m,"TestLoadImage: abort",!1,p,I),I.ontimeout=g(wi,m,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function Pk(u,p){const m=new Io,I=new AbortController,L=setTimeout(()=>{I.abort(),wi(m,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(V=>{clearTimeout(L),V.ok?wi(m,"TestPingServer: ok",!0,p):wi(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),wi(m,"TestPingServer: error",!1,p)})}function wi(u,p,m,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(m)}catch{}}function Rk(){this.g=new fk}function Nk(u,p,m){const I=m||"";try{ky(u,function(L,V){let z=L;c(L)&&(z=Zh(L)),p.push(I+V+"="+encodeURIComponent(z))})}catch(L){throw p.push(I+"type="+encodeURIComponent("_badmap")),L}}function Wl(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Wl,ed),Wl.prototype.g=function(){return new Hl(this.l,this.j)},Wl.prototype.i=function(u){return function(){return u}}({});function Hl(u,p){ht.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Hl,ht),t=Hl.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ro(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;My(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function My(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Po(this):Ro(this),this.readyState==3&&My(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Po(this))},t.Qa=function(u){this.g&&(this.response=u,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ro(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=p.next();return u.join(`\r
`)};function Ro(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Oy(u){let p="";return D(u,function(m,I){p+=I,p+=":",p+=m,p+=`\r
`}),p}function ud(u,p,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=Oy(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):be(u,p,m))}function je(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(je,ht);var Dk=/^https?$/i,Mk=["POST","PUT"];t=je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():id.g(),this.v=this.o?uy(this.o):uy(id),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){Ly(this,V);return}if(u=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)m.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const V of I.keys())m.set(V,I.get(V));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Mk,p,void 0))||I||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of m)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jy(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Ly(this,V)}};function Ly(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Vy(u),ql(u)}function Vy(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xt(this,"complete"),xt(this,"abort"),ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ql(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fy(this):this.bb())},t.bb=function(){Fy(this)};function Fy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||$n(u)!=4||u.Z()!=2)){if(u.u&&$n(u)==4)oy(u.Ea,0,u);else if(xt(u,"readystatechange"),$n(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var I;if(I=z===0){var L=String(u.D).match(Cy)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!Dk.test(L?L.toLowerCase():"")}m=I}if(m)xt(u,"complete"),xt(u,"success");else{u.m=6;try{var V=2<$n(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",Vy(u)}}finally{ql(u)}}}}function ql(u,p){if(u.g){jy(u);const m=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||xt(u,"ready");try{m.onreadystatechange=I}catch{}}}function jy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function $n(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),dk(p)}};function Uy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ok(u){const p={};u=(u.g&&2<=$n(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(S(u[I]))continue;var m=P(u[I]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=p[L]||[];p[L]=V,V.push(m)}x(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(u,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||p}function By(u){this.Aa=0,this.i=[],this.j=new Io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=No("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=No("baseRetryDelayMs",5e3,u),this.cb=No("retryDelaySeedMs",1e4,u),this.Wa=No("forwardChannelMaxRetries",2,u),this.wa=No("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ty(u&&u.concurrentRequestLimit),this.Da=new Rk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=By.prototype,t.la=8,t.G=1,t.connect=function(u,p,m,I){It(0),this.W=u,this.H=p||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=Yy(this,null,this.W),Gl(this)};function hd(u){if(zy(u),u.G==3){var p=u.U++,m=zn(u.I);if(be(m,"SID",u.K),be(m,"RID",p),be(m,"TYPE","terminate"),Do(u,m),p=new _i(u,u.j,p),p.L=2,p.v=$l(zn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=Xy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ul(p)}Qy(u)}function Kl(u){u.g&&(fd(u),u.g.cancel(),u.g=null)}function zy(u){Kl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ql(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Gl(u){if(!Sy(u.h)&&!u.s){u.s=!0;var p=u.Ga;se||K(),B||(se(),B=!0),q.add(p,u),u.B=0}}function Lk(u,p){return xy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=xo(f(u.Ga,u,p),Gy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new _i(this,this.j,u);let V=this.o;if(this.S&&(V?(V=v(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=Wy(this,L,p),m=zn(this.I),be(m,"RID",u),be(m,"CVER",22),this.D&&be(m,"X-HTTP-Session-Id",this.D),Do(this,m),V&&(this.O?p="headers="+encodeURIComponent(String(Oy(V)))+"&"+p:this.m&&ud(m,this.m,V)),cd(this.h,L),this.Ua&&be(m,"TYPE","init"),this.P?(be(m,"$req",p),be(m,"SID","null"),L.T=!0,sd(L,m,null)):sd(L,m,p),this.G=2}}else this.G==3&&(u?$y(this,u):this.i.length==0||Sy(this.h)||$y(this))};function $y(u,p){var m;p?m=p.l:m=u.U++;const I=zn(u.I);be(I,"SID",u.K),be(I,"RID",m),be(I,"AID",u.T),Do(u,I),u.m&&u.o&&ud(I,u.m,u.o),m=new _i(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Wy(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),cd(u.h,m),sd(m,I,p)}function Do(u,p){u.H&&D(u.H,function(m,I){be(p,I,m)}),u.l&&ky({},function(m,I){be(p,I,m)})}function Wy(u,p,m){m=Math.min(u.i.length,m);var I=u.l?f(u.l.Na,u.l,u):null;e:{var L=u.i;let V=-1;for(;;){const z=["count="+m];V==-1?0<m?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Se=!0;for(let it=0;it<m;it++){let pe=L[it].g;const dt=L[it].map;if(pe-=V,0>pe)V=Math.max(0,L[it].g-100),Se=!1;else try{Nk(dt,z,"req"+pe+"_")}catch{I&&I(dt)}}if(Se){I=z.join("&");break e}}}return u=u.i.splice(0,m),p.D=u,I}function Hy(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;se||K(),B||(se(),B=!0),q.add(p,u),u.v=0}}function dd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=xo(f(u.Fa,u),Gy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,qy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=xo(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Kl(this),qy(this))};function fd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function qy(u){u.g=new _i(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=zn(u.qa);be(p,"RID","rpc"),be(p,"SID",u.K),be(p,"AID",u.T),be(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&be(p,"TO",u.ja),be(p,"TYPE","xmlhttp"),Do(u,p),u.m&&u.o&&ud(p,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=$l(zn(p)),m.m=null,m.P=!0,vy(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Kl(this),dd(this),It(19))};function Ql(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Ky(u,p){var m=null;if(u.g==p){Ql(u),fd(u),u.g=null;var I=2}else if(ld(u.h,p))m=p.D,Iy(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;I=Vl(),xt(I,new gy(I,m)),Gl(u)}else Hy(u);else if(L=p.s,L==3||L==0&&0<p.X||!(I==1&&Lk(u,p)||I==2&&dd(u)))switch(m&&0<m.length&&(p=u.h,p.i=p.i.concat(m)),L){case 1:mr(u,5);break;case 4:mr(u,10);break;case 3:mr(u,6);break;default:mr(u,2)}}}function Gy(u,p){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*p}function mr(u,p){if(u.j.info("Error code "+p),p==2){var m=f(u.fb,u),I=u.Xa;const L=!I;I=new gr(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bl(I,"https"),$l(I),L?Ak(I.toString(),m):Pk(I.toString(),m)}else It(2);u.G=0,u.l&&u.l.sa(p),Qy(u),zy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Qy(u){if(u.G=0,u.ka=[],u.l){const p=by(u.h);(p.length!=0||u.i.length!=0)&&(T(u.ka,p),T(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function Yy(u,p,m){var I=m instanceof gr?zn(m):new gr(m);if(I.g!="")p&&(I.g=p+"."+I.g),zl(I,I.s);else{var L=a.location;I=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new gr(null);I&&Bl(V,I),p&&(V.g=p),L&&zl(V,L),m&&(V.l=m),I=V}return m=u.D,p=u.ya,m&&p&&be(I,m,p),be(I,"VER",u.la),Do(u,I),I}function Xy(u,p,m){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new je(new Wl({eb:m})):new je(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jy(){}t=Jy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yl(){}Yl.prototype.g=function(u,p){return new Bt(u,p)};function Bt(u,p){ht.call(this),this.g=new By(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!S(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ls(this)}_(Bt,ht),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){hd(this.g)},Bt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Zh(u),u=m);p.i.push(new vk(p.Ya++,u)),p.G==3&&Gl(p)},Bt.prototype.N=function(){this.g.l=null,delete this.j,hd(this.g),delete this.g,Bt.aa.N.call(this)};function Zy(u){td.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const m in p){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}_(Zy,td);function e_(){nd.call(this),this.status=1}_(e_,nd);function ls(u){this.g=u}_(ls,Jy),ls.prototype.ua=function(){xt(this.g,"a")},ls.prototype.ta=function(u){xt(this.g,new Zy(u))},ls.prototype.sa=function(u){xt(this.g,new e_)},ls.prototype.ra=function(){xt(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Nx=function(){return new Yl},Rx=function(){return Vl()},Px=fr,Tp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fl.NO_ERROR=0,Fl.TIMEOUT=8,Fl.HTTP_ERROR=6,Qc=Fl,my.COMPLETE="complete",Ax=my,hy.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",ht.prototype.listen=ht.prototype.K,na=hy,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,Cx=je}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const Qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Sh("@firebase/firestore");function zo(){return qr.logLevel}function H(t,...e){if(qr.logLevel<=ue.DEBUG){const n=e.map(em);qr.debug(`Firestore (${mo}): ${t}`,...n)}}function ui(t,...e){if(qr.logLevel<=ue.ERROR){const n=e.map(em);qr.error(`Firestore (${mo}): ${t}`,...n)}}function Ys(t,...e){if(qr.logLevel<=ue.WARN){const n=e.map(em);qr.warn(`Firestore (${mo}): ${t}`,...n)}}function em(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: `+t;throw ui(e),new Error(e)}function we(t,e){t||te()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class yM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _M{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(we(typeof i.accessToken=="string"),new Dx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new _t(e)}}class vM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new vM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new EM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=SM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ge(t,e){return t<e?-1:t>e?1:0}function Xs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ye(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ye(0,0))}static max(){return new ie(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,i){n===void 0?n=0:n>e.length&&te(),i===void 0?i=e.length-n:i>e.length-n&&te(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return tl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends tl{construct(e,n,i){return new Ne(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const xM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends tl{construct(e,n,i){return new ot(e,n,i)}static isValidIdentifier(e){return xM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ne.fromString(e))}static fromName(e){return new X(Ne.fromString(e).popFirst(5))}static empty(){return new X(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ne(e.slice()))}}function IM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ie.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new er(r,X.empty(),e)}function bM(t){return new er(t.readTime,t.key,-1)}class er{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new er(ie.min(),X.empty(),-1)}static max(){return new er(ie.max(),X.empty(),-1)}}function kM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==CM)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,i)=>{n(e)})}static reject(e){return new F((n,i)=>{i(e)})}static waitFor(e){return new F((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=F.resolve(!1);for(const i of e)n=n.next(r=>r?F.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new F((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new F((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function PM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tm.oe=-1;function kh(t){return t==null}function Fu(t){return t===0&&1/t==-1/0}function RM(t){return typeof t=="number"&&Number.isInteger(t)&&!Fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ox(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}}class yc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??st.RED,this.left=r??st.EMPTY,this.right=s??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new st(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return st.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,i,r,s){return this}insert(e,n,i){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new lt(ot.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lx("Invalid base64 string: "+s):s}}(e);return new ut(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const NM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(t){if(we(!!t),typeof t=="string"){let e=0;const n=NM.exec(t);if(we(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function im(t){const e=t.mapValue.fields.__previous_value__;return nm(e)?im(e):e}function nl(t){const e=tr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class il{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new il("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c={mapValue:{}};function Gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nm(t)?4:OM(t)?9007199254740991:MM(t)?10:11:te()}function Un(t,e){if(t===e)return!0;const n=Gr(t);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nl(t).isEqual(nl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=tr(r.timestampValue),a=tr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Kr(r.bytesValue).isEqual(Kr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Be(r.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(r.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Be(r.integerValue)===Be(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Be(r.doubleValue),a=Be(s.doubleValue);return o===a?Fu(o)===Fu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Xs(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Yv(o)!==Yv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Un(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function rl(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Js(t,e){if(t===e)return 0;const n=Gr(t),i=Gr(e);if(n!==i)return ge(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Be(s.integerValue||s.doubleValue),l=Be(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Jv(t.timestampValue,e.timestampValue);case 4:return Jv(nl(t),nl(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Kr(s),l=Kr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ge(a[c],l[c]);if(h!==0)return h}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(Be(s.latitude),Be(o.latitude));return a!==0?a:ge(Be(s.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=f.value)===null||l===void 0?void 0:l.arrayValue,w=ge(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:Zv(g,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===_c.mapValue&&o===_c.mapValue)return 0;if(s===_c.mapValue)return 1;if(o===_c.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ge(l[d],h[d]);if(f!==0)return f;const g=Js(a[l[d]],c[h[d]]);if(g!==0)return g}return ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw te()}}function Jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=tr(t),i=tr(e),r=ge(n.seconds,i.seconds);return r!==0?r:ge(n.nanos,i.nanos)}function Zv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Js(n[r],i[r]);if(s)return s}return ge(n.length,i.length)}function Zs(t){return Sp(t)}function Sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=tr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Sp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Sp(n.fields[o])}`;return r+"}"}(t.mapValue):te()}function xp(t){return!!t&&"integerValue"in t}function rm(t){return!!t&&"arrayValue"in t}function e0(t){return!!t&&"nullValue"in t}function t0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yc(t){return!!t&&"mapValue"in t}function MM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function wa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=wa(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wa(n)}setAll(e){let n=ot.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=wa(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){is(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Dt(wa(this.value))}}function Vx(t){const e=[];return is(t.fields,(n,i)=>{const r=new ot([n]);if(Yc(i)){const s=Vx(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,ie.min(),ie.min(),ie.min(),Dt.empty(),0)}static newFoundDocument(e,n,i,r){return new wt(e,1,n,ie.min(),i,r,0)}static newNoDocument(e,n){return new wt(e,2,n,ie.min(),ie.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,ie.min(),ie.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.position=e,this.inclusive=n}}function n0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=X.comparator(X.fromName(o.referenceValue),n.key):i=Js(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function i0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function LM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{}class Ge extends Fx{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new FM(e,n,i):n==="array-contains"?new BM(e,i):n==="in"?new zM(e,i):n==="not-in"?new $M(e,i):n==="array-contains-any"?new WM(e,i):new Ge(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new jM(e,i):new UM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Js(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(Js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends Fx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Bn(e,n)}matches(e){return jx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jx(t){return t.op==="and"}function Ux(t){return VM(t)&&jx(t)}function VM(t){for(const e of t.filters)if(e instanceof Bn)return!1;return!0}function Ip(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+Zs(t.value);if(Ux(t))return t.filters.map(e=>Ip(e)).join(",");{const e=t.filters.map(n=>Ip(n)).join(",");return`${t.op}(${e})`}}function Bx(t,e){return t instanceof Ge?function(i,r){return r instanceof Ge&&i.op===r.op&&i.field.isEqual(r.field)&&Un(i.value,r.value)}(t,e):t instanceof Bn?function(i,r){return r instanceof Bn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Bx(o,r.filters[a]),!0):!1}(t,e):void te()}function zx(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Zs(n.value)}`}(t):t instanceof Bn?function(n){return n.op.toString()+" {"+n.getFilters().map(zx).join(" ,")+"}"}(t):"Filter"}class FM extends Ge{constructor(e,n,i){super(e,n,i),this.key=X.fromName(i.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class jM extends Ge{constructor(e,n){super(e,"in",n),this.keys=$x("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UM extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=$x("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $x(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>X.fromName(i.referenceValue))}class BM extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rm(n)&&rl(n.arrayValue,this.value)}}class zM extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rl(this.value.arrayValue,n)}}class $M extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rl(this.value.arrayValue,n)}}class WM extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>rl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function r0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new HM(t,e,n,i,r,s,o)}function sm(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ip(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Zs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Zs(i)).join(",")),e.ue=n}return e.ue}function om(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Bx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!i0(t.startAt,e.startAt)&&i0(t.endAt,e.endAt)}function bp(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qM(t,e,n,i,r,s,o,a){return new Ch(t,e,n,i,r,s,o,a)}function am(t){return new Ch(t)}function s0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KM(t){return t.collectionGroup!==null}function Ea(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Uu(s,i))}),n.has(ot.keyField().canonicalString())||e.ce.push(new Uu(ot.keyField(),i))}return e.ce}function Ln(t){const e=re(t);return e.le||(e.le=GM(e,Ea(t))),e.le}function GM(t,e){if(t.limitType==="F")return r0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Uu(r.field,s)});const n=t.endAt?new ju(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ju(t.startAt.position,t.startAt.inclusive):null;return r0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function kp(t,e,n){return new Ch(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ah(t,e){return om(Ln(t),Ln(e))&&t.limitType===e.limitType}function Wx(t){return`${sm(Ln(t))}|lt:${t.limitType}`}function ps(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>zx(r)).join(", ")}]`),kh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Zs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Zs(r)).join(",")),`Target(${i})`}(Ln(t))}; limitType=${t.limitType})`}function Ph(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):X.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Ea(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=n0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Ea(i),r)||i.endAt&&!function(o,a,l){const c=n0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Ea(i),r))}(t,e)}function QM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hx(t){return(e,n)=>{let i=!1;for(const r of Ea(t)){const s=YM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function YM(t,e,n){const i=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Js(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Ox(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new Ve(X.comparator);function hi(){return XM}const qx=new Ve(X.comparator);function ia(...t){let e=qx;for(const n of t)e=e.insert(n.key,n);return e}function Kx(t){let e=qx;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Pr(){return Ta()}function Gx(){return Ta()}function Ta(){return new yo(t=>t.toString(),(t,e)=>t.isEqual(e))}const JM=new Ve(X.comparator),ZM=new lt(X.comparator);function ce(...t){let e=ZM;for(const n of t)e=e.add(n);return e}const e2=new lt(ge);function t2(){return e2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function Qx(t){return{integerValue:""+t}}function n2(t,e){return RM(e)?Qx(e):lm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this._=void 0}}function i2(t,e,n){return t instanceof sl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&nm(s)&&(s=im(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ol?Xx(t,e):t instanceof al?Jx(t,e):function(r,s){const o=Yx(r,s),a=o0(o)+o0(r.Pe);return xp(o)&&xp(r.Pe)?Qx(a):lm(r.serializer,a)}(t,e)}function r2(t,e,n){return t instanceof ol?Xx(t,e):t instanceof al?Jx(t,e):n}function Yx(t,e){return t instanceof Bu?function(i){return xp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class sl extends Rh{}class ol extends Rh{constructor(e){super(),this.elements=e}}function Xx(t,e){const n=Zx(e);for(const i of t.elements)n.some(r=>Un(r,i))||n.push(i);return{arrayValue:{values:n}}}class al extends Rh{constructor(e){super(),this.elements=e}}function Jx(t,e){let n=Zx(e);for(const i of t.elements)n=n.filter(r=>!Un(r,i));return{arrayValue:{values:n}}}class Bu extends Rh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function o0(t){return Be(t.integerValue||t.doubleValue)}function Zx(t){return rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.field=e,this.transform=n}}function o2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ol&&r instanceof ol||i instanceof al&&r instanceof al?Xs(i.elements,r.elements,Un):i instanceof Bu&&r instanceof Bu?Un(i.Pe,r.Pe):i instanceof sl&&r instanceof sl}(t.transform,e.transform)}class a2{constructor(e,n){this.version=e,this.transformResults=n}}class vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nh{}function eI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cm(t.key,vn.none()):new Cl(t.key,t.data,vn.none());{const n=t.data,i=Dt.empty();let r=new lt(ot.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ur(t.key,i,new Ht(r.toArray()),vn.none())}}function l2(t,e,n){t instanceof Cl?function(r,s,o){const a=r.value.clone(),l=l0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ur?function(r,s,o){if(!Xc(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=l0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(tI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Sa(t,e,n,i){return t instanceof Cl?function(s,o,a,l){if(!Xc(s.precondition,o))return a;const c=s.value.clone(),h=c0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof ur?function(s,o,a,l){if(!Xc(s.precondition,o))return a;const c=c0(s.fieldTransforms,l,o),h=o.data;return h.setAll(tI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Xc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function c2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=Yx(i.transform,r||null);s!=null&&(n===null&&(n=Dt.empty()),n.set(i.field,s))}return n||null}function a0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Xs(i,r,(s,o)=>o2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cl extends Nh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ur extends Nh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function l0(t,e,n){const i=new Map;we(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,r2(o,a,n[r]))}return i}function c0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,i2(s,o,e))}return i}class cm extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u2 extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&l2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Sa(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Sa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Gx();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=eI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ie.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,(n,i)=>a0(n,i))&&Xs(this.baseMutations,e.baseMutations,(n,i)=>a0(n,i))}}class um{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){we(e.mutations.length===i.length);let r=function(){return JM}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new um(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,he;function p2(t){switch(t){default:return te();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function nI(t){if(t===void 0)return ui("GRPC error has no .code"),j.UNKNOWN;switch(t){case We.OK:return j.OK;case We.CANCELLED:return j.CANCELLED;case We.UNKNOWN:return j.UNKNOWN;case We.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case We.INTERNAL:return j.INTERNAL;case We.UNAVAILABLE:return j.UNAVAILABLE;case We.UNAUTHENTICATED:return j.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case We.NOT_FOUND:return j.NOT_FOUND;case We.ALREADY_EXISTS:return j.ALREADY_EXISTS;case We.PERMISSION_DENIED:return j.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case We.ABORTED:return j.ABORTED;case We.OUT_OF_RANGE:return j.OUT_OF_RANGE;case We.UNIMPLEMENTED:return j.UNIMPLEMENTED;case We.DATA_LOSS:return j.DATA_LOSS;default:return te()}}(he=We||(We={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new Lr([4294967295,4294967295],0);function u0(t){const e=g2().encode(t),n=new kx;return n.update(e),new Uint8Array(n.digest())}function h0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Lr([n,i],0),new Lr([r,s],0)]}class hm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(i<0)throw new ra(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Lr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Lr.fromNumber(i)));return r.compare(m2)===1&&(r=new Lr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=u0(e),[i,r]=h0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hm(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=u0(e),[i,r]=h0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Dh(ie.min(),r,new Ve(ge),hi(),ce())}}class Al{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Al(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class iI{constructor(e,n){this.targetId=e,this.me=n}}class rI{constructor(e,n,i=ut.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class d0{constructor(){this.fe=0,this.ge=p0(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),i=ce();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:te()}}),new Al(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=p0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class y2{constructor(e){this.Le=e,this.Be=new Map,this.ke=hi(),this.qe=f0(),this.Qe=new Ve(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(bp(s))if(i===0){const o=new X(s.path);this.Ue(n,o,wt.newNoDocument(o,ie.min()))}else we(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Kr(i).toUint8Array()}catch(l){if(l instanceof Lx)return Ys("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hm(o,r,s)}catch(l){return Ys(l instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&bp(a.target)){const l=new X(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,wt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Dh(e,n,this.Qe,this.ke,i);return this.ke=hi(),this.qe=f0(),this.Qe=new Ve(ge),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new d0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new d0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function f0(){return new Ve(X.comparator)}function p0(){return new Ve(X.comparator)}const _2={asc:"ASCENDING",desc:"DESCENDING"},v2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w2={and:"AND",or:"OR"};class E2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cp(t,e){return t.useProto3Json||kh(e)?e:{value:e}}function zu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T2(t,e){return zu(t,e.toTimestamp())}function Vn(t){return we(!!t),ie.fromTimestamp(function(n){const i=tr(n);return new Ye(i.seconds,i.nanos)}(t))}function dm(t,e){return Ap(t,e).canonicalString()}function Ap(t,e){const n=function(r){return new Ne(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oI(t){const e=Ne.fromString(t);return we(hI(e)),e}function Pp(t,e){return dm(t.databaseId,e.path)}function Qd(t,e){const n=oI(e);if(n.get(1)!==t.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(lI(n))}function aI(t,e){return dm(t.databaseId,e)}function S2(t){const e=oI(t);return e.length===4?Ne.emptyPath():lI(e)}function Rp(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lI(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function g0(t,e,n){return{name:Pp(t,e),fields:n.value.mapValue.fields}}function x2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(we(h===void 0||typeof h=="string"),ut.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ut.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:nI(c.code);return new G(h,c.message||"")}(o);n=new rI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Qd(t,i.document.name),s=Vn(i.document.updateTime),o=i.document.createTime?Vn(i.document.createTime):ie.min(),a=new Dt({mapValue:{fields:i.document.fields}}),l=wt.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Jc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Qd(t,i.document),s=i.readTime?Vn(i.readTime):ie.min(),o=wt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Jc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Qd(t,i.document),s=i.removedTargetIds||[];n=new Jc([],s,r,null)}else{if(!("filter"in e))return te();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new f2(r,s),a=i.targetId;n=new iI(a,o)}}return n}function I2(t,e){let n;if(e instanceof Cl)n={update:g0(t,e.key,e.value)};else if(e instanceof cm)n={delete:Pp(t,e.key)};else if(e instanceof ur)n={update:g0(t,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof u2))return te();n={verify:Pp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof sl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ol)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof al)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:T2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function b2(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Vn(r.updateTime):Vn(s);return o.isEqual(ie.min())&&(o=Vn(s)),new a2(o,r.transformResults||[])}(n,e))):[]}function k2(t,e){return{documents:[aI(t,e.path)]}}function C2(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=aI(t,r);const s=function(c){if(c.length!==0)return uI(Bn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:gs(f.field),direction:R2(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Cp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function A2(t){let e=S2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){we(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=cI(d);return f instanceof Bn&&Ux(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(_){return new Uu(ms(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,kh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new ju(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new ju(g,f)}(n.endAt)),qM(e,r,o,s,a,"F",l,c)}function P2(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ms(n.unaryFilter.field);return Ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ms(n.unaryFilter.field);return Ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ms(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ms(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(ms(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bn.create(n.compositeFilter.filters.map(i=>cI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function R2(t){return _2[t]}function N2(t){return v2[t]}function D2(t){return w2[t]}function gs(t){return{fieldPath:t.canonicalString()}}function ms(t){return ot.fromServerFormat(t.fieldPath)}function uI(t){return t instanceof Ge?function(n){if(n.op==="=="){if(t0(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NAN"}};if(e0(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t0(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NOT_NAN"}};if(e0(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gs(n.field),op:N2(n.op),value:n.value}}}(t):t instanceof Bn?function(n){const i=n.getFilters().map(r=>uI(r));return i.length===1?i[0]:{compositeFilter:{op:D2(n.op),filters:i}}}(t):te()}function M2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n,i,r,s=ie.min(),o=ie.min(),a=ut.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.ct=e}}function L2(t){const e=A2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.un=new F2}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(er.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(er.min())}updateCollectionGroup(e,n,i){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class F2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new lt(Ne.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new lt(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new eo(0)}static kn(){return new eo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.changes=new yo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Sa(i.mutation,r,Ht.empty(),Ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=Pr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=ia();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Pr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=hi();const o=Ta(),a=function(){return Ta()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof ur)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Sa(h.mutation,c,h.mutation.getFieldMask(),Ye.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new U2(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Ta();let r=new Ve((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||Ht.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||ce()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=Gx();h.forEach(f=>{if(!s.has(f)){const g=eI(n.get(f),i.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):F.resolve(Pr());let a=-1,l=s;return o.next(c=>F.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:a,changes:Kx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(i=>{let r=ia();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=ia();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(d,f){return new Ch(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,wt.newInvalidDocument(h)))});let a=ia();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Sa(h.mutation,c,Ht.empty(),Ye.now()),Ph(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Vn(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:L2(r.bundledQuery),readTime:Vn(r.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.overlays=new Ve(X.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Pr();return F.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),F.resolve()}getOverlaysForCollection(e,n,i){const r=Pr(),s=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Pr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Pr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return F.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new d2(n,i));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.Tr=new lt(Je.Er),this.dr=new lt(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Je(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new X(new Ne([])),i=new Je(n,e),r=new Je(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Ne([])),i=new Je(n,e),r=new Je(n,e+1);let s=ce();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Je(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(Je.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new h2(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Je(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Je(n,0),r=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new lt(ge);return n.forEach(r=>{const s=new Je(r,0),o=new Je(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),F.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;X.isDocumentKey(s)||(s=s.child(""));const o=new Je(new X(s),0);let a=new lt(ge);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return F.forEach(n.mutations,r=>{const s=new Je(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Je(n,0),r=this.br.firstAfterOrEqual(i);return F.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.Mr=e,this.docs=function(){return new Ve(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let i=hi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():wt.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=hi();const o=n.path,a=new X(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kM(bM(h),i)<=0||(r.has(h.key)||Ph(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,i,r){te()}Or(e,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new K2(this)}getSize(e){return F.resolve(this.size)}}class K2 extends j2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.persistence=e,this.Nr=new yo(n=>sm(n),om),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fm,this.targetCount=0,this.kr=eo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new eo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return F.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),F.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return F.resolve(i)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tm(0),this.Kr=!1,this.Kr=!0,this.$r=new W2,this.referenceDelegate=e(this),this.Ur=new G2(this),this.indexManager=new V2,this.remoteDocumentCache=function(r){return new q2(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new O2(n),this.Gr=new z2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new H2(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);const r=new Y2(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class Y2 extends AM{constructor(e){super(),this.currentSequenceNumber=e}}class pm{constructor(e){this.persistence=e,this.Jr=new fm,this.Yr=null}static Zr(e){return new pm(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),F.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,i=>{const r=X.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new gm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DP()?8:PM(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new X2;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(zo()<=ue.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(zo()<=ue.DEBUG&&H("QueryEngine","Query:",ps(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(zo()<=ue.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):F.resolve())}Yi(e,n){if(s0(n))return F.resolve(null);let i=Ln(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=kp(n,null,"F"),i=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,kp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return s0(n)||r.isEqual(ie.min())?F.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?F.resolve(null):(zo()<=ue.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ps(n)),this.rs(e,o,n,IM(r,-1)).next(a=>a))})}ts(e,n){let i=new lt(Hx(e));return n.forEach((r,s)=>{Ph(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return zo()<=ue.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ps(n)),this.Ji.getDocumentsMatchingQuery(e,n,er.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Ve(ge),this._s=new yo(s=>sm(s),om),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eO(t,e,n,i){return new Z2(t,e,n,i)}async function dI(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ce();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function tO(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let g=F.resolve();return f.forEach(_=>{g=g.next(()=>h.getEntry(l,_)).next(w=>{const T=c.docVersions.get(_);we(T!==null),w.version.compareTo(T)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function fI(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nO(t,e){const n=re(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ut.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(w,T,E){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=hi(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(iO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(ie.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function iO(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=hi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ie.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function rO(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function sO(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Li(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Np(t,e,n){const i=re(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!kl(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function m0(t,e,n){const i=re(t);let r=ie.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=re(l),f=d._s.get(h);return f!==void 0?F.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(i,o,Ln(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:ie.min(),n?s:ce())).next(a=>(oO(i,QM(e),a),{documents:a,Ts:s})))}function oO(t,e,n){let i=t.us.get(e)||ie.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class y0{constructor(){this.activeTargetIds=t2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aO{constructor(){this.so=new y0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new y0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function Yd(){return vc===null?vc=function(){return 268435456+Math.round(2147483648*Math.random())}():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class hO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Yd(),l=this.xo(n,i.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ys("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=cO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Yd();return new Promise((o,a)=>{const l=new Cx;l.setWithCredentials(!0),l.listenOnce(Ax.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qc.NO_ERROR:const h=l.getResponseJson();H(mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Qc.TIMEOUT:H(mt,`RPC '${e}' ${s} timed out`),a(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const d=l.getStatus();if(H(mt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const _=function(T){const E=T.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(E)>=0?E:j.UNKNOWN}(g.status);a(new G(_,g.message))}else a(new G(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(j.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{H(mt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);H(mt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=Yd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nx(),a=Rx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");H(mt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,g=!1;const _=new uO({Io:T=>{g?H(mt,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(f||(H(mt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),H(mt,`RPC '${e}' stream ${r} sending:`,T),d.send(T))},To:()=>d.close()}),w=(T,E,S)=>{T.listen(E,k=>{try{S(k)}catch(A){setTimeout(()=>{throw A},0)}})};return w(d,na.EventType.OPEN,()=>{g||(H(mt,`RPC '${e}' stream ${r} transport opened.`),_.yo())}),w(d,na.EventType.CLOSE,()=>{g||(g=!0,H(mt,`RPC '${e}' stream ${r} transport closed`),_.So())}),w(d,na.EventType.ERROR,T=>{g||(g=!0,Ys(mt,`RPC '${e}' stream ${r} transport errored:`,T),_.So(new G(j.UNAVAILABLE,"The operation could not be completed")))}),w(d,na.EventType.MESSAGE,T=>{var E;if(!g){const S=T.data[0];we(!!S);const k=S,A=k.error||((E=k[0])===null||E===void 0?void 0:E.error);if(A){H(mt,`RPC '${e}' stream ${r} received error:`,A);const M=A.status;let D=function(b){const C=We[b];if(C!==void 0)return nI(C)}(M),x=A.message;D===void 0&&(D=j.INTERNAL,x="Unknown error status: "+M+" with message "+A.message),g=!0,_.So(new G(D,x)),d.close()}else H(mt,`RPC '${e}' stream ${r} received:`,S),_.bo(S)}}),w(a,Px.STAT_EVENT,T=>{T.stat===Tp.PROXY?H(mt,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===Tp.NOPROXY&&H(mt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){return new E2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new G(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dO extends gI{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=x2(this.serializer,e),i=function(s){if(!("targetChange"in s))return ie.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?Vn(o.readTime):ie.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Rp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=bp(l)?{documents:k2(s,l)}:{query:C2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sI(s,o.resumeToken);const c=Cp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=zu(s,o.snapshotVersion.toTimestamp());const c=Cp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=P2(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Rp(this.serializer),n.removeTarget=e,this.a_(n)}}class fO extends gI{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=b2(e.writeResults,e.commitTime),i=Vn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Rp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>I2(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ap(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ap(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class gO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ui(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{rs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=re(l);c.L_.add(4),await Pl(c),c.q_.set("Unknown"),c.L_.delete(4),await Oh(c)}(this))})}),this.q_=new gO(i,r)}}async function Oh(t){if(rs(t))for(const e of t.B_)await e(!0)}async function Pl(t){for(const e of t.B_)await e(!1)}function mI(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vm(n)?_m(n):_o(n).r_()&&ym(n,e))}function mm(t,e){const n=re(t),i=_o(n);n.N_.delete(e),i.r_()&&yI(n,e),n.N_.size===0&&(i.r_()?i.o_():rs(n)&&n.q_.set("Unknown"))}function ym(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_o(t).A_(e)}function yI(t,e){t.Q_.xe(e),_o(t).R_(e)}function _m(t){t.Q_=new y2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_o(t).start(),t.q_.v_()}function vm(t){return rs(t)&&!_o(t).n_()&&t.N_.size>0}function rs(t){return re(t).L_.size===0}function _I(t){t.Q_=void 0}async function yO(t){t.q_.set("Online")}async function _O(t){t.N_.forEach((e,n)=>{ym(t,e)})}async function vO(t,e){_I(t),vm(t)?(t.q_.M_(e),_m(t)):t.q_.set("Unknown")}async function wO(t,e,n){if(t.q_.set("Online"),e instanceof rI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $u(t,i)}else if(e instanceof Jc?t.Q_.Ke(e):e instanceof iI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{const i=await fI(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),yI(s,l);const d=new Li(h.target,l,c,h.sequenceNumber);ym(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){H("RemoteStore","Failed to raise snapshot:",i),await $u(t,i)}}async function $u(t,e,n){if(!kl(e))throw e;t.L_.add(1),await Pl(t),t.q_.set("Offline"),n||(n=()=>fI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Oh(t)})}function vI(t,e){return e().catch(n=>$u(t,n,e))}async function Lh(t){const e=re(t),n=nr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;EO(e);)try{const r=await rO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,TO(e,r)}catch(r){await $u(e,r)}wI(e)&&EI(e)}function EO(t){return rs(t)&&t.O_.length<10}function TO(t,e){t.O_.push(e);const n=nr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function wI(t){return rs(t)&&!nr(t).n_()&&t.O_.length>0}function EI(t){nr(t).start()}async function SO(t){nr(t).p_()}async function xO(t){const e=nr(t);for(const n of t.O_)e.m_(n.mutations)}async function IO(t,e,n){const i=t.O_.shift(),r=um.from(i,e,n);await vI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Lh(t)}async function bO(t,e){e&&nr(t).V_&&await async function(i,r){if(function(o){return p2(o)&&o!==j.ABORTED}(r.code)){const s=i.O_.shift();nr(i).s_(),await vI(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Lh(i)}}(t,e),wI(t)&&EI(t)}async function v0(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const i=rs(n);n.L_.add(3),await Pl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Oh(n)}async function kO(t,e){const n=re(t);e?(n.L_.delete(2),await Oh(n)):e||(n.L_.add(2),await Pl(n),n.q_.set("Unknown"))}function _o(t){return t.K_||(t.K_=function(n,i,r){const s=re(n);return s.w_(),new dO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:yO.bind(null,t),Ro:_O.bind(null,t),mo:vO.bind(null,t),d_:wO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vm(t)?_m(t):t.q_.set("Unknown")):(await t.K_.stop(),_I(t))})),t.K_}function nr(t){return t.U_||(t.U_=function(n,i,r){const s=re(n);return s.w_(),new fO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SO.bind(null,t),mo:bO.bind(null,t),f_:xO.bind(null,t),g_:IO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Lh(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new wm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Em(t,e){if(ui("AsyncQueue",`${e}: ${t}`),kl(t))return new G(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.comparator=e?(n,i)=>e(n,i)||X.comparator(n.key,i.key):(n,i)=>X.comparator(n.key,i.key),this.keyedMap=ia(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Us(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Us)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Us;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.W_=new Ve(X.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class to{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new to(e,n,Us.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class AO{constructor(){this.queries=E0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=re(n),s=r.queries;r.queries=E0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new G(j.ABORTED,"Firestore shutting down"))}}function E0(){return new yo(t=>Wx(t),Ah)}async function PO(t,e){const n=re(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new CO,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Em(o,`Initialization of query '${ps(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Tm(n)}async function RO(t,e){const n=re(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function NO(t,e){const n=re(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Tm(n)}function DO(t,e,n){const i=re(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Tm(t){t.Y_.forEach(e=>{e.next()})}var Dp,T0;(T0=Dp||(Dp={})).ea="default",T0.Cache="cache";class MO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new to(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.key=e}}class SI{constructor(e){this.key=e}}class OO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=Hx(e),this.Ra=new Us(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new w0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),g=Ph(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?_!==w&&(i.track({type:3,doc:g}),T=!0):this.ga(f,g)||(i.track({type:2,doc:g}),T=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!f&&g?(i.track({type:0,doc:g}),T=!0):f&&!g&&(i.track({type:1,doc:f}),T=!0,(l||c)&&(a=!0)),T&&(g?(o=o.add(g),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,_){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return w(g)-w(_)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new to(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new w0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new SI(i))}),this.da.forEach(i=>{e.has(i)||n.push(new TI(i))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return to.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class LO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class VO{constructor(e){this.key=e,this.va=!1}}class FO{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new yo(a=>Wx(a),Ah),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(X.comparator),this.Na=new Map,this.La=new fm,this.Ba={},this.ka=new Map,this.qa=eo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function jO(t,e,n=!0){const i=AI(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await xI(i,e,n,!0),r}async function UO(t,e){const n=AI(t);await xI(n,e,!0,!1)}async function xI(t,e,n,i){const r=await sO(t.localStore,Ln(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await BO(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&mI(t.remoteStore,r),a}async function BO(t,e,n,i,r){t.Ka=(d,f,g)=>async function(w,T,E,S){let k=T.view.ma(E);k.ns&&(k=await m0(w.localStore,T.query,!1).then(({documents:x})=>T.view.ma(x,k)));const A=S&&S.targetChanges.get(T.targetId),M=S&&S.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(k,w.isPrimaryClient,A,M);return x0(w,T.targetId,D.wa),D.snapshot}(t,d,f,g);const s=await m0(t.localStore,e,!0),o=new OO(e,s.Ts),a=o.ma(s.documents),l=Al.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);x0(t,n,c.wa);const h=new LO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function zO(t,e,n){const i=re(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Ah(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Np(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&mm(i.remoteStore,r.targetId),Mp(i,r.targetId)}).catch(bl)):(Mp(i,r.targetId),await Np(i.localStore,r.targetId,!0))}async function $O(t,e){const n=re(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),mm(n.remoteStore,i.targetId))}async function WO(t,e,n){const i=XO(t);try{const r=await function(o,a){const l=re(o),c=Ye.now(),h=a.reduce((g,_)=>g.add(_.key),ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=hi(),w=ce();return l.cs.getEntries(g,h).next(T=>{_=T,_.forEach((E,S)=>{S.isValidDocument()||(w=w.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(T=>{d=T;const E=[];for(const S of a){const k=c2(S,d.get(S.key).overlayedDocument);k!=null&&E.push(new ur(S.key,k,Vx(k.value.mapValue),vn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,E,a)}).next(T=>{f=T;const E=T.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(g,T.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Kx(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ve(ge)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await Rl(i,r.changes),await Lh(i.remoteStore)}catch(r){const s=Em(r,"Failed to persist write");n.reject(s)}}async function II(t,e){const n=re(t);try{const i=await nO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(we(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?we(o.va):r.removedDocuments.size>0&&(we(o.va),o.va=!1))}),await Rl(n,i,e)}catch(i){await bl(i)}}function S0(t,e,n){const i=re(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&Tm(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function HO(t,e,n){const i=re(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Ve(X.comparator);o=o.insert(s,wt.newNoDocument(s,ie.min()));const a=ce().add(s),l=new Dh(ie.min(),new Map,new Ve(ge),o,a);await II(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Sm(i)}else await Np(i.localStore,e,!1).then(()=>Mp(i,e,n)).catch(bl)}async function qO(t,e){const n=re(t),i=e.batch.batchId;try{const r=await tO(n.localStore,e);kI(n,i,null),bI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Rl(n,r)}catch(r){await bl(r)}}async function KO(t,e,n){const i=re(t);try{const r=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(we(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);kI(i,e,n),bI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Rl(i,r)}catch(r){await bl(r)}}function bI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function kI(t,e,n){const i=re(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||CI(t,i)})}function CI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Sm(t))}function x0(t,e,n){for(const i of n)i instanceof TI?(t.La.addReference(i.key,e),GO(t,i)):i instanceof SI?(H("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||CI(t,i.key)):te()}function GO(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(i),Sm(t))}function Sm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Ne.fromString(e)),i=t.qa.next();t.Na.set(i,new VO(n)),t.Oa=t.Oa.insert(n,i),mI(t.remoteStore,new Li(Ln(am(n.path)),i,"TargetPurposeLimboResolution",tm.oe))}}async function Rl(t,e,n){const i=re(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=gm.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=re(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,f=>F.forEach(f.$i,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>F.forEach(f.Ui,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!kl(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.os.get(f),_=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(f,w)}}}(i.localStore,s))}async function QO(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const i=await dI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Rl(n,i.hs)}}function YO(t,e){const n=re(t),i=n.Na.get(e);if(i&&i.va)return ce().add(i.key);{let r=ce();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function AI(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=II.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HO.bind(null,e),e.Ca.d_=NO.bind(null,e.eventManager),e.Ca.$a=DO.bind(null,e.eventManager),e}function XO(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KO.bind(null,e),e}class Wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eO(this.persistence,new J2,e.initialUser,this.serializer)}Ga(e){return new Q2(pm.Zr,this.serializer)}Wa(e){return new aO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wu.provider={build:()=>new Wu};class Op{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>S0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QO.bind(null,this.syncEngine),await kO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AO}()}createDatastore(e){const n=Mh(e.databaseInfo.databaseId),i=function(s){return new hO(s)}(e.databaseInfo);return function(s,o,a,l){return new pO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new mO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>S0(this.syncEngine,n,0),function(){return _0.D()?new _0:new lO}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new FO(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=re(r);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Pl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Op.provider={build:()=>new Op};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=_t.UNAUTHENTICATED,this.clientId=Mx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Em(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Jd(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await dI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function I0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eL(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>v0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>v0(e.remoteStore,r)),t._onlineComponents=e}async function eL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ys("Error using user provided cache. Falling back to memory cache: "+n),await Jd(t,new Wu)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Jd(t,new Wu);return t._offlineComponents}async function PI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await I0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await I0(t,new Op))),t._onlineComponents}function tL(t){return PI(t).then(e=>e.syncEngine)}async function b0(t){const e=await PI(t),n=e.eventManager;return n.onListen=jO.bind(null,e.syncEngine),n.onUnlisten=zO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$O.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t,e,n){if(!n)throw new G(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nL(t,e,n,i){if(e===!0&&i===!0)throw new G(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function C0(t){if(!X.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A0(t){if(X.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function ii(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xm(t);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new mM;switch(i.type){case"firstParty":return new wM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=k0.get(n);i&&(H("ComponentProvider","Removing Datastore"),k0.delete(n),i.terminate())}(this),Promise.resolve()}}function iL(t,e,n,i={}){var r;const s=(t=ii(t,Vh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=_t.MOCK_USER;else{a=kP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _t(c)}t._authCredentials=new yM(new Dx(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fh(this.firestore,e,this._query)}}class jt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Yi extends Fh{constructor(e,n,i){super(e,n,am(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new X(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function rL(t,e,...n){if(t=Xe(t),NI("collection","path",e),t instanceof Vh){const i=Ne.fromString(e,...n);return A0(i),new Yi(t,null,i)}{if(!(t instanceof jt||t instanceof Yi))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ne.fromString(e,...n));return A0(i),new Yi(t.firestore,null,i)}}function ll(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Mx.newId()),NI("doc","path",e),t instanceof Vh){const i=Ne.fromString(e,...n);return C0(i),new jt(t,null,new X(i))}{if(!(t instanceof jt||t instanceof Yi))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ne.fromString(e,...n));return C0(i),new jt(t.firestore,t instanceof Yi?t.converter:null,new X(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pI(this,"async_queue_retry"),this.Vu=()=>{const i=Xd();i&&H("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Vr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!kl(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ui("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=wm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function N0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class no extends Vh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new R0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function sL(t,e){const n=typeof t=="object"?t:WS(),i=typeof t=="string"?t:"(default)",r=El(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=IP("firestore");s&&iL(r,...s)}return r}function DI(t){if(t._terminated)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oL(t),t._firestoreClient}function oL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new DM(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,RI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new ZO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new io(ut.fromBase64String(e))}catch(n){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new io(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=/^__.*__$/;class lL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cl(e,this.data,n,this.fieldTransforms)}}class MI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class km{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new km(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OI(this.Cu)&&aL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Mh(e)}Qu(e,n,i,r=!1){return new km({Cu:e,methodName:n,qu:i,path:ot.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LI(t){const e=t._freezeSettings(),n=Mh(t._databaseId);return new cL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uL(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Am("Data must be an object, but it was:",o,i);const a=VI(i,o);let l,c;if(s.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Lp(e,d,n);if(!o.contains(f))throw new G(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);jI(h,f)||h.push(f)}l=new Ht(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new lL(new Dt(a),l,c)}class Bh extends Uh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}class Cm extends Uh{_toFieldTransform(e){return new s2(e.path,new sl)}isEqual(e){return e instanceof Cm}}function hL(t,e,n,i){const r=t.Qu(1,e,n);Am("Data must be an object, but it was:",r,i);const s=[],o=Dt.empty();is(i,(l,c)=>{const h=Pm(e,l,n);c=Xe(c);const d=r.Nu(h);if(c instanceof Bh)s.push(h);else{const f=zh(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Ht(s);return new MI(o,a,r.fieldTransforms)}function dL(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Lp(e,i,n)],l=[r];if(s.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Lp(e,s[f])),l.push(s[f+1]);const c=[],h=Dt.empty();for(let f=a.length-1;f>=0;--f)if(!jI(c,a[f])){const g=a[f];let _=l[f];_=Xe(_);const w=o.Nu(g);if(_ instanceof Bh)c.push(g);else{const T=zh(_,w);T!=null&&(c.push(g),h.set(g,T))}}const d=new Ht(c);return new MI(h,d,o.fieldTransforms)}function zh(t,e){if(FI(t=Xe(t)))return Am("Unsupported field value:",e,t),VI(t,e);if(t instanceof Uh)return function(i,r){if(!OI(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=zh(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Xe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return n2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ye.fromDate(i);return{timestampValue:zu(r.serializer,s)}}if(i instanceof Ye){const s=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zu(r.serializer,s)}}if(i instanceof Im)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof io)return{bytesValue:sI(r.serializer,i._byteString)};if(i instanceof jt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof bm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return lm(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${xm(i)}`)}(t,e)}function VI(t,e){const n={};return Ox(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(i,r)=>{const s=zh(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function FI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Im||t instanceof io||t instanceof jt||t instanceof Uh||t instanceof bm)}function Am(t,e,n){if(!FI(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=xm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Lp(t,e,n){if((e=Xe(e))instanceof jh)return e._internalPath;if(typeof e=="string")return Pm(t,e);throw Hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const fL=new RegExp("[~\\*/\\[\\]]");function Pm(t,e,n){if(e.search(fL)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jh(...e.split("."))._internalPath}catch{throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hu(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new G(j.INVALID_ARGUMENT,a+t+l)}function jI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(BI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pL extends UI{data(){return super.data()}}function BI(t,e){return typeof e=="string"?Pm(t,e):e instanceof jh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mL{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return is(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Be(o.doubleValue));return new bm(s)}convertGeoPoint(e){return new Im(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=im(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){const n=tr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ne.fromString(e);we(hI(i));const r=new il(i.get(1),i.get(3)),s=new X(i.popFirst(5));return r.isEqual(n)||ui(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zI extends UI{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(BI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Zc extends zI{data(e={}){return super.data(e)}}class _L{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new sa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Zc(this._firestore,this._userDataWriter,i.key,i,new sa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Zc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Zc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:vL(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}class $I extends mL{constructor(e){super(),this.firestore=e}convertBytes(e){return new io(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function WI(t,e,n){t=ii(t,jt);const i=ii(t.firestore,no),r=yL(t.converter,e,n);return Rm(i,[uL(LI(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,vn.none())])}function HI(t,e,n,...i){t=ii(t,jt);const r=ii(t.firestore,no),s=LI(r);let o;return o=typeof(e=Xe(e))=="string"||e instanceof jh?dL(s,"updateDoc",t._key,e,n,i):hL(s,"updateDoc",t._key,e),Rm(r,[o.toMutation(t._key,vn.exists(!0))])}function wL(t){return Rm(ii(t.firestore,no),[new cm(t._key,vn.none())])}function qI(t,...e){var n,i,r;t=Xe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||N0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(N0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof jt)c=ii(t.firestore,no),h=am(t._key.path),l={next:d=>{e[o]&&e[o](EL(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ii(t,Fh);c=ii(d.firestore,no),h=d._query;const f=new $I(c);l={next:g=>{e[o]&&e[o](new _L(c,f,d,g))},error:e[o+1],complete:e[o+2]},gL(t._query)}return function(f,g,_,w){const T=new JO(w),E=new MO(g,T,_);return f.asyncQueue.enqueueAndForget(async()=>PO(await b0(f),E)),()=>{T.Za(),f.asyncQueue.enqueueAndForget(async()=>RO(await b0(f),E))}}(DI(c),h,a,l)}function Rm(t,e){return function(i,r){const s=new Vr;return i.asyncQueue.enqueueAndForget(async()=>WO(await tL(i),r,s)),s.promise}(DI(t),e)}function EL(t,e,n){const i=n.docs.get(e._key),r=new $I(t);return new zI(t,r,e._key,i,new sa(n.hasPendingWrites,n.fromCache),e.converter)}function Nm(){return new Cm("serverTimestamp")}(function(e,n=!0){(function(r){mo=r})(po),jn(new En("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new no(new _M(i.getProvider("auth-internal")),new TM(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),rn(Qv,"4.7.3",e),rn(Qv,"4.7.3","esm2017")})();const KI="@firebase/installations",Dm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=1e4,QI=`w:${Dm}`,YI="FIS_v2",TL="https://firebaseinstallations.googleapis.com/v1",SL=60*60*1e3,xL="installations",IL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qr=new ns(xL,IL,bL);function XI(t){return t instanceof Sn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI({projectId:t}){return`${TL}/projects/${t}/installations`}function ZI(t){return{token:t.token,requestStatus:2,expiresIn:CL(t.expiresIn),creationTime:Date.now()}}async function eb(t,e){const i=(await e.json()).error;return Qr.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function tb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kL(t,{refreshToken:e}){const n=tb(t);return n.append("Authorization",AL(e)),n}async function nb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function CL(t){return Number(t.replace("s","000"))}function AL(t){return`${YI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=JI(t),r=tb(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:YI,appId:t.appId,sdkVersion:QI},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await nb(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:ZI(c.authToken)}}else throw await eb("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=/^[cdef][\w-]{21}$/,Vp="";function DL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=ML(t);return NL.test(n)?n:Vp}catch{return Vp}}function ML(t){return RL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=new Map;function sb(t,e){const n=$h(t);ob(n,e),OL(n,e)}function ob(t,e){const n=rb.get(t);if(n)for(const i of n)i(e)}function OL(t,e){const n=LL();n&&n.postMessage({key:t,fid:e}),VL()}let Rr=null;function LL(){return!Rr&&"BroadcastChannel"in self&&(Rr=new BroadcastChannel("[Firebase] FID Change"),Rr.onmessage=t=>{ob(t.data.key,t.data.fid)}),Rr}function VL(){rb.size===0&&Rr&&(Rr.close(),Rr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="firebase-installations-database",jL=1,Yr="firebase-installations-store";let Zd=null;function Mm(){return Zd||(Zd=zS(FL,jL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Yr)}}})),Zd}async function qu(t,e){const n=$h(t),r=(await Mm()).transaction(Yr,"readwrite"),s=r.objectStore(Yr),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&sb(t,e.fid),e}async function ab(t){const e=$h(t),i=(await Mm()).transaction(Yr,"readwrite");await i.objectStore(Yr).delete(e),await i.done}async function Wh(t,e){const n=$h(t),r=(await Mm()).transaction(Yr,"readwrite"),s=r.objectStore(Yr),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&sb(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(t){let e;const n=await Wh(t.appConfig,i=>{const r=UL(i),s=BL(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Vp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function UL(t){const e=t||{fid:DL(),registrationStatus:0};return lb(e)}function BL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Qr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=zL(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$L(t)}:{installationEntry:e}}async function zL(t,e){try{const n=await PL(t,e);return qu(t.appConfig,n)}catch(n){throw XI(n)&&n.customData.serverCode===409?await ab(t.appConfig):await qu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function $L(t){let e=await D0(t.appConfig);for(;e.registrationStatus===1;)await ib(100),e=await D0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Om(t);return i||n}return e}function D0(t){return Wh(t,e=>{if(!e)throw Qr.create("installation-not-found");return lb(e)})}function lb(t){return WL(t)?{fid:t.fid,registrationStatus:0}:t}function WL(t){return t.registrationStatus===1&&t.registrationTime+GI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL({appConfig:t,heartbeatServiceProvider:e},n){const i=qL(t,n),r=kL(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:QI,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await nb(()=>fetch(i,a));if(l.ok){const c=await l.json();return ZI(c)}else throw await eb("Generate Auth Token",l)}function qL(t,{fid:e}){return`${JI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(t,e=!1){let n;const i=await Wh(t.appConfig,s=>{if(!cb(s))throw Qr.create("not-registered");const o=s.authToken;if(!e&&QL(o))return s;if(o.requestStatus===1)return n=KL(t,e),s;{if(!navigator.onLine)throw Qr.create("app-offline");const a=XL(s);return n=GL(t,a),a}});return n?await n:i.authToken}async function KL(t,e){let n=await M0(t.appConfig);for(;n.authToken.requestStatus===1;)await ib(100),n=await M0(t.appConfig);const i=n.authToken;return i.requestStatus===0?Lm(t,e):i}function M0(t){return Wh(t,e=>{if(!cb(e))throw Qr.create("not-registered");const n=e.authToken;return JL(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function GL(t,e){try{const n=await HL(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await qu(t.appConfig,i),n}catch(n){if(XI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ab(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await qu(t.appConfig,i)}throw n}}function cb(t){return t!==void 0&&t.registrationStatus===2}function QL(t){return t.requestStatus===2&&!YL(t)}function YL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+SL}function XL(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function JL(t){return t.requestStatus===1&&t.requestTime+GI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(t){const e=t,{installationEntry:n,registrationPromise:i}=await Om(e);return i?i.catch(console.error):Lm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(t,e=!1){const n=t;return await tV(n),(await Lm(n,e)).token}async function tV(t){const{registrationPromise:e}=await Om(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){if(!t||!t.options)throw ef("App Configuration");if(!t.name)throw ef("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ef(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ef(t){return Qr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="installations",iV="installations-internal",rV=t=>{const e=t.getProvider("app").getImmediate(),n=nV(e),i=El(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},sV=t=>{const e=t.getProvider("app").getImmediate(),n=El(e,ub).getImmediate();return{getId:()=>ZL(n),getToken:r=>eV(n,r)}};function oV(){jn(new En(ub,rV,"PUBLIC")),jn(new En(iV,sV,"PRIVATE"))}oV();rn(KI,Dm);rn(KI,Dm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="analytics",aV="firebase_id",lV="origin",cV=60*1e3,uV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut=new Sh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},sn=new ns("analytics","Analytics",hV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){if(!t.startsWith(Vm)){const e=sn.create("invalid-gtag-resource",{gtagURL:t});return Ut.warn(e.message),""}return t}function hb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function fV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function pV(t,e){const n=fV("firebase-js-sdk-policy",{createScriptURL:dV}),i=document.createElement("script"),r=`${Vm}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function gV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function mV(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await hb(n)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){Ut.error(a)}t("config",r,s)}async function yV(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await hb(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Ut.error(s)}}function _V(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await yV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await mV(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Ut.error(a)}}return r}function vV(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=_V(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function wV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Vm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=30,TV=1e3;class SV{constructor(e={},n=TV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const db=new SV;function xV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function IV(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:xV(i)},s=uV.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw sn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function bV(t,e=db,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw sn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw sn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new AV;return setTimeout(async()=>{a.abort()},cV),fb({appId:i,apiKey:r,measurementId:s},o,a,e)}async function fb(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=db){var s;const{appId:o,measurementId:a}=t;try{await kV(i,e)}catch(l){if(a)return Ut.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await IV(t);return r.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!CV(c)){if(r.deleteThrottleMetadata(o),a)return Ut.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?wv(n,r.intervalMillis,EV):wv(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Ut.debug(`Calling attemptFetch again in ${h} millis`),fb(t,d,i,r)}}function kV(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function CV(t){if(!(t instanceof Sn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class AV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PV(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(){if(FS())try{await jS()}catch(t){return Ut.warn(sn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ut.warn(sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function NV(t,e,n,i,r,s,o){var a;const l=bV(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Ut.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Ut.error(g)),e.push(l);const c=RV().then(g=>{if(g)return i.getId()}),[h,d]=await Promise.all([l,c]);wV(s)||pV(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[lV]="firebase",f.update=!0,d!=null&&(f[aV]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.app=e}_delete(){return delete xa[this.app.options.appId],Promise.resolve()}}let xa={},L0=[];const V0={};let tf="dataLayer",MV="gtag",F0,pb,j0=!1;function OV(){const t=[];if(VS()&&t.push("This is a browser extension environment."),MP()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=sn.create("invalid-analytics-context",{errorInfo:e});Ut.warn(n.message)}}function LV(t,e,n){OV();const i=t.options.appId;if(!i)throw sn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ut.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw sn.create("no-api-key");if(xa[i]!=null)throw sn.create("already-exists",{id:i});if(!j0){gV(tf);const{wrappedGtag:s,gtagCore:o}=vV(xa,L0,V0,tf,MV);pb=s,F0=o,j0=!0}return xa[i]=NV(t,L0,V0,e,F0,tf,n),new DV(t)}function VV(t,e,n,i){t=Xe(t),PV(pb,xa[t.app.options.appId],e,n,i).catch(r=>Ut.error(r))}const U0="@firebase/analytics",B0="0.10.8";function FV(){jn(new En(O0,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return LV(i,r,n)},"PUBLIC")),jn(new En("analytics-internal",t,"PRIVATE")),rn(U0,B0),rn(U0,B0,"esm2017");function t(e){try{const n=e.getProvider(O0).getImmediate();return{logEvent:(i,r,s)=>VV(n,i,r,s)}}catch(n){throw sn.create("interop-component-reg-failed",{reason:n})}}}FV();const jV={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},gb=$S(jV),$o=dM(gb),ro=sL(gb),mb=O.createContext(null);function UV({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{const l=eD($o,c=>{n(c),r(!1)});return()=>l()},[]);const a=O.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,c){o(null);try{return(await YN($o,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,c){o(null);try{return(await XN($o,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await tD($o)},async resetPassword(l){o(null);try{await QN($o,l)}catch(c){throw o((c==null?void 0:c.message)||"Failed to send reset email."),c}}}),[e,i,s]);return y.jsx(mb.Provider,{value:a,children:t})}function yi(){return O.useContext(mb)}function BV(){const{user:t,logout:e}=yi(),n=ts();async function i(){await e(),n("/dashboard")}return y.jsx("div",{className:"nav",children:y.jsxs("div",{className:"nav-inner",children:[y.jsxs("div",{className:"brand",children:[y.jsx("div",{className:"badge"}),y.jsxs("div",{children:[y.jsx("h1",{children:"Body Recomposition Tracker"}),y.jsx("div",{className:"small",children:"Trend-first logging: weight , strength /"})]})]}),y.jsxs("div",{className:"nav-links",children:[y.jsxs("div",{className:"nav-tabs",children:[y.jsx(hs,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),y.jsx(hs,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&y.jsx(hs,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&y.jsx(hs,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),y.jsx("div",{className:"nav-actions",children:t?y.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):y.jsxs(y.Fragment,{children:[y.jsx(hs,{to:"/login",className:"btn",children:"Log in"}),y.jsx(hs,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function z0({children:t}){const{user:e,initializing:n}=yi();return n?y.jsx("div",{className:"panel",children:y.jsx("div",{className:"muted",children:"Loading"})}):e?t:y.jsx(up,{to:"/login",replace:!0})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Nl(t){return t+.5|0}const Vi=(t,e,n)=>Math.max(Math.min(t,n),e);function oa(t){return Vi(Nl(t*2.55),0,255)}function Xi(t){return Vi(Nl(t*255),0,255)}function Qn(t){return Vi(Nl(t/2.55)/100,0,1)}function $0(t){return Vi(Nl(t*100),0,100)}const Yt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fp=[..."0123456789ABCDEF"],zV=t=>Fp[t&15],$V=t=>Fp[(t&240)>>4]+Fp[t&15],wc=t=>(t&240)>>4===(t&15),WV=t=>wc(t.r)&&wc(t.g)&&wc(t.b)&&wc(t.a);function HV(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Yt[t[1]]*17,g:255&Yt[t[2]]*17,b:255&Yt[t[3]]*17,a:e===5?Yt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Yt[t[1]]<<4|Yt[t[2]],g:Yt[t[3]]<<4|Yt[t[4]],b:Yt[t[5]]<<4|Yt[t[6]],a:e===9?Yt[t[7]]<<4|Yt[t[8]]:255})),n}const qV=(t,e)=>t<255?e(t):"";function KV(t){var e=WV(t)?zV:$V;return t?"#"+e(t.r)+e(t.g)+e(t.b)+qV(t.a,e):void 0}const GV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yb(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function QV(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function YV(t,e,n){const i=yb(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function XV(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Fm(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=XV(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function jm(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Xi)}function Um(t,e,n){return jm(yb,t,e,n)}function JV(t,e,n){return jm(YV,t,e,n)}function ZV(t,e,n){return jm(QV,t,e,n)}function _b(t){return(t%360+360)%360}function eF(t){const e=GV.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?oa(+e[5]):Xi(+e[5]));const r=_b(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=JV(r,s,o):e[1]==="hsv"?i=ZV(r,s,o):i=Um(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function tF(t,e){var n=Fm(t);n[0]=_b(n[0]+e),n=Um(n),t.r=n[0],t.g=n[1],t.b=n[2]}function nF(t){if(!t)return;const e=Fm(t),n=e[0],i=$0(e[1]),r=$0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Qn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const W0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},H0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function iF(){const t={},e=Object.keys(H0),n=Object.keys(W0);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,W0[s]);s=parseInt(H0[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Ec;function rF(t){Ec||(Ec=iF(),Ec.transparent=[0,0,0,0]);const e=Ec[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const sF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function oF(t){const e=sF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?oa(o):Vi(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?oa(i):Vi(i,0,255)),r=255&(e[4]?oa(r):Vi(r,0,255)),s=255&(e[6]?oa(s):Vi(s,0,255)),{r:i,g:r,b:s,a:n}}}function aF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Qn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const nf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ds=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function lF(t,e,n){const i=ds(Qn(t.r)),r=ds(Qn(t.g)),s=ds(Qn(t.b));return{r:Xi(nf(i+n*(ds(Qn(e.r))-i))),g:Xi(nf(r+n*(ds(Qn(e.g))-r))),b:Xi(nf(s+n*(ds(Qn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Tc(t,e,n){if(t){let i=Fm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Um(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function vb(t,e){return t&&Object.assign(e||{},t)}function q0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Xi(t[3]))):(e=vb(t,{r:0,g:0,b:0,a:1}),e.a=Xi(e.a)),e}function cF(t){return t.charAt(0)==="r"?oF(t):eF(t)}class cl{constructor(e){if(e instanceof cl)return e;const n=typeof e;let i;n==="object"?i=q0(e):n==="string"&&(i=HV(e)||rF(e)||cF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=vb(this._rgb);return e&&(e.a=Qn(e.a)),e}set rgb(e){this._rgb=q0(e)}rgbString(){return this._valid?aF(this._rgb):void 0}hexString(){return this._valid?KV(this._rgb):void 0}hslString(){return this._valid?nF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=lF(this._rgb,e._rgb,n)),this}clone(){return new cl(this.rgb)}alpha(e){return this._rgb.a=Xi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Nl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Tc(this._rgb,2,e),this}darken(e){return Tc(this._rgb,2,-e),this}saturate(e){return Tc(this._rgb,1,e),this}desaturate(e){return Tc(this._rgb,1,-e),this}rotate(e){return tF(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Wn(){}const uF=(()=>{let t=0;return()=>t++})();function Ie(t){return t==null}function et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ln(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function In(t,e){return ln(t)?t:e}function de(t,e){return typeof t>"u"?e:t}const hF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ce(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function _e(t,e,n,i){let r,s,o;if(et(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(me(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Ku(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Gu(t){if(et(t))return t.map(Gu);if(me(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Gu(t[n[r]]);return e}return t}function wb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function dF(t,e,n,i){if(!wb(t))return;const r=e[t],s=n[t];me(r)&&me(s)?ul(r,s,i):e[t]=Gu(s)}function ul(t,e,n){const i=et(e)?e:[e],r=i.length;if(!me(t))return t;n=n||{};const s=n.merger||dF;let o;for(let a=0;a<r;++a){if(o=i[a],!me(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Ia(t,e){return ul(t,e,{merger:fF})}function fF(t,e,n){if(!wb(t))return;const i=e[t],r=n[t];me(i)&&me(r)?Ia(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Gu(r))}const K0={"":t=>t,x:t=>t.x,y:t=>t.y};function pF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function gF(t){const e=pF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Qu(t,e){return(K0[e]||(K0[e]=gF(e)))(t)}function Bm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Yu=t=>typeof t<"u",ir=t=>typeof t=="function",G0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function mF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const nt=Math.PI,Fn=2*nt,yF=Fn+nt,Xu=Number.POSITIVE_INFINITY,_F=nt/180,mn=nt/2,yr=nt/4,Q0=nt*2/3,Eb=Math.log10,so=Math.sign;function ba(t,e,n){return Math.abs(t-e)<n}function Y0(t){const e=Math.round(t);t=ba(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Eb(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function vF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function wF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function hl(t){return!wF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function EF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function TF(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Nr(t){return t*(nt/180)}function SF(t){return t*(180/nt)}function X0(t){if(!ln(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function xF(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*nt&&(s+=Fn),{angle:s,distance:r}}function jp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function IF(t,e){return(t-e+yF)%Fn-nt}function xi(t){return(t%Fn+Fn)%Fn}function Tb(t,e,n,i){const r=xi(t),s=xi(e),o=xi(n),a=xi(s-r),l=xi(o-r),c=xi(r-s),h=xi(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function en(t,e,n){return Math.max(e,Math.min(n,t))}function bF(t){return en(t,-32768,32767)}function aa(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function zm(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Dr=(t,e,n,i)=>zm(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),kF=(t,e,n)=>zm(t,n,i=>t[i][e]>=n);function CF(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Sb=["push","pop","shift","splice","unshift"];function AF(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Sb.forEach(n=>{const i="_onData"+Bm(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function J0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Sb.forEach(s=>{delete t[s]}),delete t._chartjs)}function PF(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const xb=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Ib(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,xb.call(window,()=>{i=!1,t.apply(e,n)}))}}function RF(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const $m=t=>t==="start"?"left":t==="end"?"right":"center",yt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,NF=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function DF(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:g,maxDefined:_}=o.getUserBounds();if(g){if(r=Math.min(Dr(l,h,d).lo,n?i:Dr(e,h,o.getPixelForValue(d)).lo),c){const w=l.slice(0,r+1).reverse().findIndex(T=>!Ie(T[a.axis]));r-=Math.max(0,w)}r=en(r,0,i-1)}if(_){let w=Math.max(Dr(l,o.axis,f,!0).hi+1,n?0:Dr(e,h,o.getPixelForValue(f),!0).hi+1);if(c){const T=l.slice(w-1).findIndex(E=>!Ie(E[a.axis]));w+=Math.max(0,T)}s=en(w,r,i)-r}else s=i-r}return{start:r,count:s}}function MF(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Sc=t=>t===0||t===1,Z0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Fn/n)),ew=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Fn/n)+1,ka={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*mn)+1,easeOutSine:t=>Math.sin(t*mn),easeInOutSine:t=>-.5*(Math.cos(nt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Sc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Sc(t)?t:Z0(t,.075,.3),easeOutElastic:t=>Sc(t)?t:ew(t,.075,.3),easeInOutElastic(t){return Sc(t)?t:t<.5?.5*Z0(t*2,.1125,.45):.5+.5*ew(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ka.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ka.easeInBounce(t*2)*.5:ka.easeOutBounce(t*2-1)*.5+.5};function Wm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function tw(t){return Wm(t)?t:new cl(t)}function rf(t){return Wm(t)?t:new cl(t).saturate(.5).darken(.1).hexString()}const OF=["x","y","borderWidth","radius","tension"],LF=["color","borderColor","backgroundColor"];function VF(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:LF},numbers:{type:"number",properties:OF}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function FF(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nw=new Map;function jF(t,e){e=e||{};const n=t+JSON.stringify(e);let i=nw.get(n);return i||(i=new Intl.NumberFormat(t,e),nw.set(n,i)),i}function bb(t,e,n){return jF(e,n).format(t)}const UF={values(t){return et(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=BF(t,n)}const o=Eb(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),bb(t,i,l)}};function BF(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var kb={formatters:UF};function zF(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Xr=Object.create(null),Up=Object.create(null);function Ca(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function sf(t,e,n){return typeof e=="string"?ul(Ca(t,e),n):ul(Ca(t,""),e)}class $F{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>rf(r.backgroundColor),this.hoverBorderColor=(i,r)=>rf(r.borderColor),this.hoverColor=(i,r)=>rf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return sf(this,e,n)}get(e){return Ca(this,e)}describe(e,n){return sf(Up,e,n)}override(e,n){return sf(Xr,e,n)}route(e,n,i,r){const s=Ca(this,e),o=Ca(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return me(l)?Object.assign({},c,l):de(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var $e=new $F({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[VF,FF,zF]);function WF(t){return!t||Ie(t.size)||Ie(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function iw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function _r(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function rw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Bp(t,e,n,i){Cb(t,e,n,i,null)}function Cb(t,e,n,i,r){let s,o,a,l,c,h,d,f;const g=e.pointStyle,_=e.rotation,w=e.radius;let T=(_||0)*_F;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(T),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,i,r/2,w,0,0,Fn):t.arc(n,i,w,0,Fn),t.closePath();break;case"triangle":h=r?r/2:w,t.moveTo(n+Math.sin(T)*h,i-Math.cos(T)*w),T+=Q0,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*w),T+=Q0,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*w),t.closePath();break;case"rectRounded":c=w*.516,l=w-c,o=Math.cos(T+yr)*l,d=Math.cos(T+yr)*(r?r/2-c:l),a=Math.sin(T+yr)*l,f=Math.sin(T+yr)*(r?r/2-c:l),t.arc(n-d,i-a,c,T-nt,T-mn),t.arc(n+f,i-o,c,T-mn,T),t.arc(n+d,i+a,c,T,T+mn),t.arc(n-f,i+o,c,T+mn,T+nt),t.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*w,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}T+=yr;case"rectRot":d=Math.cos(T)*(r?r/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":T+=yr;case"cross":d=Math.cos(T)*(r?r/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(T)*(r?r/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),T+=yr,d=Math.cos(T)*(r?r/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(T)*w,a=Math.sin(T)*w,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(T)*(r?r/2:w),i+Math.sin(T)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function dl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Hm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function qm(t){t.restore()}function HF(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function qF(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function KF(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ie(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function GF(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function QF(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function fl(t,e,n,i,r,s={}){const o=et(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,KF(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&QF(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ie(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),GF(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function zp(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*nt,nt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,nt,mn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,mn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-mn,!0),t.lineTo(n+o.topLeft,i)}const YF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,XF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function JF(t,e){const n=(""+t).match(YF);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const ZF=t=>+t||0;function Ab(t,e){const n={},i=me(e),r=i?Object.keys(e):e,s=me(t)?i?o=>de(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=ZF(s(o));return n}function ej(t){return Ab(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Aa(t){return Ab(t,["topLeft","topRight","bottomLeft","bottomRight"])}function cn(t){const e=ej(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Et(t,e){t=t||{},e=e||$e.font;let n=de(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=de(t.style,e.style);i&&!(""+i).match(XF)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:de(t.family,e.family),lineHeight:JF(de(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:de(t.weight,e.weight),string:""};return r.string=WF(r),r}function xc(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function tj(t,e,n){const{min:i,max:r}=t,s=hF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ss(t,e){return Object.assign(Object.create(t),e)}function Km(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Db("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Km([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Rb(a,l,()=>cj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return ow(a).includes(l)},ownKeys(a){return ow(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function oo(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Pb(t,i),setContext:s=>oo(t,s,n,i),override:s=>oo(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return Rb(s,o,()=>ij(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function Pb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ir(n)?n:()=>n,isIndexable:ir(i)?i:()=>i}}const nj=(t,e)=>t?t+Bm(e):e,Gm=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Rb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function ij(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return ir(a)&&o.isScriptable(e)&&(a=rj(e,a,t,n)),et(a)&&a.length&&(a=sj(e,a,t,o.isIndexable)),Gm(e,a)&&(a=oo(a,r,s&&s[e],o)),a}function rj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),Gm(t,l)&&(l=Qm(r._scopes,r,t,l)),l}function sj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(me(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Qm(c,r,t,h);e.push(oo(d,s,o&&o[t],a))}}return e}function Nb(t,e,n){return ir(t)?t(e,n):t}const oj=(t,e)=>t===!0?e:typeof t=="string"?Qu(e,t):void 0;function aj(t,e,n,i,r){for(const s of e){const o=oj(n,s);if(o){t.add(o);const a=Nb(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Qm(t,e,n,i){const r=e._rootScopes,s=Nb(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=sw(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=sw(a,o,s,l,i),l===null)?!1:Km(Array.from(a),[""],r,s,()=>lj(e,n,i))}function sw(t,e,n,i,r){for(;n;)n=aj(t,e,n,i,r);return n}function lj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return et(r)&&me(n)?n:r||{}}function cj(t,e,n,i){let r;for(const s of e)if(r=Db(nj(s,t),n),typeof r<"u")return Gm(t,r)?Qm(n,i,t,r):r}function Db(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function ow(t){let e=t._keys;return e||(e=t._keys=uj(t._scopes)),e}function uj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const hj=Number.EPSILON||1e-14,ao=(t,e)=>e<t.length&&!t[e].skip&&t[e],Mb=t=>t==="x"?"y":"x";function dj(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=jp(s,r),l=jp(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function fj(t,e,n){const i=t.length;let r,s,o,a,l,c=ao(t,0);for(let h=0;h<i-1;++h)if(l=c,c=ao(t,h+1),!(!l||!c)){if(ba(e[h],0,hj)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function pj(t,e,n="x"){const i=Mb(n),r=t.length;let s,o,a,l=ao(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=ao(t,c+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[c])}}function gj(t,e="x"){const n=Mb(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=ao(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=ao(t,o+1),!!l){if(c){const h=c[e]-l[e];r[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?so(r[o-1])!==so(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}fj(t,r,s),pj(t,s,e)}function Ic(t,e,n){return Math.max(Math.min(t,n),e)}function mj(t,e){let n,i,r,s,o,a=dl(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&dl(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Ic(r.cp1x,e.left,e.right),r.cp1y=Ic(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Ic(r.cp2x,e.left,e.right),r.cp2y=Ic(r.cp2y,e.top,e.bottom)))}function yj(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")gj(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=dj(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&mj(t,n)}function Ym(){return typeof window<"u"&&typeof document<"u"}function Xm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ju(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Hh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function _j(t,e){return Hh(t).getPropertyValue(e)}const vj=["top","right","bottom","left"];function Fr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=vj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const wj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Ej(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(wj(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ir(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Hh(n),s=r.boxSizing==="border-box",o=Fr(r,"padding"),a=Fr(r,"border","width"),{x:l,y:c,box:h}=Ej(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:_}=e;return s&&(g-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/g*n.width/i),y:Math.round((c-f)/_*n.height/i)}}function Tj(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Xm(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Hh(s),l=Fr(a,"border","width"),c=Fr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Ju(a.maxWidth,s,"clientWidth"),r=Ju(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Xu,maxHeight:r||Xu}}const Fi=t=>Math.round(t*10)/10;function Sj(t,e,n,i){const r=Hh(t),s=Fr(r,"margin"),o=Ju(r.maxWidth,t,"clientWidth")||Xu,a=Ju(r.maxHeight,t,"clientHeight")||Xu,l=Tj(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const f=Fr(r,"border","width"),g=Fr(r,"padding");c-=g.width+f.width,h-=g.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=Fi(Math.min(c,o,l.maxWidth)),h=Fi(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Fi(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Fi(Math.floor(h*i))),{width:c,height:h}}function aw(t,e,n){const i=e||1,r=Fi(t.height*i),s=Fi(t.width*i);t.height=Fi(t.height),t.width=Fi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const xj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ym()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function lw(t,e){const n=_j(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function br(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Ij(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function bj(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=br(t,r,n),a=br(r,s,n),l=br(s,e,n),c=br(o,a,n),h=br(a,l,n);return br(c,h,n)}const kj=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Cj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Bs(t,e,n){return t?kj(e,n):Cj()}function Ob(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Lb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Vb(t){return t==="angle"?{between:Tb,compare:IF,normalize:xi}:{between:aa,compare:(e,n)=>e-n,normalize:e=>e}}function cw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function Aj(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=Vb(i),l=e.length;let{start:c,end:h,loop:d}=t,f,g;if(d){for(c+=l,h+=l,f=0,g=l;f<g&&o(a(e[c%l][i]),r,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function Pj(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=Vb(i),{start:h,end:d,loop:f,style:g}=Aj(t,e,n),_=[];let w=!1,T=null,E,S,k;const A=()=>l(r,k,E)&&a(r,k)!==0,M=()=>a(s,E)===0||l(s,k,E),D=()=>w||A(),x=()=>!w||M();for(let v=h,b=h;v<=d;++v)S=e[v%o],!S.skip&&(E=c(S[i]),E!==k&&(w=l(E,r,s),T===null&&D()&&(T=a(E,r)===0?v:b),T!==null&&x()&&(_.push(cw({start:T,end:v,loop:f,count:o,style:g})),T=null),b=v,k=E));return T!==null&&_.push(cw({start:T,end:d,loop:f,count:o,style:g})),_}function Rj(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=Pj(i[r],t.points,e);s.length&&n.push(...s)}return n}function Nj(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Dj(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function Mj(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=Nj(n,r,s,i);if(i===!0)return uw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return uw(t,Dj(n,o,l,c),n,e)}function uw(t,e,n,i){return!i||!i.setContext||!n?e:Oj(t,e,n,i)}function Oj(t,e,n,i){const r=t._chart.getContext(),s=hw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function g(_,w,T,E){const S=a?-1:1;if(_!==w){for(_+=l;n[_%l].skip;)_-=S;for(;n[w%l].skip;)w+=S;_%l!==w%l&&(c.push({start:_%l,end:w%l,loop:T,style:E}),h=E,d=w%l)}}for(const _ of e){d=a?d:_.start;let w=n[d%l],T;for(f=d+1;f<=_.end;f++){const E=n[f%l];T=hw(i.setContext(ss(r,{type:"segment",p0:w,p1:E,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),Lj(T,h)&&g(d,f-1,_.loop,h),w=E,h=T}d<f-1&&g(d,f-1,_.loop,h)}return c}function hw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Lj(t,e){if(!e)return!1;const n=[],i=function(r,s){return Wm(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function bc(t,e,n){return t.options.clip?t[n]:e[n]}function Vj(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:bc(n,e,"left"),right:bc(n,e,"right"),top:bc(i,e,"top"),bottom:bc(i,e,"bottom")}:e}function Fj(t,e){const n=e._clip;if(n.disabled)return!1;const i=Vj(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class jj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=xb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Hn=new jj;const dw="transparent",Uj={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=tw(t||dw),r=i.valid&&tw(e||dw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Bj{constructor(e,n,i,r){const s=n[i];r=xc([e.to,r,s,e.from]);const o=xc([e.from,s,r]);this._active=!0,this._fn=e.fn||Uj[e.type||typeof o],this._easing=ka[e.easing]||ka.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=xc([e.to,n,r,e.from]),this._from=xc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class Fb{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!me(e))return;const n=Object.keys($e.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!me(s))return;const o={};for(const a of n)o[a]=s[a];(et(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=$j(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&zj(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new Bj(f,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Hn.add(this._chart,i),!0}}function zj(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function $j(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function fw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function Wj(t,e,n){if(n===!1)return!1;const i=fw(t,n),r=fw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Hj(t){let e,n,i,r;return me(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function jb(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function pw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],ln(c)&&(s||e===0||so(e)===so(c))&&(e+=c)}return!h&&!i.all?0:e}function qj(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function of(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Kj(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Gj(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Qj(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function gw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function mw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=Kj(s,o,i),d=e.length;let f;for(let g=0;g<d;++g){const _=e[g],{[l]:w,[c]:T}=_,E=_._stacks||(_._stacks={});f=E[c]=Qj(r,h,w),f[a]=T,f._top=gw(f,o,!0,i.type),f._bottom=gw(f,o,!1,i.type);const S=f._visualValues||(f._visualValues={});S[a]=T}}function af(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function Yj(t,e){return ss(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Xj(t,e,n){return ss(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Wo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const lf=t=>t==="reset"||t==="none",yw=(t,e)=>e?t:Object.assign({},t),Jj=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:jb(n,!0),values:null};class Pa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=of(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Wo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,g,_)=>d==="x"?f:d==="r"?_:g,s=n.xAxisID=de(i.xAxisID,af(e,"x")),o=n.yAxisID=de(i.yAxisID,af(e,"y")),a=n.rAxisID=de(i.rAxisID,af(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&J0(this._data,this),e._stacked&&Wo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(me(n)){const r=this._cachedMeta;this._data=qj(n,r)}else if(i!==n){if(i){J0(i,this);const r=this._cachedMeta;Wo(r),r._parsed=[]}n&&Object.isExtensible(n)&&AF(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=of(n.vScale,n),n.stack!==i.stack&&(r=!0,Wo(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(mw(this,n._parsed),n._stacked=of(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{et(r[e])?f=this.parseArrayData(i,r,e,n):me(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const g=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(g()&&(l=!1),c=d);i._sorted=l}o&&mw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let f,g,_;for(f=0,g=r;f<g;++f)_=f+i,d[f]={[a]:h||s.parse(c[_],_),[l]:o.parse(n[_],_)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,f,g;for(h=0,d=r;h<d;++h)f=h+i,g=n[f],c[h]={x:s.parse(Qu(g,a),f),y:o.parse(Qu(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:jb(r,!0),values:n._stacks[e.axis]._visualValues};return pw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=pw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=Jj(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=Gj(a);let f,g;function _(){g=r[f];const w=g[a.axis];return!ln(g[e.axis])||h>w||d<w}for(f=0;f<o&&!(!_()&&(this.updateRangeFromParsed(c,e,g,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],ln(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Hj(de(this.options.clip,Wj(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Xj(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Yj(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Yu(i);if(a)return yw(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),g=Object.keys($e.elements[e]),_=()=>this.getContext(i,r,n),w=c.resolveNamedOptions(f,g,_,d);return w.$shared&&(w.$shared=l,s[o]=Object.freeze(yw(w,l))),w}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const c=new Fb(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||lf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){lf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!lf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Wo(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}oe(Pa,"defaults",{}),oe(Pa,"datasetElementType",null),oe(Pa,"dataElementType",null);class eu extends Pa{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=DF(n,r,o);this._drawStart=a,this._drawCount=l,MF(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,g=a.axis,{spanGaps:_,segment:w}=this.options,T=hl(_)?_:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||s||r==="none",S=n+i,k=e.length;let A=n>0&&this.getParsed(n-1);for(let M=0;M<k;++M){const D=e[M],x=E?D:{};if(M<n||M>=S){x.skip=!0;continue}const v=this.getParsed(M),b=Ie(v[g]),C=x[f]=o.getPixelForValue(v[f],M),P=x[g]=s||b?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,v,l):v[g],M);x.skip=isNaN(C)||isNaN(P)||b,x.stop=M>0&&Math.abs(v[f]-A[f])>T,w&&(x.parsed=v,x.raw=c.data[M]),d&&(x.options=h||this.resolveDataElementOptions(M,D.active?"active":r)),E||this.updateElement(D,M,x,r),A=v}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}oe(eu,"id","line"),oe(eu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),oe(eu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function vr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Jm{constructor(e){oe(this,"options");this.options=e||{}}static override(e){Object.assign(Jm.prototype,e)}init(){}formats(){return vr()}parse(){return vr()}format(){return vr()}add(){return vr()}diff(){return vr()}startOf(){return vr()}endOf(){return vr()}}var Zj={_date:Jm};function e4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?kF:Dr;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(s,e,n-d),g=c(s,e,n+d);return{lo:f.lo,hi:g.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,g=f.slice(0,h.lo+1).reverse().findIndex(w=>!Ie(w[d.axis]));h.lo-=Math.max(0,g);const _=f.slice(h.hi).findIndex(w=>!Ie(w[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:s.length-1}}function qh(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=e4(s[a],e,o,r);for(let g=d;g<=f;++g){const _=h[g];_.skip||i(_,c,g)}}}function t4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function cf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||qh(t,n,e,function(a,l,c){!r&&!dl(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function n4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=xF(o,{x:e.x,y:e.y});Tb(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return qh(t,n,e,s),r}function i4(t,e,n,i,r,s){let o=[];const a=t4(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const g=h.inRange(e.x,e.y,r);if(i&&!g)return;const _=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(_))&&!g)return;const T=a(e,_);T<l?(o=[{element:h,datasetIndex:d,index:f}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:f})}return qh(t,n,e,c),o}function uf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?n4(t,e,n,r):i4(t,e,n,i,r,s)}function _w(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return qh(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var r4={modes:{index(t,e,n,i){const r=Ir(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?cf(t,r,s,i,o):uf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Ir(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?cf(t,r,s,i,o):uf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Ir(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return cf(t,r,s,i,o)},nearest(t,e,n,i){const r=Ir(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return uf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Ir(e,t);return _w(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Ir(e,t);return _w(t,r,"y",n.intersect,i)}}};const Ub=["left","top","right","bottom"];function Ho(t,e){return t.filter(n=>n.pos===e)}function vw(t,e){return t.filter(n=>Ub.indexOf(n.pos)===-1&&n.box.axis===e)}function qo(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function s4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function o4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!Ub.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function a4(t,e){const n=o4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function l4(t){const e=s4(t),n=qo(e.filter(c=>c.box.fullSize),!0),i=qo(Ho(e,"left"),!0),r=qo(Ho(e,"right")),s=qo(Ho(e,"top"),!0),o=qo(Ho(e,"bottom")),a=vw(e,"x"),l=vw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Ho(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function ww(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Bb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function c4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!me(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&Bb(o,s.getPadding());const a=Math.max(0,e.outerWidth-ww(o,t,"left","right")),l=Math.max(0,e.outerHeight-ww(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function u4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function h4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function la(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,h4(a.horizontal,e));const{same:d,other:f}=c4(e,n,a,i);c|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return c&&la(r,e,n,i)||h}function kc(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Ew(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;Yu(c.start)&&(o=c.start),l.fullSize?kc(l,r.left,o,n.outerWidth-r.right-r.left,f):kc(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;Yu(c.start)&&(s=c.start),l.fullSize?kc(l,s,r.top,f,n.outerHeight-r.bottom-r.top):kc(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var tn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=cn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=l4(t.boxes),l=a.vertical,c=a.horizontal;_e(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,T)=>T.box.options&&T.box.options.display===!1?w:w+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);Bb(f,cn(i));const g=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),_=a4(l.concat(c),d);la(a.fullSize,g,d,_),la(l,g,d,_),la(c,g,d,_)&&la(l,g,d,_),u4(g),Ew(a.leftAndTop,g,d,_),g.x+=g.w,g.y+=g.h,Ew(a.rightAndBottom,g,d,_),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},_e(a.chartArea,w=>{const T=w.box;Object.assign(T,t.chartArea),T.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class zb{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class d4 extends zb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const tu="$chartjs",f4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Tw=t=>t===null||t==="";function p4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[tu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Tw(r)){const s=lw(t,"width");s!==void 0&&(t.width=s)}if(Tw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=lw(t,"height");s!==void 0&&(t.height=s)}return t}const $b=xj?{passive:!0}:!1;function g4(t,e,n){t&&t.addEventListener(e,n,$b)}function m4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,$b)}function y4(t,e){const n=f4[t.type]||t.type,{x:i,y:r}=Ir(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Zu(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function _4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Zu(a.addedNodes,i),o=o&&!Zu(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function v4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Zu(a.removedNodes,i),o=o&&!Zu(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const pl=new Map;let Sw=0;function Wb(){const t=window.devicePixelRatio;t!==Sw&&(Sw=t,pl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function w4(t,e){pl.size||window.addEventListener("resize",Wb),pl.set(t,e)}function E4(t){pl.delete(t),pl.size||window.removeEventListener("resize",Wb)}function T4(t,e,n){const i=t.canvas,r=i&&Xm(i);if(!r)return;const s=Ib((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),w4(t,s),o}function hf(t,e,n){n&&n.disconnect(),e==="resize"&&E4(t)}function S4(t,e,n){const i=t.canvas,r=Ib(s=>{t.ctx!==null&&n(y4(s,t))},t);return g4(i,e,r),r}class x4 extends zb{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(p4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[tu])return!1;const i=n[tu].initial;["height","width"].forEach(s=>{const o=i[s];Ie(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[tu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:_4,detach:v4,resize:T4}[n]||S4;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:hf,detach:hf,resize:hf}[n]||m4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return Sj(e,n,i,r)}isAttached(e){const n=e&&Xm(e);return!!(n&&n.isConnected)}}function I4(t){return!Ym()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?d4:x4}class di{constructor(){oe(this,"x");oe(this,"y");oe(this,"active",!1);oe(this,"options");oe(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return hl(this.x)&&hl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}oe(di,"defaults",{}),oe(di,"defaultRoutes");function b4(t,e){const n=t.options.ticks,i=k4(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?A4(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return P4(e,c,s,o/r),c;const h=C4(s,e,r);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(Cc(e,c,h,Ie(g)?0:a-g,a),d=0,f=o-1;d<f;d++)Cc(e,c,h,s[d],s[d+1]);return Cc(e,c,h,l,Ie(g)?e.length:l+g),c}return Cc(e,c,h),c}function k4(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function C4(t,e,n){const i=R4(t),r=e.length/n;if(!i)return Math.max(r,1);const s=vF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function A4(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function P4(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Cc(t,e,n,i,r){const s=de(i,0),o=Math.min(de(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function R4(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const N4=t=>t==="left"?"right":t==="right"?"left":t,xw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Iw=(t,e)=>Math.min(e||t,t);function bw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function D4(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function M4(t,e){_e(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Ko(t){return t.drawTicks?t.tickLength:0}function kw(t,e){if(!t.display)return 0;const n=Et(t.font,e),i=cn(t.padding);return(et(t.text)?t.text.length:1)*n.lineHeight+i.height}function O4(t,e){return ss(t,{scale:e,type:"scale"})}function L4(t,e,n){return ss(t,{tick:n,index:e,type:"tick"})}function V4(t,e,n){let i=$m(t);return(n&&e!=="right"||!n&&e==="right")&&(i=N4(i)),i}function F4(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,g,_;const w=o-r,T=a-s;if(t.isHorizontal()){if(g=yt(i,s,a),me(n)){const E=Object.keys(n)[0],S=n[E];_=h[E].getPixelForValue(S)+w-e}else n==="center"?_=(c.bottom+c.top)/2+w-e:_=xw(t,n,e);f=a-s}else{if(me(n)){const E=Object.keys(n)[0],S=n[E];g=h[E].getPixelForValue(S)-T+e}else n==="center"?g=(c.left+c.right)/2-T+e:g=xw(t,n,e);_=yt(i,o,r),d=n==="left"?-mn:mn}return{titleX:g,titleY:_,maxWidth:f,rotation:d}}class vo extends di{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=In(e,Number.POSITIVE_INFINITY),n=In(n,Number.NEGATIVE_INFINITY),i=In(i,Number.POSITIVE_INFINITY),r=In(r,Number.NEGATIVE_INFINITY),{min:In(e,i),max:In(n,r),minDefined:ln(e),maxDefined:ln(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:In(n,In(i,n)),max:In(i,In(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ce(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?bw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=b4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ce(this.options.afterUpdate,[this])}beforeSetDimensions(){Ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ce(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ce(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Ce(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Iw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=en(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),d+6>a&&(a=g/(i-(e.offset?.5:1)),l=this.maxHeight-Ko(e.grid)-n.padding-kw(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=SF(Math.min(Math.asin(en((h.highest.height+6)/a,-1,1)),Math.asin(en(l/c,-1,1))-Math.asin(en(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ce(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=kw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ko(s)+l):(e.height=this.maxHeight,e.width=Ko(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),g=i.padding*2,_=Nr(this.labelRotation),w=Math.cos(_),T=Math.sin(_);if(a){const E=i.mirror?0:T*d.width+w*f.height;e.height=Math.min(this.maxHeight,e.height+E+g)}else{const E=i.mirror?0:w*d.width+T*f.height;e.width=Math.min(this.maxWidth,e.width+E+g)}this._calculatePadding(c,h,T,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=r*e.width,g=i*n.height):(f=i*e.height,g=r*n.width):s==="start"?g=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ce(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Ie(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=bw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Iw(n,i));let c=0,h=0,d,f,g,_,w,T,E,S,k,A,M;for(d=0;d<n;d+=l){if(_=e[d].label,w=this._resolveTickFontOptions(d),r.font=T=w.string,E=s[T]=s[T]||{data:{},gc:[]},S=w.lineHeight,k=A=0,!Ie(_)&&!et(_))k=iw(r,E.data,E.gc,k,_),A=S;else if(et(_))for(f=0,g=_.length;f<g;++f)M=_[f],!Ie(M)&&!et(M)&&(k=iw(r,E.data,E.gc,k,M),A+=S);o.push(k),a.push(A),c=Math.max(k,c),h=Math.max(A,h)}M4(s,n);const D=o.indexOf(c),x=a.indexOf(h),v=b=>({width:o[b]||0,height:a[b]||0});return{first:v(0),last:v(n-1),widest:v(D),highest:v(x),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return bF(this._alignToPixels?_r(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=L4(this.getContext(),e,i))}return this.$context||(this.$context=O4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Nr(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Ko(s),g=[],_=a.setContext(this.getContext()),w=_.display?_.width:0,T=w/2,E=function(le){return _r(i,le,w)};let S,k,A,M,D,x,v,b,C,P,N,R;if(o==="top")S=E(this.bottom),x=this.bottom-f,b=S-T,P=E(e.top)+T,R=e.bottom;else if(o==="bottom")S=E(this.top),P=e.top,R=E(e.bottom)-T,x=S+T,b=this.top+f;else if(o==="left")S=E(this.right),D=this.right-f,v=S-T,C=E(e.left)+T,N=e.right;else if(o==="right")S=E(this.left),C=e.left,N=E(e.right)-T,D=S+T,v=this.left+f;else if(n==="x"){if(o==="center")S=E((e.top+e.bottom)/2+.5);else if(me(o)){const le=Object.keys(o)[0],se=o[le];S=E(this.chart.scales[le].getPixelForValue(se))}P=e.top,R=e.bottom,x=S+T,b=x+f}else if(n==="y"){if(o==="center")S=E((e.left+e.right)/2);else if(me(o)){const le=Object.keys(o)[0],se=o[le];S=E(this.chart.scales[le].getPixelForValue(se))}D=S-T,v=D-f,C=e.left,N=e.right}const Z=de(r.ticks.maxTicksLimit,d),Q=Math.max(1,Math.ceil(d/Z));for(k=0;k<d;k+=Q){const le=this.getContext(k),se=s.setContext(le),B=a.setContext(le),q=se.lineWidth,K=se.color,$=B.dash||[],J=B.dashOffset,ne=se.tickWidth,ye=se.tickColor,Ee=se.tickBorderDash||[],Te=se.tickBorderDashOffset;A=D4(this,k,l),A!==void 0&&(M=_r(i,A,q),c?D=v=C=N=M:x=b=P=R=M,g.push({tx1:D,ty1:x,tx2:v,ty2:b,x1:C,y1:P,x2:N,y2:R,width:q,color:K,borderDash:$,borderDashOffset:J,tickWidth:ne,tickColor:ye,tickBorderDash:Ee,tickBorderDashOffset:Te}))}return this._ticksLength=d,this._borderValue=S,g}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=Ko(i.grid),g=f+h,_=d?-h:g,w=-Nr(this.labelRotation),T=[];let E,S,k,A,M,D,x,v,b,C,P,N,R="middle";if(r==="top")D=this.bottom-_,x=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+_,x=this._getXAxisLabelAlignment();else if(r==="left"){const Q=this._getYAxisLabelAlignment(f);x=Q.textAlign,M=Q.x}else if(r==="right"){const Q=this._getYAxisLabelAlignment(f);x=Q.textAlign,M=Q.x}else if(n==="x"){if(r==="center")D=(e.top+e.bottom)/2+g;else if(me(r)){const Q=Object.keys(r)[0],le=r[Q];D=this.chart.scales[Q].getPixelForValue(le)+g}x=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-g;else if(me(r)){const Q=Object.keys(r)[0],le=r[Q];M=this.chart.scales[Q].getPixelForValue(le)}x=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const Z=this._getLabelSizes();for(E=0,S=a.length;E<S;++E){k=a[E],A=k.label;const Q=s.setContext(this.getContext(E));v=this.getPixelForTick(E)+s.labelOffset,b=this._resolveTickFontOptions(E),C=b.lineHeight,P=et(A)?A.length:1;const le=P/2,se=Q.color,B=Q.textStrokeColor,q=Q.textStrokeWidth;let K=x;o?(M=v,x==="inner"&&(E===S-1?K=this.options.reverse?"left":"right":E===0?K=this.options.reverse?"right":"left":K="center"),r==="top"?c==="near"||w!==0?N=-P*C+C/2:c==="center"?N=-Z.highest.height/2-le*C+C:N=-Z.highest.height+C/2:c==="near"||w!==0?N=C/2:c==="center"?N=Z.highest.height/2-le*C:N=Z.highest.height-P*C,d&&(N*=-1),w!==0&&!Q.showLabelBackdrop&&(M+=C/2*Math.sin(w))):(D=v,N=(1-P)*C/2);let $;if(Q.showLabelBackdrop){const J=cn(Q.backdropPadding),ne=Z.heights[E],ye=Z.widths[E];let Ee=N-J.top,Te=0-J.left;switch(R){case"middle":Ee-=ne/2;break;case"bottom":Ee-=ne;break}switch(x){case"center":Te-=ye/2;break;case"right":Te-=ye;break;case"inner":E===S-1?Te-=ye:E>0&&(Te-=ye/2);break}$={left:Te,top:Ee,width:ye+J.width,height:ne+J.height,color:Q.backdropColor}}T.push({label:A,font:b,textOffset:N,options:{rotation:w,color:se,strokeColor:B,strokeWidth:q,textAlign:K,textBaseline:R,translation:[M,D],backdrop:$}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Nr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=_r(e,this.left,o)-o/2,h=_r(e,this.right,a)+a/2,d=f=l):(d=_r(e,this.top,o)-o/2,f=_r(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Hm(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;fl(i,c,0,h,l,a)}r&&qm(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Et(i.font),o=cn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||me(n)?(l+=o.bottom,et(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=F4(this,l,n,a);fl(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:V4(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=de(e.grid&&e.grid.z,-1),r=de(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==vo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Et(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ac{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;B4(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,j4(e,o,i),this.override&&$e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in $e[r]&&(delete $e[r][i],this.override&&delete Xr[i])}}function j4(t,e,n){const i=ul(Object.create(null),[n?$e.get(n):{},$e.get(e),t.defaults]);$e.set(e,i),t.defaultRoutes&&U4(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function U4(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");$e.route(s,r,l,a)})}function B4(t){return"id"in t&&"defaults"in t}class z4{constructor(){this.controllers=new Ac(Pa,"datasets",!0),this.elements=new Ac(di,"elements"),this.plugins=new Ac(Object,"plugins"),this.scales=new Ac(vo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):_e(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=Bm(e);Ce(i["before"+r],[],i),n[e](i),Ce(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var An=new z4;class $4{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Ce(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ie(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=de(i.options&&i.options.plugins,{}),s=W4(i);return r===!1&&!n?[]:q4(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function W4(t){const e={},n=[],i=Object.keys(An.plugins.items);for(let s=0;s<i.length;s++)n.push(An.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function H4(t,e){return!e&&t===!1?null:t===!0?{}:t}function q4(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=H4(i[l],r);c!==null&&s.push({plugin:a,options:K4(t.config,{plugin:a,local:n[l]},c,o)})}return s}function K4(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $p(t,e){const n=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function G4(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Q4(t,e){return t===e?"_index_":"_value_"}function Cw(t){if(t==="x"||t==="y"||t==="r")return t}function Y4(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Wp(t,...e){if(Cw(t))return t;for(const n of e){const i=n.axis||Y4(n.position)||t.length>1&&Cw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Aw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function X4(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Aw(t,"x",n[0])||Aw(t,"y",n[0])}return{}}function J4(t,e){const n=Xr[t.type]||{scales:{}},i=e.scales||{},r=$p(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Wp(o,a,X4(o,t),$e.scales[a.type]),c=Q4(l,r),h=n.scales||{};s[o]=Ia(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||$p(a,e),h=(Xr[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=G4(d,l),g=o[f+"AxisID"]||f;s[g]=s[g]||Object.create(null),Ia(s[g],[{axis:f},i[g],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ia(a,[$e.scales[a.type],$e.scale])}),s}function Hb(t){const e=t.options||(t.options={});e.plugins=de(e.plugins,{}),e.scales=J4(t,e)}function qb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Z4(t){return t=t||{},t.data=qb(t.data),Hb(t),t}const Pw=new Map,Kb=new Set;function Pc(t,e){let n=Pw.get(t);return n||(n=e(),Pw.set(t,n),Kb.add(n)),n}const Go=(t,e,n)=>{const i=Qu(e,n);i!==void 0&&t.add(i)};class eU{constructor(e){this._config=Z4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=qb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Hb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Pc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Pc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Pc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Pc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Go(l,e,d))),h.forEach(d=>Go(l,r,d)),h.forEach(d=>Go(l,Xr[s]||{},d)),h.forEach(d=>Go(l,$e,d)),h.forEach(d=>Go(l,Up,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Kb.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Xr[n]||{},$e.datasets[n]||{},{type:n},$e,Up]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Rw(this._resolverCache,e,r);let l=o;if(nU(o,n)){s.$shared=!1,i=ir(i)?i():i;const c=this.createResolver(e,i,a);l=oo(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Rw(this._resolverCache,e,i);return me(n)?oo(s,n,void 0,r):s}}function Rw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Km(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const tU=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>ir(t[e]));function nU(t,e){const{isScriptable:n,isIndexable:i}=Pb(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(ir(a)||tU(a))||o&&et(a))return!0}return!1}var iU="4.5.1";const rU=["top","bottom","left","right","chartArea"];function Nw(t,e){return t==="top"||t==="bottom"||rU.indexOf(t)===-1&&e==="x"}function Dw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Mw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ce(n&&n.onComplete,[t],e)}function sU(t){const e=t.chart,n=e.options.animation;Ce(n&&n.onProgress,[t],e)}function Gb(t){return Ym()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const nu={},Ow=t=>{const e=Gb(t);return Object.values(nu).filter(n=>n.canvas===e).pop()};function oU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function aU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var Si;let Dl=(Si=class{static register(...e){An.add(...e),Lw()}static unregister(...e){An.remove(...e),Lw()}constructor(e,n){const i=this.config=new eU(n),r=Gb(e),s=Ow(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||I4(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=uF(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=RF(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],nu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Hn.listen(this,"complete",Mw),Hn.listen(this,"progress",sU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Ie(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return An}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():aw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rw(this.canvas,this.ctx),this}stop(){return Hn.stop(this),this}resize(e,n){Hn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,aw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ce(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};_e(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Wp(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),_e(s,o=>{const a=o.options,l=a.id,c=Wp(l,a),h=de(a.type,o.dtype);(a.position===void 0||Nw(a.position,c)!==Nw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=An.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),_e(r,(o,a)=>{o||delete i[a]}),_e(i,o=>{tn.configure(this,o,o.options),tn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Dw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||$p(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=An.getController(a),{datasetElementType:c,dataElementType:h}=$e.datasets[a];Object.assign(l,{dataElementType:An.getElement(h),datasetElementType:c&&An.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){_e(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||_e(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Dw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){_e(this.scales,e=>{tn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!G0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;oU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!G0(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tn.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],_e(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ir(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Hn.has(this)?this.attached&&!Hn.running(this)&&Hn.start(this):(this.draw(),Mw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=Fj(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Hm(n,r),e.controller.draw(),r&&qm(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return dl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=r4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ss(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Yu(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Hn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),rw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete nu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};_e(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){_e(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},_e(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Ku(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=mF(e),c=aU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ce(s.onHover,[e,a,this],this),l&&Ce(s.onClick,[e,a,this],this));const h=!Ku(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},oe(Si,"defaults",$e),oe(Si,"instances",nu),oe(Si,"overrides",Xr),oe(Si,"registry",An),oe(Si,"version",iU),oe(Si,"getChart",Ow),Si);function Lw(){return _e(Dl.instances,t=>t._plugins.invalidate())}function Qb(t,e,n=e){t.lineCap=de(n.borderCapStyle,e.borderCapStyle),t.setLineDash(de(n.borderDash,e.borderDash)),t.lineDashOffset=de(n.borderDashOffset,e.borderDashOffset),t.lineJoin=de(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=de(n.borderWidth,e.borderWidth),t.strokeStyle=de(n.borderColor,e.borderColor)}function lU(t,e,n){t.lineTo(n.x,n.y)}function cU(t){return t.stepped?HF:t.tension||t.cubicInterpolationMode==="monotone"?qF:lU}function Yb(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function uU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Yb(r,n,i),h=cU(s);let{move:d=!0,reverse:f}=i||{},g,_,w;for(g=0;g<=c;++g)_=r[(a+(f?c-g:g))%o],!_.skip&&(d?(t.moveTo(_.x,_.y),d=!1):h(t,w,_,f,s.stepped),w=_);return l&&(_=r[(a+(f?c:0))%o],h(t,w,_,f,s.stepped)),!!l}function hU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Yb(r,n,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,f,g,_,w,T,E;const S=A=>(o+(c?a-A:A))%s,k=()=>{w!==T&&(t.lineTo(h,T),t.lineTo(h,w),t.lineTo(h,E))};for(l&&(g=r[S(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=r[S(f)],g.skip)continue;const A=g.x,M=g.y,D=A|0;D===_?(M<w?w=M:M>T&&(T=M),h=(d*h+A)/++d):(k(),t.lineTo(A,M),_=D,d=0,w=T=M),E=M}k()}function Hp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?hU:uU}function dU(t){return t.stepped?Ij:t.tension||t.cubicInterpolationMode==="monotone"?bj:br}function fU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Qb(t,e.options),t.stroke(r)}function pU(t,e,n,i){const{segments:r,options:s}=e,o=Hp(e);for(const a of r)Qb(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const gU=typeof Path2D=="function";function mU(t,e,n,i){gU&&!e.options.segment?fU(t,e,n,i):pU(t,e,n,i)}class Ps extends di{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;yj(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Mj(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=Rj(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=dU(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],g=s[d],_=s[f];if(g===_){a.push(g);continue}const w=Math.abs((r-g[n])/(_[n]-g[n])),T=l(g,_,w,i.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Hp(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Hp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),mU(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}oe(Ps,"id","line"),oe(Ps,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),oe(Ps,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),oe(Ps,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Vw(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Ra extends di{constructor(n){super();oe(this,"parsed");oe(this,"skip");oe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Vw(this,n,"x",i)}inYRange(n,i){return Vw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!dl(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Bp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}oe(Ra,"id","point"),oe(Ra,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),oe(Ra,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Fw=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},yU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jw extends di{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ce(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Et(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Fw(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((_,w)=>{const T=i+n/2+s.measureText(_.text).width;(w===0||c[c.length-1]+T+2*a>o)&&(d+=h,c[c.length-(w>0?0:1)]=0,g+=h,f++),l[w]={left:0,top:g,row:f,width:T,height:r},c[c.length-1]+=T+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,g=0,_=0,w=0;return this.legendItems.forEach((T,E)=>{const{itemWidth:S,itemHeight:k}=_U(i,n,s,T,r);E>0&&g+k+2*a>h&&(d+=f+a,c.push({width:f,height:g}),_+=f+a,w++,f=g=0),l[E]={left:_,top:g,col:w,width:S,height:k},f=Math.max(f,S),g+=k+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Bs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=yt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=yt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=yt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=yt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Hm(e,this),this._draw(),qm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=$e.color,l=Bs(e.rtl,this.left,this.width),c=Et(o.font),{padding:h}=o,d=c.size,f=d/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:_,boxHeight:w,itemHeight:T}=Fw(o,d),E=function(D,x,v){if(isNaN(_)||_<=0||isNaN(w)||w<0)return;r.save();const b=de(v.lineWidth,1);if(r.fillStyle=de(v.fillStyle,a),r.lineCap=de(v.lineCap,"butt"),r.lineDashOffset=de(v.lineDashOffset,0),r.lineJoin=de(v.lineJoin,"miter"),r.lineWidth=b,r.strokeStyle=de(v.strokeStyle,a),r.setLineDash(de(v.lineDash,[])),o.usePointStyle){const C={radius:w*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:b},P=l.xPlus(D,_/2),N=x+f;Cb(r,C,P,N,o.pointStyleWidth&&_)}else{const C=x+Math.max((d-w)/2,0),P=l.leftForLtr(D,_),N=Aa(v.borderRadius);r.beginPath(),Object.values(N).some(R=>R!==0)?zp(r,{x:P,y:C,w:_,h:w,radius:N}):r.rect(P,C,_,w),r.fill(),b!==0&&r.stroke()}r.restore()},S=function(D,x,v){fl(r,v.text,D,x+T/2,c,{strikethrough:v.hidden,textAlign:l.textAlign(v.textAlign)})},k=this.isHorizontal(),A=this._computeTitleHeight();k?g={x:yt(s,this.left+h,this.right-i[0]),y:this.top+h+A,line:0}:g={x:this.left+h,y:yt(s,this.top+A+h,this.bottom-n[0].height),line:0},Ob(this.ctx,e.textDirection);const M=T+h;this.legendItems.forEach((D,x)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;const v=r.measureText(D.text).width,b=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),C=_+f+v;let P=g.x,N=g.y;l.setWidth(this.width),k?x>0&&P+C+h>this.right&&(N=g.y+=M,g.line++,P=g.x=yt(s,this.left+h,this.right-i[g.line])):x>0&&N+M>this.bottom&&(P=g.x=P+n[g.line].width+h,g.line++,N=g.y=yt(s,this.top+A+h,this.bottom-n[g.line].height));const R=l.x(P);if(E(R,N,D),P=NF(b,P+_+f,k?P+C:this.right,e.rtl),S(l.x(P),N,D),k)g.x+=C+h;else if(typeof D.text!="string"){const Z=c.lineHeight;g.y+=Xb(D,Z)+h}else g.y+=M}),Lb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Et(n.font),r=cn(n.padding);if(!n.display)return;const s=Bs(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=yt(e.align,d,this.right-f);else{const _=this.columnSizes.reduce((w,T)=>Math.max(w,T.height),0);h=c+yt(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const g=yt(a,d,d+f);o.textAlign=s.textAlign($m(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,fl(o,n.text,g,h,i)}_computeTitleHeight(){const e=this.options.title,n=Et(e.font),i=cn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(aa(e,this.left,this.right)&&aa(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],aa(e,r.left,r.left+r.width)&&aa(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!EU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=yU(r,i);r&&!s&&Ce(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Ce(n.onHover,[e,i,this],this)}else i&&Ce(n.onClick,[e,i,this],this)}}function _U(t,e,n,i,r){const s=vU(i,t,e,n),o=wU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function vU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function wU(t,e,n){let i=t;return typeof e.text!="string"&&(i=Xb(e,n)),i}function Xb(t,e){const n=t.text?t.text.length:0;return e*n}function EU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Jb={id:"legend",_element:jw,start(t,e,n){const i=t.legend=new jw({ctx:t.ctx,options:n,chart:t});tn.configure(t,i,n),tn.addBox(t,i)},stop(t){tn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;tn.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=cn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Zb extends di{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=et(i.text)?i.text.length:1;this._padding=cn(i.padding);const s=r*Et(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=yt(a,i,s),d=n+e,c=s-i):(o.position==="left"?(h=i+e,d=yt(a,r,n),l=nt*-.5):(h=s-e,d=yt(a,n,r),l=nt*.5),c=r-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Et(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);fl(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:$m(n.align),textBaseline:"middle",translation:[o,a]})}}function TU(t,e){const n=new Zb({ctx:t.ctx,options:e,chart:t});tn.configure(t,n,e),tn.addBox(t,n),t.titleBlock=n}var SU={id:"title",_element:Zb,start(t,e,n){TU(t,n)},stop(t){const e=t.titleBlock;tn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;tn.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ca={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=jp(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function kn(t,e){return e&&(et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function qn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function xU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Uw(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Et(e.bodyFont),c=Et(e.titleFont),h=Et(e.footerFont),d=s.length,f=r.length,g=i.length,_=cn(e.padding);let w=_.height,T=0,E=i.reduce((A,M)=>A+M.before.length+M.lines.length+M.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,d&&(w+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),E){const A=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=g*A+(E-g)*l.lineHeight+(E-1)*e.bodySpacing}f&&(w+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let S=0;const k=function(A){T=Math.max(T,n.measureText(A).width+S)};return n.save(),n.font=c.string,_e(t.title,k),n.font=l.string,_e(t.beforeBody.concat(t.afterBody),k),S=e.displayColors?o+2+e.boxPadding:0,_e(i,A=>{_e(A.before,k),_e(A.lines,k),_e(A.after,k)}),S=0,n.font=h.string,_e(t.footer,k),n.restore(),T+=_.width,{width:T,height:w}}function IU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function bU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function kU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),bU(c,t,e,n)&&(c="center"),c}function Bw(t,e,n){const i=n.yAlign||e.yAlign||IU(t,n);return{xAlign:n.xAlign||e.xAlign||kU(t,e,n,i),yAlign:i}}function CU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function AU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function zw(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Aa(o);let _=CU(e,a);const w=AU(e,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(h,f)+r:a==="right"&&(_+=Math.max(d,g)+r),{x:en(_,0,i.width-e.width),y:en(w,0,i.height-e.height)}}function Rc(t,e,n){const i=cn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function $w(t){return kn([],qn(t))}function PU(t,e,n){return ss(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Ww(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ek={beforeTitle:Wn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Wn,beforeBody:Wn,beforeLabel:Wn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ie(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Wn,afterBody:Wn,beforeFooter:Wn,footer:Wn,afterFooter:Wn};function Rt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?ek[e].call(n,i):r}class qp extends di{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new Fb(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=PU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Rt(i,"beforeTitle",this,e),s=Rt(i,"title",this,e),o=Rt(i,"afterTitle",this,e);let a=[];return a=kn(a,qn(r)),a=kn(a,qn(s)),a=kn(a,qn(o)),a}getBeforeBody(e,n){return $w(Rt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return _e(e,s=>{const o={before:[],lines:[],after:[]},a=Ww(i,s);kn(o.before,qn(Rt(a,"beforeLabel",this,s))),kn(o.lines,Rt(a,"label",this,s)),kn(o.after,qn(Rt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return $w(Rt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Rt(i,"beforeFooter",this,e),s=Rt(i,"footer",this,e),o=Rt(i,"afterFooter",this,e);let a=[];return a=kn(a,qn(r)),a=kn(a,qn(s)),a=kn(a,qn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(xU(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),_e(a,h=>{const d=Ww(e.callbacks,h);r.push(Rt(d,"labelColor",this,h)),s.push(Rt(d,"labelPointStyle",this,h)),o.push(Rt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=ca[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Uw(this,i),c=Object.assign({},a,l),h=Bw(this.chart,i,c),d=zw(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Aa(a),{x:f,y:g}=e,{width:_,height:w}=n;let T,E,S,k,A,M;return s==="center"?(A=g+w/2,r==="left"?(T=f,E=T-o,k=A+o,M=A-o):(T=f+_,E=T+o,k=A-o,M=A+o),S=T):(r==="left"?E=f+Math.max(l,h)+o:r==="right"?E=f+_-Math.max(c,d)-o:E=this.caretX,s==="top"?(k=g,A=k-o,T=E-o,S=E+o):(k=g+w,A=k+o,T=E+o,S=E-o),M=k),{x1:T,x2:E,x3:S,y1:k,y2:A,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Bs(i.rtl,this.x,this.width);for(e.x=Rc(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Et(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=Et(s.bodyFont),d=Rc(this,"left",s),f=r.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,_=n.y+g;if(s.usePointStyle){const w={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=r.leftForLtr(f,c)+c/2,E=_+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Bp(e,w,T,E),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Bp(e,w,T,E)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=r.leftForLtr(f,c),T=r.leftForLtr(r.xPlus(f,1),c-2),E=Aa(o.borderRadius);Object.values(E).some(S=>S!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,zp(e,{x:w,y:_,w:c,h:l,radius:E}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),zp(e,{x:T,y:_+1,w:c-2,h:l-2,radius:E}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(w,_,c,l),e.strokeRect(w,_,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,_+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=Et(i.bodyFont);let f=d.lineHeight,g=0;const _=Bs(i.rtl,this.x,this.width),w=function(v){n.fillText(v,_.x(e.x+g),e.y+f/2),e.y+=f+s},T=_.textAlign(o);let E,S,k,A,M,D,x;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Rc(this,T,i),n.fillStyle=i.bodyColor,_e(this.beforeBody,w),g=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,A=0,D=r.length;A<D;++A){for(E=r[A],S=this.labelTextColors[A],n.fillStyle=S,_e(E.before,w),k=E.lines,a&&k.length&&(this._drawColorBox(n,e,A,_,i),f=Math.max(d.lineHeight,l)),M=0,x=k.length;M<x;++M)w(k[M]),f=d.lineHeight;_e(E.after,w)}g=0,f=d.lineHeight,_e(this.afterBody,w),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Bs(i.rtl,this.x,this.width);for(e.x=Rc(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Et(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:_}=Aa(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-_),n.quadraticCurveTo(a+c,l+h,a+c-_,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=ca[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Uw(this,e),l=Object.assign({},o,this._size),c=Bw(n,e,l),h=zw(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=cn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),Ob(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),Lb(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Ku(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Ku(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=ca[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}oe(qp,"positioners",ca);var tk={id:"tooltip",_element:qp,positioners:ca,afterInit(t,e,n){n&&(t.tooltip=new qp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ek},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const RU=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function NU(t,e,n,i){const r=t.indexOf(e);if(r===-1)return RU(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const DU=(t,e)=>t===null?null:en(Math.round(t),0,e);function Hw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class eh extends vo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ie(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:NU(i,e,de(n,e),this._addedLabels),DU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Hw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}oe(eh,"id","category"),oe(eh,"defaults",{ticks:{callback:Hw}});function MU(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,g=s||1,_=h-1,{min:w,max:T}=e,E=!Ie(o),S=!Ie(a),k=!Ie(c),A=(T-w)/(d+1);let M=Y0((T-w)/_/g)*g,D,x,v,b;if(M<1e-14&&!E&&!S)return[{value:w},{value:T}];b=Math.ceil(T/M)-Math.floor(w/M),b>_&&(M=Y0(b*M/_/g)*g),Ie(l)||(D=Math.pow(10,l),M=Math.ceil(M*D)/D),r==="ticks"?(x=Math.floor(w/M)*M,v=Math.ceil(T/M)*M):(x=w,v=T),E&&S&&s&&EF((a-o)/s,M/1e3)?(b=Math.round(Math.min((a-o)/M,h)),M=(a-o)/b,x=o,v=a):k?(x=E?o:x,v=S?a:v,b=c-1,M=(v-x)/b):(b=(v-x)/M,ba(b,Math.round(b),M/1e3)?b=Math.round(b):b=Math.ceil(b));const C=Math.max(X0(M),X0(x));D=Math.pow(10,Ie(l)?C:l),x=Math.round(x*D)/D,v=Math.round(v*D)/D;let P=0;for(E&&(f&&x!==o?(n.push({value:o}),x<o&&P++,ba(Math.round((x+P*M)*D)/D,o,qw(o,A,t))&&P++):x<o&&P++);P<b;++P){const N=Math.round((x+P*M)*D)/D;if(S&&N>a)break;n.push({value:N})}return S&&f&&v!==a?n.length&&ba(n[n.length-1].value,a,qw(a,A,t))?n[n.length-1].value=a:n.push({value:a}):(!S||v===a)&&n.push({value:v}),n}function qw(t,e,{horizontal:n,minRotation:i}){const r=Nr(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class OU extends vo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ie(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=so(r),c=so(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=MU(r,s);return e.bounds==="ticks"&&TF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return bb(e,this.chart.options.locale,this.options.ticks.format)}}class th extends OU{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ln(e)?e:0,this.max=ln(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Nr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}oe(th,"id","linear"),oe(th,"defaults",{ticks:{callback:kb.formatters.numeric}});const Kh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Mt=Object.keys(Kh);function Kw(t,e){return t-e}function Gw(t,e){if(Ie(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ln(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(hl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Qw(t,e,n,i){const r=Mt.length;for(let s=Mt.indexOf(t);s<r-1;++s){const o=Kh[Mt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Mt[s]}return Mt[r-1]}function LU(t,e,n,i,r){for(let s=Mt.length-1;s>=Mt.indexOf(n);s--){const o=Mt[s];if(Kh[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Mt[n?Mt.indexOf(n):0]}function VU(t){for(let e=Mt.indexOf(t)+1,n=Mt.length;e<n;++e)if(Kh[Mt[e]].common)return Mt[e]}function Yw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=zm(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function FU(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Xw(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:FU(t,i,r,n)}class nh extends vo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new Zj._date(e.adapters.date);r.init(n),Ia(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Gw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=ln(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=ln(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=CF(r,s,o);return this._unit=n.unit||(i.autoSkip?Qw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):LU(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:VU(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Xw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=en(n,0,o),i=en(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Qw(s.minUnit,n,i,this._getLabelCapacity(n)),a=de(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=hl(l)||l===!0,h={};let d=n,f,g;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const _=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<i;f=+e.add(f,a,o),g++)Yw(h,f,_);return(f===i||r.bounds==="ticks"||g===1)&&Yw(h,f,_),Object.keys(h).sort(Kw).map(w=>+w)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Ce(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=i[n],g=c&&d&&f&&f.major;return this._adapter.format(e,r||(g?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Nr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Xw(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(Gw(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return PF(e.sort(Kw))}}oe(nh,"id","time"),oe(nh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Nc(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Dr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Dr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Jw extends nh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Nc(n,this.min),this._tableRange=Nc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Nc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Nc(this._table,i*this._tableRange+this._minPos,!0)}}oe(Jw,"id","timeseries"),oe(Jw,"defaults",nh.defaults);Dl.register(Ps,Ra,th,eh,tk,Jb);const nk="label";function Zw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function jU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function ik(t,e){t.labels=e}function rk(t,e,n=nk){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function UU(t,e=nk){const n={labels:[],datasets:[]};return ik(n,t.labels),rk(n,t.datasets,e),n}function BU(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,g=O.useRef(null),_=O.useRef(null),w=()=>{g.current&&(_.current=new Dl(g.current,{type:o,data:UU(a,s),options:l&&{...l},plugins:c}),Zw(e,_.current))},T=()=>{Zw(e,null),_.current&&(_.current.destroy(),_.current=null)};return O.useEffect(()=>{!r&&_.current&&l&&jU(_.current,l)},[r,l]),O.useEffect(()=>{!r&&_.current&&ik(_.current.config.data,a.labels)},[r,a.labels]),O.useEffect(()=>{!r&&_.current&&a.datasets&&rk(_.current.config.data,a.datasets,s)},[r,a.datasets]),O.useEffect(()=>{_.current&&(r?(T(),setTimeout(w)):_.current.update(d))},[r,l,a.labels,a.datasets,d]),O.useEffect(()=>{_.current&&(T(),setTimeout(w))},[o]),O.useEffect(()=>(w(),()=>T()),[]),y.jsx("canvas",{ref:g,role:"img",height:n,width:i,...f,children:h})}const zU=O.forwardRef(BU);function $U(t,e){return Dl.register(e),O.forwardRef((n,i)=>y.jsx(zU,{...n,ref:i,type:t}))}const Gh=$U("line",eu);function WU({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Gh,{data:r,options:s})})]})}function HU({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.calories),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.calories}),r={labels:e,datasets:[{label:"Calories (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Calories Trend (7-day WMA)",data:i,borderColor:"rgba(167,139,250,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>`${o.dataset.label}: ${Math.round(o.parsed.y)} kcal`}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kcal/day",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Calorie Trend (Raw vs Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Gh,{data:r,options:s})})]})}Dl.register(eh,th,Ra,Ps,SU,tk,Jb);function qU({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Lift 1","Lift 2","Lift 3"],i=O.useMemo(()=>({labels:t.map(o=>o.dateIso),datasets:[{label:`${n[0]} (WMA)`,data:t.map(o=>{var a;return((a=o.wma)==null?void 0:a.liftA)??null}),borderWidth:2,pointRadius:0},{label:`${n[1]} (WMA)`,data:t.map(o=>{var a;return((a=o.wma)==null?void 0:a.liftB)??null}),borderWidth:2,pointRadius:0},{label:`${n[2]} (WMA)`,data:t.map(o=>{var a;return((a=o.wma)==null?void 0:a.liftC)??null}),borderWidth:2,pointRadius:0}]}),[t,n]),r=O.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Strength trend (smoothed)"},tooltip:{mode:"index",intersect:!1}},interaction:{mode:"index",intersect:!1},scales:{y:{title:{display:!0,text:"kg"}},x:{ticks:{maxTicksLimit:8}}}}),[]);return y.jsx("div",{className:"chart",children:y.jsx(Gh,{data:i,options:r})})}function KU({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.calories}),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (WMA)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Weight + Strength vs Calories (Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Gh,{data:s,options:o})})]})}function wr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function GU(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function QU(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function YU({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Weekly Analysis"}),y.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Week #"}),y.jsx("th",{children:"Avg Calories"}),y.jsx("th",{children:"Weight Change (kg)"}),y.jsx("th",{children:"Calculated TDEE"}),y.jsx("th",{children:"TDEE "}),y.jsx("th",{children:"Adaptation %"}),y.jsx("th",{children:"LBM (kg)"}),y.jsx("th",{children:"Loss Rate vs LBM %"}),y.jsx("th",{children:"Status"})]})}),y.jsx("tbody",{children:t.weeks.map(n=>y.jsxs("tr",{children:[y.jsx("td",{children:n.week}),y.jsx("td",{children:wr(n.avgCalories,0)}),y.jsx("td",{children:wr(n.weightChange,2)}),y.jsx("td",{children:wr(n.tdee,0)}),y.jsx("td",{children:wr(n.tdeeChangeFromBaseline,0)}),y.jsx("td",{className:GU(n.adaptationPct),children:wr(n.adaptationPct,1)}),y.jsx("td",{children:wr(n.lbm,1)}),y.jsx("td",{children:wr(n.lossRatePct,2)}),y.jsx("td",{className:QU(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),y.jsxs("div",{className:"notice info",style:{marginTop:12},children:[y.jsx("div",{children:y.jsx("b",{children:"How to read this:"})}),y.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[y.jsxs("div",{children:[y.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",y.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function XU(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function Jr(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function Qh(){return XU(new Date)}function JU(t,e){return t.dateIso.localeCompare(e.dateIso)}function bt(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function eE(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function tE(t,e){const n=Jr(t).getTime(),i=Jr(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function nE(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function ZU(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function eB({derived:t,weekly:e,profile:n}){const i=O.useMemo(()=>{var S,k,A,M;if(!(t!=null&&t.length))return[];const r=t[t.length-1],s=r.dateIso,o=(S=e==null?void 0:e.weeks)!=null&&S.length?e.weeks[e.weeks.length-1]:null,a=e==null?void 0:e.baselineTdee,l=e==null?void 0:e.baselineStrength,c=e==null?void 0:e.baselineWeeklyLoss,h=t.filter(D=>{const x=tE(s,D.dateIso);return x>=0&&x<=6}),d=h.length,f=nE(h.map(D=>D.protein)),g=nE(h.map(D=>D.calories)),_=Number.isFinite((k=r==null?void 0:r.wma)==null?void 0:k.weight)?r.wma.weight:r.weight,w=[];if(o&&Number.isFinite(a)&&Number.isFinite(o.tdee)&&Number.isFinite(o.adaptationPct)){const D=Math.max(0,-o.adaptationPct);let x="good";D>=10?x="bad":D>=5&&(x="warn");const v=o.adaptationPct<0?"dropped":"increased",b=`${bt(Math.abs(o.adaptationPct),0)}%`;w.push({key:"adaptation",level:x,title:"Metabolic adaptation",message:`Your TDEE has ${v} ${b} from baseline (${bt(a,0)}  ${bt(o.tdee,0)} kcal).`,action:x!=="good"?"Consider a refeed day or reducing training volume.":null})}if(o&&Number.isFinite(o.lossRatePct)){const D=String(o.lossRateStatus||"").toUpperCase();let x="info";o.lossRateStatus==="Optimal"&&(x="good"),o.lossRateStatus==="Aggressive"&&(x="bad");const v=o.lossRateStatus==="Aggressive"?"Risk of muscle loss.":o.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";w.push({key:"lossrate",level:x,title:"Loss rate vs LBM",message:`This week: ${bt(o.lossRatePct,1)}% of LBM lost  ${D}. ${v}`,action:null})}if(o&&Number.isFinite(l)&&Number.isFinite(o.avgStrengthWma)){const D=(o.avgStrengthWma-l)/l*100;let x="good",v="",b="Strength maintained/increasing.",C=null;D<-7.5?(x="bad",v="",b="Strength declining significantly.",C="Consider eating more or reducing cardio."):D<-5&&(x="warn",v="",b="Strength declining.",C="Consider eating more or reducing cardio."),w.push({key:"strength",level:x,title:"Strength trend",message:`${b} ${v} (${bt(D,1)}% vs baseline)`,action:C})}if(o&&Number.isFinite(o.tdee)&&Number.isFinite(o.lbm)){const D=o.lbm,x=.005*D,v=.01*D,b=x*7700/7,C=v*7700/7,P=o.tdee-b,N=o.tdee-C,R=eE(Math.min(N,P),50),Z=eE(Math.max(N,P),50);w.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${R}-${Z} kcal/day this week.`,action:null})}d<6&&w.push({key:"completeness",level:"warn",title:"Data completeness",message:`${d}/7 days logged this week  missing data may affect accuracy.`,action:null});let T=null;for(let D=t.length-1;D>=0;D--)if(Number.isFinite((A=t[D])==null?void 0:A.bfPct)){T=t[D].dateIso;break}if(!T)w.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const D=tE(s,T);D>=7?w.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):w.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-D} day(s).`,action:null})}if(Number.isFinite(f)&&Number.isFinite(_)){const D=1.6*_,x=2.2*_;if(f<D){const v=(D-f)/D*100;w.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${bt(v,0)}% below the muscle-retention range (${bt(f,0)}g/day vs ${bt(D,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else f>x?w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${bt(f,0)}g/day).`,action:null}):w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${bt(f,0)}g/day).`,action:null})}if(o&&Number.isFinite(c)&&Number.isFinite(o.weightChange)){const D=Math.max(0,-o.weightChange),x=c;(D<.2||x>.2&&D<x*.35)&&w.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${bt(D,1)}kg this week vs ${bt(x,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const E=Number(n==null?void 0:n.targetWeight);if(Number.isFinite(E)&&Number.isFinite((M=t[0])==null?void 0:M.weight)&&Number.isFinite(_)){const D=t[0].weight;if(D>E){const x=D-_,v=D-E,b=Math.max(0,Math.min(1,x/v))*100,C=Math.floor(x/5)*5;C>=5&&w.push({key:"milestone",level:"good",title:"Progress milestone",message:`${bt(C,0)}kg down! Youre ${bt(b,0)}% to your goal.`,action:null})}}return o||(w.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(g)&&w.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${bt(g,0)} kcal/day.`,action:null})),w},[t,e,n]);return i.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Insights"}),y.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),y.jsx("div",{className:"grid",style:{marginTop:12},children:i.map(r=>y.jsxs("div",{className:`card insight-card ${ZU(r.level)}`,style:{gridColumn:"span 6"},children:[y.jsx("div",{className:"insight-title",children:r.title}),y.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:r.message}),r.action&&y.jsx("div",{className:"small",style:{marginTop:8},children:r.action})]},r.key))})]}):null}function df(t,e,n){return!t||e&&t<e?e:n&&t>n?n:t}function tB(t,e){const n=Jr(t);n.setDate(n.getDate()+e);const i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${i}-${r}-${s}`}function sk(t,e){const[n,i]=PS(),r=n.get("preset")||"7",s=n.get("start"),o=n.get("end"),a=t||Qh(),l=e||null,{startIso:c,endIso:h,mode:d}=O.useMemo(()=>{if(s&&o)return{startIso:df(s,l,a),endIso:df(o,l,a),mode:"custom"};const _=r==="14"?14:r==="30"?30:7,w=a,T=tB(w,-(_-1));return{startIso:df(T,l,a),endIso:w,mode:"preset"}},[s,o,r,a,l]);function f(_){i(w=>{const T=new URLSearchParams(w);return T.set("preset",String(_)),T.delete("start"),T.delete("end"),T},{replace:!0})}function g(_,w){i(T=>{const E=new URLSearchParams(T);return E.delete("preset"),E.set("start",_),E.set("end",w),E},{replace:!0})}return{startIso:c,endIso:h,mode:d,preset:r,setPreset:f,setCustom:g}}function nB({maxDateIso:t,minDateIso:e}){const{startIso:n,endIso:i,mode:r,preset:s,setPreset:o,setCustom:a}=sk(t,e);return y.jsxs("div",{className:"periodbar",children:[y.jsxs("div",{className:"period-tabs",children:[y.jsx("button",{className:`tab ${r!=="custom"&&s==="7"?"active":""}`,onClick:()=>o(7),children:"Last week"}),y.jsx("button",{className:`tab ${r!=="custom"&&s==="14"?"active":""}`,onClick:()=>o(14),children:"Last 2 weeks"}),y.jsx("button",{className:`tab ${r!=="custom"&&s==="30"?"active":""}`,onClick:()=>o(30),children:"Last month"}),y.jsx("span",{className:"muted",style:{marginLeft:10},children:"or"})]}),y.jsxs("div",{className:"period-custom",children:[y.jsxs("div",{className:"field",style:{margin:0},children:[y.jsx("label",{style:{fontSize:12},children:"Start"}),y.jsx("input",{type:"date",value:n,min:e||void 0,max:i,onChange:l=>a(l.target.value,i)})]}),y.jsxs("div",{className:"field",style:{margin:0},children:[y.jsx("label",{style:{fontSize:12},children:"End"}),y.jsx("input",{type:"date",value:i,min:n,max:t||void 0,onChange:l=>a(n,l.target.value)})]})]})]})}const ok=O.createContext(null),iE={email:"",sex:"",height:"",age:"",targetWeight:"",liftNames:["Bench Press","Squat","Deadlift"],bfRefMode:"standard",triplemeasurements:!1,createdAt:null};function iB({children:t}){const{user:e}=yi(),[n,i]=O.useState(iE),[r,s]=O.useState(!1),[o,a]=O.useState(null);O.useEffect(()=>{if(i(iE),a(null),!e)return;const c=ll(ro,"users",e.uid);s(!0);const h=qI(c,async d=>{if(!d.exists()){await WI(c,{email:e.email||"",sex:"",height:"",age:null,targetWeight:null,liftNames:["Bench Press","Squat","Deadlift"],bfRefMode:"standard",triplemeasurements:!1,createdAt:Nm()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",age:f.age??"",targetWeight:f.targetWeight??"",liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],bfRefMode:f.bfRefMode==="age"?"age":"standard",triplemeasurements:!!f.triplemeasurements,createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=O.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(c){if(!e)throw new Error("Not authenticated");a(null);const h=ll(ro,"users",e.uid);await HI(h,c)}}),[n,r,o,e]);return y.jsx(ok.Provider,{value:l,children:t})}function Zm(){return O.useContext(ok)}function ey(t,e,n){const i=rL(ro,"users",t,"entries");return qI(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(JU);e(o)},n)}async function rB(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=ll(ro,"users",t,"entries",n),r=Jr(n),s={...e,dateIso:n,date:e.date||r,updatedAt:Nm()};await WI(i,s,{merge:!0})}async function sB(t,e,n){const i={...n||{},dateIso:e||(n==null?void 0:n.dateIso)};return rB(t,i)}async function oB(t,e,n){const i=ll(ro,"users",t,"entries",e);await HI(i,{...n,updatedAt:Nm()})}async function aB(t,e){const n=ll(ro,"users",t,"entries",e);await wL(n)}const lB=2/8;function cB({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function uB({liftA:t,liftB:e,liftC:n}){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function fs(t,e=lB){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(null);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function hB(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function ff(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=hB(i,r,s);return Number.isFinite(o)?o:null}function dB({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=ff(n,"neck",i),a=ff(n,"waist",i),l=ff(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const c=a-o;if(!(c>0))return null;const h=495/(1.0324-.19077*Math.log10(c)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const c=a+l-o;if(!(c>0))return null;const h=495/(1.29579-.35004*Math.log10(c)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function fB({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function ty(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(h=>{const d=qe(h.liftA??h.bench),f=qe(h.liftB??h.squat),g=qe(h.liftC??h.deadlift);return{dateIso:h.dateIso,weight:qe(h.weight),protein:qe(h.protein),carbs:qe(h.carbs),fats:qe(h.fats),calories:cB(h),liftA_raw:d,liftB_raw:f,liftC_raw:g,bfPct:dB({sex:i,heightCm:r,entry:h,tripleEnabled:n}),neck:qe(h.neck),waist:qe(h.waist),hip:qe(h.hip),neck1:qe(h.neck1),neck2:qe(h.neck2),neck3:qe(h.neck3),waist1:qe(h.waist1),waist2:qe(h.waist2),waist3:qe(h.waist3),hip1:qe(h.hip1),hip2:qe(h.hip2),hip3:qe(h.hip3)}});let o=null,a=null,l=null;s.forEach(h=>{const d=Number.isFinite(h.liftA_raw)||Number.isFinite(h.liftB_raw)||Number.isFinite(h.liftC_raw);h.strengthLogged=d,Number.isFinite(h.liftA_raw)&&(o=h.liftA_raw),Number.isFinite(h.liftB_raw)&&(a=h.liftB_raw),Number.isFinite(h.liftC_raw)&&(l=h.liftC_raw),h.liftA=Number.isFinite(h.liftA_raw)?h.liftA_raw:o,h.liftB=Number.isFinite(h.liftB_raw)?h.liftB_raw:a,h.liftC=Number.isFinite(h.liftC_raw)?h.liftC_raw:l,h.avgStrength=uB({liftA:h.liftA,liftB:h.liftB,liftC:h.liftC})}),s.forEach(h=>{h.lbm=fB({weightKg:h.weight,bfPct:h.bfPct})});const c={weight:fs(s.map(h=>h.weight)),calories:fs(s.map(h=>h.calories)),liftA:fs(s.map(h=>h.liftA)),liftB:fs(s.map(h=>h.liftB)),liftC:fs(s.map(h=>h.liftC)),avgStrength:fs(s.map(h=>h.avgStrength))};return s.map((h,d)=>({...h,wma:{weight:c.weight[d],calories:c.calories[d],liftA:c.liftA[d],liftB:c.liftB[d],liftC:c.liftC[d],avgStrength:c.avgStrength[d]}}))}function rE(t,e=null){var T,E,S,k;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const n=[],i=t.length,r=Math.floor(i/7),s=A=>A*7-1;function o(A){var M;for(let D=A;D>=0;D--){const x=(M=t[D])==null?void 0:M.lbm;if(Number.isFinite(x))return x}return null}for(let A=1;A<=r;A++){const M=(A-1)*7,D=s(A),x=t.slice(M,D+1),v=Qo(x.map(se=>se.calories)),b=Qo(x.map(se=>{var B;return(B=se==null?void 0:se.wma)==null?void 0:B.avgStrength})),C=(E=(T=x[0])==null?void 0:T.wma)==null?void 0:E.weight,P=(k=(S=x[x.length-1])==null?void 0:S.wma)==null?void 0:k.weight,N=Number.isFinite(C)&&Number.isFinite(P)?P-C:null;let R=null;if(Number.isFinite(v)&&Number.isFinite(N)){const B=-N*7700/7;R=v+B}const Z=o(D);let Q=null,le="";Number.isFinite(Z)&&Number.isFinite(N)&&(Q=Math.max(0,-N)/Z*100,Q<.5?le="Conservative":Q<=1?le="Optimal":le="Aggressive"),n.push({week:A,avgCalories:v,weightChange:N,tdee:R,avgStrengthWma:b,lbm:Z,lossRatePct:Q,lossRateStatus:le,tdeeChangeFromBaseline:null,adaptationPct:null})}const a=n.slice(0,2).map(A=>A.tdee).filter(Number.isFinite),l=a.length?Qo(a):null,c=n.slice(0,2).map(A=>A.avgStrengthWma).filter(Number.isFinite),h=c.length?Qo(c):null,d=n.slice(0,2).map(A=>Number.isFinite(A.weightChange)?Math.max(0,-A.weightChange):null).filter(Number.isFinite),f=d.length?Qo(d):null,g=e&&Number.isFinite(e.baselineTdee)?e.baselineTdee:l,_=e&&Number.isFinite(e.baselineStrength)?e.baselineStrength:h,w=e&&Number.isFinite(e.baselineWeeklyLoss)?e.baselineWeeklyLoss:f;if(Number.isFinite(g))for(const A of n)Number.isFinite(A.tdee)&&(A.tdeeChangeFromBaseline=A.tdee-g,A.adaptationPct=A.tdeeChangeFromBaseline/g*100);return{weeks:n,baselineTdee:g,baselineStrength:_,baselineWeeklyLoss:w}}function qe(t){const e=Number(t);return Number.isFinite(e)?e:null}function Qo(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function pB(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}}function pf(t,e,n){return Math.max(e,Math.min(n,t))}function sE(t,e){const n=Jr(t);n.setDate(n.getDate()+e);const i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${i}-${r}-${s}`}function gB(){return{email:"",sex:"male",height:175,age:26,targetWeight:82,liftNames:["Bench Press","Squat","Deadlift"],bfRefMode:"standard",triplemeasurements:!1}}function mB(t=60){const e=pB(42),n=Qh(),i=sE(n,-(t-1)),r=90,o=(84.6-r)/(t-1),a=[];for(let l=0;l<t;l++){const c=sE(i,l),d=2400-Math.floor(l/14)*125,f=e()*120-60,g=Math.round(d+f),_=Math.round(pf(175+(e()*30-15),150,210)),w=Math.round(pf(70+(e()*20-10),50,85)),T=g-_*4-w*9,E=Math.round(pf(T/4,120,320)),S=r+o*l,k=e()*3-1.5,A=Number((S+k).toFixed(1)),M=l%7===6,D=Math.floor(l/7),x=100+D*.6,v=140+D*.7,b=180+D*.8,C=()=>e()*10-5,P=M?Math.round(x+C()):null,N=M?Math.round(v+C()):null,R=M?Math.round(b+C()):null,Z=M?Number((40+(e()*.6-.3)).toFixed(1)):null,Q=96,se=(89-Q)/Math.max(1,Math.floor((t-1)/7)),B=M?Number((Q+se*D+(e()*1-.5)).toFixed(1)):null;a.push({dateIso:c,weight:A,protein:_,carbs:E,fats:w,liftA:P,liftB:N,liftC:R,neck:Z,waist:B,hip:null})}return a}function yB(t,e,n){return t.filter(i=>i.dateIso>=e&&i.dateIso<=n)}function _B({sex:t,bfPct:e,age:n,mode:i}){if(!t||!Number.isFinite(e))return null;const r=t==="female";let s=r?32:25,o=r?31:24,a=r?24:17,l=r?20:13,c=r?12:5;if(i==="age"&&Number.isFinite(n)){const d=Number(n),f=d>=60?r?4:3:d>=45?r?3:2:d>=35?r?2:1:0;s+=f,o+=f,a+=Math.min(1,f)}const h=e;return h<=c?{label:"Essential fat",note:` ${c}%`}:h<=l?{label:"Athletes",note:`${c+.1}%${l}%`}:h<=a?{label:"Fitness",note:`${l+.1}%${a}%`}:h<=o?{label:"Acceptable / Average",note:`${a+.1}%${o}%`}:h>=s?{label:"Obese",note:` ${s}%`}:{label:"High",note:`> ${o}%`}}function vB({sex:t,age:e,mode:n}){const i=String(t||"").toLowerCase();if(i!=="male"&&i!=="female")return null;const r=i==="female",s=r?{essential:"912%",athletes:"1420%",fitness:"2124%",acceptable:"2531%",obese:"32%+"}:{essential:"35%",athletes:"613%",fitness:"1417%",acceptable:"1824%",obese:"25%+"};if(n!=="age"||!Number.isFinite(e))return s;const o=Number(e),a=o>=60?r?4:3:o>=45?r?3:2:o>=35?r?2:1:0;if(!a)return s;const l=g=>{const _=String(g).match(/(\d+)\D+(\d+)/);return _?Number(_[2]):null},c=g=>{const _=String(g).match(/(\d+)/);return _?Number(_[1]):null},h=c(s.acceptable),d=l(s.acceptable),f=c(s.obese);return{...s,acceptable:Number.isFinite(h)&&Number.isFinite(d)?`${h}${d+a}%`:s.acceptable,obese:Number.isFinite(f)?`${f+a}%+`:s.obese}}function ak({view:t="dashboard"}){var M,D,x,v,b,C;const{user:e}=yi(),{profile:n}=Zm(),i=!e,[r,s]=O.useState([]),[o,a]=O.useState(null),l=O.useMemo(()=>i?{entries:mB(60),profile:gB()}:null,[i]);O.useEffect(()=>{if(!e)return;const P=ey(e.uid,N=>s(N),N=>a((N==null?void 0:N.message)||"Failed to load entries."));return()=>P()},[e]);const c=i?(l==null?void 0:l.entries)||[]:r,h=i?(l==null?void 0:l.profile)||{}:n||{},d=O.useMemo(()=>ty(c,h),[c,h]),f=((M=d[0])==null?void 0:M.dateIso)||null,g=((D=d[d.length-1])==null?void 0:D.dateIso)||Qh(),{startIso:_,endIso:w}=sk(g,f),T=O.useMemo(()=>yB(d,_,w),[d,_,w]),E=O.useMemo(()=>rE(d),[d]),S=O.useMemo(()=>rE(T,{baselineTdee:E.baselineTdee,baselineStrength:E.baselineStrength,baselineWeeklyLoss:E.baselineWeeklyLoss}),[T,E.baselineTdee,E.baselineStrength,E.baselineWeeklyLoss]),k=h!=null&&h.liftNames&&h.liftNames.length===3?h.liftNames:["Bench Press","Squat","Deadlift"],A=O.useMemo(()=>{var $,J,ne,ye,Ee,Te;if(!T.length)return null;const P=T[0],N=T[T.length-1],R=Number.isFinite(N.weight)&&Number.isFinite(P.weight)?N.weight-P.weight:null,Z=Number.isFinite(($=N.wma)==null?void 0:$.weight)&&Number.isFinite((J=P.wma)==null?void 0:J.weight)?N.wma.weight-P.wma.weight:null,Q=Number.isFinite((ne=N.wma)==null?void 0:ne.calories)&&Number.isFinite((ye=P.wma)==null?void 0:ye.calories)?N.wma.calories-P.wma.calories:null,le=Number.isFinite((Ee=N.wma)==null?void 0:Ee.avgStrength)&&Number.isFinite((Te=P.wma)==null?void 0:Te.avgStrength)?N.wma.avgStrength-P.wma.avgStrength:null;let se=null,B=null;for(let Fe=T.length-1;Fe>=0;Fe--)if(Number.isFinite(T[Fe].bfPct)){se=T[Fe].bfPct,B=T[Fe].lbm;break}const q=_B({sex:h==null?void 0:h.sex,bfPct:se,age:h==null?void 0:h.age,mode:h==null?void 0:h.bfRefMode}),K=vB({sex:h==null?void 0:h.sex,age:h==null?void 0:h.age,mode:h==null?void 0:h.bfRefMode});return{first:P,last:N,deltaWeight:R,deltaWeightWma:Z,deltaCaloriesWma:Q,deltaStrengthWma:le,bfPct:se,lbm:B,bfCategory:q,bfRanges:K}},[T,h==null?void 0:h.sex,h==null?void 0:h.age,h==null?void 0:h.bfRefMode]);return y.jsxs(y.Fragment,{children:[o&&y.jsx("div",{className:"notice error",style:{marginTop:14},children:o}),i&&y.jsxs("div",{className:"notice info",style:{marginTop:14},children:[y.jsx("b",{children:"Demo mode:"})," this dashboard is showing 60 days of sample data. ",y.jsx("span",{className:"muted",children:"Log in to start tracking your own entries."})]}),y.jsxs("div",{className:"panel",style:{marginTop:14},children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Dashboard"}),y.jsx("div",{className:"muted",children:"Pick a time window. Charts and insights update accordingly."})]}),y.jsx(nB,{maxDateIso:g,minDateIso:f}),T.length?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"cards",style:{marginTop:12},children:[y.jsxs("div",{className:"card",children:[y.jsx("div",{className:"card-title",children:"Weight change (raw)"}),y.jsx("div",{className:"big",children:(A==null?void 0:A.deltaWeight)===null?"":`${A.deltaWeight.toFixed(2)} kg`}),y.jsx("div",{className:"small muted",children:"First  last (period)"})]}),y.jsxs("div",{className:"card",children:[y.jsx("div",{className:"card-title",children:"Weight change (smoothed)"}),y.jsx("div",{className:"big",children:(A==null?void 0:A.deltaWeightWma)===null?"":`${A.deltaWeightWma.toFixed(2)} kg`}),y.jsx("div",{className:"small muted",children:"WMA trend"})]}),y.jsxs("div",{className:"card",children:[y.jsx("div",{className:"card-title",children:"Calories (smoothed)"}),y.jsx("div",{className:"big",children:Number.isFinite((v=(x=A==null?void 0:A.last)==null?void 0:x.wma)==null?void 0:v.calories)?`${A.last.wma.calories.toFixed(0)} kcal`:""}),y.jsx("div",{className:"small muted",children:"Latest WMA"})]}),y.jsxs("div",{className:"card",children:[y.jsx("div",{className:"card-title",children:"Strength (smoothed)"}),y.jsx("div",{className:"big",children:Number.isFinite((C=(b=A==null?void 0:A.last)==null?void 0:b.wma)==null?void 0:C.avgStrength)?`${A.last.wma.avgStrength.toFixed(0)} kg`:""}),y.jsx("div",{className:"small muted",children:"Avg of 3 lifts (WMA)"})]}),y.jsxs("div",{className:"card",children:[y.jsx("div",{className:"card-title",children:"Body fat (Navy)"}),y.jsx("div",{className:"big",children:Number.isFinite(A==null?void 0:A.bfPct)?`${A.bfPct.toFixed(1)}%`:""}),y.jsx("div",{className:"small muted",children:"Latest BF% in period"}),(A==null?void 0:A.bfCategory)&&y.jsxs("div",{className:"small",style:{marginTop:6},children:[y.jsx("b",{children:A.bfCategory.label})," ",y.jsxs("span",{className:"muted",children:["(",A.bfCategory.note,")"]})]}),(A==null?void 0:A.bfRanges)&&y.jsxs("div",{className:"small",style:{marginTop:10,lineHeight:1.4},children:[y.jsxs("div",{className:"muted",style:{marginBottom:4},children:["Guideline ranges",(h==null?void 0:h.bfRefMode)==="age"?" (age-adjusted)":"",":"]}),(()=>{var Z;const P=A.bfRanges,N=(Z=A==null?void 0:A.bfCategory)==null?void 0:Z.label;return[{label:"Essential fat",range:P.essential},{label:"Athletes",range:P.athletes},{label:"Fitness",range:P.fitness},{label:"Acceptable / Average",range:P.acceptable},{label:"Obese",range:P.obese}].map(Q=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[y.jsx("span",{style:{fontWeight:N===Q.label?700:400},children:Q.label}),y.jsx("span",{className:"muted",style:{fontWeight:N===Q.label?700:400},children:Q.range})]},Q.label))})()]})]}),y.jsxs("div",{className:"card",children:[y.jsx("div",{className:"card-title",children:"Lean body mass"}),y.jsx("div",{className:"big",children:Number.isFinite(A==null?void 0:A.lbm)?`${A.lbm.toFixed(1)} kg`:""}),y.jsx("div",{className:"small muted",children:"Derived from BF%"})]})]}),y.jsxs("div",{className:"grid",style:{marginTop:14},children:[y.jsx("div",{className:"panel",style:{gridColumn:"span 12"},children:y.jsx(WU,{derived:T})}),y.jsx("div",{className:"panel",style:{gridColumn:"span 12"},children:y.jsx(HU,{derived:T})}),y.jsx("div",{className:"panel",style:{gridColumn:"span 12"},children:y.jsx(qU,{derived:T,liftNames:k})}),y.jsx("div",{className:"panel",style:{gridColumn:"span 12"},children:y.jsx(KU,{derived:T})})]}),t==="insights"&&y.jsx("div",{style:{marginTop:14},children:y.jsx(eB,{derived:T,weekly:S,baseline:E,profile:h||{},liftNames:k})}),T.length>=14&&y.jsx("div",{style:{marginTop:14},children:y.jsx(YU,{weekly:S})})]}):y.jsx("div",{className:"notice info",style:{marginTop:12},children:"No entries in this period."})]})]})}function wB(){return y.jsx(ak,{view:"insights"})}function EB(){const{user:t,login:e,authError:n,clearAuthError:i}=yi(),r=ts(),s=lr(),[o,a]=O.useState(""),[l,c]=O.useState(""),[h,d]=O.useState(!1),[f,g]=O.useState(null);O.useEffect(()=>{i==null||i()},[]),O.useEffect(()=>{t&&r("/dashboard")},[t]);async function _(w){var T;w.preventDefault(),g(null),d(!0);try{await e(o.trim(),l);const E=((T=s.state)==null?void 0:T.from)||"/dashboard";r(E)}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Log in"}),y.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&y.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),y.jsxs("form",{onSubmit:_,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:l,onChange:w=>c(w.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),y.jsx(Xa,{className:"btn",to:"/reset-password",children:"Forgot password"}),y.jsx(Xa,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function TB(){const{signup:t,authError:e,clearAuthError:n}=yi(),i=ts(),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState(""),[h,d]=O.useState(!1),[f,g]=O.useState(null);O.useEffect(()=>{n==null||n()},[]);async function _(w){if(w.preventDefault(),g(null),o!==l){g({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Create account"}),y.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&y.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),y.jsxs("form",{onSubmit:_,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:r,onChange:w=>s(w.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"password",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm password"}),y.jsx("input",{value:l,onChange:w=>c(w.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),y.jsx(Xa,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function SB(){const{resetPassword:t,authError:e,clearAuthError:n}=yi(),[i,r]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(!1);O.useEffect(()=>{n==null||n()},[]);async function c(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Reset password"}),y.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&y.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),y.jsxs("form",{onSubmit:c,style:{marginTop:12},children:[y.jsx("div",{className:"row",children:y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),y.jsx(Xa,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function oE(t){const e=t==null?"":String(t);return e.includes(",")||e.includes('"')||e.includes(`
`)?'"'+e.replaceAll('"','""')+'"':e}function xB({entries:t,derived:e,profile:n}){var a,l,c,h,d,f;const i=n!=null&&n.liftNames&&n.liftNames.length===3?n.liftNames:["Lift 1","Lift 2","Lift 3"],s=[["dateIso","weightKg","proteinG","carbsG","fatsG","calories","lift1Name","lift2Name","lift3Name","lift1Kg","lift2Kg","lift3Kg","avgStrengthKg","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bfPct","lbmKg","wma_weightKg","wma_calories","wma_lift1Kg","wma_lift2Kg","wma_lift3Kg","wma_avgStrengthKg"].map(oE).join(",")],o=new Map(e.map(g=>[g.dateIso,g]));for(const g of t){const _=o.get(g.dateIso),w=[g.dateIso,g.weight??"",g.protein??"",g.carbs??"",g.fats??"",(_==null?void 0:_.calories)??"",i[0],i[1],i[2],(_==null?void 0:_.liftA_raw)??"",(_==null?void 0:_.liftB_raw)??"",(_==null?void 0:_.liftC_raw)??"",(_==null?void 0:_.avgStrength)??"",g.neck??"",g.waist??"",g.hip??"",g.neck1??"",g.neck2??"",g.neck3??"",g.waist1??"",g.waist2??"",g.waist3??"",g.hip1??"",g.hip2??"",g.hip3??"",(_==null?void 0:_.bfPct)??"",(_==null?void 0:_.lbm)??"",((a=_==null?void 0:_.wma)==null?void 0:a.weight)??"",((l=_==null?void 0:_.wma)==null?void 0:l.calories)??"",((c=_==null?void 0:_.wma)==null?void 0:c.liftA)??"",((h=_==null?void 0:_.wma)==null?void 0:h.liftB)??"",((d=_==null?void 0:_.wma)==null?void 0:d.liftC)??"",((f=_==null?void 0:_.wma)==null?void 0:f.avgStrength)??""];s.push(w.map(oE).join(","))}return s}function IB(t,e){const n=new Blob([e.join(`
`)],{type:"text/csv;charset=utf-8"}),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(i)}function bB(){const{user:t,logout:e,updatePassword:n}=yi(),{profile:i,updateProfile:r,profileError:s}=Zm(),o=ts(),[a]=PS(),l=a.get("setup")==="1",[c,h]=O.useState(""),[d,f]=O.useState(""),[g,_]=O.useState(""),[w,T]=O.useState(""),[E,S]=O.useState(!1),[k,A]=O.useState("standard"),[M,D]=O.useState(["Bench Press","Squat","Deadlift"]),[x,v]=O.useState(""),[b,C]=O.useState(""),[P,N]=O.useState(!1),[R,Z]=O.useState(null),[Q,le]=O.useState([]);O.useEffect(()=>{if(!t)return;const $=ey(t.uid,J=>le(J),()=>{});return()=>$()},[t]),O.useEffect(()=>{i&&(h(i.sex||""),f(i.height??""),_(i.age??""),T(i.targetWeight??""),S(!!i.triplemeasurements),A(i.bfRefMode==="age"?"age":"standard"),D(Array.isArray(i.liftNames)&&i.liftNames.length===3?i.liftNames:["Bench Press","Squat","Deadlift"]))},[i]);const se=O.useMemo(()=>ty(Q,i||{}),[Q,i]);async function B($){var J;if((J=$==null?void 0:$.preventDefault)==null||J.call($),!!t){Z(null),N(!0);try{const ne=d===""?"":Number(d);if(ne!==""&&(!Number.isFinite(ne)||ne<=0))throw new Error("Height must be a positive number (cm).");const ye=g===""?"":Number(g);if(ye!==""&&(!Number.isFinite(ye)||ye<=0))throw new Error("Age must be a positive number.");const Ee=w===""?"":Number(w);if(Ee!==""&&(!Number.isFinite(Ee)||Ee<=0))throw new Error("Target weight must be a positive number (kg).");const Te=(M||[]).map(Fe=>String(Fe||"").trim());if(Te.length!==3||Te.some(Fe=>!Fe))throw new Error("Please set 3 lift names.");await r({sex:c,height:ne===""?"":ne,age:ye===""?"":ye,targetWeight:Ee===""?"":Ee,triplemeasurements:!!E,liftNames:Te,bfRefMode:k==="age"?"age":"standard"}),Z({type:"success",text:"Profile updated."}),l&&c&&ne&&o("/dashboard")}catch(ne){Z({type:"error",text:(ne==null?void 0:ne.message)||"Failed to update profile."})}finally{N(!1)}}}async function q($){if($.preventDefault(),Z(null),!x||x.length<6){Z({type:"error",text:"Password must be at least 6 characters."});return}if(x!==b){Z({type:"error",text:"Passwords do not match."});return}N(!0);try{await n(x),v(""),C(""),Z({type:"success",text:"Password updated."})}catch(J){Z({type:"error",text:(J==null?void 0:J.message)||"Failed to update password."})}finally{N(!1)}}function K(){const $=xB({entries:Q,derived:se,profile:i});IB("body-recomp-tracker.csv",$)}return y.jsxs(y.Fragment,{children:[l&&y.jsxs("div",{className:"notice info",style:{marginTop:14},children:[y.jsx("b",{children:"Welcome."})," Set ",y.jsx("b",{children:"sex"})," + ",y.jsx("b",{children:"height"})," to unlock Navy BF% + LBM and weekly analysis."]}),s&&y.jsx("div",{className:"notice error",style:{marginTop:14},children:s}),R&&y.jsx("div",{className:`notice ${R.type==="error"?"error":R.type==="success"?"success":"info"}`,style:{marginTop:14},children:R.text}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Profile & Settings"}),y.jsx("div",{className:"muted",children:"These settings affect calculations, charts, and exports."})]}),y.jsxs("form",{onSubmit:B,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Sex (required for Navy method)"}),y.jsxs("select",{value:c,onChange:$=>h($.target.value),required:!0,children:[y.jsx("option",{value:"",children:"Select"}),y.jsx("option",{value:"male",children:"Male"}),y.jsx("option",{value:"female",children:"Female"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Height (cm) (required for Navy method)"}),y.jsx("input",{value:d,onChange:$=>f($.target.value),inputMode:"decimal",placeholder:"e.g. 175",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Age (optional)"}),y.jsx("input",{value:g,onChange:$=>_($.target.value),inputMode:"decimal",placeholder:"e.g. 26"}),y.jsx("div",{className:"small",children:"Used only for optional reference ranges (not for calculations)."})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"BF% reference ranges"}),y.jsxs("select",{value:k,onChange:$=>A($.target.value),children:[y.jsx("option",{value:"standard",children:"Standard (ACE categories)"}),y.jsx("option",{value:"age",children:"Age-adjusted (heuristic)"})]}),y.jsx("div",{className:"small",children:"If set to age-adjusted, the app shifts average/obese cutoffs slightly based on age."})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Target weight (kg) (optional)"}),y.jsx("input",{value:w,onChange:$=>T($.target.value),inputMode:"decimal",placeholder:"e.g. 82"})]})]}),y.jsx("div",{className:"row",style:{marginTop:8},children:y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Strength lifts (weekly check-in)"}),y.jsx("div",{className:"muted",style:{marginBottom:6},children:"Pick 3 lifts you actually test. Defaults are the big 3."}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 1"}),y.jsx("input",{value:M[0]||"",onChange:$=>D([$.target.value,M[1],M[2]])})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 2"}),y.jsx("input",{value:M[1]||"",onChange:$=>D([M[0],$.target.value,M[2]])})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 3"}),y.jsx("input",{value:M[2]||"",onChange:$=>D([M[0],M[1],$.target.value])})]})]}),y.jsx("div",{className:"small",children:"Tip: if you change the lifts mid-cycle, your strength trend continuity becomes mixed."})]})}),y.jsx("div",{className:"row",style:{marginTop:10},children:y.jsxs("label",{className:"toggle",children:[y.jsx("input",{type:"checkbox",checked:E,onChange:$=>S($.target.checked)}),y.jsx("span",{children:"Take multiple measurements (3 per site) for Navy method"})]})}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:P,children:P?"Saving":"Save"}),y.jsx("button",{type:"button",className:"btn",onClick:K,children:"Export CSV"}),y.jsx("button",{type:"button",className:"btn danger",onClick:()=>e().then(()=>o("/login")),children:"Log out"})]})]})]}),y.jsxs("div",{className:"panel",style:{marginTop:14},children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Change password"}),y.jsx("div",{className:"muted",children:"Requires a recent login in some cases."})]}),y.jsxs("form",{onSubmit:q,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"New password"}),y.jsx("input",{value:x,onChange:$=>v($.target.value),type:"password"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm password"}),y.jsx("input",{value:b,onChange:$=>C($.target.value),type:"password"})]})]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn",disabled:P,children:P?"Updating":"Update password"})})]})]})]})}function kB(t,e){const n=Jr(t).getTime(),i=Jr(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function zt(t){if(t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function Er(t,e){const n=zt(e);if(!Number.isFinite(n))throw new Error(`${t} is required.`);return n}function CB({onAdd:t,tripleEnabled:e,liftNames:n,lastStrengthIso:i}){const[r,s]=O.useState(Qh()),[o,a]=O.useState(""),[l,c]=O.useState(""),[h,d]=O.useState(""),[f,g]=O.useState(""),[_,w]=O.useState(!1),[T,E]=O.useState(!1),[S,k]=O.useState(""),[A,M]=O.useState(""),[D,x]=O.useState(""),[v,b]=O.useState(""),[C,P]=O.useState(""),[N,R]=O.useState(""),[Z,Q]=O.useState(""),[le,se]=O.useState(""),[B,q]=O.useState(""),[K,$]=O.useState(""),[J,ne]=O.useState(""),[ye,Ee]=O.useState(""),[Te,Fe]=O.useState(""),[Ml,Ol]=O.useState(""),[hr,dr]=O.useState(""),un=O.useMemo(()=>{if(!i)return!1;const Y=kB(r,i);return Y>=0&&Y<7},[r,i]);O.useEffect(()=>{E(!1)},[r]);async function wo(Y){Y.preventDefault();try{const Pe={dateIso:r,weight:Er("Weight",o),protein:Er("Protein",l),carbs:Er("Carbs",h),fats:Er("Fats",f)};_&&!(un&&!T)&&(Pe.liftA=Er((n==null?void 0:n[0])||"Lift 1",S),Pe.liftB=Er((n==null?void 0:n[1])||"Lift 2",A),Pe.liftC=Er((n==null?void 0:n[2])||"Lift 3",D)),e?(Pe.neck1=zt(Z),Pe.neck2=zt(le),Pe.neck3=zt(B),Pe.waist1=zt(K),Pe.waist2=zt(J),Pe.waist3=zt(ye),Pe.hip1=zt(Te),Pe.hip2=zt(Ml),Pe.hip3=zt(hr)):(Pe.neck=zt(v),Pe.waist=zt(C),Pe.hip=zt(N)),await t(Pe),a(""),c(""),d(""),g(""),w(!1),E(!1),k(""),M(""),x(""),b(""),P(""),R(""),Q(""),se(""),q(""),$(""),ne(""),Ee(""),Fe(""),Ol(""),dr("")}catch(Pe){alert((Pe==null?void 0:Pe.message)||"Invalid input.")}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Add Entry"}),y.jsx("div",{className:"muted",children:"Daily bodyweight + macros. Strength and Navy measurements are optional weekly check-ins."})]}),y.jsxs("form",{onSubmit:wo,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Date"}),y.jsx("input",{type:"date",value:r,onChange:Y=>s(Y.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Weight (kg)"}),y.jsx("input",{value:o,onChange:Y=>a(Y.target.value),inputMode:"decimal",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Protein (g)"}),y.jsx("input",{value:l,onChange:Y=>c(Y.target.value),inputMode:"decimal",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Carbs (g)"}),y.jsx("input",{value:h,onChange:Y=>d(Y.target.value),inputMode:"decimal",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Fats (g)"}),y.jsx("input",{value:f,onChange:Y=>g(Y.target.value),inputMode:"decimal",required:!0})]})]}),y.jsxs("div",{className:"card",style:{marginTop:12},children:[y.jsx("div",{className:"card-title",children:"Strength check-in (weekly)"}),y.jsxs("label",{className:"toggle",style:{marginTop:6},children:[y.jsx("input",{type:"checkbox",checked:_,onChange:Y=>w(Y.target.checked)}),y.jsx("span",{children:"Log strength today (recommended once per week)"})]}),_&&un&&!T&&y.jsxs("div",{className:"notice warn",style:{marginTop:10},children:["Strength was already logged on ",y.jsx("b",{children:i})," (within 7 days). Edit that day in ",y.jsx("b",{children:"All Entries"}),", or enable override below."]}),_&&un&&y.jsxs("label",{className:"toggle",style:{marginTop:10},children:[y.jsx("input",{type:"checkbox",checked:T,onChange:Y=>E(Y.target.checked)}),y.jsx("span",{children:"Override weekly check-in (not recommended)"})]}),y.jsxs("div",{className:"row",style:{marginTop:10,opacity:_&&un&&!T?.5:1},children:[y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[(n==null?void 0:n[0])||"Lift 1"," (kg)"]}),y.jsx("input",{value:S,onChange:Y=>k(Y.target.value),inputMode:"decimal",disabled:!_||un&&!T})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[(n==null?void 0:n[1])||"Lift 2"," (kg)"]}),y.jsx("input",{value:A,onChange:Y=>M(Y.target.value),inputMode:"decimal",disabled:!_||un&&!T})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[(n==null?void 0:n[2])||"Lift 3"," (kg)"]}),y.jsx("input",{value:D,onChange:Y=>x(Y.target.value),inputMode:"decimal",disabled:!_||un&&!T})]})]}),y.jsx("div",{className:"small",style:{marginTop:6},children:"Trend lines are smoothed and forward-filled from your latest check-in, so you dont need daily maxes."})]}),y.jsxs("div",{className:"card",style:{marginTop:12},children:[y.jsx("div",{className:"card-title",children:"Navy method measurements (weekly)"}),y.jsx("div",{className:"muted",children:"Optional. Log once per week for BF% + Lean Body Mass tracking."}),e?y.jsxs("div",{style:{marginTop:10},children:[y.jsx("div",{className:"small",children:"Take 3 measurements per site and the app will average them."}),y.jsxs("div",{className:"row",style:{marginTop:8},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 1"}),y.jsx("input",{value:Z,onChange:Y=>Q(Y.target.value),inputMode:"decimal"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 2"}),y.jsx("input",{value:le,onChange:Y=>se(Y.target.value),inputMode:"decimal"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 3"}),y.jsx("input",{value:B,onChange:Y=>q(Y.target.value),inputMode:"decimal"})]})]}),y.jsxs("div",{className:"row",style:{marginTop:8},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 1"}),y.jsx("input",{value:K,onChange:Y=>$(Y.target.value),inputMode:"decimal"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 2"}),y.jsx("input",{value:J,onChange:Y=>ne(Y.target.value),inputMode:"decimal"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 3"}),y.jsx("input",{value:ye,onChange:Y=>Ee(Y.target.value),inputMode:"decimal"})]})]}),y.jsxs("div",{className:"row",style:{marginTop:8},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 1"}),y.jsx("input",{value:Te,onChange:Y=>Fe(Y.target.value),inputMode:"decimal"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 2"}),y.jsx("input",{value:Ml,onChange:Y=>Ol(Y.target.value),inputMode:"decimal"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 3"}),y.jsx("input",{value:hr,onChange:Y=>dr(Y.target.value),inputMode:"decimal"})]})]})]}):y.jsxs("div",{className:"row",style:{marginTop:10},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck (cm)"}),y.jsx("input",{value:v,onChange:Y=>b(Y.target.value),inputMode:"decimal"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist (cm)"}),y.jsx("input",{value:C,onChange:Y=>P(Y.target.value),inputMode:"decimal"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip (cm) (women only)"}),y.jsx("input",{value:N,onChange:Y=>R(Y.target.value),inputMode:"decimal"})]})]})]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",children:"Add entry"})})]})]})}function AB(t){return t==null?"":String(t)}function PB(t){if(t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function RB({userId:t,entries:e,tripleEnabled:n,liftNames:i}){const[r,s]=O.useState(!1),[o,a]=O.useState(null),l=Array.isArray(i)&&i.length===3?i:["Lift 1","Lift 2","Lift 3"],c=O.useMemo(()=>{const f=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"liftA",label:l[0]},{key:"liftB",label:l[1]},{key:"liftC",label:l[2]}];return n?f.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"},{key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"}):f.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"},{key:"hip",label:"Hip"}),f.push({key:"_actions",label:"Actions",readOnly:!0}),f},[n,l]);async function h(f,g,_){if(!(g==="dateIso"||g==="_actions")){a(null),s(!0);try{await oB(t,f,{[g]:PB(_)}),a({type:"success",text:"Saved."})}catch(w){a({type:"error",text:(w==null?void 0:w.message)||"Failed to save."})}finally{s(!1)}}}async function d(f){if(confirm(`Delete entry for ${f}?`)){a(null),s(!0);try{await aB(t,f),a({type:"success",text:"Deleted."})}catch(g){a({type:"error",text:(g==null?void 0:g.message)||"Failed to delete."})}finally{s(!1)}}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"All Entries"}),y.jsxs("div",{className:"muted",children:["Inline edit  blur to save. ",r?"Saving":""]})]}),o&&y.jsx("div",{className:`notice ${o.type==="error"?"error":"success"}`,style:{marginTop:12},children:o.text}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsx("tr",{children:c.map(f=>y.jsx("th",{children:f.label},f.key))})}),y.jsx("tbody",{children:e.map(f=>y.jsx("tr",{children:c.map(g=>g.key==="_actions"?y.jsx("td",{children:y.jsx("button",{className:"btn danger",onClick:()=>d(f.dateIso),children:"Delete"})},g.key):g.readOnly?y.jsx("td",{children:f[g.key]},g.key):y.jsx("td",{children:y.jsx("input",{defaultValue:AB(f[g.key]),onBlur:_=>h(f.dateIso,g.key,_.target.value),inputMode:"decimal"})},g.key))},f.dateIso))})]})})]})}function NB(t){for(let e=t.length-1;e>=0;e--){const n=t[e],i=n.liftA??n.bench,r=n.liftB??n.squat,s=n.liftC??n.deadlift;if(Number.isFinite(i)||Number.isFinite(r)||Number.isFinite(s))return n.dateIso}return null}function DB(){const{user:t}=yi(),{profile:e}=Zm(),[n,i]=O.useState([]),[r,s]=O.useState(null);O.useEffect(()=>{if(!t)return;const h=ey(t.uid,d=>i(d),d=>s((d==null?void 0:d.message)||"Failed to load entries."));return()=>h()},[t]);const o=!!(e!=null&&e.triplemeasurements),a=e!=null&&e.liftNames&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],l=O.useMemo(()=>NB(n),[n]);O.useMemo(()=>ty(n,e||{}),[n,e]);async function c(h){t&&(s(null),await sB(t.uid,h.dateIso,h))}return y.jsxs(y.Fragment,{children:[r&&y.jsx("div",{className:"notice error",style:{marginTop:14},children:r}),y.jsx(CB,{onAdd:c,tripleEnabled:o,liftNames:a,lastStrengthIso:l}),y.jsx("div",{style:{marginTop:14},children:y.jsx(RB,{userId:t==null?void 0:t.uid,entries:n,tripleEnabled:o,liftNames:a})})]})}function MB(){return y.jsxs(y.Fragment,{children:[y.jsx(BV,{}),y.jsx("div",{className:"app-shell",children:y.jsxs(iP,{children:[y.jsx(bn,{path:"/",element:y.jsx(up,{to:"/dashboard",replace:!0})}),y.jsx(bn,{path:"/dashboard",element:y.jsx(ak,{})}),y.jsx(bn,{path:"/insights",element:y.jsx(wB,{})}),y.jsx(bn,{path:"/login",element:y.jsx(EB,{})}),y.jsx(bn,{path:"/signup",element:y.jsx(TB,{})}),y.jsx(bn,{path:"/reset-password",element:y.jsx(SB,{})}),y.jsx(bn,{path:"/profile",element:y.jsx(z0,{children:y.jsx(bB,{})})}),y.jsx(bn,{path:"/entry",element:y.jsx(z0,{children:y.jsx(DB,{})})}),y.jsx(bn,{path:"*",element:y.jsx(up,{to:"/dashboard",replace:!0})})]})})]})}gf.createRoot(document.getElementById("root")).render(y.jsx(yE.StrictMode,{children:y.jsx(dP,{basename:"/Body-Recomp-Tracker/",children:y.jsx(UV,{children:y.jsx(iB,{children:y.jsx(MB,{})})})})}));
