var bk=Object.defineProperty;var kk=(t,e,n)=>e in t?bk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>kk(t,typeof e!="symbol"?e+"":e,n);function Ck(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Ak(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jw={exports:{}},Kc={},Zw={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=Symbol.for("react.element"),Pk=Symbol.for("react.portal"),Rk=Symbol.for("react.fragment"),Nk=Symbol.for("react.strict_mode"),Dk=Symbol.for("react.profiler"),Mk=Symbol.for("react.provider"),Ok=Symbol.for("react.context"),Lk=Symbol.for("react.forward_ref"),Vk=Symbol.for("react.suspense"),Fk=Symbol.for("react.memo"),jk=Symbol.for("react.lazy"),Yy=Symbol.iterator;function Uk(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var eE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tE=Object.assign,nE={};function no(t,e,n){this.props=t,this.context=e,this.refs=nE,this.updater=n||eE}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iE(){}iE.prototype=no.prototype;function zp(t,e,n){this.props=t,this.context=e,this.refs=nE,this.updater=n||eE}var $p=zp.prototype=new iE;$p.constructor=zp;tE($p,no.prototype);$p.isPureReactComponent=!0;var Xy=Array.isArray,rE=Object.prototype.hasOwnProperty,Wp={current:null},sE={key:!0,ref:!0,__self:!0,__source:!0};function oE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)rE.call(e,i)&&!sE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:sl,type:t,key:s,ref:o,props:r,_owner:Wp.current}}function Bk(t,e){return{$$typeof:sl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hp(t){return typeof t=="object"&&t!==null&&t.$$typeof===sl}function zk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jy=/\/+/g;function ud(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zk(""+t.key):e.toString(36)}function Iu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sl:case Pk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+ud(o,0):i,Xy(r)?(n="",t!=null&&(n=t.replace(Jy,"$&/")+"/"),Iu(r,e,n,"",function(u){return u})):r!=null&&(Hp(r)&&(r=Bk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Jy,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Xy(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+ud(s,a);o+=Iu(s,e,n,l,r)}else if(l=Uk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+ud(s,a++),o+=Iu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bl(t,e,n){if(t==null)return t;var i=[],r=0;return Iu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function $k(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},Su={transition:null},Wk={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Su,ReactCurrentOwner:Wp};function aE(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Bl,forEach:function(t,e,n){Bl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bl(t,function(){e++}),e},toArray:function(t){return Bl(t,function(e){return e})||[]},only:function(t){if(!Hp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=no;ie.Fragment=Rk;ie.Profiler=Dk;ie.PureComponent=zp;ie.StrictMode=Nk;ie.Suspense=Vk;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wk;ie.act=aE;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=tE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)rE.call(e,l)&&!sE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:sl,type:t.type,key:r,ref:s,props:i,_owner:o}};ie.createContext=function(t){return t={$$typeof:Ok,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mk,_context:t},t.Consumer=t};ie.createElement=oE;ie.createFactory=function(t){var e=oE.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:Lk,render:t}};ie.isValidElement=Hp;ie.lazy=function(t){return{$$typeof:jk,_payload:{_status:-1,_result:t},_init:$k}};ie.memo=function(t,e){return{$$typeof:Fk,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Su.transition;Su.transition={};try{t()}finally{Su.transition=e}};ie.unstable_act=aE;ie.useCallback=function(t,e){return St.current.useCallback(t,e)};ie.useContext=function(t){return St.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return St.current.useDeferredValue(t)};ie.useEffect=function(t,e){return St.current.useEffect(t,e)};ie.useId=function(){return St.current.useId()};ie.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return St.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};ie.useRef=function(t){return St.current.useRef(t)};ie.useState=function(t){return St.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return St.current.useTransition()};ie.version="18.3.1";Zw.exports=ie;var O=Zw.exports;const qp=Ak(O),Hk=Ck({__proto__:null,default:qp},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=O,Kk=Symbol.for("react.element"),Gk=Symbol.for("react.fragment"),Qk=Object.prototype.hasOwnProperty,Yk=qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xk={key:!0,ref:!0,__self:!0,__source:!0};function lE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Qk.call(e,i)&&!Xk.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Kk,type:t,key:s,ref:o,props:r,_owner:Yk.current}}Kc.Fragment=Gk;Kc.jsx=lE;Kc.jsxs=lE;Jw.exports=Kc;var E=Jw.exports,uf={},uE={exports:{}},Wt={},cE={exports:{}},hE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var G=z.length;z.push(H);e:for(;0<G;){var ce=G-1>>>1,re=z[ce];if(0<r(re,H))z[ce]=H,z[G]=re,G=ce;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var H=z[0],G=z.pop();if(G!==H){z[0]=G;e:for(var ce=0,re=z.length,fe=re>>>1;ce<fe;){var ze=2*(ce+1)-1,$e=z[ze],We=ze+1,rn=z[We];if(0>r($e,G))We<re&&0>r(rn,$e)?(z[ce]=rn,z[We]=G,ce=We):(z[ce]=$e,z[ze]=G,ce=ze);else if(We<re&&0>r(rn,G))z[ce]=rn,z[We]=G,ce=We;else break e}}return H}function r(z,H){var G=z.sortIndex-H.sortIndex;return G!==0?G:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,m=!1,y=!1,v=!1,I=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var H=n(u);H!==null;){if(H.callback===null)i(u);else if(H.startTime<=z)i(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function R(z){if(v=!1,b(z),!y)if(n(l)!==null)y=!0,ge(D);else{var H=n(u);H!==null&&we(R,H.startTime-z)}}function D(z,H){y=!1,v&&(v=!1,w(_),_=-1),m=!0;var G=f;try{for(b(H),d=n(l);d!==null&&(!(d.expirationTime>H)||z&&!P());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,f=d.priorityLevel;var re=ce(d.expirationTime<=H);H=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&i(l),b(H)}else i(l);d=n(l)}if(d!==null)var fe=!0;else{var ze=n(u);ze!==null&&we(R,ze.startTime-H),fe=!1}return fe}finally{d=null,f=G,m=!1}}var L=!1,x=null,_=-1,k=5,A=-1;function P(){return!(t.unstable_now()-A<k)}function N(){if(x!==null){var z=t.unstable_now();A=z;var H=!0;try{H=x(!0,z)}finally{H?C():(L=!1,x=null)}}else L=!1}var C;if(typeof T=="function")C=function(){T(N)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ne=ee.port2;ee.port1.onmessage=N,C=function(){ne.postMessage(null)}}else C=function(){I(N,0)};function ge(z){x=z,L||(L=!0,C())}function we(z,H){_=I(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,ge(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var G=f;f=H;try{return z()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=f;f=z;try{return H()}finally{f=G}},t.unstable_scheduleCallback=function(z,H,G){var ce=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ce+G:ce):G=ce,z){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,z={id:h++,callback:H,priorityLevel:z,startTime:G,expirationTime:re,sortIndex:-1},G>ce?(z.sortIndex=G,e(u,z),n(l)===null&&z===n(u)&&(v?(w(_),_=-1):v=!0,we(R,G-ce))):(z.sortIndex=re,e(l,z),y||m||(y=!0,ge(D))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var H=f;return function(){var G=f;f=H;try{return z.apply(this,arguments)}finally{f=G}}}})(hE);cE.exports=hE;var Jk=cE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk=O,$t=Jk;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dE=new Set,Sa={};function Kr(t,e){Os(t,e),Os(t+"Capture",e)}function Os(t,e){for(Sa[t]=e,t=0;t<e.length;t++)dE.add(e[t])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cf=Object.prototype.hasOwnProperty,eC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zy={},e_={};function tC(t){return cf.call(e_,t)?!0:cf.call(Zy,t)?!1:eC.test(t)?e_[t]=!0:(Zy[t]=!0,!1)}function nC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iC(t,e,n,i){if(e===null||typeof e>"u"||nC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kp=/[\-:]([a-z])/g;function Gp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kp,Gp);ot[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kp,Gp);ot[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kp,Gp);ot[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qp(t,e,n,i){var r=ot.hasOwnProperty(e)?ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iC(e,n,r,i)&&(n=null),i||r===null?tC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ui=Zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zl=Symbol.for("react.element"),hs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),Yp=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),fE=Symbol.for("react.provider"),pE=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),df=Symbol.for("react.suspense"),ff=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),Ei=Symbol.for("react.lazy"),gE=Symbol.for("react.offscreen"),t_=Symbol.iterator;function bo(t){return t===null||typeof t!="object"?null:(t=t_&&t[t_]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,cd;function zo(t){if(cd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cd=e&&e[1]||""}return`
`+cd+t}var hd=!1;function dd(t,e){if(!t||hd)return"";hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function rC(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=dd(t.type,!1),t;case 11:return t=dd(t.type.render,!1),t;case 1:return t=dd(t.type,!0),t;default:return""}}function pf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case hs:return"Portal";case hf:return"Profiler";case Yp:return"StrictMode";case df:return"Suspense";case ff:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pE:return(t.displayName||"Context")+".Consumer";case fE:return(t._context.displayName||"Context")+".Provider";case Xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jp:return e=t.displayName||null,e!==null?e:pf(t.type)||"Memo";case Ei:e=t._payload,t=t._init;try{return pf(t(e))}catch{}}return null}function sC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pf(e);case 8:return e===Yp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oC(t){var e=mE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $l(t){t._valueTracker||(t._valueTracker=oC(t))}function yE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=mE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gf(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function n_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Qi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _E(t,e){e=e.checked,e!=null&&Qp(t,"checked",e,!1)}function mf(t,e){_E(t,e);var n=Qi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yf(t,e.type,n):e.hasOwnProperty("defaultValue")&&yf(t,e.type,Qi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function i_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yf(t,e,n){(e!=="number"||Gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $o=Array.isArray;function Ss(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Qi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function _f(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if($o(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qi(n)}}function vE(t,e){var n=Qi(e.value),i=Qi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function s_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wl,EE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wl=Wl||document.createElement("div"),Wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aC=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(t){aC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ia[e]=ia[t]})});function TE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ia.hasOwnProperty(t)&&ia[t]?(""+e).trim():e+"px"}function IE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=TE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var lC=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wf(t,e){if(e){if(lC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Ef(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tf=null;function Zp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var If=null,xs=null,bs=null;function o_(t){if(t=ll(t)){if(typeof If!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Jc(e),If(t.stateNode,t.type,e))}}function SE(t){xs?bs?bs.push(t):bs=[t]:xs=t}function xE(){if(xs){var t=xs,e=bs;if(bs=xs=null,o_(t),e)for(t=0;t<e.length;t++)o_(e[t])}}function bE(t,e){return t(e)}function kE(){}var fd=!1;function CE(t,e,n){if(fd)return t(e,n);fd=!0;try{return bE(t,e,n)}finally{fd=!1,(xs!==null||bs!==null)&&(kE(),xE())}}function ba(t,e){var n=t.stateNode;if(n===null)return null;var i=Jc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Sf=!1;if(ti)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Sf=!1}function uC(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ra=!1,Qu=null,Yu=!1,xf=null,cC={onError:function(t){ra=!0,Qu=t}};function hC(t,e,n,i,r,s,o,a,l){ra=!1,Qu=null,uC.apply(cC,arguments)}function dC(t,e,n,i,r,s,o,a,l){if(hC.apply(this,arguments),ra){if(ra){var u=Qu;ra=!1,Qu=null}else throw Error(U(198));Yu||(Yu=!0,xf=u)}}function Gr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function a_(t){if(Gr(t)!==t)throw Error(U(188))}function fC(t){var e=t.alternate;if(!e){if(e=Gr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return a_(r),t;if(s===i)return a_(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function PE(t){return t=fC(t),t!==null?RE(t):null}function RE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RE(t);if(e!==null)return e;t=t.sibling}return null}var NE=$t.unstable_scheduleCallback,l_=$t.unstable_cancelCallback,pC=$t.unstable_shouldYield,gC=$t.unstable_requestPaint,Ve=$t.unstable_now,mC=$t.unstable_getCurrentPriorityLevel,eg=$t.unstable_ImmediatePriority,DE=$t.unstable_UserBlockingPriority,Xu=$t.unstable_NormalPriority,yC=$t.unstable_LowPriority,ME=$t.unstable_IdlePriority,Gc=null,bn=null;function _C(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Gc,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:EC,vC=Math.log,wC=Math.LN2;function EC(t){return t>>>=0,t===0?32:31-(vC(t)/wC|0)|0}var Hl=64,ql=4194304;function Wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ju(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Wo(a):(s&=o,s!==0&&(i=Wo(s)))}else o=n&~r,o!==0?i=Wo(o):s!==0&&(i=Wo(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-hn(e),r=1<<n,i|=t[n],e&=~r;return i}function TC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-hn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=TC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function bf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OE(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function pd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ol(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function SC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-hn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function tg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-hn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ye=0;function LE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VE,ng,FE,jE,UE,kf=!1,Kl=[],Li=null,Vi=null,Fi=null,ka=new Map,Ca=new Map,Ii=[],xC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u_(t,e){switch(t){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":ka.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(e.pointerId)}}function Co(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ll(e),e!==null&&ng(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function bC(t,e,n,i,r){switch(e){case"focusin":return Li=Co(Li,t,e,n,i,r),!0;case"dragenter":return Vi=Co(Vi,t,e,n,i,r),!0;case"mouseover":return Fi=Co(Fi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ka.set(s,Co(ka.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ca.set(s,Co(Ca.get(s)||null,t,e,n,i,r)),!0}return!1}function BE(t){var e=Tr(t.target);if(e!==null){var n=Gr(e);if(n!==null){if(e=n.tag,e===13){if(e=AE(n),e!==null){t.blockedOn=e,UE(t.priority,function(){FE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Tf=i,n.target.dispatchEvent(i),Tf=null}else return e=ll(n),e!==null&&ng(e),t.blockedOn=n,!1;e.shift()}return!0}function c_(t,e,n){xu(t)&&n.delete(e)}function kC(){kf=!1,Li!==null&&xu(Li)&&(Li=null),Vi!==null&&xu(Vi)&&(Vi=null),Fi!==null&&xu(Fi)&&(Fi=null),ka.forEach(c_),Ca.forEach(c_)}function Ao(t,e){t.blockedOn===e&&(t.blockedOn=null,kf||(kf=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,kC)))}function Aa(t){function e(r){return Ao(r,t)}if(0<Kl.length){Ao(Kl[0],t);for(var n=1;n<Kl.length;n++){var i=Kl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Li!==null&&Ao(Li,t),Vi!==null&&Ao(Vi,t),Fi!==null&&Ao(Fi,t),ka.forEach(e),Ca.forEach(e),n=0;n<Ii.length;n++)i=Ii[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ii.length&&(n=Ii[0],n.blockedOn===null);)BE(n),n.blockedOn===null&&Ii.shift()}var ks=ui.ReactCurrentBatchConfig,Zu=!0;function CC(t,e,n,i){var r=ye,s=ks.transition;ks.transition=null;try{ye=1,ig(t,e,n,i)}finally{ye=r,ks.transition=s}}function AC(t,e,n,i){var r=ye,s=ks.transition;ks.transition=null;try{ye=4,ig(t,e,n,i)}finally{ye=r,ks.transition=s}}function ig(t,e,n,i){if(Zu){var r=Cf(t,e,n,i);if(r===null)Sd(t,e,i,ec,n),u_(t,i);else if(bC(r,t,e,n,i))i.stopPropagation();else if(u_(t,i),e&4&&-1<xC.indexOf(t)){for(;r!==null;){var s=ll(r);if(s!==null&&VE(s),s=Cf(t,e,n,i),s===null&&Sd(t,e,i,ec,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Sd(t,e,i,null,n)}}var ec=null;function Cf(t,e,n,i){if(ec=null,t=Zp(i),t=Tr(t),t!==null)if(e=Gr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ec=t,null}function zE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mC()){case eg:return 1;case DE:return 4;case Xu:case yC:return 16;case ME:return 536870912;default:return 16}default:return 16}}var Ai=null,rg=null,bu=null;function $E(){if(bu)return bu;var t,e=rg,n=e.length,i,r="value"in Ai?Ai.value:Ai.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return bu=r.slice(t,1<i?1-i:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gl(){return!0}function h_(){return!1}function Ht(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Gl:h_,this.isPropagationStopped=h_,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gl)},persist:function(){},isPersistent:Gl}),e}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sg=Ht(io),al=Ne({},io,{view:0,detail:0}),PC=Ht(al),gd,md,Po,Qc=Ne({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:og,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Po&&(Po&&t.type==="mousemove"?(gd=t.screenX-Po.screenX,md=t.screenY-Po.screenY):md=gd=0,Po=t),gd)},movementY:function(t){return"movementY"in t?t.movementY:md}}),d_=Ht(Qc),RC=Ne({},Qc,{dataTransfer:0}),NC=Ht(RC),DC=Ne({},al,{relatedTarget:0}),yd=Ht(DC),MC=Ne({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),OC=Ht(MC),LC=Ne({},io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VC=Ht(LC),FC=Ne({},io,{data:0}),f_=Ht(FC),jC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BC[t])?!!e[t]:!1}function og(){return zC}var $C=Ne({},al,{key:function(t){if(t.key){var e=jC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:og,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WC=Ht($C),HC=Ne({},Qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p_=Ht(HC),qC=Ne({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:og}),KC=Ht(qC),GC=Ne({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),QC=Ht(GC),YC=Ne({},Qc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XC=Ht(YC),JC=[9,13,27,32],ag=ti&&"CompositionEvent"in window,sa=null;ti&&"documentMode"in document&&(sa=document.documentMode);var ZC=ti&&"TextEvent"in window&&!sa,WE=ti&&(!ag||sa&&8<sa&&11>=sa),g_=" ",m_=!1;function HE(t,e){switch(t){case"keyup":return JC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fs=!1;function eA(t,e){switch(t){case"compositionend":return qE(e);case"keypress":return e.which!==32?null:(m_=!0,g_);case"textInput":return t=e.data,t===g_&&m_?null:t;default:return null}}function tA(t,e){if(fs)return t==="compositionend"||!ag&&HE(t,e)?(t=$E(),bu=rg=Ai=null,fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WE&&e.locale!=="ko"?null:e.data;default:return null}}var nA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nA[t.type]:e==="textarea"}function KE(t,e,n,i){SE(i),e=tc(e,"onChange"),0<e.length&&(n=new sg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var oa=null,Pa=null;function iA(t){rT(t,0)}function Yc(t){var e=ms(t);if(yE(e))return t}function rA(t,e){if(t==="change")return e}var GE=!1;if(ti){var _d;if(ti){var vd="oninput"in document;if(!vd){var __=document.createElement("div");__.setAttribute("oninput","return;"),vd=typeof __.oninput=="function"}_d=vd}else _d=!1;GE=_d&&(!document.documentMode||9<document.documentMode)}function v_(){oa&&(oa.detachEvent("onpropertychange",QE),Pa=oa=null)}function QE(t){if(t.propertyName==="value"&&Yc(Pa)){var e=[];KE(e,Pa,t,Zp(t)),CE(iA,e)}}function sA(t,e,n){t==="focusin"?(v_(),oa=e,Pa=n,oa.attachEvent("onpropertychange",QE)):t==="focusout"&&v_()}function oA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yc(Pa)}function aA(t,e){if(t==="click")return Yc(e)}function lA(t,e){if(t==="input"||t==="change")return Yc(e)}function uA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:uA;function Ra(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!cf.call(e,r)||!pn(t[r],e[r]))return!1}return!0}function w_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E_(t,e){var n=w_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=w_(n)}}function YE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function XE(){for(var t=window,e=Gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gu(t.document)}return e}function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cA(t){var e=XE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YE(n.ownerDocument.documentElement,n)){if(i!==null&&lg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=E_(n,s);var o=E_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hA=ti&&"documentMode"in document&&11>=document.documentMode,ps=null,Af=null,aa=null,Pf=!1;function T_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pf||ps==null||ps!==Gu(i)||(i=ps,"selectionStart"in i&&lg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),aa&&Ra(aa,i)||(aa=i,i=tc(Af,"onSelect"),0<i.length&&(e=new sg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ps)))}function Ql(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gs={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},wd={},JE={};ti&&(JE=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Xc(t){if(wd[t])return wd[t];if(!gs[t])return t;var e=gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JE)return wd[t]=e[n];return t}var ZE=Xc("animationend"),eT=Xc("animationiteration"),tT=Xc("animationstart"),nT=Xc("transitionend"),iT=new Map,I_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(t,e){iT.set(t,e),Kr(e,[t])}for(var Ed=0;Ed<I_.length;Ed++){var Td=I_[Ed],dA=Td.toLowerCase(),fA=Td[0].toUpperCase()+Td.slice(1);nr(dA,"on"+fA)}nr(ZE,"onAnimationEnd");nr(eT,"onAnimationIteration");nr(tT,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(nT,"onTransitionEnd");Os("onMouseEnter",["mouseout","mouseover"]);Os("onMouseLeave",["mouseout","mouseover"]);Os("onPointerEnter",["pointerout","pointerover"]);Os("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function S_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,dC(i,e,void 0,t),t.currentTarget=null}function rT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;S_(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;S_(r,a,u),s=l}}}if(Yu)throw t=xf,Yu=!1,xf=null,t}function Se(t,e){var n=e[Of];n===void 0&&(n=e[Of]=new Set);var i=t+"__bubble";n.has(i)||(sT(e,t,2,!1),n.add(i))}function Id(t,e,n){var i=0;e&&(i|=4),sT(n,t,i,e)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Na(t){if(!t[Yl]){t[Yl]=!0,dE.forEach(function(n){n!=="selectionchange"&&(pA.has(n)||Id(n,!1,t),Id(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yl]||(e[Yl]=!0,Id("selectionchange",!1,e))}}function sT(t,e,n,i){switch(zE(e)){case 1:var r=CC;break;case 4:r=AC;break;default:r=ig}n=r.bind(null,e,n,t),r=void 0,!Sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Sd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Tr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}CE(function(){var u=s,h=Zp(n),d=[];e:{var f=iT.get(t);if(f!==void 0){var m=sg,y=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":m=WC;break;case"focusin":y="focus",m=yd;break;case"focusout":y="blur",m=yd;break;case"beforeblur":case"afterblur":m=yd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=d_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=NC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=KC;break;case ZE:case eT:case tT:m=OC;break;case nT:m=QC;break;case"scroll":m=PC;break;case"wheel":m=XC;break;case"copy":case"cut":case"paste":m=VC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=p_}var v=(e&4)!==0,I=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var T=u,b;T!==null;){b=T;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,w!==null&&(R=ba(T,w),R!=null&&v.push(Da(T,R,b)))),I)break;T=T.return}0<v.length&&(f=new m(f,y,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Tf&&(y=n.relatedTarget||n.fromElement)&&(Tr(y)||y[ni]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Tr(y):null,y!==null&&(I=Gr(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(v=d_,R="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(v=p_,R="onPointerLeave",w="onPointerEnter",T="pointer"),I=m==null?f:ms(m),b=y==null?f:ms(y),f=new v(R,T+"leave",m,n,h),f.target=I,f.relatedTarget=b,R=null,Tr(h)===u&&(v=new v(w,T+"enter",y,n,h),v.target=b,v.relatedTarget=I,R=v),I=R,m&&y)t:{for(v=m,w=y,T=0,b=v;b;b=ss(b))T++;for(b=0,R=w;R;R=ss(R))b++;for(;0<T-b;)v=ss(v),T--;for(;0<b-T;)w=ss(w),b--;for(;T--;){if(v===w||w!==null&&v===w.alternate)break t;v=ss(v),w=ss(w)}v=null}else v=null;m!==null&&x_(d,f,m,v,!1),y!==null&&I!==null&&x_(d,I,y,v,!0)}}e:{if(f=u?ms(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=rA;else if(y_(f))if(GE)D=lA;else{D=oA;var L=sA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=aA);if(D&&(D=D(t,u))){KE(d,D,n,h);break e}L&&L(t,f,u),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&yf(f,"number",f.value)}switch(L=u?ms(u):window,t){case"focusin":(y_(L)||L.contentEditable==="true")&&(ps=L,Af=u,aa=null);break;case"focusout":aa=Af=ps=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,T_(d,n,h);break;case"selectionchange":if(hA)break;case"keydown":case"keyup":T_(d,n,h)}var x;if(ag)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else fs?HE(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(WE&&n.locale!=="ko"&&(fs||_!=="onCompositionStart"?_==="onCompositionEnd"&&fs&&(x=$E()):(Ai=h,rg="value"in Ai?Ai.value:Ai.textContent,fs=!0)),L=tc(u,_),0<L.length&&(_=new f_(_,t,null,n,h),d.push({event:_,listeners:L}),x?_.data=x:(x=qE(n),x!==null&&(_.data=x)))),(x=ZC?eA(t,n):tA(t,n))&&(u=tc(u,"onBeforeInput"),0<u.length&&(h=new f_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=x))}rT(d,e)})}function Da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ba(t,n),s!=null&&i.unshift(Da(t,s,r)),s=ba(t,e),s!=null&&i.push(Da(t,s,r))),t=t.return}return i}function ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function x_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=ba(n,s),l!=null&&o.unshift(Da(n,l,a))):r||(l=ba(n,s),l!=null&&o.push(Da(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gA=/\r\n?/g,mA=/\u0000|\uFFFD/g;function b_(t){return(typeof t=="string"?t:""+t).replace(gA,`
`).replace(mA,"")}function Xl(t,e,n){if(e=b_(e),b_(t)!==e&&n)throw Error(U(425))}function nc(){}var Rf=null,Nf=null;function Df(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mf=typeof setTimeout=="function"?setTimeout:void 0,yA=typeof clearTimeout=="function"?clearTimeout:void 0,k_=typeof Promise=="function"?Promise:void 0,_A=typeof queueMicrotask=="function"?queueMicrotask:typeof k_<"u"?function(t){return k_.resolve(null).then(t).catch(vA)}:Mf;function vA(t){setTimeout(function(){throw t})}function xd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Aa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Aa(e)}function ji(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function C_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ro=Math.random().toString(36).slice(2),Sn="__reactFiber$"+ro,Ma="__reactProps$"+ro,ni="__reactContainer$"+ro,Of="__reactEvents$"+ro,wA="__reactListeners$"+ro,EA="__reactHandles$"+ro;function Tr(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ni]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=C_(t);t!==null;){if(n=t[Sn])return n;t=C_(t)}return e}t=n,n=t.parentNode}return null}function ll(t){return t=t[Sn]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Jc(t){return t[Ma]||null}var Lf=[],ys=-1;function ir(t){return{current:t}}function be(t){0>ys||(t.current=Lf[ys],Lf[ys]=null,ys--)}function Ee(t,e){ys++,Lf[ys]=t.current,t.current=e}var Yi={},_t=ir(Yi),Nt=ir(!1),Mr=Yi;function Ls(t,e){var n=t.type.contextTypes;if(!n)return Yi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dt(t){return t=t.childContextTypes,t!=null}function ic(){be(Nt),be(_t)}function A_(t,e,n){if(_t.current!==Yi)throw Error(U(168));Ee(_t,e),Ee(Nt,n)}function oT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,sC(t)||"Unknown",r));return Ne({},n,i)}function rc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yi,Mr=_t.current,Ee(_t,t),Ee(Nt,Nt.current),!0}function P_(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=oT(t,e,Mr),i.__reactInternalMemoizedMergedChildContext=t,be(Nt),be(_t),Ee(_t,t)):be(Nt),Ee(Nt,n)}var Hn=null,Zc=!1,bd=!1;function aT(t){Hn===null?Hn=[t]:Hn.push(t)}function TA(t){Zc=!0,aT(t)}function rr(){if(!bd&&Hn!==null){bd=!0;var t=0,e=ye;try{var n=Hn;for(ye=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Hn=null,Zc=!1}catch(r){throw Hn!==null&&(Hn=Hn.slice(t+1)),NE(eg,rr),r}finally{ye=e,bd=!1}}return null}var _s=[],vs=0,sc=null,oc=0,Kt=[],Gt=0,Or=null,Kn=1,Gn="";function yr(t,e){_s[vs++]=oc,_s[vs++]=sc,sc=t,oc=e}function lT(t,e,n){Kt[Gt++]=Kn,Kt[Gt++]=Gn,Kt[Gt++]=Or,Or=t;var i=Kn;t=Gn;var r=32-hn(i)-1;i&=~(1<<r),n+=1;var s=32-hn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Kn=1<<32-hn(e)+r|n<<r|i,Gn=s+t}else Kn=1<<s|n<<r|i,Gn=t}function ug(t){t.return!==null&&(yr(t,1),lT(t,1,0))}function cg(t){for(;t===sc;)sc=_s[--vs],_s[vs]=null,oc=_s[--vs],_s[vs]=null;for(;t===Or;)Or=Kt[--Gt],Kt[Gt]=null,Gn=Kt[--Gt],Kt[Gt]=null,Kn=Kt[--Gt],Kt[Gt]=null}var zt=null,Ut=null,ke=!1,un=null;function uT(t,e){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function R_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ut=ji(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Or!==null?{id:Kn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ut=null,!0):!1;default:return!1}}function Vf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ff(t){if(ke){var e=Ut;if(e){var n=e;if(!R_(t,e)){if(Vf(t))throw Error(U(418));e=ji(n.nextSibling);var i=zt;e&&R_(t,e)?uT(i,n):(t.flags=t.flags&-4097|2,ke=!1,zt=t)}}else{if(Vf(t))throw Error(U(418));t.flags=t.flags&-4097|2,ke=!1,zt=t}}}function N_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Jl(t){if(t!==zt)return!1;if(!ke)return N_(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Df(t.type,t.memoizedProps)),e&&(e=Ut)){if(Vf(t))throw cT(),Error(U(418));for(;e;)uT(t,e),e=ji(e.nextSibling)}if(N_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ut=ji(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=zt?ji(t.stateNode.nextSibling):null;return!0}function cT(){for(var t=Ut;t;)t=ji(t.nextSibling)}function Vs(){Ut=zt=null,ke=!1}function hg(t){un===null?un=[t]:un.push(t)}var IA=ui.ReactCurrentBatchConfig;function Ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Zl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function D_(t){var e=t._init;return e(t._payload)}function hT(t){function e(w,T){if(t){var b=w.deletions;b===null?(w.deletions=[T],w.flags|=16):b.push(T)}}function n(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function i(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function r(w,T){return w=$i(w,T),w.index=0,w.sibling=null,w}function s(w,T,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<T?(w.flags|=2,T):b):(w.flags|=2,T)):(w.flags|=1048576,T)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,T,b,R){return T===null||T.tag!==6?(T=Dd(b,w.mode,R),T.return=w,T):(T=r(T,b),T.return=w,T)}function l(w,T,b,R){var D=b.type;return D===ds?h(w,T,b.props.children,R,b.key):T!==null&&(T.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ei&&D_(D)===T.type)?(R=r(T,b.props),R.ref=Ro(w,T,b),R.return=w,R):(R=Mu(b.type,b.key,b.props,null,w.mode,R),R.ref=Ro(w,T,b),R.return=w,R)}function u(w,T,b,R){return T===null||T.tag!==4||T.stateNode.containerInfo!==b.containerInfo||T.stateNode.implementation!==b.implementation?(T=Md(b,w.mode,R),T.return=w,T):(T=r(T,b.children||[]),T.return=w,T)}function h(w,T,b,R,D){return T===null||T.tag!==7?(T=Pr(b,w.mode,R,D),T.return=w,T):(T=r(T,b),T.return=w,T)}function d(w,T,b){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Dd(""+T,w.mode,b),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case zl:return b=Mu(T.type,T.key,T.props,null,w.mode,b),b.ref=Ro(w,null,T),b.return=w,b;case hs:return T=Md(T,w.mode,b),T.return=w,T;case Ei:var R=T._init;return d(w,R(T._payload),b)}if($o(T)||bo(T))return T=Pr(T,w.mode,b,null),T.return=w,T;Zl(w,T)}return null}function f(w,T,b,R){var D=T!==null?T.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:a(w,T,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zl:return b.key===D?l(w,T,b,R):null;case hs:return b.key===D?u(w,T,b,R):null;case Ei:return D=b._init,f(w,T,D(b._payload),R)}if($o(b)||bo(b))return D!==null?null:h(w,T,b,R,null);Zl(w,b)}return null}function m(w,T,b,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(b)||null,a(T,w,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case zl:return w=w.get(R.key===null?b:R.key)||null,l(T,w,R,D);case hs:return w=w.get(R.key===null?b:R.key)||null,u(T,w,R,D);case Ei:var L=R._init;return m(w,T,b,L(R._payload),D)}if($o(R)||bo(R))return w=w.get(b)||null,h(T,w,R,D,null);Zl(T,R)}return null}function y(w,T,b,R){for(var D=null,L=null,x=T,_=T=0,k=null;x!==null&&_<b.length;_++){x.index>_?(k=x,x=null):k=x.sibling;var A=f(w,x,b[_],R);if(A===null){x===null&&(x=k);break}t&&x&&A.alternate===null&&e(w,x),T=s(A,T,_),L===null?D=A:L.sibling=A,L=A,x=k}if(_===b.length)return n(w,x),ke&&yr(w,_),D;if(x===null){for(;_<b.length;_++)x=d(w,b[_],R),x!==null&&(T=s(x,T,_),L===null?D=x:L.sibling=x,L=x);return ke&&yr(w,_),D}for(x=i(w,x);_<b.length;_++)k=m(x,w,_,b[_],R),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?_:k.key),T=s(k,T,_),L===null?D=k:L.sibling=k,L=k);return t&&x.forEach(function(P){return e(w,P)}),ke&&yr(w,_),D}function v(w,T,b,R){var D=bo(b);if(typeof D!="function")throw Error(U(150));if(b=D.call(b),b==null)throw Error(U(151));for(var L=D=null,x=T,_=T=0,k=null,A=b.next();x!==null&&!A.done;_++,A=b.next()){x.index>_?(k=x,x=null):k=x.sibling;var P=f(w,x,A.value,R);if(P===null){x===null&&(x=k);break}t&&x&&P.alternate===null&&e(w,x),T=s(P,T,_),L===null?D=P:L.sibling=P,L=P,x=k}if(A.done)return n(w,x),ke&&yr(w,_),D;if(x===null){for(;!A.done;_++,A=b.next())A=d(w,A.value,R),A!==null&&(T=s(A,T,_),L===null?D=A:L.sibling=A,L=A);return ke&&yr(w,_),D}for(x=i(w,x);!A.done;_++,A=b.next())A=m(x,w,_,A.value,R),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?_:A.key),T=s(A,T,_),L===null?D=A:L.sibling=A,L=A);return t&&x.forEach(function(N){return e(w,N)}),ke&&yr(w,_),D}function I(w,T,b,R){if(typeof b=="object"&&b!==null&&b.type===ds&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case zl:e:{for(var D=b.key,L=T;L!==null;){if(L.key===D){if(D=b.type,D===ds){if(L.tag===7){n(w,L.sibling),T=r(L,b.props.children),T.return=w,w=T;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ei&&D_(D)===L.type){n(w,L.sibling),T=r(L,b.props),T.ref=Ro(w,L,b),T.return=w,w=T;break e}n(w,L);break}else e(w,L);L=L.sibling}b.type===ds?(T=Pr(b.props.children,w.mode,R,b.key),T.return=w,w=T):(R=Mu(b.type,b.key,b.props,null,w.mode,R),R.ref=Ro(w,T,b),R.return=w,w=R)}return o(w);case hs:e:{for(L=b.key;T!==null;){if(T.key===L)if(T.tag===4&&T.stateNode.containerInfo===b.containerInfo&&T.stateNode.implementation===b.implementation){n(w,T.sibling),T=r(T,b.children||[]),T.return=w,w=T;break e}else{n(w,T);break}else e(w,T);T=T.sibling}T=Md(b,w.mode,R),T.return=w,w=T}return o(w);case Ei:return L=b._init,I(w,T,L(b._payload),R)}if($o(b))return y(w,T,b,R);if(bo(b))return v(w,T,b,R);Zl(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,T!==null&&T.tag===6?(n(w,T.sibling),T=r(T,b),T.return=w,w=T):(n(w,T),T=Dd(b,w.mode,R),T.return=w,w=T),o(w)):n(w,T)}return I}var Fs=hT(!0),dT=hT(!1),ac=ir(null),lc=null,ws=null,dg=null;function fg(){dg=ws=lc=null}function pg(t){var e=ac.current;be(ac),t._currentValue=e}function jf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Cs(t,e){lc=t,dg=ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(dg!==t)if(t={context:t,memoizedValue:e,next:null},ws===null){if(lc===null)throw Error(U(308));ws=t,lc.dependencies={lanes:0,firstContext:t}}else ws=ws.next=t;return e}var Ir=null;function gg(t){Ir===null?Ir=[t]:Ir.push(t)}function fT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,gg(e)):(n.next=r.next,r.next=n),e.interleaved=n,ii(t,i)}function ii(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ti=!1;function mg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ue&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ii(t,n)}return r=i.interleaved,r===null?(e.next=e,gg(i)):(e.next=r.next,r.next=e),i.interleaved=e,ii(t,n)}function Cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tg(t,n)}}function M_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uc(t,e,n,i){var r=t.updateQueue;Ti=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=Ne({},d,f);break e;case 2:Ti=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Vr|=o,t.lanes=o,t.memoizedState=d}}function O_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var ul={},kn=ir(ul),Oa=ir(ul),La=ir(ul);function Sr(t){if(t===ul)throw Error(U(174));return t}function yg(t,e){switch(Ee(La,e),Ee(Oa,t),Ee(kn,ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vf(e,t)}be(kn),Ee(kn,e)}function js(){be(kn),be(Oa),be(La)}function gT(t){Sr(La.current);var e=Sr(kn.current),n=vf(e,t.type);e!==n&&(Ee(Oa,t),Ee(kn,n))}function _g(t){Oa.current===t&&(be(kn),be(Oa))}var Ae=ir(0);function cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kd=[];function vg(){for(var t=0;t<kd.length;t++)kd[t]._workInProgressVersionPrimary=null;kd.length=0}var Au=ui.ReactCurrentDispatcher,Cd=ui.ReactCurrentBatchConfig,Lr=0,Pe=null,He=null,Xe=null,hc=!1,la=!1,Va=0,SA=0;function ht(){throw Error(U(321))}function wg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Eg(t,e,n,i,r,s){if(Lr=s,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Au.current=t===null||t.memoizedState===null?CA:AA,t=n(i,r),la){s=0;do{if(la=!1,Va=0,25<=s)throw Error(U(301));s+=1,Xe=He=null,e.updateQueue=null,Au.current=PA,t=n(i,r)}while(la)}if(Au.current=dc,e=He!==null&&He.next!==null,Lr=0,Xe=He=Pe=null,hc=!1,e)throw Error(U(300));return t}function Tg(){var t=Va!==0;return Va=0,t}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function tn(){if(He===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Xe===null?Pe.memoizedState:Xe.next;if(e!==null)Xe=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Fa(t,e){return typeof e=="function"?e(t):e}function Ad(t){var e=tn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=He,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Lr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Pe.lanes|=h,Vr|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,pn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Pe.lanes|=s,Vr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pd(t){var e=tn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);pn(s,e.memoizedState)||(Pt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function mT(){}function yT(t,e){var n=Pe,i=tn(),r=e(),s=!pn(i.memoizedState,r);if(s&&(i.memoizedState=r,Pt=!0),i=i.queue,Ig(wT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,ja(9,vT.bind(null,n,i,r,e),void 0,null),Je===null)throw Error(U(349));Lr&30||_T(n,e,r)}return r}function _T(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vT(t,e,n,i){e.value=n,e.getSnapshot=i,ET(e)&&TT(t)}function wT(t,e,n){return n(function(){ET(e)&&TT(t)})}function ET(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function TT(t){var e=ii(t,1);e!==null&&dn(e,t,1,-1)}function L_(t){var e=Tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:t},e.queue=t,t=t.dispatch=kA.bind(null,Pe,t),[e.memoizedState,t]}function ja(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function IT(){return tn().memoizedState}function Pu(t,e,n,i){var r=Tn();Pe.flags|=t,r.memoizedState=ja(1|e,n,void 0,i===void 0?null:i)}function eh(t,e,n,i){var r=tn();i=i===void 0?null:i;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,i!==null&&wg(i,o.deps)){r.memoizedState=ja(e,n,s,i);return}}Pe.flags|=t,r.memoizedState=ja(1|e,n,s,i)}function V_(t,e){return Pu(8390656,8,t,e)}function Ig(t,e){return eh(2048,8,t,e)}function ST(t,e){return eh(4,2,t,e)}function xT(t,e){return eh(4,4,t,e)}function bT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kT(t,e,n){return n=n!=null?n.concat([t]):null,eh(4,4,bT.bind(null,e,t),n)}function Sg(){}function CT(t,e){var n=tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&wg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function AT(t,e){var n=tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&wg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function PT(t,e,n){return Lr&21?(pn(n,e)||(n=OE(),Pe.lanes|=n,Vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function xA(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var i=Cd.transition;Cd.transition={};try{t(!1),e()}finally{ye=n,Cd.transition=i}}function RT(){return tn().memoizedState}function bA(t,e,n){var i=zi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},NT(t))DT(e,n);else if(n=fT(t,e,n,i),n!==null){var r=It();dn(n,t,i,r),MT(n,e,i)}}function kA(t,e,n){var i=zi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(NT(t))DT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,pn(a,o)){var l=e.interleaved;l===null?(r.next=r,gg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=fT(t,e,r,i),n!==null&&(r=It(),dn(n,t,i,r),MT(n,e,i))}}function NT(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function DT(t,e){la=hc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tg(t,n)}}var dc={readContext:en,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},CA={readContext:en,useCallback:function(t,e){return Tn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:V_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,bT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=Tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Tn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=bA.bind(null,Pe,t),[i.memoizedState,t]},useRef:function(t){var e=Tn();return t={current:t},e.memoizedState=t},useState:L_,useDebugValue:Sg,useDeferredValue:function(t){return Tn().memoizedState=t},useTransition:function(){var t=L_(!1),e=t[0];return t=xA.bind(null,t[1]),Tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Pe,r=Tn();if(ke){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Je===null)throw Error(U(349));Lr&30||_T(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,V_(wT.bind(null,i,s,t),[t]),i.flags|=2048,ja(9,vT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Tn(),e=Je.identifierPrefix;if(ke){var n=Gn,i=Kn;n=(i&~(1<<32-hn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Va++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AA={readContext:en,useCallback:CT,useContext:en,useEffect:Ig,useImperativeHandle:kT,useInsertionEffect:ST,useLayoutEffect:xT,useMemo:AT,useReducer:Ad,useRef:IT,useState:function(){return Ad(Fa)},useDebugValue:Sg,useDeferredValue:function(t){var e=tn();return PT(e,He.memoizedState,t)},useTransition:function(){var t=Ad(Fa)[0],e=tn().memoizedState;return[t,e]},useMutableSource:mT,useSyncExternalStore:yT,useId:RT,unstable_isNewReconciler:!1},PA={readContext:en,useCallback:CT,useContext:en,useEffect:Ig,useImperativeHandle:kT,useInsertionEffect:ST,useLayoutEffect:xT,useMemo:AT,useReducer:Pd,useRef:IT,useState:function(){return Pd(Fa)},useDebugValue:Sg,useDeferredValue:function(t){var e=tn();return He===null?e.memoizedState=t:PT(e,He.memoizedState,t)},useTransition:function(){var t=Pd(Fa)[0],e=tn().memoizedState;return[t,e]},useMutableSource:mT,useSyncExternalStore:yT,useId:RT,unstable_isNewReconciler:!1};function an(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var th={isMounted:function(t){return(t=t._reactInternals)?Gr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=It(),r=zi(t),s=Jn(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ui(t,s,r),e!==null&&(dn(e,t,r,i),Cu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=It(),r=zi(t),s=Jn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ui(t,s,r),e!==null&&(dn(e,t,r,i),Cu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),i=zi(t),r=Jn(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ui(t,r,i),e!==null&&(dn(e,t,i,n),Cu(e,t,i))}};function F_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ra(n,i)||!Ra(r,s):!0}function OT(t,e,n){var i=!1,r=Yi,s=e.contextType;return typeof s=="object"&&s!==null?s=en(s):(r=Dt(e)?Mr:_t.current,i=e.contextTypes,s=(i=i!=null)?Ls(t,r):Yi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=th,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function j_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&th.enqueueReplaceState(e,e.state,null)}function Bf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},mg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=en(s):(s=Dt(e)?Mr:_t.current,r.context=Ls(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Uf(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&th.enqueueReplaceState(r,r.state,null),uc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Us(t,e){try{var n="",i=e;do n+=rC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Rd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RA=typeof WeakMap=="function"?WeakMap:Map;function LT(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){pc||(pc=!0,Jf=i),zf(t,e)},n}function VT(t,e,n){n=Jn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){zf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zf(t,e),typeof i!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function U_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new RA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=HA.bind(null,t,e,n),e.then(t,t))}function B_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function z_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Ui(n,e,1))),n.lanes|=1),t)}var NA=ui.ReactCurrentOwner,Pt=!1;function Tt(t,e,n,i){e.child=t===null?dT(e,null,n,i):Fs(e,t.child,n,i)}function $_(t,e,n,i,r){n=n.render;var s=e.ref;return Cs(e,r),i=Eg(t,e,n,i,s,r),n=Tg(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ri(t,e,r)):(ke&&n&&ug(e),e.flags|=1,Tt(t,e,i,r),e.child)}function W_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Ng(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,FT(t,e,s,i,r)):(t=Mu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ra,n(o,i)&&t.ref===e.ref)return ri(t,e,r)}return e.flags|=1,t=$i(s,i),t.ref=e.ref,t.return=e,e.child=t}function FT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ra(s,i)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,ri(t,e,r)}return $f(t,e,n,i,r)}function jT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Ts,jt),jt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(Ts,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ee(Ts,jt),jt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ee(Ts,jt),jt|=i;return Tt(t,e,r,n),e.child}function UT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $f(t,e,n,i,r){var s=Dt(n)?Mr:_t.current;return s=Ls(e,s),Cs(e,r),n=Eg(t,e,n,i,s,r),i=Tg(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ri(t,e,r)):(ke&&i&&ug(e),e.flags|=1,Tt(t,e,n,r),e.child)}function H_(t,e,n,i,r){if(Dt(n)){var s=!0;rc(e)}else s=!1;if(Cs(e,r),e.stateNode===null)Ru(t,e),OT(e,n,i),Bf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=en(u):(u=Dt(n)?Mr:_t.current,u=Ls(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&j_(e,o,i,u),Ti=!1;var f=e.memoizedState;o.state=f,uc(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Nt.current||Ti?(typeof h=="function"&&(Uf(e,n,h,i),l=e.memoizedState),(a=Ti||F_(e,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,pT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:an(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=en(l):(l=Dt(n)?Mr:_t.current,l=Ls(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&j_(e,o,i,l),Ti=!1,f=e.memoizedState,o.state=f,uc(e,i,o,r);var y=e.memoizedState;a!==d||f!==y||Nt.current||Ti?(typeof m=="function"&&(Uf(e,n,m,i),y=e.memoizedState),(u=Ti||F_(e,n,u,i,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Wf(t,e,n,i,s,r)}function Wf(t,e,n,i,r,s){UT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&P_(e,n,!1),ri(t,e,s);i=e.stateNode,NA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Fs(e,t.child,null,s),e.child=Fs(e,null,a,s)):Tt(t,e,a,s),e.memoizedState=i.state,r&&P_(e,n,!0),e.child}function BT(t){var e=t.stateNode;e.pendingContext?A_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&A_(t,e.context,!1),yg(t,e.containerInfo)}function q_(t,e,n,i,r){return Vs(),hg(r),e.flags|=256,Tt(t,e,n,i),e.child}var Hf={dehydrated:null,treeContext:null,retryLane:0};function qf(t){return{baseLanes:t,cachePool:null,transitions:null}}function zT(t,e,n){var i=e.pendingProps,r=Ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ee(Ae,r&1),t===null)return Ff(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=rh(o,i,0,null),t=Pr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qf(n),e.memoizedState=Hf,t):xg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return DA(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=$i(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=$i(a,s):(s=Pr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?qf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hf,i}return s=t.child,t=s.sibling,i=$i(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function xg(t,e){return e=rh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eu(t,e,n,i){return i!==null&&hg(i),Fs(e,t.child,null,n),t=xg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DA(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Rd(Error(U(422))),eu(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=rh({mode:"visible",children:i.children},r,0,null),s=Pr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Fs(e,t.child,null,o),e.child.memoizedState=qf(o),e.memoizedState=Hf,s);if(!(e.mode&1))return eu(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=Rd(s,i,void 0),eu(t,e,o,i)}if(a=(o&t.childLanes)!==0,Pt||a){if(i=Je,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ii(t,r),dn(i,t,r,-1))}return Rg(),i=Rd(Error(U(421))),eu(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=qA.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Ut=ji(r.nextSibling),zt=e,ke=!0,un=null,t!==null&&(Kt[Gt++]=Kn,Kt[Gt++]=Gn,Kt[Gt++]=Or,Kn=t.id,Gn=t.overflow,Or=e),e=xg(e,i.children),e.flags|=4096,e)}function K_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),jf(t.return,e,n)}function Nd(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function $T(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Tt(t,e,i.children,n),i=Ae.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K_(t,n,e);else if(t.tag===19)K_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ee(Ae,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Nd(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Nd(e,!0,n,null,s);break;case"together":Nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ri(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=$i(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$i(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MA(t,e,n){switch(e.tag){case 3:BT(e),Vs();break;case 5:gT(e);break;case 1:Dt(e.type)&&rc(e);break;case 4:yg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ee(ac,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ee(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?zT(t,e,n):(Ee(Ae,Ae.current&1),t=ri(t,e,n),t!==null?t.sibling:null);Ee(Ae,Ae.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return $T(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ee(Ae,Ae.current),i)break;return null;case 22:case 23:return e.lanes=0,jT(t,e,n)}return ri(t,e,n)}var WT,Kf,HT,qT;WT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kf=function(){};HT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Sr(kn.current);var s=null;switch(n){case"input":r=gf(t,r),i=gf(t,i),s=[];break;case"select":r=Ne({},r,{value:void 0}),i=Ne({},i,{value:void 0}),s=[];break;case"textarea":r=_f(t,r),i=_f(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=nc)}wf(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};qT=function(t,e,n,i){n!==i&&(e.flags|=4)};function No(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function OA(t,e,n){var i=e.pendingProps;switch(cg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Dt(e.type)&&ic(),dt(e),null;case 3:return i=e.stateNode,js(),be(Nt),be(_t),vg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(tp(un),un=null))),Kf(t,e),dt(e),null;case 5:_g(e);var r=Sr(La.current);if(n=e.type,t!==null&&e.stateNode!=null)HT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return dt(e),null}if(t=Sr(kn.current),Jl(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Sn]=e,i[Ma]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",i),Se("close",i);break;case"iframe":case"object":case"embed":Se("load",i);break;case"video":case"audio":for(r=0;r<Ho.length;r++)Se(Ho[r],i);break;case"source":Se("error",i);break;case"img":case"image":case"link":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"input":n_(i,s),Se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Se("invalid",i);break;case"textarea":r_(i,s),Se("invalid",i)}wf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xl(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xl(i.textContent,a,t),r=["children",""+a]):Sa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",i)}switch(n){case"input":$l(i),i_(i,s,!0);break;case"textarea":$l(i),s_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=nc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Sn]=e,t[Ma]=i,WT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ef(n,i),n){case"dialog":Se("cancel",t),Se("close",t),r=i;break;case"iframe":case"object":case"embed":Se("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ho.length;r++)Se(Ho[r],t);r=i;break;case"source":Se("error",t),r=i;break;case"img":case"image":case"link":Se("error",t),Se("load",t),r=i;break;case"details":Se("toggle",t),r=i;break;case"input":n_(t,i),r=gf(t,i),Se("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ne({},i,{value:void 0}),Se("invalid",t);break;case"textarea":r_(t,i),r=_f(t,i),Se("invalid",t);break;default:r=i}wf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?IE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&EE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xa(t,l):typeof l=="number"&&xa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",t):l!=null&&Qp(t,s,l,o))}switch(n){case"input":$l(t),i_(t,i,!1);break;case"textarea":$l(t),s_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Qi(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Ss(t,!!i.multiple,s,!1):i.defaultValue!=null&&Ss(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=nc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)qT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=Sr(La.current),Sr(kn.current),Jl(e)){if(i=e.stateNode,n=e.memoizedProps,i[Sn]=e,(s=i.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:Xl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xl(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Sn]=e,e.stateNode=i}return dt(e),null;case 13:if(be(Ae),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Ut!==null&&e.mode&1&&!(e.flags&128))cT(),Vs(),e.flags|=98560,s=!1;else if(s=Jl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Sn]=e}else Vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else un!==null&&(tp(un),un=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ke===0&&(Ke=3):Rg())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return js(),Kf(t,e),t===null&&Na(e.stateNode.containerInfo),dt(e),null;case 10:return pg(e.type._context),dt(e),null;case 17:return Dt(e.type)&&ic(),dt(e),null;case 19:if(be(Ae),s=e.memoizedState,s===null)return dt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)No(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=cc(t),o!==null){for(e.flags|=128,No(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Ae,Ae.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ve()>Bs&&(e.flags|=128,i=!0,No(s,!1),e.lanes=4194304)}else{if(!i)if(t=cc(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ke)return dt(e),null}else 2*Ve()-s.renderingStartTime>Bs&&n!==1073741824&&(e.flags|=128,i=!0,No(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ve(),e.sibling=null,n=Ae.current,Ee(Ae,i?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Pg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?jt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function LA(t,e){switch(cg(e),e.tag){case 1:return Dt(e.type)&&ic(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return js(),be(Nt),be(_t),vg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _g(e),null;case 13:if(be(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ae),null;case 4:return js(),null;case 10:return pg(e.type._context),null;case 22:case 23:return Pg(),null;case 24:return null;default:return null}}var tu=!1,gt=!1,VA=typeof WeakSet=="function"?WeakSet:Set,$=null;function Es(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Oe(t,e,i)}else n.current=null}function Gf(t,e,n){try{n()}catch(i){Oe(t,e,i)}}var G_=!1;function FA(t,e){if(Rf=Zu,t=XE(),lg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nf={focusedElem:t,selectionRange:n},Zu=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,I=y.memoizedState,w=e.stateNode,T=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:an(e.type,v),I);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Oe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return y=G_,G_=!1,y}function ua(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Gf(e,n,s)}r=r.next}while(r!==i)}}function nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Qf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KT(t){var e=t.alternate;e!==null&&(t.alternate=null,KT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[Ma],delete e[Of],delete e[wA],delete e[EA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GT(t){return t.tag===5||t.tag===3||t.tag===4}function Q_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nc));else if(i!==4&&(t=t.child,t!==null))for(Yf(t,e,n),t=t.sibling;t!==null;)Yf(t,e,n),t=t.sibling}function Xf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Xf(t,e,n),t=t.sibling;t!==null;)Xf(t,e,n),t=t.sibling}var et=null,ln=!1;function mi(t,e,n){for(n=n.child;n!==null;)QT(t,e,n),n=n.sibling}function QT(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Gc,n)}catch{}switch(n.tag){case 5:gt||Es(n,e);case 6:var i=et,r=ln;et=null,mi(t,e,n),et=i,ln=r,et!==null&&(ln?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(ln?(t=et,n=n.stateNode,t.nodeType===8?xd(t.parentNode,n):t.nodeType===1&&xd(t,n),Aa(t)):xd(et,n.stateNode));break;case 4:i=et,r=ln,et=n.stateNode.containerInfo,ln=!0,mi(t,e,n),et=i,ln=r;break;case 0:case 11:case 14:case 15:if(!gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gf(n,e,o),r=r.next}while(r!==i)}mi(t,e,n);break;case 1:if(!gt&&(Es(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Oe(n,e,a)}mi(t,e,n);break;case 21:mi(t,e,n);break;case 22:n.mode&1?(gt=(i=gt)||n.memoizedState!==null,mi(t,e,n),gt=i):mi(t,e,n);break;default:mi(t,e,n)}}function Y_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VA),e.forEach(function(i){var r=KA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:et=a.stateNode,ln=!1;break e;case 3:et=a.stateNode.containerInfo,ln=!0;break e;case 4:et=a.stateNode.containerInfo,ln=!0;break e}a=a.return}if(et===null)throw Error(U(160));QT(s,o,r),et=null,ln=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Oe(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YT(e,t),e=e.sibling}function YT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),vn(t),i&4){try{ua(3,t,t.return),nh(3,t)}catch(v){Oe(t,t.return,v)}try{ua(5,t,t.return)}catch(v){Oe(t,t.return,v)}}break;case 1:on(e,t),vn(t),i&512&&n!==null&&Es(n,n.return);break;case 5:if(on(e,t),vn(t),i&512&&n!==null&&Es(n,n.return),t.flags&32){var r=t.stateNode;try{xa(r,"")}catch(v){Oe(t,t.return,v)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_E(r,s),Ef(a,o);var u=Ef(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?IE(r,d):h==="dangerouslySetInnerHTML"?EE(r,d):h==="children"?xa(r,d):Qp(r,h,d,u)}switch(a){case"input":mf(r,s);break;case"textarea":vE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ss(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ss(r,!!s.multiple,s.defaultValue,!0):Ss(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ma]=s}catch(v){Oe(t,t.return,v)}}break;case 6:if(on(e,t),vn(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(v){Oe(t,t.return,v)}}break;case 3:if(on(e,t),vn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Aa(e.containerInfo)}catch(v){Oe(t,t.return,v)}break;case 4:on(e,t),vn(t);break;case 13:on(e,t),vn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Cg=Ve())),i&4&&Y_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(u=gt)||h,on(e,t),gt=u):on(e,t),vn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(d=$=h;$!==null;){switch(f=$,m=f.child,f.tag){case 0:case 11:case 14:case 15:ua(4,f,f.return);break;case 1:Es(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Oe(i,n,v)}}break;case 5:Es(f,f.return);break;case 22:if(f.memoizedState!==null){J_(d);continue}}m!==null?(m.return=f,$=m):J_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TE("display",o))}catch(v){Oe(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Oe(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:on(e,t),vn(t),i&4&&Y_(t);break;case 21:break;default:on(e,t),vn(t)}}function vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GT(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(xa(r,""),i.flags&=-33);var s=Q_(t);Xf(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Q_(t);Yf(t,a,o);break;default:throw Error(U(161))}}catch(l){Oe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jA(t,e,n){$=t,XT(t)}function XT(t,e,n){for(var i=(t.mode&1)!==0;$!==null;){var r=$,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||tu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||gt;a=tu;var u=gt;if(tu=o,(gt=l)&&!u)for($=r;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?Z_(r):l!==null?(l.return=o,$=l):Z_(r);for(;s!==null;)$=s,XT(s),s=s.sibling;$=r,tu=a,gt=u}X_(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$=s):X_(t)}}function X_(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||nh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!gt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:an(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&O_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}O_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Aa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}gt||e.flags&512&&Qf(e)}catch(f){Oe(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function J_(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Z_(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nh(4,e)}catch(l){Oe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Oe(e,r,l)}}var s=e.return;try{Qf(e)}catch(l){Oe(e,s,l)}break;case 5:var o=e.return;try{Qf(e)}catch(l){Oe(e,o,l)}}}catch(l){Oe(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var UA=Math.ceil,fc=ui.ReactCurrentDispatcher,bg=ui.ReactCurrentOwner,Xt=ui.ReactCurrentBatchConfig,ue=0,Je=null,Be=null,rt=0,jt=0,Ts=ir(0),Ke=0,Ua=null,Vr=0,ih=0,kg=0,ca=null,kt=null,Cg=0,Bs=1/0,Wn=null,pc=!1,Jf=null,Bi=null,nu=!1,Pi=null,gc=0,ha=0,Zf=null,Nu=-1,Du=0;function It(){return ue&6?Ve():Nu!==-1?Nu:Nu=Ve()}function zi(t){return t.mode&1?ue&2&&rt!==0?rt&-rt:IA.transition!==null?(Du===0&&(Du=OE()),Du):(t=ye,t!==0||(t=window.event,t=t===void 0?16:zE(t.type)),t):1}function dn(t,e,n,i){if(50<ha)throw ha=0,Zf=null,Error(U(185));ol(t,n,i),(!(ue&2)||t!==Je)&&(t===Je&&(!(ue&2)&&(ih|=n),Ke===4&&Si(t,rt)),Mt(t,i),n===1&&ue===0&&!(e.mode&1)&&(Bs=Ve()+500,Zc&&rr()))}function Mt(t,e){var n=t.callbackNode;IC(t,e);var i=Ju(t,t===Je?rt:0);if(i===0)n!==null&&l_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&l_(n),e===1)t.tag===0?TA(ev.bind(null,t)):aT(ev.bind(null,t)),_A(function(){!(ue&6)&&rr()}),n=null;else{switch(LE(i)){case 1:n=eg;break;case 4:n=DE;break;case 16:n=Xu;break;case 536870912:n=ME;break;default:n=Xu}n=sI(n,JT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function JT(t,e){if(Nu=-1,Du=0,ue&6)throw Error(U(327));var n=t.callbackNode;if(As()&&t.callbackNode!==n)return null;var i=Ju(t,t===Je?rt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=mc(t,i);else{e=i;var r=ue;ue|=2;var s=eI();(Je!==t||rt!==e)&&(Wn=null,Bs=Ve()+500,Ar(t,e));do try{$A();break}catch(a){ZT(t,a)}while(!0);fg(),fc.current=s,ue=r,Be!==null?e=0:(Je=null,rt=0,e=Ke)}if(e!==0){if(e===2&&(r=bf(t),r!==0&&(i=r,e=ep(t,r))),e===1)throw n=Ua,Ar(t,0),Si(t,i),Mt(t,Ve()),n;if(e===6)Si(t,i);else{if(r=t.current.alternate,!(i&30)&&!BA(r)&&(e=mc(t,i),e===2&&(s=bf(t),s!==0&&(i=s,e=ep(t,s))),e===1))throw n=Ua,Ar(t,0),Si(t,i),Mt(t,Ve()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:_r(t,kt,Wn);break;case 3:if(Si(t,i),(i&130023424)===i&&(e=Cg+500-Ve(),10<e)){if(Ju(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){It(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Mf(_r.bind(null,t,kt,Wn),e);break}_r(t,kt,Wn);break;case 4:if(Si(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-hn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ve()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*UA(i/1960))-i,10<i){t.timeoutHandle=Mf(_r.bind(null,t,kt,Wn),i);break}_r(t,kt,Wn);break;case 5:_r(t,kt,Wn);break;default:throw Error(U(329))}}}return Mt(t,Ve()),t.callbackNode===n?JT.bind(null,t):null}function ep(t,e){var n=ca;return t.current.memoizedState.isDehydrated&&(Ar(t,e).flags|=256),t=mc(t,e),t!==2&&(e=kt,kt=n,e!==null&&tp(e)),t}function tp(t){kt===null?kt=t:kt.push.apply(kt,t)}function BA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!pn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Si(t,e){for(e&=~kg,e&=~ih,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),i=1<<n;t[n]=-1,e&=~i}}function ev(t){if(ue&6)throw Error(U(327));As();var e=Ju(t,0);if(!(e&1))return Mt(t,Ve()),null;var n=mc(t,e);if(t.tag!==0&&n===2){var i=bf(t);i!==0&&(e=i,n=ep(t,i))}if(n===1)throw n=Ua,Ar(t,0),Si(t,e),Mt(t,Ve()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,kt,Wn),Mt(t,Ve()),null}function Ag(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Bs=Ve()+500,Zc&&rr())}}function Fr(t){Pi!==null&&Pi.tag===0&&!(ue&6)&&As();var e=ue;ue|=1;var n=Xt.transition,i=ye;try{if(Xt.transition=null,ye=1,t)return t()}finally{ye=i,Xt.transition=n,ue=e,!(ue&6)&&rr()}}function Pg(){jt=Ts.current,be(Ts)}function Ar(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yA(n)),Be!==null)for(n=Be.return;n!==null;){var i=n;switch(cg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ic();break;case 3:js(),be(Nt),be(_t),vg();break;case 5:_g(i);break;case 4:js();break;case 13:be(Ae);break;case 19:be(Ae);break;case 10:pg(i.type._context);break;case 22:case 23:Pg()}n=n.return}if(Je=t,Be=t=$i(t.current,null),rt=jt=e,Ke=0,Ua=null,kg=ih=Vr=0,kt=ca=null,Ir!==null){for(e=0;e<Ir.length;e++)if(n=Ir[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Ir=null}return t}function ZT(t,e){do{var n=Be;try{if(fg(),Au.current=dc,hc){for(var i=Pe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}hc=!1}if(Lr=0,Xe=He=Pe=null,la=!1,Va=0,bg.current=null,n===null||n.return===null){Ke=1,Ua=e,Be=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=B_(o);if(m!==null){m.flags&=-257,z_(m,o,a,s,e),m.mode&1&&U_(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){U_(s,u,e),Rg();break e}l=Error(U(426))}}else if(ke&&a.mode&1){var I=B_(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),z_(I,o,a,s,e),hg(Us(l,a));break e}}s=l=Us(l,a),Ke!==4&&(Ke=2),ca===null?ca=[s]:ca.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=LT(s,l,e);M_(s,w);break e;case 1:a=l;var T=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Bi===null||!Bi.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=VT(s,a,e);M_(s,R);break e}}s=s.return}while(s!==null)}nI(n)}catch(D){e=D,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function eI(){var t=fc.current;return fc.current=dc,t===null?dc:t}function Rg(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Je===null||!(Vr&268435455)&&!(ih&268435455)||Si(Je,rt)}function mc(t,e){var n=ue;ue|=2;var i=eI();(Je!==t||rt!==e)&&(Wn=null,Ar(t,e));do try{zA();break}catch(r){ZT(t,r)}while(!0);if(fg(),ue=n,fc.current=i,Be!==null)throw Error(U(261));return Je=null,rt=0,Ke}function zA(){for(;Be!==null;)tI(Be)}function $A(){for(;Be!==null&&!pC();)tI(Be)}function tI(t){var e=rI(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?nI(t):Be=e,bg.current=null}function nI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LA(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Be=null;return}}else if(n=OA(n,e,jt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ke===0&&(Ke=5)}function _r(t,e,n){var i=ye,r=Xt.transition;try{Xt.transition=null,ye=1,WA(t,e,n,i)}finally{Xt.transition=r,ye=i}return null}function WA(t,e,n,i){do As();while(Pi!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SC(t,s),t===Je&&(Be=Je=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nu||(nu=!0,sI(Xu,function(){return As(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xt.transition,Xt.transition=null;var o=ye;ye=1;var a=ue;ue|=4,bg.current=null,FA(t,n),YT(n,t),cA(Nf),Zu=!!Rf,Nf=Rf=null,t.current=n,jA(n),gC(),ue=a,ye=o,Xt.transition=s}else t.current=n;if(nu&&(nu=!1,Pi=t,gc=r),s=t.pendingLanes,s===0&&(Bi=null),_C(n.stateNode),Mt(t,Ve()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(pc)throw pc=!1,t=Jf,Jf=null,t;return gc&1&&t.tag!==0&&As(),s=t.pendingLanes,s&1?t===Zf?ha++:(ha=0,Zf=t):ha=0,rr(),null}function As(){if(Pi!==null){var t=LE(gc),e=Xt.transition,n=ye;try{if(Xt.transition=null,ye=16>t?16:t,Pi===null)var i=!1;else{if(t=Pi,Pi=null,gc=0,ue&6)throw Error(U(331));var r=ue;for(ue|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($=u;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:ua(8,h,s)}var d=h.child;if(d!==null)d.return=h,$=d;else for(;$!==null;){h=$;var f=h.sibling,m=h.return;if(KT(h),h===u){$=null;break}if(f!==null){f.return=m,$=f;break}$=m}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var I=v.sibling;v.sibling=null,v=I}while(v!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ua(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,$=w;break e}$=s.return}}var T=t.current;for($=T;$!==null;){o=$;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,$=b;else e:for(o=T;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nh(9,a)}}catch(D){Oe(a,a.return,D)}if(a===o){$=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,$=R;break e}$=a.return}}if(ue=r,rr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Gc,t)}catch{}i=!0}return i}finally{ye=n,Xt.transition=e}}return!1}function tv(t,e,n){e=Us(n,e),e=LT(t,e,1),t=Ui(t,e,1),e=It(),t!==null&&(ol(t,1,e),Mt(t,e))}function Oe(t,e,n){if(t.tag===3)tv(t,t,n);else for(;e!==null;){if(e.tag===3){tv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Bi===null||!Bi.has(i))){t=Us(n,t),t=VT(e,t,1),e=Ui(e,t,1),t=It(),e!==null&&(ol(e,1,t),Mt(e,t));break}}e=e.return}}function HA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(rt&n)===n&&(Ke===4||Ke===3&&(rt&130023424)===rt&&500>Ve()-Cg?Ar(t,0):kg|=n),Mt(t,e)}function iI(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var n=It();t=ii(t,e),t!==null&&(ol(t,e,n),Mt(t,n))}function qA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iI(t,n)}function KA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),iI(t,n)}var rI;rI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,MA(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,ke&&e.flags&1048576&&lT(e,oc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ru(t,e),t=e.pendingProps;var r=Ls(e,_t.current);Cs(e,n),r=Eg(null,e,i,t,r,n);var s=Tg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(i)?(s=!0,rc(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,mg(e),r.updater=th,e.stateNode=r,r._reactInternals=e,Bf(e,i,t,n),e=Wf(null,e,i,!0,s,n)):(e.tag=0,ke&&s&&ug(e),Tt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=QA(i),t=an(i,t),r){case 0:e=$f(null,e,i,t,n);break e;case 1:e=H_(null,e,i,t,n);break e;case 11:e=$_(null,e,i,t,n);break e;case 14:e=W_(null,e,i,an(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:an(i,r),$f(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:an(i,r),H_(t,e,i,r,n);case 3:e:{if(BT(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,pT(t,e),uc(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Us(Error(U(423)),e),e=q_(t,e,i,n,r);break e}else if(i!==r){r=Us(Error(U(424)),e),e=q_(t,e,i,n,r);break e}else for(Ut=ji(e.stateNode.containerInfo.firstChild),zt=e,ke=!0,un=null,n=dT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vs(),i===r){e=ri(t,e,n);break e}Tt(t,e,i,n)}e=e.child}return e;case 5:return gT(e),t===null&&Ff(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Df(i,r)?o=null:s!==null&&Df(i,s)&&(e.flags|=32),UT(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Ff(e),null;case 13:return zT(t,e,n);case 4:return yg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Fs(e,null,i,n):Tt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:an(i,r),$_(t,e,i,r,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ee(ac,i._currentValue),i._currentValue=o,s!==null)if(pn(s.value,o)){if(s.children===r.children&&!Nt.current){e=ri(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Jn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Cs(e,n),r=en(r),i=i(r),e.flags|=1,Tt(t,e,i,n),e.child;case 14:return i=e.type,r=an(i,e.pendingProps),r=an(i.type,r),W_(t,e,i,r,n);case 15:return FT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:an(i,r),Ru(t,e),e.tag=1,Dt(i)?(t=!0,rc(e)):t=!1,Cs(e,n),OT(e,i,r),Bf(e,i,r,n),Wf(null,e,i,!0,t,n);case 19:return $T(t,e,n);case 22:return jT(t,e,n)}throw Error(U(156,e.tag))};function sI(t,e){return NE(t,e)}function GA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,e,n,i){return new GA(t,e,n,i)}function Ng(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QA(t){if(typeof t=="function")return Ng(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xp)return 11;if(t===Jp)return 14}return 2}function $i(t,e){var n=t.alternate;return n===null?(n=Qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Ng(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ds:return Pr(n.children,r,s,e);case Yp:o=8,r|=8;break;case hf:return t=Qt(12,n,e,r|2),t.elementType=hf,t.lanes=s,t;case df:return t=Qt(13,n,e,r),t.elementType=df,t.lanes=s,t;case ff:return t=Qt(19,n,e,r),t.elementType=ff,t.lanes=s,t;case gE:return rh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fE:o=10;break e;case pE:o=9;break e;case Xp:o=11;break e;case Jp:o=14;break e;case Ei:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Qt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Pr(t,e,n,i){return t=Qt(7,t,i,e),t.lanes=n,t}function rh(t,e,n,i){return t=Qt(22,t,i,e),t.elementType=gE,t.lanes=n,t.stateNode={isHidden:!1},t}function Dd(t,e,n){return t=Qt(6,t,null,e),t.lanes=n,t}function Md(t,e,n){return e=Qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pd(0),this.expirationTimes=pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Dg(t,e,n,i,r,s,o,a,l){return t=new YA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mg(s),t}function XA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function oI(t){if(!t)return Yi;t=t._reactInternals;e:{if(Gr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Dt(n))return oT(t,n,e)}return e}function aI(t,e,n,i,r,s,o,a,l){return t=Dg(n,i,!0,t,r,s,o,a,l),t.context=oI(null),n=t.current,i=It(),r=zi(n),s=Jn(i,r),s.callback=e??null,Ui(n,s,r),t.current.lanes=r,ol(t,r,i),Mt(t,i),t}function sh(t,e,n,i){var r=e.current,s=It(),o=zi(r);return n=oI(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ui(r,e,o),t!==null&&(dn(t,r,o,s),Cu(t,r,o)),o}function yc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mg(t,e){nv(t,e),(t=t.alternate)&&nv(t,e)}function JA(){return null}var lI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Og(t){this._internalRoot=t}oh.prototype.render=Og.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));sh(t,e,null,null)};oh.prototype.unmount=Og.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fr(function(){sh(null,t,null,null)}),e[ni]=null}};function oh(t){this._internalRoot=t}oh.prototype.unstable_scheduleHydration=function(t){if(t){var e=jE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ii.length&&e!==0&&e<Ii[n].priority;n++);Ii.splice(n,0,t),n===0&&BE(t)}};function Lg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iv(){}function ZA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=yc(o);s.call(u)}}var o=aI(e,i,t,0,null,!1,!1,"",iv);return t._reactRootContainer=o,t[ni]=o.current,Na(t.nodeType===8?t.parentNode:t),Fr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=yc(l);a.call(u)}}var l=Dg(t,0,!1,null,null,!1,!1,"",iv);return t._reactRootContainer=l,t[ni]=l.current,Na(t.nodeType===8?t.parentNode:t),Fr(function(){sh(e,l,n,i)}),l}function lh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=yc(o);a.call(l)}}sh(e,o,t,r)}else o=ZA(n,e,t,r,i);return yc(o)}VE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wo(e.pendingLanes);n!==0&&(tg(e,n|1),Mt(e,Ve()),!(ue&6)&&(Bs=Ve()+500,rr()))}break;case 13:Fr(function(){var i=ii(t,1);if(i!==null){var r=It();dn(i,t,1,r)}}),Mg(t,1)}};ng=function(t){if(t.tag===13){var e=ii(t,134217728);if(e!==null){var n=It();dn(e,t,134217728,n)}Mg(t,134217728)}};FE=function(t){if(t.tag===13){var e=zi(t),n=ii(t,e);if(n!==null){var i=It();dn(n,t,e,i)}Mg(t,e)}};jE=function(){return ye};UE=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};If=function(t,e,n){switch(e){case"input":if(mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Jc(i);if(!r)throw Error(U(90));yE(i),mf(i,r)}}}break;case"textarea":vE(t,n);break;case"select":e=n.value,e!=null&&Ss(t,!!n.multiple,e,!1)}};bE=Ag;kE=Fr;var eP={usingClientEntryPoint:!1,Events:[ll,ms,Jc,SE,xE,Ag]},Do={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tP={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PE(t),t===null?null:t.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||JA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{Gc=iu.inject(tP),bn=iu}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eP;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lg(e))throw Error(U(200));return XA(t,e,null,n)};Wt.createRoot=function(t,e){if(!Lg(t))throw Error(U(299));var n=!1,i="",r=lI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Dg(t,1,!1,null,null,n,!1,i,r),t[ni]=e.current,Na(t.nodeType===8?t.parentNode:t),new Og(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=PE(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Fr(t)};Wt.hydrate=function(t,e,n){if(!ah(e))throw Error(U(200));return lh(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Lg(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=lI;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aI(e,null,t,1,n??null,r,!1,s,o),t[ni]=e.current,Na(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new oh(e)};Wt.render=function(t,e,n){if(!ah(e))throw Error(U(200));return lh(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!ah(t))throw Error(U(40));return t._reactRootContainer?(Fr(function(){lh(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};Wt.unstable_batchedUpdates=Ag;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ah(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return lh(t,e,n,!1,i)};Wt.version="18.3.1-next-f1338f8080-20240426";function uI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uI)}catch(t){console.error(t)}}uI(),uE.exports=Wt;var nP=uE.exports,rv=nP;uf.createRoot=rv.createRoot,uf.hydrateRoot=rv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ba(){return Ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ba.apply(this,arguments)}var Ri;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ri||(Ri={}));const sv="popstate";function iP(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return np("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:_c(r)}return sP(e,n,null,t)}function Re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rP(){return Math.random().toString(36).substr(2,8)}function ov(t,e){return{usr:t.state,key:t.key,idx:e}}function np(t,e,n,i){return n===void 0&&(n=null),Ba({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?so(e):e,{state:n,key:e&&e.key||i||rP()})}function _c(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function sP(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ri.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Ba({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Ri.Pop;let I=h(),w=I==null?null:I-u;u=I,l&&l({action:a,location:v.location,delta:w})}function f(I,w){a=Ri.Push;let T=np(v.location,I,w);u=h()+1;let b=ov(T,u),R=v.createHref(T);try{o.pushState(b,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(R)}s&&l&&l({action:a,location:v.location,delta:1})}function m(I,w){a=Ri.Replace;let T=np(v.location,I,w);u=h();let b=ov(T,u),R=v.createHref(T);o.replaceState(b,"",R),s&&l&&l({action:a,location:v.location,delta:0})}function y(I){let w=r.location.origin!=="null"?r.location.origin:r.location.href,T=typeof I=="string"?I:_c(I);return T=T.replace(/ $/,"%20"),Re(w,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,w)}let v={get action(){return a},get location(){return t(r,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(sv,d),l=I,()=>{r.removeEventListener(sv,d),l=null}},createHref(I){return e(r,I)},createURL:y,encodeLocation(I){let w=y(I);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(I){return o.go(I)}};return v}var av;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(av||(av={}));function oP(t,e,n){return n===void 0&&(n="/"),aP(t,e,n)}function aP(t,e,n,i){let r=typeof e=="string"?so(e):e,s=zs(r.pathname||"/",n);if(s==null)return null;let o=cI(t);lP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=vP(s);a=yP(o[l],u)}return a}function cI(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Re(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Wi([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Re(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),cI(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:gP(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of hI(s.path))r(s,o,l)}),e}function hI(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=hI(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function lP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mP(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const uP=/^:[\w-]+$/,cP=3,hP=2,dP=1,fP=10,pP=-2,lv=t=>t==="*";function gP(t,e){let n=t.split("/"),i=n.length;return n.some(lv)&&(i+=pP),e&&(i+=hP),n.filter(r=>!lv(r)).reduce((r,s)=>r+(uP.test(s)?cP:s===""?dP:fP),i)}function mP(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function yP(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=ip({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Wi([s,d.pathname]),pathnameBase:SP(Wi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Wi([s,d.pathnameBase]))}return o}function ip(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=_P(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[d];return m&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function _P(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function vP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const wP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EP=t=>wP.test(t);function TP(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?so(t):t,s;if(n)if(EP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Vg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=uv(n.substring(1),"/"):s=uv(n,e)}else s=e;return{pathname:s,search:xP(i),hash:bP(r)}}function uv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Od(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fg(t,e){let n=IP(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function jg(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=so(t):(r=Ba({},t),Re(!r.pathname||!r.pathname.includes("?"),Od("?","pathname","search",r)),Re(!r.pathname||!r.pathname.includes("#"),Od("#","pathname","hash",r)),Re(!r.search||!r.search.includes("#"),Od("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=TP(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Wi=t=>t.join("/").replace(/\/\/+/g,"/"),SP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dI=["post","put","patch","delete"];new Set(dI);const CP=["get",...dI];new Set(CP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},za.apply(this,arguments)}const uh=O.createContext(null),fI=O.createContext(null),ci=O.createContext(null),ch=O.createContext(null),sr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),pI=O.createContext(null);function AP(t,e){let{relative:n}=e===void 0?{}:e;oo()||Re(!1);let{basename:i,navigator:r}=O.useContext(ci),{hash:s,pathname:o,search:a}=hh(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Wi([i,o])),r.createHref({pathname:l,search:a,hash:s})}function oo(){return O.useContext(ch)!=null}function Qr(){return oo()||Re(!1),O.useContext(ch).location}function gI(t){O.useContext(ci).static||O.useLayoutEffect(t)}function cl(){let{isDataRoute:t}=O.useContext(sr);return t?zP():PP()}function PP(){oo()||Re(!1);let t=O.useContext(uh),{basename:e,future:n,navigator:i}=O.useContext(ci),{matches:r}=O.useContext(sr),{pathname:s}=Qr(),o=JSON.stringify(Fg(r,n.v7_relativeSplatPath)),a=O.useRef(!1);return gI(()=>{a.current=!0}),O.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=jg(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Wi([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function hh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(ci),{matches:r}=O.useContext(sr),{pathname:s}=Qr(),o=JSON.stringify(Fg(r,i.v7_relativeSplatPath));return O.useMemo(()=>jg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function RP(t,e){return NP(t,e)}function NP(t,e,n,i){oo()||Re(!1);let{navigator:r}=O.useContext(ci),{matches:s}=O.useContext(sr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Qr(),h;if(e){var d;let I=typeof e=="string"?so(e):e;l==="/"||(d=I.pathname)!=null&&d.startsWith(l)||Re(!1),h=I}else h=u;let f=h.pathname||"/",m=f;if(l!=="/"){let I=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let y=oP(t,{pathname:m}),v=VP(y&&y.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Wi([l,r.encodeLocation?r.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Wi([l,r.encodeLocation?r.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,i);return e&&v?O.createElement(ch.Provider,{value:{location:za({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ri.Pop}},v):v}function DP(){let t=BP(),e=kP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const MP=O.createElement(DP,null);class OP extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(sr.Provider,{value:this.props.routeContext},O.createElement(pI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LP(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(uh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(sr.Provider,{value:e},i)}function VP(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Re(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,y=!1,v=null,I=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||MP,l&&(u<0&&f===0?($P("route-fallback"),y=!0,I=null):u===f&&(y=!0,I=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),T=()=>{let b;return m?b=v:y?b=I:d.route.Component?b=O.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,O.createElement(LP,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(OP,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):T()},null)}var mI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mI||{}),yI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yI||{});function FP(t){let e=O.useContext(uh);return e||Re(!1),e}function jP(t){let e=O.useContext(fI);return e||Re(!1),e}function UP(t){let e=O.useContext(sr);return e||Re(!1),e}function _I(t){let e=UP(),n=e.matches[e.matches.length-1];return n.route.id||Re(!1),n.route.id}function BP(){var t;let e=O.useContext(pI),n=jP(),i=_I();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function zP(){let{router:t}=FP(mI.UseNavigateStable),e=_I(yI.UseNavigateStable),n=O.useRef(!1);return gI(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,za({fromRouteId:e},s)))},[t,e])}const cv={};function $P(t,e,n){cv[t]||(cv[t]=!0)}function WP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rp(t){let{to:e,replace:n,state:i,relative:r}=t;oo()||Re(!1);let{future:s,static:o}=O.useContext(ci),{matches:a}=O.useContext(sr),{pathname:l}=Qr(),u=cl(),h=jg(e,Fg(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return O.useEffect(()=>u(JSON.parse(d),{replace:n,state:i,relative:r}),[u,d,r,n,i]),null}function Bn(t){Re(!1)}function HP(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ri.Pop,navigator:s,static:o=!1,future:a}=t;oo()&&Re(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:o,future:za({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=so(i));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:y="default"}=i,v=O.useMemo(()=>{let I=zs(h,l);return I==null?null:{location:{pathname:I,search:d,hash:f,state:m,key:y},navigationType:r}},[l,h,d,f,m,y,r]);return v==null?null:O.createElement(ci.Provider,{value:u},O.createElement(ch.Provider,{children:n,value:v}))}function qP(t){let{children:e,location:n}=t;return RP(sp(e),n)}new Promise(()=>{});function sp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,sp(i.props.children,s));return}i.type!==Bn&&Re(!1),!i.props.index||!i.props.children||Re(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=sp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vc.apply(this,arguments)}function vI(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function KP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GP(t,e){return t.button===0&&(!e||e==="_self")&&!KP(t)}const QP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],XP="6";try{window.__reactRouterVersion=XP}catch{}const JP=O.createContext({isTransitioning:!1}),ZP="startTransition",hv=Hk[ZP];function e1(t){let{basename:e,children:n,future:i,window:r}=t,s=O.useRef();s.current==null&&(s.current=iP({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=O.useCallback(d=>{u&&hv?hv(()=>l(d)):l(d)},[l,u]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>WP(i),[i]),O.createElement(HP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const t1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$a=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d}=e,f=vI(e,QP),{basename:m}=O.useContext(ci),y,v=!1;if(typeof u=="string"&&n1.test(u)&&(y=u,t1))try{let b=new URL(window.location.href),R=u.startsWith("//")?new URL(b.protocol+u):new URL(u),D=zs(R.pathname,m);R.origin===b.origin&&D!=null?u=D+R.search+R.hash:v=!0}catch{}let I=AP(u,{relative:r}),w=r1(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function T(b){i&&i(b),b.defaultPrevented||w(b)}return O.createElement("a",vc({},f,{href:y||I,onClick:v||s?i:T,ref:n,target:l}))}),Mo=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,d=vI(e,YP),f=hh(l,{relative:d.relative}),m=Qr(),y=O.useContext(fI),{navigator:v,basename:I}=O.useContext(ci),w=y!=null&&s1(f)&&u===!0,T=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=m.pathname,R=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(b=b.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&I&&(R=zs(R,I)||R);const D=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let L=b===T||!o&&b.startsWith(T)&&b.charAt(D)==="/",x=R!=null&&(R===T||!o&&R.startsWith(T)&&R.charAt(T.length)==="/"),_={isActive:L,isPending:x,isTransitioning:w},k=L?i:void 0,A;typeof s=="function"?A=s(_):A=[s,L?"active":null,x?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(_):a;return O.createElement($a,vc({},d,{"aria-current":k,className:A,ref:n,style:P,to:l,viewTransition:u}),typeof h=="function"?h(_):h)});var op;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(op||(op={}));var dv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dv||(dv={}));function i1(t){let e=O.useContext(uh);return e||Re(!1),e}function r1(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=cl(),u=Qr(),h=hh(t,{relative:o});return O.useCallback(d=>{if(GP(d,n)){d.preventDefault();let f=i!==void 0?i:_c(u)===_c(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,n,t,s,o,a])}function s1(t,e){e===void 0&&(e={});let n=O.useContext(JP);n==null&&Re(!1);let{basename:i}=i1(op.useViewTransitionState),r=hh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=zs(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=zs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ip(r.pathname,o)!=null||ip(r.pathname,s)!=null}var fv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},o1=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},EI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||d==null)throw new a1;const f=s<<2|a>>4;if(i.push(f),u!==64){const m=a<<4&240|u>>2;if(i.push(m),d!==64){const y=u<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l1=function(t){const e=wI(t);return EI.encodeByteArray(e,!0)},wc=function(t){return l1(t).replace(/\./g,"")},TI=function(t){try{return EI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=()=>u1().__FIREBASE_DEFAULTS__,h1=()=>{if(typeof process>"u"||typeof fv>"u")return;const t=fv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},d1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TI(t[1]);return e&&JSON.parse(e)},dh=()=>{try{return c1()||h1()||d1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},II=t=>{var e,n;return(n=(e=dh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},f1=t=>{const e=II(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},SI=()=>{var t;return(t=dh())===null||t===void 0?void 0:t.config},xI=t=>{var e;return(e=dh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wc(JSON.stringify(n)),wc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function y1(){var t;const e=(t=dh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function v1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w1(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E1(){return!y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kI(){try{return typeof indexedDB=="object"}catch{return!1}}function CI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function T1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="FirebaseError";class _n extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=I1,Object.setPrototypeOf(this,_n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yr.prototype.create)}}class Yr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?S1(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new _n(r,a,i)}}function S1(t,e){return t.replace(x1,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const x1=/\{\$([^}]+)}/g;function b1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ec(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(pv(s)&&pv(o)){if(!Ec(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function pv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Ko(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function k1(t,e){const n=new C1(t,e);return n.subscribe.bind(n)}class C1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");A1(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Ld),r.error===void 0&&(r.error=Ld),r.complete===void 0&&(r.complete=Ld);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function A1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ld(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=1e3,R1=2,N1=4*60*60*1e3,D1=.5;function gv(t,e=P1,n=R1){const i=e*Math.pow(n,t),r=Math.round(D1*i*(Math.random()-.5)*2);return Math.min(N1,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t){return t&&t._delegate?t._delegate:t}class gn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new p1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(L1(e))try{this.getOrInitializeService({instanceIdentifier:vr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vr){return this.instances.has(e)}getOptions(e=vr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:O1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=vr){return this.component?this.component.multipleInstances?e:vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O1(t){return t===vr?void 0:t}function L1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new M1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const F1={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},j1=oe.INFO,U1={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},B1=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=U1[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fh{constructor(e){this.name=e,this._logLevel=j1,this._logHandler=B1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const z1=(t,e)=>e.some(n=>t instanceof n);let mv,yv;function $1(){return mv||(mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W1(){return yv||(yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AI=new WeakMap,ap=new WeakMap,PI=new WeakMap,Vd=new WeakMap,Ug=new WeakMap;function H1(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AI.set(n,t)}).catch(()=>{}),Ug.set(e,t),e}function q1(t){if(ap.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ap.set(t,e)}let lp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K1(t){lp=t(lp)}function G1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Fd(this),e,...n);return PI.set(i,e.sort?e.sort():[e]),Hi(i)}:W1().includes(t)?function(...e){return t.apply(Fd(this),e),Hi(AI.get(this))}:function(...e){return Hi(t.apply(Fd(this),e))}}function Q1(t){return typeof t=="function"?G1(t):(t instanceof IDBTransaction&&q1(t),z1(t,$1())?new Proxy(t,lp):t)}function Hi(t){if(t instanceof IDBRequest)return H1(t);if(Vd.has(t))return Vd.get(t);const e=Q1(t);return e!==t&&(Vd.set(t,e),Ug.set(e,t)),e}const Fd=t=>Ug.get(t);function RI(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Hi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Hi(o.result),l.oldVersion,l.newVersion,Hi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Y1=["get","getKey","getAll","getAllKeys","count"],X1=["put","add","delete","clear"],jd=new Map;function _v(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=X1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Y1.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return jd.set(e,s),s}K1(t=>({...t,get:(e,n,i)=>_v(e,n)||t.get(e,n,i),has:(e,n)=>!!_v(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Z1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Z1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const up="@firebase/app",vv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new fh("@firebase/app"),eR="@firebase/app-compat",tR="@firebase/analytics-compat",nR="@firebase/analytics",iR="@firebase/app-check-compat",rR="@firebase/app-check",sR="@firebase/auth",oR="@firebase/auth-compat",aR="@firebase/database",lR="@firebase/data-connect",uR="@firebase/database-compat",cR="@firebase/functions",hR="@firebase/functions-compat",dR="@firebase/installations",fR="@firebase/installations-compat",pR="@firebase/messaging",gR="@firebase/messaging-compat",mR="@firebase/performance",yR="@firebase/performance-compat",_R="@firebase/remote-config",vR="@firebase/remote-config-compat",wR="@firebase/storage",ER="@firebase/storage-compat",TR="@firebase/firestore",IR="@firebase/vertexai-preview",SR="@firebase/firestore-compat",xR="firebase",bR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",kR={[up]:"fire-core",[eR]:"fire-core-compat",[nR]:"fire-analytics",[tR]:"fire-analytics-compat",[rR]:"fire-app-check",[iR]:"fire-app-check-compat",[sR]:"fire-auth",[oR]:"fire-auth-compat",[aR]:"fire-rtdb",[lR]:"fire-data-connect",[uR]:"fire-rtdb-compat",[cR]:"fire-fn",[hR]:"fire-fn-compat",[dR]:"fire-iid",[fR]:"fire-iid-compat",[pR]:"fire-fcm",[gR]:"fire-fcm-compat",[mR]:"fire-perf",[yR]:"fire-perf-compat",[_R]:"fire-rc",[vR]:"fire-rc-compat",[wR]:"fire-gcs",[ER]:"fire-gcs-compat",[TR]:"fire-fst",[SR]:"fire-fst-compat",[IR]:"fire-vertex","fire-js":"fire-js",[xR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,CR=new Map,hp=new Map;function wv(t,e){try{t.container.addComponent(e)}catch(n){si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dn(t){const e=t.name;if(hp.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,t);for(const n of Tc.values())wv(n,t);for(const n of CR.values())wv(n,t);return!0}function dl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qi=new Yr("app","Firebase",AR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=bR;function NI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:cp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw qi.create("bad-app-name",{appName:String(r)});if(n||(n=SI()),!n)throw qi.create("no-options");const s=Tc.get(r);if(s){if(Ec(n,s.options)&&Ec(i,s.config))return s;throw qi.create("duplicate-app",{appName:r})}const o=new V1(r);for(const l of hp.values())o.addComponent(l);const a=new PR(n,i,o);return Tc.set(r,a),a}function DI(t=cp){const e=Tc.get(t);if(!e&&t===cp&&SI())return NI();if(!e)throw qi.create("no-app",{appName:t});return e}function Jt(t,e,n){var i;let r=(i=kR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(a.join(" "));return}Dn(new gn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebase-heartbeat-database",NR=1,Wa="firebase-heartbeat-store";let Ud=null;function MI(){return Ud||(Ud=RI(RR,NR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wa)}catch(n){console.warn(n)}}}}).catch(t=>{throw qi.create("idb-open",{originalErrorMessage:t.message})})),Ud}async function DR(t){try{const n=(await MI()).transaction(Wa),i=await n.objectStore(Wa).get(OI(t));return await n.done,i}catch(e){if(e instanceof _n)si.warn(e.message);else{const n=qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});si.warn(n.message)}}}async function Ev(t,e){try{const i=(await MI()).transaction(Wa,"readwrite");await i.objectStore(Wa).put(e,OI(t)),await i.done}catch(n){if(n instanceof _n)si.warn(n.message);else{const i=qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});si.warn(i.message)}}}function OI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=1024,OR=30*24*60*60*1e3;class LR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Tv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=OR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){si.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tv(),{heartbeatsToSend:i,unsentEntries:r}=VR(this._heartbeatsCache.heartbeats),s=wc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return si.warn(n),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function VR(t,e=MR){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Iv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Iv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class FR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kI()?CI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Iv(t){return wc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){Dn(new gn("platform-logger",e=>new J1(e),"PRIVATE")),Dn(new gn("heartbeat",e=>new LR(e),"PRIVATE")),Jt(up,vv,t),Jt(up,vv,"esm2017"),Jt("fire-js","")}jR("");function Bg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function LI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UR=LI,VI=new Yr("auth","Firebase",LI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new fh("@firebase/auth");function BR(t,...e){Ic.logLevel<=oe.WARN&&Ic.warn(`Auth (${ao}): ${t}`,...e)}function Ou(t,...e){Ic.logLevel<=oe.ERROR&&Ic.error(`Auth (${ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw zg(t,...e)}function Cn(t,...e){return zg(t,...e)}function FI(t,e,n){const i=Object.assign(Object.assign({},UR()),{[e]:n});return new Yr("auth","Firebase",i).create(e,{appName:t.name})}function Zn(t){return FI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return VI.create(t,...e)}function Y(t,e,...n){if(!t)throw zg(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ou(e),new Error(e)}function oi(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zR(){return Sv()==="http:"||Sv()==="https:"}function Sv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zR()||bI()||"connection"in navigator)?navigator.onLine:!0}function WR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=m1()||v1()}get(){return $R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t,e){oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new fl(3e4,6e4);function hi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ln(t,e,n,i,r={}){return UI(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=hl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return _1()||(u.referrerPolicy="no-referrer"),jI.fetch()(BI(t,t.config.apiHost,n,a),u)})}async function UI(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},HR),e);try{const r=new GR(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ru(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ru(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ru(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ru(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw FI(t,h,u);mn(t,h)}}catch(r){if(r instanceof _n)throw r;mn(t,"network-request-failed",{message:String(r)})}}async function pl(t,e,n,i,r={}){const s=await Ln(t,e,n,i,r);return"mfaPendingCredential"in s&&mn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function BI(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?$g(t.config,r):`${t.config.apiScheme}://${r}`}function KR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Cn(this.auth,"network-request-failed")),qR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ru(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Cn(t,e,i);return r.customData._tokenResponse=n,r}function xv(t){return t!==void 0&&t.enterprise!==void 0}class QR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return KR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function YR(t,e){return Ln(t,"GET","/v2/recaptchaConfig",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e){return Ln(t,"POST","/v1/accounts:delete",e)}async function zI(t,e){return Ln(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JR(t,e=!1){const n=je(t),i=await n.getIdToken(e),r=Wg(i);Y(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:da(Bd(r.auth_time)),issuedAtTime:da(Bd(r.iat)),expirationTime:da(Bd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Bd(t){return Number(t)*1e3}function Wg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const r=TI(n);return r?JSON.parse(r):(Ou("Failed to decode base64 JWT payload"),null)}catch(r){return Ou("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function bv(t){const e=Wg(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _n&&ZR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function ZR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=da(this.lastLoginAt),this.creationTime=da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await $s(t,zI(n,{idToken:i}));Y(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$I(s.providerUserInfo):[],a=nN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function tN(t){const e=je(t);await Sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function $I(t){return t.map(e=>{var{providerId:n}=e,i=Bg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t,e){const n=await UI(t,{},async()=>{const i=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=BI(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jI.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rN(t,e){return Ln(t,"POST","/v2/accounts:revokeToken",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await iN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Ps;return i&&(Y(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Y(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ps,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Bg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $s(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JR(this,e)}reload(){return tN(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await $s(this,XR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,T=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:R,isAnonymous:D,providerData:L,stsTokenManager:x}=n;Y(b&&x,e,"internal-error");const _=Ps.fromJSON(this.name,x);Y(typeof b=="string",e,"internal-error"),yi(d,e.name),yi(f,e.name),Y(typeof R=="boolean",e,"internal-error"),Y(typeof D=="boolean",e,"internal-error"),yi(m,e.name),yi(y,e.name),yi(v,e.name),yi(I,e.name),yi(w,e.name),yi(T,e.name);const k=new Yn({uid:b,auth:e,email:f,emailVerified:R,displayName:d,isAnonymous:D,photoURL:y,phoneNumber:m,tenantId:v,stsTokenManager:_,createdAt:w,lastLoginAt:T});return L&&Array.isArray(L)&&(k.providerData=L.map(A=>Object.assign({},A))),I&&(k._redirectEventId=I),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ps;r.updateFromServerResponse(n);const s=new Yn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Sc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Y(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?$I(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ps;a.updateFromIdToken(i);const l=new Yn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new fp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;function Xn(t){oi(t instanceof Function,"Expected a class definition");let e=kv.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WI.type="NONE";const Cv=WI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class Rs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Lu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Lu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Rs(Xn(Cv),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||Xn(Cv);const o=Lu(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=Yn._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Rs(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Rs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YI(e))return"Blackberry";if(XI(e))return"Webos";if(qI(e))return"Safari";if((e.includes("chrome/")||KI(e))&&!e.includes("edge/"))return"Chrome";if(QI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HI(t=vt()){return/firefox\//i.test(t)}function qI(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KI(t=vt()){return/crios\//i.test(t)}function GI(t=vt()){return/iemobile/i.test(t)}function QI(t=vt()){return/android/i.test(t)}function YI(t=vt()){return/blackberry/i.test(t)}function XI(t=vt()){return/webos/i.test(t)}function Hg(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sN(t=vt()){var e;return Hg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oN(){return w1()&&document.documentMode===10}function JI(t=vt()){return Hg(t)||QI(t)||XI(t)||YI(t)||/windows phone/i.test(t)||GI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t,e=[]){let n;switch(t){case"Browser":n=Av(vt());break;case"Worker":n=`${Av(vt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(t,e={}){return Ln(t,"GET","/v2/passwordPolicy",hi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=6;class cN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pv(this),this.idTokenSubscription=new Pv(this),this.beforeStateQueue=new aN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Rs.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zI(this,{idToken:e}),i=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Zn(this));const n=e?je(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lN(this),n=new cN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await rN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Rs.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&BR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function or(t){return je(t)}class Pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=k1(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dN(t){ph=t}function eS(t){return ph.loadJS(t)}function fN(){return ph.recaptchaEnterpriseScript}function pN(){return ph.gapiScript}function gN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const mN="recaptcha-enterprise",yN="NO_RECAPTCHA";class _N{constructor(e){this.type=mN,this.auth=or(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{YR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new QR(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;xv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(yN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&xv(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=fN();l.length!==0&&(l+=a),eS(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Rv(t,e,n,i=!1){const r=new _N(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function xc(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Rv(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Rv(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e){const n=dl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Ec(s,e??{}))return r;mn(r,"already-initialized")}return n.initialize({options:e})}function wN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function EN(t,e,n){const i=or(t);Y(i._canInitEmulator,i,"emulator-config-failed"),Y(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=tS(e),{host:o,port:a}=TN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),IN()}function tS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TN(t){const e=tS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Nv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Nv(o)}}}function Nv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}async function SN(t,e){return Ln(t,"POST","/v1/accounts:update",e)}async function xN(t,e){return Ln(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e){return pl(t,"POST","/v1/accounts:signInWithPassword",hi(t,e))}async function kN(t,e){return Ln(t,"POST","/v1/accounts:sendOobCode",hi(t,e))}async function CN(t,e){return kN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e){return pl(t,"POST","/v1/accounts:signInWithEmailLink",hi(t,e))}async function PN(t,e){return pl(t,"POST","/v1/accounts:signInWithEmailLink",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends qg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ha(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ha(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xc(e,n,"signInWithPassword",bN);case"emailLink":return AN(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xc(e,i,"signUpPassword",xN);case"emailLink":return PN(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ns(t,e){return pl(t,"POST","/v1/accounts:signInWithIdp",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="http://localhost";class jr extends qg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Bg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new jr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ns(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ns(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ns(e,n)}buildRequest(){const e={requestUri:RN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DN(t){const e=qo(Ko(t)).link,n=e?qo(Ko(e)).deep_link_id:null,i=qo(Ko(t)).deep_link_id;return(i?qo(Ko(i)).link:null)||i||n||e||t}class Kg{constructor(e){var n,i,r,s,o,a;const l=qo(Ko(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=NN((r=l.mode)!==null&&r!==void 0?r:null);Y(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=DN(e);try{return new Kg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.providerId=Xr.PROVIDER_ID}static credential(e,n){return Ha._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Kg.parseLink(n);return Y(i,"argument-error"),Ha._fromEmailAndCode(e,i.code,i.tenantId)}}Xr.PROVIDER_ID="password";Xr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends nS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends gl{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jr._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return bi.credential(n,i)}catch{return null}}}bi.GOOGLE_SIGN_IN_METHOD="google.com";bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends gl{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends gl{constructor(){super("twitter.com")}static credential(e,n){return jr._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){return pl(t,"POST","/v1/accounts:signUp",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Yn._fromIdTokenResponse(e,i,r),o=Dv(i);return new Ur({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Dv(i);return new Ur({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Dv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends _n{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new bc(e,n,i,r)}}function iS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(t,s,e,i):s})}async function ON(t,e,n=!1){const i=await $s(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ur._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e,n=!1){const{auth:i}=t;if(xn(i.app))return Promise.reject(Zn(i));const r="reauthenticate";try{const s=await $s(t,iS(i,r,e,t),n);Y(s.idToken,i,"internal-error");const o=Wg(s.idToken);Y(o,i,"internal-error");const{sub:a}=o;return Y(t.uid===a,i,"user-mismatch"),Ur._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&mn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(t,e,n=!1){if(xn(t.app))return Promise.reject(Zn(t));const i="signIn",r=await iS(t,i,e),s=await Ur._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function LN(t,e){return sS(or(t),e)}async function VN(t,e){return rS(je(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(t){const e=or(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FN(t,e,n){const i=or(t);await xc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",CN)}async function jN(t,e,n){if(xn(t.app))return Promise.reject(Zn(t));const i=or(t),o=await xc(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&oS(t),l}),a=await Ur._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function UN(t,e,n){return xn(t.app)?Promise.reject(Zn(t)):LN(je(t),Xr.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&oS(t),i})}function BN(t,e){return zN(je(t),null,e)}async function zN(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await $s(t,SN(i,s));await t._updateTokensIfNecessary(o,!0)}function $N(t,e,n,i){return je(t).onIdTokenChanged(e,n,i)}function WN(t,e,n){return je(t).beforeAuthStateChanged(e,n)}function HN(t,e,n,i){return je(t).onAuthStateChanged(e,n,i)}function qN(t){return je(t).signOut()}const kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kc,"1"),this.storage.removeItem(kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=1e3,GN=10;class lS extends aS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);oN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,GN):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},KN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lS.type="LOCAL";const QN=lS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends aS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uS.type="SESSION";const cS=uS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new gh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await YN(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Gg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function JN(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function ZN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tD(){return hS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="firebaseLocalStorageDb",nD=1,Cc="firebaseLocalStorage",fS="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mh(t,e){return t.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function iD(){const t=indexedDB.deleteDatabase(dS);return new ml(t).toPromise()}function pp(){const t=indexedDB.open(dS,nD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Cc,{keyPath:fS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Cc)?e(i):(i.close(),await iD(),e(await pp()))})})}async function Mv(t,e,n){const i=mh(t,!0).put({[fS]:e,value:n});return new ml(i).toPromise()}async function rD(t,e){const n=mh(t,!1).get(e),i=await new ml(n).toPromise();return i===void 0?null:i.value}function Ov(t,e){const n=mh(t,!0).delete(e);return new ml(n).toPromise()}const sD=800,oD=3;class pS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>oD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(tD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ZN(),!this.activeServiceWorker)return;this.sender=new XN(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pp();return await Mv(e,kc,"1"),await Ov(e,kc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Mv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>rD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=mh(r,!1).getAll();return new ml(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pS.type="LOCAL";const aD=pS;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){return e?Xn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends qg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ns(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ns(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ns(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uD(t){return sS(t.auth,new Qg(t),t.bypassAuthState)}function cD(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),rS(n,new Qg(t),t.bypassAuthState)}async function hD(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),ON(n,new Qg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uD;case"linkViaPopup":case"linkViaRedirect":return hD;case"reauthViaPopup":case"reauthViaRedirect":return cD;default:mn(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new fl(2e3,1e4);class Is extends gS{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Is.currentPopupAction&&Is.currentPopupAction.cancel(),Is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=Gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dD.get())};e()}}Is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="pendingRedirect",Vu=new Map;class pD extends gS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Vu.get(this.auth._key());if(!e){try{const i=await gD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Vu.set(this.auth._key(),e)}return this.bypassAuthState||Vu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gD(t,e){const n=_D(e),i=yD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function mD(t,e){Vu.set(t._key(),e)}function yD(t){return Xn(t._redirectPersistence)}function _D(t){return Lu(fD,t.config.apiKey,t.name)}async function vD(t,e,n=!1){if(xn(t.app))return Promise.reject(Zn(t));const i=or(t),r=lD(i,e),o=await new pD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=10*60*1e3;class ED{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!mS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lv(e))}saveEventToCache(e){this.cachedEventUids.add(Lv(e)),this.lastProcessedEventTime=Date.now()}}function Lv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e={}){return Ln(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xD=/^https?/;async function bD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ID(t);for(const n of e)try{if(kD(n))return}catch{}mn(t,"unauthorized-domain")}function kD(t){const e=dp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!xD.test(n))return!1;if(SD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new fl(3e4,6e4);function Vv(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AD(t){return new Promise((e,n)=>{var i,r,s;function o(){Vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vv(),n(Cn(t,"network-request-failed"))},timeout:CD.get()})}if(!((r=(i=An().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=An().gapi)===null||s===void 0)&&s.load)o();else{const a=gN("iframefcb");return An()[a]=()=>{gapi.load?o():n(Cn(t,"network-request-failed"))},eS(`${pN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fu=null,e})}let Fu=null;function PD(t){return Fu=Fu||AD(t),Fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new fl(5e3,15e3),ND="__/auth/iframe",DD="emulator/auth/iframe",MD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LD(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$g(e,DD):`https://${t.config.authDomain}/${ND}`,i={apiKey:e.apiKey,appName:t.name,v:ao},r=OD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${hl(i).slice(1)}`}async function VD(t){const e=await PD(t),n=An().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:LD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),a=An().setTimeout(()=>{s(o)},RD.get());function l(){An().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jD=500,UD=600,BD="_blank",zD="http://localhost";class Fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $D(t,e,n,i=jD,r=UD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FD),{width:i.toString(),height:r.toString(),top:s,left:o}),u=vt().toLowerCase();n&&(a=KI(u)?BD:n),HI(u)&&(e=e||zD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,y])=>`${f}${m}=${y},`,"");if(sN(u)&&a!=="_self")return WD(e||"",a),new Fv(null);const d=window.open(e||"",a,h);Y(d,t,"popup-blocked");try{d.focus()}catch{}return new Fv(d)}function WD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="__/auth/handler",qD="emulator/auth/handler",KD=encodeURIComponent("fac");async function jv(t,e,n,i,r,s){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ao,eventId:r};if(e instanceof nS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",b1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof gl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${KD}=${encodeURIComponent(l)}`:"";return`${GD(t)}?${hl(a).slice(1)}${u}`}function GD({config:t}){return t.emulator?$g(t,qD):`https://${t.authDomain}/${HD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class QD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cS,this._completeRedirectFn=vD,this._overrideRedirectResult=mD}async _openPopup(e,n,i,r){var s;oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await jv(e,n,i,dp(),r);return $D(e,o,Gg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await jv(e,n,i,dp(),r);return JN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(oi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await VD(e),i=new ED(e);return n.register("authEvent",r=>(Y(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[zd];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JI()||qI()||Hg()}}const YD=QD;var Uv="@firebase/auth",Bv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZD(t){Dn(new gn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZI(t)},u=new hN(i,r,s,l);return wN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Dn(new gn("auth-internal",e=>{const n=or(e.getProvider("auth").getImmediate());return(i=>new XD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jt(Uv,Bv,JD(t)),Jt(Uv,Bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=5*60,tM=xI("authIdTokenMaxAge")||eM;let zv=null;const nM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>tM)return;const r=n==null?void 0:n.token;zv!==r&&(zv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function iM(t=DI()){const e=dl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vN(t,{popupRedirectResolver:YD,persistence:[aD,QN,cS]}),i=xI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=nM(s.toString());WN(n,o,()=>o(n.currentUser)),$N(n,a=>o(a))}}const r=II("auth");return r&&EN(n,`http://${r}`),n}function rM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Cn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",rM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZD("Browser");var sM="firebase",oM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt(sM,oM,"app");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,yS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,_){function k(){}k.prototype=_.prototype,x.D=_.prototype,x.prototype=new k,x.prototype.constructor=x,x.C=function(A,P,N){for(var C=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)C[ee-2]=arguments[ee];return _.prototype[P].apply(A,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,_,k){k||(k=0);var A=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)A[P]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(P=0;16>P;++P)A[P]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=x.g[0],k=x.g[1],P=x.g[2];var N=x.g[3],C=_+(N^k&(P^N))+A[0]+3614090360&4294967295;_=k+(C<<7&4294967295|C>>>25),C=N+(P^_&(k^P))+A[1]+3905402710&4294967295,N=_+(C<<12&4294967295|C>>>20),C=P+(k^N&(_^k))+A[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=k+(_^P&(N^_))+A[3]+3250441966&4294967295,k=P+(C<<22&4294967295|C>>>10),C=_+(N^k&(P^N))+A[4]+4118548399&4294967295,_=k+(C<<7&4294967295|C>>>25),C=N+(P^_&(k^P))+A[5]+1200080426&4294967295,N=_+(C<<12&4294967295|C>>>20),C=P+(k^N&(_^k))+A[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=k+(_^P&(N^_))+A[7]+4249261313&4294967295,k=P+(C<<22&4294967295|C>>>10),C=_+(N^k&(P^N))+A[8]+1770035416&4294967295,_=k+(C<<7&4294967295|C>>>25),C=N+(P^_&(k^P))+A[9]+2336552879&4294967295,N=_+(C<<12&4294967295|C>>>20),C=P+(k^N&(_^k))+A[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=k+(_^P&(N^_))+A[11]+2304563134&4294967295,k=P+(C<<22&4294967295|C>>>10),C=_+(N^k&(P^N))+A[12]+1804603682&4294967295,_=k+(C<<7&4294967295|C>>>25),C=N+(P^_&(k^P))+A[13]+4254626195&4294967295,N=_+(C<<12&4294967295|C>>>20),C=P+(k^N&(_^k))+A[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=k+(_^P&(N^_))+A[15]+1236535329&4294967295,k=P+(C<<22&4294967295|C>>>10),C=_+(P^N&(k^P))+A[1]+4129170786&4294967295,_=k+(C<<5&4294967295|C>>>27),C=N+(k^P&(_^k))+A[6]+3225465664&4294967295,N=_+(C<<9&4294967295|C>>>23),C=P+(_^k&(N^_))+A[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=k+(N^_&(P^N))+A[0]+3921069994&4294967295,k=P+(C<<20&4294967295|C>>>12),C=_+(P^N&(k^P))+A[5]+3593408605&4294967295,_=k+(C<<5&4294967295|C>>>27),C=N+(k^P&(_^k))+A[10]+38016083&4294967295,N=_+(C<<9&4294967295|C>>>23),C=P+(_^k&(N^_))+A[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=k+(N^_&(P^N))+A[4]+3889429448&4294967295,k=P+(C<<20&4294967295|C>>>12),C=_+(P^N&(k^P))+A[9]+568446438&4294967295,_=k+(C<<5&4294967295|C>>>27),C=N+(k^P&(_^k))+A[14]+3275163606&4294967295,N=_+(C<<9&4294967295|C>>>23),C=P+(_^k&(N^_))+A[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=k+(N^_&(P^N))+A[8]+1163531501&4294967295,k=P+(C<<20&4294967295|C>>>12),C=_+(P^N&(k^P))+A[13]+2850285829&4294967295,_=k+(C<<5&4294967295|C>>>27),C=N+(k^P&(_^k))+A[2]+4243563512&4294967295,N=_+(C<<9&4294967295|C>>>23),C=P+(_^k&(N^_))+A[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=k+(N^_&(P^N))+A[12]+2368359562&4294967295,k=P+(C<<20&4294967295|C>>>12),C=_+(k^P^N)+A[5]+4294588738&4294967295,_=k+(C<<4&4294967295|C>>>28),C=N+(_^k^P)+A[8]+2272392833&4294967295,N=_+(C<<11&4294967295|C>>>21),C=P+(N^_^k)+A[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=k+(P^N^_)+A[14]+4259657740&4294967295,k=P+(C<<23&4294967295|C>>>9),C=_+(k^P^N)+A[1]+2763975236&4294967295,_=k+(C<<4&4294967295|C>>>28),C=N+(_^k^P)+A[4]+1272893353&4294967295,N=_+(C<<11&4294967295|C>>>21),C=P+(N^_^k)+A[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=k+(P^N^_)+A[10]+3200236656&4294967295,k=P+(C<<23&4294967295|C>>>9),C=_+(k^P^N)+A[13]+681279174&4294967295,_=k+(C<<4&4294967295|C>>>28),C=N+(_^k^P)+A[0]+3936430074&4294967295,N=_+(C<<11&4294967295|C>>>21),C=P+(N^_^k)+A[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=k+(P^N^_)+A[6]+76029189&4294967295,k=P+(C<<23&4294967295|C>>>9),C=_+(k^P^N)+A[9]+3654602809&4294967295,_=k+(C<<4&4294967295|C>>>28),C=N+(_^k^P)+A[12]+3873151461&4294967295,N=_+(C<<11&4294967295|C>>>21),C=P+(N^_^k)+A[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=k+(P^N^_)+A[2]+3299628645&4294967295,k=P+(C<<23&4294967295|C>>>9),C=_+(P^(k|~N))+A[0]+4096336452&4294967295,_=k+(C<<6&4294967295|C>>>26),C=N+(k^(_|~P))+A[7]+1126891415&4294967295,N=_+(C<<10&4294967295|C>>>22),C=P+(_^(N|~k))+A[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=k+(N^(P|~_))+A[5]+4237533241&4294967295,k=P+(C<<21&4294967295|C>>>11),C=_+(P^(k|~N))+A[12]+1700485571&4294967295,_=k+(C<<6&4294967295|C>>>26),C=N+(k^(_|~P))+A[3]+2399980690&4294967295,N=_+(C<<10&4294967295|C>>>22),C=P+(_^(N|~k))+A[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=k+(N^(P|~_))+A[1]+2240044497&4294967295,k=P+(C<<21&4294967295|C>>>11),C=_+(P^(k|~N))+A[8]+1873313359&4294967295,_=k+(C<<6&4294967295|C>>>26),C=N+(k^(_|~P))+A[15]+4264355552&4294967295,N=_+(C<<10&4294967295|C>>>22),C=P+(_^(N|~k))+A[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=k+(N^(P|~_))+A[13]+1309151649&4294967295,k=P+(C<<21&4294967295|C>>>11),C=_+(P^(k|~N))+A[4]+4149444226&4294967295,_=k+(C<<6&4294967295|C>>>26),C=N+(k^(_|~P))+A[11]+3174756917&4294967295,N=_+(C<<10&4294967295|C>>>22),C=P+(_^(N|~k))+A[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=k+(N^(P|~_))+A[9]+3951481745&4294967295,x.g[0]=x.g[0]+_&4294967295,x.g[1]=x.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+N&4294967295}i.prototype.u=function(x,_){_===void 0&&(_=x.length);for(var k=_-this.blockSize,A=this.B,P=this.h,N=0;N<_;){if(P==0)for(;N<=k;)r(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<_;)if(A[P++]=x.charCodeAt(N++),P==this.blockSize){r(this,A),P=0;break}}else for(;N<_;)if(A[P++]=x[N++],P==this.blockSize){r(this,A),P=0;break}}this.h=P,this.o+=_},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var _=1;_<x.length-8;++_)x[_]=0;var k=8*this.o;for(_=x.length-8;_<x.length;++_)x[_]=k&255,k/=256;for(this.u(x),x=Array(16),_=k=0;4>_;++_)for(var A=0;32>A;A+=8)x[k++]=this.g[_]>>>A&255;return x};function s(x,_){var k=a;return Object.prototype.hasOwnProperty.call(k,x)?k[x]:k[x]=_(x)}function o(x,_){this.h=_;for(var k=[],A=!0,P=x.length-1;0<=P;P--){var N=x[P]|0;A&&N==_||(k[P]=N,A=!1)}this.g=k}var a={};function l(x){return-128<=x&&128>x?s(x,function(_){return new o([_|0],0>_?-1:0)}):new o([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return I(u(-x));for(var _=[],k=1,A=0;x>=k;A++)_[A]=x/k|0,k*=4294967296;return new o(_,0)}function h(x,_){if(x.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(x.charAt(0)=="-")return I(h(x.substring(1),_));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(_,8)),A=d,P=0;P<x.length;P+=8){var N=Math.min(8,x.length-P),C=parseInt(x.substring(P,P+N),_);8>N?(N=u(Math.pow(_,N)),A=A.j(N).add(u(C))):(A=A.j(k),A=A.add(u(C)))}return A}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-I(this).m();for(var x=0,_=1,k=0;k<this.g.length;k++){var A=this.i(k);x+=(0<=A?A:4294967296+A)*_,_*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(y(this))return"0";if(v(this))return"-"+I(this).toString(x);for(var _=u(Math.pow(x,6)),k=this,A="";;){var P=R(k,_).g;k=w(k,P.j(_));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(x);if(k=P,y(k))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function y(x){if(x.h!=0)return!1;for(var _=0;_<x.g.length;_++)if(x.g[_]!=0)return!1;return!0}function v(x){return x.h==-1}t.l=function(x){return x=w(this,x),v(x)?-1:y(x)?0:1};function I(x){for(var _=x.g.length,k=[],A=0;A<_;A++)k[A]=~x.g[A];return new o(k,~x.h).add(f)}t.abs=function(){return v(this)?I(this):this},t.add=function(x){for(var _=Math.max(this.g.length,x.g.length),k=[],A=0,P=0;P<=_;P++){var N=A+(this.i(P)&65535)+(x.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);A=C>>>16,N&=65535,C&=65535,k[P]=C<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function w(x,_){return x.add(I(_))}t.j=function(x){if(y(this)||y(x))return d;if(v(this))return v(x)?I(this).j(I(x)):I(I(this).j(x));if(v(x))return I(this.j(I(x)));if(0>this.l(m)&&0>x.l(m))return u(this.m()*x.m());for(var _=this.g.length+x.g.length,k=[],A=0;A<2*_;A++)k[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<x.g.length;P++){var N=this.i(A)>>>16,C=this.i(A)&65535,ee=x.i(P)>>>16,ne=x.i(P)&65535;k[2*A+2*P]+=C*ne,T(k,2*A+2*P),k[2*A+2*P+1]+=N*ne,T(k,2*A+2*P+1),k[2*A+2*P+1]+=C*ee,T(k,2*A+2*P+1),k[2*A+2*P+2]+=N*ee,T(k,2*A+2*P+2)}for(A=0;A<_;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=_;A<2*_;A++)k[A]=0;return new o(k,0)};function T(x,_){for(;(x[_]&65535)!=x[_];)x[_+1]+=x[_]>>>16,x[_]&=65535,_++}function b(x,_){this.g=x,this.h=_}function R(x,_){if(y(_))throw Error("division by zero");if(y(x))return new b(d,d);if(v(x))return _=R(I(x),_),new b(I(_.g),I(_.h));if(v(_))return _=R(x,I(_)),new b(I(_.g),_.h);if(30<x.g.length){if(v(x)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var k=f,A=_;0>=A.l(x);)k=D(k),A=D(A);var P=L(k,1),N=L(A,1);for(A=L(A,2),k=L(k,2);!y(A);){var C=N.add(A);0>=C.l(x)&&(P=P.add(k),N=C),A=L(A,1),k=L(k,1)}return _=w(x,P.j(_)),new b(P,_)}for(P=d;0<=x.l(_);){for(k=Math.max(1,Math.floor(x.m()/_.m())),A=Math.ceil(Math.log(k)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=u(k),C=N.j(_);v(C)||0<C.l(x);)k-=A,N=u(k),C=N.j(_);y(N)&&(N=f),P=P.add(N),x=w(x,C)}return new b(P,x)}t.A=function(x){return R(this,x).h},t.and=function(x){for(var _=Math.max(this.g.length,x.g.length),k=[],A=0;A<_;A++)k[A]=this.i(A)&x.i(A);return new o(k,this.h&x.h)},t.or=function(x){for(var _=Math.max(this.g.length,x.g.length),k=[],A=0;A<_;A++)k[A]=this.i(A)|x.i(A);return new o(k,this.h|x.h)},t.xor=function(x){for(var _=Math.max(this.g.length,x.g.length),k=[],A=0;A<_;A++)k[A]=this.i(A)^x.i(A);return new o(k,this.h^x.h)};function D(x){for(var _=x.g.length+1,k=[],A=0;A<_;A++)k[A]=x.i(A)<<1|x.i(A-1)>>>31;return new o(k,x.h)}function L(x,_){var k=_>>5;_%=32;for(var A=x.g.length-k,P=[],N=0;N<A;N++)P[N]=0<_?x.i(N+k)>>>_|x.i(N+k+1)<<32-_:x.i(N+k);return new o(P,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yS=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Rr=o}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _S,Go,vS,ju,gp,wS,ES,TS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,g){return c==Array.prototype||c==Object.prototype||(c[p]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof su=="object"&&su];for(var p=0;p<c.length;++p){var g=c[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(c,p){if(p)e:{var g=i;c=c.split(".");for(var S=0;S<c.length-1;S++){var M=c[S];if(!(M in g))break e;g=g[M]}c=c[c.length-1],S=g[c],p=p(S),p!=S&&p!=null&&e(g,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var g=0,S=!1,M={next:function(){if(!S&&g<c.length){var V=g++;return{value:p(V,c[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}r("Array.prototype.values",function(c){return c||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,g){return c.call.apply(c.bind,arguments)}function d(c,p,g){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,S),c.apply(p,M)}}return function(){return c.apply(p,arguments)}}function f(c,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(c,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function y(c,p){function g(){}g.prototype=p.prototype,c.aa=p.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(S,M,V){for(var B=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)B[ve-2]=arguments[ve];return p.prototype[M].apply(S,B)}}function v(c){const p=c.length;if(0<p){const g=Array(p);for(let S=0;S<p;S++)g[S]=c[S];return g}return[]}function I(c,p){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const M=c.length||0,V=S.length||0;c.length=M+V;for(let B=0;B<V;B++)c[M+B]=S[B]}else c.push(S)}}class w{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function T(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var D=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function L(c,p,g){for(const S in c)p.call(g,c[S],S,c)}function x(c,p){for(const g in c)p.call(void 0,c[g],g,c)}function _(c){const p={};for(const g in c)p[g]=c[g];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,p){let g,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(g in S)c[g]=S[g];for(let V=0;V<k.length;V++)g=k[V],Object.prototype.hasOwnProperty.call(S,g)&&(c[g]=S[g])}}function P(c){var p=1;c=c.split(":");const g=[];for(;0<p&&c.length;)g.push(c.shift()),p--;return c.length&&g.push(c.join(":")),g}function N(c){a.setTimeout(()=>{throw c},0)}function C(){var c=H;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ee{constructor(){this.h=this.g=null}add(p,g){const S=ne.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var ne=new w(()=>new ge,c=>c.reset());class ge{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let we,z=!1,H=new ee,G=()=>{const c=a.Promise.resolve(void 0);we=()=>{c.then(ce)}};var ce=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(g){N(g)}var p=ne;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}z=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return c}();function $e(c,p){if(fe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(D){e:{try{R(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else g=="mouseover"?p=c.fromElement:g=="mouseout"&&(p=c.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:We[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&$e.aa.h.call(this)}}y($e,fe);var We={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),Sl=0;function jh(c,p,g,S,M){this.listener=c,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=M,this.key=++Sl,this.da=this.fa=!1}function Q(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Qe(c){this.src=c,this.g={},this.h=0}Qe.prototype.add=function(c,p,g,S,M){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var B=Bh(c,p,S,M);return-1<B?(p=c[B],g||(p.fa=!1)):(p=new jh(p,this.src,V,!!S,M),p.fa=g,c.push(p)),p};function Uh(c,p){var g=p.type;if(g in c.g){var S=c.g[g],M=Array.prototype.indexOf.call(S,p,void 0),V;(V=0<=M)&&Array.prototype.splice.call(S,M,1),V&&(Q(p),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Bh(c,p,g,S){for(var M=0;M<c.length;++M){var V=c[M];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==S)return M}return-1}var zh="closure_lm_"+(1e6*Math.random()|0),$h={};function Xm(c,p,g,S,M){if(Array.isArray(p)){for(var V=0;V<p.length;V++)Xm(c,p[V],g,S,M);return null}return g=ey(g),c&&c[rn]?c.K(p,g,u(S)?!!S.capture:!1,M):Xb(c,p,g,!1,S,M)}function Xb(c,p,g,S,M,V){if(!p)throw Error("Invalid event type");var B=u(M)?!!M.capture:!!M,ve=Hh(c);if(ve||(c[zh]=ve=new Qe(c)),g=ve.add(p,g,S,B,V),g.proxy)return g;if(S=Jb(),g.proxy=S,S.src=c,S.listener=g,c.addEventListener)ze||(M=B),M===void 0&&(M=!1),c.addEventListener(p.toString(),S,M);else if(c.attachEvent)c.attachEvent(Zm(p.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Jb(){function c(g){return p.call(c.src,c.listener,g)}const p=Zb;return c}function Jm(c,p,g,S,M){if(Array.isArray(p))for(var V=0;V<p.length;V++)Jm(c,p[V],g,S,M);else S=u(S)?!!S.capture:!!S,g=ey(g),c&&c[rn]?(c=c.i,p=String(p).toString(),p in c.g&&(V=c.g[p],g=Bh(V,g,S,M),-1<g&&(Q(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete c.g[p],c.h--)))):c&&(c=Hh(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Bh(p,g,S,M)),(g=-1<c?p[c]:null)&&Wh(g))}function Wh(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[rn])Uh(p.i,c);else{var g=c.type,S=c.proxy;p.removeEventListener?p.removeEventListener(g,S,c.capture):p.detachEvent?p.detachEvent(Zm(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=Hh(p))?(Uh(g,c),g.h==0&&(g.src=null,p[zh]=null)):Q(c)}}}function Zm(c){return c in $h?$h[c]:$h[c]="on"+c}function Zb(c,p){if(c.da)c=!0;else{p=new $e(p,this);var g=c.listener,S=c.ha||c.src;c.fa&&Wh(c),c=g.call(S,p)}return c}function Hh(c){return c=c[zh],c instanceof Qe?c:null}var qh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ey(c){return typeof c=="function"?c:(c[qh]||(c[qh]=function(p){return c.handleEvent(p)}),c[qh])}function lt(){re.call(this),this.i=new Qe(this),this.M=this,this.F=null}y(lt,re),lt.prototype[rn]=!0,lt.prototype.removeEventListener=function(c,p,g,S){Jm(this,c,p,g,S)};function wt(c,p){var g,S=c.F;if(S)for(g=[];S;S=S.F)g.push(S);if(c=c.M,S=p.type||p,typeof p=="string")p=new fe(p,c);else if(p instanceof fe)p.target=p.target||c;else{var M=p;p=new fe(S,c),A(p,M)}if(M=!0,g)for(var V=g.length-1;0<=V;V--){var B=p.g=g[V];M=xl(B,S,!0,p)&&M}if(B=p.g=c,M=xl(B,S,!0,p)&&M,M=xl(B,S,!1,p)&&M,g)for(V=0;V<g.length;V++)B=p.g=g[V],M=xl(B,S,!1,p)&&M}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var g=c.g[p],S=0;S<g.length;S++)Q(g[S]);delete c.g[p],c.h--}}this.F=null},lt.prototype.K=function(c,p,g,S){return this.i.add(String(c),p,!1,g,S)},lt.prototype.L=function(c,p,g,S){return this.i.add(String(c),p,!0,g,S)};function xl(c,p,g,S){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,V=0;V<p.length;++V){var B=p[V];if(B&&!B.da&&B.capture==g){var ve=B.listener,Ze=B.ha||B.src;B.fa&&Uh(c.i,B),M=ve.call(Ze,S)!==!1&&M}}return M&&!S.defaultPrevented}function ty(c,p,g){if(typeof c=="function")g&&(c=f(c,g));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function ny(c){c.g=ty(()=>{c.g=null,c.i&&(c.i=!1,ny(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ek extends re{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ny(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fo(c){re.call(this),this.h=c,this.g={}}y(fo,re);var iy=[];function ry(c){L(c.g,function(p,g){this.g.hasOwnProperty(g)&&Wh(p)},c),c.g={}}fo.prototype.N=function(){fo.aa.N.call(this),ry(this)},fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kh=a.JSON.stringify,tk=a.JSON.parse,nk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Gh(){}Gh.prototype.h=null;function sy(c){return c.h||(c.h=c.i())}function oy(){}var po={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qh(){fe.call(this,"d")}y(Qh,fe);function Yh(){fe.call(this,"c")}y(Yh,fe);var lr={},ay=null;function bl(){return ay=ay||new lt}lr.La="serverreachability";function ly(c){fe.call(this,lr.La,c)}y(ly,fe);function go(c){const p=bl();wt(p,new ly(p))}lr.STAT_EVENT="statevent";function uy(c,p){fe.call(this,lr.STAT_EVENT,c),this.stat=p}y(uy,fe);function Et(c){const p=bl();wt(p,new uy(p,c))}lr.Ma="timingevent";function cy(c,p){fe.call(this,lr.Ma,c),this.size=p}y(cy,fe);function mo(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function yo(){this.g=!0}yo.prototype.xa=function(){this.g=!1};function ik(c,p,g,S,M,V){c.info(function(){if(c.g)if(V)for(var B="",ve=V.split("&"),Ze=0;Ze<ve.length;Ze++){var he=ve[Ze].split("=");if(1<he.length){var ut=he[0];he=he[1];var ct=ut.split("_");B=2<=ct.length&&ct[1]=="type"?B+(ut+"="+he+"&"):B+(ut+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+p+`
`+g+`
`+B})}function rk(c,p,g,S,M,V,B){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+p+`
`+g+`
`+V+" "+B})}function ts(c,p,g,S){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+ok(c,g)+(S?" "+S:"")})}function sk(c,p){c.info(function(){return"TIMEOUT: "+p})}yo.prototype.info=function(){};function ok(c,p){if(!c.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var S=g[c];if(!(2>S.length)){var M=S[1];if(Array.isArray(M)&&!(1>M.length)){var V=M[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<M.length;B++)M[B]=""}}}}return Kh(g)}catch{return p}}var kl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xh;function Cl(){}y(Cl,Gh),Cl.prototype.g=function(){return new XMLHttpRequest},Cl.prototype.i=function(){return{}},Xh=new Cl;function fi(c,p,g,S){this.j=c,this.i=p,this.l=g,this.R=S||1,this.U=new fo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dy}function dy(){this.i=null,this.g="",this.h=!1}var fy={},Jh={};function Zh(c,p,g){c.L=1,c.v=Nl(Vn(p)),c.m=g,c.P=!0,py(c,null)}function py(c,p){c.F=Date.now(),Al(c),c.A=Vn(c.v);var g=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Cy(g.i,"t",S),c.C=0,g=c.j.J,c.h=new dy,c.g=qy(c.j,g?p:null,!c.m),0<c.O&&(c.M=new ek(f(c.Y,c,c.g),c.O)),p=c.U,g=c.g,S=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(iy[0]=M.toString()),M=iy);for(var V=0;V<M.length;V++){var B=Xm(g,M[V],S||p.handleEvent,!1,p.h||p);if(!B)break;p.g[B.key]=B}p=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),go(),ik(c.i,c.u,c.A,c.l,c.R,c.m)}fi.prototype.ca=function(c){c=c.target;const p=this.M;p&&Fn(c)==3?p.j():this.Y(c)},fi.prototype.Y=function(c){try{if(c==this.g)e:{const ct=Fn(this.g);var p=this.g.Ba();const rs=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Oy(this.g)))){this.J||ct!=4||p==7||(p==8||0>=rs?go(3):go(2)),ed(this);var g=this.g.Z();this.X=g;t:if(gy(this)){var S=Oy(this.g);c="";var M=S.length,V=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),_o(this);var B="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,c+=this.h.i.decode(S[p],{stream:!(V&&p==M-1)});S.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=g==200,rk(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,Ze=this.g;if((ve=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(ve)){var he=ve;break t}}he=null}if(g=he)ts(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,td(this,g);else{this.o=!1,this.s=3,Et(12),ur(this),_o(this);break e}}if(this.P){g=!0;let sn;for(;!this.J&&this.C<B.length;)if(sn=ak(this,B),sn==Jh){ct==4&&(this.s=4,Et(14),g=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==fy){this.s=4,Et(15),ts(this.i,this.l,B,"[Invalid Chunk]"),g=!1;break}else ts(this.i,this.l,sn,null),td(this,sn);if(gy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||B.length!=0||this.h.h||(this.s=1,Et(16),g=!1),this.o=this.o&&g,!g)ts(this.i,this.l,B,"[Invalid Chunked Response]"),ur(this),_o(this);else if(0<B.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),ad(ut),ut.M=!0,Et(11))}}else ts(this.i,this.l,B,null),td(this,B);ct==4&&ur(this),this.o&&!this.J&&(ct==4?zy(this.j,this):(this.o=!1,Al(this)))}else Sk(this.g),g==400&&0<B.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),ur(this),_o(this)}}}catch{}finally{}};function gy(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ak(c,p){var g=c.C,S=p.indexOf(`
`,g);return S==-1?Jh:(g=Number(p.substring(g,S)),isNaN(g)?fy:(S+=1,S+g>p.length?Jh:(p=p.slice(S,S+g),c.C=S+g,p)))}fi.prototype.cancel=function(){this.J=!0,ur(this)};function Al(c){c.S=Date.now()+c.I,my(c,c.I)}function my(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=mo(f(c.ba,c),p)}function ed(c){c.B&&(a.clearTimeout(c.B),c.B=null)}fi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(sk(this.i,this.A),this.L!=2&&(go(),Et(17)),ur(this),this.s=2,_o(this)):my(this,this.S-c)};function _o(c){c.j.G==0||c.J||zy(c.j,c)}function ur(c){ed(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,ry(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function td(c,p){try{var g=c.j;if(g.G!=0&&(g.g==c||nd(g.h,c))){if(!c.K&&nd(g.h,c)&&g.G==3){try{var S=g.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Fl(g),Ll(g);else break e;od(g),Et(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=mo(f(g.Za,g),6e3));if(1>=vy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else hr(g,11)}else if((c.K||g.g==c)&&Fl(g),!T(p))for(M=g.Da.g.parse(p),p=0;p<M.length;p++){let he=M[p];if(g.T=he[0],he=he[1],g.G==2)if(he[0]=="c"){g.K=he[1],g.ia=he[2];const ut=he[3];ut!=null&&(g.la=ut,g.j.info("VER="+g.la));const ct=he[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const rs=he[5];rs!=null&&typeof rs=="number"&&0<rs&&(S=1.5*rs,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const sn=c.g;if(sn){const Ul=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ul){var V=S.h;V.g||Ul.indexOf("spdy")==-1&&Ul.indexOf("quic")==-1&&Ul.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(id(V,V.h),V.h=null))}if(S.D){const ld=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;ld&&(S.ya=ld,Ie(S.I,S.D,ld))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var B=c;if(S.qa=Hy(S,S.J?S.ia:null,S.W),B.K){wy(S.h,B);var ve=B,Ze=S.L;Ze&&(ve.I=Ze),ve.B&&(ed(ve),Al(ve)),S.g=B}else Uy(S);0<g.i.length&&Vl(g)}else he[0]!="stop"&&he[0]!="close"||hr(g,7);else g.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?hr(g,7):sd(g):he[0]!="noop"&&g.l&&g.l.ta(he),g.v=0)}}go(4)}catch{}}var lk=class{constructor(c,p){this.g=c,this.map=p}};function yy(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _y(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vy(c){return c.h?1:c.g?c.g.size:0}function nd(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function id(c,p){c.g?c.g.add(p):c.h=p}function wy(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}yy.prototype.cancel=function(){if(this.i=Ey(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ey(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const g of c.g.values())p=p.concat(g.D);return p}return v(c.i)}function uk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],g=c.length,S=0;S<g;S++)p.push(c[S]);return p}p=[],g=0;for(S in c)p[g++]=c[S];return p}function ck(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var g=0;g<c;g++)p.push(g);return p}p=[],g=0;for(const S in c)p[g++]=S;return p}}}function Ty(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var g=ck(c),S=uk(c),M=S.length,V=0;V<M;V++)p.call(void 0,S[V],g&&g[V],c)}var Iy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hk(c,p){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var S=c[g].indexOf("="),M=null;if(0<=S){var V=c[g].substring(0,S);M=c[g].substring(S+1)}else V=c[g];p(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function cr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof cr){this.h=c.h,Pl(this,c.j),this.o=c.o,this.g=c.g,Rl(this,c.s),this.l=c.l;var p=c.i,g=new Eo;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Sy(this,g),this.m=c.m}else c&&(p=String(c).match(Iy))?(this.h=!1,Pl(this,p[1]||"",!0),this.o=vo(p[2]||""),this.g=vo(p[3]||"",!0),Rl(this,p[4]),this.l=vo(p[5]||"",!0),Sy(this,p[6]||"",!0),this.m=vo(p[7]||"")):(this.h=!1,this.i=new Eo(null,this.h))}cr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(wo(p,xy,!0),":");var g=this.g;return(g||p=="file")&&(c.push("//"),(p=this.o)&&c.push(wo(p,xy,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(wo(g,g.charAt(0)=="/"?pk:fk,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",wo(g,mk)),c.join("")};function Vn(c){return new cr(c)}function Pl(c,p,g){c.j=g?vo(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Rl(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Sy(c,p,g){p instanceof Eo?(c.i=p,yk(c.i,c.h)):(g||(p=wo(p,gk)),c.i=new Eo(p,c.h))}function Ie(c,p,g){c.i.set(p,g)}function Nl(c){return Ie(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function vo(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wo(c,p,g){return typeof c=="string"?(c=encodeURI(c).replace(p,dk),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function dk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var xy=/[#\/\?@]/g,fk=/[#\?:]/g,pk=/[#\?]/g,gk=/[#\?@]/g,mk=/#/g;function Eo(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function pi(c){c.g||(c.g=new Map,c.h=0,c.i&&hk(c.i,function(p,g){c.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Eo.prototype,t.add=function(c,p){pi(this),this.i=null,c=ns(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(p),this.h+=1,this};function by(c,p){pi(c),p=ns(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function ky(c,p){return pi(c),p=ns(c,p),c.g.has(p)}t.forEach=function(c,p){pi(this),this.g.forEach(function(g,S){g.forEach(function(M){c.call(p,M,S,this)},this)},this)},t.na=function(){pi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let S=0;S<p.length;S++){const M=c[S];for(let V=0;V<M.length;V++)g.push(p[S])}return g},t.V=function(c){pi(this);let p=[];if(typeof c=="string")ky(this,c)&&(p=p.concat(this.g.get(ns(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)p=p.concat(c[g])}return p},t.set=function(c,p){return pi(this),this.i=null,c=ns(this,c),ky(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Cy(c,p,g){by(c,p),0<g.length&&(c.i=null,c.g.set(ns(c,p),v(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var S=p[g];const V=encodeURIComponent(String(S)),B=this.V(S);for(S=0;S<B.length;S++){var M=V;B[S]!==""&&(M+="="+encodeURIComponent(String(B[S]))),c.push(M)}}return this.i=c.join("&")};function ns(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function yk(c,p){p&&!c.j&&(pi(c),c.i=null,c.g.forEach(function(g,S){var M=S.toLowerCase();S!=M&&(by(this,S),Cy(this,M,g))},c)),c.j=p}function _k(c,p){const g=new yo;if(a.Image){const S=new Image;S.onload=m(gi,g,"TestLoadImage: loaded",!0,p,S),S.onerror=m(gi,g,"TestLoadImage: error",!1,p,S),S.onabort=m(gi,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=m(gi,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else p(!1)}function vk(c,p){const g=new yo,S=new AbortController,M=setTimeout(()=>{S.abort(),gi(g,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:S.signal}).then(V=>{clearTimeout(M),V.ok?gi(g,"TestPingServer: ok",!0,p):gi(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),gi(g,"TestPingServer: error",!1,p)})}function gi(c,p,g,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(g)}catch{}}function wk(){this.g=new nk}function Ek(c,p,g){const S=g||"";try{Ty(c,function(M,V){let B=M;u(M)&&(B=Kh(M)),p.push(S+V+"="+encodeURIComponent(B))})}catch(M){throw p.push(S+"type="+encodeURIComponent("_badmap")),M}}function Dl(c){this.l=c.Ub||null,this.j=c.eb||!1}y(Dl,Gh),Dl.prototype.g=function(){return new Ml(this.l,this.j)},Dl.prototype.i=function(c){return function(){return c}}({});function Ml(c,p){lt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ml,lt),t=Ml.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Io(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ay(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ay(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?To(this):Io(this),this.readyState==3&&Ay(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,To(this))},t.Qa=function(c){this.g&&(this.response=c,To(this))},t.ga=function(){this.g&&To(this)};function To(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Io(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=p.next();return c.join(`\r
`)};function Io(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Py(c){let p="";return L(c,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function rd(c,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Py(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Ie(c,p,g))}function Me(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Me,lt);var Tk=/^https?$/i,Ik=["POST","PUT"];t=Me.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xh.g(),this.v=this.o?sy(this.o):sy(Xh),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(V){Ry(this,V);return}if(c=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)g.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ik,p,void 0))||S||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of g)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{My(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){Ry(this,V)}};function Ry(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Ny(c),Ol(c)}function Ny(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),Ol(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ol(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Dy(this):this.bb())},t.bb=function(){Dy(this)};function Dy(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Fn(c)!=4||c.Z()!=2)){if(c.u&&Fn(c)==4)ty(c.Ea,0,c);else if(wt(c,"readystatechange"),Fn(c)==4){c.h=!1;try{const B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=B===0){var M=String(c.D).match(Iy)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),S=!Tk.test(M?M.toLowerCase():"")}g=S}if(g)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var V=2<Fn(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",Ny(c)}}finally{Ol(c)}}}}function Ol(c,p){if(c.g){My(c);const g=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||wt(c,"ready");try{g.onreadystatechange=S}catch{}}}function My(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Fn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),tk(p)}};function Oy(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Sk(c){const p={};c=(c.g&&2<=Fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(T(c[S]))continue;var g=P(c[S]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[M]||[];p[M]=V,V.push(g)}x(p,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function So(c,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||p}function Ly(c){this.Aa=0,this.i=[],this.j=new yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=So("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=So("baseRetryDelayMs",5e3,c),this.cb=So("retryDelaySeedMs",1e4,c),this.Wa=So("forwardChannelMaxRetries",2,c),this.wa=So("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yy(c&&c.concurrentRequestLimit),this.Da=new wk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ly.prototype,t.la=8,t.G=1,t.connect=function(c,p,g,S){Et(0),this.W=c,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Hy(this,null,this.W),Vl(this)};function sd(c){if(Vy(c),c.G==3){var p=c.U++,g=Vn(c.I);if(Ie(g,"SID",c.K),Ie(g,"RID",p),Ie(g,"TYPE","terminate"),xo(c,g),p=new fi(c,c.j,p),p.L=2,p.v=Nl(Vn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=qy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Al(p)}Wy(c)}function Ll(c){c.g&&(ad(c),c.g.cancel(),c.g=null)}function Vy(c){Ll(c),c.u&&(a.clearTimeout(c.u),c.u=null),Fl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Vl(c){if(!_y(c.h)&&!c.s){c.s=!0;var p=c.Ga;we||G(),z||(we(),z=!0),H.add(p,c),c.B=0}}function xk(c,p){return vy(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=mo(f(c.Ga,c,p),$y(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const M=new fi(this,this.j,c);let V=this.o;if(this.S&&(V?(V=_(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(M.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=jy(this,M,p),g=Vn(this.I),Ie(g,"RID",c),Ie(g,"CVER",22),this.D&&Ie(g,"X-HTTP-Session-Id",this.D),xo(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(Py(V)))+"&"+p:this.m&&rd(g,this.m,V)),id(this.h,M),this.Ua&&Ie(g,"TYPE","init"),this.P?(Ie(g,"$req",p),Ie(g,"SID","null"),M.T=!0,Zh(M,g,null)):Zh(M,g,p),this.G=2}}else this.G==3&&(c?Fy(this,c):this.i.length==0||_y(this.h)||Fy(this))};function Fy(c,p){var g;p?g=p.l:g=c.U++;const S=Vn(c.I);Ie(S,"SID",c.K),Ie(S,"RID",g),Ie(S,"AID",c.T),xo(c,S),c.m&&c.o&&rd(S,c.m,c.o),g=new fi(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),p&&(c.i=p.D.concat(c.i)),p=jy(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),id(c.h,g),Zh(g,S,p)}function xo(c,p){c.H&&L(c.H,function(g,S){Ie(p,S,g)}),c.l&&Ty({},function(g,S){Ie(p,S,g)})}function jy(c,p,g){g=Math.min(c.i.length,g);var S=c.l?f(c.l.Na,c.l,c):null;e:{var M=c.i;let V=-1;for(;;){const B=["count="+g];V==-1?0<g?(V=M[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let ve=!0;for(let Ze=0;Ze<g;Ze++){let he=M[Ze].g;const ut=M[Ze].map;if(he-=V,0>he)V=Math.max(0,M[Ze].g-100),ve=!1;else try{Ek(ut,B,"req"+he+"_")}catch{S&&S(ut)}}if(ve){S=B.join("&");break e}}}return c=c.i.splice(0,g),p.D=c,S}function Uy(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;we||G(),z||(we(),z=!0),H.add(p,c),c.v=0}}function od(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=mo(f(c.Fa,c),$y(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,By(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=mo(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Ll(this),By(this))};function ad(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function By(c){c.g=new fi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Vn(c.qa);Ie(p,"RID","rpc"),Ie(p,"SID",c.K),Ie(p,"AID",c.T),Ie(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ie(p,"TO",c.ja),Ie(p,"TYPE","xmlhttp"),xo(c,p),c.m&&c.o&&rd(p,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Nl(Vn(p)),g.m=null,g.P=!0,py(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Ll(this),od(this),Et(19))};function Fl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function zy(c,p){var g=null;if(c.g==p){Fl(c),ad(c),c.g=null;var S=2}else if(nd(c.h,p))g=p.D,wy(c.h,p),S=1;else return;if(c.G!=0){if(p.o)if(S==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var M=c.B;S=bl(),wt(S,new cy(S,g)),Vl(c)}else Uy(c);else if(M=p.s,M==3||M==0&&0<p.X||!(S==1&&xk(c,p)||S==2&&od(c)))switch(g&&0<g.length&&(p=c.h,p.i=p.i.concat(g)),M){case 1:hr(c,5);break;case 4:hr(c,10);break;case 3:hr(c,6);break;default:hr(c,2)}}}function $y(c,p){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*p}function hr(c,p){if(c.j.info("Error code "+p),p==2){var g=f(c.fb,c),S=c.Xa;const M=!S;S=new cr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pl(S,"https"),Nl(S),M?_k(S.toString(),g):vk(S.toString(),g)}else Et(2);c.G=0,c.l&&c.l.sa(p),Wy(c),Vy(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Wy(c){if(c.G=0,c.ka=[],c.l){const p=Ey(c.h);(p.length!=0||c.i.length!=0)&&(I(c.ka,p),I(c.ka,c.i),c.h.i.length=0,v(c.i),c.i.length=0),c.l.ra()}}function Hy(c,p,g){var S=g instanceof cr?Vn(g):new cr(g);if(S.g!="")p&&(S.g=p+"."+S.g),Rl(S,S.s);else{var M=a.location;S=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var V=new cr(null);S&&Pl(V,S),p&&(V.g=p),M&&Rl(V,M),g&&(V.l=g),S=V}return g=c.D,p=c.ya,g&&p&&Ie(S,g,p),Ie(S,"VER",c.la),xo(c,S),S}function qy(c,p,g){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Me(new Dl({eb:g})):new Me(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ky(){}t=Ky.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jl(){}jl.prototype.g=function(c,p){return new Vt(c,p)};function Vt(c,p){lt.call(this),this.g=new Ly(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!T(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!T(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new is(this)}y(Vt,lt),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){sd(this.g)},Vt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Kh(c),c=g);p.i.push(new lk(p.Ya++,c)),p.G==3&&Vl(p)},Vt.prototype.N=function(){this.g.l=null,delete this.j,sd(this.g),delete this.g,Vt.aa.N.call(this)};function Gy(c){Qh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const g in p){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}y(Gy,Qh);function Qy(){Yh.call(this),this.status=1}y(Qy,Yh);function is(c){this.g=c}y(is,Ky),is.prototype.ua=function(){wt(this.g,"a")},is.prototype.ta=function(c){wt(this.g,new Gy(c))},is.prototype.sa=function(c){wt(this.g,new Qy)},is.prototype.ra=function(){wt(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,TS=function(){return new jl},ES=function(){return bl()},wS=lr,gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kl.NO_ERROR=0,kl.TIMEOUT=8,kl.HTTP_ERROR=6,ju=kl,hy.COMPLETE="complete",vS=hy,oy.EventType=po,po.OPEN="a",po.CLOSE="b",po.ERROR="c",po.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Go=oy,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,_S=Me}).apply(typeof su<"u"?su:typeof self<"u"?self:typeof window<"u"?window:{});const Wv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new fh("@firebase/firestore");function Oo(){return Br.logLevel}function W(t,...e){if(Br.logLevel<=oe.DEBUG){const n=e.map(Yg);Br.debug(`Firestore (${lo}): ${t}`,...n)}}function ai(t,...e){if(Br.logLevel<=oe.ERROR){const n=e.map(Yg);Br.error(`Firestore (${lo}): ${t}`,...n)}}function Ws(t,...e){if(Br.logLevel<=oe.WARN){const n=e.map(Yg);Br.warn(`Firestore (${lo}): ${t}`,...n)}}function Yg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: `+t;throw ai(e),new Error(e)}function _e(t,e){t||X()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends _n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class lM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uM{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_e(typeof i.accessToken=="string"),new IS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new pt(e)}}class cM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new cM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const i=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new dM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=pM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function de(t,e){return t<e?-1:t>e?1:0}function Hs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ge(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Ge(0,0))}static max(){return new J(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(),i===void 0?i=e.length-n:i>e.length-n&&X(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return qa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qa?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends qa{construct(e,n,i){return new Ce(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new q(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const gM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends qa{construct(e,n,i){return new nt(e,n,i)}static isValidIdentifier(e){return gM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Ce.fromString(e))}static fromName(e){return new K(Ce.fromString(e).popFirst(5))}static empty(){return new K(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Ce(e.slice()))}}function mM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new Ge(n+1,0):new Ge(n,i));return new Xi(r,K.empty(),e)}function yM(t){return new Xi(t.readTime,t.key,-1)}class Xi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Xi(J.min(),K.empty(),-1)}static max(){return new Xi(J.max(),K.empty(),-1)}}function _M(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==vM)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,i)=>{n(e)})}static reject(e){return new F((n,i)=>{i(e)})}static waitFor(e){return new F((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=F.resolve(!1);for(const i of e)n=n.next(r=>r?F.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new F((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new F((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function EM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _l(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xg.oe=-1;function yh(t){return t==null}function Ac(t){return t===0&&1/t==-1/0}function TM(t){return typeof t=="number"&&Number.isInteger(t)&&!Ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ou(this.root,e,this.comparator,!0)}}class ou{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??tt.RED,this.left=r??tt.EMPTY,this.right=s??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new tt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return tt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,i,r,s){return this}insert(e,n,i){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qv(this.data.getIterator())}getIteratorFrom(e){return new qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new st(nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bS("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const IM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(t){if(_e(!!t),typeof t=="string"){let e=0;const n=IM.exec(t);if(_e(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zg(t){const e=t.mapValue.fields.__previous_value__;return Jg(e)?Zg(e):e}function Ka(t){const e=Ji(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Ga{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ga("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au={mapValue:{}};function $r(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jg(t)?4:bM(t)?9007199254740991:xM(t)?10:11:X()}function Mn(t,e){if(t===e)return!0;const n=$r(t);if(n!==$r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ka(t).isEqual(Ka(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Ji(r.timestampValue),a=Ji(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return zr(r.bytesValue).isEqual(zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Le(r.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(r.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Le(r.integerValue)===Le(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Le(r.doubleValue),a=Le(s.doubleValue);return o===a?Ac(o)===Ac(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Hs(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Hv(o)!==Hv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function Qa(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function qs(t,e){if(t===e)return 0;const n=$r(t),i=$r(e);if(n!==i)return de(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Le(s.integerValue||s.doubleValue),l=Le(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Kv(t.timestampValue,e.timestampValue);case 4:return Kv(Ka(t),Ka(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(s,o){const a=zr(s),l=zr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=de(a[u],l[u]);if(h!==0)return h}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=de(Le(s.latitude),Le(o.latitude));return a!==0?a:de(Le(s.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=de(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:Gv(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===au.mapValue&&o===au.mapValue)return 0;if(s===au.mapValue)return 1;if(o===au.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=de(l[d],h[d]);if(f!==0)return f;const m=qs(a[l[d]],u[h[d]]);if(m!==0)return m}return de(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function Kv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Ji(t),i=Ji(e),r=de(n.seconds,i.seconds);return r!==0?r:de(n.nanos,i.nanos)}function Gv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=qs(n[r],i[r]);if(s)return s}return de(n.length,i.length)}function Ks(t){return mp(t)}function mp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ji(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=mp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${mp(n.fields[o])}`;return r+"}"}(t.mapValue):X()}function yp(t){return!!t&&"integerValue"in t}function em(t){return!!t&&"arrayValue"in t}function Qv(t){return!!t&&"nullValue"in t}function Yv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function xM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=fa(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fa(n)}setAll(e){let n=nt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=fa(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Uu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Jr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Ct(fa(this.value))}}function kS(t){const e=[];return Jr(t.fields,(n,i)=>{const r=new nt([n]);if(Uu(i)){const s=kS(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,J.min(),J.min(),J.min(),Ct.empty(),0)}static newFoundDocument(e,n,i,r){return new mt(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new mt(e,2,n,J.min(),J.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,J.min(),J.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.position=e,this.inclusive=n}}function Xv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=K.comparator(K.fromName(o.referenceValue),n.key):i=qs(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Jv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function kM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{}class qe extends CS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new AM(e,n,i):n==="array-contains"?new NM(e,i):n==="in"?new DM(e,i):n==="not-in"?new MM(e,i):n==="array-contains-any"?new OM(e,i):new qe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new PM(e,i):new RM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qs(n,this.value)):n!==null&&$r(this.value)===$r(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends CS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new On(e,n)}matches(e){return AS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function AS(t){return t.op==="and"}function PS(t){return CM(t)&&AS(t)}function CM(t){for(const e of t.filters)if(e instanceof On)return!1;return!0}function _p(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Ks(t.value);if(PS(t))return t.filters.map(e=>_p(e)).join(",");{const e=t.filters.map(n=>_p(n)).join(",");return`${t.op}(${e})`}}function RS(t,e){return t instanceof qe?function(i,r){return r instanceof qe&&i.op===r.op&&i.field.isEqual(r.field)&&Mn(i.value,r.value)}(t,e):t instanceof On?function(i,r){return r instanceof On&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&RS(o,r.filters[a]),!0):!1}(t,e):void X()}function NS(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ks(n.value)}`}(t):t instanceof On?function(n){return n.op.toString()+" {"+n.getFilters().map(NS).join(" ,")+"}"}(t):"Filter"}class AM extends qe{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class PM extends qe{constructor(e,n){super(e,"in",n),this.keys=DS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RM extends qe{constructor(e,n){super(e,"not-in",n),this.keys=DS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class NM extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return em(n)&&Qa(n.arrayValue,this.value)}}class DM extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qa(this.value.arrayValue,n)}}class MM extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qa(this.value.arrayValue,n)}}class OM extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!em(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Qa(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Zv(t,e=null,n=[],i=[],r=null,s=null,o=null){return new LM(t,e,n,i,r,s,o)}function tm(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>_p(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ks(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ks(i)).join(",")),e.ue=n}return e.ue}function nm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jv(t.startAt,e.startAt)&&Jv(t.endAt,e.endAt)}function vp(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VM(t,e,n,i,r,s,o,a){return new _h(t,e,n,i,r,s,o,a)}function im(t){return new _h(t)}function e0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FM(t){return t.collectionGroup!==null}function pa(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new st(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Rc(s,i))}),n.has(nt.keyField().canonicalString())||e.ce.push(new Rc(nt.keyField(),i))}return e.ce}function Pn(t){const e=Z(t);return e.le||(e.le=jM(e,pa(t))),e.le}function jM(t,e){if(t.limitType==="F")return Zv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Rc(r.field,s)});const n=t.endAt?new Pc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Pc(t.startAt.position,t.startAt.inclusive):null;return Zv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function wp(t,e,n){return new _h(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vh(t,e){return nm(Pn(t),Pn(e))&&t.limitType===e.limitType}function MS(t){return`${tm(Pn(t))}|lt:${t.limitType}`}function ls(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>NS(r)).join(", ")}]`),yh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ks(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ks(r)).join(",")),`Target(${i})`}(Pn(t))}; limitType=${t.limitType})`}function wh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):K.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of pa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=Xv(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,pa(i),r)||i.endAt&&!function(o,a,l){const u=Xv(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,pa(i),r))}(t,e)}function UM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OS(t){return(e,n)=>{let i=!1;for(const r of pa(t)){const s=BM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function BM(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?qs(l,u):X()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return xS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=new De(K.comparator);function li(){return zM}const LS=new De(K.comparator);function Qo(...t){let e=LS;for(const n of t)e=e.insert(n.key,n);return e}function VS(t){let e=LS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function xr(){return ga()}function FS(){return ga()}function ga(){return new uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const $M=new De(K.comparator),WM=new st(K.comparator);function se(...t){let e=WM;for(const n of t)e=e.add(n);return e}const HM=new st(de);function qM(){return HM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ac(e)?"-0":e}}function jS(t){return{integerValue:""+t}}function KM(t,e){return TM(e)?jS(e):rm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function GM(t,e,n){return t instanceof Ya?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Jg(s)&&(s=Zg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Xa?BS(t,e):t instanceof Ja?zS(t,e):function(r,s){const o=US(r,s),a=t0(o)+t0(r.Pe);return yp(o)&&yp(r.Pe)?jS(a):rm(r.serializer,a)}(t,e)}function QM(t,e,n){return t instanceof Xa?BS(t,e):t instanceof Ja?zS(t,e):n}function US(t,e){return t instanceof Nc?function(i){return yp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Ya extends Eh{}class Xa extends Eh{constructor(e){super(),this.elements=e}}function BS(t,e){const n=$S(e);for(const i of t.elements)n.some(r=>Mn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ja extends Eh{constructor(e){super(),this.elements=e}}function zS(t,e){let n=$S(e);for(const i of t.elements)n=n.filter(r=>!Mn(r,i));return{arrayValue:{values:n}}}class Nc extends Eh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function t0(t){return Le(t.integerValue||t.doubleValue)}function $S(t){return em(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n){this.field=e,this.transform=n}}function XM(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Xa&&r instanceof Xa||i instanceof Ja&&r instanceof Ja?Hs(i.elements,r.elements,Mn):i instanceof Nc&&r instanceof Nc?Mn(i.Pe,r.Pe):i instanceof Ya&&r instanceof Ya}(t.transform,e.transform)}class JM{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Th{}function WS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sm(t.key,fn.none()):new vl(t.key,t.data,fn.none());{const n=t.data,i=Ct.empty();let r=new st(nt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ar(t.key,i,new Bt(r.toArray()),fn.none())}}function ZM(t,e,n){t instanceof vl?function(r,s,o){const a=r.value.clone(),l=i0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ar?function(r,s,o){if(!Bu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=i0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(HS(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ma(t,e,n,i){return t instanceof vl?function(s,o,a,l){if(!Bu(s.precondition,o))return a;const u=s.value.clone(),h=r0(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof ar?function(s,o,a,l){if(!Bu(s.precondition,o))return a;const u=r0(s.fieldTransforms,l,o),h=o.data;return h.setAll(HS(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Bu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function eO(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=US(i.transform,r||null);s!=null&&(n===null&&(n=Ct.empty()),n.set(i.field,s))}return n||null}function n0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Hs(i,r,(s,o)=>XM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vl extends Th{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ar extends Th{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function i0(t,e,n){const i=new Map;_e(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,QM(o,a,n[r]))}return i}function r0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,GM(s,o,e))}return i}class sm extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tO extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&ZM(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ma(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ma(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=FS();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=WS(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Hs(this.mutations,e.mutations,(n,i)=>n0(n,i))&&Hs(this.baseMutations,e.baseMutations,(n,i)=>n0(n,i))}}class om{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){_e(e.mutations.length===i.length);let r=function(){return $M}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new om(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,ae;function sO(t){switch(t){default:return X();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function qS(t){if(t===void 0)return ai("GRPC error has no .code"),j.UNKNOWN;switch(t){case Ue.OK:return j.OK;case Ue.CANCELLED:return j.CANCELLED;case Ue.UNKNOWN:return j.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return j.INTERNAL;case Ue.UNAVAILABLE:return j.UNAVAILABLE;case Ue.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ue.NOT_FOUND:return j.NOT_FOUND;case Ue.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ue.ABORTED:return j.ABORTED;case Ue.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ue.DATA_LOSS:return j.DATA_LOSS;default:return X()}}(ae=Ue||(Ue={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=new Rr([4294967295,4294967295],0);function s0(t){const e=oO().encode(t),n=new yS;return n.update(e),new Uint8Array(n.digest())}function o0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rr([n,i],0),new Rr([r,s],0)]}class am{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Yo(`Invalid padding: ${n}`);if(i<0)throw new Yo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Rr.fromNumber(i)));return r.compare(aO)===1&&(r=new Rr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=s0(e),[i,r]=o0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new am(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=s0(e),[i,r]=o0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ih(J.min(),r,new De(de),li(),se())}}class wl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new wl(i,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class KS{constructor(e,n){this.targetId=e,this.me=n}}class GS{constructor(e,n,i=at.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class a0{constructor(){this.fe=0,this.ge=u0(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),i=se();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X()}}),new wl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=u0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lO{constructor(e){this.Le=e,this.Be=new Map,this.ke=li(),this.qe=l0(),this.Qe=new De(de)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(vp(s))if(i===0){const o=new K(s.path);this.Ue(n,o,mt.newNoDocument(o,J.min()))}else _e(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=zr(i).toUint8Array()}catch(l){if(l instanceof bS)return Ws("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new am(o,r,s)}catch(l){return Ws(l instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vp(a.target)){const l=new K(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Ih(e,n,this.Qe,this.ke,i);return this.ke=li(),this.qe=l0(),this.Qe=new De(de),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new a0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new st(de),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new a0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function l0(){return new De(K.comparator)}function u0(){return new De(K.comparator)}const uO={asc:"ASCENDING",desc:"DESCENDING"},cO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hO={and:"AND",or:"OR"};class dO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ep(t,e){return t.useProto3Json||yh(e)?e:{value:e}}function Dc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fO(t,e){return Dc(t,e.toTimestamp())}function Rn(t){return _e(!!t),J.fromTimestamp(function(n){const i=Ji(n);return new Ge(i.seconds,i.nanos)}(t))}function lm(t,e){return Tp(t,e).canonicalString()}function Tp(t,e){const n=function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function YS(t){const e=Ce.fromString(t);return _e(tx(e)),e}function Ip(t,e){return lm(t.databaseId,e.path)}function $d(t,e){const n=YS(e);if(n.get(1)!==t.databaseId.projectId)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(JS(n))}function XS(t,e){return lm(t.databaseId,e)}function pO(t){const e=YS(t);return e.length===4?Ce.emptyPath():JS(e)}function Sp(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JS(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function c0(t,e,n){return{name:Ip(t,e),fields:n.value.mapValue.fields}}function gO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(_e(h===void 0||typeof h=="string"),at.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?j.UNKNOWN:qS(u.code);return new q(h,u.message||"")}(o);n=new GS(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=$d(t,i.document.name),s=Rn(i.document.updateTime),o=i.document.createTime?Rn(i.document.createTime):J.min(),a=new Ct({mapValue:{fields:i.document.fields}}),l=mt.newFoundDocument(r,s,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new zu(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=$d(t,i.document),s=i.readTime?Rn(i.readTime):J.min(),o=mt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new zu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=$d(t,i.document),s=i.removedTargetIds||[];n=new zu([],s,r,null)}else{if(!("filter"in e))return X();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new rO(r,s),a=i.targetId;n=new KS(a,o)}}return n}function mO(t,e){let n;if(e instanceof vl)n={update:c0(t,e.key,e.value)};else if(e instanceof sm)n={delete:Ip(t,e.key)};else if(e instanceof ar)n={update:c0(t,e.key,e.data),updateMask:xO(e.fieldMask)};else{if(!(e instanceof tO))return X();n={verify:Ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Ya)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ja)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:fO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function yO(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Rn(r.updateTime):Rn(s);return o.isEqual(J.min())&&(o=Rn(s)),new JM(o,r.transformResults||[])}(n,e))):[]}function _O(t,e){return{documents:[XS(t,e.path)]}}function vO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=XS(t,r);const s=function(u){if(u.length!==0)return ex(On.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:us(f.field),direction:TO(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ep(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function wO(t){let e=pO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){_e(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=ZS(d);return f instanceof On&&PS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Rc(cs(y.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,yh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Pc(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new Pc(m,f)}(n.endAt)),VM(e,r,o,s,a,"F",l,u)}function EO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=cs(n.unaryFilter.field);return qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=cs(n.unaryFilter.field);return qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=cs(n.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cs(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(cs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return On.create(n.compositeFilter.filters.map(i=>ZS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function TO(t){return uO[t]}function IO(t){return cO[t]}function SO(t){return hO[t]}function us(t){return{fieldPath:t.canonicalString()}}function cs(t){return nt.fromServerFormat(t.fieldPath)}function ex(t){return t instanceof qe?function(n){if(n.op==="=="){if(Yv(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NAN"}};if(Qv(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yv(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NAN"}};if(Qv(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(n.field),op:IO(n.op),value:n.value}}}(t):t instanceof On?function(n){const i=n.getFilters().map(r=>ex(r));return i.length===1?i[0]:{compositeFilter:{op:SO(n.op),filters:i}}}(t):X()}function xO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,i,r,s=J.min(),o=J.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.ct=e}}function kO(t){const e=wO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this.un=new AO}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Xi.min())}updateCollectionGroup(e,n,i){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class AO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new st(Ce.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new st(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gs(0)}static kn(){return new Gs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this.changes=new uo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ma(i.mutation,r,Bt.empty(),Ge.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,se()).next(()=>i))}getLocalViewOfDocuments(e,n,i=se()){const r=xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Qo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,se()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=li();const o=ga(),a=function(){return ga()}();return n.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof ar)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ma(h.mutation,u,h.mutation.getFieldMask(),Ge.now())):o.set(u.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new RO(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=ga();let r=new De((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=i.get(l)||Bt.empty();h=a.applyToLocalView(u,h),i.set(l,h);const d=(r.get(a.batchId)||se()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=FS();h.forEach(f=>{if(!s.has(f)){const m=WS(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):F.resolve(xr());let a=-1,l=s;return o.next(u=>F.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,se())).next(h=>({batchId:a,changes:VS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let r=Qo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Qo();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const u=function(d,f){return new _h(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,mt.newInvalidDocument(h)))});let a=Qo();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&ma(h.mutation,u,Bt.empty(),Ge.now()),wh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Rn(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:kO(r.bundledQuery),readTime:Rn(r.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.overlays=new De(K.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const i=xr();return F.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),F.resolve()}getOverlaysForCollection(e,n,i){const r=xr(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new De((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=xr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=xr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return F.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new iO(n,i));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.Tr=new st(Ye.Er),this.dr=new st(Ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ye(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Ye(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new K(new Ce([])),i=new Ye(n,e),r=new Ye(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new Ce([])),i=new Ye(n,e),r=new Ye(n,e+1);let s=se();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ye(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ye{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||de(e.wr,n.wr)}static Ar(e,n){return de(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new st(Ye.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nO(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ye(n,0),r=new Ye(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new st(de);return n.forEach(r=>{const s=new Ye(r,0),o=new Ye(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),F.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;K.isDocumentKey(s)||(s=s.child(""));const o=new Ye(new K(s),0);let a=new st(de);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return F.forEach(n.mutations,r=>{const s=new Ye(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Ye(n,0),r=this.br.firstAfterOrEqual(i);return F.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.Mr=e,this.docs=function(){return new De(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let i=li();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():mt.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=li();const o=n.path,a=new K(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||_M(yM(h),i)<=0||(r.has(h.key)||wh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,i,r){X()}Or(e,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new FO(this)}getSize(e){return F.resolve(this.size)}}class FO extends PO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.persistence=e,this.Nr=new uo(n=>tm(n),nm),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new um,this.targetCount=0,this.kr=Gs.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Gs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return F.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),F.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return F.resolve(i)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xg(0),this.Kr=!1,this.Kr=!0,this.$r=new OO,this.referenceDelegate=e(this),this.Ur=new jO(this),this.indexManager=new CO,this.remoteDocumentCache=function(r){return new VO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new bO(n),this.Gr=new DO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new LO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){W("MemoryPersistence","Starting transaction:",e);const r=new BO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class BO extends wM{constructor(e){super(),this.currentSequenceNumber=e}}class cm{constructor(e){this.persistence=e,this.Jr=new um,this.Yr=null}static Zr(e){return new cm(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),F.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,i=>{const r=K.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=se(),r=se();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new hm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return E1()?8:EM(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Oo()<=oe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Oo()<=oe.DEBUG&&W("QueryEngine","Query:",ls(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Oo()<=oe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):F.resolve())}Yi(e,n){if(e0(n))return F.resolve(null);let i=Pn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=wp(n,null,"F"),i=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,wp(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return e0(n)||r.isEqual(J.min())?F.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?F.resolve(null):(Oo()<=oe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ls(n)),this.rs(e,o,n,mM(r,-1)).next(a=>a))})}ts(e,n){let i=new st(OS(e));return n.forEach((r,s)=>{wh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return Oo()<=oe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ls(n)),this.Ji.getDocumentsMatchingQuery(e,n,Xi.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new De(de),this._s=new uo(s=>tm(s),nm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function HO(t,e,n,i){return new WO(t,e,n,i)}async function nx(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=se();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function qO(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let m=F.resolve();return f.forEach(y=>{m=m.next(()=>h.getEntry(l,y)).next(v=>{const I=u.docVersions.get(y);_e(I!==null),v.version.compareTo(I)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=se();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function ix(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function KO(t,e){const n=Z(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(at.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(v,I,w){return v.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=li(),u=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(GO(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!i.isEqual(J.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function GO(t,e,n){let i=se(),r=se();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=li();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function QO(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function YO(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Ni(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function xp(t,e,n){const i=Z(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!_l(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function h0(t,e,n){const i=Z(t);let r=J.min(),s=se();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=Z(l),f=d._s.get(h);return f!==void 0?F.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(i,o,Pn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:J.min(),n?s:se())).next(a=>(XO(i,UM(e),a),{documents:a,Ts:s})))}function XO(t,e,n){let i=t.us.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class d0{constructor(){this.activeTargetIds=qM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JO{constructor(){this.so=new d0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new d0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu=null;function Wd(){return lu===null?lu=function(){return 268435456+Math.round(2147483648*Math.random())}():lu++,"0x"+lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class n2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Wd(),l=this.xo(n,i.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ws("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=e2[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Wd();return new Promise((o,a)=>{const l=new _S;l.setWithCredentials(!0),l.listenOnce(vS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ju.NO_ERROR:const h=l.getResponseJson();W(ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ju.TIMEOUT:W(ft,`RPC '${e}' ${s} timed out`),a(new q(j.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const d=l.getStatus();if(W(ft,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const y=function(I){const w=I.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(w)>=0?w:j.UNKNOWN}(m.status);a(new q(y,m.message))}else a(new q(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(j.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{W(ft,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);W(ft,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=Wd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TS(),a=ES(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");W(ft,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const y=new t2({Io:I=>{m?W(ft,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(f||(W(ft,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),W(ft,`RPC '${e}' stream ${r} sending:`,I),d.send(I))},To:()=>d.close()}),v=(I,w,T)=>{I.listen(w,b=>{try{T(b)}catch(R){setTimeout(()=>{throw R},0)}})};return v(d,Go.EventType.OPEN,()=>{m||(W(ft,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),v(d,Go.EventType.CLOSE,()=>{m||(m=!0,W(ft,`RPC '${e}' stream ${r} transport closed`),y.So())}),v(d,Go.EventType.ERROR,I=>{m||(m=!0,Ws(ft,`RPC '${e}' stream ${r} transport errored:`,I),y.So(new q(j.UNAVAILABLE,"The operation could not be completed")))}),v(d,Go.EventType.MESSAGE,I=>{var w;if(!m){const T=I.data[0];_e(!!T);const b=T,R=b.error||((w=b[0])===null||w===void 0?void 0:w.error);if(R){W(ft,`RPC '${e}' stream ${r} received error:`,R);const D=R.status;let L=function(k){const A=Ue[k];if(A!==void 0)return qS(A)}(D),x=R.message;L===void 0&&(L=j.INTERNAL,x="Unknown error status: "+D+" with message "+R.message),m=!0,y.So(new q(L,x)),d.close()}else W(ft,`RPC '${e}' stream ${r} received:`,T),y.bo(T)}}),v(a,wS.STAT_EVENT,I=>{I.stat===gp.PROXY?W(ft,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===gp.NOPROXY&&W(ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){return new dO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(ai(n.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new q(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i2 extends sx{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gO(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Rn(o.readTime):J.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Sp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=vp(l)?{documents:_O(s,l)}:{query:vO(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QS(s,o.resumeToken);const u=Ep(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Dc(s,o.snapshotVersion.toTimestamp());const u=Ep(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=EO(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Sp(this.serializer),n.removeTarget=e,this.a_(n)}}class r2 extends sx{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=yO(e.writeResults,e.commitTime),i=Rn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Sp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>mO(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Tp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(j.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Tp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class o2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ai(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Zr(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Z(l);u.L_.add(4),await El(u),u.q_.set("Unknown"),u.L_.delete(4),await xh(u)}(this))})}),this.q_=new o2(i,r)}}async function xh(t){if(Zr(t))for(const e of t.B_)await e(!0)}async function El(t){for(const e of t.B_)await e(!1)}function ox(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gm(n)?pm(n):co(n).r_()&&fm(n,e))}function dm(t,e){const n=Z(t),i=co(n);n.N_.delete(e),i.r_()&&ax(n,e),n.N_.size===0&&(i.r_()?i.o_():Zr(n)&&n.q_.set("Unknown"))}function fm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}co(t).A_(e)}function ax(t,e){t.Q_.xe(e),co(t).R_(e)}function pm(t){t.Q_=new lO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),co(t).start(),t.q_.v_()}function gm(t){return Zr(t)&&!co(t).n_()&&t.N_.size>0}function Zr(t){return Z(t).L_.size===0}function lx(t){t.Q_=void 0}async function l2(t){t.q_.set("Online")}async function u2(t){t.N_.forEach((e,n)=>{fm(t,e)})}async function c2(t,e){lx(t),gm(t)?(t.q_.M_(e),pm(t)):t.q_.set("Unknown")}async function h2(t,e,n){if(t.q_.set("Online"),e instanceof GS&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mc(t,i)}else if(e instanceof zu?t.Q_.Ke(e):e instanceof KS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const i=await ix(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),ax(s,l);const d=new Ni(h.target,l,u,h.sequenceNumber);fm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){W("RemoteStore","Failed to raise snapshot:",i),await Mc(t,i)}}async function Mc(t,e,n){if(!_l(e))throw e;t.L_.add(1),await El(t),t.q_.set("Offline"),n||(n=()=>ix(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xh(t)})}function ux(t,e){return e().catch(n=>Mc(t,n,e))}async function bh(t){const e=Z(t),n=Zi(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;d2(e);)try{const r=await QO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,f2(e,r)}catch(r){await Mc(e,r)}cx(e)&&hx(e)}function d2(t){return Zr(t)&&t.O_.length<10}function f2(t,e){t.O_.push(e);const n=Zi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cx(t){return Zr(t)&&!Zi(t).n_()&&t.O_.length>0}function hx(t){Zi(t).start()}async function p2(t){Zi(t).p_()}async function g2(t){const e=Zi(t);for(const n of t.O_)e.m_(n.mutations)}async function m2(t,e,n){const i=t.O_.shift(),r=om.from(i,e,n);await ux(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await bh(t)}async function y2(t,e){e&&Zi(t).V_&&await async function(i,r){if(function(o){return sO(o)&&o!==j.ABORTED}(r.code)){const s=i.O_.shift();Zi(i).s_(),await ux(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await bh(i)}}(t,e),cx(t)&&hx(t)}async function p0(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const i=Zr(n);n.L_.add(3),await El(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xh(n)}async function _2(t,e){const n=Z(t);e?(n.L_.delete(2),await xh(n)):e||(n.L_.add(2),await El(n),n.q_.set("Unknown"))}function co(t){return t.K_||(t.K_=function(n,i,r){const s=Z(n);return s.w_(),new i2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:l2.bind(null,t),Ro:u2.bind(null,t),mo:c2.bind(null,t),d_:h2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gm(t)?pm(t):t.q_.set("Unknown")):(await t.K_.stop(),lx(t))})),t.K_}function Zi(t){return t.U_||(t.U_=function(n,i,r){const s=Z(n);return s.w_(),new r2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:p2.bind(null,t),mo:y2.bind(null,t),f_:g2.bind(null,t),g_:m2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bh(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new mm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ym(t,e){if(ai("AsyncQueue",`${e}: ${t}`),_l(t))return new q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=Qo(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new Ds(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ds)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ds;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.W_=new De(K.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Qs{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Qs(e,n,Ds.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class w2{constructor(){this.queries=m0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Z(n),s=r.queries;r.queries=m0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new q(j.ABORTED,"Firestore shutting down"))}}function m0(){return new uo(t=>MS(t),vh)}async function E2(t,e){const n=Z(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new v2,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=ym(o,`Initialization of query '${ls(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_m(n)}async function T2(t,e){const n=Z(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function I2(t,e){const n=Z(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&_m(n)}function S2(t,e,n){const i=Z(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function _m(t){t.Y_.forEach(e=>{e.next()})}var bp,y0;(y0=bp||(bp={})).ea="default",y0.Cache="cache";class x2{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Qs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.key=e}}class fx{constructor(e){this.key=e}}class b2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=OS(e),this.Ra=new Ds(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new g0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=wh(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?y!==v&&(i.track({type:3,doc:m}),I=!0):this.ga(f,m)||(i.track({type:2,doc:m}),I=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),I=!0):f&&!m&&(i.track({type:1,doc:f}),I=!0,(l||u)&&(a=!0)),I&&(m?(o=o.add(m),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,y){const v=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return v(m)-v(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Qs(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new g0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new fx(i))}),this.da.forEach(i=>{e.has(i)||n.push(new dx(i))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class k2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class C2{constructor(e){this.key=e,this.va=!1}}class A2{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new uo(a=>MS(a),vh),this.Ma=new Map,this.xa=new Set,this.Oa=new De(K.comparator),this.Na=new Map,this.La=new um,this.Ba={},this.ka=new Map,this.qa=Gs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P2(t,e,n=!0){const i=vx(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await px(i,e,n,!0),r}async function R2(t,e){const n=vx(t);await px(n,e,!0,!1)}async function px(t,e,n,i){const r=await YO(t.localStore,Pn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await N2(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&ox(t.remoteStore,r),a}async function N2(t,e,n,i,r){t.Ka=(d,f,m)=>async function(v,I,w,T){let b=I.view.ma(w);b.ns&&(b=await h0(v.localStore,I.query,!1).then(({documents:x})=>I.view.ma(x,b)));const R=T&&T.targetChanges.get(I.targetId),D=T&&T.targetMismatches.get(I.targetId)!=null,L=I.view.applyChanges(b,v.isPrimaryClient,R,D);return v0(v,I.targetId,L.wa),L.snapshot}(t,d,f,m);const s=await h0(t.localStore,e,!0),o=new b2(e,s.Ts),a=o.ma(s.documents),l=wl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);v0(t,n,u.wa);const h=new k2(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function D2(t,e,n){const i=Z(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!vh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await xp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&dm(i.remoteStore,r.targetId),kp(i,r.targetId)}).catch(yl)):(kp(i,r.targetId),await xp(i.localStore,r.targetId,!0))}async function M2(t,e){const n=Z(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),dm(n.remoteStore,i.targetId))}async function O2(t,e,n){const i=z2(t);try{const r=await function(o,a){const l=Z(o),u=Ge.now(),h=a.reduce((m,y)=>m.add(y.key),se());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=li(),v=se();return l.cs.getEntries(m,h).next(I=>{y=I,y.forEach((w,T)=>{T.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(I=>{d=I;const w=[];for(const T of a){const b=eO(T,d.get(T.key).overlayedDocument);b!=null&&w.push(new ar(T.key,b,kS(b.value.mapValue),fn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,w,a)}).next(I=>{f=I;const w=I.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(m,I.batchId,w)})}).then(()=>({batchId:f.batchId,changes:VS(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new De(de)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await Tl(i,r.changes),await bh(i.remoteStore)}catch(r){const s=ym(r,"Failed to persist write");n.reject(s)}}async function gx(t,e){const n=Z(t);try{const i=await KO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(_e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?_e(o.va):r.removedDocuments.size>0&&(_e(o.va),o.va=!1))}),await Tl(n,i,e)}catch(i){await yl(i)}}function _0(t,e,n){const i=Z(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&_m(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function L2(t,e,n){const i=Z(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new De(K.comparator);o=o.insert(s,mt.newNoDocument(s,J.min()));const a=se().add(s),l=new Ih(J.min(),new Map,new De(de),o,a);await gx(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),vm(i)}else await xp(i.localStore,e,!1).then(()=>kp(i,e,n)).catch(yl)}async function V2(t,e){const n=Z(t),i=e.batch.batchId;try{const r=await qO(n.localStore,e);yx(n,i,null),mx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Tl(n,r)}catch(r){await yl(r)}}async function F2(t,e,n){const i=Z(t);try{const r=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(_e(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);yx(i,e,n),mx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Tl(i,r)}catch(r){await yl(r)}}function mx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function yx(t,e,n){const i=Z(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function kp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||_x(t,i)})}function _x(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vm(t))}function v0(t,e,n){for(const i of n)i instanceof dx?(t.La.addReference(i.key,e),j2(t,i)):i instanceof fx?(W("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||_x(t,i.key)):X()}function j2(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(i),vm(t))}function vm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(Ce.fromString(e)),i=t.qa.next();t.Na.set(i,new C2(n)),t.Oa=t.Oa.insert(n,i),ox(t.remoteStore,new Ni(Pn(im(n.path)),i,"TargetPurposeLimboResolution",Xg.oe))}}async function Tl(t,e,n){const i=Z(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){r.push(u);const d=hm.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const h=Z(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(u,f=>F.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>F.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!_l(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(f,v)}}}(i.localStore,s))}async function U2(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const i=await nx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Tl(n,i.hs)}}function B2(t,e){const n=Z(t),i=n.Na.get(e);if(i&&i.va)return se().add(i.key);{let r=se();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function vx(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L2.bind(null,e),e.Ca.d_=I2.bind(null,e.eventManager),e.Ca.$a=S2.bind(null,e.eventManager),e}function z2(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F2.bind(null,e),e}class Oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return HO(this.persistence,new $O,e.initialUser,this.serializer)}Ga(e){return new UO(cm.Zr,this.serializer)}Wa(e){return new JO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oc.provider={build:()=>new Oc};class Cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=U2.bind(null,this.syncEngine),await _2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w2}()}createDatastore(e){const n=Sh(e.databaseInfo.databaseId),i=function(s){return new n2(s)}(e.databaseInfo);return function(s,o,a,l){return new s2(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new a2(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_0(this.syncEngine,n,0),function(){return f0.D()?new f0:new ZO}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,h){const d=new A2(r,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Z(r);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await El(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cp.provider={build:()=>new Cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ai("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=pt.UNAUTHENTICATED,this.clientId=SS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ym(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function qd(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await nx(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function w0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await H2(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>p0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>p0(e.remoteStore,r)),t._onlineComponents=e}async function H2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ws("Error using user provided cache. Falling back to memory cache: "+n),await qd(t,new Oc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await qd(t,new Oc);return t._offlineComponents}async function wx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await w0(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await w0(t,new Cp))),t._onlineComponents}function q2(t){return wx(t).then(e=>e.syncEngine)}async function E0(t){const e=await wx(t),n=e.eventManager;return n.onListen=P2.bind(null,e.syncEngine),n.onUnlisten=D2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=R2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=M2.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e,n){if(!n)throw new q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function K2(t,e,n,i){if(e===!0&&i===!0)throw new q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I0(t){if(!K.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S0(t){if(K.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function ei(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wm(t);throw new q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ex((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new aM;switch(i.type){case"firstParty":return new hM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=T0.get(n);i&&(W("ComponentProvider","Removing Datastore"),T0.delete(n),i.terminate())}(this),Promise.resolve()}}function G2(t,e,n,i={}){var r;const s=(t=ei(t,kh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=pt.MOCK_USER;else{a=g1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(u)}t._authCredentials=new lM(new IS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ch(this.firestore,e,this._query)}}class Ot{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class Ki extends Ch{constructor(e,n,i){super(e,n,im(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new K(e))}withConverter(e){return new Ki(this.firestore,e,this._path)}}function Q2(t,e,...n){if(t=je(t),Tx("collection","path",e),t instanceof kh){const i=Ce.fromString(e,...n);return S0(i),new Ki(t,null,i)}{if(!(t instanceof Ot||t instanceof Ki))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ce.fromString(e,...n));return S0(i),new Ki(t.firestore,null,i)}}function Za(t,e,...n){if(t=je(t),arguments.length===1&&(e=SS.newId()),Tx("doc","path",e),t instanceof kh){const i=Ce.fromString(e,...n);return I0(i),new Ot(t,null,new K(i))}{if(!(t instanceof Ot||t instanceof Ki))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ce.fromString(e,...n));return I0(i),new Ot(t.firestore,t instanceof Ki?t.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rx(this,"async_queue_retry"),this.Vu=()=>{const i=Hd();i&&W("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_l(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ai("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=mm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function k0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ys extends kh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new b0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b0(e),this._firestoreClient=void 0,await e}}}function Y2(t,e){const n=typeof t=="object"?t:DI(),i=typeof t=="string"?t:"(default)",r=dl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=f1("firestore");s&&G2(r,...s)}return r}function Ix(t){if(t._terminated)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||X2(t),t._firestoreClient}function X2(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,h){return new SM(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ex(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new W2(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xs(at.fromBase64String(e))}catch(n){throw new q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xs(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=/^__.*__$/;class Z2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new vl(e,this.data,n,this.fieldTransforms)}}class Sx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Im{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Im(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xx(this.Cu)&&J2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Sh(e)}Qu(e,n,i,r=!1){return new Im({Cu:e,methodName:n,qu:i,path:nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bx(t){const e=t._freezeSettings(),n=Sh(t._databaseId);return new eL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tL(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);xm("Data must be an object, but it was:",o,i);const a=kx(i,o);let l,u;if(s.merge)l=new Bt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Ap(e,d,n);if(!o.contains(f))throw new q(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Ax(h,f)||h.push(f)}l=new Bt(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new Z2(new Ct(a),l,u)}class Rh extends Ph{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rh}}class Sm extends Ph{_toFieldTransform(e){return new YM(e.path,new Ya)}isEqual(e){return e instanceof Sm}}function nL(t,e,n,i){const r=t.Qu(1,e,n);xm("Data must be an object, but it was:",r,i);const s=[],o=Ct.empty();Jr(i,(l,u)=>{const h=bm(e,l,n);u=je(u);const d=r.Nu(h);if(u instanceof Rh)s.push(h);else{const f=Nh(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Bt(s);return new Sx(o,a,r.fieldTransforms)}function iL(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Ap(e,i,n)],l=[r];if(s.length%2!=0)throw new q(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Ap(e,s[f])),l.push(s[f+1]);const u=[],h=Ct.empty();for(let f=a.length-1;f>=0;--f)if(!Ax(u,a[f])){const m=a[f];let y=l[f];y=je(y);const v=o.Nu(m);if(y instanceof Rh)u.push(m);else{const I=Nh(y,v);I!=null&&(u.push(m),h.set(m,I))}}const d=new Bt(u);return new Sx(h,d,o.fieldTransforms)}function Nh(t,e){if(Cx(t=je(t)))return xm("Unsupported field value:",e,t),kx(t,e);if(t instanceof Ph)return function(i,r){if(!xx(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Nh(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return KM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ge.fromDate(i);return{timestampValue:Dc(r.serializer,s)}}if(i instanceof Ge){const s=new Ge(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dc(r.serializer,s)}}if(i instanceof Em)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xs)return{bytesValue:QS(r.serializer,i._byteString)};if(i instanceof Ot){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Tm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return rm(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${wm(i)}`)}(t,e)}function kx(t,e){const n={};return xS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(i,r)=>{const s=Nh(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Cx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Em||t instanceof Xs||t instanceof Ot||t instanceof Ph||t instanceof Tm)}function xm(t,e,n){if(!Cx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=wm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Ap(t,e,n){if((e=je(e))instanceof Ah)return e._internalPath;if(typeof e=="string")return bm(t,e);throw Lc("Field path arguments must be of type string or ",t,!1,void 0,n)}const rL=new RegExp("[~\\*/\\[\\]]");function bm(t,e,n){if(e.search(rL)>=0)throw Lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ah(...e.split("."))._internalPath}catch{throw Lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new q(j.INVALID_ARGUMENT,a+t+l)}function Ax(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sL extends Px{data(){return super.data()}}function Rx(t,e){return typeof e=="string"?bm(t,e):e instanceof Ah?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aL{convertValue(e,n="none"){switch($r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Jr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Le(o.doubleValue));return new Tm(s)}convertGeoPoint(e){return new Em(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Zg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ka(e));default:return null}}convertTimestamp(e){const n=Ji(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ce.fromString(e);_e(tx(i));const r=new Ga(i.get(1),i.get(3)),s=new K(i.popFirst(5));return r.isEqual(n)||ai(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nx extends Px{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Rx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class $u extends Nx{data(e={}){return super.data(e)}}class uL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Xo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new $u(this._firestore,this._userDataWriter,i.key,i,new Xo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new $u(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Xo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new $u(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Xo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:cL(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class Dx extends aL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Mx(t,e,n){t=ei(t,Ot);const i=ei(t.firestore,Ys),r=lL(t.converter,e,n);return km(i,[tL(bx(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,fn.none())])}function Ox(t,e,n,...i){t=ei(t,Ot);const r=ei(t.firestore,Ys),s=bx(r);let o;return o=typeof(e=je(e))=="string"||e instanceof Ah?iL(s,"updateDoc",t._key,e,n,i):nL(s,"updateDoc",t._key,e),km(r,[o.toMutation(t._key,fn.exists(!0))])}function hL(t){return km(ei(t.firestore,Ys),[new sm(t._key,fn.none())])}function Lx(t,...e){var n,i,r;t=je(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||k0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(k0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,u,h;if(t instanceof Ot)u=ei(t.firestore,Ys),h=im(t._key.path),l={next:d=>{e[o]&&e[o](dL(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ei(t,Ch);u=ei(d.firestore,Ys),h=d._query;const f=new Dx(u);l={next:m=>{e[o]&&e[o](new uL(u,f,d,m))},error:e[o+1],complete:e[o+2]},oL(t._query)}return function(f,m,y,v){const I=new $2(v),w=new x2(m,I,y);return f.asyncQueue.enqueueAndForget(async()=>E2(await E0(f),w)),()=>{I.Za(),f.asyncQueue.enqueueAndForget(async()=>T2(await E0(f),w))}}(Ix(u),h,a,l)}function km(t,e){return function(i,r){const s=new Nr;return i.asyncQueue.enqueueAndForget(async()=>O2(await q2(i),r,s)),s.promise}(Ix(t),e)}function dL(t,e,n){const i=n.docs.get(e._key),r=new Dx(t);return new Nx(t,r,e._key,i,new Xo(n.hasPendingWrites,n.fromCache),e.converter)}function Cm(){return new Sm("serverTimestamp")}(function(e,n=!0){(function(r){lo=r})(ao),Dn(new gn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Ys(new uM(i.getProvider("auth-internal")),new fM(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Jt(Wv,"4.7.3",e),Jt(Wv,"4.7.3","esm2017")})();const Vx="@firebase/installations",Am="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=1e4,jx=`w:${Am}`,Ux="FIS_v2",fL="https://firebaseinstallations.googleapis.com/v1",pL=60*60*1e3,gL="installations",mL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wr=new Yr(gL,mL,yL);function Bx(t){return t instanceof _n&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx({projectId:t}){return`${fL}/projects/${t}/installations`}function $x(t){return{token:t.token,requestStatus:2,expiresIn:vL(t.expiresIn),creationTime:Date.now()}}async function Wx(t,e){const i=(await e.json()).error;return Wr.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Hx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _L(t,{refreshToken:e}){const n=Hx(t);return n.append("Authorization",wL(e)),n}async function qx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vL(t){return Number(t.replace("s","000"))}function wL(t){return`${Ux} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=zx(t),r=Hx(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:Ux,appId:t.appId,sdkVersion:jx},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await qx(()=>fetch(i,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:$x(u.authToken)}}else throw await Wx("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=/^[cdef][\w-]{21}$/,Pp="";function SL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=xL(t);return IL.test(n)?n:Pp}catch{return Pp}}function xL(t){return TL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;function Qx(t,e){const n=Dh(t);Yx(n,e),bL(n,e)}function Yx(t,e){const n=Gx.get(t);if(n)for(const i of n)i(e)}function bL(t,e){const n=kL();n&&n.postMessage({key:t,fid:e}),CL()}let br=null;function kL(){return!br&&"BroadcastChannel"in self&&(br=new BroadcastChannel("[Firebase] FID Change"),br.onmessage=t=>{Yx(t.data.key,t.data.fid)}),br}function CL(){Gx.size===0&&br&&(br.close(),br=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="firebase-installations-database",PL=1,Hr="firebase-installations-store";let Kd=null;function Pm(){return Kd||(Kd=RI(AL,PL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hr)}}})),Kd}async function Vc(t,e){const n=Dh(t),r=(await Pm()).transaction(Hr,"readwrite"),s=r.objectStore(Hr),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&Qx(t,e.fid),e}async function Xx(t){const e=Dh(t),i=(await Pm()).transaction(Hr,"readwrite");await i.objectStore(Hr).delete(e),await i.done}async function Mh(t,e){const n=Dh(t),r=(await Pm()).transaction(Hr,"readwrite"),s=r.objectStore(Hr),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&Qx(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(t){let e;const n=await Mh(t.appConfig,i=>{const r=RL(i),s=NL(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Pp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function RL(t){const e=t||{fid:SL(),registrationStatus:0};return Jx(e)}function NL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Wr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=DL(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ML(t)}:{installationEntry:e}}async function DL(t,e){try{const n=await EL(t,e);return Vc(t.appConfig,n)}catch(n){throw Bx(n)&&n.customData.serverCode===409?await Xx(t.appConfig):await Vc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ML(t){let e=await C0(t.appConfig);for(;e.registrationStatus===1;)await Kx(100),e=await C0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Rm(t);return i||n}return e}function C0(t){return Mh(t,e=>{if(!e)throw Wr.create("installation-not-found");return Jx(e)})}function Jx(t){return OL(t)?{fid:t.fid,registrationStatus:0}:t}function OL(t){return t.registrationStatus===1&&t.registrationTime+Fx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL({appConfig:t,heartbeatServiceProvider:e},n){const i=VL(t,n),r=_L(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:jx,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await qx(()=>fetch(i,a));if(l.ok){const u=await l.json();return $x(u)}else throw await Wx("Generate Auth Token",l)}function VL(t,{fid:e}){return`${zx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(t,e=!1){let n;const i=await Mh(t.appConfig,s=>{if(!Zx(s))throw Wr.create("not-registered");const o=s.authToken;if(!e&&UL(o))return s;if(o.requestStatus===1)return n=FL(t,e),s;{if(!navigator.onLine)throw Wr.create("app-offline");const a=zL(s);return n=jL(t,a),a}});return n?await n:i.authToken}async function FL(t,e){let n=await A0(t.appConfig);for(;n.authToken.requestStatus===1;)await Kx(100),n=await A0(t.appConfig);const i=n.authToken;return i.requestStatus===0?Nm(t,e):i}function A0(t){return Mh(t,e=>{if(!Zx(e))throw Wr.create("not-registered");const n=e.authToken;return $L(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function jL(t,e){try{const n=await LL(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Vc(t.appConfig,i),n}catch(n){if(Bx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Xx(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Vc(t.appConfig,i)}throw n}}function Zx(t){return t!==void 0&&t.registrationStatus===2}function UL(t){return t.requestStatus===2&&!BL(t)}function BL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pL}function zL(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $L(t){return t.requestStatus===1&&t.requestTime+Fx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t){const e=t,{installationEntry:n,registrationPromise:i}=await Rm(e);return i?i.catch(console.error):Nm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(t,e=!1){const n=t;return await qL(n),(await Nm(n,e)).token}async function qL(t){const{registrationPromise:e}=await Rm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(t){if(!t||!t.options)throw Gd("App Configuration");if(!t.name)throw Gd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Gd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Gd(t){return Wr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="installations",GL="installations-internal",QL=t=>{const e=t.getProvider("app").getImmediate(),n=KL(e),i=dl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},YL=t=>{const e=t.getProvider("app").getImmediate(),n=dl(e,eb).getImmediate();return{getId:()=>WL(n),getToken:r=>HL(n,r)}};function XL(){Dn(new gn(eb,QL,"PUBLIC")),Dn(new gn(GL,YL,"PRIVATE"))}XL();Jt(Vx,Am);Jt(Vx,Am,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="analytics",JL="firebase_id",ZL="origin",eV=60*1e3,tV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Dm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=new fh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zt=new Yr("analytics","Analytics",nV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t){if(!t.startsWith(Dm)){const e=Zt.create("invalid-gtag-resource",{gtagURL:t});return Lt.warn(e.message),""}return t}function tb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function sV(t,e){const n=rV("firebase-js-sdk-policy",{createScriptURL:iV}),i=document.createElement("script"),r=`${Dm}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function oV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function aV(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await tb(n)).find(u=>u.measurementId===r);l&&await e[l.appId]}}catch(a){Lt.error(a)}t("config",r,s)}async function lV(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await tb(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Lt.error(s)}}function uV(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await lV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await aV(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Lt.error(a)}}return r}function cV(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=uV(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function hV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Dm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=30,fV=1e3;class pV{constructor(e={},n=fV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const nb=new pV;function gV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function mV(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:gV(i)},s=tV.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Zt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function yV(t,e=nb,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw Zt.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Zt.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new wV;return setTimeout(async()=>{a.abort()},eV),ib({appId:i,apiKey:r,measurementId:s},o,a,e)}async function ib(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=nb){var s;const{appId:o,measurementId:a}=t;try{await _V(i,e)}catch(l){if(a)return Lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await mV(t);return r.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!vV(u)){if(r.deleteThrottleMetadata(o),a)return Lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?gv(n,r.intervalMillis,dV):gv(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Lt.debug(`Calling attemptFetch again in ${h} millis`),ib(t,d,i,r)}}function _V(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(Zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vV(t){if(!(t instanceof _n)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function EV(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TV(){if(kI())try{await CI()}catch(t){return Lt.warn(Zt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Lt.warn(Zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function IV(t,e,n,i,r,s,o){var a;const l=yV(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Lt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Lt.error(m)),e.push(l);const u=TV().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,u]);hV(s)||sV(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[ZL]="firebase",f.update=!0,d!=null&&(f[JL]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.app=e}_delete(){return delete ya[this.app.options.appId],Promise.resolve()}}let ya={},R0=[];const N0={};let Qd="dataLayer",xV="gtag",D0,rb,M0=!1;function bV(){const t=[];if(bI()&&t.push("This is a browser extension environment."),T1()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Zt.create("invalid-analytics-context",{errorInfo:e});Lt.warn(n.message)}}function kV(t,e,n){bV();const i=t.options.appId;if(!i)throw Zt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zt.create("no-api-key");if(ya[i]!=null)throw Zt.create("already-exists",{id:i});if(!M0){oV(Qd);const{wrappedGtag:s,gtagCore:o}=cV(ya,R0,N0,Qd,xV);rb=s,D0=o,M0=!0}return ya[i]=IV(t,R0,N0,e,D0,Qd,n),new SV(t)}function CV(t,e,n,i){t=je(t),EV(rb,ya[t.app.options.appId],e,n,i).catch(r=>Lt.error(r))}const O0="@firebase/analytics",L0="0.10.8";function AV(){Dn(new gn(P0,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return kV(i,r,n)},"PUBLIC")),Dn(new gn("analytics-internal",t,"PRIVATE")),Jt(O0,L0),Jt(O0,L0,"esm2017");function t(e){try{const n=e.getProvider(P0).getImmediate();return{logEvent:(i,r,s)=>CV(n,i,r,s)}}catch(n){throw Zt.create("interop-component-reg-failed",{reason:n})}}}AV();const PV={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},sb=NI(PV),Lo=iM(sb),Js=Y2(sb),ob=O.createContext(null);function RV({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{const l=HN(Lo,u=>{n(u),r(!1)});return()=>l()},[]);const a=O.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,u){o(null);try{return(await jN(Lo,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,u){o(null);try{return(await UN(Lo,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await qN(Lo)},async resetPassword(l){o(null);try{await FN(Lo,l)}catch(u){throw o((u==null?void 0:u.message)||"Failed to send reset email."),u}}}),[e,i,s]);return E.jsx(ob.Provider,{value:a,children:t})}function di(){return O.useContext(ob)}function NV(){const{user:t,logout:e}=di(),n=cl();async function i(){await e(),n("/dashboard")}return E.jsx("div",{className:"nav",children:E.jsxs("div",{className:"nav-inner",children:[E.jsxs("div",{className:"brand",children:[E.jsx("div",{className:"badge"}),E.jsxs("div",{children:[E.jsx("h1",{children:"Body Recomposition Tracker"}),E.jsx("div",{className:"small",children:"Trend-first logging: weight , strength /"})]})]}),E.jsxs("div",{className:"nav-links",children:[E.jsx(Mo,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),t&&E.jsx(Mo,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&E.jsx(Mo,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),E.jsx("div",{className:"nav-actions",children:t?E.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):E.jsxs(E.Fragment,{children:[E.jsx(Mo,{to:"/login",className:"btn",children:"Log in"}),E.jsx(Mo,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function V0({children:t}){const{user:e,initializing:n}=di();return n?E.jsx("div",{className:"panel",children:E.jsx("div",{className:"muted",children:"Loading"})}):e?t:E.jsx(rp,{to:"/login",replace:!0})}const ab=O.createContext(null),F0={email:"",sex:"",height:"",triplemeasurements:!1,createdAt:null};function DV({children:t}){const{user:e}=di(),[n,i]=O.useState(F0),[r,s]=O.useState(!1),[o,a]=O.useState(null);O.useEffect(()=>{if(i(F0),a(null),!e)return;const u=Za(Js,"users",e.uid);s(!0);const h=Lx(u,async d=>{if(!d.exists()){await Mx(u,{email:e.email||"",sex:"",height:"",triplemeasurements:!1,createdAt:Cm()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",triplemeasurements:!!f.triplemeasurements,createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=O.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(u){if(!e)throw new Error("Not authenticated");a(null);const h=Za(Js,"users",e.uid);await Ox(h,u)}}),[n,r,o,e]);return E.jsx(ab.Provider,{value:l,children:t})}function Mm(){return O.useContext(ab)}function lb(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function MV(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function OV(){return lb(new Date)}function LV(t,e){return t.dateIso.localeCompare(e.dateIso)}function Om(t,e,n){const i=Q2(Js,"users",t,"entries");return Lx(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(LV);e(o)},n)}async function VV(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=Za(Js,"users",t,"entries",n),r=MV(n),s={...e,dateIso:n,date:e.date||r,updatedAt:Cm()};await Mx(i,s,{merge:!0})}async function FV(t,e,n){const i=Za(Js,"users",t,"entries",e);await Ox(i,{...n,updatedAt:Cm()})}async function jV(t,e){const n=Za(Js,"users",t,"entries",e);await hL(n)}const UV=2/8;function ub({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function BV({bench:t,squat:e,deadlift:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return(i+r+s)/3}function os(t,e=UV){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(null);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function zV(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function Yd(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=zV(i,r,s);return Number.isFinite(o)?o:null}function $V({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=Yd(n,"neck",i),a=Yd(n,"waist",i),l=Yd(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const u=a-o;if(!(u>0))return null;const h=495/(1.0324-.19077*Math.log10(u)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const u=a+l-o;if(!(u>0))return null;const h=495/(1.29579-.35004*Math.log10(u)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function WV({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function cb(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(a=>({dateIso:a.dateIso,weight:dr(a.weight),protein:dr(a.protein),carbs:dr(a.carbs),fats:dr(a.fats),bench:dr(a.bench),squat:dr(a.squat),deadlift:dr(a.deadlift),calories:ub(a),avgStrength:BV(a),bfPct:$V({sex:i,heightCm:r,entry:a,tripleEnabled:n})}));s.forEach(a=>{a.lbm=WV({weightKg:a.weight,bfPct:a.bfPct})});const o={weight:os(s.map(a=>a.weight)),bench:os(s.map(a=>a.bench)),squat:os(s.map(a=>a.squat)),deadlift:os(s.map(a=>a.deadlift)),calories:os(s.map(a=>a.calories)),avgStrength:os(s.map(a=>a.avgStrength))};return s.map((a,l)=>({...a,wma:{weight:o.weight[l],bench:o.bench[l],squat:o.squat[l],deadlift:o.deadlift[l],calories:o.calories[l],avgStrength:o.avgStrength[l]}}))}function HV(t){var l,u,h,d;if(!t||t.length<14)return{weeks:[],baselineTdee:null};const e=[],n=t.length,i=Math.floor(n/7),r=f=>f*7-1;function s(f){var m;for(let y=f;y>=0;y--){const v=(m=t[y])==null?void 0:m.lbm;if(Number.isFinite(v))return v}return null}for(let f=1;f<=i;f++){const m=(f-1)*7,y=r(f),v=t.slice(m,y+1),I=j0(v.map(_=>_.calories)),w=(u=(l=v[0])==null?void 0:l.wma)==null?void 0:u.weight,T=(d=(h=v[v.length-1])==null?void 0:h.wma)==null?void 0:d.weight,b=Number.isFinite(w)&&Number.isFinite(T)?T-w:null;let R=null;if(Number.isFinite(I)&&Number.isFinite(b)){const k=-b*7700/7;R=I+k}const D=s(y);let L=null,x="";Number.isFinite(D)&&Number.isFinite(b)&&(L=Math.max(0,-b)/D*100,L<.5?x="Conservative":L<=1?x="Optimal":x="Aggressive"),e.push({week:f,avgCalories:I,weightChange:b,tdee:R,lbm:D,lossRatePct:L,lossRateStatus:x,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(f=>f.tdee).filter(Number.isFinite),a=o.length?j0(o):null;if(Number.isFinite(a))for(const f of e)Number.isFinite(f.tdee)&&(f.tdeeChangeFromBaseline=f.tdee-a,f.adaptationPct=f.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a}}function dr(t){const e=Number(t);return Number.isFinite(e)?e:null}function j0(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function jn(){let t=0,e=0;for(;t===0;)t=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}function U0(t,e,n){return Math.max(e,Math.min(n,t))}function qV(){return{email:"sample@demo.local",sex:"male",height:175,triplemeasurements:!1,createdAt:null}}function KV(t=60){const e=new Date;e.setDate(e.getDate()-(t-1));const n=[];let i=90,r=100,s=140,o=180;for(let a=0;a<t;a++){const l=new Date(e);l.setDate(e.getDate()+a);const u=lb(l),d=2400-Math.floor(a/14)*125;i-=5.5/(t-1),r+=4/(t-1),s+=4/(t-1),o+=5/(t-1);const f=i+jn()*.8,m=r+jn()*2,y=s+jn()*2.5,v=o+jn()*2.8,I=180+jn()*10,w=70+jn()*6,T=(d-4*I-9*w)/4+jn()*10,b={id:u,dateIso:u,date:null,weight:uu(f),protein:Xd(I),carbs:Xd(U0(T,100,320)),fats:Xd(U0(w,45,95)),bench:uu(m),squat:uu(y),deadlift:uu(v),neck:null,waist:null,hip:null};if(a%7===0){const L=96+-7*(a/(t-1));b.neck=40+jn()*.3,b.waist=L+jn()*.6}n.push(b)}return n}function Xd(t){return Number.isFinite(t)?Math.round(t):null}function uu(t){return Number.isFinite(t)?Math.round(t*10)/10:null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Il(t){return t+.5|0}const Di=(t,e,n)=>Math.max(Math.min(t,n),e);function Jo(t){return Di(Il(t*2.55),0,255)}function Gi(t){return Di(Il(t*255),0,255)}function qn(t){return Di(Il(t/2.55)/100,0,1)}function B0(t){return Di(Il(t*100),0,100)}const qt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Rp=[..."0123456789ABCDEF"],GV=t=>Rp[t&15],QV=t=>Rp[(t&240)>>4]+Rp[t&15],cu=t=>(t&240)>>4===(t&15),YV=t=>cu(t.r)&&cu(t.g)&&cu(t.b)&&cu(t.a);function XV(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&qt[t[1]]*17,g:255&qt[t[2]]*17,b:255&qt[t[3]]*17,a:e===5?qt[t[4]]*17:255}:(e===7||e===9)&&(n={r:qt[t[1]]<<4|qt[t[2]],g:qt[t[3]]<<4|qt[t[4]],b:qt[t[5]]<<4|qt[t[6]],a:e===9?qt[t[7]]<<4|qt[t[8]]:255})),n}const JV=(t,e)=>t<255?e(t):"";function ZV(t){var e=YV(t)?GV:QV;return t?"#"+e(t.r)+e(t.g)+e(t.b)+JV(t.a,e):void 0}const eF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hb(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function tF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function nF(t,e,n){const i=hb(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function iF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Lm(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=iF(n,i,r,h,s),l=l*60+.5),[l|0,u||0,a]}function Vm(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Gi)}function Fm(t,e,n){return Vm(hb,t,e,n)}function rF(t,e,n){return Vm(nF,t,e,n)}function sF(t,e,n){return Vm(tF,t,e,n)}function db(t){return(t%360+360)%360}function oF(t){const e=eF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Jo(+e[5]):Gi(+e[5]));const r=db(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=rF(r,s,o):e[1]==="hsv"?i=sF(r,s,o):i=Fm(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function aF(t,e){var n=Lm(t);n[0]=db(n[0]+e),n=Fm(n),t.r=n[0],t.g=n[1],t.b=n[2]}function lF(t){if(!t)return;const e=Lm(t),n=e[0],i=B0(e[1]),r=B0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${qn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const z0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function uF(){const t={},e=Object.keys($0),n=Object.keys(z0);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,z0[s]);s=parseInt($0[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let hu;function cF(t){hu||(hu=uF(),hu.transparent=[0,0,0,0]);const e=hu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const hF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dF(t){const e=hF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Jo(o):Di(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Jo(i):Di(i,0,255)),r=255&(e[4]?Jo(r):Di(r,0,255)),s=255&(e[6]?Jo(s):Di(s,0,255)),{r:i,g:r,b:s,a:n}}}function fF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${qn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Jd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,as=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function pF(t,e,n){const i=as(qn(t.r)),r=as(qn(t.g)),s=as(qn(t.b));return{r:Gi(Jd(i+n*(as(qn(e.r))-i))),g:Gi(Jd(r+n*(as(qn(e.g))-r))),b:Gi(Jd(s+n*(as(qn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function du(t,e,n){if(t){let i=Lm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Fm(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function fb(t,e){return t&&Object.assign(e||{},t)}function W0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Gi(t[3]))):(e=fb(t,{r:0,g:0,b:0,a:1}),e.a=Gi(e.a)),e}function gF(t){return t.charAt(0)==="r"?dF(t):oF(t)}class el{constructor(e){if(e instanceof el)return e;const n=typeof e;let i;n==="object"?i=W0(e):n==="string"&&(i=XV(e)||cF(e)||gF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=fb(this._rgb);return e&&(e.a=qn(e.a)),e}set rgb(e){this._rgb=W0(e)}rgbString(){return this._valid?fF(this._rgb):void 0}hexString(){return this._valid?ZV(this._rgb):void 0}hslString(){return this._valid?lF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=pF(this._rgb,e._rgb,n)),this}clone(){return new el(this.rgb)}alpha(e){return this._rgb.a=Gi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Il(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return du(this._rgb,2,e),this}darken(e){return du(this._rgb,2,-e),this}saturate(e){return du(this._rgb,1,e),this}desaturate(e){return du(this._rgb,1,-e),this}rotate(e){return aF(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Un(){}const mF=(()=>{let t=0;return()=>t++})();function Te(t){return t==null}function it(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function pe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function nn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function wn(t,e){return nn(t)?t:e}function le(t,e){return typeof t>"u"?e:t}const yF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function xe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function me(t,e,n,i){let r,s,o;if(it(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(pe(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Fc(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function jc(t){if(it(t))return t.map(jc);if(pe(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=jc(t[n[r]]);return e}return t}function pb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function _F(t,e,n,i){if(!pb(t))return;const r=e[t],s=n[t];pe(r)&&pe(s)?tl(r,s,i):e[t]=jc(s)}function tl(t,e,n){const i=it(e)?e:[e],r=i.length;if(!pe(t))return t;n=n||{};const s=n.merger||_F;let o;for(let a=0;a<r;++a){if(o=i[a],!pe(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],t,o,n)}return t}function _a(t,e){return tl(t,e,{merger:vF})}function vF(t,e,n){if(!pb(t))return;const i=e[t],r=n[t];pe(i)&&pe(r)?_a(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=jc(r))}const H0={"":t=>t,x:t=>t.x,y:t=>t.y};function wF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function EF(t){const e=wF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Uc(t,e){return(H0[e]||(H0[e]=EF(e)))(t)}function jm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Bc=t=>typeof t<"u",er=t=>typeof t=="function",q0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function TF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const yt=Math.PI,Nn=2*yt,IF=Nn+yt,zc=Number.POSITIVE_INFINITY,SF=yt/180,cn=yt/2,fr=yt/4,K0=yt*2/3,gb=Math.log10,Zs=Math.sign;function va(t,e,n){return Math.abs(t-e)<n}function G0(t){const e=Math.round(t);t=va(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(gb(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function xF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function bF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function nl(t){return!bF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function kF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function CF(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function kr(t){return t*(yt/180)}function AF(t){return t*(180/yt)}function Q0(t){if(!nn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function PF(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*yt&&(s+=Nn),{angle:s,distance:r}}function Np(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function RF(t,e){return(t-e+IF)%Nn-yt}function wi(t){return(t%Nn+Nn)%Nn}function mb(t,e,n,i){const r=wi(t),s=wi(e),o=wi(n),a=wi(s-r),l=wi(o-r),u=wi(r-s),h=wi(r-o);return r===s||r===o||i&&s===o||a>l&&u<h}function Yt(t,e,n){return Math.max(e,Math.min(n,t))}function NF(t){return Yt(t,-32768,32767)}function Zo(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Um(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Cr=(t,e,n,i)=>Um(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),DF=(t,e,n)=>Um(t,n,i=>t[i][e]>=n);function MF(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const yb=["push","pop","shift","splice","unshift"];function OF(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yb.forEach(n=>{const i="_onData"+jm(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Y0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(yb.forEach(s=>{delete t[s]}),delete t._chartjs)}function LF(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const _b=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function vb(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,_b.call(window,()=>{i=!1,t.apply(e,n)}))}}function VF(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const wb=t=>t==="start"?"left":t==="end"?"right":"center",Ft=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,FF=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function jF(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(r=Math.min(Cr(l,h,d).lo,n?i:Cr(e,h,o.getPixelForValue(d)).lo),u){const v=l.slice(0,r+1).reverse().findIndex(I=>!Te(I[a.axis]));r-=Math.max(0,v)}r=Yt(r,0,i-1)}if(y){let v=Math.max(Cr(l,o.axis,f,!0).hi+1,n?0:Cr(e,h,o.getPixelForValue(f),!0).hi+1);if(u){const I=l.slice(v-1).findIndex(w=>!Te(w[a.axis]));v+=Math.max(0,I)}s=Yt(v,r,i)-r}else s=i-r}return{start:r,count:s}}function UF(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const fu=t=>t===0||t===1,X0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Nn/n)),J0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Nn/n)+1,wa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*cn)+1,easeOutSine:t=>Math.sin(t*cn),easeInOutSine:t=>-.5*(Math.cos(yt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>fu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>fu(t)?t:X0(t,.075,.3),easeOutElastic:t=>fu(t)?t:J0(t,.075,.3),easeInOutElastic(t){return fu(t)?t:t<.5?.5*X0(t*2,.1125,.45):.5+.5*J0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-wa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?wa.easeInBounce(t*2)*.5:wa.easeOutBounce(t*2-1)*.5+.5};function Bm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Z0(t){return Bm(t)?t:new el(t)}function Zd(t){return Bm(t)?t:new el(t).saturate(.5).darken(.1).hexString()}const BF=["x","y","borderWidth","radius","tension"],zF=["color","borderColor","backgroundColor"];function $F(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:zF},numbers:{type:"number",properties:BF}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function WF(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ew=new Map;function HF(t,e){e=e||{};const n=t+JSON.stringify(e);let i=ew.get(n);return i||(i=new Intl.NumberFormat(t,e),ew.set(n,i)),i}function Eb(t,e,n){return HF(e,n).format(t)}const qF={values(t){return it(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=KF(t,n)}const o=gb(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Eb(t,i,l)}};function KF(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Tb={formatters:qF};function GF(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Tb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const qr=Object.create(null),Dp=Object.create(null);function Ea(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function ef(t,e,n){return typeof e=="string"?tl(Ea(t,e),n):tl(Ea(t,""),e)}class QF{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Zd(r.backgroundColor),this.hoverBorderColor=(i,r)=>Zd(r.borderColor),this.hoverColor=(i,r)=>Zd(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return ef(this,e,n)}get(e){return Ea(this,e)}describe(e,n){return ef(Dp,e,n)}override(e,n){return ef(qr,e,n)}route(e,n,i,r){const s=Ea(this,e),o=Ea(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return pe(l)?Object.assign({},u,l):le(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Fe=new QF({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$F,WF,GF]);function YF(t){return!t||Te(t.size)||Te(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function tw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function pr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function nw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Mp(t,e,n,i){Ib(t,e,n,i,null)}function Ib(t,e,n,i,r){let s,o,a,l,u,h,d,f;const m=e.pointStyle,y=e.rotation,v=e.radius;let I=(y||0)*SF;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(I),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,v,0,0,Nn):t.arc(n,i,v,0,Nn),t.closePath();break;case"triangle":h=r?r/2:v,t.moveTo(n+Math.sin(I)*h,i-Math.cos(I)*v),I+=K0,t.lineTo(n+Math.sin(I)*h,i-Math.cos(I)*v),I+=K0,t.lineTo(n+Math.sin(I)*h,i-Math.cos(I)*v),t.closePath();break;case"rectRounded":u=v*.516,l=v-u,o=Math.cos(I+fr)*l,d=Math.cos(I+fr)*(r?r/2-u:l),a=Math.sin(I+fr)*l,f=Math.sin(I+fr)*(r?r/2-u:l),t.arc(n-d,i-a,u,I-yt,I-cn),t.arc(n+f,i-o,u,I-cn,I),t.arc(n+d,i+a,u,I,I+cn),t.arc(n-f,i+o,u,I+cn,I+yt),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}I+=fr;case"rectRot":d=Math.cos(I)*(r?r/2:v),o=Math.cos(I)*v,a=Math.sin(I)*v,f=Math.sin(I)*(r?r/2:v),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":I+=fr;case"cross":d=Math.cos(I)*(r?r/2:v),o=Math.cos(I)*v,a=Math.sin(I)*v,f=Math.sin(I)*(r?r/2:v),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(I)*(r?r/2:v),o=Math.cos(I)*v,a=Math.sin(I)*v,f=Math.sin(I)*(r?r/2:v),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),I+=fr,d=Math.cos(I)*(r?r/2:v),o=Math.cos(I)*v,a=Math.sin(I)*v,f=Math.sin(I)*(r?r/2:v),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(I)*v,a=Math.sin(I)*v,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(I)*(r?r/2:v),i+Math.sin(I)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function il(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function zm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function $m(t){t.restore()}function XF(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function JF(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function ZF(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Te(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function ej(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function tj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function $c(t,e,n,i,r,s={}){const o=it(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,ZF(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&tj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Te(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,i,s.maxWidth)),t.fillText(u,n,i,s.maxWidth),ej(t,n,i,u,s),i+=Number(r.lineHeight);t.restore()}function Op(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*yt,yt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,yt,cn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,cn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-cn,!0),t.lineTo(n+o.topLeft,i)}const nj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ij=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function rj(t,e){const n=(""+t).match(nj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const sj=t=>+t||0;function Sb(t,e){const n={},i=pe(e),r=i?Object.keys(e):e,s=pe(t)?i?o=>le(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=sj(s(o));return n}function oj(t){return Sb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ta(t){return Sb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function yn(t){const e=oj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Rt(t,e){t=t||{},e=e||Fe.font;let n=le(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=le(t.style,e.style);i&&!(""+i).match(ij)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:le(t.family,e.family),lineHeight:rj(le(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:le(t.weight,e.weight),string:""};return r.string=YF(r),r}function pu(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function aj(t,e,n){const{min:i,max:r}=t,s=yF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function es(t,e){return Object.assign(Object.create(t),e)}function Wm(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Cb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Wm([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return bb(a,l,()=>gj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return rw(a).includes(l)},ownKeys(a){return rw(a)},set(a,l,u){const h=a._storage||(a._storage=r());return a[l]=h[l]=u,delete a._keys,!0}})}function eo(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:xb(t,i),setContext:s=>eo(t,s,n,i),override:s=>eo(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return bb(s,o,()=>uj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function xb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:er(n)?n:()=>n,isIndexable:er(i)?i:()=>i}}const lj=(t,e)=>t?t+jm(e):e,Hm=(t,e)=>pe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function bb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function uj(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return er(a)&&o.isScriptable(e)&&(a=cj(e,a,t,n)),it(a)&&a.length&&(a=hj(e,a,t,o.isIndexable)),Hm(e,a)&&(a=eo(a,r,s&&s[e],o)),a}function cj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),Hm(t,l)&&(l=qm(r._scopes,r,t,l)),l}function hj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(pe(e[0])){const l=e,u=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=qm(u,r,t,h);e.push(eo(d,s,o&&o[t],a))}}return e}function kb(t,e,n){return er(t)?t(e,n):t}const dj=(t,e)=>t===!0?e:typeof t=="string"?Uc(e,t):void 0;function fj(t,e,n,i,r){for(const s of e){const o=dj(n,s);if(o){t.add(o);const a=kb(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function qm(t,e,n,i){const r=e._rootScopes,s=kb(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=iw(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=iw(a,o,s,l,i),l===null)?!1:Wm(Array.from(a),[""],r,s,()=>pj(e,n,i))}function iw(t,e,n,i,r){for(;n;)n=fj(t,e,n,i,r);return n}function pj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return it(r)&&pe(n)?n:r||{}}function gj(t,e,n,i){let r;for(const s of e)if(r=Cb(lj(s,t),n),typeof r<"u")return Hm(t,r)?qm(n,i,t,r):r}function Cb(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function rw(t){let e=t._keys;return e||(e=t._keys=mj(t._scopes)),e}function mj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const yj=Number.EPSILON||1e-14,to=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ab=t=>t==="x"?"y":"x";function _j(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Np(s,r),l=Np(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function vj(t,e,n){const i=t.length;let r,s,o,a,l,u=to(t,0);for(let h=0;h<i-1;++h)if(l=u,u=to(t,h+1),!(!l||!u)){if(va(e[h],0,yj)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function wj(t,e,n="x"){const i=Ab(n),r=t.length;let s,o,a,l=to(t,0);for(let u=0;u<r;++u){if(o=a,a=l,l=to(t,u+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[u]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[u])}}function Ej(t,e="x"){const n=Ab(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,u=to(t,0);for(o=0;o<i;++o)if(a=l,l=u,u=to(t,o+1),!!l){if(u){const h=u[e]-l[e];r[o]=h!==0?(u[n]-l[n])/h:0}s[o]=a?u?Zs(r[o-1])!==Zs(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}vj(t,r,s),wj(t,s,e)}function gu(t,e,n){return Math.max(Math.min(t,n),e)}function Tj(t,e){let n,i,r,s,o,a=il(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&il(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=gu(r.cp1x,e.left,e.right),r.cp1y=gu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=gu(r.cp2x,e.left,e.right),r.cp2y=gu(r.cp2y,e.top,e.bottom)))}function Ij(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Ej(t,r);else{let u=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=_j(u,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&Tj(t,n)}function Km(){return typeof window<"u"&&typeof document<"u"}function Gm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wc(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Oh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Sj(t,e){return Oh(t).getPropertyValue(e)}const xj=["top","right","bottom","left"];function Dr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=xj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const bj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function kj(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(bj(r,s,t.target))a=r,l=s;else{const u=e.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function wr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Oh(n),s=r.boxSizing==="border-box",o=Dr(r,"padding"),a=Dr(r,"border","width"),{x:l,y:u,box:h}=kj(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((u-f)/y*n.height/i)}}function Cj(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Gm(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Oh(s),l=Dr(a,"border","width"),u=Dr(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,i=Wc(a.maxWidth,s,"clientWidth"),r=Wc(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||zc,maxHeight:r||zc}}const Mi=t=>Math.round(t*10)/10;function Aj(t,e,n,i){const r=Oh(t),s=Dr(r,"margin"),o=Wc(r.maxWidth,t,"clientWidth")||zc,a=Wc(r.maxHeight,t,"clientHeight")||zc,l=Cj(t,e,n);let{width:u,height:h}=l;if(r.boxSizing==="content-box"){const f=Dr(r,"border","width"),m=Dr(r,"padding");u-=m.width+f.width,h-=m.height+f.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=Mi(Math.min(u,o,l.maxWidth)),h=Mi(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Mi(u/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,u=Mi(Math.floor(h*i))),{width:u,height:h}}function sw(t,e,n){const i=e||1,r=Mi(t.height*i),s=Mi(t.width*i);t.height=Mi(t.height),t.width=Mi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Pj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Km()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ow(t,e){const n=Sj(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Er(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Rj(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Nj(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Er(t,r,n),a=Er(r,s,n),l=Er(s,e,n),u=Er(o,a,n),h=Er(a,l,n);return Er(u,h,n)}const Dj=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Mj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ms(t,e,n){return t?Dj(e,n):Mj()}function Pb(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Rb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Nb(t){return t==="angle"?{between:mb,compare:RF,normalize:wi}:{between:Zo,compare:(e,n)=>e-n,normalize:e=>e}}function aw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function Oj(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=Nb(i),l=e.length;let{start:u,end:h,loop:d}=t,f,m;if(d){for(u+=l,h+=l,f=0,m=l;f<m&&o(a(e[u%l][i]),r,s);++f)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:d,style:t.style}}function Lj(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=Nb(i),{start:h,end:d,loop:f,style:m}=Oj(t,e,n),y=[];let v=!1,I=null,w,T,b;const R=()=>l(r,b,w)&&a(r,b)!==0,D=()=>a(s,w)===0||l(s,b,w),L=()=>v||R(),x=()=>!v||D();for(let _=h,k=h;_<=d;++_)T=e[_%o],!T.skip&&(w=u(T[i]),w!==b&&(v=l(w,r,s),I===null&&L()&&(I=a(w,r)===0?_:k),I!==null&&x()&&(y.push(aw({start:I,end:_,loop:f,count:o,style:m})),I=null),k=_,b=w));return I!==null&&y.push(aw({start:I,end:d,loop:f,count:o,style:m})),y}function Vj(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=Lj(i[r],t.points,e);s.length&&n.push(...s)}return n}function Fj(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function jj(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function Uj(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=Fj(n,r,s,i);if(i===!0)return lw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,u=!!t._fullLoop&&o===0&&a===r-1;return lw(t,jj(n,o,l,u),n,e)}function lw(t,e,n,i){return!i||!i.setContext||!n?e:Bj(t,e,n,i)}function Bj(t,e,n,i){const r=t._chart.getContext(),s=uw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=s,d=e[0].start,f=d;function m(y,v,I,w){const T=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=T;for(;n[v%l].skip;)v+=T;y%l!==v%l&&(u.push({start:y%l,end:v%l,loop:I,style:w}),h=w,d=v%l)}}for(const y of e){d=a?d:y.start;let v=n[d%l],I;for(f=d+1;f<=y.end;f++){const w=n[f%l];I=uw(i.setContext(es(r,{type:"segment",p0:v,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),zj(I,h)&&m(d,f-1,y.loop,h),v=w,h=I}d<f-1&&m(d,f-1,y.loop,h)}return u}function uw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function zj(t,e){if(!e)return!1;const n=[],i=function(r,s){return Bm(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function mu(t,e,n){return t.options.clip?t[n]:e[n]}function $j(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:mu(n,e,"left"),right:mu(n,e,"right"),top:mu(i,e,"top"),bottom:mu(i,e,"bottom")}:e}function Wj(t,e){const n=e._clip;if(n.disabled)return!1;const i=$j(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Hj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=_b.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var zn=new Hj;const cw="transparent",qj={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Z0(t||cw),r=i.valid&&Z0(e||cw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Kj{constructor(e,n,i,r){const s=n[i];r=pu([e.to,r,s,e.from]);const o=pu([e.from,s,r]);this._active=!0,this._fn=e.fn||qj[e.type||typeof o],this._easing=wa[e.easing]||wa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=pu([e.to,n,r,e.from]),this._from=pu([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class Db{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!pe(e))return;const n=Object.keys(Fe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!pe(s))return;const o={};for(const a of n)o[a]=s[a];(it(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=Qj(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&Gj(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[u];let d=s[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}s[u]=d=new Kj(f,e,u,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return zn.add(this._chart,i),!0}}function Gj(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Qj(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function hw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function Yj(t,e,n){if(n===!1)return!1;const i=hw(t,n),r=hw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Xj(t){let e,n,i,r;return pe(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function Mb(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function dw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}u=t.values[l],nn(u)&&(s||e===0||Zs(e)===Zs(u))&&(e+=u)}return!h&&!i.all?0:e}function Jj(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function tf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Zj(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function e4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function t4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function fw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function pw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,u=o.axis,h=Zj(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const y=e[m],{[l]:v,[u]:I}=y,w=y._stacks||(y._stacks={});f=w[u]=t4(r,h,v),f[a]=I,f._top=fw(f,o,!0,i.type),f._bottom=fw(f,o,!1,i.type);const T=f._visualValues||(f._visualValues={});T[a]=I}}function nf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function n4(t,e){return es(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function i4(t,e,n){return es(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Vo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const rf=t=>t==="reset"||t==="none",gw=(t,e)=>e?t:Object.assign({},t),r4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Mb(n,!0),values:null};class Ia{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=tf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Vo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,y)=>d==="x"?f:d==="r"?y:m,s=n.xAxisID=le(i.xAxisID,nf(e,"x")),o=n.yAxisID=le(i.yAxisID,nf(e,"y")),a=n.rAxisID=le(i.rAxisID,nf(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Y0(this._data,this),e._stacked&&Vo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(pe(n)){const r=this._cachedMeta;this._data=Jj(n,r)}else if(i!==n){if(i){Y0(i,this);const r=this._cachedMeta;Vo(r),r._parsed=[]}n&&Object.isExtensible(n)&&OF(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=tf(n.vScale,n),n.stack!==i.stack&&(r=!0,Vo(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(pw(this,n._parsed),n._stacked=tf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{it(r[e])?f=this.parseArrayData(i,r,e,n):pe(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),u=d);i._sorted=l}o&&pw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,d=new Array(r);let f,m,y;for(f=0,m=r;f<m;++f)y=f+i,d[f]={[a]:h||s.parse(u[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],u[h]={x:s.parse(Uc(m,a),f),y:o.parse(Uc(m,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:Mb(r,!0),values:n._stacks[e.axis]._visualValues};return dw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=dw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=r4(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=e4(a);let f,m;function y(){m=r[f];const v=m[a.axis];return!nn(m[e.axis])||h>v||d<v}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(u,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(u,e,m,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],nn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Xj(le(this.options.clip,Yj(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&u?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=i4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=n4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Bc(i);if(a)return gw(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),m=Object.keys(Fe.elements[e]),y=()=>this.getContext(i,r,n),v=u.resolveNamedOptions(f,m,y,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(gw(v,l))),v}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const u=new Db(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||rf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){rf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!rf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Vo(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}te(Ia,"defaults",{}),te(Ia,"datasetElementType",null),te(Ia,"dataElementType",null);class Wu extends Ia{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=jF(n,r,o);this._drawStart=a,this._drawCount=l,UF(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,m=a.axis,{spanGaps:y,segment:v}=this.options,I=nl(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||r==="none",T=n+i,b=e.length;let R=n>0&&this.getParsed(n-1);for(let D=0;D<b;++D){const L=e[D],x=w?L:{};if(D<n||D>=T){x.skip=!0;continue}const _=this.getParsed(D),k=Te(_[m]),A=x[f]=o.getPixelForValue(_[f],D),P=x[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],D);x.skip=isNaN(A)||isNaN(P)||k,x.stop=D>0&&Math.abs(_[f]-R[f])>I,v&&(x.parsed=_,x.raw=u.data[D]),d&&(x.options=h||this.resolveDataElementOptions(D,L.active?"active":r)),w||this.updateElement(L,D,x,r),R=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}te(Wu,"id","line"),te(Wu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),te(Wu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function gr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Qm{constructor(e){te(this,"options");this.options=e||{}}static override(e){Object.assign(Qm.prototype,e)}init(){}formats(){return gr()}parse(){return gr()}format(){return gr()}add(){return gr()}diff(){return gr()}startOf(){return gr()}endOf(){return gr()}}var s4={_date:Qm};function o4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?DF:Cr;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(s,e,n-d),m=u(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=u(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(v=>!Te(v[d.axis]));h.lo-=Math.max(0,m);const y=f.slice(h.hi).findIndex(v=>!Te(v[d.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function Lh(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:d,hi:f}=o4(s[a],e,o,r);for(let m=d;m<=f;++m){const y=h[m];y.skip||i(y,u,m)}}}function a4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function sf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Lh(t,n,e,function(a,l,u){!r&&!il(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function l4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=PF(o,{x:e.x,y:e.y});mb(d,u,h)&&r.push({element:o,datasetIndex:a,index:l})}return Lh(t,n,e,s),r}function u4(t,e,n,i,r,s){let o=[];const a=a4(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const y=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(y))&&!m)return;const I=a(e,y);I<l?(o=[{element:h,datasetIndex:d,index:f}],l=I):I===l&&o.push({element:h,datasetIndex:d,index:f})}return Lh(t,n,e,u),o}function of(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?l4(t,e,n,r):u4(t,e,n,i,r,s)}function mw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Lh(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var c4={modes:{index(t,e,n,i){const r=wr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?sf(t,r,s,i,o):of(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,i){const r=wr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?sf(t,r,s,i,o):of(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=wr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return sf(t,r,s,i,o)},nearest(t,e,n,i){const r=wr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return of(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=wr(e,t);return mw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=wr(e,t);return mw(t,r,"y",n.intersect,i)}}};const Ob=["left","top","right","bottom"];function Fo(t,e){return t.filter(n=>n.pos===e)}function yw(t,e){return t.filter(n=>Ob.indexOf(n.pos)===-1&&n.box.axis===e)}function jo(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function h4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function d4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!Ob.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function f4(t,e){const n=d4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function p4(t){const e=h4(t),n=jo(e.filter(u=>u.box.fullSize),!0),i=jo(Fo(e,"left"),!0),r=jo(Fo(e,"right")),s=jo(Fo(e,"top"),!0),o=jo(Fo(e,"bottom")),a=yw(e,"x"),l=yw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Fo(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function _w(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Lb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function g4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!pe(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&Lb(o,s.getPadding());const a=Math.max(0,e.outerWidth-_w(o,t,"left","right")),l=Math.max(0,e.outerHeight-_w(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function m4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function y4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function ea(t,e,n,i){const r=[];let s,o,a,l,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,y4(a.horizontal,e));const{same:d,other:f}=g4(e,n,a,i);u|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return u&&ea(r,e,n,i)||h}function yu(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function vw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=e.w*h,f=u.size||l.height;Bc(u.start)&&(o=u.start),l.fullSize?yu(l,r.left,o,n.outerWidth-r.right-r.left,f):yu(l,e.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=e.h*h,f=u.size||l.width;Bc(u.start)&&(s=u.start),l.fullSize?yu(l,s,r.top,f,n.outerHeight-r.bottom-r.top):yu(l,s,e.top+u.placed,f,d),u.start=s,u.placed+=d,s=l.right}}e.x=s,e.y=o}var Oi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=yn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=p4(t.boxes),l=a.vertical,u=a.horizontal;me(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const h=l.reduce((v,I)=>I.box.options&&I.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);Lb(f,yn(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),y=f4(l.concat(u),d);ea(a.fullSize,m,d,y),ea(l,m,d,y),ea(u,m,d,y)&&ea(l,m,d,y),m4(m),vw(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,vw(a.rightAndBottom,m,d,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},me(a.chartArea,v=>{const I=v.box;Object.assign(I,t.chartArea),I.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Vb{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class _4 extends Vb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Hu="$chartjs",v4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ww=t=>t===null||t==="";function w4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Hu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ww(r)){const s=ow(t,"width");s!==void 0&&(t.width=s)}if(ww(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=ow(t,"height");s!==void 0&&(t.height=s)}return t}const Fb=Pj?{passive:!0}:!1;function E4(t,e,n){t&&t.addEventListener(e,n,Fb)}function T4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Fb)}function I4(t,e){const n=v4[t.type]||t.type,{x:i,y:r}=wr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Hc(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function S4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Hc(a.addedNodes,i),o=o&&!Hc(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function x4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Hc(a.removedNodes,i),o=o&&!Hc(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const rl=new Map;let Ew=0;function jb(){const t=window.devicePixelRatio;t!==Ew&&(Ew=t,rl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function b4(t,e){rl.size||window.addEventListener("resize",jb),rl.set(t,e)}function k4(t){rl.delete(t),rl.size||window.removeEventListener("resize",jb)}function C4(t,e,n){const i=t.canvas,r=i&&Gm(i);if(!r)return;const s=vb((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),b4(t,s),o}function af(t,e,n){n&&n.disconnect(),e==="resize"&&k4(t)}function A4(t,e,n){const i=t.canvas,r=vb(s=>{t.ctx!==null&&n(I4(s,t))},t);return E4(i,e,r),r}class P4 extends Vb{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(w4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Hu])return!1;const i=n[Hu].initial;["height","width"].forEach(s=>{const o=i[s];Te(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Hu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:S4,detach:x4,resize:C4}[n]||A4;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:af,detach:af,resize:af}[n]||T4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return Aj(e,n,i,r)}isAttached(e){const n=e&&Gm(e);return!!(n&&n.isConnected)}}function R4(t){return!Km()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?_4:P4}class tr{constructor(){te(this,"x");te(this,"y");te(this,"active",!1);te(this,"options");te(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return nl(this.x)&&nl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}te(tr,"defaults",{}),te(tr,"defaultRoutes");function N4(t,e){const n=t.options.ticks,i=D4(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?O4(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return L4(e,u,s,o/r),u;const h=M4(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(_u(e,u,h,Te(m)?0:a-m,a),d=0,f=o-1;d<f;d++)_u(e,u,h,s[d],s[d+1]);return _u(e,u,h,l,Te(m)?e.length:l+m),u}return _u(e,u,h),u}function D4(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function M4(t,e,n){const i=V4(t),r=e.length/n;if(!i)return Math.max(r,1);const s=xF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function O4(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function L4(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function _u(t,e,n,i,r){const s=le(i,0),o=Math.min(le(r,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function V4(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const F4=t=>t==="left"?"right":t==="right"?"left":t,Tw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Iw=(t,e)=>Math.min(e||t,t);function Sw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function j4(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(i===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<s-a||l>o+a)))return l}function U4(t,e){me(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Uo(t){return t.drawTicks?t.tickLength:0}function xw(t,e){if(!t.display)return 0;const n=Rt(t.font,e),i=yn(t.padding);return(it(t.text)?t.text.length:1)*n.lineHeight+i.height}function B4(t,e){return es(t,{scale:e,type:"scale"})}function z4(t,e,n){return es(t,{tick:n,index:e,type:"tick"})}function $4(t,e,n){let i=wb(t);return(n&&e!=="right"||!n&&e==="right")&&(i=F4(i)),i}function W4(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let d=0,f,m,y;const v=o-r,I=a-s;if(t.isHorizontal()){if(m=Ft(i,s,a),pe(n)){const w=Object.keys(n)[0],T=n[w];y=h[w].getPixelForValue(T)+v-e}else n==="center"?y=(u.bottom+u.top)/2+v-e:y=Tw(t,n,e);f=a-s}else{if(pe(n)){const w=Object.keys(n)[0],T=n[w];m=h[w].getPixelForValue(T)-I+e}else n==="center"?m=(u.left+u.right)/2-I+e:m=Tw(t,n,e);y=Ft(i,o,r),d=n==="left"?-cn:cn}return{titleX:m,titleY:y,maxWidth:f,rotation:d}}class ho extends tr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=wn(e,Number.POSITIVE_INFINITY),n=wn(n,Number.NEGATIVE_INFINITY),i=wn(i,Number.POSITIVE_INFINITY),r=wn(r,Number.NEGATIVE_INFINITY),{min:wn(e,i),max:wn(n,r),minDefined:nn(e),maxDefined:nn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:wn(n,wn(i,n)),max:wn(i,wn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xe(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=aj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Sw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=N4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xe(this.options.afterUpdate,[this])}beforeSetDimensions(){xe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),xe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=xe(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){xe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Iw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=Yt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-Uo(e.grid)-n.padding-xw(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=AF(Math.min(Math.asin(Yt((h.highest.height+6)/a,-1,1)),Math.asin(Yt(l/u,-1,1))-Math.asin(Yt(f/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){xe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=xw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Uo(s)+l):(e.height=this.maxHeight,e.width=Uo(s)+l),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,y=kr(this.labelRotation),v=Math.cos(y),I=Math.sin(y);if(a){const w=i.mirror?0:I*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+w+m)}else{const w=i.mirror?0:v*d.width+I*f.height;e.width=Math.min(this.maxWidth,e.width+w+m)}this._calculatePadding(u,h,I,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?u?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Te(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Sw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Iw(n,i));let u=0,h=0,d,f,m,y,v,I,w,T,b,R,D;for(d=0;d<n;d+=l){if(y=e[d].label,v=this._resolveTickFontOptions(d),r.font=I=v.string,w=s[I]=s[I]||{data:{},gc:[]},T=v.lineHeight,b=R=0,!Te(y)&&!it(y))b=tw(r,w.data,w.gc,b,y),R=T;else if(it(y))for(f=0,m=y.length;f<m;++f)D=y[f],!Te(D)&&!it(D)&&(b=tw(r,w.data,w.gc,b,D),R+=T);o.push(b),a.push(R),u=Math.max(b,u),h=Math.max(R,h)}U4(s,n);const L=o.indexOf(u),x=a.indexOf(h),_=k=>({width:o[k]||0,height:a[k]||0});return{first:_(0),last:_(n-1),widest:_(L),highest:_(x),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return NF(this._alignToPixels?pr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=z4(this.getContext(),e,i))}return this.$context||(this.$context=B4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=kr(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Uo(s),m=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,I=v/2,w=function(ge){return pr(i,ge,v)};let T,b,R,D,L,x,_,k,A,P,N,C;if(o==="top")T=w(this.bottom),x=this.bottom-f,k=T-I,P=w(e.top)+I,C=e.bottom;else if(o==="bottom")T=w(this.top),P=e.top,C=w(e.bottom)-I,x=T+I,k=this.top+f;else if(o==="left")T=w(this.right),L=this.right-f,_=T-I,A=w(e.left)+I,N=e.right;else if(o==="right")T=w(this.left),A=e.left,N=w(e.right)-I,L=T+I,_=this.left+f;else if(n==="x"){if(o==="center")T=w((e.top+e.bottom)/2+.5);else if(pe(o)){const ge=Object.keys(o)[0],we=o[ge];T=w(this.chart.scales[ge].getPixelForValue(we))}P=e.top,C=e.bottom,x=T+I,k=x+f}else if(n==="y"){if(o==="center")T=w((e.left+e.right)/2);else if(pe(o)){const ge=Object.keys(o)[0],we=o[ge];T=w(this.chart.scales[ge].getPixelForValue(we))}L=T-I,_=L-f,A=e.left,N=e.right}const ee=le(r.ticks.maxTicksLimit,d),ne=Math.max(1,Math.ceil(d/ee));for(b=0;b<d;b+=ne){const ge=this.getContext(b),we=s.setContext(ge),z=a.setContext(ge),H=we.lineWidth,G=we.color,ce=z.dash||[],re=z.dashOffset,fe=we.tickWidth,ze=we.tickColor,$e=we.tickBorderDash||[],We=we.tickBorderDashOffset;R=j4(this,b,l),R!==void 0&&(D=pr(i,R,H),u?L=_=A=N=D:x=k=P=C=D,m.push({tx1:L,ty1:x,tx2:_,ty2:k,x1:A,y1:P,x2:N,y2:C,width:H,color:G,borderDash:ce,borderDashOffset:re,tickWidth:fe,tickColor:ze,tickBorderDash:$e,tickBorderDashOffset:We}))}return this._ticksLength=d,this._borderValue=T,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=s,f=Uo(i.grid),m=f+h,y=d?-h:m,v=-kr(this.labelRotation),I=[];let w,T,b,R,D,L,x,_,k,A,P,N,C="middle";if(r==="top")L=this.bottom-y,x=this._getXAxisLabelAlignment();else if(r==="bottom")L=this.top+y,x=this._getXAxisLabelAlignment();else if(r==="left"){const ne=this._getYAxisLabelAlignment(f);x=ne.textAlign,D=ne.x}else if(r==="right"){const ne=this._getYAxisLabelAlignment(f);x=ne.textAlign,D=ne.x}else if(n==="x"){if(r==="center")L=(e.top+e.bottom)/2+m;else if(pe(r)){const ne=Object.keys(r)[0],ge=r[ne];L=this.chart.scales[ne].getPixelForValue(ge)+m}x=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")D=(e.left+e.right)/2-m;else if(pe(r)){const ne=Object.keys(r)[0],ge=r[ne];D=this.chart.scales[ne].getPixelForValue(ge)}x=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?C="top":l==="end"&&(C="bottom"));const ee=this._getLabelSizes();for(w=0,T=a.length;w<T;++w){b=a[w],R=b.label;const ne=s.setContext(this.getContext(w));_=this.getPixelForTick(w)+s.labelOffset,k=this._resolveTickFontOptions(w),A=k.lineHeight,P=it(R)?R.length:1;const ge=P/2,we=ne.color,z=ne.textStrokeColor,H=ne.textStrokeWidth;let G=x;o?(D=_,x==="inner"&&(w===T-1?G=this.options.reverse?"left":"right":w===0?G=this.options.reverse?"right":"left":G="center"),r==="top"?u==="near"||v!==0?N=-P*A+A/2:u==="center"?N=-ee.highest.height/2-ge*A+A:N=-ee.highest.height+A/2:u==="near"||v!==0?N=A/2:u==="center"?N=ee.highest.height/2-ge*A:N=ee.highest.height-P*A,d&&(N*=-1),v!==0&&!ne.showLabelBackdrop&&(D+=A/2*Math.sin(v))):(L=_,N=(1-P)*A/2);let ce;if(ne.showLabelBackdrop){const re=yn(ne.backdropPadding),fe=ee.heights[w],ze=ee.widths[w];let $e=N-re.top,We=0-re.left;switch(C){case"middle":$e-=fe/2;break;case"bottom":$e-=fe;break}switch(x){case"center":We-=ze/2;break;case"right":We-=ze;break;case"inner":w===T-1?We-=ze:w>0&&(We-=ze/2);break}ce={left:We,top:$e,width:ze+re.width,height:fe+re.height,color:ne.backdropColor}}I.push({label:R,font:k,textOffset:N,options:{rotation:v,color:we,strokeColor:z,strokeWidth:H,textAlign:G,textBaseline:C,translation:[D,L],backdrop:ce}})}return I}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-kr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return n==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=pr(e,this.left,o)-o/2,h=pr(e,this.right,a)+a/2,d=f=l):(d=pr(e,this.top,o)-o/2,f=pr(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&zm(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;$c(i,u,0,h,l,a)}r&&$m(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Rt(i.font),o=yn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||pe(n)?(l+=o.bottom,it(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=W4(this,l,n,a);$c(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:$4(a,n,r),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=le(e.grid&&e.grid.z,-1),r=le(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ho.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Rt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;K4(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,H4(e,o,i),this.override&&Fe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Fe[r]&&(delete Fe[r][i],this.override&&delete qr[i])}}function H4(t,e,n){const i=tl(Object.create(null),[n?Fe.get(n):{},Fe.get(e),t.defaults]);Fe.set(e,i),t.defaultRoutes&&q4(e,t.defaultRoutes),t.descriptors&&Fe.describe(e,t.descriptors)}function q4(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Fe.route(s,r,l,a)})}function K4(t){return"id"in t&&"defaults"in t}class G4{constructor(){this.controllers=new vu(Ia,"datasets",!0),this.elements=new vu(tr,"elements"),this.plugins=new vu(Object,"plugins"),this.scales=new vu(ho,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):me(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=jm(e);xe(i["before"+r],[],i),n[e](i),xe(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var In=new G4;class Q4{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(xe(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=le(i.options&&i.options.plugins,{}),s=Y4(i);return r===!1&&!n?[]:J4(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function Y4(t){const e={},n=[],i=Object.keys(In.plugins.items);for(let s=0;s<i.length;s++)n.push(In.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function X4(t,e){return!e&&t===!1?null:t===!0?{}:t}function J4(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=X4(i[l],r);u!==null&&s.push({plugin:a,options:Z4(t.config,{plugin:a,local:n[l]},u,o)})}return s}function Z4(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Lp(t,e){const n=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function eU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function tU(t,e){return t===e?"_index_":"_value_"}function bw(t){if(t==="x"||t==="y"||t==="r")return t}function nU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Vp(t,...e){if(bw(t))return t;for(const n of e){const i=n.axis||nU(n.position)||t.length>1&&bw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function iU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return kw(t,"x",n[0])||kw(t,"y",n[0])}return{}}function rU(t,e){const n=qr[t.type]||{scales:{}},i=e.scales||{},r=Lp(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!pe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Vp(o,a,iU(o,t),Fe.scales[a.type]),u=tU(l,r),h=n.scales||{};s[o]=_a(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Lp(a,e),h=(qr[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=eU(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),_a(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];_a(a,[Fe.scales[a.type],Fe.scale])}),s}function Ub(t){const e=t.options||(t.options={});e.plugins=le(e.plugins,{}),e.scales=rU(t,e)}function Bb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function sU(t){return t=t||{},t.data=Bb(t.data),Ub(t),t}const Cw=new Map,zb=new Set;function wu(t,e){let n=Cw.get(t);return n||(n=e(),Cw.set(t,n),zb.add(n)),n}const Bo=(t,e,n)=>{const i=Uc(e,n);i!==void 0&&t.add(i)};class oU{constructor(e){this._config=sU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Bb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ub(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return wu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return wu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return wu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Bo(l,e,d))),h.forEach(d=>Bo(l,r,d)),h.forEach(d=>Bo(l,qr[s]||{},d)),h.forEach(d=>Bo(l,Fe,d)),h.forEach(d=>Bo(l,Dp,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),zb.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,qr[n]||{},Fe.datasets[n]||{},{type:n},Fe,Dp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Aw(this._resolverCache,e,r);let l=o;if(lU(o,n)){s.$shared=!1,i=er(i)?i():i;const u=this.createResolver(e,i,a);l=eo(o,i,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Aw(this._resolverCache,e,i);return pe(n)?eo(s,n,void 0,r):s}}function Aw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Wm(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const aU=t=>pe(t)&&Object.getOwnPropertyNames(t).some(e=>er(t[e]));function lU(t,e){const{isScriptable:n,isIndexable:i}=xb(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(er(a)||aU(a))||o&&it(a))return!0}return!1}var uU="4.5.1";const cU=["top","bottom","left","right","chartArea"];function Pw(t,e){return t==="top"||t==="bottom"||cU.indexOf(t)===-1&&e==="x"}function Rw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Nw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),xe(n&&n.onComplete,[t],e)}function hU(t){const e=t.chart,n=e.options.animation;xe(n&&n.onProgress,[t],e)}function $b(t){return Km()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const qu={},Dw=t=>{const e=$b(t);return Object.values(qu).filter(n=>n.canvas===e).pop()};function dU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function fU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var vi;let Vh=(vi=class{static register(...e){In.add(...e),Mw()}static unregister(...e){In.remove(...e),Mw()}constructor(e,n){const i=this.config=new oU(n),r=$b(e),s=Dw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||R4(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=mF(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Q4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=VF(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],qu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zn.listen(this,"complete",Nw),zn.listen(this,"progress",hU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Te(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return In}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nw(this.canvas,this.ctx),this}stop(){return zn.stop(this),this}resize(e,n){zn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,sw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),xe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};me(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Vp(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),me(s,o=>{const a=o.options,l=a.id,u=Vp(l,a),h=le(a.type,o.dtype);(a.position===void 0||Pw(a.position,u)!==Pw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=In.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),me(r,(o,a)=>{o||delete i[a]}),me(i,o=>{Oi.configure(this,o,o.options),Oi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Rw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Lp(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=In.getController(a),{datasetElementType:u,dataElementType:h}=Fe.datasets[a];Object.assign(l,{dataElementType:In.getElement(h),datasetElementType:u&&In.getElement(u)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){me(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||me(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Rw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){me(this.scales,e=>{Oi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!q0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;dU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!q0(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Oi.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],me(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,er(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zn.has(this)?this.attached&&!zn.running(this)&&zn.start(this):(this.draw(),Nw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=Wj(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&zm(n,r),e.controller.draw(),r&&$m(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return il(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=c4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=es(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Bc(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),zn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),nw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete qu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};me(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){me(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},me(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Fc(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=TF(e),u=fU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,xe(s.onHover,[e,a,this],this),l&&xe(s.onClick,[e,a,this],this));const h=!Fc(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},te(vi,"defaults",Fe),te(vi,"instances",qu),te(vi,"overrides",qr),te(vi,"registry",In),te(vi,"version",uU),te(vi,"getChart",Dw),vi);function Mw(){return me(Vh.instances,t=>t._plugins.invalidate())}function Wb(t,e,n=e){t.lineCap=le(n.borderCapStyle,e.borderCapStyle),t.setLineDash(le(n.borderDash,e.borderDash)),t.lineDashOffset=le(n.borderDashOffset,e.borderDashOffset),t.lineJoin=le(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=le(n.borderWidth,e.borderWidth),t.strokeStyle=le(n.borderColor,e.borderColor)}function pU(t,e,n){t.lineTo(n.x,n.y)}function gU(t){return t.stepped?XF:t.tension||t.cubicInterpolationMode==="monotone"?JF:pU}function Hb(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:u<l&&!h?i+u-l:u-l}}function mU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:u}=Hb(r,n,i),h=gU(s);let{move:d=!0,reverse:f}=i||{},m,y,v;for(m=0;m<=u;++m)y=r[(a+(f?u-m:m))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,v,y,f,s.stepped),v=y);return l&&(y=r[(a+(f?u:0))%o],h(t,v,y,f,s.stepped)),!!l}function yU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Hb(r,n,i),{move:l=!0,reverse:u}=i||{};let h=0,d=0,f,m,y,v,I,w;const T=R=>(o+(u?a-R:R))%s,b=()=>{v!==I&&(t.lineTo(h,I),t.lineTo(h,v),t.lineTo(h,w))};for(l&&(m=r[T(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=r[T(f)],m.skip)continue;const R=m.x,D=m.y,L=R|0;L===y?(D<v?v=D:D>I&&(I=D),h=(d*h+R)/++d):(b(),t.lineTo(R,D),y=L,d=0,v=I=D),w=D}b()}function Fp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?yU:mU}function _U(t){return t.stepped?Rj:t.tension||t.cubicInterpolationMode==="monotone"?Nj:Er}function vU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Wb(t,e.options),t.stroke(r)}function wU(t,e,n,i){const{segments:r,options:s}=e,o=Fp(e);for(const a of r)Wb(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const EU=typeof Path2D=="function";function TU(t,e,n,i){EU&&!e.options.segment?vU(t,e,n,i):wU(t,e,n,i)}class ta extends tr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Ij(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Uj(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=Vj(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=_U(i);let u,h;for(u=0,h=o.length;u<h;++u){const{start:d,end:f}=o[u],m=s[d],y=s[f];if(m===y){a.push(m);continue}const v=Math.abs((r-m[n])/(y[n]-m[n])),I=l(m,y,v,i.stepped);I[n]=e[n],a.push(I)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Fp(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Fp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),TU(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}te(ta,"id","line"),te(ta,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),te(ta,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),te(ta,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ow(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Ku extends tr{constructor(n){super();te(this,"parsed");te(this,"skip");te(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Ow(this,n,"x",i)}inYRange(n,i){return Ow(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!il(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Mp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}te(Ku,"id","point"),te(Ku,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),te(Ku,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Lw=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},IU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Vw extends tr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=xe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Rt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Lw(i,s);let u,h;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((y,v)=>{const I=i+n/2+s.measureText(y.text).width;(v===0||u[u.length-1]+I+2*a>o)&&(d+=h,u[u.length-(v>0?0:1)]=0,m+=h,f++),l[v]={left:0,top:m,row:f,width:I,height:r},u[u.length-1]+=I+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,y=0,v=0;return this.legendItems.forEach((I,w)=>{const{itemWidth:T,itemHeight:b}=SU(i,n,s,I,r);w>0&&m+b+2*a>h&&(d+=f+a,u.push({width:f,height:m}),y+=f+a,v++,f=m=0),l[w]={left:y,top:m,col:v,width:T,height:b},f=Math.max(f,T),m+=b+a}),d+=f,u.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Ms(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ft(i,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Ft(i,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=Ft(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Ft(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;zm(e,this),this._draw(),$m(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Fe.color,l=Ms(e.rtl,this.left,this.width),u=Rt(o.font),{padding:h}=o,d=u.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:y,boxHeight:v,itemHeight:I}=Lw(o,d),w=function(L,x,_){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;r.save();const k=le(_.lineWidth,1);if(r.fillStyle=le(_.fillStyle,a),r.lineCap=le(_.lineCap,"butt"),r.lineDashOffset=le(_.lineDashOffset,0),r.lineJoin=le(_.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=le(_.strokeStyle,a),r.setLineDash(le(_.lineDash,[])),o.usePointStyle){const A={radius:v*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:k},P=l.xPlus(L,y/2),N=x+f;Ib(r,A,P,N,o.pointStyleWidth&&y)}else{const A=x+Math.max((d-v)/2,0),P=l.leftForLtr(L,y),N=Ta(_.borderRadius);r.beginPath(),Object.values(N).some(C=>C!==0)?Op(r,{x:P,y:A,w:y,h:v,radius:N}):r.rect(P,A,y,v),r.fill(),k!==0&&r.stroke()}r.restore()},T=function(L,x,_){$c(r,_.text,L,x+I/2,u,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?m={x:Ft(s,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:Ft(s,this.top+R+h,this.bottom-n[0].height),line:0},Pb(this.ctx,e.textDirection);const D=I+h;this.legendItems.forEach((L,x)=>{r.strokeStyle=L.fontColor,r.fillStyle=L.fontColor;const _=r.measureText(L.text).width,k=l.textAlign(L.textAlign||(L.textAlign=o.textAlign)),A=y+f+_;let P=m.x,N=m.y;l.setWidth(this.width),b?x>0&&P+A+h>this.right&&(N=m.y+=D,m.line++,P=m.x=Ft(s,this.left+h,this.right-i[m.line])):x>0&&N+D>this.bottom&&(P=m.x=P+n[m.line].width+h,m.line++,N=m.y=Ft(s,this.top+R+h,this.bottom-n[m.line].height));const C=l.x(P);if(w(C,N,L),P=FF(k,P+y+f,b?P+A:this.right,e.rtl),T(l.x(P),N,L),b)m.x+=A+h;else if(typeof L.text!="string"){const ee=u.lineHeight;m.y+=qb(L,ee)+h}else m.y+=D}),Rb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Rt(n.font),r=yn(n.padding);if(!n.display)return;const s=Ms(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,u=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=Ft(e.align,d,this.right-f);else{const y=this.columnSizes.reduce((v,I)=>Math.max(v,I.height),0);h=u+Ft(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=Ft(a,d,d+f);o.textAlign=s.textAlign(wb(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,$c(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Rt(e.font),i=yn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Zo(e,this.left,this.right)&&Zo(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Zo(e,r.left,r.left+r.width)&&Zo(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!kU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=IU(r,i);r&&!s&&xe(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&xe(n.onHover,[e,i,this],this)}else i&&xe(n.onClick,[e,i,this],this)}}function SU(t,e,n,i,r){const s=xU(i,t,e,n),o=bU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function xU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function bU(t,e,n){let i=t;return typeof e.text!="string"&&(i=qb(e,n)),i}function qb(t,e){const n=t.text?t.text.length:0;return e*n}function kU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var CU={id:"legend",_element:Vw,start(t,e,n){const i=t.legend=new Vw({ctx:t.ctx,options:n,chart:t});Oi.configure(t,i,n),Oi.addBox(t,i)},stop(t){Oi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Oi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=yn(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const na={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Np(e,u);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function En(t,e){return e&&(it(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function $n(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function AU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Fw(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Rt(e.bodyFont),u=Rt(e.titleFont),h=Rt(e.footerFont),d=s.length,f=r.length,m=i.length,y=yn(e.padding);let v=y.height,I=0,w=i.reduce((R,D)=>R+D.before.length+D.lines.length+D.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),w){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=m*R+(w-m)*l.lineHeight+(w-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let T=0;const b=function(R){I=Math.max(I,n.measureText(R).width+T)};return n.save(),n.font=u.string,me(t.title,b),n.font=l.string,me(t.beforeBody.concat(t.afterBody),b),T=e.displayColors?o+2+e.boxPadding:0,me(i,R=>{me(R.before,b),me(R.lines,b),me(R.after,b)}),T=0,n.font=h.string,me(t.footer,b),n.restore(),I+=y.width,{width:I,height:v}}function PU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function RU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function NU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return i==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),RU(u,t,e,n)&&(u="center"),u}function jw(t,e,n){const i=n.yAlign||e.yAlign||PU(t,n);return{xAlign:n.xAlign||e.xAlign||NU(t,e,n,i),yAlign:i}}function DU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function MU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function Uw(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=Ta(o);let y=DU(e,a);const v=MU(e,l,u);return l==="center"?a==="left"?y+=u:a==="right"&&(y-=u):a==="left"?y-=Math.max(h,f)+r:a==="right"&&(y+=Math.max(d,m)+r),{x:Yt(y,0,i.width-e.width),y:Yt(v,0,i.height-e.height)}}function Eu(t,e,n){const i=yn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Bw(t){return En([],$n(t))}function OU(t,e,n){return es(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function zw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Kb={beforeTitle:Un,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Un,beforeBody:Un,beforeLabel:Un,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Te(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Un,afterBody:Un,beforeFooter:Un,footer:Un,afterFooter:Un};function bt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?Kb[e].call(n,i):r}class jp extends tr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new Db(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=OU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=bt(i,"beforeTitle",this,e),s=bt(i,"title",this,e),o=bt(i,"afterTitle",this,e);let a=[];return a=En(a,$n(r)),a=En(a,$n(s)),a=En(a,$n(o)),a}getBeforeBody(e,n){return Bw(bt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return me(e,s=>{const o={before:[],lines:[],after:[]},a=zw(i,s);En(o.before,$n(bt(a,"beforeLabel",this,s))),En(o.lines,bt(a,"label",this,s)),En(o.after,$n(bt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return Bw(bt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=bt(i,"beforeFooter",this,e),s=bt(i,"footer",this,e),o=bt(i,"afterFooter",this,e);let a=[];return a=En(a,$n(r)),a=En(a,$n(s)),a=En(a,$n(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(AU(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),me(a,h=>{const d=zw(e.callbacks,h);r.push(bt(d,"labelColor",this,h)),s.push(bt(d,"labelPointStyle",this,h)),o.push(bt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=na[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Fw(this,i),u=Object.assign({},a,l),h=jw(this.chart,i,u),d=Uw(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=Ta(a),{x:f,y:m}=e,{width:y,height:v}=n;let I,w,T,b,R,D;return s==="center"?(R=m+v/2,r==="left"?(I=f,w=I-o,b=R+o,D=R-o):(I=f+y,w=I+o,b=R-o,D=R+o),T=I):(r==="left"?w=f+Math.max(l,h)+o:r==="right"?w=f+y-Math.max(u,d)-o:w=this.caretX,s==="top"?(b=m,R=b-o,I=w-o,T=w+o):(b=m+v,R=b+o,I=w+o,T=w-o),D=b),{x1:I,x2:w,x3:T,y1:b,y2:R,y3:D}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const u=Ms(i.rtl,this.x,this.width);for(e.x=Eu(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",o=Rt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=Rt(s.bodyFont),d=Eu(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const v={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},I=r.leftForLtr(f,u)+u/2,w=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Mp(e,v,I,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Mp(e,v,I,w)}else{e.lineWidth=pe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=r.leftForLtr(f,u),I=r.leftForLtr(r.xPlus(f,1),u-2),w=Ta(o.borderRadius);Object.values(w).some(T=>T!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Op(e,{x:v,y,w:u,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Op(e,{x:I,y:y+1,w:u-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,u,l),e.strokeRect(v,y,u,l),e.fillStyle=o.backgroundColor,e.fillRect(I,y+1,u-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=i,d=Rt(i.bodyFont);let f=d.lineHeight,m=0;const y=Ms(i.rtl,this.x,this.width),v=function(_){n.fillText(_,y.x(e.x+m),e.y+f/2),e.y+=f+s},I=y.textAlign(o);let w,T,b,R,D,L,x;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Eu(this,I,i),n.fillStyle=i.bodyColor,me(this.beforeBody,v),m=a&&I!=="right"?o==="center"?u/2+h:u+2+h:0,R=0,L=r.length;R<L;++R){for(w=r[R],T=this.labelTextColors[R],n.fillStyle=T,me(w.before,v),b=w.lines,a&&b.length&&(this._drawColorBox(n,e,R,y,i),f=Math.max(d.lineHeight,l)),D=0,x=b.length;D<x;++D)v(b[D]),f=d.lineHeight;me(w.after,v)}m=0,f=d.lineHeight,me(this.afterBody,v),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Ms(i.rtl,this.x,this.width);for(e.x=Eu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Rt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:y}=Ta(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+u,l+h-y),n.quadraticCurveTo(a+u,l+h,a+u-y,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=na[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Fw(this,e),l=Object.assign({},o,this._size),u=jw(n,e,l),h=Uw(e,l,u,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=yn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),Pb(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),Rb(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!Fc(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Fc(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=na[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}te(jp,"positioners",na);var LU={id:"tooltip",_element:jp,positioners:na,afterInit(t,e,n){n&&(t.tooltip=new jp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Kb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const VU=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function FU(t,e,n,i){const r=t.indexOf(e);if(r===-1)return VU(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const jU=(t,e)=>t===null?null:Yt(Math.round(t),0,e);function $w(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Up extends ho{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Te(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:FU(i,e,le(n,e),this._addedLabels),jU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return $w.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}te(Up,"id","category"),te(Up,"defaults",{ticks:{callback:$w}});function UU(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,y=h-1,{min:v,max:I}=e,w=!Te(o),T=!Te(a),b=!Te(u),R=(I-v)/(d+1);let D=G0((I-v)/y/m)*m,L,x,_,k;if(D<1e-14&&!w&&!T)return[{value:v},{value:I}];k=Math.ceil(I/D)-Math.floor(v/D),k>y&&(D=G0(k*D/y/m)*m),Te(l)||(L=Math.pow(10,l),D=Math.ceil(D*L)/L),r==="ticks"?(x=Math.floor(v/D)*D,_=Math.ceil(I/D)*D):(x=v,_=I),w&&T&&s&&kF((a-o)/s,D/1e3)?(k=Math.round(Math.min((a-o)/D,h)),D=(a-o)/k,x=o,_=a):b?(x=w?o:x,_=T?a:_,k=u-1,D=(_-x)/k):(k=(_-x)/D,va(k,Math.round(k),D/1e3)?k=Math.round(k):k=Math.ceil(k));const A=Math.max(Q0(D),Q0(x));L=Math.pow(10,Te(l)?A:l),x=Math.round(x*L)/L,_=Math.round(_*L)/L;let P=0;for(w&&(f&&x!==o?(n.push({value:o}),x<o&&P++,va(Math.round((x+P*D)*L)/L,o,Ww(o,R,t))&&P++):x<o&&P++);P<k;++P){const N=Math.round((x+P*D)*L)/L;if(T&&N>a)break;n.push({value:N})}return T&&f&&_!==a?n.length&&va(n[n.length-1].value,a,Ww(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!T||_===a)&&n.push({value:_}),n}function Ww(t,e,{horizontal:n,minRotation:i}){const r=kr(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class BU extends ho{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Te(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Zs(r),u=Zs(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=UU(r,s);return e.bounds==="ticks"&&CF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Eb(e,this.chart.options.locale,this.options.ticks.format)}}class Bp extends BU{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=nn(e)?e:0,this.max=nn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=kr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}te(Bp,"id","linear"),te(Bp,"defaults",{ticks:{callback:Tb.formatters.numeric}});const Fh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},At=Object.keys(Fh);function Hw(t,e){return t-e}function qw(t,e){if(Te(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),nn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(nl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Kw(t,e,n,i){const r=At.length;for(let s=At.indexOf(t);s<r-1;++s){const o=Fh[At[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return At[s]}return At[r-1]}function zU(t,e,n,i,r){for(let s=At.length-1;s>=At.indexOf(n);s--){const o=At[s];if(Fh[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return At[n?At.indexOf(n):0]}function $U(t){for(let e=At.indexOf(t)+1,n=At.length;e<n;++e)if(Fh[At[e]].common)return At[e]}function Gw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Um(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function WU(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Qw(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:WU(t,i,r,n)}class qc extends ho{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new s4._date(e.adapters.date);r.init(n),_a(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:qw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=nn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=nn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=MF(r,s,o);return this._unit=n.unit||(i.autoSkip?Kw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):zU(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:$U(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Qw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Yt(n,0,o),i=Yt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Kw(s.minUnit,n,i,this._getLabelCapacity(n)),a=le(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=nl(l)||l===!0,h={};let d=n,f,m;if(u&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,u?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)Gw(h,f,y);return(f===i||r.bounds==="ticks"||m===1)&&Gw(h,f,y),Object.keys(h).sort(Hw).map(v=>+v)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return xe(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=i[n],m=u&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=kr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Qw(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(qw(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return LF(e.sort(Hw))}}te(qc,"id","time"),te(qc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Tu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Cr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Cr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class Yw extends qc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Tu(n,this.min),this._tableRange=Tu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=i&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],u=r[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Tu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Tu(this._table,i*this._tableRange+this._minPos,!0)}}te(Yw,"id","timeseries"),te(Yw,"defaults",qc.defaults);Vh.register(ta,Ku,Bp,Up,LU,CU);const Gb="label";function Xw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function HU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Qb(t,e){t.labels=e}function Yb(t,e,n=Gb){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function qU(t,e=Gb){const n={labels:[],datasets:[]};return Qb(n,t.labels),Yb(n,t.datasets,e),n}function KU(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:d,...f}=t,m=O.useRef(null),y=O.useRef(null),v=()=>{m.current&&(y.current=new Vh(m.current,{type:o,data:qU(a,s),options:l&&{...l},plugins:u}),Xw(e,y.current))},I=()=>{Xw(e,null),y.current&&(y.current.destroy(),y.current=null)};return O.useEffect(()=>{!r&&y.current&&l&&HU(y.current,l)},[r,l]),O.useEffect(()=>{!r&&y.current&&Qb(y.current.config.data,a.labels)},[r,a.labels]),O.useEffect(()=>{!r&&y.current&&a.datasets&&Yb(y.current.config.data,a.datasets,s)},[r,a.datasets]),O.useEffect(()=>{y.current&&(r?(I(),setTimeout(v)):y.current.update(d))},[r,l,a.labels,a.datasets,d]),O.useEffect(()=>{y.current&&(I(),setTimeout(v))},[o]),O.useEffect(()=>(v(),()=>I()),[]),E.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const GU=O.forwardRef(KU);function QU(t,e){return Vh.register(e),O.forwardRef((n,i)=>E.jsx(GU,{...n,ref:i,type:t}))}const Ym=QU("line",Wu);function YU({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return E.jsxs("div",{className:"chart card",children:[E.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),E.jsx("div",{className:"chart-inner",children:E.jsx(Ym,{data:r,options:s})})]})}function XU({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.bench}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.squat}),r=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.deadlift}),s={labels:e,datasets:[{label:"Bench (7-day WMA)",data:n,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Squat (7-day WMA)",data:i,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:"Deadlift (7-day WMA)",data:r,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:a=>{var l,u;return`${a.dataset.label}: ${(u=(l=a.parsed.y)==null?void 0:l.toFixed)==null?void 0:u.call(l,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return E.jsxs("div",{className:"chart card",children:[E.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),E.jsx("div",{className:"chart-inner",children:E.jsx(Ym,{data:s,options:o})})]})}function JU({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.calories}),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (WMA)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return E.jsxs("div",{className:"chart card",children:[E.jsx("div",{className:"card-title",children:"Weight + Strength vs Calories (Smoothed)"}),E.jsx("div",{className:"chart-inner",children:E.jsx(Ym,{data:s,options:o})})]})}function mr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function ZU(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function e5(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function t5({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"Weekly Analysis"}),E.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),E.jsx("div",{className:"table-wrap",style:{marginTop:12},children:E.jsxs("table",{className:"table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Week #"}),E.jsx("th",{children:"Avg Calories"}),E.jsx("th",{children:"Weight Change (kg)"}),E.jsx("th",{children:"Calculated TDEE"}),E.jsx("th",{children:"TDEE "}),E.jsx("th",{children:"Adaptation %"}),E.jsx("th",{children:"LBM (kg)"}),E.jsx("th",{children:"Loss Rate vs LBM %"}),E.jsx("th",{children:"Status"})]})}),E.jsx("tbody",{children:t.weeks.map(n=>E.jsxs("tr",{children:[E.jsx("td",{children:n.week}),E.jsx("td",{children:mr(n.avgCalories,0)}),E.jsx("td",{children:mr(n.weightChange,2)}),E.jsx("td",{children:mr(n.tdee,0)}),E.jsx("td",{children:mr(n.tdeeChangeFromBaseline,0)}),E.jsx("td",{className:ZU(n.adaptationPct),children:mr(n.adaptationPct,1)}),E.jsx("td",{children:mr(n.lbm,1)}),E.jsx("td",{children:mr(n.lossRatePct,2)}),E.jsx("td",{className:e5(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),E.jsxs("div",{className:"notice info",style:{marginTop:12},children:[E.jsx("div",{children:E.jsx("b",{children:"How to read this:"})}),E.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[E.jsxs("div",{children:[E.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),E.jsxs("div",{children:[E.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),E.jsxs("div",{children:[E.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",E.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function _i(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function n5(){const{user:t}=di(),{profile:e}=Mm(),[n,i]=O.useState([]),[r,s]=O.useState(null);O.useEffect(()=>{if(s(null),!t)return;const m=Om(t.uid,y=>i(y),y=>s((y==null?void 0:y.message)||"Failed to load entries."));return()=>m()},[t]);const o=O.useMemo(()=>qV(),[]),a=O.useMemo(()=>KV(60),[]),l=t?e:o,u=t?n:a,h=O.useMemo(()=>cb(u,l||{}),[u,l]),d=O.useMemo(()=>HV(h),[h]),f=O.useMemo(()=>{var _;if(!h.length)return null;const m=h[0],y=h[h.length-1],v=(_=y==null?void 0:y.wma)==null?void 0:_.weight,I=Number.isFinite(m.weight)&&Number.isFinite(y.weight)?y.weight-m.weight:null,w=y.calories,T=m.calories,b=Number.isFinite(w)&&Number.isFinite(T)?w-T:null,R=y.avgStrength,D=m.avgStrength,L=Number.isFinite(R)&&Number.isFinite(D)?R-D:null;let x=null;for(let k=h.length-1;k>=0;k--)if(Number.isFinite(h[k].bfPct)){x=h[k].bfPct;break}return{weightTrend:v,totalLost:I,calNow:w,calDelta:b,strengthNow:R,strengthDelta:L,bf:x}},[h]);return E.jsxs(E.Fragment,{children:[!t&&E.jsxs("div",{className:"notice info",style:{marginTop:14},children:[E.jsx("b",{children:"Demo mode:"})," This dashboard is showing 60 days of realistic sample data. Log in to start tracking your own."]}),t&&(!(l!=null&&l.sex)||!(l!=null&&l.height))&&E.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",E.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),r&&E.jsx("div",{className:"notice error",style:{marginTop:14},children:r}),E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"Summary"}),E.jsx("div",{className:"muted",children:"Trend over noise. Weekly reality checks. No guesswork."})]}),!f||!h.length?E.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",E.jsx("b",{children:"Entry"}),"."]}):E.jsxs("div",{className:"grid",style:{marginTop:12},children:[E.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[E.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),E.jsxs("div",{className:"big",children:[_i(f.weightTrend,1)," kg"]}),E.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),E.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[E.jsx("div",{className:"card-title",children:"Total weight change"}),E.jsxs("div",{className:"big",children:[_i(f.totalLost,1)," kg"]}),E.jsx("div",{className:"small",children:"Negative = loss"})]}),E.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[E.jsx("div",{className:"card-title",children:"Calories now / change from start"}),E.jsxs("div",{className:"big",children:[_i(f.calNow,0)," kcal"]}),E.jsxs("div",{className:"small",children:[" ",_i(f.calDelta,0)," kcal"]})]}),E.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[E.jsx("div",{className:"card-title",children:"Average strength now"}),E.jsxs("div",{className:"big",children:[_i(f.strengthNow,1)," kg"]}),E.jsxs("div",{className:"small",children:[" ",_i(f.strengthDelta,1)," kg"]})]}),E.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[E.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),E.jsx("div",{className:"big",children:f.bf===null?"":`${_i(f.bf,1)}%`}),E.jsx("div",{className:"small",children:"Most recent measurement day"})]}),E.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[E.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),E.jsx("div",{className:"big",children:Number.isFinite(d.baselineTdee)?`${_i(d.baselineTdee,0)} kcal`:""}),E.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),h.length>0&&E.jsxs("div",{className:"grid",style:{marginTop:14},children:[E.jsx("div",{style:{gridColumn:"span 12"},children:E.jsx(YU,{derived:h})}),E.jsx("div",{style:{gridColumn:"span 12"},children:E.jsx(XU,{derived:h})}),E.jsx("div",{style:{gridColumn:"span 12"},children:E.jsx(JU,{derived:h})})]}),h.length>=14&&E.jsx(t5,{weekly:d})]})}function i5(){const{user:t,login:e,authError:n,clearAuthError:i}=di(),r=cl(),s=Qr(),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,m]=O.useState(null);O.useEffect(()=>{i==null||i()},[]),O.useEffect(()=>{t&&r("/dashboard")},[t]);async function y(v){var I;v.preventDefault(),m(null),d(!0);try{await e(o.trim(),l);const w=((I=s.state)==null?void 0:I.from)||"/dashboard";r(w)}catch{}finally{d(!1)}}return E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"Log in"}),E.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&E.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&E.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),E.jsxs("form",{onSubmit:y,style:{marginTop:12},children:[E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Email"}),E.jsx("input",{value:o,onChange:v=>a(v.target.value),type:"email",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Password"}),E.jsx("input",{value:l,onChange:v=>u(v.target.value),type:"password",required:!0})]})]}),E.jsxs("div",{className:"footer-actions",children:[E.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),E.jsx($a,{className:"btn",to:"/reset-password",children:"Forgot password"}),E.jsx($a,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function r5(){const{signup:t,authError:e,clearAuthError:n}=di(),i=cl(),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,m]=O.useState(null);O.useEffect(()=>{n==null||n()},[]);async function y(v){if(v.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"Create account"}),E.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&E.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&E.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),E.jsxs("form",{onSubmit:y,style:{marginTop:12},children:[E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Email"}),E.jsx("input",{value:r,onChange:v=>s(v.target.value),type:"email",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Password"}),E.jsx("input",{value:o,onChange:v=>a(v.target.value),type:"password",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Confirm password"}),E.jsx("input",{value:l,onChange:v=>u(v.target.value),type:"password",required:!0})]})]}),E.jsxs("div",{className:"footer-actions",children:[E.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),E.jsx($a,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function s5(){const{resetPassword:t,authError:e,clearAuthError:n}=di(),[i,r]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(!1);O.useEffect(()=>{n==null||n()},[]);async function u(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"Reset password"}),E.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&E.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&E.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),E.jsxs("form",{onSubmit:u,style:{marginTop:12},children:[E.jsx("div",{className:"row",children:E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Email"}),E.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),E.jsxs("div",{className:"footer-actions",children:[E.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),E.jsx($a,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function o5(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function a5(t,e){const n=e.map(o=>o.map(o5).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function l5({entries:t,derived:e}){var s,o,a,l,u,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchKg","squatKg","deadliftKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.bench,d.squat,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(u=f==null?void 0:f.wma)==null?void 0:u.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}function u5(){const{user:t}=di(),{profile:e,updateProfile:n,loading:i,profileError:r}=Mm(),[s,o]=O.useState(e.sex||""),[a,l]=O.useState(e.height||""),[u,h]=O.useState(!!e.triplemeasurements),[d,f]=O.useState(!1),[m,y]=O.useState(null),[v,I]=O.useState(""),[w,T]=O.useState(""),[b,R]=O.useState(""),[D,L]=O.useState([]),[x,_]=O.useState(!1);qp.useEffect(()=>{o(e.sex||""),l(e.height||""),h(!!e.triplemeasurements)},[e.sex,e.height,e.triplemeasurements]);async function k(C){C.preventDefault(),y(null),f(!0);try{const ee=Number(a);if(!s)throw new Error("Sex is required.");if(!Number.isFinite(ee)||ee<=0)throw new Error("Height must be a positive number (cm).");await n({sex:s,height:ee,triplemeasurements:!!u}),y({type:"success",text:"Profile saved."})}catch(ee){y({type:"error",text:(ee==null?void 0:ee.message)||"Failed to save profile."})}finally{f(!1)}}async function A(C){if(C.preventDefault(),y(null),!!(t!=null&&t.email)){if(w!==b){y({type:"error",text:"New passwords do not match."});return}f(!0);try{const ee=Xr.credential(t.email,v);await VN(t,ee),await BN(t,w),I(""),T(""),R(""),y({type:"success",text:"Password updated."})}catch(ee){y({type:"error",text:(ee==null?void 0:ee.message)||"Failed to update password."})}finally{f(!1)}}}async function P(){if(!x)return new Promise((C,ee)=>{const ne=Om(t.uid,ge=>{L(ge),_(!0),ne(),C()},ge=>{ee(ge)})})}async function N(){y(null),f(!0);try{await P();const C=cb(D,{...e,sex:s,height:Number(a),triplemeasurements:!!u}),ee=l5({entries:D,derived:C}),ne=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;a5(ne,ee),y({type:"success",text:"CSV downloaded."})}catch(C){y({type:"error",text:(C==null?void 0:C.message)||"Failed to export CSV."})}finally{f(!1)}}return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"Profile & Settings"}),E.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),r&&E.jsx("div",{className:"notice error",style:{marginTop:12},children:r}),m&&E.jsx("div",{className:`notice ${m.type==="error"?"error":"success"}`,style:{marginTop:12},children:m.text}),E.jsxs("form",{onSubmit:k,style:{marginTop:12},children:[E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Sex (required for Navy BF%)"}),E.jsxs("select",{value:s,onChange:C=>o(C.target.value),required:!0,children:[E.jsx("option",{value:"",children:"Select"}),E.jsx("option",{value:"male",children:"Male"}),E.jsx("option",{value:"female",children:"Female"})]})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Height (cm)"}),E.jsx("input",{inputMode:"numeric",value:a,onChange:C=>l(C.target.value),placeholder:"e.g. 175",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Triple measurements mode"}),E.jsxs("select",{value:u?"1":"0",onChange:C=>h(C.target.value==="1"),children:[E.jsx("option",{value:"0",children:"Off (single value per site)"}),E.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),E.jsxs("div",{className:"footer-actions",children:[E.jsx("button",{className:"btn primary",disabled:d||i,children:d?"Saving":"Save profile"}),E.jsx("button",{className:"btn",type:"button",onClick:N,disabled:d,children:"Export CSV"})]})]})]}),E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"Change Password"}),E.jsx("div",{className:"muted",children:"Re-auth required."})]}),E.jsxs("form",{onSubmit:A,style:{marginTop:12},children:[E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Current password"}),E.jsx("input",{type:"password",value:v,onChange:C=>I(C.target.value),required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"New password"}),E.jsx("input",{type:"password",value:w,onChange:C=>T(C.target.value),required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Confirm new password"}),E.jsx("input",{type:"password",value:b,onChange:C=>R(C.target.value),required:!0})]})]}),E.jsx("div",{className:"footer-actions",children:E.jsx("button",{className:"btn primary",disabled:d,children:"Update password"})})]})]})]})}function lf(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function c5({tripleEnabled:t,onSubmit:e,busy:n}){const[i,r]=O.useState(OV()),[s,o]=O.useState(""),[a,l]=O.useState(""),[u,h]=O.useState(""),[d,f]=O.useState(""),[m,y]=O.useState(""),[v,I]=O.useState(""),[w,T]=O.useState(""),[b,R]=O.useState(""),[D,L]=O.useState(""),[x,_]=O.useState(""),[k,A]=O.useState(""),[P,N]=O.useState(""),[C,ee]=O.useState(""),[ne,ge]=O.useState(""),[we,z]=O.useState(""),[H,G]=O.useState(""),[ce,re]=O.useState(""),[fe,ze]=O.useState(""),[$e,We]=O.useState(""),rn=O.useMemo(()=>{const Q=ub({protein:lf(a)||0,carbs:lf(u)||0,fats:lf(d)||0});return Number.isFinite(Q)?Math.round(Q):0},[a,u,d]),Sl=()=>i&&Number.isFinite(Number(s))&&Number.isFinite(Number(a))&&Number.isFinite(Number(u))&&Number.isFinite(Number(d))&&Number.isFinite(Number(m))&&Number.isFinite(Number(v))&&Number.isFinite(Number(w));async function jh(Q){if(Q.preventDefault(),!Sl())return;const Qe={dateIso:i,weight:Number(s),protein:Number(a),carbs:Number(u),fats:Number(d),bench:Number(m),squat:Number(v),deadlift:Number(w)};t?(Qe.neck1=k===""?null:Number(k),Qe.neck2=P===""?null:Number(P),Qe.neck3=C===""?null:Number(C),Qe.waist1=ne===""?null:Number(ne),Qe.waist2=we===""?null:Number(we),Qe.waist3=H===""?null:Number(H),Qe.hip1=ce===""?null:Number(ce),Qe.hip2=fe===""?null:Number(fe),Qe.hip3=$e===""?null:Number($e)):(Qe.neck=b===""?null:Number(b),Qe.waist=D===""?null:Number(D),Qe.hip=x===""?null:Number(x)),await e(Qe)}return E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"Daily Entry"}),E.jsxs("div",{className:"muted",children:["Calories preview: ",E.jsx("b",{children:rn})," kcal"]})]}),E.jsxs("form",{onSubmit:jh,style:{marginTop:12},children:[E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Date"}),E.jsx("input",{type:"date",value:i,onChange:Q=>r(Q.target.value)})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Weight (kg)"}),E.jsx("input",{inputMode:"decimal",value:s,onChange:Q=>o(Q.target.value),placeholder:"e.g. 85.2",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Protein (g)"}),E.jsx("input",{inputMode:"numeric",value:a,onChange:Q=>l(Q.target.value),placeholder:"e.g. 180",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Carbs (g)"}),E.jsx("input",{inputMode:"numeric",value:u,onChange:Q=>h(Q.target.value),placeholder:"e.g. 220",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Fats (g)"}),E.jsx("input",{inputMode:"numeric",value:d,onChange:Q=>f(Q.target.value),placeholder:"e.g. 70",required:!0})]})]}),E.jsx("hr",{className:"sep"}),E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Bench (kg)"}),E.jsx("input",{inputMode:"decimal",value:m,onChange:Q=>y(Q.target.value),placeholder:"e.g. 100",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Squat (kg)"}),E.jsx("input",{inputMode:"decimal",value:v,onChange:Q=>I(Q.target.value),placeholder:"e.g. 140",required:!0})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Deadlift (kg)"}),E.jsx("input",{inputMode:"decimal",value:w,onChange:Q=>T(Q.target.value),placeholder:"e.g. 180",required:!0})]})]}),E.jsx("hr",{className:"sep"}),E.jsxs("div",{className:"notice info",children:[E.jsx("b",{children:"Navy measurements (weekly)"}),E.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",t?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),E.jsx("div",{style:{height:10}}),t?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Neck 1 (cm)"}),E.jsx("input",{inputMode:"decimal",value:k,onChange:Q=>A(Q.target.value)})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Neck 2 (cm)"}),E.jsx("input",{inputMode:"decimal",value:P,onChange:Q=>N(Q.target.value)})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Neck 3 (cm)"}),E.jsx("input",{inputMode:"decimal",value:C,onChange:Q=>ee(Q.target.value)})]})]}),E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Waist 1 (cm)"}),E.jsx("input",{inputMode:"decimal",value:ne,onChange:Q=>ge(Q.target.value)})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Waist 2 (cm)"}),E.jsx("input",{inputMode:"decimal",value:we,onChange:Q=>z(Q.target.value)})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Waist 3 (cm)"}),E.jsx("input",{inputMode:"decimal",value:H,onChange:Q=>G(Q.target.value)})]})]}),E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Hip 1 (cm)"}),E.jsx("input",{inputMode:"decimal",value:ce,onChange:Q=>re(Q.target.value)})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Hip 2 (cm)"}),E.jsx("input",{inputMode:"decimal",value:fe,onChange:Q=>ze(Q.target.value)})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Hip 3 (cm)"}),E.jsx("input",{inputMode:"decimal",value:$e,onChange:Q=>We(Q.target.value)})]})]})]}):E.jsxs("div",{className:"row",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Neck (cm)"}),E.jsx("input",{inputMode:"decimal",value:b,onChange:Q=>R(Q.target.value),placeholder:"optional"})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Waist (cm)"}),E.jsx("input",{inputMode:"decimal",value:D,onChange:Q=>L(Q.target.value),placeholder:"optional"})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Hip (cm)"}),E.jsx("input",{inputMode:"decimal",value:x,onChange:Q=>_(Q.target.value),placeholder:"optional"})]})]}),E.jsx("div",{className:"footer-actions",children:E.jsx("button",{className:"btn primary",type:"submit",disabled:!Sl()||n,children:n?"Saving":"Add / Update Entry"})})]})]})}function h5(t){return t==null?"":String(t)}function d5(t){if(t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function f5({userId:t,entries:e,tripleEnabled:n}){const[i,r]=O.useState(!1),[s,o]=O.useState(null),a=O.useMemo(()=>{const h=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"bench",label:"Bench"},{key:"squat",label:"Squat"},{key:"deadlift",label:"Deadlift"}];return n?h.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"},{key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"}):h.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"},{key:"hip",label:"Hip"}),h.push({key:"_actions",label:"Actions",readOnly:!0}),h},[n]);async function l(h,d,f){if(!(d==="dateIso"||d==="_actions")){o(null),r(!0);try{await FV(t,h,{[d]:d5(f)}),o({type:"success",text:"Saved."})}catch(m){o({type:"error",text:(m==null?void 0:m.message)||"Failed to save."})}finally{r(!1)}}}async function u(h){if(confirm(`Delete entry for ${h}?`)){o(null),r(!0);try{await jV(t,h),o({type:"success",text:"Deleted."})}catch(d){o({type:"error",text:(d==null?void 0:d.message)||"Failed to delete."})}finally{r(!1)}}}return E.jsxs("div",{className:"panel",children:[E.jsxs("div",{className:"panel-header",children:[E.jsx("h2",{children:"All Entries"}),E.jsxs("div",{className:"muted",children:["Inline edit  blur to save. ",i?"Saving":""]})]}),s&&E.jsx("div",{className:`notice ${s.type==="error"?"error":"success"}`,style:{marginTop:12},children:s.text}),E.jsx("div",{className:"table-wrap",style:{marginTop:12},children:E.jsxs("table",{className:"table",children:[E.jsx("thead",{children:E.jsx("tr",{children:a.map(h=>E.jsx("th",{children:h.label},h.key))})}),E.jsx("tbody",{children:e.map(h=>E.jsx("tr",{children:a.map(d=>d.key==="_actions"?E.jsx("td",{children:E.jsx("button",{className:"btn danger",onClick:()=>u(h.dateIso),children:"Delete"})},d.key):d.readOnly?E.jsx("td",{children:h[d.key]},d.key):E.jsx("td",{children:E.jsx("input",{defaultValue:h5(h[d.key]),onBlur:f=>l(h.dateIso,d.key,f.target.value),inputMode:"decimal"})},d.key))},h.dateIso))})]})})]})}function p5(){const{user:t}=di(),{profile:e}=Mm(),[n,i]=O.useState([]),[r,s]=O.useState(!1),[o,a]=O.useState(null);O.useEffect(()=>{if(!t)return;const h=Om(t.uid,d=>i(d),d=>a({type:"error",text:(d==null?void 0:d.message)||"Failed to load entries."}));return()=>h()},[t]);const l=O.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]);async function u(h){a(null),s(!0);try{await VV(t.uid,h),a({type:"success",text:"Entry saved."})}catch(d){a({type:"error",text:(d==null?void 0:d.message)||"Failed to save entry."})}finally{s(!1)}}return E.jsxs(E.Fragment,{children:[o&&E.jsx("div",{className:`notice ${o.type==="error"?"error":"success"}`,style:{marginTop:14},children:o.text}),E.jsx(c5,{tripleEnabled:l,onSubmit:u,busy:r}),E.jsx(f5,{userId:t.uid,entries:n,tripleEnabled:l})]})}function g5(){return E.jsxs(E.Fragment,{children:[E.jsx(NV,{}),E.jsx("div",{className:"app-shell",children:E.jsxs(qP,{children:[E.jsx(Bn,{path:"/",element:E.jsx(rp,{to:"/dashboard",replace:!0})}),E.jsx(Bn,{path:"/dashboard",element:E.jsx(n5,{})}),E.jsx(Bn,{path:"/login",element:E.jsx(i5,{})}),E.jsx(Bn,{path:"/signup",element:E.jsx(r5,{})}),E.jsx(Bn,{path:"/reset-password",element:E.jsx(s5,{})}),E.jsx(Bn,{path:"/profile",element:E.jsx(V0,{children:E.jsx(u5,{})})}),E.jsx(Bn,{path:"/entry",element:E.jsx(V0,{children:E.jsx(p5,{})})}),E.jsx(Bn,{path:"*",element:E.jsx(rp,{to:"/dashboard",replace:!0})})]})})]})}uf.createRoot(document.getElementById("root")).render(E.jsx(qp.StrictMode,{children:E.jsx(e1,{basename:"/Body-Recomp-Tracker/",children:E.jsx(RV,{children:E.jsx(DV,{children:E.jsx(g5,{})})})})}));
