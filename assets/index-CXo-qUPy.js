var f1=Object.defineProperty;var p1=(t,e,n)=>e in t?f1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>p1(t,typeof e!="symbol"?e+"":e,n);function g1(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function m1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zb={exports:{}},Wh={},$b={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=Symbol.for("react.element"),y1=Symbol.for("react.portal"),_1=Symbol.for("react.fragment"),v1=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),b1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),x1=Symbol.for("react.forward_ref"),T1=Symbol.for("react.suspense"),I1=Symbol.for("react.memo"),S1=Symbol.for("react.lazy"),L_=Symbol.iterator;function k1(t){return t===null||typeof t!="object"?null:(t=L_&&t[L_]||t["@@iterator"],typeof t=="function"?t:null)}var Wb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hb=Object.assign,qb={};function Uo(t,e,n){this.props=t,this.context=e,this.refs=qb,this.updater=n||Wb}Uo.prototype.isReactComponent={};Uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kb(){}Kb.prototype=Uo.prototype;function kg(t,e,n){this.props=t,this.context=e,this.refs=qb,this.updater=n||Wb}var Cg=kg.prototype=new Kb;Cg.constructor=kg;Hb(Cg,Uo.prototype);Cg.isPureReactComponent=!0;var j_=Array.isArray,Gb=Object.prototype.hasOwnProperty,Ag={current:null},Qb={key:!0,ref:!0,__self:!0,__source:!0};function Yb(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Gb.call(e,i)&&!Qb.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Kl,type:t,key:s,ref:o,props:r,_owner:Ag.current}}function C1(t,e){return{$$typeof:Kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kl}function A1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var F_=/\/+/g;function Yd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A1(""+t.key):e.toString(36)}function yu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kl:case y1:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Yd(o,0):i,j_(r)?(n="",t!=null&&(n=t.replace(F_,"$&/")+"/"),yu(r,e,n,"",function(c){return c})):r!=null&&(Pg(r)&&(r=C1(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(F_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",j_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Yd(s,a);o+=yu(s,e,n,l,r)}else if(l=k1(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Yd(s,a++),o+=yu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dc(t,e,n){if(t==null)return t;var i=[],r=0;return yu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function P1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},_u={transition:null},R1={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:_u,ReactCurrentOwner:Ag};function Xb(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Dc,forEach:function(t,e,n){Dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dc(t,function(){e++}),e},toArray:function(t){return Dc(t,function(e){return e})||[]},only:function(t){if(!Pg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Uo;me.Fragment=_1;me.Profiler=w1;me.PureComponent=kg;me.StrictMode=v1;me.Suspense=T1;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R1;me.act=Xb;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Hb({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ag.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Gb.call(e,l)&&!Qb.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Kl,type:t.type,key:r,ref:s,props:i,_owner:o}};me.createContext=function(t){return t={$$typeof:E1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b1,_context:t},t.Consumer=t};me.createElement=Yb;me.createFactory=function(t){var e=Yb.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:x1,render:t}};me.isValidElement=Pg;me.lazy=function(t){return{$$typeof:S1,_payload:{_status:-1,_result:t},_init:P1}};me.memo=function(t,e){return{$$typeof:I1,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=_u.transition;_u.transition={};try{t()}finally{_u.transition=e}};me.unstable_act=Xb;me.useCallback=function(t,e){return Bt.current.useCallback(t,e)};me.useContext=function(t){return Bt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Bt.current.useEffect(t,e)};me.useId=function(){return Bt.current.useId()};me.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Bt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};me.useRef=function(t){return Bt.current.useRef(t)};me.useState=function(t){return Bt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Bt.current.useTransition()};me.version="18.3.1";$b.exports=me;var D=$b.exports;const Rg=m1(D),N1=g1({__proto__:null,default:Rg},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1=D,M1=Symbol.for("react.element"),O1=Symbol.for("react.fragment"),L1=Object.prototype.hasOwnProperty,j1=D1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F1={key:!0,ref:!0,__self:!0,__source:!0};function Jb(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)L1.call(e,i)&&!F1.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:M1,type:t,key:s,ref:o,props:r,_owner:j1.current}}Wh.Fragment=O1;Wh.jsx=Jb;Wh.jsxs=Jb;zb.exports=Wh;var p=zb.exports,Gf={},Zb={exports:{}},hn={},eE={exports:{}},tE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,G){var X=V.length;V.push(G);e:for(;0<X;){var $=X-1>>>1,L=V[$];if(0<r(L,G))V[$]=G,V[X]=L,X=$;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var G=V[0],X=V.pop();if(X!==G){V[0]=X;e:for(var $=0,L=V.length,q=L>>>1;$<q;){var ne=2*($+1)-1,le=V[ne],re=ne+1,Te=V[re];if(0>r(le,X))re<L&&0>r(Te,le)?(V[$]=Te,V[re]=X,$=re):(V[$]=le,V[ne]=X,$=ne);else if(re<L&&0>r(Te,X))V[$]=Te,V[re]=X,$=re;else break e}}return G}function r(V,G){var X=V.sortIndex-G.sortIndex;return X!==0?X:V.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,_=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(V){for(var G=n(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=V)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function N(V){if(b=!1,k(V),!_)if(n(l)!==null)_=!0,Q(M);else{var G=n(c);G!==null&&j(N,G.startTime-V)}}function M(V,G){_=!1,b&&(b=!1,E(v),v=-1),m=!0;var X=f;try{for(k(G),d=n(l);d!==null&&(!(d.expirationTime>G)||V&&!R());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var L=$(d.expirationTime<=G);G=t.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&i(l),k(G)}else i(l);d=n(l)}if(d!==null)var q=!0;else{var ne=n(c);ne!==null&&j(N,ne.startTime-G),q=!1}return q}finally{d=null,f=X,m=!1}}var O=!1,I=null,v=-1,C=5,P=-1;function R(){return!(t.unstable_now()-P<C)}function S(){if(I!==null){var V=t.unstable_now();P=V;var G=!0;try{G=I(!0,V)}finally{G?T():(O=!1,I=null)}}else O=!1}var T;if(typeof x=="function")T=function(){x(S)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,B=z.port2;z.port1.onmessage=S,T=function(){B.postMessage(null)}}else T=function(){w(S,0)};function Q(V){I=V,O||(O=!0,T())}function j(V,G){v=w(function(){V(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,Q(M))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var X=f;f=G;try{return V()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var X=f;f=V;try{return G()}finally{f=X}},t.unstable_scheduleCallback=function(V,G,X){var $=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?$+X:$):X=$,V){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=X+L,V={id:h++,callback:G,priorityLevel:V,startTime:X,expirationTime:L,sortIndex:-1},X>$?(V.sortIndex=X,e(c,V),n(l)===null&&V===n(c)&&(b?(E(v),v=-1):b=!0,j(N,X-$))):(V.sortIndex=L,e(l,V),_||m||(_=!0,Q(M))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var G=f;return function(){var X=f;f=G;try{return V.apply(this,arguments)}finally{f=X}}}})(tE);eE.exports=tE;var V1=eE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=D,un=V1;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nE=new Set,hl={};function ks(t,e){Eo(t,e),Eo(t+"Capture",e)}function Eo(t,e){for(hl[t]=e,t=0;t<e.length;t++)nE.add(e[t])}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qf=Object.prototype.hasOwnProperty,B1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V_={},U_={};function z1(t){return Qf.call(U_,t)?!0:Qf.call(V_,t)?!1:B1.test(t)?U_[t]=!0:(V_[t]=!0,!1)}function $1(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W1(t,e,n,i){if(e===null||typeof e>"u"||$1(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ng=/[\-:]([a-z])/g;function Dg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ng,Dg);bt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ng,Dg);bt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ng,Dg);bt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});bt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mg(t,e,n,i){var r=bt.hasOwnProperty(e)?bt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W1(e,n,r,i)&&(n=null),i||r===null?z1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Mi=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),Og=Symbol.for("react.strict_mode"),Yf=Symbol.for("react.profiler"),iE=Symbol.for("react.provider"),rE=Symbol.for("react.context"),Lg=Symbol.for("react.forward_ref"),Xf=Symbol.for("react.suspense"),Jf=Symbol.for("react.suspense_list"),jg=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),sE=Symbol.for("react.offscreen"),B_=Symbol.iterator;function da(t){return t===null||typeof t!="object"?null:(t=B_&&t[B_]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Xd;function Aa(t){if(Xd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xd=e&&e[1]||""}return`
`+Xd+t}var Jd=!1;function Zd(t,e){if(!t||Jd)return"";Jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Aa(t):""}function H1(t){switch(t.tag){case 5:return Aa(t.type);case 16:return Aa("Lazy");case 13:return Aa("Suspense");case 19:return Aa("SuspenseList");case 0:case 2:case 15:return t=Zd(t.type,!1),t;case 11:return t=Zd(t.type.render,!1),t;case 1:return t=Zd(t.type,!0),t;default:return""}}function Zf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case Qs:return"Portal";case Yf:return"Profiler";case Og:return"StrictMode";case Xf:return"Suspense";case Jf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rE:return(t.displayName||"Context")+".Consumer";case iE:return(t._context.displayName||"Context")+".Provider";case Lg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jg:return e=t.displayName||null,e!==null?e:Zf(t.type)||"Memo";case qi:e=t._payload,t=t._init;try{return Zf(t(e))}catch{}}return null}function q1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zf(e);case 8:return e===Og?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K1(t){var e=oE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oc(t){t._valueTracker||(t._valueTracker=K1(t))}function aE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=oE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ep(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function z_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Er(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lE(t,e){e=e.checked,e!=null&&Mg(t,"checked",e,!1)}function tp(t,e){lE(t,e);var n=Er(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?np(t,e.type,n):e.hasOwnProperty("defaultValue")&&np(t,e.type,Er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function np(t,e,n){(e!=="number"||zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pa=Array.isArray;function co(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Er(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ip(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function W_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Pa(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Er(n)}}function cE(t,e){var n=Er(e.value),i=Er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function H_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lc,hE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lc=Lc||document.createElement("div"),Lc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $a={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G1=["Webkit","ms","Moz","O"];Object.keys($a).forEach(function(t){G1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$a[e]=$a[t]})});function dE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$a.hasOwnProperty(t)&&$a[t]?(""+e).trim():e+"px"}function fE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=dE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Q1=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sp(t,e){if(e){if(Q1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function op(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ap=null;function Fg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lp=null,uo=null,ho=null;function q_(t){if(t=Yl(t)){if(typeof lp!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Qh(e),lp(t.stateNode,t.type,e))}}function pE(t){uo?ho?ho.push(t):ho=[t]:uo=t}function gE(){if(uo){var t=uo,e=ho;if(ho=uo=null,q_(t),e)for(t=0;t<e.length;t++)q_(e[t])}}function mE(t,e){return t(e)}function yE(){}var ef=!1;function _E(t,e,n){if(ef)return t(e,n);ef=!0;try{return mE(t,e,n)}finally{ef=!1,(uo!==null||ho!==null)&&(yE(),gE())}}function fl(t,e){var n=t.stateNode;if(n===null)return null;var i=Qh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var cp=!1;if(Si)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){cp=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{cp=!1}function Y1(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Wa=!1,$u=null,Wu=!1,up=null,X1={onError:function(t){Wa=!0,$u=t}};function J1(t,e,n,i,r,s,o,a,l){Wa=!1,$u=null,Y1.apply(X1,arguments)}function Z1(t,e,n,i,r,s,o,a,l){if(J1.apply(this,arguments),Wa){if(Wa){var c=$u;Wa=!1,$u=null}else throw Error(K(198));Wu||(Wu=!0,up=c)}}function Cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function K_(t){if(Cs(t)!==t)throw Error(K(188))}function eC(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return K_(r),t;if(s===i)return K_(r),e;s=s.sibling}throw Error(K(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==i)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function wE(t){return t=eC(t),t!==null?bE(t):null}function bE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bE(t);if(e!==null)return e;t=t.sibling}return null}var EE=un.unstable_scheduleCallback,G_=un.unstable_cancelCallback,tC=un.unstable_shouldYield,nC=un.unstable_requestPaint,Je=un.unstable_now,iC=un.unstable_getCurrentPriorityLevel,Vg=un.unstable_ImmediatePriority,xE=un.unstable_UserBlockingPriority,Hu=un.unstable_NormalPriority,rC=un.unstable_LowPriority,TE=un.unstable_IdlePriority,Hh=null,ei=null;function sC(t){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(Hh,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:lC,oC=Math.log,aC=Math.LN2;function lC(t){return t>>>=0,t===0?32:31-(oC(t)/aC|0)|0}var jc=64,Fc=4194304;function Ra(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Ra(a):(s&=o,s!==0&&(i=Ra(s)))}else o=n&~r,o!==0?i=Ra(o):s!==0&&(i=Ra(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ln(e),r=1<<n,i|=t[n],e&=~r;return i}function cC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ln(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=cC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function hp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function IE(){var t=jc;return jc<<=1,!(jc&4194240)&&(jc=64),t}function tf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function hC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ln(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Ug(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ln(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ae=0;function SE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kE,Bg,CE,AE,PE,dp=!1,Vc=[],lr=null,cr=null,ur=null,pl=new Map,gl=new Map,Gi=[],dC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q_(t,e){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(e.pointerId)}}function pa(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Yl(e),e!==null&&Bg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function fC(t,e,n,i,r){switch(e){case"focusin":return lr=pa(lr,t,e,n,i,r),!0;case"dragenter":return cr=pa(cr,t,e,n,i,r),!0;case"mouseover":return ur=pa(ur,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return pl.set(s,pa(pl.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,gl.set(s,pa(gl.get(s)||null,t,e,n,i,r)),!0}return!1}function RE(t){var e=ns(t.target);if(e!==null){var n=Cs(e);if(n!==null){if(e=n.tag,e===13){if(e=vE(n),e!==null){t.blockedOn=e,PE(t.priority,function(){CE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ap=i,n.target.dispatchEvent(i),ap=null}else return e=Yl(n),e!==null&&Bg(e),t.blockedOn=n,!1;e.shift()}return!0}function Y_(t,e,n){vu(t)&&n.delete(e)}function pC(){dp=!1,lr!==null&&vu(lr)&&(lr=null),cr!==null&&vu(cr)&&(cr=null),ur!==null&&vu(ur)&&(ur=null),pl.forEach(Y_),gl.forEach(Y_)}function ga(t,e){t.blockedOn===e&&(t.blockedOn=null,dp||(dp=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,pC)))}function ml(t){function e(r){return ga(r,t)}if(0<Vc.length){ga(Vc[0],t);for(var n=1;n<Vc.length;n++){var i=Vc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(lr!==null&&ga(lr,t),cr!==null&&ga(cr,t),ur!==null&&ga(ur,t),pl.forEach(e),gl.forEach(e),n=0;n<Gi.length;n++)i=Gi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Gi.length&&(n=Gi[0],n.blockedOn===null);)RE(n),n.blockedOn===null&&Gi.shift()}var fo=Mi.ReactCurrentBatchConfig,Ku=!0;function gC(t,e,n,i){var r=Ae,s=fo.transition;fo.transition=null;try{Ae=1,zg(t,e,n,i)}finally{Ae=r,fo.transition=s}}function mC(t,e,n,i){var r=Ae,s=fo.transition;fo.transition=null;try{Ae=4,zg(t,e,n,i)}finally{Ae=r,fo.transition=s}}function zg(t,e,n,i){if(Ku){var r=fp(t,e,n,i);if(r===null)df(t,e,i,Gu,n),Q_(t,i);else if(fC(r,t,e,n,i))i.stopPropagation();else if(Q_(t,i),e&4&&-1<dC.indexOf(t)){for(;r!==null;){var s=Yl(r);if(s!==null&&kE(s),s=fp(t,e,n,i),s===null&&df(t,e,i,Gu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else df(t,e,i,null,n)}}var Gu=null;function fp(t,e,n,i){if(Gu=null,t=Fg(i),t=ns(t),t!==null)if(e=Cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gu=t,null}function NE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iC()){case Vg:return 1;case xE:return 4;case Hu:case rC:return 16;case TE:return 536870912;default:return 16}default:return 16}}var tr=null,$g=null,wu=null;function DE(){if(wu)return wu;var t,e=$g,n=e.length,i,r="value"in tr?tr.value:tr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return wu=r.slice(t,1<i?1-i:void 0)}function bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uc(){return!0}function X_(){return!1}function dn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uc:X_,this.isPropagationStopped=X_,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uc)},persist:function(){},isPersistent:Uc}),e}var Bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wg=dn(Bo),Ql=He({},Bo,{view:0,detail:0}),yC=dn(Ql),nf,rf,ma,qh=He({},Ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(nf=t.screenX-ma.screenX,rf=t.screenY-ma.screenY):rf=nf=0,ma=t),nf)},movementY:function(t){return"movementY"in t?t.movementY:rf}}),J_=dn(qh),_C=He({},qh,{dataTransfer:0}),vC=dn(_C),wC=He({},Ql,{relatedTarget:0}),sf=dn(wC),bC=He({},Bo,{animationName:0,elapsedTime:0,pseudoElement:0}),EC=dn(bC),xC=He({},Bo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TC=dn(xC),IC=He({},Bo,{data:0}),Z_=dn(IC),SC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CC[t])?!!e[t]:!1}function Hg(){return AC}var PC=He({},Ql,{key:function(t){if(t.key){var e=SC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(t){return t.type==="keypress"?bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RC=dn(PC),NC=He({},qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ev=dn(NC),DC=He({},Ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),MC=dn(DC),OC=He({},Bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),LC=dn(OC),jC=He({},qh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FC=dn(jC),VC=[9,13,27,32],qg=Si&&"CompositionEvent"in window,Ha=null;Si&&"documentMode"in document&&(Ha=document.documentMode);var UC=Si&&"TextEvent"in window&&!Ha,ME=Si&&(!qg||Ha&&8<Ha&&11>=Ha),tv=" ",nv=!1;function OE(t,e){switch(t){case"keyup":return VC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function BC(t,e){switch(t){case"compositionend":return LE(e);case"keypress":return e.which!==32?null:(nv=!0,tv);case"textInput":return t=e.data,t===tv&&nv?null:t;default:return null}}function zC(t,e){if(Xs)return t==="compositionend"||!qg&&OE(t,e)?(t=DE(),wu=$g=tr=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ME&&e.locale!=="ko"?null:e.data;default:return null}}var $C={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$C[t.type]:e==="textarea"}function jE(t,e,n,i){pE(i),e=Qu(e,"onChange"),0<e.length&&(n=new Wg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qa=null,yl=null;function WC(t){GE(t,0)}function Kh(t){var e=eo(t);if(aE(e))return t}function HC(t,e){if(t==="change")return e}var FE=!1;if(Si){var of;if(Si){var af="oninput"in document;if(!af){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),af=typeof rv.oninput=="function"}of=af}else of=!1;FE=of&&(!document.documentMode||9<document.documentMode)}function sv(){qa&&(qa.detachEvent("onpropertychange",VE),yl=qa=null)}function VE(t){if(t.propertyName==="value"&&Kh(yl)){var e=[];jE(e,yl,t,Fg(t)),_E(WC,e)}}function qC(t,e,n){t==="focusin"?(sv(),qa=e,yl=n,qa.attachEvent("onpropertychange",VE)):t==="focusout"&&sv()}function KC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kh(yl)}function GC(t,e){if(t==="click")return Kh(e)}function QC(t,e){if(t==="input"||t==="change")return Kh(e)}function YC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vn=typeof Object.is=="function"?Object.is:YC;function _l(t,e){if(Vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Qf.call(e,r)||!Vn(t[r],e[r]))return!1}return!0}function ov(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function av(t,e){var n=ov(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ov(n)}}function UE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?UE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BE(){for(var t=window,e=zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zu(t.document)}return e}function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XC(t){var e=BE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&UE(n.ownerDocument.documentElement,n)){if(i!==null&&Kg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=av(n,s);var o=av(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JC=Si&&"documentMode"in document&&11>=document.documentMode,Js=null,pp=null,Ka=null,gp=!1;function lv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gp||Js==null||Js!==zu(i)||(i=Js,"selectionStart"in i&&Kg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ka&&_l(Ka,i)||(Ka=i,i=Qu(pp,"onSelect"),0<i.length&&(e=new Wg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Js)))}function Bc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:Bc("Animation","AnimationEnd"),animationiteration:Bc("Animation","AnimationIteration"),animationstart:Bc("Animation","AnimationStart"),transitionend:Bc("Transition","TransitionEnd")},lf={},zE={};Si&&(zE=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function Gh(t){if(lf[t])return lf[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zE)return lf[t]=e[n];return t}var $E=Gh("animationend"),WE=Gh("animationiteration"),HE=Gh("animationstart"),qE=Gh("transitionend"),KE=new Map,cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){KE.set(t,e),ks(e,[t])}for(var cf=0;cf<cv.length;cf++){var uf=cv[cf],ZC=uf.toLowerCase(),eA=uf[0].toUpperCase()+uf.slice(1);Rr(ZC,"on"+eA)}Rr($E,"onAnimationEnd");Rr(WE,"onAnimationIteration");Rr(HE,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(qE,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function uv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Z1(i,e,void 0,t),t.currentTarget=null}function GE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;uv(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;uv(r,a,c),s=l}}}if(Wu)throw t=up,Wu=!1,up=null,t}function Oe(t,e){var n=e[wp];n===void 0&&(n=e[wp]=new Set);var i=t+"__bubble";n.has(i)||(QE(e,t,2,!1),n.add(i))}function hf(t,e,n){var i=0;e&&(i|=4),QE(n,t,i,e)}var zc="_reactListening"+Math.random().toString(36).slice(2);function vl(t){if(!t[zc]){t[zc]=!0,nE.forEach(function(n){n!=="selectionchange"&&(tA.has(n)||hf(n,!1,t),hf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zc]||(e[zc]=!0,hf("selectionchange",!1,e))}}function QE(t,e,n,i){switch(NE(e)){case 1:var r=gC;break;case 4:r=mC;break;default:r=zg}n=r.bind(null,e,n,t),r=void 0,!cp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function df(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ns(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}_E(function(){var c=s,h=Fg(n),d=[];e:{var f=KE.get(t);if(f!==void 0){var m=Wg,_=t;switch(t){case"keypress":if(bu(n)===0)break e;case"keydown":case"keyup":m=RC;break;case"focusin":_="focus",m=sf;break;case"focusout":_="blur",m=sf;break;case"beforeblur":case"afterblur":m=sf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=J_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=vC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=MC;break;case $E:case WE:case HE:m=EC;break;case qE:m=LC;break;case"scroll":m=yC;break;case"wheel":m=FC;break;case"copy":case"cut":case"paste":m=TC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ev}var b=(e&4)!==0,w=!b&&t==="scroll",E=b?f!==null?f+"Capture":null:f;b=[];for(var x=c,k;x!==null;){k=x;var N=k.stateNode;if(k.tag===5&&N!==null&&(k=N,E!==null&&(N=fl(x,E),N!=null&&b.push(wl(x,N,k)))),w)break;x=x.return}0<b.length&&(f=new m(f,_,null,n,h),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==ap&&(_=n.relatedTarget||n.fromElement)&&(ns(_)||_[ki]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?ns(_):null,_!==null&&(w=Cs(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(b=J_,N="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=ev,N="onPointerLeave",E="onPointerEnter",x="pointer"),w=m==null?f:eo(m),k=_==null?f:eo(_),f=new b(N,x+"leave",m,n,h),f.target=w,f.relatedTarget=k,N=null,ns(h)===c&&(b=new b(E,x+"enter",_,n,h),b.target=k,b.relatedTarget=w,N=b),w=N,m&&_)t:{for(b=m,E=_,x=0,k=b;k;k=Us(k))x++;for(k=0,N=E;N;N=Us(N))k++;for(;0<x-k;)b=Us(b),x--;for(;0<k-x;)E=Us(E),k--;for(;x--;){if(b===E||E!==null&&b===E.alternate)break t;b=Us(b),E=Us(E)}b=null}else b=null;m!==null&&hv(d,f,m,b,!1),_!==null&&w!==null&&hv(d,w,_,b,!0)}}e:{if(f=c?eo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=HC;else if(iv(f))if(FE)M=QC;else{M=KC;var O=qC}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=GC);if(M&&(M=M(t,c))){jE(d,M,n,h);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&np(f,"number",f.value)}switch(O=c?eo(c):window,t){case"focusin":(iv(O)||O.contentEditable==="true")&&(Js=O,pp=c,Ka=null);break;case"focusout":Ka=pp=Js=null;break;case"mousedown":gp=!0;break;case"contextmenu":case"mouseup":case"dragend":gp=!1,lv(d,n,h);break;case"selectionchange":if(JC)break;case"keydown":case"keyup":lv(d,n,h)}var I;if(qg)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Xs?OE(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(ME&&n.locale!=="ko"&&(Xs||v!=="onCompositionStart"?v==="onCompositionEnd"&&Xs&&(I=DE()):(tr=h,$g="value"in tr?tr.value:tr.textContent,Xs=!0)),O=Qu(c,v),0<O.length&&(v=new Z_(v,t,null,n,h),d.push({event:v,listeners:O}),I?v.data=I:(I=LE(n),I!==null&&(v.data=I)))),(I=UC?BC(t,n):zC(t,n))&&(c=Qu(c,"onBeforeInput"),0<c.length&&(h=new Z_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}GE(d,e)})}function wl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=fl(t,n),s!=null&&i.unshift(wl(t,s,r)),s=fl(t,e),s!=null&&i.push(wl(t,s,r))),t=t.return}return i}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hv(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=fl(n,s),l!=null&&o.unshift(wl(n,l,a))):r||(l=fl(n,s),l!=null&&o.push(wl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nA=/\r\n?/g,iA=/\u0000|\uFFFD/g;function dv(t){return(typeof t=="string"?t:""+t).replace(nA,`
`).replace(iA,"")}function $c(t,e,n){if(e=dv(e),dv(t)!==e&&n)throw Error(K(425))}function Yu(){}var mp=null,yp=null;function _p(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vp=typeof setTimeout=="function"?setTimeout:void 0,rA=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,sA=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(t){return fv.resolve(null).then(t).catch(oA)}:vp;function oA(t){setTimeout(function(){throw t})}function ff(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ml(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ml(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+zo,bl="__reactProps$"+zo,ki="__reactContainer$"+zo,wp="__reactEvents$"+zo,aA="__reactListeners$"+zo,lA="__reactHandles$"+zo;function ns(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pv(t);t!==null;){if(n=t[Jn])return n;t=pv(t)}return e}t=n,n=t.parentNode}return null}function Yl(t){return t=t[Jn]||t[ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Qh(t){return t[bl]||null}var bp=[],to=-1;function Nr(t){return{current:t}}function je(t){0>to||(t.current=bp[to],bp[to]=null,to--)}function Ne(t,e){to++,bp[to]=t.current,t.current=e}var xr={},Dt=Nr(xr),Qt=Nr(!1),fs=xr;function xo(t,e){var n=t.type.contextTypes;if(!n)return xr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Yt(t){return t=t.childContextTypes,t!=null}function Xu(){je(Qt),je(Dt)}function gv(t,e,n){if(Dt.current!==xr)throw Error(K(168));Ne(Dt,e),Ne(Qt,n)}function YE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(K(108,q1(t)||"Unknown",r));return He({},n,i)}function Ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,fs=Dt.current,Ne(Dt,t),Ne(Qt,Qt.current),!0}function mv(t,e,n){var i=t.stateNode;if(!i)throw Error(K(169));n?(t=YE(t,e,fs),i.__reactInternalMemoizedMergedChildContext=t,je(Qt),je(Dt),Ne(Dt,t)):je(Qt),Ne(Qt,n)}var yi=null,Yh=!1,pf=!1;function XE(t){yi===null?yi=[t]:yi.push(t)}function cA(t){Yh=!0,XE(t)}function Dr(){if(!pf&&yi!==null){pf=!0;var t=0,e=Ae;try{var n=yi;for(Ae=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}yi=null,Yh=!1}catch(r){throw yi!==null&&(yi=yi.slice(t+1)),EE(Vg,Dr),r}finally{Ae=e,pf=!1}}return null}var no=[],io=0,Zu=null,eh=0,mn=[],yn=0,ps=null,vi=1,wi="";function Qr(t,e){no[io++]=eh,no[io++]=Zu,Zu=t,eh=e}function JE(t,e,n){mn[yn++]=vi,mn[yn++]=wi,mn[yn++]=ps,ps=t;var i=vi;t=wi;var r=32-Ln(i)-1;i&=~(1<<r),n+=1;var s=32-Ln(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,vi=1<<32-Ln(e)+r|n<<r|i,wi=s+t}else vi=1<<s|n<<r|i,wi=t}function Gg(t){t.return!==null&&(Qr(t,1),JE(t,1,0))}function Qg(t){for(;t===Zu;)Zu=no[--io],no[io]=null,eh=no[--io],no[io]=null;for(;t===ps;)ps=mn[--yn],mn[yn]=null,wi=mn[--yn],mn[yn]=null,vi=mn[--yn],mn[yn]=null}var ln=null,on=null,Ue=!1,Mn=null;function ZE(t,e){var n=_n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,on=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:vi,overflow:wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,on=null,!0):!1;default:return!1}}function Ep(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xp(t){if(Ue){var e=on;if(e){var n=e;if(!yv(t,e)){if(Ep(t))throw Error(K(418));e=hr(n.nextSibling);var i=ln;e&&yv(t,e)?ZE(i,n):(t.flags=t.flags&-4097|2,Ue=!1,ln=t)}}else{if(Ep(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ue=!1,ln=t}}}function _v(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function Wc(t){if(t!==ln)return!1;if(!Ue)return _v(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_p(t.type,t.memoizedProps)),e&&(e=on)){if(Ep(t))throw ex(),Error(K(418));for(;e;)ZE(t,e),e=hr(e.nextSibling)}if(_v(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=ln?hr(t.stateNode.nextSibling):null;return!0}function ex(){for(var t=on;t;)t=hr(t.nextSibling)}function To(){on=ln=null,Ue=!1}function Yg(t){Mn===null?Mn=[t]:Mn.push(t)}var uA=Mi.ReactCurrentBatchConfig;function ya(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var i=n.stateNode}if(!i)throw Error(K(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Hc(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vv(t){var e=t._init;return e(t._payload)}function tx(t){function e(E,x){if(t){var k=E.deletions;k===null?(E.deletions=[x],E.flags|=16):k.push(x)}}function n(E,x){if(!t)return null;for(;x!==null;)e(E,x),x=x.sibling;return null}function i(E,x){for(E=new Map;x!==null;)x.key!==null?E.set(x.key,x):E.set(x.index,x),x=x.sibling;return E}function r(E,x){return E=gr(E,x),E.index=0,E.sibling=null,E}function s(E,x,k){return E.index=k,t?(k=E.alternate,k!==null?(k=k.index,k<x?(E.flags|=2,x):k):(E.flags|=2,x)):(E.flags|=1048576,x)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,x,k,N){return x===null||x.tag!==6?(x=bf(k,E.mode,N),x.return=E,x):(x=r(x,k),x.return=E,x)}function l(E,x,k,N){var M=k.type;return M===Ys?h(E,x,k.props.children,N,k.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===qi&&vv(M)===x.type)?(N=r(x,k.props),N.ref=ya(E,x,k),N.return=E,N):(N=Cu(k.type,k.key,k.props,null,E.mode,N),N.ref=ya(E,x,k),N.return=E,N)}function c(E,x,k,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==k.containerInfo||x.stateNode.implementation!==k.implementation?(x=Ef(k,E.mode,N),x.return=E,x):(x=r(x,k.children||[]),x.return=E,x)}function h(E,x,k,N,M){return x===null||x.tag!==7?(x=us(k,E.mode,N,M),x.return=E,x):(x=r(x,k),x.return=E,x)}function d(E,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return x=bf(""+x,E.mode,k),x.return=E,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mc:return k=Cu(x.type,x.key,x.props,null,E.mode,k),k.ref=ya(E,null,x),k.return=E,k;case Qs:return x=Ef(x,E.mode,k),x.return=E,x;case qi:var N=x._init;return d(E,N(x._payload),k)}if(Pa(x)||da(x))return x=us(x,E.mode,k,null),x.return=E,x;Hc(E,x)}return null}function f(E,x,k,N){var M=x!==null?x.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return M!==null?null:a(E,x,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Mc:return k.key===M?l(E,x,k,N):null;case Qs:return k.key===M?c(E,x,k,N):null;case qi:return M=k._init,f(E,x,M(k._payload),N)}if(Pa(k)||da(k))return M!==null?null:h(E,x,k,N,null);Hc(E,k)}return null}function m(E,x,k,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return E=E.get(k)||null,a(x,E,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Mc:return E=E.get(N.key===null?k:N.key)||null,l(x,E,N,M);case Qs:return E=E.get(N.key===null?k:N.key)||null,c(x,E,N,M);case qi:var O=N._init;return m(E,x,k,O(N._payload),M)}if(Pa(N)||da(N))return E=E.get(k)||null,h(x,E,N,M,null);Hc(x,N)}return null}function _(E,x,k,N){for(var M=null,O=null,I=x,v=x=0,C=null;I!==null&&v<k.length;v++){I.index>v?(C=I,I=null):C=I.sibling;var P=f(E,I,k[v],N);if(P===null){I===null&&(I=C);break}t&&I&&P.alternate===null&&e(E,I),x=s(P,x,v),O===null?M=P:O.sibling=P,O=P,I=C}if(v===k.length)return n(E,I),Ue&&Qr(E,v),M;if(I===null){for(;v<k.length;v++)I=d(E,k[v],N),I!==null&&(x=s(I,x,v),O===null?M=I:O.sibling=I,O=I);return Ue&&Qr(E,v),M}for(I=i(E,I);v<k.length;v++)C=m(I,E,v,k[v],N),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?v:C.key),x=s(C,x,v),O===null?M=C:O.sibling=C,O=C);return t&&I.forEach(function(R){return e(E,R)}),Ue&&Qr(E,v),M}function b(E,x,k,N){var M=da(k);if(typeof M!="function")throw Error(K(150));if(k=M.call(k),k==null)throw Error(K(151));for(var O=M=null,I=x,v=x=0,C=null,P=k.next();I!==null&&!P.done;v++,P=k.next()){I.index>v?(C=I,I=null):C=I.sibling;var R=f(E,I,P.value,N);if(R===null){I===null&&(I=C);break}t&&I&&R.alternate===null&&e(E,I),x=s(R,x,v),O===null?M=R:O.sibling=R,O=R,I=C}if(P.done)return n(E,I),Ue&&Qr(E,v),M;if(I===null){for(;!P.done;v++,P=k.next())P=d(E,P.value,N),P!==null&&(x=s(P,x,v),O===null?M=P:O.sibling=P,O=P);return Ue&&Qr(E,v),M}for(I=i(E,I);!P.done;v++,P=k.next())P=m(I,E,v,P.value,N),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?v:P.key),x=s(P,x,v),O===null?M=P:O.sibling=P,O=P);return t&&I.forEach(function(S){return e(E,S)}),Ue&&Qr(E,v),M}function w(E,x,k,N){if(typeof k=="object"&&k!==null&&k.type===Ys&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Mc:e:{for(var M=k.key,O=x;O!==null;){if(O.key===M){if(M=k.type,M===Ys){if(O.tag===7){n(E,O.sibling),x=r(O,k.props.children),x.return=E,E=x;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===qi&&vv(M)===O.type){n(E,O.sibling),x=r(O,k.props),x.ref=ya(E,O,k),x.return=E,E=x;break e}n(E,O);break}else e(E,O);O=O.sibling}k.type===Ys?(x=us(k.props.children,E.mode,N,k.key),x.return=E,E=x):(N=Cu(k.type,k.key,k.props,null,E.mode,N),N.ref=ya(E,x,k),N.return=E,E=N)}return o(E);case Qs:e:{for(O=k.key;x!==null;){if(x.key===O)if(x.tag===4&&x.stateNode.containerInfo===k.containerInfo&&x.stateNode.implementation===k.implementation){n(E,x.sibling),x=r(x,k.children||[]),x.return=E,E=x;break e}else{n(E,x);break}else e(E,x);x=x.sibling}x=Ef(k,E.mode,N),x.return=E,E=x}return o(E);case qi:return O=k._init,w(E,x,O(k._payload),N)}if(Pa(k))return _(E,x,k,N);if(da(k))return b(E,x,k,N);Hc(E,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,x!==null&&x.tag===6?(n(E,x.sibling),x=r(x,k),x.return=E,E=x):(n(E,x),x=bf(k,E.mode,N),x.return=E,E=x),o(E)):n(E,x)}return w}var Io=tx(!0),nx=tx(!1),th=Nr(null),nh=null,ro=null,Xg=null;function Jg(){Xg=ro=nh=null}function Zg(t){var e=th.current;je(th),t._currentValue=e}function Tp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function po(t,e){nh=t,Xg=ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(Xg!==t)if(t={context:t,memoizedValue:e,next:null},ro===null){if(nh===null)throw Error(K(308));ro=t,nh.dependencies={lanes:0,firstContext:t}}else ro=ro.next=t;return e}var is=null;function em(t){is===null?is=[t]:is.push(t)}function ix(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,em(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ci(t,i)}function Ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ki=!1;function tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ti(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ee&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ci(t,n)}return r=i.interleaved,r===null?(e.next=e,em(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ci(t,n)}function Eu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ug(t,n)}}function wv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ih(t,e,n,i){var r=t.updateQueue;Ki=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,b=a;switch(f=e,m=n,b.tag){case 1:if(_=b.payload,typeof _=="function"){d=_.call(m,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,f=typeof _=="function"?_.call(m,d,f):_,f==null)break e;d=He({},d,f);break e;case 2:Ki=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ms|=o,t.lanes=o,t.memoizedState=d}}function bv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(K(191,r));r.call(i)}}}var Xl={},ti=Nr(Xl),El=Nr(Xl),xl=Nr(Xl);function rs(t){if(t===Xl)throw Error(K(174));return t}function nm(t,e){switch(Ne(xl,e),Ne(El,t),Ne(ti,Xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rp(e,t)}je(ti),Ne(ti,e)}function So(){je(ti),je(El),je(xl)}function sx(t){rs(xl.current);var e=rs(ti.current),n=rp(e,t.type);e!==n&&(Ne(El,t),Ne(ti,n))}function im(t){El.current===t&&(je(ti),je(El))}var ze=Nr(0);function rh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gf=[];function rm(){for(var t=0;t<gf.length;t++)gf[t]._workInProgressVersionPrimary=null;gf.length=0}var xu=Mi.ReactCurrentDispatcher,mf=Mi.ReactCurrentBatchConfig,gs=0,$e=null,ot=null,ht=null,sh=!1,Ga=!1,Tl=0,hA=0;function St(){throw Error(K(321))}function sm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vn(t[n],e[n]))return!1;return!0}function om(t,e,n,i,r,s){if(gs=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xu.current=t===null||t.memoizedState===null?gA:mA,t=n(i,r),Ga){s=0;do{if(Ga=!1,Tl=0,25<=s)throw Error(K(301));s+=1,ht=ot=null,e.updateQueue=null,xu.current=yA,t=n(i,r)}while(Ga)}if(xu.current=oh,e=ot!==null&&ot.next!==null,gs=0,ht=ot=$e=null,sh=!1,e)throw Error(K(300));return t}function am(){var t=Tl!==0;return Tl=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?$e.memoizedState=ht=t:ht=ht.next=t,ht}function Tn(){if(ot===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?$e.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error(K(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?$e.memoizedState=ht=t:ht=ht.next=t}return ht}function Il(t,e){return typeof e=="function"?e(t):e}function yf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=ot,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((gs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,$e.lanes|=h,ms|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Vn(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,$e.lanes|=s,ms|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _f(t){var e=Tn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Vn(s,e.memoizedState)||(Kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ox(){}function ax(t,e){var n=$e,i=Tn(),r=e(),s=!Vn(i.memoizedState,r);if(s&&(i.memoizedState=r,Kt=!0),i=i.queue,lm(ux.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Sl(9,cx.bind(null,n,i,r,e),void 0,null),ft===null)throw Error(K(349));gs&30||lx(n,e,r)}return r}function lx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cx(t,e,n,i){e.value=n,e.getSnapshot=i,hx(e)&&dx(t)}function ux(t,e,n){return n(function(){hx(e)&&dx(t)})}function hx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vn(t,n)}catch{return!0}}function dx(t){var e=Ci(t,1);e!==null&&jn(e,t,1,-1)}function Ev(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:t},e.queue=t,t=t.dispatch=pA.bind(null,$e,t),[e.memoizedState,t]}function Sl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function fx(){return Tn().memoizedState}function Tu(t,e,n,i){var r=Yn();$e.flags|=t,r.memoizedState=Sl(1|e,n,void 0,i===void 0?null:i)}function Xh(t,e,n,i){var r=Tn();i=i===void 0?null:i;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,i!==null&&sm(i,o.deps)){r.memoizedState=Sl(e,n,s,i);return}}$e.flags|=t,r.memoizedState=Sl(1|e,n,s,i)}function xv(t,e){return Tu(8390656,8,t,e)}function lm(t,e){return Xh(2048,8,t,e)}function px(t,e){return Xh(4,2,t,e)}function gx(t,e){return Xh(4,4,t,e)}function mx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yx(t,e,n){return n=n!=null?n.concat([t]):null,Xh(4,4,mx.bind(null,e,t),n)}function cm(){}function _x(t,e){var n=Tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&sm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function vx(t,e){var n=Tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&sm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function wx(t,e,n){return gs&21?(Vn(n,e)||(n=IE(),$e.lanes|=n,ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function dA(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var i=mf.transition;mf.transition={};try{t(!1),e()}finally{Ae=n,mf.transition=i}}function bx(){return Tn().memoizedState}function fA(t,e,n){var i=pr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ex(t))xx(e,n);else if(n=ix(t,e,n,i),n!==null){var r=Ut();jn(n,t,i,r),Tx(n,e,i)}}function pA(t,e,n){var i=pr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ex(t))xx(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Vn(a,o)){var l=e.interleaved;l===null?(r.next=r,em(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=ix(t,e,r,i),n!==null&&(r=Ut(),jn(n,t,i,r),Tx(n,e,i))}}function Ex(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function xx(t,e){Ga=sh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tx(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ug(t,n)}}var oh={readContext:xn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},gA={readContext:xn,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:xv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tu(4194308,4,mx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tu(4,2,t,e)},useMemo:function(t,e){var n=Yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Yn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=fA.bind(null,$e,t),[i.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:Ev,useDebugValue:cm,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=Ev(!1),e=t[0];return t=dA.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=$e,r=Yn();if(Ue){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),ft===null)throw Error(K(349));gs&30||lx(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,xv(ux.bind(null,i,s,t),[t]),i.flags|=2048,Sl(9,cx.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Yn(),e=ft.identifierPrefix;if(Ue){var n=wi,i=vi;n=(i&~(1<<32-Ln(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mA={readContext:xn,useCallback:_x,useContext:xn,useEffect:lm,useImperativeHandle:yx,useInsertionEffect:px,useLayoutEffect:gx,useMemo:vx,useReducer:yf,useRef:fx,useState:function(){return yf(Il)},useDebugValue:cm,useDeferredValue:function(t){var e=Tn();return wx(e,ot.memoizedState,t)},useTransition:function(){var t=yf(Il)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:ox,useSyncExternalStore:ax,useId:bx,unstable_isNewReconciler:!1},yA={readContext:xn,useCallback:_x,useContext:xn,useEffect:lm,useImperativeHandle:yx,useInsertionEffect:px,useLayoutEffect:gx,useMemo:vx,useReducer:_f,useRef:fx,useState:function(){return _f(Il)},useDebugValue:cm,useDeferredValue:function(t){var e=Tn();return ot===null?e.memoizedState=t:wx(e,ot.memoizedState,t)},useTransition:function(){var t=_f(Il)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:ox,useSyncExternalStore:ax,useId:bx,unstable_isNewReconciler:!1};function Nn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ip(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jh={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ut(),r=pr(t),s=Ti(i,r);s.payload=e,n!=null&&(s.callback=n),e=dr(t,s,r),e!==null&&(jn(e,t,r,i),Eu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ut(),r=pr(t),s=Ti(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=dr(t,s,r),e!==null&&(jn(e,t,r,i),Eu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ut(),i=pr(t),r=Ti(n,i);r.tag=2,e!=null&&(r.callback=e),e=dr(t,r,i),e!==null&&(jn(e,t,i,n),Eu(e,t,i))}};function Tv(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!_l(n,i)||!_l(r,s):!0}function Ix(t,e,n){var i=!1,r=xr,s=e.contextType;return typeof s=="object"&&s!==null?s=xn(s):(r=Yt(e)?fs:Dt.current,i=e.contextTypes,s=(i=i!=null)?xo(t,r):xr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Iv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Jh.enqueueReplaceState(e,e.state,null)}function Sp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},tm(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=xn(s):(s=Yt(e)?fs:Dt.current,r.context=xo(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ip(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Jh.enqueueReplaceState(r,r.state,null),ih(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ko(t,e){try{var n="",i=e;do n+=H1(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function vf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _A=typeof WeakMap=="function"?WeakMap:Map;function Sx(t,e,n){n=Ti(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){lh||(lh=!0,jp=i),kp(t,e)},n}function kx(t,e,n){n=Ti(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){kp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kp(t,e),typeof i!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Sv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new _A;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=NA.bind(null,t,e,n),e.then(t,t))}function kv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ti(-1,1),e.tag=2,dr(n,e,1))),n.lanes|=1),t)}var vA=Mi.ReactCurrentOwner,Kt=!1;function Ft(t,e,n,i){e.child=t===null?nx(e,null,n,i):Io(e,t.child,n,i)}function Av(t,e,n,i,r){n=n.render;var s=e.ref;return po(e,r),i=om(t,e,n,i,s,r),n=am(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ai(t,e,r)):(Ue&&n&&Gg(e),e.flags|=1,Ft(t,e,i,r),e.child)}function Pv(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!ym(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Cx(t,e,s,i,r)):(t=Cu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:_l,n(o,i)&&t.ref===e.ref)return Ai(t,e,r)}return e.flags|=1,t=gr(s,i),t.ref=e.ref,t.return=e,e.child=t}function Cx(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(_l(s,i)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,Ai(t,e,r)}return Cp(t,e,n,i,r)}function Ax(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(oo,sn),sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(oo,sn),sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ne(oo,sn),sn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ne(oo,sn),sn|=i;return Ft(t,e,r,n),e.child}function Px(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cp(t,e,n,i,r){var s=Yt(n)?fs:Dt.current;return s=xo(e,s),po(e,r),n=om(t,e,n,i,s,r),i=am(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ai(t,e,r)):(Ue&&i&&Gg(e),e.flags|=1,Ft(t,e,n,r),e.child)}function Rv(t,e,n,i,r){if(Yt(n)){var s=!0;Ju(e)}else s=!1;if(po(e,r),e.stateNode===null)Iu(t,e),Ix(e,n,i),Sp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xn(c):(c=Yt(n)?fs:Dt.current,c=xo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Iv(e,o,i,c),Ki=!1;var f=e.memoizedState;o.state=f,ih(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Qt.current||Ki?(typeof h=="function"&&(Ip(e,n,h,i),l=e.memoizedState),(a=Ki||Tv(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,rx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Nn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=Yt(n)?fs:Dt.current,l=xo(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Iv(e,o,i,l),Ki=!1,f=e.memoizedState,o.state=f,ih(e,i,o,r);var _=e.memoizedState;a!==d||f!==_||Qt.current||Ki?(typeof m=="function"&&(Ip(e,n,m,i),_=e.memoizedState),(c=Ki||Tv(e,n,c,i,f,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Ap(t,e,n,i,s,r)}function Ap(t,e,n,i,r,s){Px(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&mv(e,n,!1),Ai(t,e,s);i=e.stateNode,vA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Io(e,t.child,null,s),e.child=Io(e,null,a,s)):Ft(t,e,a,s),e.memoizedState=i.state,r&&mv(e,n,!0),e.child}function Rx(t){var e=t.stateNode;e.pendingContext?gv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gv(t,e.context,!1),nm(t,e.containerInfo)}function Nv(t,e,n,i,r){return To(),Yg(r),e.flags|=256,Ft(t,e,n,i),e.child}var Pp={dehydrated:null,treeContext:null,retryLane:0};function Rp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Nx(t,e,n){var i=e.pendingProps,r=ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ne(ze,r&1),t===null)return xp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=td(o,i,0,null),t=us(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rp(n),e.memoizedState=Pp,t):um(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return wA(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=gr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=gr(a,s):(s=us(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Rp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Pp,i}return s=t.child,t=s.sibling,i=gr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function um(t,e){return e=td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qc(t,e,n,i){return i!==null&&Yg(i),Io(e,t.child,null,n),t=um(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wA(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=vf(Error(K(422))),qc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=td({mode:"visible",children:i.children},r,0,null),s=us(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Io(e,t.child,null,o),e.child.memoizedState=Rp(o),e.memoizedState=Pp,s);if(!(e.mode&1))return qc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(K(419)),i=vf(s,i,void 0),qc(t,e,o,i)}if(a=(o&t.childLanes)!==0,Kt||a){if(i=ft,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ci(t,r),jn(i,t,r,-1))}return mm(),i=vf(Error(K(421))),qc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=DA.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,on=hr(r.nextSibling),ln=e,Ue=!0,Mn=null,t!==null&&(mn[yn++]=vi,mn[yn++]=wi,mn[yn++]=ps,vi=t.id,wi=t.overflow,ps=e),e=um(e,i.children),e.flags|=4096,e)}function Dv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Tp(t.return,e,n)}function wf(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Dx(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ft(t,e,i.children,n),i=ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dv(t,n,e);else if(t.tag===19)Dv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ne(ze,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&rh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),wf(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&rh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}wf(e,!0,n,null,s);break;case"together":wf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Iu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bA(t,e,n){switch(e.tag){case 3:Rx(e),To();break;case 5:sx(e);break;case 1:Yt(e.type)&&Ju(e);break;case 4:nm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ne(th,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ne(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?Nx(t,e,n):(Ne(ze,ze.current&1),t=Ai(t,e,n),t!==null?t.sibling:null);Ne(ze,ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Dx(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ne(ze,ze.current),i)break;return null;case 22:case 23:return e.lanes=0,Ax(t,e,n)}return Ai(t,e,n)}var Mx,Np,Ox,Lx;Mx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Np=function(){};Ox=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,rs(ti.current);var s=null;switch(n){case"input":r=ep(t,r),i=ep(t,i),s=[];break;case"select":r=He({},r,{value:void 0}),i=He({},i,{value:void 0}),s=[];break;case"textarea":r=ip(t,r),i=ip(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Yu)}sp(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Lx=function(t,e,n,i){n!==i&&(e.flags|=4)};function _a(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function EA(t,e,n){var i=e.pendingProps;switch(Qg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return Yt(e.type)&&Xu(),kt(e),null;case 3:return i=e.stateNode,So(),je(Qt),je(Dt),rm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Wc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mn!==null&&(Up(Mn),Mn=null))),Np(t,e),kt(e),null;case 5:im(e);var r=rs(xl.current);if(n=e.type,t!==null&&e.stateNode!=null)Ox(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(K(166));return kt(e),null}if(t=rs(ti.current),Wc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Jn]=e,i[bl]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(r=0;r<Na.length;r++)Oe(Na[r],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":z_(i,s),Oe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",i);break;case"textarea":W_(i,s),Oe("invalid",i)}sp(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&$c(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$c(i.textContent,a,t),r=["children",""+a]):hl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",i)}switch(n){case"input":Oc(i),$_(i,s,!0);break;case"textarea":Oc(i),H_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Yu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Jn]=e,t[bl]=i,Mx(t,e,!1,!1),e.stateNode=t;e:{switch(o=op(n,i),n){case"dialog":Oe("cancel",t),Oe("close",t),r=i;break;case"iframe":case"object":case"embed":Oe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Na.length;r++)Oe(Na[r],t);r=i;break;case"source":Oe("error",t),r=i;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),r=i;break;case"details":Oe("toggle",t),r=i;break;case"input":z_(t,i),r=ep(t,i),Oe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=He({},i,{value:void 0}),Oe("invalid",t);break;case"textarea":W_(t,i),r=ip(t,i),Oe("invalid",t);break;default:r=i}sp(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?fE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&dl(t,l):typeof l=="number"&&dl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&Mg(t,s,l,o))}switch(n){case"input":Oc(t),$_(t,i,!1);break;case"textarea":Oc(t),H_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Er(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?co(t,!!i.multiple,s,!1):i.defaultValue!=null&&co(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Yu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)Lx(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(K(166));if(n=rs(xl.current),rs(ti.current),Wc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Jn]=e,(s=i.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:$c(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$c(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Jn]=e,e.stateNode=i}return kt(e),null;case 13:if(je(ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&on!==null&&e.mode&1&&!(e.flags&128))ex(),To(),e.flags|=98560,s=!1;else if(s=Wc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Jn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else Mn!==null&&(Up(Mn),Mn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?lt===0&&(lt=3):mm())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return So(),Np(t,e),t===null&&vl(e.stateNode.containerInfo),kt(e),null;case 10:return Zg(e.type._context),kt(e),null;case 17:return Yt(e.type)&&Xu(),kt(e),null;case 19:if(je(ze),s=e.memoizedState,s===null)return kt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)_a(s,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rh(t),o!==null){for(e.flags|=128,_a(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(ze,ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>Co&&(e.flags|=128,i=!0,_a(s,!1),e.lanes=4194304)}else{if(!i)if(t=rh(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_a(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return kt(e),null}else 2*Je()-s.renderingStartTime>Co&&n!==1073741824&&(e.flags|=128,i=!0,_a(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=ze.current,Ne(ze,i?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return gm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?sn&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function xA(t,e){switch(Qg(e),e.tag){case 1:return Yt(e.type)&&Xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return So(),je(Qt),je(Dt),rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return im(e),null;case 13:if(je(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(ze),null;case 4:return So(),null;case 10:return Zg(e.type._context),null;case 22:case 23:return gm(),null;case 24:return null;default:return null}}var Kc=!1,Pt=!1,TA=typeof WeakSet=="function"?WeakSet:Set,ie=null;function so(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Qe(t,e,i)}else n.current=null}function Dp(t,e,n){try{n()}catch(i){Qe(t,e,i)}}var Mv=!1;function IA(t,e){if(mp=Ku,t=BE(),Kg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yp={focusedElem:t,selectionRange:n},Ku=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,w=_.memoizedState,E=e.stateNode,x=E.getSnapshotBeforeUpdate(e.elementType===e.type?b:Nn(e.type,b),w);E.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(N){Qe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return _=Mv,Mv=!1,_}function Qa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Dp(e,n,s)}r=r.next}while(r!==i)}}function Zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Mp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jx(t){var e=t.alternate;e!==null&&(t.alternate=null,jx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[bl],delete e[wp],delete e[aA],delete e[lA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fx(t){return t.tag===5||t.tag===3||t.tag===4}function Ov(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Op(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yu));else if(i!==4&&(t=t.child,t!==null))for(Op(t,e,n),t=t.sibling;t!==null;)Op(t,e,n),t=t.sibling}function Lp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Lp(t,e,n),t=t.sibling;t!==null;)Lp(t,e,n),t=t.sibling}var gt=null,Dn=!1;function Ui(t,e,n){for(n=n.child;n!==null;)Vx(t,e,n),n=n.sibling}function Vx(t,e,n){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(Hh,n)}catch{}switch(n.tag){case 5:Pt||so(n,e);case 6:var i=gt,r=Dn;gt=null,Ui(t,e,n),gt=i,Dn=r,gt!==null&&(Dn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Dn?(t=gt,n=n.stateNode,t.nodeType===8?ff(t.parentNode,n):t.nodeType===1&&ff(t,n),ml(t)):ff(gt,n.stateNode));break;case 4:i=gt,r=Dn,gt=n.stateNode.containerInfo,Dn=!0,Ui(t,e,n),gt=i,Dn=r;break;case 0:case 11:case 14:case 15:if(!Pt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Dp(n,e,o),r=r.next}while(r!==i)}Ui(t,e,n);break;case 1:if(!Pt&&(so(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Qe(n,e,a)}Ui(t,e,n);break;case 21:Ui(t,e,n);break;case 22:n.mode&1?(Pt=(i=Pt)||n.memoizedState!==null,Ui(t,e,n),Pt=i):Ui(t,e,n);break;default:Ui(t,e,n)}}function Lv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TA),e.forEach(function(i){var r=MA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Dn=!1;break e;case 3:gt=a.stateNode.containerInfo,Dn=!0;break e;case 4:gt=a.stateNode.containerInfo,Dn=!0;break e}a=a.return}if(gt===null)throw Error(K(160));Vx(s,o,r),gt=null,Dn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Qe(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ux(e,t),e=e.sibling}function Ux(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),qn(t),i&4){try{Qa(3,t,t.return),Zh(3,t)}catch(b){Qe(t,t.return,b)}try{Qa(5,t,t.return)}catch(b){Qe(t,t.return,b)}}break;case 1:An(e,t),qn(t),i&512&&n!==null&&so(n,n.return);break;case 5:if(An(e,t),qn(t),i&512&&n!==null&&so(n,n.return),t.flags&32){var r=t.stateNode;try{dl(r,"")}catch(b){Qe(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lE(r,s),op(a,o);var c=op(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?fE(r,d):h==="dangerouslySetInnerHTML"?hE(r,d):h==="children"?dl(r,d):Mg(r,h,d,c)}switch(a){case"input":tp(r,s);break;case"textarea":cE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?co(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?co(r,!!s.multiple,s.defaultValue,!0):co(r,!!s.multiple,s.multiple?[]:"",!1))}r[bl]=s}catch(b){Qe(t,t.return,b)}}break;case 6:if(An(e,t),qn(t),i&4){if(t.stateNode===null)throw Error(K(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(b){Qe(t,t.return,b)}}break;case 3:if(An(e,t),qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ml(e.containerInfo)}catch(b){Qe(t,t.return,b)}break;case 4:An(e,t),qn(t);break;case 13:An(e,t),qn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(fm=Je())),i&4&&Lv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(c=Pt)||h,An(e,t),Pt=c):An(e,t),qn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ie=t,h=t.child;h!==null;){for(d=ie=h;ie!==null;){switch(f=ie,m=f.child,f.tag){case 0:case 11:case 14:case 15:Qa(4,f,f.return);break;case 1:so(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(b){Qe(i,n,b)}}break;case 5:so(f,f.return);break;case 22:if(f.memoizedState!==null){Fv(d);continue}}m!==null?(m.return=f,ie=m):Fv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dE("display",o))}catch(b){Qe(t,t.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){Qe(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:An(e,t),qn(t),i&4&&Lv(t);break;case 21:break;default:An(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fx(n)){var i=n;break e}n=n.return}throw Error(K(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(dl(r,""),i.flags&=-33);var s=Ov(t);Lp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Ov(t);Op(t,a,o);break;default:throw Error(K(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SA(t,e,n){ie=t,Bx(t)}function Bx(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var r=ie,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Kc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Pt;a=Kc;var c=Pt;if(Kc=o,(Pt=l)&&!c)for(ie=r;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?Vv(r):l!==null?(l.return=o,ie=l):Vv(r);for(;s!==null;)ie=s,Bx(s),s=s.sibling;ie=r,Kc=a,Pt=c}jv(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ie=s):jv(t)}}function jv(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||Zh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Pt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Nn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bv(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ml(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Pt||e.flags&512&&Mp(e)}catch(f){Qe(e,e.return,f)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Fv(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Vv(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zh(4,e)}catch(l){Qe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Qe(e,r,l)}}var s=e.return;try{Mp(e)}catch(l){Qe(e,s,l)}break;case 5:var o=e.return;try{Mp(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var kA=Math.ceil,ah=Mi.ReactCurrentDispatcher,hm=Mi.ReactCurrentOwner,wn=Mi.ReactCurrentBatchConfig,Ee=0,ft=null,it=null,vt=0,sn=0,oo=Nr(0),lt=0,kl=null,ms=0,ed=0,dm=0,Ya=null,Ht=null,fm=0,Co=1/0,mi=null,lh=!1,jp=null,fr=null,Gc=!1,nr=null,ch=0,Xa=0,Fp=null,Su=-1,ku=0;function Ut(){return Ee&6?Je():Su!==-1?Su:Su=Je()}function pr(t){return t.mode&1?Ee&2&&vt!==0?vt&-vt:uA.transition!==null?(ku===0&&(ku=IE()),ku):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:NE(t.type)),t):1}function jn(t,e,n,i){if(50<Xa)throw Xa=0,Fp=null,Error(K(185));Gl(t,n,i),(!(Ee&2)||t!==ft)&&(t===ft&&(!(Ee&2)&&(ed|=n),lt===4&&Qi(t,vt)),Xt(t,i),n===1&&Ee===0&&!(e.mode&1)&&(Co=Je()+500,Yh&&Dr()))}function Xt(t,e){var n=t.callbackNode;uC(t,e);var i=qu(t,t===ft?vt:0);if(i===0)n!==null&&G_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&G_(n),e===1)t.tag===0?cA(Uv.bind(null,t)):XE(Uv.bind(null,t)),sA(function(){!(Ee&6)&&Dr()}),n=null;else{switch(SE(i)){case 1:n=Vg;break;case 4:n=xE;break;case 16:n=Hu;break;case 536870912:n=TE;break;default:n=Hu}n=Qx(n,zx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zx(t,e){if(Su=-1,ku=0,Ee&6)throw Error(K(327));var n=t.callbackNode;if(go()&&t.callbackNode!==n)return null;var i=qu(t,t===ft?vt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=uh(t,i);else{e=i;var r=Ee;Ee|=2;var s=Wx();(ft!==t||vt!==e)&&(mi=null,Co=Je()+500,cs(t,e));do try{PA();break}catch(a){$x(t,a)}while(!0);Jg(),ah.current=s,Ee=r,it!==null?e=0:(ft=null,vt=0,e=lt)}if(e!==0){if(e===2&&(r=hp(t),r!==0&&(i=r,e=Vp(t,r))),e===1)throw n=kl,cs(t,0),Qi(t,i),Xt(t,Je()),n;if(e===6)Qi(t,i);else{if(r=t.current.alternate,!(i&30)&&!CA(r)&&(e=uh(t,i),e===2&&(s=hp(t),s!==0&&(i=s,e=Vp(t,s))),e===1))throw n=kl,cs(t,0),Qi(t,i),Xt(t,Je()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(K(345));case 2:Yr(t,Ht,mi);break;case 3:if(Qi(t,i),(i&130023424)===i&&(e=fm+500-Je(),10<e)){if(qu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ut(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=vp(Yr.bind(null,t,Ht,mi),e);break}Yr(t,Ht,mi);break;case 4:if(Qi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ln(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kA(i/1960))-i,10<i){t.timeoutHandle=vp(Yr.bind(null,t,Ht,mi),i);break}Yr(t,Ht,mi);break;case 5:Yr(t,Ht,mi);break;default:throw Error(K(329))}}}return Xt(t,Je()),t.callbackNode===n?zx.bind(null,t):null}function Vp(t,e){var n=Ya;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=uh(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&Up(e)),t}function Up(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function CA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Vn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qi(t,e){for(e&=~dm,e&=~ed,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),i=1<<n;t[n]=-1,e&=~i}}function Uv(t){if(Ee&6)throw Error(K(327));go();var e=qu(t,0);if(!(e&1))return Xt(t,Je()),null;var n=uh(t,e);if(t.tag!==0&&n===2){var i=hp(t);i!==0&&(e=i,n=Vp(t,i))}if(n===1)throw n=kl,cs(t,0),Qi(t,e),Xt(t,Je()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,Ht,mi),Xt(t,Je()),null}function pm(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Co=Je()+500,Yh&&Dr())}}function ys(t){nr!==null&&nr.tag===0&&!(Ee&6)&&go();var e=Ee;Ee|=1;var n=wn.transition,i=Ae;try{if(wn.transition=null,Ae=1,t)return t()}finally{Ae=i,wn.transition=n,Ee=e,!(Ee&6)&&Dr()}}function gm(){sn=oo.current,je(oo)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rA(n)),it!==null)for(n=it.return;n!==null;){var i=n;switch(Qg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xu();break;case 3:So(),je(Qt),je(Dt),rm();break;case 5:im(i);break;case 4:So();break;case 13:je(ze);break;case 19:je(ze);break;case 10:Zg(i.type._context);break;case 22:case 23:gm()}n=n.return}if(ft=t,it=t=gr(t.current,null),vt=sn=e,lt=0,kl=null,dm=ed=ms=0,Ht=Ya=null,is!==null){for(e=0;e<is.length;e++)if(n=is[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}is=null}return t}function $x(t,e){do{var n=it;try{if(Jg(),xu.current=oh,sh){for(var i=$e.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}sh=!1}if(gs=0,ht=ot=$e=null,Ga=!1,Tl=0,hm.current=null,n===null||n.return===null){lt=1,kl=e,it=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=vt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=kv(o);if(m!==null){m.flags&=-257,Cv(m,o,a,s,e),m.mode&1&&Sv(s,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var b=new Set;b.add(l),e.updateQueue=b}else _.add(l);break e}else{if(!(e&1)){Sv(s,c,e),mm();break e}l=Error(K(426))}}else if(Ue&&a.mode&1){var w=kv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Cv(w,o,a,s,e),Yg(ko(l,a));break e}}s=l=ko(l,a),lt!==4&&(lt=2),Ya===null?Ya=[s]:Ya.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Sx(s,l,e);wv(s,E);break e;case 1:a=l;var x=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(fr===null||!fr.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=kx(s,a,e);wv(s,N);break e}}s=s.return}while(s!==null)}qx(n)}catch(M){e=M,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function Wx(){var t=ah.current;return ah.current=oh,t===null?oh:t}function mm(){(lt===0||lt===3||lt===2)&&(lt=4),ft===null||!(ms&268435455)&&!(ed&268435455)||Qi(ft,vt)}function uh(t,e){var n=Ee;Ee|=2;var i=Wx();(ft!==t||vt!==e)&&(mi=null,cs(t,e));do try{AA();break}catch(r){$x(t,r)}while(!0);if(Jg(),Ee=n,ah.current=i,it!==null)throw Error(K(261));return ft=null,vt=0,lt}function AA(){for(;it!==null;)Hx(it)}function PA(){for(;it!==null&&!tC();)Hx(it)}function Hx(t){var e=Gx(t.alternate,t,sn);t.memoizedProps=t.pendingProps,e===null?qx(t):it=e,hm.current=null}function qx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xA(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,it=null;return}}else if(n=EA(n,e,sn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);lt===0&&(lt=5)}function Yr(t,e,n){var i=Ae,r=wn.transition;try{wn.transition=null,Ae=1,RA(t,e,n,i)}finally{wn.transition=r,Ae=i}return null}function RA(t,e,n,i){do go();while(nr!==null);if(Ee&6)throw Error(K(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hC(t,s),t===ft&&(it=ft=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gc||(Gc=!0,Qx(Hu,function(){return go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wn.transition,wn.transition=null;var o=Ae;Ae=1;var a=Ee;Ee|=4,hm.current=null,IA(t,n),Ux(n,t),XC(yp),Ku=!!mp,yp=mp=null,t.current=n,SA(n),nC(),Ee=a,Ae=o,wn.transition=s}else t.current=n;if(Gc&&(Gc=!1,nr=t,ch=r),s=t.pendingLanes,s===0&&(fr=null),sC(n.stateNode),Xt(t,Je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(lh)throw lh=!1,t=jp,jp=null,t;return ch&1&&t.tag!==0&&go(),s=t.pendingLanes,s&1?t===Fp?Xa++:(Xa=0,Fp=t):Xa=0,Dr(),null}function go(){if(nr!==null){var t=SE(ch),e=wn.transition,n=Ae;try{if(wn.transition=null,Ae=16>t?16:t,nr===null)var i=!1;else{if(t=nr,nr=null,ch=0,Ee&6)throw Error(K(331));var r=Ee;for(Ee|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:Qa(8,h,s)}var d=h.child;if(d!==null)d.return=h,ie=d;else for(;ie!==null;){h=ie;var f=h.sibling,m=h.return;if(jx(h),h===c){ie=null;break}if(f!==null){f.return=m,ie=f;break}ie=m}}}var _=s.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qa(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,ie=E;break e}ie=s.return}}var x=t.current;for(ie=x;ie!==null;){o=ie;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,ie=k;else e:for(o=x;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zh(9,a)}}catch(M){Qe(a,a.return,M)}if(a===o){ie=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,ie=N;break e}ie=a.return}}if(Ee=r,Dr(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(Hh,t)}catch{}i=!0}return i}finally{Ae=n,wn.transition=e}}return!1}function Bv(t,e,n){e=ko(n,e),e=Sx(t,e,1),t=dr(t,e,1),e=Ut(),t!==null&&(Gl(t,1,e),Xt(t,e))}function Qe(t,e,n){if(t.tag===3)Bv(t,t,n);else for(;e!==null;){if(e.tag===3){Bv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fr===null||!fr.has(i))){t=ko(n,t),t=kx(e,t,1),e=dr(e,t,1),t=Ut(),e!==null&&(Gl(e,1,t),Xt(e,t));break}}e=e.return}}function NA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ut(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(vt&n)===n&&(lt===4||lt===3&&(vt&130023424)===vt&&500>Je()-fm?cs(t,0):dm|=n),Xt(t,e)}function Kx(t,e){e===0&&(t.mode&1?(e=Fc,Fc<<=1,!(Fc&130023424)&&(Fc=4194304)):e=1);var n=Ut();t=Ci(t,e),t!==null&&(Gl(t,e,n),Xt(t,n))}function DA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kx(t,n)}function MA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(e),Kx(t,n)}var Gx;Gx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,bA(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Ue&&e.flags&1048576&&JE(e,eh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Iu(t,e),t=e.pendingProps;var r=xo(e,Dt.current);po(e,n),r=om(null,e,i,t,r,n);var s=am();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(i)?(s=!0,Ju(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,tm(e),r.updater=Jh,e.stateNode=r,r._reactInternals=e,Sp(e,i,t,n),e=Ap(null,e,i,!0,s,n)):(e.tag=0,Ue&&s&&Gg(e),Ft(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Iu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=LA(i),t=Nn(i,t),r){case 0:e=Cp(null,e,i,t,n);break e;case 1:e=Rv(null,e,i,t,n);break e;case 11:e=Av(null,e,i,t,n);break e;case 14:e=Pv(null,e,i,Nn(i.type,t),n);break e}throw Error(K(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nn(i,r),Cp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nn(i,r),Rv(t,e,i,r,n);case 3:e:{if(Rx(e),t===null)throw Error(K(387));i=e.pendingProps,s=e.memoizedState,r=s.element,rx(t,e),ih(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ko(Error(K(423)),e),e=Nv(t,e,i,n,r);break e}else if(i!==r){r=ko(Error(K(424)),e),e=Nv(t,e,i,n,r);break e}else for(on=hr(e.stateNode.containerInfo.firstChild),ln=e,Ue=!0,Mn=null,n=nx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(To(),i===r){e=Ai(t,e,n);break e}Ft(t,e,i,n)}e=e.child}return e;case 5:return sx(e),t===null&&xp(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,_p(i,r)?o=null:s!==null&&_p(i,s)&&(e.flags|=32),Px(t,e),Ft(t,e,o,n),e.child;case 6:return t===null&&xp(e),null;case 13:return Nx(t,e,n);case 4:return nm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Io(e,null,i,n):Ft(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nn(i,r),Av(t,e,i,r,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ne(th,i._currentValue),i._currentValue=o,s!==null)if(Vn(s.value,o)){if(s.children===r.children&&!Qt.current){e=Ai(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ti(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Tp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Tp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ft(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,po(e,n),r=xn(r),i=i(r),e.flags|=1,Ft(t,e,i,n),e.child;case 14:return i=e.type,r=Nn(i,e.pendingProps),r=Nn(i.type,r),Pv(t,e,i,r,n);case 15:return Cx(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Nn(i,r),Iu(t,e),e.tag=1,Yt(i)?(t=!0,Ju(e)):t=!1,po(e,n),Ix(e,i,r),Sp(e,i,r,n),Ap(null,e,i,!0,t,n);case 19:return Dx(t,e,n);case 22:return Ax(t,e,n)}throw Error(K(156,e.tag))};function Qx(t,e){return EE(t,e)}function OA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,i){return new OA(t,e,n,i)}function ym(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LA(t){if(typeof t=="function")return ym(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lg)return 11;if(t===jg)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")ym(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ys:return us(n.children,r,s,e);case Og:o=8,r|=8;break;case Yf:return t=_n(12,n,e,r|2),t.elementType=Yf,t.lanes=s,t;case Xf:return t=_n(13,n,e,r),t.elementType=Xf,t.lanes=s,t;case Jf:return t=_n(19,n,e,r),t.elementType=Jf,t.lanes=s,t;case sE:return td(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iE:o=10;break e;case rE:o=9;break e;case Lg:o=11;break e;case jg:o=14;break e;case qi:o=16,i=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=_n(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function us(t,e,n,i){return t=_n(7,t,i,e),t.lanes=n,t}function td(t,e,n,i){return t=_n(22,t,i,e),t.elementType=sE,t.lanes=n,t.stateNode={isHidden:!1},t}function bf(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function Ef(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function _m(t,e,n,i,r,s,o,a,l){return t=new jA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_n(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tm(s),t}function FA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Yx(t){if(!t)return xr;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Yt(n))return YE(t,n,e)}return e}function Xx(t,e,n,i,r,s,o,a,l){return t=_m(n,i,!0,t,r,s,o,a,l),t.context=Yx(null),n=t.current,i=Ut(),r=pr(n),s=Ti(i,r),s.callback=e??null,dr(n,s,r),t.current.lanes=r,Gl(t,r,i),Xt(t,i),t}function nd(t,e,n,i){var r=e.current,s=Ut(),o=pr(r);return n=Yx(n),e.context===null?e.context=n:e.pendingContext=n,e=Ti(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=dr(r,e,o),t!==null&&(jn(t,r,o,s),Eu(t,r,o)),o}function hh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vm(t,e){zv(t,e),(t=t.alternate)&&zv(t,e)}function VA(){return null}var Jx=typeof reportError=="function"?reportError:function(t){console.error(t)};function wm(t){this._internalRoot=t}id.prototype.render=wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));nd(t,e,null,null)};id.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){nd(null,t,null,null)}),e[ki]=null}};function id(t){this._internalRoot=t}id.prototype.unstable_scheduleHydration=function(t){if(t){var e=AE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gi.length&&e!==0&&e<Gi[n].priority;n++);Gi.splice(n,0,t),n===0&&RE(t)}};function bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $v(){}function UA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=hh(o);s.call(c)}}var o=Xx(e,i,t,0,null,!1,!1,"",$v);return t._reactRootContainer=o,t[ki]=o.current,vl(t.nodeType===8?t.parentNode:t),ys(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=hh(l);a.call(c)}}var l=_m(t,0,!1,null,null,!1,!1,"",$v);return t._reactRootContainer=l,t[ki]=l.current,vl(t.nodeType===8?t.parentNode:t),ys(function(){nd(e,l,n,i)}),l}function sd(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=hh(o);a.call(l)}}nd(e,o,t,r)}else o=UA(n,e,t,r,i);return hh(o)}kE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ra(e.pendingLanes);n!==0&&(Ug(e,n|1),Xt(e,Je()),!(Ee&6)&&(Co=Je()+500,Dr()))}break;case 13:ys(function(){var i=Ci(t,1);if(i!==null){var r=Ut();jn(i,t,1,r)}}),vm(t,1)}};Bg=function(t){if(t.tag===13){var e=Ci(t,134217728);if(e!==null){var n=Ut();jn(e,t,134217728,n)}vm(t,134217728)}};CE=function(t){if(t.tag===13){var e=pr(t),n=Ci(t,e);if(n!==null){var i=Ut();jn(n,t,e,i)}vm(t,e)}};AE=function(){return Ae};PE=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};lp=function(t,e,n){switch(e){case"input":if(tp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Qh(i);if(!r)throw Error(K(90));aE(i),tp(i,r)}}}break;case"textarea":cE(t,n);break;case"select":e=n.value,e!=null&&co(t,!!n.multiple,e,!1)}};mE=pm;yE=ys;var BA={usingClientEntryPoint:!1,Events:[Yl,eo,Qh,pE,gE,pm]},va={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zA={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wE(t),t===null?null:t.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||VA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Hh=Qc.inject(zA),ei=Qc}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BA;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(e))throw Error(K(200));return FA(t,e,null,n)};hn.createRoot=function(t,e){if(!bm(t))throw Error(K(299));var n=!1,i="",r=Jx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=_m(t,1,!1,null,null,n,!1,i,r),t[ki]=e.current,vl(t.nodeType===8?t.parentNode:t),new wm(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=wE(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return ys(t)};hn.hydrate=function(t,e,n){if(!rd(e))throw Error(K(200));return sd(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!bm(t))throw Error(K(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Jx;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Xx(e,null,t,1,n??null,r,!1,s,o),t[ki]=e.current,vl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new id(e)};hn.render=function(t,e,n){if(!rd(e))throw Error(K(200));return sd(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!rd(t))throw Error(K(40));return t._reactRootContainer?(ys(function(){sd(null,null,t,!1,function(){t._reactRootContainer=null,t[ki]=null})}),!0):!1};hn.unstable_batchedUpdates=pm;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!rd(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return sd(t,e,n,!1,i)};hn.version="18.3.1-next-f1338f8080-20240426";function Zx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zx)}catch(t){console.error(t)}}Zx(),Zb.exports=hn;var $A=Zb.exports,Wv=$A;Gf.createRoot=Wv.createRoot,Gf.hydrateRoot=Wv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cl.apply(this,arguments)}var ir;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ir||(ir={}));const Hv="popstate";function WA(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Bp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:dh(r)}return qA(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Em(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HA(){return Math.random().toString(36).substr(2,8)}function qv(t,e){return{usr:t.state,key:t.key,idx:e}}function Bp(t,e,n,i){return n===void 0&&(n=null),Cl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$o(e):e,{state:n,key:e&&e.key||i||HA()})}function dh(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function $o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function qA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=ir.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Cl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=ir.Pop;let w=h(),E=w==null?null:w-c;c=w,l&&l({action:a,location:b.location,delta:E})}function f(w,E){a=ir.Push;let x=Bp(b.location,w,E);c=h()+1;let k=qv(x,c),N=b.createHref(x);try{o.pushState(k,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(N)}s&&l&&l({action:a,location:b.location,delta:1})}function m(w,E){a=ir.Replace;let x=Bp(b.location,w,E);c=h();let k=qv(x,c),N=b.createHref(x);o.replaceState(k,"",N),s&&l&&l({action:a,location:b.location,delta:0})}function _(w){let E=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof w=="string"?w:dh(w);return x=x.replace(/ $/,"%20"),We(E,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,E)}let b={get action(){return a},get location(){return t(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Hv,d),l=w,()=>{r.removeEventListener(Hv,d),l=null}},createHref(w){return e(r,w)},createURL:_,encodeLocation(w){let E=_(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:m,go(w){return o.go(w)}};return b}var Kv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Kv||(Kv={}));function KA(t,e,n){return n===void 0&&(n="/"),GA(t,e,n)}function GA(t,e,n,i){let r=typeof e=="string"?$o(e):e,s=Ao(r.pathname||"/",n);if(s==null)return null;let o=eT(t);QA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=oP(s);a=rP(o[l],c)}return a}function eT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=mr([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(We(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),eT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:nP(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of tT(s.path))r(s,o,l)}),e}function tT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=tT(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function QA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iP(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const YA=/^:[\w-]+$/,XA=3,JA=2,ZA=1,eP=10,tP=-2,Gv=t=>t==="*";function nP(t,e){let n=t.split("/"),i=n.length;return n.some(Gv)&&(i+=tP),e&&(i+=JA),n.filter(r=>!Gv(r)).reduce((r,s)=>r+(YA.test(s)?XA:s===""?ZA:eP),i)}function iP(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function rP(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=zp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:mr([s,d.pathname]),pathnameBase:hP(mr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=mr([s,d.pathnameBase]))}return o}function zp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=sP(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let b=a[d]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const _=a[d];return m&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function sP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Em(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function oP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Em(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ao(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const aP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lP=t=>aP.test(t);function cP(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?$o(t):t,s;if(n)if(lP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Em(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Qv(n.substring(1),"/"):s=Qv(n,e)}else s=e;return{pathname:s,search:dP(i),hash:fP(r)}}function Qv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function xf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xm(t,e){let n=uP(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Tm(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=$o(t):(r=Cl({},t),We(!r.pathname||!r.pathname.includes("?"),xf("?","pathname","search",r)),We(!r.pathname||!r.pathname.includes("#"),xf("#","pathname","hash",r)),We(!r.search||!r.search.includes("#"),xf("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=cP(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const mr=t=>t.join("/").replace(/\/\/+/g,"/"),hP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nT=["post","put","patch","delete"];new Set(nT);const gP=["get",...nT];new Set(gP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Al(){return Al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Al.apply(this,arguments)}const od=D.createContext(null),iT=D.createContext(null),li=D.createContext(null),ad=D.createContext(null),Mr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),rT=D.createContext(null);function mP(t,e){let{relative:n}=e===void 0?{}:e;Wo()||We(!1);let{basename:i,navigator:r}=D.useContext(li),{hash:s,pathname:o,search:a}=ld(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:mr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Wo(){return D.useContext(ad)!=null}function Or(){return Wo()||We(!1),D.useContext(ad).location}function sT(t){D.useContext(li).static||D.useLayoutEffect(t)}function Lr(){let{isDataRoute:t}=D.useContext(Mr);return t?AP():yP()}function yP(){Wo()||We(!1);let t=D.useContext(od),{basename:e,future:n,navigator:i}=D.useContext(li),{matches:r}=D.useContext(Mr),{pathname:s}=Or(),o=JSON.stringify(xm(r,n.v7_relativeSplatPath)),a=D.useRef(!1);return sT(()=>{a.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=Tm(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:mr([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function ld(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=D.useContext(li),{matches:r}=D.useContext(Mr),{pathname:s}=Or(),o=JSON.stringify(xm(r,i.v7_relativeSplatPath));return D.useMemo(()=>Tm(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function _P(t,e){return vP(t,e)}function vP(t,e,n,i){Wo()||We(!1);let{navigator:r}=D.useContext(li),{matches:s}=D.useContext(Mr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Or(),h;if(e){var d;let w=typeof e=="string"?$o(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||We(!1),h=w}else h=c;let f=h.pathname||"/",m=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=KA(t,{pathname:m}),b=TP(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:mr([l,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:mr([l,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,i);return e&&b?D.createElement(ad.Provider,{value:{location:Al({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ir.Pop}},b):b}function wP(){let t=CP(),e=pP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,null)}const bP=D.createElement(wP,null);class EP extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Mr.Provider,{value:this.props.routeContext},D.createElement(rT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xP(t){let{routeContext:e,match:n,children:i}=t,r=D.useContext(od);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Mr.Provider,{value:e},i)}function TP(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||We(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:m}=n,_=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,_=!1,b=null,w=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,b=d.route.errorElement||bP,l&&(c<0&&f===0?(PP("route-fallback"),_=!0,w=null):c===f&&(_=!0,w=d.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),x=()=>{let k;return m?k=b:_?k=w:d.route.Component?k=D.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=h,D.createElement(xP,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:k})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?D.createElement(EP,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}var oT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(oT||{}),aT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(aT||{});function IP(t){let e=D.useContext(od);return e||We(!1),e}function SP(t){let e=D.useContext(iT);return e||We(!1),e}function kP(t){let e=D.useContext(Mr);return e||We(!1),e}function lT(t){let e=kP(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function CP(){var t;let e=D.useContext(rT),n=SP(),i=lT();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function AP(){let{router:t}=IP(oT.UseNavigateStable),e=lT(aT.UseNavigateStable),n=D.useRef(!1);return sT(()=>{n.current=!0}),D.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Al({fromRouteId:e},s)))},[t,e])}const Yv={};function PP(t,e,n){Yv[t]||(Yv[t]=!0)}function RP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function $p(t){let{to:e,replace:n,state:i,relative:r}=t;Wo()||We(!1);let{future:s,static:o}=D.useContext(li),{matches:a}=D.useContext(Mr),{pathname:l}=Or(),c=Lr(),h=Tm(e,xm(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return D.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function Rn(t){We(!1)}function NP(t){let{basename:e="/",children:n=null,location:i,navigationType:r=ir.Pop,navigator:s,static:o=!1,future:a}=t;Wo()&&We(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:s,static:o,future:Al({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=$o(i));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:_="default"}=i,b=D.useMemo(()=>{let w=Ao(h,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:m,key:_},navigationType:r}},[l,h,d,f,m,_,r]);return b==null?null:D.createElement(li.Provider,{value:c},D.createElement(ad.Provider,{children:n,value:b}))}function DP(t){let{children:e,location:n}=t;return _P(Wp(e),n)}new Promise(()=>{});function Wp(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(i,r)=>{if(!D.isValidElement(i))return;let s=[...e,r];if(i.type===D.Fragment){n.push.apply(n,Wp(i.props.children,s));return}i.type!==Rn&&We(!1),!i.props.index||!i.props.children||We(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Wp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fh(){return fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fh.apply(this,arguments)}function cT(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function MP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OP(t,e){return t.button===0&&(!e||e==="_self")&&!MP(t)}const LP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],FP="6";try{window.__reactRouterVersion=FP}catch{}const VP=D.createContext({isTransitioning:!1}),UP="startTransition",Xv=N1[UP];function BP(t){let{basename:e,children:n,future:i,window:r}=t,s=D.useRef();s.current==null&&(s.current=WA({window:r,v5Compat:!0}));let o=s.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=D.useCallback(d=>{c&&Xv?Xv(()=>l(d)):l(d)},[l,c]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.useEffect(()=>RP(i),[i]),D.createElement(NP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const zP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$P=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pl=D.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=cT(e,LP),{basename:m}=D.useContext(li),_,b=!1;if(typeof c=="string"&&$P.test(c)&&(_=c,zP))try{let k=new URL(window.location.href),N=c.startsWith("//")?new URL(k.protocol+c):new URL(c),M=Ao(N.pathname,m);N.origin===k.origin&&M!=null?c=M+N.search+N.hash:b=!0}catch{}let w=mP(c,{relative:r}),E=HP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function x(k){i&&i(k),k.defaultPrevented||E(k)}return D.createElement("a",fh({},f,{href:_||w,onClick:b||s?i:x,ref:n,target:l}))}),Bs=D.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=cT(e,jP),f=ld(l,{relative:d.relative}),m=Or(),_=D.useContext(iT),{navigator:b,basename:w}=D.useContext(li),E=_!=null&&qP(f)&&c===!0,x=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,k=m.pathname,N=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(k=k.toLowerCase(),N=N?N.toLowerCase():null,x=x.toLowerCase()),N&&w&&(N=Ao(N,w)||N);const M=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let O=k===x||!o&&k.startsWith(x)&&k.charAt(M)==="/",I=N!=null&&(N===x||!o&&N.startsWith(x)&&N.charAt(x.length)==="/"),v={isActive:O,isPending:I,isTransitioning:E},C=O?i:void 0,P;typeof s=="function"?P=s(v):P=[s,O?"active":null,I?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(v):a;return D.createElement(Pl,fh({},d,{"aria-current":C,className:P,ref:n,style:R,to:l,viewTransition:c}),typeof h=="function"?h(v):h)});var Hp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hp||(Hp={}));var Jv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Jv||(Jv={}));function WP(t){let e=D.useContext(od);return e||We(!1),e}function HP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Lr(),c=Or(),h=ld(t,{relative:o});return D.useCallback(d=>{if(OP(d,n)){d.preventDefault();let f=i!==void 0?i:dh(c)===dh(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}function qP(t,e){e===void 0&&(e={});let n=D.useContext(VP);n==null&&We(!1);let{basename:i}=WP(Hp.useViewTransitionState),r=ld(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ao(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Ao(n.nextLocation.pathname,i)||n.nextLocation.pathname;return zp(r.pathname,o)!=null||zp(r.pathname,s)!=null}var Zv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},KP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new GP;const f=s<<2|a>>4;if(i.push(f),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const _=c<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QP=function(t){const e=uT(t);return hT.encodeByteArray(e,!0)},ph=function(t){return QP(t).replace(/\./g,"")},dT=function(t){try{return hT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=()=>YP().__FIREBASE_DEFAULTS__,JP=()=>{if(typeof process>"u"||typeof Zv>"u")return;const t=Zv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dT(t[1]);return e&&JSON.parse(e)},cd=()=>{try{return XP()||JP()||ZP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fT=t=>{var e,n;return(n=(e=cd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eR=t=>{const e=fT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},pT=()=>{var t;return(t=cd())===null||t===void 0?void 0:t.config},gT=t=>{var e;return(e=cd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ph(JSON.stringify(n)),ph(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function rR(){var t;const e=(t=cd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aR(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lR(){return!rR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yT(){try{return typeof indexedDB=="object"}catch{return!1}}function _T(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function cR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="FirebaseError";class Wn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=uR,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,As.prototype.create)}}class As{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?hR(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Wn(r,a,i)}}function hR(t,e){return t.replace(dR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const dR=/\{\$([^}]+)}/g;function fR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(e0(s)&&e0(o)){if(!gh(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function e0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Da(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Ma(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pR(t,e){const n=new gR(t,e);return n.subscribe.bind(n)}class gR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");mR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Tf),r.error===void 0&&(r.error=Tf),r.complete===void 0&&(r.complete=Tf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1e3,_R=2,vR=4*60*60*1e3,wR=.5;function t0(t,e=yR,n=_R){const i=e*Math.pow(n,t),r=Math.round(wR*i*(Math.random()-.5)*2);return Math.min(vR,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t){return t&&t._delegate?t._delegate:t}class Un{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new tR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xR(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ER(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ER(t){return t===Xr?void 0:t}function xR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const IR={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},SR=_e.INFO,kR={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},CR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=kR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ud{constructor(e){this.name=e,this._logLevel=SR,this._logHandler=CR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const AR=(t,e)=>e.some(n=>t instanceof n);let n0,i0;function PR(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RR(){return i0||(i0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vT=new WeakMap,qp=new WeakMap,wT=new WeakMap,If=new WeakMap,Im=new WeakMap;function NR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(yr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vT.set(n,t)}).catch(()=>{}),Im.set(e,t),e}function DR(t){if(qp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qp.set(t,e)}let Kp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MR(t){Kp=t(Kp)}function OR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Sf(this),e,...n);return wT.set(i,e.sort?e.sort():[e]),yr(i)}:RR().includes(t)?function(...e){return t.apply(Sf(this),e),yr(vT.get(this))}:function(...e){return yr(t.apply(Sf(this),e))}}function LR(t){return typeof t=="function"?OR(t):(t instanceof IDBTransaction&&DR(t),AR(t,PR())?new Proxy(t,Kp):t)}function yr(t){if(t instanceof IDBRequest)return NR(t);if(If.has(t))return If.get(t);const e=LR(t);return e!==t&&(If.set(t,e),Im.set(e,t)),e}const Sf=t=>Im.get(t);function bT(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=yr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(yr(o.result),l.oldVersion,l.newVersion,yr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const jR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],kf=new Map;function r0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kf.get(e))return kf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=FR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||jR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return kf.set(e,s),s}MR(t=>({...t,get:(e,n,i)=>r0(e,n)||t.get(e,n,i),has:(e,n)=>!!r0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function UR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gp="@firebase/app",s0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new ud("@firebase/app"),BR="@firebase/app-compat",zR="@firebase/analytics-compat",$R="@firebase/analytics",WR="@firebase/app-check-compat",HR="@firebase/app-check",qR="@firebase/auth",KR="@firebase/auth-compat",GR="@firebase/database",QR="@firebase/data-connect",YR="@firebase/database-compat",XR="@firebase/functions",JR="@firebase/functions-compat",ZR="@firebase/installations",eN="@firebase/installations-compat",tN="@firebase/messaging",nN="@firebase/messaging-compat",iN="@firebase/performance",rN="@firebase/performance-compat",sN="@firebase/remote-config",oN="@firebase/remote-config-compat",aN="@firebase/storage",lN="@firebase/storage-compat",cN="@firebase/firestore",uN="@firebase/vertexai-preview",hN="@firebase/firestore-compat",dN="firebase",fN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="[DEFAULT]",pN={[Gp]:"fire-core",[BR]:"fire-core-compat",[$R]:"fire-analytics",[zR]:"fire-analytics-compat",[HR]:"fire-app-check",[WR]:"fire-app-check-compat",[qR]:"fire-auth",[KR]:"fire-auth-compat",[GR]:"fire-rtdb",[QR]:"fire-data-connect",[YR]:"fire-rtdb-compat",[XR]:"fire-fn",[JR]:"fire-fn-compat",[ZR]:"fire-iid",[eN]:"fire-iid-compat",[tN]:"fire-fcm",[nN]:"fire-fcm-compat",[iN]:"fire-perf",[rN]:"fire-perf-compat",[sN]:"fire-rc",[oN]:"fire-rc-compat",[aN]:"fire-gcs",[lN]:"fire-gcs-compat",[cN]:"fire-fst",[hN]:"fire-fst-compat",[uN]:"fire-vertex","fire-js":"fire-js",[dN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,gN=new Map,Yp=new Map;function o0(t,e){try{t.container.addComponent(e)}catch(n){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oi(t){const e=t.name;if(Yp.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;Yp.set(e,t);for(const n of mh.values())o0(n,t);for(const n of gN.values())o0(n,t);return!0}function Zl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new As("app","Firebase",mN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=fN;function ET(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Qp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw _r.create("bad-app-name",{appName:String(r)});if(n||(n=pT()),!n)throw _r.create("no-options");const s=mh.get(r);if(s){if(gh(n,s.options)&&gh(i,s.config))return s;throw _r.create("duplicate-app",{appName:r})}const o=new TR(r);for(const l of Yp.values())o.addComponent(l);const a=new yN(n,i,o);return mh.set(r,a),a}function xT(t=Qp){const e=mh.get(t);if(!e&&t===Qp&&pT())return ET();if(!e)throw _r.create("no-app",{appName:t});return e}function bn(t,e,n){var i;let r=(i=pN[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(a.join(" "));return}oi(new Un(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="firebase-heartbeat-database",vN=1,Rl="firebase-heartbeat-store";let Cf=null;function TT(){return Cf||(Cf=bT(_N,vN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rl)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),Cf}async function wN(t){try{const n=(await TT()).transaction(Rl),i=await n.objectStore(Rl).get(IT(t));return await n.done,i}catch(e){if(e instanceof Wn)Pi.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(n.message)}}}async function a0(t,e){try{const i=(await TT()).transaction(Rl,"readwrite");await i.objectStore(Rl).put(e,IT(t)),await i.done}catch(n){if(n instanceof Wn)Pi.warn(n.message);else{const i=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pi.warn(i.message)}}}function IT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=1024,EN=30*24*60*60*1e3;class xN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=l0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=EN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Pi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=l0(),{heartbeatsToSend:i,unsentEntries:r}=TN(this._heartbeatsCache.heartbeats),s=ph(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Pi.warn(n),""}}}function l0(){return new Date().toISOString().substring(0,10)}function TN(t,e=bN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),c0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),c0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class IN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yT()?_T().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return a0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return a0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function c0(t){return ph(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){oi(new Un("platform-logger",e=>new VR(e),"PRIVATE")),oi(new Un("heartbeat",e=>new xN(e),"PRIVATE")),bn(Gp,s0,t),bn(Gp,s0,"esm2017"),bn("fire-js","")}SN("");function Sm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ST(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kN=ST,kT=new As("auth","Firebase",ST());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new ud("@firebase/auth");function CN(t,...e){yh.logLevel<=_e.WARN&&yh.warn(`Auth (${Ho}): ${t}`,...e)}function Au(t,...e){yh.logLevel<=_e.ERROR&&yh.error(`Auth (${Ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw km(t,...e)}function ni(t,...e){return km(t,...e)}function CT(t,e,n){const i=Object.assign(Object.assign({},kN()),{[e]:n});return new As("auth","Firebase",i).create(e,{appName:t.name})}function Ii(t){return CT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function km(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return kT.create(t,...e)}function ue(t,e,...n){if(!t)throw km(e,...n)}function bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Au(e),new Error(e)}function Ri(t,e){t||bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AN(){return u0()==="http:"||u0()==="https:"}function u0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AN()||mT()||"connection"in navigator)?navigator.onLine:!0}function RN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=iR()||oR()}get(){return PN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){Ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new ec(3e4,6e4);function Oi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,n,i,r={}){return PT(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Jl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return sR()||(c.referrerPolicy="no-referrer"),AT.fetch()(RT(t,t.config.apiHost,n,a),c)})}async function PT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},NN),e);try{const r=new ON(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Yc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Yc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Yc(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw CT(t,h,c);Bn(t,h)}}catch(r){if(r instanceof Wn)throw r;Bn(t,"network-request-failed",{message:String(r)})}}async function tc(t,e,n,i,r={}){const s=await ci(t,e,n,i,r);return"mfaPendingCredential"in s&&Bn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function RT(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Cm(t.config,r):`${t.config.apiScheme}://${r}`}function MN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ON{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ni(this.auth,"network-request-failed")),DN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ni(t,e,i);return r.customData._tokenResponse=n,r}function h0(t){return t!==void 0&&t.enterprise!==void 0}class LN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function jN(t,e){return ci(t,"GET","/v2/recaptchaConfig",Oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function NT(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VN(t,e=!1){const n=Fe(t),i=await n.getIdToken(e),r=Am(i);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ja(Af(r.auth_time)),issuedAtTime:Ja(Af(r.iat)),expirationTime:Ja(Af(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Af(t){return Number(t)*1e3}function Am(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const r=dT(n);return r?JSON.parse(r):(Au("Failed to decode base64 JWT payload"),null)}catch(r){return Au("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function d0(t){const e=Am(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Wn&&UN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function UN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ja(this.lastLoginAt),this.creationTime=Ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Po(t,NT(n,{idToken:i}));ue(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?DT(s.providerUserInfo):[],a=$N(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function zN(t){const e=Fe(t);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $N(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function DT(t){return t.map(e=>{var{providerId:n}=e,i=Sm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){const n=await PT(t,{},async()=>{const i=Jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=RT(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",AT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HN(t,e){return ci(t,"POST","/v2/accounts:revokeToken",Oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=d0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await WN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new mo;return i&&(ue(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ei{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Sm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Po(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VN(this,e)}reload(){return zN(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await _h(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await Po(this,FN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:k,emailVerified:N,isAnonymous:M,providerData:O,stsTokenManager:I}=n;ue(k&&I,e,"internal-error");const v=mo.fromJSON(this.name,I);ue(typeof k=="string",e,"internal-error"),Bi(d,e.name),Bi(f,e.name),ue(typeof N=="boolean",e,"internal-error"),ue(typeof M=="boolean",e,"internal-error"),Bi(m,e.name),Bi(_,e.name),Bi(b,e.name),Bi(w,e.name),Bi(E,e.name),Bi(x,e.name);const C=new Ei({uid:k,auth:e,email:f,emailVerified:N,displayName:d,isAnonymous:M,photoURL:_,phoneNumber:m,tenantId:b,stsTokenManager:v,createdAt:E,lastLoginAt:x});return O&&Array.isArray(O)&&(C.providerData=O.map(P=>Object.assign({},P))),w&&(C._redirectEventId=w),C}static async _fromIdTokenResponse(e,n,i=!1){const r=new mo;r.updateFromServerResponse(n);const s=new Ei({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await _h(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?DT(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new mo;a.updateFromIdToken(i);const l=new Ei({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Jp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function xi(t){Ri(t instanceof Function,"Expected a class definition");let e=f0.get(t);return e?(Ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,f0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MT.type="NONE";const p0=MT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t,e,n){return`firebase:${t}:${e}:${n}`}class yo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Pu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Pu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ei._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new yo(xi(p0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||xi(p0);const o=Pu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Ei._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new yo(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new yo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UT(e))return"Blackberry";if(BT(e))return"Webos";if(LT(e))return"Safari";if((e.includes("chrome/")||jT(e))&&!e.includes("edge/"))return"Chrome";if(VT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OT(t=Mt()){return/firefox\//i.test(t)}function LT(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jT(t=Mt()){return/crios\//i.test(t)}function FT(t=Mt()){return/iemobile/i.test(t)}function VT(t=Mt()){return/android/i.test(t)}function UT(t=Mt()){return/blackberry/i.test(t)}function BT(t=Mt()){return/webos/i.test(t)}function Pm(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qN(t=Mt()){var e;return Pm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KN(){return aR()&&document.documentMode===10}function zT(t=Mt()){return Pm(t)||VT(t)||BT(t)||UT(t)||/windows phone/i.test(t)||FT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e=[]){let n;switch(t){case"Browser":n=g0(Mt());break;case"Worker":n=`${g0(Mt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ho}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e={}){return ci(t,"GET","/v2/passwordPolicy",Oi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=6;class XN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m0(this),this.idTokenSubscription=new m0(this),this.beforeStateQueue=new GN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await NT(this,{idToken:e}),i=await Ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Ii(this));const n=e?Fe(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QN(this),n=new XN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new As("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await HN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xi(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[xi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$T(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&CN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jr(t){return Fe(t)}class m0{constructor(e){this.auth=e,this.observer=null,this.addObserver=pR(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZN(t){hd=t}function WT(t){return hd.loadJS(t)}function eD(){return hd.recaptchaEnterpriseScript}function tD(){return hd.gapiScript}function nD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const iD="recaptcha-enterprise",rD="NO_RECAPTCHA";class sD{constructor(e){this.type=iD,this.auth=jr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{jN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new LN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;h0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(rD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&h0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=eD();l.length!==0&&(l+=a),WT(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function y0(t,e,n,i=!1){const r=new sD(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function vh(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await y0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await y0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t,e){const n=Zl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(gh(s,e??{}))return r;Bn(r,"already-initialized")}return n.initialize({options:e})}function aD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(xi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function lD(t,e,n){const i=jr(t);ue(i._canInitEmulator,i,"emulator-config-failed"),ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=HT(e),{host:o,port:a}=cD(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),uD()}function HT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cD(t){const e=HT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:_0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:_0(o)}}}function _0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,n){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}async function hD(t,e){return ci(t,"POST","/v1/accounts:update",e)}async function dD(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(t,e){return tc(t,"POST","/v1/accounts:signInWithPassword",Oi(t,e))}async function pD(t,e){return ci(t,"POST","/v1/accounts:sendOobCode",Oi(t,e))}async function gD(t,e){return pD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(t,e){return tc(t,"POST","/v1/accounts:signInWithEmailLink",Oi(t,e))}async function yD(t,e){return tc(t,"POST","/v1/accounts:signInWithEmailLink",Oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends Rm{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Nl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Nl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vh(e,n,"signInWithPassword",fD);case"emailLink":return mD(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vh(e,i,"signUpPassword",dD);case"emailLink":return yD(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e){return tc(t,"POST","/v1/accounts:signInWithIdp",Oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="http://localhost";class _s extends Rm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Sm(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new _s(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,_o(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:_D,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wD(t){const e=Da(Ma(t)).link,n=e?Da(Ma(e)).deep_link_id:null,i=Da(Ma(t)).deep_link_id;return(i?Da(Ma(i)).link:null)||i||n||e||t}class Nm{constructor(e){var n,i,r,s,o,a;const l=Da(Ma(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=vD((r=l.mode)!==null&&r!==void 0?r:null);ue(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=wD(e);try{return new Nm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.providerId=Ps.PROVIDER_ID}static credential(e,n){return Nl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Nm.parseLink(n);return ue(i,"argument-error"),Nl._fromEmailAndCode(e,i.code,i.tenantId)}}Ps.PROVIDER_ID="password";Ps.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ps.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends qT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends nc{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _s._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Xi.credential(n,i)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends nc{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends nc{constructor(){super("twitter.com")}static credential(e,n){return _s._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Zi.credential(n,i)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(t,e){return tc(t,"POST","/v1/accounts:signUp",Oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Ei._fromIdTokenResponse(e,i,r),o=v0(i);return new vs({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=v0(i);return new vs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function v0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Wn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new wh(e,n,i,r)}}function KT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(t,s,e,i):s})}async function ED(t,e,n=!1){const i=await Po(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(t,e,n=!1){const{auth:i}=t;if(Zn(i.app))return Promise.reject(Ii(i));const r="reauthenticate";try{const s=await Po(t,KT(i,r,e,t),n);ue(s.idToken,i,"internal-error");const o=Am(s.idToken);ue(o,i,"internal-error");const{sub:a}=o;return ue(t.uid===a,i,"user-mismatch"),vs._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(t,e,n=!1){if(Zn(t.app))return Promise.reject(Ii(t));const i="signIn",r=await KT(t,i,e),s=await vs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function xD(t,e){return QT(jr(t),e)}async function TD(t,e){return GT(Fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(t){const e=jr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ID(t,e,n){const i=jr(t);await vh(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",gD)}async function SD(t,e,n){if(Zn(t.app))return Promise.reject(Ii(t));const i=jr(t),o=await vh(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&YT(t),l}),a=await vs._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function kD(t,e,n){return Zn(t.app)?Promise.reject(Ii(t)):xD(Fe(t),Ps.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&YT(t),i})}function CD(t,e){return AD(Fe(t),null,e)}async function AD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Po(t,hD(i,s));await t._updateTokensIfNecessary(o,!0)}function PD(t,e,n,i){return Fe(t).onIdTokenChanged(e,n,i)}function RD(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function ND(t,e,n,i){return Fe(t).onAuthStateChanged(e,n,i)}function DD(t){return Fe(t).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=1e3,OD=10;class JT extends XT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);KN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,OD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},MD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JT.type="LOCAL";const LD=JT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends XT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZT.type="SESSION";const eI=ZT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new dd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await jD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Dm("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return window}function VD(t){ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){return typeof ii().WorkerGlobalScope<"u"&&typeof ii().importScripts=="function"}async function UD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zD(){return tI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebaseLocalStorageDb",$D=1,Eh="firebaseLocalStorage",iI="fbase_key";class ic{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fd(t,e){return t.transaction([Eh],e?"readwrite":"readonly").objectStore(Eh)}function WD(){const t=indexedDB.deleteDatabase(nI);return new ic(t).toPromise()}function Zp(){const t=indexedDB.open(nI,$D);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Eh,{keyPath:iI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Eh)?e(i):(i.close(),await WD(),e(await Zp()))})})}async function w0(t,e,n){const i=fd(t,!0).put({[iI]:e,value:n});return new ic(i).toPromise()}async function HD(t,e){const n=fd(t,!1).get(e),i=await new ic(n).toPromise();return i===void 0?null:i.value}function b0(t,e){const n=fd(t,!0).delete(e);return new ic(n).toPromise()}const qD=800,KD=3;class rI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>KD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(zD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await UD(),!this.activeServiceWorker)return;this.sender=new FD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await w0(e,bh,"1"),await b0(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>w0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>HD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>b0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=fd(r,!1).getAll();return new ic(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rI.type="LOCAL";const GD=rI;new ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t,e){return e?xi(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends Rm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YD(t){return QT(t.auth,new Mm(t),t.bypassAuthState)}function XD(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),GT(n,new Mm(t),t.bypassAuthState)}async function JD(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),ED(n,new Mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YD;case"linkViaPopup":case"linkViaRedirect":return JD;case"reauthViaPopup":case"reauthViaRedirect":return XD;default:Bn(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new ec(2e3,1e4);class ao extends sI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=Dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZD.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="pendingRedirect",Ru=new Map;class tM extends sI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ru.get(this.auth._key());if(!e){try{const i=await nM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ru.set(this.auth._key(),e)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nM(t,e){const n=sM(e),i=rM(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function iM(t,e){Ru.set(t._key(),e)}function rM(t){return xi(t._redirectPersistence)}function sM(t){return Pu(eM,t.config.apiKey,t.name)}async function oM(t,e,n=!1){if(Zn(t.app))return Promise.reject(Ii(t));const i=jr(t),r=QD(i,e),o=await new tM(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=10*60*1e3;class lM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!oI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aM&&this.cachedEventUids.clear(),this.cachedEventUids.has(E0(e))}saveEventToCache(e){this.cachedEventUids.add(E0(e)),this.lastProcessedEventTime=Date.now()}}function E0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dM=/^https?/;async function fM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uM(t);for(const n of e)try{if(pM(n))return}catch{}Bn(t,"unauthorized-domain")}function pM(t){const e=Xp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!dM.test(n))return!1;if(hM.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new ec(3e4,6e4);function x0(){const t=ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mM(t){return new Promise((e,n)=>{var i,r,s;function o(){x0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x0(),n(ni(t,"network-request-failed"))},timeout:gM.get()})}if(!((r=(i=ii().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ii().gapi)===null||s===void 0)&&s.load)o();else{const a=nD("iframefcb");return ii()[a]=()=>{gapi.load?o():n(ni(t,"network-request-failed"))},WT(`${tD()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Nu=null,e})}let Nu=null;function yM(t){return Nu=Nu||mM(t),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new ec(5e3,15e3),vM="__/auth/iframe",wM="emulator/auth/iframe",bM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xM(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cm(e,wM):`https://${t.config.authDomain}/${vM}`,i={apiKey:e.apiKey,appName:t.name,v:Ho},r=EM.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Jl(i).slice(1)}`}async function TM(t){const e=await yM(t),n=ii().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:xM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=ni(t,"network-request-failed"),a=ii().setTimeout(()=>{s(o)},_M.get());function l(){ii().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SM=500,kM=600,CM="_blank",AM="http://localhost";class T0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PM(t,e,n,i=SM,r=kM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},IM),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Mt().toLowerCase();n&&(a=jT(c)?CM:n),OT(c)&&(e=e||AM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,_])=>`${f}${m}=${_},`,"");if(qN(c)&&a!=="_self")return RM(e||"",a),new T0(null);const d=window.open(e||"",a,h);ue(d,t,"popup-blocked");try{d.focus()}catch{}return new T0(d)}function RM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM="__/auth/handler",DM="emulator/auth/handler",MM=encodeURIComponent("fac");async function I0(t,e,n,i,r,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ho,eventId:r};if(e instanceof qT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof nc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${MM}=${encodeURIComponent(l)}`:"";return`${OM(t)}?${Jl(a).slice(1)}${c}`}function OM({config:t}){return t.emulator?Cm(t,DM):`https://${t.authDomain}/${NM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class LM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eI,this._completeRedirectFn=oM,this._overrideRedirectResult=iM}async _openPopup(e,n,i,r){var s;Ri((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await I0(e,n,i,Xp(),r);return PM(e,o,Dm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await I0(e,n,i,Xp(),r);return VD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ri(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await TM(e),i=new lM(e);return n.register("authEvent",r=>(ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pf,{type:Pf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Pf];o!==void 0&&n(!!o),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zT()||LT()||Pm()}}const jM=LM;var S0="@firebase/auth",k0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UM(t){oi(new Un("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$T(t)},c=new JN(i,r,s,l);return aD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),oi(new Un("auth-internal",e=>{const n=jr(e.getProvider("auth").getImmediate());return(i=>new FM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(S0,k0,VM(t)),bn(S0,k0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=5*60,zM=gT("authIdTokenMaxAge")||BM;let C0=null;const $M=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>zM)return;const r=n==null?void 0:n.token;C0!==r&&(C0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function WM(t=xT()){const e=Zl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oD(t,{popupRedirectResolver:jM,persistence:[GD,LD,eI]}),i=gT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=$M(s.toString());RD(n,o,()=>o(n.currentUser)),PD(n,a=>o(a))}}const r=fT("auth");return r&&lD(n,`http://${r}`),n}function HM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=ni("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",HM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UM("Browser");var qM="firebase",KM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(qM,KM,"app");var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,aI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function C(){}C.prototype=v.prototype,I.D=v.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(P,R,S){for(var T=Array(arguments.length-2),z=2;z<arguments.length;z++)T[z-2]=arguments[z];return v.prototype[R].apply(P,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,C){C||(C=0);var P=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)P[R]=v.charCodeAt(C++)|v.charCodeAt(C++)<<8|v.charCodeAt(C++)<<16|v.charCodeAt(C++)<<24;else for(R=0;16>R;++R)P[R]=v[C++]|v[C++]<<8|v[C++]<<16|v[C++]<<24;v=I.g[0],C=I.g[1],R=I.g[2];var S=I.g[3],T=v+(S^C&(R^S))+P[0]+3614090360&4294967295;v=C+(T<<7&4294967295|T>>>25),T=S+(R^v&(C^R))+P[1]+3905402710&4294967295,S=v+(T<<12&4294967295|T>>>20),T=R+(C^S&(v^C))+P[2]+606105819&4294967295,R=S+(T<<17&4294967295|T>>>15),T=C+(v^R&(S^v))+P[3]+3250441966&4294967295,C=R+(T<<22&4294967295|T>>>10),T=v+(S^C&(R^S))+P[4]+4118548399&4294967295,v=C+(T<<7&4294967295|T>>>25),T=S+(R^v&(C^R))+P[5]+1200080426&4294967295,S=v+(T<<12&4294967295|T>>>20),T=R+(C^S&(v^C))+P[6]+2821735955&4294967295,R=S+(T<<17&4294967295|T>>>15),T=C+(v^R&(S^v))+P[7]+4249261313&4294967295,C=R+(T<<22&4294967295|T>>>10),T=v+(S^C&(R^S))+P[8]+1770035416&4294967295,v=C+(T<<7&4294967295|T>>>25),T=S+(R^v&(C^R))+P[9]+2336552879&4294967295,S=v+(T<<12&4294967295|T>>>20),T=R+(C^S&(v^C))+P[10]+4294925233&4294967295,R=S+(T<<17&4294967295|T>>>15),T=C+(v^R&(S^v))+P[11]+2304563134&4294967295,C=R+(T<<22&4294967295|T>>>10),T=v+(S^C&(R^S))+P[12]+1804603682&4294967295,v=C+(T<<7&4294967295|T>>>25),T=S+(R^v&(C^R))+P[13]+4254626195&4294967295,S=v+(T<<12&4294967295|T>>>20),T=R+(C^S&(v^C))+P[14]+2792965006&4294967295,R=S+(T<<17&4294967295|T>>>15),T=C+(v^R&(S^v))+P[15]+1236535329&4294967295,C=R+(T<<22&4294967295|T>>>10),T=v+(R^S&(C^R))+P[1]+4129170786&4294967295,v=C+(T<<5&4294967295|T>>>27),T=S+(C^R&(v^C))+P[6]+3225465664&4294967295,S=v+(T<<9&4294967295|T>>>23),T=R+(v^C&(S^v))+P[11]+643717713&4294967295,R=S+(T<<14&4294967295|T>>>18),T=C+(S^v&(R^S))+P[0]+3921069994&4294967295,C=R+(T<<20&4294967295|T>>>12),T=v+(R^S&(C^R))+P[5]+3593408605&4294967295,v=C+(T<<5&4294967295|T>>>27),T=S+(C^R&(v^C))+P[10]+38016083&4294967295,S=v+(T<<9&4294967295|T>>>23),T=R+(v^C&(S^v))+P[15]+3634488961&4294967295,R=S+(T<<14&4294967295|T>>>18),T=C+(S^v&(R^S))+P[4]+3889429448&4294967295,C=R+(T<<20&4294967295|T>>>12),T=v+(R^S&(C^R))+P[9]+568446438&4294967295,v=C+(T<<5&4294967295|T>>>27),T=S+(C^R&(v^C))+P[14]+3275163606&4294967295,S=v+(T<<9&4294967295|T>>>23),T=R+(v^C&(S^v))+P[3]+4107603335&4294967295,R=S+(T<<14&4294967295|T>>>18),T=C+(S^v&(R^S))+P[8]+1163531501&4294967295,C=R+(T<<20&4294967295|T>>>12),T=v+(R^S&(C^R))+P[13]+2850285829&4294967295,v=C+(T<<5&4294967295|T>>>27),T=S+(C^R&(v^C))+P[2]+4243563512&4294967295,S=v+(T<<9&4294967295|T>>>23),T=R+(v^C&(S^v))+P[7]+1735328473&4294967295,R=S+(T<<14&4294967295|T>>>18),T=C+(S^v&(R^S))+P[12]+2368359562&4294967295,C=R+(T<<20&4294967295|T>>>12),T=v+(C^R^S)+P[5]+4294588738&4294967295,v=C+(T<<4&4294967295|T>>>28),T=S+(v^C^R)+P[8]+2272392833&4294967295,S=v+(T<<11&4294967295|T>>>21),T=R+(S^v^C)+P[11]+1839030562&4294967295,R=S+(T<<16&4294967295|T>>>16),T=C+(R^S^v)+P[14]+4259657740&4294967295,C=R+(T<<23&4294967295|T>>>9),T=v+(C^R^S)+P[1]+2763975236&4294967295,v=C+(T<<4&4294967295|T>>>28),T=S+(v^C^R)+P[4]+1272893353&4294967295,S=v+(T<<11&4294967295|T>>>21),T=R+(S^v^C)+P[7]+4139469664&4294967295,R=S+(T<<16&4294967295|T>>>16),T=C+(R^S^v)+P[10]+3200236656&4294967295,C=R+(T<<23&4294967295|T>>>9),T=v+(C^R^S)+P[13]+681279174&4294967295,v=C+(T<<4&4294967295|T>>>28),T=S+(v^C^R)+P[0]+3936430074&4294967295,S=v+(T<<11&4294967295|T>>>21),T=R+(S^v^C)+P[3]+3572445317&4294967295,R=S+(T<<16&4294967295|T>>>16),T=C+(R^S^v)+P[6]+76029189&4294967295,C=R+(T<<23&4294967295|T>>>9),T=v+(C^R^S)+P[9]+3654602809&4294967295,v=C+(T<<4&4294967295|T>>>28),T=S+(v^C^R)+P[12]+3873151461&4294967295,S=v+(T<<11&4294967295|T>>>21),T=R+(S^v^C)+P[15]+530742520&4294967295,R=S+(T<<16&4294967295|T>>>16),T=C+(R^S^v)+P[2]+3299628645&4294967295,C=R+(T<<23&4294967295|T>>>9),T=v+(R^(C|~S))+P[0]+4096336452&4294967295,v=C+(T<<6&4294967295|T>>>26),T=S+(C^(v|~R))+P[7]+1126891415&4294967295,S=v+(T<<10&4294967295|T>>>22),T=R+(v^(S|~C))+P[14]+2878612391&4294967295,R=S+(T<<15&4294967295|T>>>17),T=C+(S^(R|~v))+P[5]+4237533241&4294967295,C=R+(T<<21&4294967295|T>>>11),T=v+(R^(C|~S))+P[12]+1700485571&4294967295,v=C+(T<<6&4294967295|T>>>26),T=S+(C^(v|~R))+P[3]+2399980690&4294967295,S=v+(T<<10&4294967295|T>>>22),T=R+(v^(S|~C))+P[10]+4293915773&4294967295,R=S+(T<<15&4294967295|T>>>17),T=C+(S^(R|~v))+P[1]+2240044497&4294967295,C=R+(T<<21&4294967295|T>>>11),T=v+(R^(C|~S))+P[8]+1873313359&4294967295,v=C+(T<<6&4294967295|T>>>26),T=S+(C^(v|~R))+P[15]+4264355552&4294967295,S=v+(T<<10&4294967295|T>>>22),T=R+(v^(S|~C))+P[6]+2734768916&4294967295,R=S+(T<<15&4294967295|T>>>17),T=C+(S^(R|~v))+P[13]+1309151649&4294967295,C=R+(T<<21&4294967295|T>>>11),T=v+(R^(C|~S))+P[4]+4149444226&4294967295,v=C+(T<<6&4294967295|T>>>26),T=S+(C^(v|~R))+P[11]+3174756917&4294967295,S=v+(T<<10&4294967295|T>>>22),T=R+(v^(S|~C))+P[2]+718787259&4294967295,R=S+(T<<15&4294967295|T>>>17),T=C+(S^(R|~v))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+S&4294967295}i.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var C=v-this.blockSize,P=this.B,R=this.h,S=0;S<v;){if(R==0)for(;S<=C;)r(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<v;)if(P[R++]=I.charCodeAt(S++),R==this.blockSize){r(this,P),R=0;break}}else for(;S<v;)if(P[R++]=I[S++],R==this.blockSize){r(this,P),R=0;break}}this.h=R,this.o+=v},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var C=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=C&255,C/=256;for(this.u(I),I=Array(16),v=C=0;4>v;++v)for(var P=0;32>P;P+=8)I[C++]=this.g[v]>>>P&255;return I};function s(I,v){var C=a;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=v(I)}function o(I,v){this.h=v;for(var C=[],P=!0,R=I.length-1;0<=R;R--){var S=I[R]|0;P&&S==v||(C[R]=S,P=!1)}this.g=C}var a={};function l(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return w(c(-I));for(var v=[],C=1,P=0;I>=C;P++)v[P]=I/C|0,C*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return w(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(v,8)),P=d,R=0;R<I.length;R+=8){var S=Math.min(8,I.length-R),T=parseInt(I.substring(R,R+S),v);8>S?(S=c(Math.pow(v,S)),P=P.j(S).add(c(T))):(P=P.j(C),P=P.add(c(T)))}return P}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-w(this).m();for(var I=0,v=1,C=0;C<this.g.length;C++){var P=this.i(C);I+=(0<=P?P:4294967296+P)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(b(this))return"-"+w(this).toString(I);for(var v=c(Math.pow(I,6)),C=this,P="";;){var R=N(C,v).g;C=E(C,R.j(v));var S=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=R,_(C))return S+P;for(;6>S.length;)S="0"+S;P=S+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function b(I){return I.h==-1}t.l=function(I){return I=E(this,I),b(I)?-1:_(I)?0:1};function w(I){for(var v=I.g.length,C=[],P=0;P<v;P++)C[P]=~I.g[P];return new o(C,~I.h).add(f)}t.abs=function(){return b(this)?w(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),C=[],P=0,R=0;R<=v;R++){var S=P+(this.i(R)&65535)+(I.i(R)&65535),T=(S>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);P=T>>>16,S&=65535,T&=65535,C[R]=T<<16|S}return new o(C,C[C.length-1]&-2147483648?-1:0)};function E(I,v){return I.add(w(v))}t.j=function(I){if(_(this)||_(I))return d;if(b(this))return b(I)?w(this).j(w(I)):w(w(this).j(I));if(b(I))return w(this.j(w(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,C=[],P=0;P<2*v;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<I.g.length;R++){var S=this.i(P)>>>16,T=this.i(P)&65535,z=I.i(R)>>>16,B=I.i(R)&65535;C[2*P+2*R]+=T*B,x(C,2*P+2*R),C[2*P+2*R+1]+=S*B,x(C,2*P+2*R+1),C[2*P+2*R+1]+=T*z,x(C,2*P+2*R+1),C[2*P+2*R+2]+=S*z,x(C,2*P+2*R+2)}for(P=0;P<v;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=v;P<2*v;P++)C[P]=0;return new o(C,0)};function x(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function k(I,v){this.g=I,this.h=v}function N(I,v){if(_(v))throw Error("division by zero");if(_(I))return new k(d,d);if(b(I))return v=N(w(I),v),new k(w(v.g),w(v.h));if(b(v))return v=N(I,w(v)),new k(w(v.g),v.h);if(30<I.g.length){if(b(I)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var C=f,P=v;0>=P.l(I);)C=M(C),P=M(P);var R=O(C,1),S=O(P,1);for(P=O(P,2),C=O(C,2);!_(P);){var T=S.add(P);0>=T.l(I)&&(R=R.add(C),S=T),P=O(P,1),C=O(C,1)}return v=E(I,R.j(v)),new k(R,v)}for(R=d;0<=I.l(v);){for(C=Math.max(1,Math.floor(I.m()/v.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),S=c(C),T=S.j(v);b(T)||0<T.l(I);)C-=P,S=c(C),T=S.j(v);_(S)&&(S=f),R=R.add(S),I=E(I,T)}return new k(R,I)}t.A=function(I){return N(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),C=[],P=0;P<v;P++)C[P]=this.i(P)&I.i(P);return new o(C,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),C=[],P=0;P<v;P++)C[P]=this.i(P)|I.i(P);return new o(C,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),C=[],P=0;P<v;P++)C[P]=this.i(P)^I.i(P);return new o(C,this.h^I.h)};function M(I){for(var v=I.g.length+1,C=[],P=0;P<v;P++)C[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(C,I.h)}function O(I,v){var C=v>>5;v%=32;for(var P=I.g.length-C,R=[],S=0;S<P;S++)R[S]=0<v?I.i(S+C)>>>v|I.i(S+C+1)<<32-v:I.i(S+C);return new o(R,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,aI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,hs=o}).apply(typeof A0<"u"?A0:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lI,Oa,cI,Du,eg,uI,hI,dI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,y){return u==Array.prototype||u==Object.prototype||(u[g]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var g=0;g<u.length;++g){var y=u[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(u,g){if(g)e:{var y=i;u=u.split(".");for(var A=0;A<u.length-1;A++){var F=u[A];if(!(F in y))break e;y=y[F]}u=u[u.length-1],A=y[u],g=g(A),g!=A&&g!=null&&e(y,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var y=0,A=!1,F={next:function(){if(!A&&y<u.length){var U=y++;return{value:g(U,u[U]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}r("Array.prototype.values",function(u){return u||function(){return s(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function h(u,g,y){return u.call.apply(u.bind,arguments)}function d(u,g,y){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),u.apply(g,F)}}return function(){return u.apply(g,arguments)}}function f(u,g,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(u,g){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function _(u,g){function y(){}y.prototype=g.prototype,u.aa=g.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(A,F,U){for(var Y=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)Y[Pe-2]=arguments[Pe];return g.prototype[F].apply(A,Y)}}function b(u){const g=u.length;if(0<g){const y=Array(g);for(let A=0;A<g;A++)y[A]=u[A];return y}return[]}function w(u,g){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(l(A)){const F=u.length||0,U=A.length||0;u.length=F+U;for(let Y=0;Y<U;Y++)u[F+Y]=A[Y]}else u.push(A)}}class E{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(u){return/^[\s\xa0]*$/.test(u)}function k(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var M=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function O(u,g,y){for(const A in u)g.call(y,u[A],A,u)}function I(u,g){for(const y in u)g.call(void 0,u[y],y,u)}function v(u){const g={};for(const y in u)g[y]=u[y];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,g){let y,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(y in A)u[y]=A[y];for(let U=0;U<C.length;U++)y=C[U],Object.prototype.hasOwnProperty.call(A,y)&&(u[y]=A[y])}}function R(u){var g=1;u=u.split(":");const y=[];for(;0<g&&u.length;)y.push(u.shift()),g--;return u.length&&y.push(u.join(":")),y}function S(u){a.setTimeout(()=>{throw u},0)}function T(){var u=G;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class z{constructor(){this.h=this.g=null}add(g,y){const A=B.get();A.set(g,y),this.h?this.h.next=A:this.g=A,this.h=A}}var B=new E(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let j,V=!1,G=new z,X=()=>{const u=a.Promise.resolve(void 0);j=()=>{u.then($)}};var $=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(y){S(y)}var g=B;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}V=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return u}();function le(u,g){if(q.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(M){e:{try{N(g.nodeName);var F=!0;break e}catch{}F=!1}F||(g=null)}}else y=="mouseover"?g=u.fromElement:y=="mouseout"&&(g=u.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:re[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&le.aa.h.call(this)}}_(le,q);var re={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function fn(u,g,y,A,F){this.listener=u,this.proxy=null,this.src=g,this.type=y,this.capture=!!A,this.ha=F,this.key=++Ye,this.da=this.fa=!1}function Be(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function et(u){this.src=u,this.g={},this.h=0}et.prototype.add=function(u,g,y,A,F){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var Y=de(u,g,A,F);return-1<Y?(g=u[Y],y||(g.fa=!1)):(g=new fn(g,this.src,U,!!A,F),g.fa=y,u.push(g)),g};function J(u,g){var y=g.type;if(y in u.g){var A=u.g[y],F=Array.prototype.indexOf.call(A,g,void 0),U;(U=0<=F)&&Array.prototype.splice.call(A,F,1),U&&(Be(g),u.g[y].length==0&&(delete u.g[y],u.h--))}}function de(u,g,y,A){for(var F=0;F<u.length;++F){var U=u[F];if(!U.da&&U.listener==g&&U.capture==!!y&&U.ha==A)return F}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),st={};function en(u,g,y,A,F){if(Array.isArray(g)){for(var U=0;U<g.length;U++)en(u,g[U],y,A,F);return null}return y=kn(y),u&&u[Te]?u.K(g,y,c(A)?!!A.capture:!1,F):tt(u,g,y,!1,A,F)}function tt(u,g,y,A,F,U){if(!g)throw Error("Invalid event type");var Y=c(F)?!!F.capture:!!F,Pe=Z(u);if(Pe||(u[Ke]=Pe=new et(u)),y=Pe.add(g,y,A,Y,U),y.proxy)return y;if(A=Sn(),y.proxy=A,A.src=u,A.listener=y,u.addEventListener)ne||(F=Y),F===void 0&&(F=!1),u.addEventListener(g.toString(),A,F);else if(u.attachEvent)u.attachEvent(tn(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Sn(){function u(y){return g.call(u.src,u.listener,y)}const g=ui;return u}function $t(u,g,y,A,F){if(Array.isArray(g))for(var U=0;U<g.length;U++)$t(u,g[U],y,A,F);else A=c(A)?!!A.capture:!!A,y=kn(y),u&&u[Te]?(u=u.i,g=String(g).toString(),g in u.g&&(U=u.g[g],y=de(U,y,A,F),-1<y&&(Be(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete u.g[g],u.h--)))):u&&(u=Z(u))&&(g=u.g[g.toString()],u=-1,g&&(u=de(g,y,A,F)),(y=-1<u?g[u]:null)&&xt(y))}function xt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Te])J(g.i,u);else{var y=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(y,A,u.capture):g.detachEvent?g.detachEvent(tn(y),A):g.addListener&&g.removeListener&&g.removeListener(A),(y=Z(g))?(J(y,u),y.h==0&&(y.src=null,g[Ke]=null)):Be(u)}}}function tn(u){return u in st?st[u]:st[u]="on"+u}function ui(u,g){if(u.da)u=!0;else{g=new le(g,this);var y=u.listener,A=u.ha||u.src;u.fa&&xt(u),u=y.call(A,g)}return u}function Z(u){return u=u[Ke],u instanceof et?u:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function kn(u){return typeof u=="function"?u:(u[Ot]||(u[Ot]=function(g){return u.handleEvent(g)}),u[Ot])}function Ve(){L.call(this),this.i=new et(this),this.M=this,this.F=null}_(Ve,L),Ve.prototype[Te]=!0,Ve.prototype.removeEventListener=function(u,g,y,A){$t(this,u,g,y,A)};function ve(u,g){var y,A=u.F;if(A)for(y=[];A;A=A.F)y.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new q(g,u);else if(g instanceof q)g.target=g.target||u;else{var F=g;g=new q(A,u),P(g,F)}if(F=!0,y)for(var U=y.length-1;0<=U;U--){var Y=g.g=y[U];F=Vr(Y,A,!0,g)&&F}if(Y=g.g=u,F=Vr(Y,A,!0,g)&&F,F=Vr(Y,A,!1,g)&&F,y)for(U=0;U<y.length;U++)Y=g.g=y[U],F=Vr(Y,A,!1,g)&&F}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var y=u.g[g],A=0;A<y.length;A++)Be(y[A]);delete u.g[g],u.h--}}this.F=null},Ve.prototype.K=function(u,g,y,A){return this.i.add(String(u),g,!1,y,A)},Ve.prototype.L=function(u,g,y,A){return this.i.add(String(u),g,!0,y,A)};function Vr(u,g,y,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var F=!0,U=0;U<g.length;++U){var Y=g[U];if(Y&&!Y.da&&Y.capture==y){var Pe=Y.listener,pt=Y.ha||Y.src;Y.fa&&J(u.i,Y),F=Pe.call(pt,A)!==!1&&F}}return F&&!A.defaultPrevented}function Jo(u,g,y){if(typeof u=="function")y&&(u=f(u,y));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Zo(u){u.g=Jo(()=>{u.g=null,u.i&&(u.i=!1,Zo(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class yc extends L{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Zo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function te(u){L.call(this),this.h=u,this.g={}}_(te,L);var ge=[];function pn(u){O(u.g,function(g,y){this.g.hasOwnProperty(y)&&xt(g)},u),u.g={}}te.prototype.N=function(){te.aa.N.call(this),pn(this)},te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Li=a.JSON.stringify,Os=a.JSON.parse,Md=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Od(){}Od.prototype.h=null;function Hy(u){return u.h||(u.h=u.i())}function qy(){}var ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ld(){q.call(this,"d")}_(Ld,q);function jd(){q.call(this,"c")}_(jd,q);var Ur={},Ky=null;function _c(){return Ky=Ky||new Ve}Ur.La="serverreachability";function Gy(u){q.call(this,Ur.La,u)}_(Gy,q);function ta(u){const g=_c();ve(g,new Gy(g))}Ur.STAT_EVENT="statevent";function Qy(u,g){q.call(this,Ur.STAT_EVENT,u),this.stat=g}_(Qy,q);function Lt(u){const g=_c();ve(g,new Qy(g,u))}Ur.Ma="timingevent";function Yy(u,g){q.call(this,Ur.Ma,u),this.size=g}_(Yy,q);function na(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function ia(){this.g=!0}ia.prototype.xa=function(){this.g=!1};function Wk(u,g,y,A,F,U){u.info(function(){if(u.g)if(U)for(var Y="",Pe=U.split("&"),pt=0;pt<Pe.length;pt++){var Ie=Pe[pt].split("=");if(1<Ie.length){var Tt=Ie[0];Ie=Ie[1];var It=Tt.split("_");Y=2<=It.length&&It[1]=="type"?Y+(Tt+"="+Ie+"&"):Y+(Tt+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+g+`
`+y+`
`+Y})}function Hk(u,g,y,A,F,U,Y){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+g+`
`+y+`
`+U+" "+Y})}function Ls(u,g,y,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Kk(u,y)+(A?" "+A:"")})}function qk(u,g){u.info(function(){return"TIMEOUT: "+g})}ia.prototype.info=function(){};function Kk(u,g){if(!u.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var A=y[u];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var U=F[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<F.length;Y++)F[Y]=""}}}}return Li(y)}catch{return g}}var vc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fd;function wc(){}_(wc,Od),wc.prototype.g=function(){return new XMLHttpRequest},wc.prototype.i=function(){return{}},Fd=new wc;function ji(u,g,y,A){this.j=u,this.i=g,this.l=y,this.R=A||1,this.U=new te(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jy}function Jy(){this.i=null,this.g="",this.h=!1}var Zy={},Vd={};function Ud(u,g,y){u.L=1,u.v=Tc(hi(g)),u.m=y,u.P=!0,e_(u,null)}function e_(u,g){u.F=Date.now(),bc(u),u.A=hi(u.v);var y=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),p_(y.i,"t",A),u.C=0,y=u.j.J,u.h=new Jy,u.g=N_(u.j,y?g:null,!u.m),0<u.O&&(u.M=new yc(f(u.Y,u,u.g),u.O)),g=u.U,y=u.g,A=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(ge[0]=F.toString()),F=ge);for(var U=0;U<F.length;U++){var Y=en(y,F[U],A||g.handleEvent,!1,g.h||g);if(!Y)break;g.g[Y.key]=Y}g=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ta(),Wk(u.i,u.u,u.A,u.l,u.R,u.m)}ji.prototype.ca=function(u){u=u.target;const g=this.M;g&&di(u)==3?g.j():this.Y(u)},ji.prototype.Y=function(u){try{if(u==this.g)e:{const It=di(this.g);var g=this.g.Ba();const Vs=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||b_(this.g)))){this.J||It!=4||g==7||(g==8||0>=Vs?ta(3):ta(2)),Bd(this);var y=this.g.Z();this.X=y;t:if(t_(this)){var A=b_(this.g);u="";var F=A.length,U=di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),ra(this);var Y="";break t}this.h.i=new a.TextDecoder}for(g=0;g<F;g++)this.h.h=!0,u+=this.h.i.decode(A[g],{stream:!(U&&g==F-1)});A.length=0,this.h.g+=u,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=y==200,Hk(this.i,this.u,this.A,this.l,this.R,It,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,pt=this.g;if((Pe=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Pe)){var Ie=Pe;break t}}Ie=null}if(y=Ie)Ls(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zd(this,y);else{this.o=!1,this.s=3,Lt(12),Br(this),ra(this);break e}}if(this.P){y=!0;let Cn;for(;!this.J&&this.C<Y.length;)if(Cn=Gk(this,Y),Cn==Vd){It==4&&(this.s=4,Lt(14),y=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==Zy){this.s=4,Lt(15),Ls(this.i,this.l,Y,"[Invalid Chunk]"),y=!1;break}else Ls(this.i,this.l,Cn,null),zd(this,Cn);if(t_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||Y.length!=0||this.h.h||(this.s=1,Lt(16),y=!1),this.o=this.o&&y,!y)Ls(this.i,this.l,Y,"[Invalid Chunked Response]"),Br(this),ra(this);else if(0<Y.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Gd(Tt),Tt.M=!0,Lt(11))}}else Ls(this.i,this.l,Y,null),zd(this,Y);It==4&&Br(this),this.o&&!this.J&&(It==4?C_(this.j,this):(this.o=!1,bc(this)))}else h1(this.g),y==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Br(this),ra(this)}}}catch{}finally{}};function t_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Gk(u,g){var y=u.C,A=g.indexOf(`
`,y);return A==-1?Vd:(y=Number(g.substring(y,A)),isNaN(y)?Zy:(A+=1,A+y>g.length?Vd:(g=g.slice(A,A+y),u.C=A+y,g)))}ji.prototype.cancel=function(){this.J=!0,Br(this)};function bc(u){u.S=Date.now()+u.I,n_(u,u.I)}function n_(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=na(f(u.ba,u),g)}function Bd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ji.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(qk(this.i,this.A),this.L!=2&&(ta(),Lt(17)),Br(this),this.s=2,ra(this)):n_(this,this.S-u)};function ra(u){u.j.G==0||u.J||C_(u.j,u)}function Br(u){Bd(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,pn(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function zd(u,g){try{var y=u.j;if(y.G!=0&&(y.g==u||$d(y.h,u))){if(!u.K&&$d(y.h,u)&&y.G==3){try{var A=y.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Pc(y),Cc(y);else break e;Kd(y),Lt(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=na(f(y.Za,y),6e3));if(1>=s_(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else $r(y,11)}else if((u.K||y.g==u)&&Pc(y),!x(g))for(F=y.Da.g.parse(g),g=0;g<F.length;g++){let Ie=F[g];if(y.T=Ie[0],Ie=Ie[1],y.G==2)if(Ie[0]=="c"){y.K=Ie[1],y.ia=Ie[2];const Tt=Ie[3];Tt!=null&&(y.la=Tt,y.j.info("VER="+y.la));const It=Ie[4];It!=null&&(y.Aa=It,y.j.info("SVER="+y.Aa));const Vs=Ie[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(A=1.5*Vs,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const Cn=u.g;if(Cn){const Nc=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nc){var U=A.h;U.g||Nc.indexOf("spdy")==-1&&Nc.indexOf("quic")==-1&&Nc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Wd(U,U.h),U.h=null))}if(A.D){const Qd=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qd&&(A.ya=Qd,Me(A.I,A.D,Qd))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var Y=u;if(A.qa=R_(A,A.J?A.ia:null,A.W),Y.K){o_(A.h,Y);var Pe=Y,pt=A.L;pt&&(Pe.I=pt),Pe.B&&(Bd(Pe),bc(Pe)),A.g=Y}else S_(A);0<y.i.length&&Ac(y)}else Ie[0]!="stop"&&Ie[0]!="close"||$r(y,7);else y.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?$r(y,7):qd(y):Ie[0]!="noop"&&y.l&&y.l.ta(Ie),y.v=0)}}ta(4)}catch{}}var Qk=class{constructor(u,g){this.g=u,this.map=g}};function i_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function r_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function s_(u){return u.h?1:u.g?u.g.size:0}function $d(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Wd(u,g){u.g?u.g.add(g):u.h=g}function o_(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}i_.prototype.cancel=function(){if(this.i=a_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function a_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const y of u.g.values())g=g.concat(y.D);return g}return b(u.i)}function Yk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],y=u.length,A=0;A<y;A++)g.push(u[A]);return g}g=[],y=0;for(A in u)g[y++]=u[A];return g}function Xk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var y=0;y<u;y++)g.push(y);return g}g=[],y=0;for(const A in u)g[y++]=A;return g}}}function l_(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var y=Xk(u),A=Yk(u),F=A.length,U=0;U<F;U++)g.call(void 0,A[U],y&&y[U],u)}var c_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jk(u,g){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var A=u[y].indexOf("="),F=null;if(0<=A){var U=u[y].substring(0,A);F=u[y].substring(A+1)}else U=u[y];g(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function zr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof zr){this.h=u.h,Ec(this,u.j),this.o=u.o,this.g=u.g,xc(this,u.s),this.l=u.l;var g=u.i,y=new aa;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),u_(this,y),this.m=u.m}else u&&(g=String(u).match(c_))?(this.h=!1,Ec(this,g[1]||"",!0),this.o=sa(g[2]||""),this.g=sa(g[3]||"",!0),xc(this,g[4]),this.l=sa(g[5]||"",!0),u_(this,g[6]||"",!0),this.m=sa(g[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}zr.prototype.toString=function(){var u=[],g=this.j;g&&u.push(oa(g,h_,!0),":");var y=this.g;return(y||g=="file")&&(u.push("//"),(g=this.o)&&u.push(oa(g,h_,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(oa(y,y.charAt(0)=="/"?t1:e1,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",oa(y,i1)),u.join("")};function hi(u){return new zr(u)}function Ec(u,g,y){u.j=y?sa(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function xc(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function u_(u,g,y){g instanceof aa?(u.i=g,r1(u.i,u.h)):(y||(g=oa(g,n1)),u.i=new aa(g,u.h))}function Me(u,g,y){u.i.set(g,y)}function Tc(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function sa(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function oa(u,g,y){return typeof u=="string"?(u=encodeURI(u).replace(g,Zk),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Zk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var h_=/[#\/\?@]/g,e1=/[#\?:]/g,t1=/[#\?]/g,n1=/[#\?@]/g,i1=/#/g;function aa(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Fi(u){u.g||(u.g=new Map,u.h=0,u.i&&Jk(u.i,function(g,y){u.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=aa.prototype,t.add=function(u,g){Fi(this),this.i=null,u=js(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(g),this.h+=1,this};function d_(u,g){Fi(u),g=js(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function f_(u,g){return Fi(u),g=js(u,g),u.g.has(g)}t.forEach=function(u,g){Fi(this),this.g.forEach(function(y,A){y.forEach(function(F){u.call(g,F,A,this)},this)},this)},t.na=function(){Fi(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let A=0;A<g.length;A++){const F=u[A];for(let U=0;U<F.length;U++)y.push(g[A])}return y},t.V=function(u){Fi(this);let g=[];if(typeof u=="string")f_(this,u)&&(g=g.concat(this.g.get(js(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)g=g.concat(u[y])}return g},t.set=function(u,g){return Fi(this),this.i=null,u=js(this,u),f_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function p_(u,g,y){d_(u,g),0<y.length&&(u.i=null,u.g.set(js(u,g),b(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var A=g[y];const U=encodeURIComponent(String(A)),Y=this.V(A);for(A=0;A<Y.length;A++){var F=U;Y[A]!==""&&(F+="="+encodeURIComponent(String(Y[A]))),u.push(F)}}return this.i=u.join("&")};function js(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function r1(u,g){g&&!u.j&&(Fi(u),u.i=null,u.g.forEach(function(y,A){var F=A.toLowerCase();A!=F&&(d_(this,A),p_(this,F,y))},u)),u.j=g}function s1(u,g){const y=new ia;if(a.Image){const A=new Image;A.onload=m(Vi,y,"TestLoadImage: loaded",!0,g,A),A.onerror=m(Vi,y,"TestLoadImage: error",!1,g,A),A.onabort=m(Vi,y,"TestLoadImage: abort",!1,g,A),A.ontimeout=m(Vi,y,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function o1(u,g){const y=new ia,A=new AbortController,F=setTimeout(()=>{A.abort(),Vi(y,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(U=>{clearTimeout(F),U.ok?Vi(y,"TestPingServer: ok",!0,g):Vi(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Vi(y,"TestPingServer: error",!1,g)})}function Vi(u,g,y,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(y)}catch{}}function a1(){this.g=new Md}function l1(u,g,y){const A=y||"";try{l_(u,function(F,U){let Y=F;c(F)&&(Y=Li(F)),g.push(A+U+"="+encodeURIComponent(Y))})}catch(F){throw g.push(A+"type="+encodeURIComponent("_badmap")),F}}function Ic(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Ic,Od),Ic.prototype.g=function(){return new Sc(this.l,this.j)},Ic.prototype.i=function(u){return function(){return u}}({});function Sc(u,g){Ve.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Sc,Ve),t=Sc.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,ca(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,la(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;g_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function g_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?la(this):ca(this),this.readyState==3&&g_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,la(this))},t.Qa=function(u){this.g&&(this.response=u,la(this))},t.ga=function(){this.g&&la(this)};function la(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ca(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=g.next();return u.join(`\r
`)};function ca(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function m_(u){let g="";return O(u,function(y,A){g+=A,g+=":",g+=y,g+=`\r
`}),g}function Hd(u,g,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=m_(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Me(u,g,y))}function Ge(u){Ve.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ge,Ve);var c1=/^https?$/i,u1=["POST","PUT"];t=Ge.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fd.g(),this.v=this.o?Hy(this.o):Hy(Fd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(U){y_(this,U);return}if(u=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)y.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const U of A.keys())y.set(U,A.get(U));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),F=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(u1,g,void 0))||A||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Y]of y)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{w_(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){y_(this,U)}};function y_(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,__(u),kc(u)}function __(u){u.A||(u.A=!0,ve(u,"complete"),ve(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ve(this,"complete"),ve(this,"abort"),kc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kc(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?v_(this):this.bb())},t.bb=function(){v_(this)};function v_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||di(u)!=4||u.Z()!=2)){if(u.u&&di(u)==4)Jo(u.Ea,0,u);else if(ve(u,"readystatechange"),di(u)==4){u.h=!1;try{const Y=u.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var A;if(A=Y===0){var F=String(u.D).match(c_)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),A=!c1.test(F?F.toLowerCase():"")}y=A}if(y)ve(u,"complete"),ve(u,"success");else{u.m=6;try{var U=2<di(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",__(u)}}finally{kc(u)}}}}function kc(u,g){if(u.g){w_(u);const y=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ve(u,"ready");try{y.onreadystatechange=A}catch{}}}function w_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function di(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<di(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Os(g)}};function b_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function h1(u){const g={};u=(u.g&&2<=di(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(x(u[A]))continue;var y=R(u[A]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=g[F]||[];g[F]=U,U.push(y)}I(g,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(u,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||g}function E_(u){this.Aa=0,this.i=[],this.j=new ia,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,u),this.cb=ua("retryDelaySeedMs",1e4,u),this.Wa=ua("forwardChannelMaxRetries",2,u),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new i_(u&&u.concurrentRequestLimit),this.Da=new a1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=E_.prototype,t.la=8,t.G=1,t.connect=function(u,g,y,A){Lt(0),this.W=u,this.H=g||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=R_(this,null,this.W),Ac(this)};function qd(u){if(x_(u),u.G==3){var g=u.U++,y=hi(u.I);if(Me(y,"SID",u.K),Me(y,"RID",g),Me(y,"TYPE","terminate"),ha(u,y),g=new ji(u,u.j,g),g.L=2,g.v=Tc(hi(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.v,y=!0),y||(g.g=N_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),bc(g)}P_(u)}function Cc(u){u.g&&(Gd(u),u.g.cancel(),u.g=null)}function x_(u){Cc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Pc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ac(u){if(!r_(u.h)&&!u.s){u.s=!0;var g=u.Ga;j||X(),V||(j(),V=!0),G.add(g,u),u.B=0}}function d1(u,g){return s_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=na(f(u.Ga,u,g),A_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new ji(this,this.j,u);let U=this.o;if(this.S&&(U?(U=v(U),P(U,this.S)):U=this.S),this.m!==null||this.O||(F.H=U,U=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=I_(this,F,g),y=hi(this.I),Me(y,"RID",u),Me(y,"CVER",22),this.D&&Me(y,"X-HTTP-Session-Id",this.D),ha(this,y),U&&(this.O?g="headers="+encodeURIComponent(String(m_(U)))+"&"+g:this.m&&Hd(y,this.m,U)),Wd(this.h,F),this.Ua&&Me(y,"TYPE","init"),this.P?(Me(y,"$req",g),Me(y,"SID","null"),F.T=!0,Ud(F,y,null)):Ud(F,y,g),this.G=2}}else this.G==3&&(u?T_(this,u):this.i.length==0||r_(this.h)||T_(this))};function T_(u,g){var y;g?y=g.l:y=u.U++;const A=hi(u.I);Me(A,"SID",u.K),Me(A,"RID",y),Me(A,"AID",u.T),ha(u,A),u.m&&u.o&&Hd(A,u.m,u.o),y=new ji(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),g&&(u.i=g.D.concat(u.i)),g=I_(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Wd(u.h,y),Ud(y,A,g)}function ha(u,g){u.H&&O(u.H,function(y,A){Me(g,A,y)}),u.l&&l_({},function(y,A){Me(g,A,y)})}function I_(u,g,y){y=Math.min(u.i.length,y);var A=u.l?f(u.l.Na,u.l,u):null;e:{var F=u.i;let U=-1;for(;;){const Y=["count="+y];U==-1?0<y?(U=F[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Pe=!0;for(let pt=0;pt<y;pt++){let Ie=F[pt].g;const Tt=F[pt].map;if(Ie-=U,0>Ie)U=Math.max(0,F[pt].g-100),Pe=!1;else try{l1(Tt,Y,"req"+Ie+"_")}catch{A&&A(Tt)}}if(Pe){A=Y.join("&");break e}}}return u=u.i.splice(0,y),g.D=u,A}function S_(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;j||X(),V||(j(),V=!0),G.add(g,u),u.v=0}}function Kd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=na(f(u.Fa,u),A_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,k_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=na(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),Cc(this),k_(this))};function Gd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function k_(u){u.g=new ji(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=hi(u.qa);Me(g,"RID","rpc"),Me(g,"SID",u.K),Me(g,"AID",u.T),Me(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(g,"TO",u.ja),Me(g,"TYPE","xmlhttp"),ha(u,g),u.m&&u.o&&Hd(g,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Tc(hi(g)),y.m=null,y.P=!0,e_(y,u)}t.Za=function(){this.C!=null&&(this.C=null,Cc(this),Kd(this),Lt(19))};function Pc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function C_(u,g){var y=null;if(u.g==g){Pc(u),Gd(u),u.g=null;var A=2}else if($d(u.h,g))y=g.D,o_(u.h,g),A=1;else return;if(u.G!=0){if(g.o)if(A==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var F=u.B;A=_c(),ve(A,new Yy(A,y)),Ac(u)}else S_(u);else if(F=g.s,F==3||F==0&&0<g.X||!(A==1&&d1(u,g)||A==2&&Kd(u)))switch(y&&0<y.length&&(g=u.h,g.i=g.i.concat(y)),F){case 1:$r(u,5);break;case 4:$r(u,10);break;case 3:$r(u,6);break;default:$r(u,2)}}}function A_(u,g){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*g}function $r(u,g){if(u.j.info("Error code "+g),g==2){var y=f(u.fb,u),A=u.Xa;const F=!A;A=new zr(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ec(A,"https"),Tc(A),F?s1(A.toString(),y):o1(A.toString(),y)}else Lt(2);u.G=0,u.l&&u.l.sa(g),P_(u),x_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function P_(u){if(u.G=0,u.ka=[],u.l){const g=a_(u.h);(g.length!=0||u.i.length!=0)&&(w(u.ka,g),w(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function R_(u,g,y){var A=y instanceof zr?hi(y):new zr(y);if(A.g!="")g&&(A.g=g+"."+A.g),xc(A,A.s);else{var F=a.location;A=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;var U=new zr(null);A&&Ec(U,A),g&&(U.g=g),F&&xc(U,F),y&&(U.l=y),A=U}return y=u.D,g=u.ya,y&&g&&Me(A,y,g),Me(A,"VER",u.la),ha(u,A),A}function N_(u,g,y){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ge(new Ic({eb:y})):new Ge(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function D_(){}t=D_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Rc(){}Rc.prototype.g=function(u,g){return new nn(u,g)};function nn(u,g){Ve.call(this),this.g=new E_(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!x(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Fs(this)}_(nn,Ve),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){qd(this.g)},nn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Li(u),u=y);g.i.push(new Qk(g.Ya++,u)),g.G==3&&Ac(g)},nn.prototype.N=function(){this.g.l=null,delete this.j,qd(this.g),delete this.g,nn.aa.N.call(this)};function M_(u){Ld.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const y in g){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}_(M_,Ld);function O_(){jd.call(this),this.status=1}_(O_,jd);function Fs(u){this.g=u}_(Fs,D_),Fs.prototype.ua=function(){ve(this.g,"a")},Fs.prototype.ta=function(u){ve(this.g,new M_(u))},Fs.prototype.sa=function(u){ve(this.g,new O_)},Fs.prototype.ra=function(){ve(this.g,"b")},Rc.prototype.createWebChannel=Rc.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,dI=function(){return new Rc},hI=function(){return _c()},uI=Ur,eg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vc.NO_ERROR=0,vc.TIMEOUT=8,vc.HTTP_ERROR=6,Du=vc,Xy.COMPLETE="complete",cI=Xy,qy.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,Oa=qy,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,lI=Ge}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});const P0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new ud("@firebase/firestore");function wa(){return ws.logLevel}function se(t,...e){if(ws.logLevel<=_e.DEBUG){const n=e.map(Om);ws.debug(`Firestore (${qo}): ${t}`,...n)}}function Ni(t,...e){if(ws.logLevel<=_e.ERROR){const n=e.map(Om);ws.error(`Firestore (${qo}): ${t}`,...n)}}function Ro(t,...e){if(ws.logLevel<=_e.WARN){const n=e.map(Om);ws.warn(`Firestore (${qo}): ${t}`,...n)}}function Om(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+t;throw Ni(e),new Error(e)}function xe(t,e){t||ae()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class QM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YM{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xe(typeof i.accessToken=="string"),new fI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new At(e)}}class XM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new XM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);const i=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new ZM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=t2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Se(t,e){return t<e?-1:t>e?1:0}function No(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new ct(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new ct(0,0))}static max(){return new ce(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,i){n===void 0?n=0:n>e.length&&ae(),i===void 0?i=e.length-n:i>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Dl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Dl{construct(e,n,i){return new Re(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const n2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Dl{construct(e,n,i){return new yt(e,n,i)}static isValidIdentifier(e){return n2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ee(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ee(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new ee(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Re.fromString(e))}static fromName(e){return new oe(Re.fromString(e).popFirst(5))}static empty(){return new oe(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Re(e.slice()))}}function i2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ce.fromTimestamp(i===1e9?new ct(n+1,0):new ct(n,i));return new Tr(r,oe.empty(),e)}function r2(t){return new Tr(t.readTime,t.key,-1)}class Tr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Tr(ce.min(),oe.empty(),-1)}static max(){return new Tr(ce.max(),oe.empty(),-1)}}function s2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==o2)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,i)=>{n(e)})}static reject(e){return new H((n,i)=>{i(e)})}static waitFor(e){return new H((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=H.resolve(!1);for(const i of e)n=n.next(r=>r?H.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new H((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new H((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function l2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Lm.oe=-1;function oc(t){return t==null}function xh(t){return t===0&&1/t==-1/0}function c2(t){return typeof t=="number"&&Number.isInteger(t)&&!xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}}class Jc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??mt.RED,this.left=r??mt.EMPTY,this.right=s??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new mt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return mt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,i,r,s){return this}insert(e,n,i){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new N0(this.data.getIterator())}getIteratorFrom(e){return new N0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class N0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new an([])}unionWith(e){let n=new wt(yt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mI("Invalid base64 string: "+s):s}}(e);return new Et(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const u2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(t){if(xe(!!t),typeof t=="string"){let e=0;const n=u2.exec(t);if(xe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bs(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fm(t){const e=t.mapValue.fields.__previous_value__;return jm(e)?Fm(e):e}function Ml(t){const e=Ir(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc={mapValue:{}};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jm(t)?4:f2(t)?9007199254740991:d2(t)?10:11:ae()}function ai(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ml(t).isEqual(Ml(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Ir(r.timestampValue),a=Ir(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return bs(r.bytesValue).isEqual(bs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Xe(r.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(r.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Xe(r.integerValue)===Xe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Xe(r.doubleValue),a=Xe(s.doubleValue);return o===a?xh(o)===xh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return No(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(R0(o)!==R0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ai(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function Ll(t,e){return(t.values||[]).find(n=>ai(n,e))!==void 0}function Do(t,e){if(t===e)return 0;const n=Es(t),i=Es(e);if(n!==i)return Se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Xe(s.integerValue||s.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return D0(t.timestampValue,e.timestampValue);case 4:return D0(Ml(t),Ml(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=bs(s),l=bs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Se(a[c],l[c]);if(h!==0)return h}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(Xe(s.latitude),Xe(o.latitude));return a!==0?a:Se(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return M0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=f.value)===null||l===void 0?void 0:l.arrayValue,b=Se(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:M0(m,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zc.mapValue&&o===Zc.mapValue)return 0;if(s===Zc.mapValue)return 1;if(o===Zc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Se(l[d],h[d]);if(f!==0)return f;const m=Do(a[l[d]],c[h[d]]);if(m!==0)return m}return Se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ae()}}function D0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ir(t),i=Ir(e),r=Se(n.seconds,i.seconds);return r!==0?r:Se(n.nanos,i.nanos)}function M0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Do(n[r],i[r]);if(s)return s}return Se(n.length,i.length)}function Mo(t){return tg(t)}function tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ir(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return bs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=tg(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${tg(n.fields[o])}`;return r+"}"}(t.mapValue):ae()}function O0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ng(t){return!!t&&"integerValue"in t}function Vm(t){return!!t&&"arrayValue"in t}function L0(t){return!!t&&"nullValue"in t}function j0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mu(t){return!!t&&"mapValue"in t}function d2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Za(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function f2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Mu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(n)}setAll(e){let n=yt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Za(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Mu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Mu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Rs(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Vt(Za(this.value))}}function yI(t){const e=[];return Rs(t.fields,(n,i)=>{const r=new yt([n]);if(Mu(i)){const s=yI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,ce.min(),ce.min(),ce.min(),Vt.empty(),0)}static newFoundDocument(e,n,i,r){return new dt(e,1,n,ce.min(),i,r,0)}static newNoDocument(e,n){return new dt(e,2,n,ce.min(),ce.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,ce.min(),ce.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.position=e,this.inclusive=n}}function F0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=oe.comparator(oe.fromName(o.referenceValue),n.key):i=Do(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function V0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function p2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{}class rt extends _I{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new m2(e,n,i):n==="array-contains"?new v2(e,i):n==="in"?new w2(e,i):n==="not-in"?new b2(e,i):n==="array-contains-any"?new E2(e,i):new rt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new y2(e,i):new _2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Do(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(Do(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends _I{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new zn(e,n)}matches(e){return vI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vI(t){return t.op==="and"}function wI(t){return g2(t)&&vI(t)}function g2(t){for(const e of t.filters)if(e instanceof zn)return!1;return!0}function ig(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+Mo(t.value);if(wI(t))return t.filters.map(e=>ig(e)).join(",");{const e=t.filters.map(n=>ig(n)).join(",");return`${t.op}(${e})`}}function bI(t,e){return t instanceof rt?function(i,r){return r instanceof rt&&i.op===r.op&&i.field.isEqual(r.field)&&ai(i.value,r.value)}(t,e):t instanceof zn?function(i,r){return r instanceof zn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&bI(o,r.filters[a]),!0):!1}(t,e):void ae()}function EI(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(t):t instanceof zn?function(n){return n.op.toString()+" {"+n.getFilters().map(EI).join(" ,")+"}"}(t):"Filter"}class m2 extends rt{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class y2 extends rt{constructor(e,n){super(e,"in",n),this.keys=xI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _2 extends rt{constructor(e,n){super(e,"not-in",n),this.keys=xI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class v2 extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vm(n)&&Ll(n.arrayValue,this.value)}}class w2 extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class b2 extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ll(this.value.arrayValue,n)}}class E2 extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ll(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function U0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new x2(t,e,n,i,r,s,o)}function Um(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ig(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Mo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Mo(i)).join(",")),e.ue=n}return e.ue}function Bm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!V0(t.startAt,e.startAt)&&V0(t.endAt,e.endAt)}function rg(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function T2(t,e,n,i,r,s,o,a){return new Ko(t,e,n,i,r,s,o,a)}function zm(t){return new Ko(t)}function B0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TI(t){return t.collectionGroup!==null}function el(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new wt(yt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new jl(s,i))}),n.has(yt.keyField().canonicalString())||e.ce.push(new jl(yt.keyField(),i))}return e.ce}function ri(t){const e=he(t);return e.le||(e.le=I2(e,el(t))),e.le}function I2(t,e){if(t.limitType==="F")return U0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new jl(r.field,s)});const n=t.endAt?new Th(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Th(t.startAt.position,t.startAt.inclusive):null;return U0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function sg(t,e){const n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function og(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pd(t,e){return Bm(ri(t),ri(e))&&t.limitType===e.limitType}function II(t){return`${Um(ri(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>EI(r)).join(", ")}]`),oc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Mo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Mo(r)).join(",")),`Target(${i})`}(ri(t))}; limitType=${t.limitType})`}function gd(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):oe.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of el(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=F0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,el(i),r)||i.endAt&&!function(o,a,l){const c=F0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,el(i),r))}(t,e)}function S2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SI(t){return(e,n)=>{let i=!1;for(const r of el(t)){const s=k2(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function k2(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Do(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return gI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new qe(oe.comparator);function Di(){return C2}const kI=new qe(oe.comparator);function La(...t){let e=kI;for(const n of t)e=e.insert(n.key,n);return e}function CI(t){let e=kI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ss(){return tl()}function AI(){return tl()}function tl(){return new Go(t=>t.toString(),(t,e)=>t.isEqual(e))}const A2=new qe(oe.comparator),P2=new wt(oe.comparator);function ye(...t){let e=P2;for(const n of t)e=e.add(n);return e}const R2=new wt(Se);function N2(){return R2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function PI(t){return{integerValue:""+t}}function D2(t,e){return c2(e)?PI(e):$m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this._=void 0}}function M2(t,e,n){return t instanceof Fl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&jm(s)&&(s=Fm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Vl?NI(t,e):t instanceof Ul?DI(t,e):function(r,s){const o=RI(r,s),a=z0(o)+z0(r.Pe);return ng(o)&&ng(r.Pe)?PI(a):$m(r.serializer,a)}(t,e)}function O2(t,e,n){return t instanceof Vl?NI(t,e):t instanceof Ul?DI(t,e):n}function RI(t,e){return t instanceof Ih?function(i){return ng(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Fl extends md{}class Vl extends md{constructor(e){super(),this.elements=e}}function NI(t,e){const n=MI(e);for(const i of t.elements)n.some(r=>ai(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ul extends md{constructor(e){super(),this.elements=e}}function DI(t,e){let n=MI(e);for(const i of t.elements)n=n.filter(r=>!ai(r,i));return{arrayValue:{values:n}}}class Ih extends md{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function z0(t){return Xe(t.integerValue||t.doubleValue)}function MI(t){return Vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.field=e,this.transform=n}}function j2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Vl&&r instanceof Vl||i instanceof Ul&&r instanceof Ul?No(i.elements,r.elements,ai):i instanceof Ih&&r instanceof Ih?ai(i.Pe,r.Pe):i instanceof Fl&&r instanceof Fl}(t.transform,e.transform)}class F2{constructor(e,n){this.version=e,this.transformResults=n}}class at{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new at}static exists(e){return new at(void 0,e)}static updateTime(e){return new at(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yd{}function OI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lc(t.key,at.none()):new ac(t.key,t.data,at.none());{const n=t.data,i=Vt.empty();let r=new wt(yt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Fr(t.key,i,new an(r.toArray()),at.none())}}function V2(t,e,n){t instanceof ac?function(r,s,o){const a=r.value.clone(),l=W0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(r,s,o){if(!Ou(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=W0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(LI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function nl(t,e,n,i){return t instanceof ac?function(s,o,a,l){if(!Ou(s.precondition,o))return a;const c=s.value.clone(),h=H0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Fr?function(s,o,a,l){if(!Ou(s.precondition,o))return a;const c=H0(s.fieldTransforms,l,o),h=o.data;return h.setAll(LI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Ou(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function U2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=RI(i.transform,r||null);s!=null&&(n===null&&(n=Vt.empty()),n.set(i.field,s))}return n||null}function $0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&No(i,r,(s,o)=>j2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ac extends yd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fr extends yd{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function W0(t,e,n){const i=new Map;xe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,O2(o,a,n[r]))}return i}function H0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,M2(s,o,e))}return i}class lc extends yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jI extends yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&V2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=nl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=nl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=AI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=OI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(n,i)=>$0(n,i))&&No(this.baseMutations,e.baseMutations,(n,i)=>$0(n,i))}}class Wm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){xe(e.mutations.length===i.length);let r=function(){return A2}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Wm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,we;function FI(t){switch(t){default:return ae();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function VI(t){if(t===void 0)return Ni("GRPC error has no .code"),W.UNKNOWN;switch(t){case nt.OK:return W.OK;case nt.CANCELLED:return W.CANCELLED;case nt.UNKNOWN:return W.UNKNOWN;case nt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case nt.INTERNAL:return W.INTERNAL;case nt.UNAVAILABLE:return W.UNAVAILABLE;case nt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case nt.NOT_FOUND:return W.NOT_FOUND;case nt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case nt.ABORTED:return W.ABORTED;case nt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case nt.DATA_LOSS:return W.DATA_LOSS;default:return ae()}}(we=nt||(nt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new hs([4294967295,4294967295],0);function q0(t){const e=W2().encode(t),n=new aI;return n.update(e),new Uint8Array(n.digest())}function K0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hs([n,i],0),new hs([r,s],0)]}class Hm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ja(`Invalid padding: ${n}`);if(i<0)throw new ja(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ja(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ja(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(hs.fromNumber(i)));return r.compare(H2)===1&&(r=new hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=q0(e),[i,r]=K0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Hm(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=q0(e),[i,r]=K0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,cc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new _d(ce.min(),r,new qe(Se),Di(),ye())}}class cc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new cc(i,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class UI{constructor(e,n){this.targetId=e,this.me=n}}class BI{constructor(e,n,i=Et.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class G0{constructor(){this.fe=0,this.ge=Y0(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),i=ye();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ae()}}),new cc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Y0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class q2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Di(),this.qe=Q0(),this.Qe=new qe(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(rg(s))if(i===0){const o=new oe(s.path);this.Ue(n,o,dt.newNoDocument(o,ce.min()))}else xe(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=bs(i).toUint8Array()}catch(l){if(l instanceof mI)return Ro("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Hm(o,r,s)}catch(l){return Ro(l instanceof ja?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&rg(a.target)){const l=new oe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,dt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ye();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new _d(e,n,this.Qe,this.ke,i);return this.ke=Di(),this.qe=Q0(),this.Qe=new qe(Se),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new G0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new wt(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new G0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Q0(){return new qe(oe.comparator)}function Y0(){return new qe(oe.comparator)}const K2={asc:"ASCENDING",desc:"DESCENDING"},G2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q2={and:"AND",or:"OR"};class Y2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ag(t,e){return t.useProto3Json||oc(e)?e:{value:e}}function Sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function X2(t,e){return Sh(t,e.toTimestamp())}function cn(t){return xe(!!t),ce.fromTimestamp(function(n){const i=Ir(n);return new ct(i.seconds,i.nanos)}(t))}function qm(t,e){return lg(t,e).canonicalString()}function lg(t,e){const n=function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $I(t){const e=Re.fromString(t);return xe(QI(e)),e}function kh(t,e){return qm(t.databaseId,e.path)}function il(t,e){const n=$I(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(HI(n))}function WI(t,e){return qm(t.databaseId,e)}function J2(t){const e=$I(t);return e.length===4?Re.emptyPath():HI(e)}function cg(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HI(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function X0(t,e,n){return{name:kh(t,e),fields:n.value.mapValue.fields}}function Z2(t,e){return"found"in e?function(i,r){xe(!!r.found),r.found.name,r.found.updateTime;const s=il(i,r.found.name),o=cn(r.found.updateTime),a=r.found.createTime?cn(r.found.createTime):ce.min(),l=new Vt({mapValue:{fields:r.found.fields}});return dt.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(i,r){xe(!!r.missing),xe(!!r.readTime);const s=il(i,r.missing),o=cn(r.readTime);return dt.newNoDocument(s,o)}(t,e):ae()}function eO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(xe(h===void 0||typeof h=="string"),Et.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?W.UNKNOWN:VI(c.code);return new ee(h,c.message||"")}(o);n=new BI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=il(t,i.document.name),s=cn(i.document.updateTime),o=i.document.createTime?cn(i.document.createTime):ce.min(),a=new Vt({mapValue:{fields:i.document.fields}}),l=dt.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Lu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=il(t,i.document),s=i.readTime?cn(i.readTime):ce.min(),o=dt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Lu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=il(t,i.document),s=i.removedTargetIds||[];n=new Lu([],s,r,null)}else{if(!("filter"in e))return ae();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new $2(r,s),a=i.targetId;n=new UI(a,o)}}return n}function qI(t,e){let n;if(e instanceof ac)n={update:X0(t,e.key,e.value)};else if(e instanceof lc)n={delete:kh(t,e.key)};else if(e instanceof Fr)n={update:X0(t,e.key,e.data),updateMask:cO(e.fieldMask)};else{if(!(e instanceof jI))return ae();n={verify:kh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Fl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ul)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ih)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:X2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function tO(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?cn(r.updateTime):cn(s);return o.isEqual(ce.min())&&(o=cn(s)),new F2(o,r.transformResults||[])}(n,e))):[]}function nO(t,e){return{documents:[WI(t,e.path)]}}function iO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=WI(t,r);const s=function(c){if(c.length!==0)return GI(zn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Ks(f.field),direction:oO(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ag(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function rO(t){let e=J2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){xe(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=KI(d);return f instanceof zn&&wI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(_){return new jl(Gs(_.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,oc(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Th(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new Th(m,f)}(n.endAt)),T2(e,r,o,s,a,"F",l,c)}function sO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Gs(n.unaryFilter.field);return rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Gs(n.unaryFilter.field);return rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gs(n.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gs(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Gs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zn.create(n.compositeFilter.filters.map(i=>KI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function oO(t){return K2[t]}function aO(t){return G2[t]}function lO(t){return Q2[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Gs(t){return yt.fromServerFormat(t.fieldPath)}function GI(t){return t instanceof rt?function(n){if(n.op==="=="){if(j0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(L0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(j0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(L0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:aO(n.op),value:n.value}}}(t):t instanceof zn?function(n){const i=n.getFilters().map(r=>GI(r));return i.length===1?i[0]:{compositeFilter:{op:lO(n.op),filters:i}}}(t):ae()}function cO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,i,r,s=ce.min(),o=ce.min(),a=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.ct=e}}function hO(t){const e=rO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?og(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.un=new fO}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Tr.min())}updateCollectionGroup(e,n,i){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class fO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new wt(Re.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new wt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oo(0)}static kn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.changes=new Go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?H.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&nl(i.mutation,r,an.empty(),ct.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ye()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ye()){const r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=La();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=ss();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ye()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Di();const o=tl(),a=function(){return tl()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Fr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),nl(h.mutation,c,h.mutation.getFieldMask(),ct.now())):o.set(c.key,an.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new gO(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=tl();let r=new qe((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||an.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||ye()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=AI();h.forEach(f=>{if(!s.has(f)){const m=OI(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return H.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):H.resolve(ss());let a=-1,l=s;return o.next(c=>H.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ye())).next(h=>({batchId:a,changes:CI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=La();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=La();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,l=>{const c=function(d,f){return new Ko(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,dt.newInvalidDocument(h)))});let a=La();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&nl(h.mutation,c,an.empty(),ct.now()),gd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:cn(r.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:hO(r.bundledQuery),readTime:cn(r.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.overlays=new qe(oe.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ss();return H.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),H.resolve()}getOverlaysForCollection(e,n,i){const r=ss(),s=n.length+1,o=new oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return H.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new qe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=ss(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ss(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return H.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new z2(n,i));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.Tr=new wt(ut.Er),this.dr=new wt(ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new ut(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new ut(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new Re([])),i=new ut(n,e),r=new ut(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Re([])),i=new ut(n,e),r=new ut(n,e+1);let s=ye();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ut(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new wt(ut.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new B2(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ut(n,0),r=new ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new wt(Se);return n.forEach(r=>{const s=new ut(r,0),o=new ut(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),H.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;oe.isDocumentKey(s)||(s=s.child(""));const o=new ut(new oe(s),0);let a=new wt(Se);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return H.forEach(n.mutations,r=>{const s=new ut(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new ut(n,0),r=this.br.firstAfterOrEqual(i);return H.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.Mr=e,this.docs=function(){return new qe(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return H.resolve(i?i.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let i=Di();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():dt.newInvalidDocument(r))}),H.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Di();const o=n.path,a=new oe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||s2(r2(h),i)<=0||(r.has(h.key)||gd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ae()}Or(e,n){return H.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new EO(this)}getSize(e){return H.resolve(this.size)}}class EO extends pO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.persistence=e,this.Nr=new Go(n=>Um(n),Bm),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Km,this.targetCount=0,this.kr=Oo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Oo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),H.waitFor(s).next(()=>r)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return H.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),H.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return H.resolve(i)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Lm(0),this.Kr=!1,this.Kr=!0,this.$r=new vO,this.referenceDelegate=e(this),this.Ur=new xO(this),this.indexManager=new dO,this.remoteDocumentCache=function(r){return new bO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new uO(n),this.Gr=new yO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _O,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new wO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new IO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return H.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class IO extends a2{constructor(e){super(),this.currentSequenceNumber=e}}class Gm{constructor(e){this.persistence=e,this.Jr=new Km,this.Yr=null}static Zr(e){return new Gm(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),H.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,i=>{const r=oe.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ye(),r=ye();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Qm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lR()?8:l2(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new SO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(wa()<=_e.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(wa()<=_e.DEBUG&&se("QueryEngine","Query:",qs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(wa()<=_e.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(n))):H.resolve())}Yi(e,n){if(B0(n))return H.resolve(null);let i=ri(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=og(n,null,"F"),i=ri(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ye(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,og(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return B0(n)||r.isEqual(ce.min())?H.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?H.resolve(null):(wa()<=_e.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qs(n)),this.rs(e,o,n,i2(r,-1)).next(a=>a))})}ts(e,n){let i=new wt(SI(e));return n.forEach((r,s)=>{gd(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return wa()<=_e.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",qs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Tr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new qe(Se),this._s=new Go(s=>Um(s),Bm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function AO(t,e,n,i){return new CO(t,e,n,i)}async function YI(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ye();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function PO(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=H.resolve();return f.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(b=>{const w=c.docVersions.get(_);xe(w!==null),b.version.compareTo(w)<0&&(d.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function XI(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function RO(t,e){const n=he(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Et.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(b,w,E){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=Di(),c=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(NO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function NO(t,e,n){let i=ye(),r=ye();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Di();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function DO(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function MO(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,H.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new rr(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function ug(t,e,n){const i=he(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!sc(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function J0(t,e,n){const i=he(t);let r=ce.min(),s=ye();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=he(l),f=d._s.get(h);return f!==void 0?H.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(i,o,ri(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:ce.min(),n?s:ye())).next(a=>(OO(i,S2(e),a),{documents:a,Ts:s})))}function OO(t,e,n){let i=t.us.get(e)||ce.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class Z0{constructor(){this.activeTargetIds=N2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LO{constructor(){this.so=new Z0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Z0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=null;function Rf(){return eu===null?eu=function(){return 268435456+Math.round(2147483648*Math.random())}():eu++,"0x"+eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class UO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Rf(),l=this.xo(n,i.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>(se("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ro("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=FO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Rf();return new Promise((o,a)=>{const l=new lI;l.setWithCredentials(!0),l.listenOnce(cI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Du.NO_ERROR:const h=l.getResponseJson();se(Ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Du.TIMEOUT:se(Ct,`RPC '${e}' ${s} timed out`),a(new ee(W.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:const d=l.getStatus();if(se(Ct,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const _=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(E)>=0?E:W.UNKNOWN}(m.status);a(new ee(_,m.message))}else a(new ee(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee(W.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{se(Ct,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);se(Ct,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=Rf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dI(),a=hI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");se(Ct,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const _=new VO({Io:w=>{m?se(Ct,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(f||(se(Ct,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),se(Ct,`RPC '${e}' stream ${r} sending:`,w),d.send(w))},To:()=>d.close()}),b=(w,E,x)=>{w.listen(E,k=>{try{x(k)}catch(N){setTimeout(()=>{throw N},0)}})};return b(d,Oa.EventType.OPEN,()=>{m||(se(Ct,`RPC '${e}' stream ${r} transport opened.`),_.yo())}),b(d,Oa.EventType.CLOSE,()=>{m||(m=!0,se(Ct,`RPC '${e}' stream ${r} transport closed`),_.So())}),b(d,Oa.EventType.ERROR,w=>{m||(m=!0,Ro(Ct,`RPC '${e}' stream ${r} transport errored:`,w),_.So(new ee(W.UNAVAILABLE,"The operation could not be completed")))}),b(d,Oa.EventType.MESSAGE,w=>{var E;if(!m){const x=w.data[0];xe(!!x);const k=x,N=k.error||((E=k[0])===null||E===void 0?void 0:E.error);if(N){se(Ct,`RPC '${e}' stream ${r} received error:`,N);const M=N.status;let O=function(C){const P=nt[C];if(P!==void 0)return VI(P)}(M),I=N.message;O===void 0&&(O=W.INTERNAL,I="Unknown error status: "+M+" with message "+N.message),m=!0,_.So(new ee(O,I)),d.close()}else se(Ct,`RPC '${e}' stream ${r} received:`,x),_.bo(x)}}),b(a,uI.STAT_EVENT,w=>{w.stat===eg.PROXY?se(Ct,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===eg.NOPROXY&&se(Ct,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function Nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){return new Y2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ym(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Ni(n.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ee(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BO extends JI{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=eO(this.serializer,e),i=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?cn(o.readTime):ce.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=cg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=rg(l)?{documents:nO(s,l)}:{query:iO(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zI(s,o.resumeToken);const c=ag(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Sh(s,o.snapshotVersion.toTimestamp());const c=ag(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=sO(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=cg(this.serializer),n.removeTarget=e,this.a_(n)}}class zO extends JI{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=tO(e.writeResults,e.commitTime),i=cn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=cg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>qI(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ee(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,lg(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(W.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,lg(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class WO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ni(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Ns(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=he(l);c.L_.add(4),await uc(c),c.q_.set("Unknown"),c.L_.delete(4),await wd(c)}(this))})}),this.q_=new WO(i,r)}}async function wd(t){if(Ns(t))for(const e of t.B_)await e(!0)}async function uc(t){for(const e of t.B_)await e(!1)}function ZI(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ey(n)?Zm(n):Qo(n).r_()&&Jm(n,e))}function Xm(t,e){const n=he(t),i=Qo(n);n.N_.delete(e),i.r_()&&eS(n,e),n.N_.size===0&&(i.r_()?i.o_():Ns(n)&&n.q_.set("Unknown"))}function Jm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qo(t).A_(e)}function eS(t,e){t.Q_.xe(e),Qo(t).R_(e)}function Zm(t){t.Q_=new q2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qo(t).start(),t.q_.v_()}function ey(t){return Ns(t)&&!Qo(t).n_()&&t.N_.size>0}function Ns(t){return he(t).L_.size===0}function tS(t){t.Q_=void 0}async function qO(t){t.q_.set("Online")}async function KO(t){t.N_.forEach((e,n)=>{Jm(t,e)})}async function GO(t,e){tS(t),ey(t)?(t.q_.M_(e),Zm(t)):t.q_.set("Unknown")}async function QO(t,e,n){if(t.q_.set("Online"),e instanceof BI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ch(t,i)}else if(e instanceof Lu?t.Q_.Ke(e):e instanceof UI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const i=await XI(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),eS(s,l);const d=new rr(h.target,l,c,h.sequenceNumber);Jm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){se("RemoteStore","Failed to raise snapshot:",i),await Ch(t,i)}}async function Ch(t,e,n){if(!sc(e))throw e;t.L_.add(1),await uc(t),t.q_.set("Offline"),n||(n=()=>XI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wd(t)})}function nS(t,e){return e().catch(n=>Ch(t,n,e))}async function bd(t){const e=he(t),n=Sr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;YO(e);)try{const r=await DO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,XO(e,r)}catch(r){await Ch(e,r)}iS(e)&&rS(e)}function YO(t){return Ns(t)&&t.O_.length<10}function XO(t,e){t.O_.push(e);const n=Sr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function iS(t){return Ns(t)&&!Sr(t).n_()&&t.O_.length>0}function rS(t){Sr(t).start()}async function JO(t){Sr(t).p_()}async function ZO(t){const e=Sr(t);for(const n of t.O_)e.m_(n.mutations)}async function eL(t,e,n){const i=t.O_.shift(),r=Wm.from(i,e,n);await nS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await bd(t)}async function tL(t,e){e&&Sr(t).V_&&await async function(i,r){if(function(o){return FI(o)&&o!==W.ABORTED}(r.code)){const s=i.O_.shift();Sr(i).s_(),await nS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await bd(i)}}(t,e),iS(t)&&rS(t)}async function tw(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=Ns(n);n.L_.add(3),await uc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wd(n)}async function nL(t,e){const n=he(t);e?(n.L_.delete(2),await wd(n)):e||(n.L_.add(2),await uc(n),n.q_.set("Unknown"))}function Qo(t){return t.K_||(t.K_=function(n,i,r){const s=he(n);return s.w_(),new BO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:qO.bind(null,t),Ro:KO.bind(null,t),mo:GO.bind(null,t),d_:QO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ey(t)?Zm(t):t.q_.set("Unknown")):(await t.K_.stop(),tS(t))})),t.K_}function Sr(t){return t.U_||(t.U_=function(n,i,r){const s=he(n);return s.w_(),new zO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:JO.bind(null,t),mo:tL.bind(null,t),f_:ZO.bind(null,t),g_:eL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bd(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new ty(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ny(t,e){if(Ni("AsyncQueue",`${e}: ${t}`),sc(t))return new ee(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=La(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new vo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new vo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.W_=new qe(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Lo{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Lo(e,n,vo.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class rL{constructor(){this.queries=iw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=he(n),s=r.queries;r.queries=iw(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new ee(W.ABORTED,"Firestore shutting down"))}}function iw(){return new Go(t=>II(t),pd)}async function sL(t,e){const n=he(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new iL,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=ny(o,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&iy(n)}async function oL(t,e){const n=he(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function aL(t,e){const n=he(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&iy(n)}function lL(t,e,n){const i=he(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function iy(t){t.Y_.forEach(e=>{e.next()})}var hg,rw;(rw=hg||(hg={})).ea="default",rw.Cache="cache";class cL{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.key=e}}class oS{constructor(e){this.key=e}}class uL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=SI(e),this.Ra=new vo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new nw,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=gd(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;f&&m?f.data.isEqual(m.data)?_!==b&&(i.track({type:3,doc:m}),w=!0):this.ga(f,m)||(i.track({type:2,doc:m}),w=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),w=!0):f&&!m&&(i.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(m?(o=o.add(m),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,_){const b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return b(m)-b(_)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Lo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new oS(i))}),this.da.forEach(i=>{e.has(i)||n.push(new sS(i))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Lo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class dL{constructor(e){this.key=e,this.va=!1}}class fL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Go(a=>II(a),pd),this.Ma=new Map,this.xa=new Set,this.Oa=new qe(oe.comparator),this.Na=new Map,this.La=new Km,this.Ba={},this.ka=new Map,this.qa=Oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pL(t,e,n=!0){const i=dS(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await aS(i,e,n,!0),r}async function gL(t,e){const n=dS(t);await aS(n,e,!0,!1)}async function aS(t,e,n,i){const r=await MO(t.localStore,ri(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await mL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&ZI(t.remoteStore,r),a}async function mL(t,e,n,i,r){t.Ka=(d,f,m)=>async function(b,w,E,x){let k=w.view.ma(E);k.ns&&(k=await J0(b.localStore,w.query,!1).then(({documents:I})=>w.view.ma(I,k)));const N=x&&x.targetChanges.get(w.targetId),M=x&&x.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(k,b.isPrimaryClient,N,M);return ow(b,w.targetId,O.wa),O.snapshot}(t,d,f,m);const s=await J0(t.localStore,e,!0),o=new uL(e,s.Ts),a=o.ma(s.documents),l=cc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);ow(t,n,c.wa);const h=new hL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function yL(t,e,n){const i=he(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!pd(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ug(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Xm(i.remoteStore,r.targetId),dg(i,r.targetId)}).catch(rc)):(dg(i,r.targetId),await ug(i.localStore,r.targetId,!0))}async function _L(t,e){const n=he(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Xm(n.remoteStore,i.targetId))}async function vL(t,e,n){const i=SL(t);try{const r=await function(o,a){const l=he(o),c=ct.now(),h=a.reduce((m,_)=>m.add(_.key),ye());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Di(),b=ye();return l.cs.getEntries(m,h).next(w=>{_=w,_.forEach((E,x)=>{x.isValidDocument()||(b=b.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(w=>{d=w;const E=[];for(const x of a){const k=U2(x,d.get(x.key).overlayedDocument);k!=null&&E.push(new Fr(x.key,k,yI(k.value.mapValue),at.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,E,a)}).next(w=>{f=w;const E=w.applyToLocalDocumentSet(d,b);return l.documentOverlayCache.saveOverlays(m,w.batchId,E)})}).then(()=>({batchId:f.batchId,changes:CI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new qe(Se)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await hc(i,r.changes),await bd(i.remoteStore)}catch(r){const s=ny(r,"Failed to persist write");n.reject(s)}}async function lS(t,e){const n=he(t);try{const i=await RO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(xe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?xe(o.va):r.removedDocuments.size>0&&(xe(o.va),o.va=!1))}),await hc(n,i,e)}catch(i){await rc(i)}}function sw(t,e,n){const i=he(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&iy(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wL(t,e,n){const i=he(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new qe(oe.comparator);o=o.insert(s,dt.newNoDocument(s,ce.min()));const a=ye().add(s),l=new _d(ce.min(),new Map,new qe(Se),o,a);await lS(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),ry(i)}else await ug(i.localStore,e,!1).then(()=>dg(i,e,n)).catch(rc)}async function bL(t,e){const n=he(t),i=e.batch.batchId;try{const r=await PO(n.localStore,e);uS(n,i,null),cS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await hc(n,r)}catch(r){await rc(r)}}async function EL(t,e,n){const i=he(t);try{const r=await function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(xe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);uS(i,e,n),cS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await hc(i,r)}catch(r){await rc(r)}}function cS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function uS(t,e,n){const i=he(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function dg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||hS(t,i)})}function hS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Xm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ry(t))}function ow(t,e,n){for(const i of n)i instanceof sS?(t.La.addReference(i.key,e),xL(t,i)):i instanceof oS?(se("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||hS(t,i.key)):ae()}function xL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(i),ry(t))}function ry(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Re.fromString(e)),i=t.qa.next();t.Na.set(i,new dL(n)),t.Oa=t.Oa.insert(n,i),ZI(t.remoteStore,new rr(ri(zm(n.path)),i,"TargetPurposeLimboResolution",Lm.oe))}}async function hc(t,e,n){const i=he(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Qm.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=he(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>H.forEach(c,f=>H.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>H.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!sc(d))throw d;se("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),_=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(f,b)}}}(i.localStore,s))}async function TL(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=await YI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ee(W.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await hc(n,i.hs)}}function IL(t,e){const n=he(t),i=n.Na.get(e);if(i&&i.va)return ye().add(i.key);{let r=ye();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function dS(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wL.bind(null,e),e.Ca.d_=aL.bind(null,e.eventManager),e.Ca.$a=lL.bind(null,e.eventManager),e}function SL(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EL.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return AO(this.persistence,new kO,e.initialUser,this.serializer)}Ga(e){return new TO(Gm.Zr,this.serializer)}Wa(e){return new LO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class fg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TL.bind(null,this.syncEngine),await nL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rL}()}createDatastore(e){const n=vd(e.databaseInfo.databaseId),i=function(s){return new UO(s)}(e.databaseInfo);return function(s,o,a,l){return new $O(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new HO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>sw(this.syncEngine,n,0),function(){return ew.D()?new ew:new jO}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new fL(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=he(r);se("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await uc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fg.provider={build:()=>new fg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ee(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=he(r),a={documents:s.map(d=>kh(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Re.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=Z2(o.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());xe(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new lc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=oe.fromPath(i);this.mutations.push(new jI(r,this.precondition(r)))}),await async function(i,r){const s=he(i),o={writes:r.map(a=>qI(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Re.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ae();n=ce.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new ee(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ce.min())?at.exists(!1):at.updateTime(n):at.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ce.min()))throw new ee(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return at.updateTime(n)}return at.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new Ym(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new CL(this.datastore),n=this.cu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const n=this.updateFunction(e);return!oc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!FI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=At.UNAUTHENTICATED,this.clientId=pI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ny(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Df(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await YI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function aw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RL(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>tw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>tw(e.remoteStore,r)),t._onlineComponents=e}async function RL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Df(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===W.FAILED_PRECONDITION||r.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ro("Error using user provided cache. Falling back to memory cache: "+n),await Df(t,new Ah)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Df(t,new Ah);return t._offlineComponents}async function sy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await aw(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await aw(t,new fg))),t._onlineComponents}function NL(t){return sy(t).then(e=>e.syncEngine)}function DL(t){return sy(t).then(e=>e.datastore)}async function lw(t){const e=await sy(t),n=e.eventManager;return n.onListen=pL.bind(null,e.syncEngine),n.onUnlisten=yL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_L.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t,e,n){if(!n)throw new ee(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ML(t,e,n,i){if(e===!0&&i===!0)throw new ee(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uw(t){if(!oe.isDocumentKey(t))throw new ee(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hw(t){if(oe.isDocumentKey(t))throw new ee(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ed(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function Fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ed(t);throw new ee(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ML("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dw(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new GM;switch(i.type){case"firstParty":return new JM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=cw.get(n);i&&(se("ComponentProvider","Removing Datastore"),cw.delete(n),i.terminate())}(this),Promise.resolve()}}function OL(t,e,n,i={}){var r;const s=(t=Fn(t,xd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=At.MOCK_USER;else{a=nR(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ee(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new At(c)}t._authCredentials=new QM(new fI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class Rt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class wr extends Ds{constructor(e,n,i){super(e,n,zm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new oe(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function gS(t,e,...n){if(t=Fe(t),pS("collection","path",e),t instanceof xd){const i=Re.fromString(e,...n);return hw(i),new wr(t,null,i)}{if(!(t instanceof Rt||t instanceof wr))throw new ee(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Re.fromString(e,...n));return hw(i),new wr(t.firestore,null,i)}}function kr(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=pI.newId()),pS("doc","path",e),t instanceof xd){const i=Re.fromString(e,...n);return uw(i),new Rt(t,null,new oe(i))}{if(!(t instanceof Rt||t instanceof wr))throw new ee(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Re.fromString(e,...n));return uw(i),new Rt(t.firestore,t instanceof wr?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ym(this,"async_queue_retry"),this.Vu=()=>{const i=Nf();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Nf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new vr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sc(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ni("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=ty.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function pw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Cr extends xd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new fw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fw(e),this._firestoreClient=void 0,await e}}}function LL(t,e){const n=typeof t=="object"?t:xT(),i=typeof t=="string"?t:"(default)",r=Zl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=eR("firestore");s&&OL(r,...s)}return r}function Td(t){if(t._terminated)throw new ee(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jL(t),t._firestoreClient}function jL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new h2(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,fS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new PL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(Et.fromBase64String(e))}catch(n){throw new ee(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xs(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=/^__.*__$/;class VL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ac(e,this.data,n,this.fieldTransforms)}}class mS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class ly{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ly(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ph(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yS(this.Cu)&&FL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class UL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||vd(e)}Qu(e,n,i,r=!1){return new ly({Cu:e,methodName:n,qu:i,path:yt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dc(t){const e=t._freezeSettings(),n=vd(t._databaseId);return new UL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cy(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);fy("Data must be an object, but it was:",o,i);const a=_S(i,o);let l,c;if(s.merge)l=new an(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=pg(e,d,n);if(!o.contains(f))throw new ee(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);wS(h,f)||h.push(f)}l=new an(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new VL(new Vt(a),l,c)}class Sd extends Id{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}class uy extends Id{_toFieldTransform(e){return new L2(e.path,new Fl)}isEqual(e){return e instanceof uy}}function hy(t,e,n,i){const r=t.Qu(1,e,n);fy("Data must be an object, but it was:",r,i);const s=[],o=Vt.empty();Rs(i,(l,c)=>{const h=py(e,l,n);c=Fe(c);const d=r.Nu(h);if(c instanceof Sd)s.push(h);else{const f=fc(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new an(s);return new mS(o,a,r.fieldTransforms)}function dy(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[pg(e,i,n)],l=[r];if(s.length%2!=0)throw new ee(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(pg(e,s[f])),l.push(s[f+1]);const c=[],h=Vt.empty();for(let f=a.length-1;f>=0;--f)if(!wS(c,a[f])){const m=a[f];let _=l[f];_=Fe(_);const b=o.Nu(m);if(_ instanceof Sd)c.push(m);else{const w=fc(_,b);w!=null&&(c.push(m),h.set(m,w))}}const d=new an(c);return new mS(h,d,o.fieldTransforms)}function BL(t,e,n,i=!1){return fc(n,t.Qu(i?4:3,e))}function fc(t,e){if(vS(t=Fe(t)))return fy("Unsupported field value:",e,t),_S(t,e);if(t instanceof Id)return function(i,r){if(!yS(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=fc(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Fe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return D2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=ct.fromDate(i);return{timestampValue:Sh(r.serializer,s)}}if(i instanceof ct){const s=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sh(r.serializer,s)}}if(i instanceof oy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xs)return{bytesValue:zI(r.serializer,i._byteString)};if(i instanceof Rt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ay)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return $m(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Ed(i)}`)}(t,e)}function _S(t,e){const n={};return gI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(t,(i,r)=>{const s=fc(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function vS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof oy||t instanceof xs||t instanceof Rt||t instanceof Id||t instanceof ay)}function fy(t,e,n){if(!vS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Ed(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function pg(t,e,n){if((e=Fe(e))instanceof Yo)return e._internalPath;if(typeof e=="string")return py(t,e);throw Ph("Field path arguments must be of type string or ",t,!1,void 0,n)}const zL=new RegExp("[~\\*/\\[\\]]");function py(t,e,n){if(e.search(zL)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yo(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ph(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new ee(W.INVALID_ARGUMENT,a+t+l)}function wS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $L(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $L extends Rh{data(){return super.data()}}function gy(t,e){return typeof e=="string"?py(t,e):e instanceof Yo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class my{}class bS extends my{}function HL(t,e,...n){let i=[];e instanceof my&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof _y).length,a=s.filter(l=>l instanceof yy).length;if(o>1||o>0&&a>0)throw new ee(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class yy extends bS{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new yy(e,n,i)}_apply(e){const n=this._parse(e);return ES(e._query,n),new Ds(e.firestore,e.converter,sg(e._query,n))}_parse(e){const n=dc(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){mw(d,h);const m=[];for(const _ of d)m.push(gw(l,s,_));f={arrayValue:{values:m}}}else f=gw(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||mw(d,h),f=BL(a,o,d,h==="in"||h==="not-in");return rt.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class _y extends my{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _y(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)ES(o,l),o=sg(o,l)}(e._query,n),new Ds(e.firestore,e.converter,sg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vy extends bS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vy(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new ee(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ee(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jl(s,o)}(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Ko(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function qL(t,e="asc"){const n=e,i=gy("orderBy",t);return vy._create(i,n)}function gw(t,e,n){if(typeof(n=Fe(n))=="string"){if(n==="")throw new ee(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TI(e)&&n.indexOf("/")!==-1)throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Re.fromString(n));if(!oe.isDocumentKey(i))throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return O0(t,new oe(i))}if(n instanceof Rt)return O0(t,n._key);throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(n)}.`)}function mw(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ES(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xS{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Rs(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Xe(o.doubleValue));return new ay(s)}convertGeoPoint(e){return new oy(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Fm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){const n=Ir(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Re.fromString(e);xe(QI(i));const r=new Ol(i.get(1),i.get(3)),s=new oe(i.popFirst(5));return r.isEqual(n)||Ni(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class KL extends xS{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class by extends Rh{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(gy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class ju extends by{data(e={}){return super.data(e)}}class GL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new lo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ju(this._firestore,this._userDataWriter,i.key,i,new lo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new ju(r._firestore,r._userDataWriter,a.doc.key,a.doc,new lo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ju(r._firestore,r._userDataWriter,a.doc.key,a.doc,new lo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:QL(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class Ey extends xS{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function TS(t,e,n){t=Fn(t,Rt);const i=Fn(t.firestore,Cr),r=wy(t.converter,e,n);return kd(i,[cy(dc(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,at.none())])}function YL(t,e,n,...i){t=Fn(t,Rt);const r=Fn(t.firestore,Cr),s=dc(r);let o;return o=typeof(e=Fe(e))=="string"||e instanceof Yo?dy(s,"updateDoc",t._key,e,n,i):hy(s,"updateDoc",t._key,e),kd(r,[o.toMutation(t._key,at.exists(!0))])}function XL(t){return kd(Fn(t.firestore,Cr),[new lc(t._key,at.none())])}function xy(t,...e){var n,i,r;t=Fe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||pw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(pw(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof Rt)c=Fn(t.firestore,Cr),h=zm(t._key.path),l={next:d=>{e[o]&&e[o](JL(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Fn(t,Ds);c=Fn(d.firestore,Cr),h=d._query;const f=new Ey(c);l={next:m=>{e[o]&&e[o](new GL(c,f,d,m))},error:e[o+1],complete:e[o+2]},WL(t._query)}return function(f,m,_,b){const w=new kL(b),E=new cL(m,w,_);return f.asyncQueue.enqueueAndForget(async()=>sL(await lw(f),E)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>oL(await lw(f),E))}}(Td(c),h,a,l)}function kd(t,e){return function(i,r){const s=new vr;return i.asyncQueue.enqueueAndForget(async()=>vL(await NL(i),r,s)),s.promise}(Td(t),e)}function JL(t,e,n){const i=n.docs.get(e._key),r=new Ey(t);return new by(t,r,e._key,i,new lo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dc(e)}set(e,n,i){this._verifyNotCommitted();const r=er(e,this._firestore),s=wy(r.converter,n,i),o=cy(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,at.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=er(e,this._firestore);let o;return o=typeof(n=Fe(n))=="string"||n instanceof Yo?dy(this._dataReader,"WriteBatch.update",s._key,n,i,r):hy(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,at.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=er(e,this._firestore);return this._mutations=this._mutations.concat(new lc(n._key,at.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function er(t,e){if((t=Fe(t)).firestore!==e)throw new ee(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=dc(n)}get(n){const i=er(n,this._firestore),r=new KL(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return ae();const o=s[0];if(o.isFoundDocument())return new Rh(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new Rh(this._firestore,r,i._key,null,i.converter);throw ae()})}set(n,i,r){const s=er(n,this._firestore),o=wy(s.converter,i,r),a=cy(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){const o=er(n,this._firestore);let a;return a=typeof(i=Fe(i))=="string"||i instanceof Yo?dy(this._dataReader,"Transaction.update",o._key,i,r,s):hy(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=er(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=er(e,this._firestore),i=new Ey(this._firestore);return super.get(e).then(r=>new by(this._firestore,i,n._key,r._document,new lo(!1,!1),n.converter))}}function IS(t,e,n){t=Fn(t,Cr);const i=Object.assign(Object.assign({},ZL),n);return function(s){if(s.maxAttempts<1)throw new ee(W.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new vr;return s.asyncQueue.enqueueAndForget(async()=>{const c=await DL(s);new AL(s.asyncQueue,c,a,o,l).au()}),l.promise}(Td(t),r=>e(new tj(t,r)),i)}function pc(){return new uy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){return Td(t=Fn(t,Cr)),new ej(t,e=>kd(t,e))}(function(e,n=!0){(function(r){qo=r})(Ho),oi(new Un("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Cr(new YM(i.getProvider("auth-internal")),new e2(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bn(P0,"4.7.3",e),bn(P0,"4.7.3","esm2017")})();const kS="@firebase/installations",Ty="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=1e4,AS=`w:${Ty}`,PS="FIS_v2",nj="https://firebaseinstallations.googleapis.com/v1",ij=60*60*1e3,rj="installations",sj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ts=new As(rj,sj,oj);function RS(t){return t instanceof Wn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS({projectId:t}){return`${nj}/projects/${t}/installations`}function DS(t){return{token:t.token,requestStatus:2,expiresIn:lj(t.expiresIn),creationTime:Date.now()}}async function MS(t,e){const i=(await e.json()).error;return Ts.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function OS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function aj(t,{refreshToken:e}){const n=OS(t);return n.append("Authorization",cj(e)),n}async function LS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function lj(t){return Number(t.replace("s","000"))}function cj(t){return`${PS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=NS(t),r=OS(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:PS,appId:t.appId,sdkVersion:AS},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await LS(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:DS(c.authToken)}}else throw await MS("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=/^[cdef][\w-]{21}$/,gg="";function fj(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=pj(t);return dj.test(n)?n:gg}catch{return gg}}function pj(t){return hj(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new Map;function VS(t,e){const n=Cd(t);US(n,e),gj(n,e)}function US(t,e){const n=FS.get(t);if(n)for(const i of n)i(e)}function gj(t,e){const n=mj();n&&n.postMessage({key:t,fid:e}),yj()}let os=null;function mj(){return!os&&"BroadcastChannel"in self&&(os=new BroadcastChannel("[Firebase] FID Change"),os.onmessage=t=>{US(t.data.key,t.data.fid)}),os}function yj(){FS.size===0&&os&&(os.close(),os=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="firebase-installations-database",vj=1,Is="firebase-installations-store";let Mf=null;function Iy(){return Mf||(Mf=bT(_j,vj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Is)}}})),Mf}async function Nh(t,e){const n=Cd(t),r=(await Iy()).transaction(Is,"readwrite"),s=r.objectStore(Is),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&VS(t,e.fid),e}async function BS(t){const e=Cd(t),i=(await Iy()).transaction(Is,"readwrite");await i.objectStore(Is).delete(e),await i.done}async function Ad(t,e){const n=Cd(t),r=(await Iy()).transaction(Is,"readwrite"),s=r.objectStore(Is),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&VS(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(t){let e;const n=await Ad(t.appConfig,i=>{const r=wj(i),s=bj(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===gg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function wj(t){const e=t||{fid:fj(),registrationStatus:0};return zS(e)}function bj(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ts.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Ej(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xj(t)}:{installationEntry:e}}async function Ej(t,e){try{const n=await uj(t,e);return Nh(t.appConfig,n)}catch(n){throw RS(n)&&n.customData.serverCode===409?await BS(t.appConfig):await Nh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function xj(t){let e=await yw(t.appConfig);for(;e.registrationStatus===1;)await jS(100),e=await yw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Sy(t);return i||n}return e}function yw(t){return Ad(t,e=>{if(!e)throw Ts.create("installation-not-found");return zS(e)})}function zS(t){return Tj(t)?{fid:t.fid,registrationStatus:0}:t}function Tj(t){return t.registrationStatus===1&&t.registrationTime+CS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij({appConfig:t,heartbeatServiceProvider:e},n){const i=Sj(t,n),r=aj(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:AS,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await LS(()=>fetch(i,a));if(l.ok){const c=await l.json();return DS(c)}else throw await MS("Generate Auth Token",l)}function Sj(t,{fid:e}){return`${NS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ky(t,e=!1){let n;const i=await Ad(t.appConfig,s=>{if(!$S(s))throw Ts.create("not-registered");const o=s.authToken;if(!e&&Aj(o))return s;if(o.requestStatus===1)return n=kj(t,e),s;{if(!navigator.onLine)throw Ts.create("app-offline");const a=Rj(s);return n=Cj(t,a),a}});return n?await n:i.authToken}async function kj(t,e){let n=await _w(t.appConfig);for(;n.authToken.requestStatus===1;)await jS(100),n=await _w(t.appConfig);const i=n.authToken;return i.requestStatus===0?ky(t,e):i}function _w(t){return Ad(t,e=>{if(!$S(e))throw Ts.create("not-registered");const n=e.authToken;return Nj(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Cj(t,e){try{const n=await Ij(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Nh(t.appConfig,i),n}catch(n){if(RS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await BS(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Nh(t.appConfig,i)}throw n}}function $S(t){return t!==void 0&&t.registrationStatus===2}function Aj(t){return t.requestStatus===2&&!Pj(t)}function Pj(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ij}function Rj(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Nj(t){return t.requestStatus===1&&t.requestTime+CS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(t){const e=t,{installationEntry:n,registrationPromise:i}=await Sy(e);return i?i.catch(console.error):ky(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e=!1){const n=t;return await Oj(n),(await ky(n,e)).token}async function Oj(t){const{registrationPromise:e}=await Sy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){if(!t||!t.options)throw Of("App Configuration");if(!t.name)throw Of("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Of(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Of(t){return Ts.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="installations",jj="installations-internal",Fj=t=>{const e=t.getProvider("app").getImmediate(),n=Lj(e),i=Zl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Vj=t=>{const e=t.getProvider("app").getImmediate(),n=Zl(e,WS).getImmediate();return{getId:()=>Dj(n),getToken:r=>Mj(n,r)}};function Uj(){oi(new Un(WS,Fj,"PUBLIC")),oi(new Un(jj,Vj,"PRIVATE"))}Uj();bn(kS,Ty);bn(kS,Ty,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="analytics",Bj="firebase_id",zj="origin",$j=60*1e3,Wj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt=new ud("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new As("analytics","Analytics",Hj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t){if(!t.startsWith(Cy)){const e=En.create("invalid-gtag-resource",{gtagURL:t});return Jt.warn(e.message),""}return t}function HS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Kj(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Gj(t,e){const n=Kj("firebase-js-sdk-policy",{createScriptURL:qj}),i=document.createElement("script"),r=`${Cy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function Qj(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Yj(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await HS(n)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){Jt.error(a)}t("config",r,s)}async function Xj(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await HS(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Jt.error(s)}}function Jj(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await Xj(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await Yj(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Jt.error(a)}}return r}function Zj(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=Jj(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function eF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Cy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=30,nF=1e3;class iF{constructor(e={},n=nF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qS=new iF;function rF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function sF(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:rF(i)},s=Wj.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function oF(t,e=qS,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw En.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw En.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new cF;return setTimeout(async()=>{a.abort()},$j),KS({appId:i,apiKey:r,measurementId:s},o,a,e)}async function KS(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=qS){var s;const{appId:o,measurementId:a}=t;try{await aF(i,e)}catch(l){if(a)return Jt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await sF(t);return r.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!lF(c)){if(r.deleteThrottleMetadata(o),a)return Jt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?t0(n,r.intervalMillis,tF):t0(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Jt.debug(`Calling attemptFetch again in ${h} millis`),KS(t,d,i,r)}}function aF(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function lF(t){if(!(t instanceof Wn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class cF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function uF(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(){if(yT())try{await _T()}catch(t){return Jt.warn(En.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Jt.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function dF(t,e,n,i,r,s,o){var a;const l=oF(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Jt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Jt.error(m)),e.push(l);const c=hF().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,c]);eF(s)||Gj(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[zj]="firebase",f.update=!0,d!=null&&(f[Bj]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.app=e}_delete(){return delete rl[this.app.options.appId],Promise.resolve()}}let rl={},ww=[];const bw={};let Lf="dataLayer",pF="gtag",Ew,GS,xw=!1;function gF(){const t=[];if(mT()&&t.push("This is a browser extension environment."),cR()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});Jt.warn(n.message)}}function mF(t,e,n){gF();const i=t.options.appId;if(!i)throw En.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Jt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(rl[i]!=null)throw En.create("already-exists",{id:i});if(!xw){Qj(Lf);const{wrappedGtag:s,gtagCore:o}=Zj(rl,ww,bw,Lf,pF);GS=s,Ew=o,xw=!0}return rl[i]=dF(t,ww,bw,e,Ew,Lf,n),new fF(t)}function yF(t,e,n,i){t=Fe(t),uF(GS,rl[t.app.options.appId],e,n,i).catch(r=>Jt.error(r))}const Tw="@firebase/analytics",Iw="0.10.8";function _F(){oi(new Un(vw,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return mF(i,r,n)},"PUBLIC")),oi(new Un("analytics-internal",t,"PRIVATE")),bn(Tw,Iw),bn(Tw,Iw,"esm2017");function t(e){try{const n=e.getProvider(vw).getImmediate();return{logEvent:(i,r,s)=>yF(n,i,r,s)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}_F();const vF={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},QS=ET(vF),ba=WM(QS),Zt=LL(QS),YS=D.createContext(null);function wF({children:t}){const[e,n]=D.useState(null),[i,r]=D.useState(!0),[s,o]=D.useState(null);D.useEffect(()=>{const l=ND(ba,c=>{n(c),r(!1)});return()=>l()},[]);const a=D.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,c){o(null);try{return(await SD(ba,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,c){o(null);try{return(await kD(ba,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await DD(ba)},async resetPassword(l){o(null);try{await ID(ba,l)}catch(c){throw o((c==null?void 0:c.message)||"Failed to send reset email."),c}}}),[e,i,s]);return p.jsx(YS.Provider,{value:a,children:t})}function Hn(){return D.useContext(YS)}const XS=D.createContext(null),Sw={email:"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],isAdmin:!1,accountType:"user",createdAt:null};function bF(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function EF(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:bF(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).sort((e,n)=>String(n.startDateIso||"").localeCompare(String(e.startDateIso||""))):[]}function xF({children:t}){const{user:e}=Hn(),[n,i]=D.useState(Sw),[r,s]=D.useState(!1),[o,a]=D.useState(null);D.useEffect(()=>{if(i(Sw),a(null),!e)return;const c=kr(Zt,"users",e.uid);s(!0);const h=xy(c,async d=>{if(!d.exists()){await TS(c,{email:e.email||"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],isAdmin:!1,accountType:"user",createdAt:pc()});return}const f=d.data(),m=!!f.isAdmin||f.accountType==="admin",_=f.accountType==="admin"||f.accountType==="user"?f.accountType:m?"admin":"user";i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],cycles:EF(f.cycles),isAdmin:m,accountType:_,createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=D.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(c){if(!e)throw new Error("Not authenticated");a(null);const h=kr(Zt,"users",e.uid);await YL(h,c)}}),[n,r,o,e]);return p.jsx(XS.Provider,{value:l,children:t})}function gc(){return D.useContext(XS)}function TF(){const{user:t,logout:e}=Hn(),{profile:n}=gc(),i=Lr(),r=!!t&&(!!(n!=null&&n.isAdmin)||(n==null?void 0:n.accountType)==="admin");async function s(){await e(),i("/dashboard")}return p.jsx("div",{className:"nav",children:p.jsxs("div",{className:"nav-inner",children:[p.jsxs("div",{className:"brand",children:[p.jsx("div",{className:"badge"}),p.jsxs("div",{children:[p.jsx("h1",{children:"Body Recomposition Tracker"}),p.jsx("div",{className:"small",children:"Created by Andre Gomes"})]})]}),p.jsxs("div",{className:"nav-links",children:[p.jsx(Bs,{to:"/dashboard",className:({isActive:a})=>a?"active":"",children:"Dashboard"}),t&&p.jsx(Bs,{to:"/entry",className:({isActive:a})=>a?"active":"",children:"Entry"}),t&&p.jsx(Bs,{to:"/profile",className:({isActive:a})=>a?"active":"",children:"Profile"}),r&&p.jsx(Bs,{to:"/admin",className:({isActive:a})=>a?"active":"",children:"Admin"})]}),p.jsx("div",{className:"nav-actions",children:t?p.jsxs(p.Fragment,{children:[p.jsxs("button",{className:"icon-btn","aria-label":"Notifications",title:"Notifications",onClick:()=>i("/notifications"),children:[p.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[p.jsx("path",{d:"M12 22a2.25 2.25 0 0 0 2.2-1.75H9.8A2.25 2.25 0 0 0 12 22Z",fill:"currentColor",opacity:"0.85"}),p.jsx("path",{d:"M19 17H5c1.2-1.3 2-2.4 2-6a5 5 0 0 1 10 0c0 3.6.8 4.7 2 6Z",stroke:"currentColor",strokeWidth:"1.6",strokeLinejoin:"round"}),p.jsx("path",{d:"M10 6a2 2 0 0 1 4 0",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]}),0>0]}),p.jsx("button",{className:"btn danger",onClick:s,children:"Log out"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Bs,{to:"/login",className:"btn",children:"Log in"}),p.jsx(Bs,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function tu({children:t}){const{user:e,initializing:n}=Hn();return n?p.jsx("div",{className:"panel",children:p.jsx("div",{className:"muted",children:"Loading"})}):e?t:p.jsx($p,{to:"/login",replace:!0})}function Dh(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function Bl(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function Mh(){return Dh(new Date)}function IF(t,e){const n=Bl(t);return n.setDate(n.getDate()+Number(e)),Dh(n)}function SF(t,e){return t.dateIso.localeCompare(e.dateIso)}function Ay(t,e,n){const i=gS(Zt,"users",t,"entries");return xy(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(SF);e(o)},n)}async function kF(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=kr(Zt,"users",t,"entries",n),r=Bl(n),s={...e,dateIso:n,date:e.date||r,updatedAt:pc()};await TS(i,s,{merge:!0})}async function CF(t,e){const n=SS(Zt);for(const i of e||[]){const r=i==null?void 0:i.dateIso,s=i==null?void 0:i.patch;if(!r||!s)continue;const o=kr(Zt,"users",t,"entries",r);n.update(o,{...s,updatedAt:pc()})}await n.commit()}async function AF(t,e){const n=kr(Zt,"users",t,"entries",e);await XL(n)}const PF=2/8;function JS({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function Jr(t,e){const n=Number(t),i=Number(e);if(!Number.isFinite(n)||n<=0||!Number.isFinite(i)||i<=0||i>=37)return null;const r=n*(36/(37-i));return Number.isFinite(r)?r:null}function RF({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>r==null||r===""?NaN:Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function zs(t,e=PF){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function NF(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function wo(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=NF(i,r,s);return Number.isFinite(o)?o:null}function DF({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=wo(n,"neck",i),a=wo(n,"waist",i),l=wo(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const c=a-o;if(!(c>0))return null;const h=495/(1.0324-.19077*Math.log10(c)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const c=a+l-o;if(!(c>0))return null;const h=495/(1.29579-.35004*Math.log10(c)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function MF({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function ZS(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(_=>Wr(_.bench)),o=t.map(_=>Wr(_.squat)),a=t.map(_=>Wr(_.deadlift)),l=_=>{let b=null;return _.map(w=>Number.isFinite(w)?(b=w,w):b)},c=l(s),h=l(o),d=l(a),f=t.map((_,b)=>({dateIso:_.dateIso,weight:Wr(_.weight),protein:Wr(_.protein),carbs:Wr(_.carbs),fats:Wr(_.fats),neckCm:wo(_,"neck",n),waistCm:wo(_,"waist",n),hipCm:wo(_,"hip",n),bench:s[b],squat:o[b],deadlift:a[b],calories:JS(_),avgStrength:RF({bench:c[b],squat:h[b],deadlift:d[b]}),bfPct:DF({sex:i,heightCm:r,entry:_,tripleEnabled:n})}));f.forEach(_=>{_.lbm=MF({weightKg:_.weight,bfPct:_.bfPct})});const m={weight:zs(f.map(_=>_.weight)),bench:zs(f.map(_=>_.bench)),squat:zs(f.map(_=>_.squat)),deadlift:zs(f.map(_=>_.deadlift)),calories:zs(f.map(_=>_.calories)),avgStrength:zs(f.map(_=>_.avgStrength))};return f.map((_,b)=>({..._,wma:{weight:m.weight[b],bench:m.bench[b],squat:m.squat[b],deadlift:m.deadlift[b],calories:m.calories[b],avgStrength:m.avgStrength[b]}}))}function OF(t){var f,m,_,b;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=w=>w*7-1;function s(w){var E;for(let x=w;x>=0;x--){const k=(E=t[x])==null?void 0:E.lbm;if(Number.isFinite(k))return k}return null}for(let w=1;w<=i;w++){const E=(w-1)*7,x=r(w),k=t.slice(E,x+1),N=Ea(k.map(T=>T.calories)),M=Ea(k.map(T=>{var z;return(z=T==null?void 0:T.wma)==null?void 0:z.avgStrength})),O=(m=(f=k[0])==null?void 0:f.wma)==null?void 0:m.weight,I=(b=(_=k[k.length-1])==null?void 0:_.wma)==null?void 0:b.weight,v=Number.isFinite(O)&&Number.isFinite(I)?I-O:null;let C=null;if(Number.isFinite(N)&&Number.isFinite(v)){const z=-v*7700/7;C=N+z}const P=s(x);let R=null,S="";Number.isFinite(P)&&Number.isFinite(v)&&(R=Math.max(0,-v)/P*100,R<.5?S="Conservative":R<=1?S="Optimal":S="Aggressive"),e.push({week:w,avgCalories:N,weightChange:v,tdee:C,avgStrengthWma:M,lbm:P,lossRatePct:R,lossRateStatus:S,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(w=>w.tdee).filter(Number.isFinite),a=o.length?Ea(o):null,l=e.slice(0,2).map(w=>w.avgStrengthWma).filter(Number.isFinite),c=l.length?Ea(l):null,h=e.slice(0,2).map(w=>Number.isFinite(w.weightChange)?Math.max(0,-w.weightChange):null).filter(Number.isFinite),d=h.length?Ea(h):null;if(Number.isFinite(a))for(const w of e)Number.isFinite(w.tdee)&&(w.tdeeChangeFromBaseline=w.tdee-a,w.adaptationPct=w.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:c,baselineWeeklyLoss:d}}function Wr(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function Ea(t){const e=(t||[]).map(n=>n==null||n===""?NaN:Number(n)).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}const LF=[{id:"cutting_optimal",label:"Cutting (optimal)"},{id:"cutting_aggressive",label:"Cutting (aggressive / strength down)"},{id:"recomp_maintain",label:"Recomping (maintaining weight)"},{id:"bulking_lean",label:"Lean bulking"},{id:"bulking_dirty",label:"Dirty bulking"},{id:"spinning_wheels",label:"Spinning wheels (stall)"},{id:"skinny_fat",label:"Skinny-fat trajectory (bad cut)"},{id:"detraining",label:"Detraining (no stimulus)"},{id:"metabolic_crash",label:"Metabolic crash (slowdown)"}];function jF(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return e>>>0}function FF(t){let e=t>>>0;return function(){e|=0,e=e+1831565813|0;let i=Math.imul(e^e>>>15,1|e);return i=i+Math.imul(i^i>>>7,61|i)^i,((i^i>>>14)>>>0)/4294967296}}function Pn(t){let e=0,n=0;for(;e===0;)e=t();for(;n===0;)n=t();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*n)}function Kn(t,e,n){return Math.max(e,Math.min(n,t))}function VF(t,e,n){return t+(e-t)*n}function ts(t){return Math.round(t*10)/10}function UF({heightCm:t,waistCm:e,neckCm:n}){const i=Number(t),r=Number(e),s=Number(n);if(![i,r,s].every(Number.isFinite))return null;const o=r-s;if(!(o>0))return null;const a=495/(1.0324-.19077*Math.log10(o)+.15456*Math.log10(i))-450;return Number.isFinite(a)?a:null}function BF({targetBfPct:t,heightCm:e,neckCm:n}){let i=60,r=140,s=90;for(let o=0;o<40;o++){const a=(i+r)/2,l=UF({heightCm:e,waistCm:a,neckCm:n});if(!Number.isFinite(l)){r=a;continue}s=a,l>t?r=a:i=a}return s}function Py(t){const e={id:t,sex:"male",heightCm:175,neckCm:40,baselineDays:14,startWeightKg:90,startBfPct:24,startTdee:2550,start1rm:{bench:120,squat:170,deadlift:220}},n={cutting_optimal:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2050,proteinPerKg:()=>2,fatPerKg:()=>.75,strengthSlope:()=>.012,bfDeltaPerDay:()=>-.04,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},cutting_aggressive:{...e,cycleType:"cutting",targetWeightKg:83,plan:{calTarget:()=>1650,rampDays:14,proteinPerKg:()=>1.6,fatPerKg:()=>.6,strengthSlope:()=>-.04,bfDeltaPerDay:()=>-.06,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.95}},recomp_maintain:{...e,cycleType:"maintaining",targetWeightKg:null,plan:{calTarget:()=>2480,proteinPerKg:()=>2.1,fatPerKg:()=>.8,strengthSlope:()=>.02,bfDeltaPerDay:()=>-.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},bulking_lean:{...e,cycleType:"bulking",targetWeightKg:93,plan:{calTarget:()=>2900,proteinPerKg:()=>2,fatPerKg:()=>.9,strengthSlope:()=>.035,bfDeltaPerDay:()=>.005,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},bulking_dirty:{...e,cycleType:"bulking",targetWeightKg:96,plan:{calTarget:()=>3350,proteinPerKg:()=>1.7,fatPerKg:()=>1.05,strengthSlope:()=>.03,bfDeltaPerDay:()=>.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.95}},spinning_wheels:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2450,proteinPerKg:()=>1.9,fatPerKg:()=>.85,strengthSlope:()=>0,bfDeltaPerDay:()=>0,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.9}},skinny_fat:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2050,proteinPerKg:()=>1.3,fatPerKg:()=>.9,strengthSlope:()=>-.07,bfDeltaPerDay:()=>.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.55}},detraining:{...e,cycleType:"maintaining",targetWeightKg:null,plan:{calTarget:()=>2600,proteinPerKg:()=>1.6,fatPerKg:()=>.9,strengthSlope:()=>-.1,bfDeltaPerDay:()=>.02,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.25}},metabolic_crash:{...e,cycleType:"cutting",targetWeightKg:84,plan:{calTarget:i=>i>24&&i<35?2450:1750,proteinPerKg:()=>1.9,fatPerKg:()=>.7,strengthSlope:()=>-.05,bfDeltaPerDay:i=>i>24&&i<35?0:-.05,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.85,adaptationMultiplier:1.8}}};return n[t]||n.cutting_optimal}function zF(t="cutting_optimal"){const e=Py(t);return{email:"demo@example.com",sex:e.sex,height:e.heightCm,tripleMeasurements:!1,createdAt:new Date().toISOString(),isAdmin:!1,liftNames:["Bench","Squat","Deadlift"]}}function $F(t,e="cutting_optimal"){const n=Py(e);if(!(t!=null&&t.length))return[];const i=Math.min(n.baselineDays,t.length),r=t[0].dateIso,s=t[Math.max(0,i-1)].dateIso,o=t[Math.min(t.length-1,i)].dateIso,a=t[Math.min(t.length-1,i)].weight,l=[];l.push({id:"demo-cycle-0",type:"maintaining",startDateIso:r,endDateIso:s,targetWeightKg:null});let c=n.targetWeightKg;return n.cycleType==="cutting"&&!Number.isFinite(c)&&(c=ts(a-4)),n.cycleType==="bulking"&&!Number.isFinite(c)&&(c=ts(a+3)),n.cycleType==="maintaining"&&(c=null),l.push({id:"demo-cycle-1",type:n.cycleType,startDateIso:o,endDateIso:null,targetWeightKg:c}),l}function WF(t=84,e="cutting_optimal"){var N;const n=Py(e),i=jF(`brt-demo:${e}:${t}`),r=FF(i),s=Math.min(n.baselineDays,Math.max(14,Math.floor(t/2))),o=Math.max(0,t-s),a=new Date;a.setDate(a.getDate()-(t-1));const l=Dh(a);let c=n.startWeightKg,h=0,d=n.startBfPct;const f=n.startTdee;let m=0,_=0;const b={...n.start1rm};({...n.start1rm});const w=[["bench"],["squat"],[],["bench","deadlift"],["squat"],["deadlift"],[]];function E(M,O=1){const I=M%7,v=w[I];return v.length?r()>O?[]:v:[]}const x=[],k=new Map;(N=n.plan)!=null&&N.refeedEvery&&n.plan.refeedEvery>0&&k.set("phase",Math.floor(r()*n.plan.refeedEvery));for(let M=0;M<t;M++){const O=Dh(new Date(Bl(l).getTime()+M*864e5)),I=M<s,v=I?0:M-s,C=n.plan,P=c+h;let R=I?f:C.calTarget(v);if(!I){const Z=Math.max(0,C.rampDays||7);if(Z>0&&v<Z){const Ot=Z===1?1:Kn(v/(Z-1),0,1);R=VF(f,R,Ot)}}const S=k.get("phase")||0,T=!I&&C.refeedEvery&&C.refeedEvery>0&&(v+S)%C.refeedEvery===0,z=Math.round(Pn(r)*(I?15:60));let B=R+(T?C.refeedDeltaCal:0)+z;I&&(B-=Kn(_/2,-240,240));const Q=I?1.9:C.proteinPerKg(v),j=I?.85:C.fatPerKg(v),V=Math.max(90,Math.round(P*Q+Pn(r)*8)),G=Math.max(40,Math.round(P*j+Pn(r)*5)),X=B-(V*4+G*9),$=Math.max(0,Math.round(X/4)),L=V*4+$*4+G*9,q=I?1:C.trainingConsistency,ne=E(M,q),le=o?Kn(v/Math.max(1,o-1),0,1):0,Te=1+(I?.006:C.strengthSlope(v))*le,Ye={bench:null,squat:null,deadlift:null};for(const Z of["bench","squat","deadlift"]){if(M===0){Ye[Z]=ts(b[Z]+Pn(r)*1.5);continue}if(!ne.includes(Z))continue;const Ot=b[Z]*Te,kn=ts(Ot+Pn(r)*2);Ye[Z]=kn}const fn=I?.0012:.0025,Be=f*(1+(I?0:m))*(1+Pn(r)*fn),et=L-Be;I&&(_=_*.55+et,_=Kn(_,-700,700)),c+=et/7700,c=Kn(c,55,140);const J=I?.5:.55,de=T?.35:0,Ke=!I&&$>=350?.14:0,st=!I&&$<120?-.12:0,en=I?.02:.04,tt=I?-.35:-.9,Sn=I?.35:1.6;if(h=h*J+de+Ke+st+Pn(r)*en,h=Kn(h,tt,Sn),I)m=0;else{const Z=Be-L,Ot=L-Be,kn=C.adaptationMultiplier||1,Ve=Z>0?-.001*kn*Kn(Z/500,0,2):0,ve=Ot>0?2e-4*Kn(Ot/400,0,1.5):0;m+=Ve+ve,m=Kn(m,-.22,.08)}I||(d+=C.bfDeltaPerDay(v)+Pn(r)*.03,d=Kn(d,7,45));const $t=ts(c+h+Pn(r)*.07);let xt=null,tn=null,ui=null;{xt=ts(n.neckCm+Pn(r)*.25);const Z=BF({targetBfPct:d,heightCm:n.heightCm,neckCm:xt});tn=ts(Z+Pn(r)*.6),ui=null}x.push({id:`demo-${e}-${M}`,dateIso:O,weight:$t,protein:V,carbs:$,fats:G,bench:Ye.bench,squat:Ye.squat,deadlift:Ye.deadlift,neck:xt,waist:tn,hip:ui})}return x}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function mc(t){return t+.5|0}const sr=(t,e,n)=>Math.max(Math.min(t,n),e);function Fa(t){return sr(mc(t*2.55),0,255)}function br(t){return sr(mc(t*255),0,255)}function _i(t){return sr(mc(t/2.55)/100,0,1)}function kw(t){return sr(mc(t*100),0,100)}const gn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},mg=[..."0123456789ABCDEF"],HF=t=>mg[t&15],qF=t=>mg[(t&240)>>4]+mg[t&15],nu=t=>(t&240)>>4===(t&15),KF=t=>nu(t.r)&&nu(t.g)&&nu(t.b)&&nu(t.a);function GF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&gn[t[1]]*17,g:255&gn[t[2]]*17,b:255&gn[t[3]]*17,a:e===5?gn[t[4]]*17:255}:(e===7||e===9)&&(n={r:gn[t[1]]<<4|gn[t[2]],g:gn[t[3]]<<4|gn[t[4]],b:gn[t[5]]<<4|gn[t[6]],a:e===9?gn[t[7]]<<4|gn[t[8]]:255})),n}const QF=(t,e)=>t<255?e(t):"";function YF(t){var e=KF(t)?HF:qF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+QF(t.a,e):void 0}const XF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ek(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function JF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function ZF(t,e,n){const i=ek(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function eV(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Ry(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=eV(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function Ny(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(br)}function Dy(t,e,n){return Ny(ek,t,e,n)}function tV(t,e,n){return Ny(ZF,t,e,n)}function nV(t,e,n){return Ny(JF,t,e,n)}function tk(t){return(t%360+360)%360}function iV(t){const e=XF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Fa(+e[5]):br(+e[5]));const r=tk(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=tV(r,s,o):e[1]==="hsv"?i=nV(r,s,o):i=Dy(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function rV(t,e){var n=Ry(t);n[0]=tk(n[0]+e),n=Dy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function sV(t){if(!t)return;const e=Ry(t),n=e[0],i=kw(e[1]),r=kw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${_i(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const Cw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Aw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function oV(){const t={},e=Object.keys(Aw),n=Object.keys(Cw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Cw[s]);s=parseInt(Aw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let iu;function aV(t){iu||(iu=oV(),iu.transparent=[0,0,0,0]);const e=iu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const lV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function cV(t){const e=lV.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Fa(o):sr(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Fa(i):sr(i,0,255)),r=255&(e[4]?Fa(r):sr(r,0,255)),s=255&(e[6]?Fa(s):sr(s,0,255)),{r:i,g:r,b:s,a:n}}}function uV(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${_i(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const jf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,$s=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function hV(t,e,n){const i=$s(_i(t.r)),r=$s(_i(t.g)),s=$s(_i(t.b));return{r:br(jf(i+n*($s(_i(e.r))-i))),g:br(jf(r+n*($s(_i(e.g))-r))),b:br(jf(s+n*($s(_i(e.b))-s))),a:t.a+n*(e.a-t.a)}}function ru(t,e,n){if(t){let i=Ry(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Dy(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function nk(t,e){return t&&Object.assign(e||{},t)}function Pw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=br(t[3]))):(e=nk(t,{r:0,g:0,b:0,a:1}),e.a=br(e.a)),e}function dV(t){return t.charAt(0)==="r"?cV(t):iV(t)}class zl{constructor(e){if(e instanceof zl)return e;const n=typeof e;let i;n==="object"?i=Pw(e):n==="string"&&(i=GF(e)||aV(e)||dV(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=nk(this._rgb);return e&&(e.a=_i(e.a)),e}set rgb(e){this._rgb=Pw(e)}rgbString(){return this._valid?uV(this._rgb):void 0}hexString(){return this._valid?YF(this._rgb):void 0}hslString(){return this._valid?sV(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=hV(this._rgb,e._rgb,n)),this}clone(){return new zl(this.rgb)}alpha(e){return this._rgb.a=br(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=mc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ru(this._rgb,2,e),this}darken(e){return ru(this._rgb,2,-e),this}saturate(e){return ru(this._rgb,1,e),this}desaturate(e){return ru(this._rgb,1,-e),this}rotate(e){return rV(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fi(){}const fV=(()=>{let t=0;return()=>t++})();function De(t){return t==null}function _t(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ke(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function In(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Gn(t,e){return In(t)?t:e}function be(t,e){return typeof t>"u"?e:t}const pV=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Le(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ce(t,e,n,i){let r,s,o;if(_t(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ke(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Oh(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Lh(t){if(_t(t))return t.map(Lh);if(ke(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Lh(t[n[r]]);return e}return t}function ik(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function gV(t,e,n,i){if(!ik(t))return;const r=e[t],s=n[t];ke(r)&&ke(s)?$l(r,s,i):e[t]=Lh(s)}function $l(t,e,n){const i=_t(e)?e:[e],r=i.length;if(!ke(t))return t;n=n||{};const s=n.merger||gV;let o;for(let a=0;a<r;++a){if(o=i[a],!ke(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function sl(t,e){return $l(t,e,{merger:mV})}function mV(t,e,n){if(!ik(t))return;const i=e[t],r=n[t];ke(i)&&ke(r)?sl(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Lh(r))}const Rw={"":t=>t,x:t=>t.x,y:t=>t.y};function yV(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function _V(t){const e=yV(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function jh(t,e){return(Rw[e]||(Rw[e]=_V(e)))(t)}function My(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Fh=t=>typeof t<"u",Ar=t=>typeof t=="function",Nw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function vV(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Nt=Math.PI,si=2*Nt,wV=si+Nt,Vh=Number.POSITIVE_INFINITY,bV=Nt/180,On=Nt/2,Hr=Nt/4,Dw=Nt*2/3,rk=Math.log10,jo=Math.sign;function ol(t,e,n){return Math.abs(t-e)<n}function Mw(t){const e=Math.round(t);t=ol(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(rk(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function EV(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function xV(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Wl(t){return!xV(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function TV(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function IV(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function as(t){return t*(Nt/180)}function SV(t){return t*(180/Nt)}function Ow(t){if(!In(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function kV(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Nt&&(s+=si),{angle:s,distance:r}}function yg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function CV(t,e){return(t-e+wV)%si-Nt}function Hi(t){return(t%si+si)%si}function sk(t,e,n,i){const r=Hi(t),s=Hi(e),o=Hi(n),a=Hi(s-r),l=Hi(o-r),c=Hi(r-s),h=Hi(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function vn(t,e,n){return Math.max(e,Math.min(n,t))}function AV(t){return vn(t,-32768,32767)}function Va(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Oy(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const ls=(t,e,n,i)=>Oy(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),PV=(t,e,n)=>Oy(t,n,i=>t[i][e]>=n);function RV(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const ok=["push","pop","shift","splice","unshift"];function NV(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ok.forEach(n=>{const i="_onData"+My(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Lw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(ok.forEach(s=>{delete t[s]}),delete t._chartjs)}function DV(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ak=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function lk(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,ak.call(window,()=>{i=!1,t.apply(e,n)}))}}function MV(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const ck=t=>t==="start"?"left":t==="end"?"right":"center",rn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,OV=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function LV(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:_}=o.getUserBounds();if(m){if(r=Math.min(ls(l,h,d).lo,n?i:ls(e,h,o.getPixelForValue(d)).lo),c){const b=l.slice(0,r+1).reverse().findIndex(w=>!De(w[a.axis]));r-=Math.max(0,b)}r=vn(r,0,i-1)}if(_){let b=Math.max(ls(l,o.axis,f,!0).hi+1,n?0:ls(e,h,o.getPixelForValue(f),!0).hi+1);if(c){const w=l.slice(b-1).findIndex(E=>!De(E[a.axis]));b+=Math.max(0,w)}s=vn(b,r,i)-r}else s=i-r}return{start:r,count:s}}function jV(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const su=t=>t===0||t===1,jw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*si/n)),Fw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*si/n)+1,al={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*On)+1,easeOutSine:t=>Math.sin(t*On),easeInOutSine:t=>-.5*(Math.cos(Nt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>su(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>su(t)?t:jw(t,.075,.3),easeOutElastic:t=>su(t)?t:Fw(t,.075,.3),easeInOutElastic(t){return su(t)?t:t<.5?.5*jw(t*2,.1125,.45):.5+.5*Fw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-al.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?al.easeInBounce(t*2)*.5:al.easeOutBounce(t*2-1)*.5+.5};function Ly(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Vw(t){return Ly(t)?t:new zl(t)}function Ff(t){return Ly(t)?t:new zl(t).saturate(.5).darken(.1).hexString()}const FV=["x","y","borderWidth","radius","tension"],VV=["color","borderColor","backgroundColor"];function UV(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:VV},numbers:{type:"number",properties:FV}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function BV(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Uw=new Map;function zV(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Uw.get(n);return i||(i=new Intl.NumberFormat(t,e),Uw.set(n,i)),i}function uk(t,e,n){return zV(e,n).format(t)}const $V={values(t){return _t(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=WV(t,n)}const o=rk(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),uk(t,i,l)}};function WV(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var hk={formatters:$V};function HV(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ss=Object.create(null),_g=Object.create(null);function ll(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Vf(t,e,n){return typeof e=="string"?$l(ll(t,e),n):$l(ll(t,""),e)}class qV{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Ff(r.backgroundColor),this.hoverBorderColor=(i,r)=>Ff(r.borderColor),this.hoverColor=(i,r)=>Ff(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Vf(this,e,n)}get(e){return ll(this,e)}describe(e,n){return Vf(_g,e,n)}override(e,n){return Vf(Ss,e,n)}route(e,n,i,r){const s=ll(this,e),o=ll(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ke(l)?Object.assign({},c,l):be(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ze=new qV({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[UV,BV,HV]);function KV(t){return!t||De(t.size)||De(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Bw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function qr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function zw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function vg(t,e,n,i){dk(t,e,n,i,null)}function dk(t,e,n,i,r){let s,o,a,l,c,h,d,f;const m=e.pointStyle,_=e.rotation,b=e.radius;let w=(_||0)*bV;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,b,0,0,si):t.arc(n,i,b,0,si),t.closePath();break;case"triangle":h=r?r/2:b,t.moveTo(n+Math.sin(w)*h,i-Math.cos(w)*b),w+=Dw,t.lineTo(n+Math.sin(w)*h,i-Math.cos(w)*b),w+=Dw,t.lineTo(n+Math.sin(w)*h,i-Math.cos(w)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(w+Hr)*l,d=Math.cos(w+Hr)*(r?r/2-c:l),a=Math.sin(w+Hr)*l,f=Math.sin(w+Hr)*(r?r/2-c:l),t.arc(n-d,i-a,c,w-Nt,w-On),t.arc(n+f,i-o,c,w-On,w),t.arc(n+d,i+a,c,w,w+On),t.arc(n-f,i+o,c,w+On,w+Nt),t.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*b,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}w+=Hr;case"rectRot":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":w+=Hr;case"cross":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),w+=Hr,d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(w)*b,a=Math.sin(w)*b,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(r?r/2:b),i+Math.sin(w)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Hl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function jy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Fy(t){t.restore()}function GV(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function QV(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function YV(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),De(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function XV(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function JV(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Uh(t,e,n,i,r,s={}){const o=_t(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,YV(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&JV(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),De(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),XV(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function wg(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Nt,Nt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Nt,On,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,On,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-On,!0),t.lineTo(n+o.topLeft,i)}const ZV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,e4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function t4(t,e){const n=(""+t).match(ZV);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const n4=t=>+t||0;function fk(t,e){const n={},i=ke(e),r=i?Object.keys(e):e,s=ke(t)?i?o=>be(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=n4(s(o));return n}function i4(t){return fk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function cl(t){return fk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function $n(t){const e=i4(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Gt(t,e){t=t||{},e=e||Ze.font;let n=be(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=be(t.style,e.style);i&&!(""+i).match(e4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:be(t.family,e.family),lineHeight:t4(be(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:be(t.weight,e.weight),string:""};return r.string=KV(r),r}function ou(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function r4(t,e,n){const{min:i,max:r}=t,s=pV(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Ms(t,e){return Object.assign(Object.create(t),e)}function Vy(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=yk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Vy([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return gk(a,l,()=>d4(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Ww(a).includes(l)},ownKeys(a){return Ww(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Fo(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:pk(t,i),setContext:s=>Fo(t,s,n,i),override:s=>Fo(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return gk(s,o,()=>o4(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function pk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Ar(n)?n:()=>n,isIndexable:Ar(i)?i:()=>i}}const s4=(t,e)=>t?t+My(e):e,Uy=(t,e)=>ke(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function o4(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Ar(a)&&o.isScriptable(e)&&(a=a4(e,a,t,n)),_t(a)&&a.length&&(a=l4(e,a,t,o.isIndexable)),Uy(e,a)&&(a=Fo(a,r,s&&s[e],o)),a}function a4(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),Uy(t,l)&&(l=By(r._scopes,r,t,l)),l}function l4(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ke(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=By(c,r,t,h);e.push(Fo(d,s,o&&o[t],a))}}return e}function mk(t,e,n){return Ar(t)?t(e,n):t}const c4=(t,e)=>t===!0?e:typeof t=="string"?jh(e,t):void 0;function u4(t,e,n,i,r){for(const s of e){const o=c4(n,s);if(o){t.add(o);const a=mk(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function By(t,e,n,i){const r=e._rootScopes,s=mk(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=$w(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=$w(a,o,s,l,i),l===null)?!1:Vy(Array.from(a),[""],r,s,()=>h4(e,n,i))}function $w(t,e,n,i,r){for(;n;)n=u4(t,e,n,i,r);return n}function h4(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return _t(r)&&ke(n)?n:r||{}}function d4(t,e,n,i){let r;for(const s of e)if(r=yk(s4(s,t),n),typeof r<"u")return Uy(t,r)?By(n,i,t,r):r}function yk(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Ww(t){let e=t._keys;return e||(e=t._keys=f4(t._scopes)),e}function f4(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const p4=Number.EPSILON||1e-14,Vo=(t,e)=>e<t.length&&!t[e].skip&&t[e],_k=t=>t==="x"?"y":"x";function g4(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=yg(s,r),l=yg(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function m4(t,e,n){const i=t.length;let r,s,o,a,l,c=Vo(t,0);for(let h=0;h<i-1;++h)if(l=c,c=Vo(t,h+1),!(!l||!c)){if(ol(e[h],0,p4)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function y4(t,e,n="x"){const i=_k(n),r=t.length;let s,o,a,l=Vo(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Vo(t,c+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[c])}}function _4(t,e="x"){const n=_k(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Vo(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Vo(t,o+1),!!l){if(c){const h=c[e]-l[e];r[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?jo(r[o-1])!==jo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}m4(t,r,s),y4(t,s,e)}function au(t,e,n){return Math.max(Math.min(t,n),e)}function v4(t,e){let n,i,r,s,o,a=Hl(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&Hl(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=au(r.cp1x,e.left,e.right),r.cp1y=au(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=au(r.cp2x,e.left,e.right),r.cp2y=au(r.cp2y,e.top,e.bottom)))}function w4(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")_4(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=g4(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&v4(t,n)}function zy(){return typeof window<"u"&&typeof document<"u"}function $y(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Bh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Pd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function b4(t,e){return Pd(t).getPropertyValue(e)}const E4=["top","right","bottom","left"];function ds(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=E4[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const x4=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function T4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(x4(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Zr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Pd(n),s=r.boxSizing==="border-box",o=ds(r,"padding"),a=ds(r,"border","width"),{x:l,y:c,box:h}=T4(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:_}=e;return s&&(m-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-f)/_*n.height/i)}}function I4(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&$y(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Pd(s),l=ds(a,"border","width"),c=ds(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Bh(a.maxWidth,s,"clientWidth"),r=Bh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Vh,maxHeight:r||Vh}}const or=t=>Math.round(t*10)/10;function S4(t,e,n,i){const r=Pd(t),s=ds(r,"margin"),o=Bh(r.maxWidth,t,"clientWidth")||Vh,a=Bh(r.maxHeight,t,"clientHeight")||Vh,l=I4(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const f=ds(r,"border","width"),m=ds(r,"padding");c-=m.width+f.width,h-=m.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=or(Math.min(c,o,l.maxWidth)),h=or(Math.min(h,a,l.maxHeight)),c&&!h&&(h=or(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=or(Math.floor(h*i))),{width:c,height:h}}function Hw(t,e,n){const i=e||1,r=or(t.height*i),s=or(t.width*i);t.height=or(t.height),t.width=or(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const k4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};zy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function qw(t,e){const n=b4(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function es(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function C4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function A4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=es(t,r,n),a=es(r,s,n),l=es(s,e,n),c=es(o,a,n),h=es(a,l,n);return es(c,h,n)}const P4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},R4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function bo(t,e,n){return t?P4(e,n):R4()}function vk(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function wk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function bk(t){return t==="angle"?{between:sk,compare:CV,normalize:Hi}:{between:Va,compare:(e,n)=>e-n,normalize:e=>e}}function Kw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function N4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=bk(i),l=e.length;let{start:c,end:h,loop:d}=t,f,m;if(d){for(c+=l,h+=l,f=0,m=l;f<m&&o(a(e[c%l][i]),r,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function D4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=bk(i),{start:h,end:d,loop:f,style:m}=N4(t,e,n),_=[];let b=!1,w=null,E,x,k;const N=()=>l(r,k,E)&&a(r,k)!==0,M=()=>a(s,E)===0||l(s,k,E),O=()=>b||N(),I=()=>!b||M();for(let v=h,C=h;v<=d;++v)x=e[v%o],!x.skip&&(E=c(x[i]),E!==k&&(b=l(E,r,s),w===null&&O()&&(w=a(E,r)===0?v:C),w!==null&&I()&&(_.push(Kw({start:w,end:v,loop:f,count:o,style:m})),w=null),C=v,k=E));return w!==null&&_.push(Kw({start:w,end:d,loop:f,count:o,style:m})),_}function M4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=D4(i[r],t.points,e);s.length&&n.push(...s)}return n}function O4(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function L4(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function j4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=O4(n,r,s,i);if(i===!0)return Gw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return Gw(t,L4(n,o,l,c),n,e)}function Gw(t,e,n,i){return!i||!i.setContext||!n?e:F4(t,e,n,i)}function F4(t,e,n,i){const r=t._chart.getContext(),s=Qw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function m(_,b,w,E){const x=a?-1:1;if(_!==b){for(_+=l;n[_%l].skip;)_-=x;for(;n[b%l].skip;)b+=x;_%l!==b%l&&(c.push({start:_%l,end:b%l,loop:w,style:E}),h=E,d=b%l)}}for(const _ of e){d=a?d:_.start;let b=n[d%l],w;for(f=d+1;f<=_.end;f++){const E=n[f%l];w=Qw(i.setContext(Ms(r,{type:"segment",p0:b,p1:E,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),V4(w,h)&&m(d,f-1,_.loop,h),b=E,h=w}d<f-1&&m(d,f-1,_.loop,h)}return c}function Qw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function V4(t,e){if(!e)return!1;const n=[],i=function(r,s){return Ly(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function lu(t,e,n){return t.options.clip?t[n]:e[n]}function U4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:lu(n,e,"left"),right:lu(n,e,"right"),top:lu(i,e,"top"),bottom:lu(i,e,"bottom")}:e}function B4(t,e){const n=e._clip;if(n.disabled)return!1;const i=U4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class z4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ak.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var pi=new z4;const Yw="transparent",$4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Vw(t||Yw),r=i.valid&&Vw(e||Yw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class W4{constructor(e,n,i,r){const s=n[i];r=ou([e.to,r,s,e.from]);const o=ou([e.from,s,r]);this._active=!0,this._fn=e.fn||$4[e.type||typeof o],this._easing=al[e.easing]||al.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ou([e.to,n,r,e.from]),this._from=ou([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class Ek{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ke(e))return;const n=Object.keys(Ze.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ke(s))return;const o={};for(const a of n)o[a]=s[a];(_t(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=q4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&H4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new W4(f,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return pi.add(this._chart,i),!0}}function H4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function q4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Xw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function K4(t,e,n){if(n===!1)return!1;const i=Xw(t,n),r=Xw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function G4(t){let e,n,i,r;return ke(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function xk(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Jw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],In(c)&&(s||e===0||jo(e)===jo(c))&&(e+=c)}return!h&&!i.all?0:e}function Q4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function Uf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Y4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function X4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function J4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Zw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function eb(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=Y4(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const _=e[m],{[l]:b,[c]:w}=_,E=_._stacks||(_._stacks={});f=E[c]=J4(r,h,b),f[a]=w,f._top=Zw(f,o,!0,i.type),f._bottom=Zw(f,o,!1,i.type);const x=f._visualValues||(f._visualValues={});x[a]=w}}function Bf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function Z4(t,e){return Ms(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function eU(t,e,n){return Ms(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function xa(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const zf=t=>t==="reset"||t==="none",tb=(t,e)=>e?t:Object.assign({},t),tU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:xk(n,!0),values:null};class ul{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Uf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&xa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,_)=>d==="x"?f:d==="r"?_:m,s=n.xAxisID=be(i.xAxisID,Bf(e,"x")),o=n.yAxisID=be(i.yAxisID,Bf(e,"y")),a=n.rAxisID=be(i.rAxisID,Bf(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Lw(this._data,this),e._stacked&&xa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ke(n)){const r=this._cachedMeta;this._data=Q4(n,r)}else if(i!==n){if(i){Lw(i,this);const r=this._cachedMeta;xa(r),r._parsed=[]}n&&Object.isExtensible(n)&&NV(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Uf(n.vScale,n),n.stack!==i.stack&&(r=!0,xa(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(eb(this,n._parsed),n._stacked=Uf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{_t(r[e])?f=this.parseArrayData(i,r,e,n):ke(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&eb(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let f,m,_;for(f=0,m=r;f<m;++f)_=f+i,d[f]={[a]:h||s.parse(c[_],_),[l]:o.parse(n[_],_)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],c[h]={x:s.parse(jh(m,a),f),y:o.parse(jh(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:xk(r,!0),values:n._stacks[e.axis]._visualValues};return Jw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=Jw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=tU(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=X4(a);let f,m;function _(){m=r[f];const b=m[a.axis];return!In(m[e.axis])||h>b||d<b}for(f=0;f<o&&!(!_()&&(this.updateRangeFromParsed(c,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],In(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=G4(be(this.options.clip,K4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=eU(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Z4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Fh(i);if(a)return tb(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Ze.elements[e]),_=()=>this.getContext(i,r,n),b=c.resolveNamedOptions(f,m,_,d);return b.$shared&&(b.$shared=l,s[o]=Object.freeze(tb(b,l))),b}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const c=new Ek(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||zf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){zf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!zf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&xa(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}fe(ul,"defaults",{}),fe(ul,"datasetElementType",null),fe(ul,"dataElementType",null);class Fu extends ul{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=LV(n,r,o);this._drawStart=a,this._drawCount=l,jV(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,m=a.axis,{spanGaps:_,segment:b}=this.options,w=Wl(_)?_:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||s||r==="none",x=n+i,k=e.length;let N=n>0&&this.getParsed(n-1);for(let M=0;M<k;++M){const O=e[M],I=E?O:{};if(M<n||M>=x){I.skip=!0;continue}const v=this.getParsed(M),C=De(v[m]),P=I[f]=o.getPixelForValue(v[f],M),R=I[m]=s||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,v,l):v[m],M);I.skip=isNaN(P)||isNaN(R)||C,I.stop=M>0&&Math.abs(v[f]-N[f])>w,b&&(I.parsed=v,I.raw=c.data[M]),d&&(I.options=h||this.resolveDataElementOptions(M,O.active?"active":r)),E||this.updateElement(O,M,I,r),N=v}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}fe(Fu,"id","line"),fe(Fu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),fe(Fu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Kr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Wy{constructor(e){fe(this,"options");this.options=e||{}}static override(e){Object.assign(Wy.prototype,e)}init(){}formats(){return Kr()}parse(){return Kr()}format(){return Kr()}add(){return Kr()}diff(){return Kr()}startOf(){return Kr()}endOf(){return Kr()}}var nU={_date:Wy};function iU(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?PV:ls;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(s,e,n-d),m=c(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(b=>!De(b[d.axis]));h.lo-=Math.max(0,m);const _=f.slice(h.hi).findIndex(b=>!De(b[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:s.length-1}}function Rd(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=iU(s[a],e,o,r);for(let m=d;m<=f;++m){const _=h[m];_.skip||i(_,c,m)}}}function rU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function $f(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Rd(t,n,e,function(a,l,c){!r&&!Hl(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function sU(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=kV(o,{x:e.x,y:e.y});sk(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return Rd(t,n,e,s),r}function oU(t,e,n,i,r,s){let o=[];const a=rU(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const _=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(_))&&!m)return;const w=a(e,_);w<l?(o=[{element:h,datasetIndex:d,index:f}],l=w):w===l&&o.push({element:h,datasetIndex:d,index:f})}return Rd(t,n,e,c),o}function Wf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?sU(t,e,n,r):oU(t,e,n,i,r,s)}function nb(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Rd(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var aU={modes:{index(t,e,n,i){const r=Zr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?$f(t,r,s,i,o):Wf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Zr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?$f(t,r,s,i,o):Wf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Zr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return $f(t,r,s,i,o)},nearest(t,e,n,i){const r=Zr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Wf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Zr(e,t);return nb(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Zr(e,t);return nb(t,r,"y",n.intersect,i)}}};const Tk=["left","top","right","bottom"];function Ta(t,e){return t.filter(n=>n.pos===e)}function ib(t,e){return t.filter(n=>Tk.indexOf(n.pos)===-1&&n.box.axis===e)}function Ia(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function lU(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function cU(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!Tk.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function uU(t,e){const n=cU(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function hU(t){const e=lU(t),n=Ia(e.filter(c=>c.box.fullSize),!0),i=Ia(Ta(e,"left"),!0),r=Ia(Ta(e,"right")),s=Ia(Ta(e,"top"),!0),o=Ia(Ta(e,"bottom")),a=ib(e,"x"),l=ib(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Ta(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function rb(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Ik(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function dU(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ke(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&Ik(o,s.getPadding());const a=Math.max(0,e.outerWidth-rb(o,t,"left","right")),l=Math.max(0,e.outerHeight-rb(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function fU(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function pU(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Ua(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,pU(a.horizontal,e));const{same:d,other:f}=dU(e,n,a,i);c|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return c&&Ua(r,e,n,i)||h}function cu(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function sb(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;Fh(c.start)&&(o=c.start),l.fullSize?cu(l,r.left,o,n.outerWidth-r.right-r.left,f):cu(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;Fh(c.start)&&(s=c.start),l.fullSize?cu(l,s,r.top,f,n.outerHeight-r.bottom-r.top):cu(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var ar={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=$n(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=hU(t.boxes),l=a.vertical,c=a.horizontal;Ce(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=l.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);Ik(f,$n(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),_=uU(l.concat(c),d);Ua(a.fullSize,m,d,_),Ua(l,m,d,_),Ua(c,m,d,_)&&Ua(l,m,d,_),fU(m),sb(a.leftAndTop,m,d,_),m.x+=m.w,m.y+=m.h,sb(a.rightAndBottom,m,d,_),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ce(a.chartArea,b=>{const w=b.box;Object.assign(w,t.chartArea),w.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Sk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class gU extends Sk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Vu="$chartjs",mU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ob=t=>t===null||t==="";function yU(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Vu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ob(r)){const s=qw(t,"width");s!==void 0&&(t.width=s)}if(ob(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=qw(t,"height");s!==void 0&&(t.height=s)}return t}const kk=k4?{passive:!0}:!1;function _U(t,e,n){t&&t.addEventListener(e,n,kk)}function vU(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,kk)}function wU(t,e){const n=mU[t.type]||t.type,{x:i,y:r}=Zr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function zh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function bU(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||zh(a.addedNodes,i),o=o&&!zh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function EU(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||zh(a.removedNodes,i),o=o&&!zh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const ql=new Map;let ab=0;function Ck(){const t=window.devicePixelRatio;t!==ab&&(ab=t,ql.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function xU(t,e){ql.size||window.addEventListener("resize",Ck),ql.set(t,e)}function TU(t){ql.delete(t),ql.size||window.removeEventListener("resize",Ck)}function IU(t,e,n){const i=t.canvas,r=i&&$y(i);if(!r)return;const s=lk((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),xU(t,s),o}function Hf(t,e,n){n&&n.disconnect(),e==="resize"&&TU(t)}function SU(t,e,n){const i=t.canvas,r=lk(s=>{t.ctx!==null&&n(wU(s,t))},t);return _U(i,e,r),r}class kU extends Sk{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(yU(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Vu])return!1;const i=n[Vu].initial;["height","width"].forEach(s=>{const o=i[s];De(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Vu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:bU,detach:EU,resize:IU}[n]||SU;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Hf,detach:Hf,resize:Hf}[n]||vU)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return S4(e,n,i,r)}isAttached(e){const n=e&&$y(e);return!!(n&&n.isConnected)}}function CU(t){return!zy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?gU:kU}class Pr{constructor(){fe(this,"x");fe(this,"y");fe(this,"active",!1);fe(this,"options");fe(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Wl(this.x)&&Wl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}fe(Pr,"defaults",{}),fe(Pr,"defaultRoutes");function AU(t,e){const n=t.options.ticks,i=PU(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?NU(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return DU(e,c,s,o/r),c;const h=RU(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(uu(e,c,h,De(m)?0:a-m,a),d=0,f=o-1;d<f;d++)uu(e,c,h,s[d],s[d+1]);return uu(e,c,h,l,De(m)?e.length:l+m),c}return uu(e,c,h),c}function PU(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function RU(t,e,n){const i=MU(t),r=e.length/n;if(!i)return Math.max(r,1);const s=EV(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function NU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function DU(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function uu(t,e,n,i,r){const s=be(i,0),o=Math.min(be(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function MU(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const OU=t=>t==="left"?"right":t==="right"?"left":t,lb=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,cb=(t,e)=>Math.min(e||t,t);function ub(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function LU(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function jU(t,e){Ce(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Sa(t){return t.drawTicks?t.tickLength:0}function hb(t,e){if(!t.display)return 0;const n=Gt(t.font,e),i=$n(t.padding);return(_t(t.text)?t.text.length:1)*n.lineHeight+i.height}function FU(t,e){return Ms(t,{scale:e,type:"scale"})}function VU(t,e,n){return Ms(t,{tick:n,index:e,type:"tick"})}function UU(t,e,n){let i=ck(t);return(n&&e!=="right"||!n&&e==="right")&&(i=OU(i)),i}function BU(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,m,_;const b=o-r,w=a-s;if(t.isHorizontal()){if(m=rn(i,s,a),ke(n)){const E=Object.keys(n)[0],x=n[E];_=h[E].getPixelForValue(x)+b-e}else n==="center"?_=(c.bottom+c.top)/2+b-e:_=lb(t,n,e);f=a-s}else{if(ke(n)){const E=Object.keys(n)[0],x=n[E];m=h[E].getPixelForValue(x)-w+e}else n==="center"?m=(c.left+c.right)/2-w+e:m=lb(t,n,e);_=rn(i,o,r),d=n==="left"?-On:On}return{titleX:m,titleY:_,maxWidth:f,rotation:d}}class Xo extends Pr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Gn(e,Number.POSITIVE_INFINITY),n=Gn(n,Number.NEGATIVE_INFINITY),i=Gn(i,Number.POSITIVE_INFINITY),r=Gn(r,Number.NEGATIVE_INFINITY),{min:Gn(e,i),max:Gn(n,r),minDefined:In(e),maxDefined:In(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Gn(n,Gn(i,n)),max:Gn(i,Gn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Le(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r4(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ub(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=AU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Le(this.options.afterUpdate,[this])}beforeSetDimensions(){Le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Le(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Le(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Le(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=cb(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=vn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-Sa(e.grid)-n.padding-hb(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=SV(Math.min(Math.asin(vn((h.highest.height+6)/a,-1,1)),Math.asin(vn(l/c,-1,1))-Math.asin(vn(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Le(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=hb(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Sa(s)+l):(e.height=this.maxHeight,e.width=Sa(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,_=as(this.labelRotation),b=Math.cos(_),w=Math.sin(_);if(a){const E=i.mirror?0:w*d.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+E+m)}else{const E=i.mirror?0:b*d.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+E+m)}this._calculatePadding(c,h,w,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Le(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)De(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=ub(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/cb(n,i));let c=0,h=0,d,f,m,_,b,w,E,x,k,N,M;for(d=0;d<n;d+=l){if(_=e[d].label,b=this._resolveTickFontOptions(d),r.font=w=b.string,E=s[w]=s[w]||{data:{},gc:[]},x=b.lineHeight,k=N=0,!De(_)&&!_t(_))k=Bw(r,E.data,E.gc,k,_),N=x;else if(_t(_))for(f=0,m=_.length;f<m;++f)M=_[f],!De(M)&&!_t(M)&&(k=Bw(r,E.data,E.gc,k,M),N+=x);o.push(k),a.push(N),c=Math.max(k,c),h=Math.max(N,h)}jU(s,n);const O=o.indexOf(c),I=a.indexOf(h),v=C=>({width:o[C]||0,height:a[C]||0});return{first:v(0),last:v(n-1),widest:v(O),highest:v(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return AV(this._alignToPixels?qr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=VU(this.getContext(),e,i))}return this.$context||(this.$context=FU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=as(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Sa(s),m=[],_=a.setContext(this.getContext()),b=_.display?_.width:0,w=b/2,E=function(Q){return qr(i,Q,b)};let x,k,N,M,O,I,v,C,P,R,S,T;if(o==="top")x=E(this.bottom),I=this.bottom-f,C=x-w,R=E(e.top)+w,T=e.bottom;else if(o==="bottom")x=E(this.top),R=e.top,T=E(e.bottom)-w,I=x+w,C=this.top+f;else if(o==="left")x=E(this.right),O=this.right-f,v=x-w,P=E(e.left)+w,S=e.right;else if(o==="right")x=E(this.left),P=e.left,S=E(e.right)-w,O=x+w,v=this.left+f;else if(n==="x"){if(o==="center")x=E((e.top+e.bottom)/2+.5);else if(ke(o)){const Q=Object.keys(o)[0],j=o[Q];x=E(this.chart.scales[Q].getPixelForValue(j))}R=e.top,T=e.bottom,I=x+w,C=I+f}else if(n==="y"){if(o==="center")x=E((e.left+e.right)/2);else if(ke(o)){const Q=Object.keys(o)[0],j=o[Q];x=E(this.chart.scales[Q].getPixelForValue(j))}O=x-w,v=O-f,P=e.left,S=e.right}const z=be(r.ticks.maxTicksLimit,d),B=Math.max(1,Math.ceil(d/z));for(k=0;k<d;k+=B){const Q=this.getContext(k),j=s.setContext(Q),V=a.setContext(Q),G=j.lineWidth,X=j.color,$=V.dash||[],L=V.dashOffset,q=j.tickWidth,ne=j.tickColor,le=j.tickBorderDash||[],re=j.tickBorderDashOffset;N=LU(this,k,l),N!==void 0&&(M=qr(i,N,G),c?O=v=P=S=M:I=C=R=T=M,m.push({tx1:O,ty1:I,tx2:v,ty2:C,x1:P,y1:R,x2:S,y2:T,width:G,color:X,borderDash:$,borderDashOffset:L,tickWidth:q,tickColor:ne,tickBorderDash:le,tickBorderDashOffset:re}))}return this._ticksLength=d,this._borderValue=x,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=Sa(i.grid),m=f+h,_=d?-h:m,b=-as(this.labelRotation),w=[];let E,x,k,N,M,O,I,v,C,P,R,S,T="middle";if(r==="top")O=this.bottom-_,I=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+_,I=this._getXAxisLabelAlignment();else if(r==="left"){const B=this._getYAxisLabelAlignment(f);I=B.textAlign,M=B.x}else if(r==="right"){const B=this._getYAxisLabelAlignment(f);I=B.textAlign,M=B.x}else if(n==="x"){if(r==="center")O=(e.top+e.bottom)/2+m;else if(ke(r)){const B=Object.keys(r)[0],Q=r[B];O=this.chart.scales[B].getPixelForValue(Q)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-m;else if(ke(r)){const B=Object.keys(r)[0],Q=r[B];M=this.chart.scales[B].getPixelForValue(Q)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?T="top":l==="end"&&(T="bottom"));const z=this._getLabelSizes();for(E=0,x=a.length;E<x;++E){k=a[E],N=k.label;const B=s.setContext(this.getContext(E));v=this.getPixelForTick(E)+s.labelOffset,C=this._resolveTickFontOptions(E),P=C.lineHeight,R=_t(N)?N.length:1;const Q=R/2,j=B.color,V=B.textStrokeColor,G=B.textStrokeWidth;let X=I;o?(M=v,I==="inner"&&(E===x-1?X=this.options.reverse?"left":"right":E===0?X=this.options.reverse?"right":"left":X="center"),r==="top"?c==="near"||b!==0?S=-R*P+P/2:c==="center"?S=-z.highest.height/2-Q*P+P:S=-z.highest.height+P/2:c==="near"||b!==0?S=P/2:c==="center"?S=z.highest.height/2-Q*P:S=z.highest.height-R*P,d&&(S*=-1),b!==0&&!B.showLabelBackdrop&&(M+=P/2*Math.sin(b))):(O=v,S=(1-R)*P/2);let $;if(B.showLabelBackdrop){const L=$n(B.backdropPadding),q=z.heights[E],ne=z.widths[E];let le=S-L.top,re=0-L.left;switch(T){case"middle":le-=q/2;break;case"bottom":le-=q;break}switch(I){case"center":re-=ne/2;break;case"right":re-=ne;break;case"inner":E===x-1?re-=ne:E>0&&(re-=ne/2);break}$={left:re,top:le,width:ne+L.width,height:q+L.height,color:B.backdropColor}}w.push({label:N,font:C,textOffset:S,options:{rotation:b,color:j,strokeColor:V,strokeWidth:G,textAlign:X,textBaseline:T,translation:[M,O],backdrop:$}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-as(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=qr(e,this.left,o)-o/2,h=qr(e,this.right,a)+a/2,d=f=l):(d=qr(e,this.top,o)-o/2,f=qr(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&jy(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Uh(i,c,0,h,l,a)}r&&Fy(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Gt(i.font),o=$n(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ke(n)?(l+=o.bottom,_t(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=BU(this,l,n,a);Uh(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:UU(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=be(e.grid&&e.grid.z,-1),r=be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Xo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Gt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class hu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;WU(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,zU(e,o,i),this.override&&Ze.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Ze[r]&&(delete Ze[r][i],this.override&&delete Ss[i])}}function zU(t,e,n){const i=$l(Object.create(null),[n?Ze.get(n):{},Ze.get(e),t.defaults]);Ze.set(e,i),t.defaultRoutes&&$U(e,t.defaultRoutes),t.descriptors&&Ze.describe(e,t.descriptors)}function $U(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ze.route(s,r,l,a)})}function WU(t){return"id"in t&&"defaults"in t}class HU{constructor(){this.controllers=new hu(ul,"datasets",!0),this.elements=new hu(Pr,"elements"),this.plugins=new hu(Object,"plugins"),this.scales=new hu(Xo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Ce(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=My(e);Le(i["before"+r],[],i),n[e](i),Le(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Xn=new HU;class qU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Le(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){De(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=be(i.options&&i.options.plugins,{}),s=KU(i);return r===!1&&!n?[]:QU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function KU(t){const e={},n=[],i=Object.keys(Xn.plugins.items);for(let s=0;s<i.length;s++)n.push(Xn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function GU(t,e){return!e&&t===!1?null:t===!0?{}:t}function QU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=GU(i[l],r);c!==null&&s.push({plugin:a,options:YU(t.config,{plugin:a,local:n[l]},c,o)})}return s}function YU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bg(t,e){const n=Ze.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function XU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function JU(t,e){return t===e?"_index_":"_value_"}function db(t){if(t==="x"||t==="y"||t==="r")return t}function ZU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Eg(t,...e){if(db(t))return t;for(const n of e){const i=n.axis||ZU(n.position)||t.length>1&&db(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function fb(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function eB(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return fb(t,"x",n[0])||fb(t,"y",n[0])}return{}}function tB(t,e){const n=Ss[t.type]||{scales:{}},i=e.scales||{},r=bg(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ke(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Eg(o,a,eB(o,t),Ze.scales[a.type]),c=JU(l,r),h=n.scales||{};s[o]=sl(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||bg(a,e),h=(Ss[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=XU(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),sl(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];sl(a,[Ze.scales[a.type],Ze.scale])}),s}function Ak(t){const e=t.options||(t.options={});e.plugins=be(e.plugins,{}),e.scales=tB(t,e)}function Pk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function nB(t){return t=t||{},t.data=Pk(t.data),Ak(t),t}const pb=new Map,Rk=new Set;function du(t,e){let n=pb.get(t);return n||(n=e(),pb.set(t,n),Rk.add(n)),n}const ka=(t,e,n)=>{const i=jh(e,n);i!==void 0&&t.add(i)};class iB{constructor(e){this._config=nB(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Pk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ak(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return du(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return du(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return du(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return du(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ka(l,e,d))),h.forEach(d=>ka(l,r,d)),h.forEach(d=>ka(l,Ss[s]||{},d)),h.forEach(d=>ka(l,Ze,d)),h.forEach(d=>ka(l,_g,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Rk.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ss[n]||{},Ze.datasets[n]||{},{type:n},Ze,_g]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=gb(this._resolverCache,e,r);let l=o;if(sB(o,n)){s.$shared=!1,i=Ar(i)?i():i;const c=this.createResolver(e,i,a);l=Fo(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=gb(this._resolverCache,e,i);return ke(n)?Fo(s,n,void 0,r):s}}function gb(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Vy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const rB=t=>ke(t)&&Object.getOwnPropertyNames(t).some(e=>Ar(t[e]));function sB(t,e){const{isScriptable:n,isIndexable:i}=pk(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Ar(a)||rB(a))||o&&_t(a))return!0}return!1}var oB="4.5.1";const aB=["top","bottom","left","right","chartArea"];function mb(t,e){return t==="top"||t==="bottom"||aB.indexOf(t)===-1&&e==="x"}function yb(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function _b(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Le(n&&n.onComplete,[t],e)}function lB(t){const e=t.chart,n=e.options.animation;Le(n&&n.onProgress,[t],e)}function Nk(t){return zy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Uu={},vb=t=>{const e=Nk(t);return Object.values(Uu).filter(n=>n.canvas===e).pop()};function cB(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function uB(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var Wi;let Nd=(Wi=class{static register(...e){Xn.add(...e),wb()}static unregister(...e){Xn.remove(...e),wb()}constructor(e,n){const i=this.config=new iB(n),r=Nk(e),s=vb(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||CU(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=fV(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=MV(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Uu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}pi.listen(this,"complete",_b),pi.listen(this,"progress",lB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return De(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Xn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Hw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zw(this.canvas,this.ctx),this}stop(){return pi.stop(this),this}resize(e,n){pi.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Hw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Le(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ce(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Eg(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Ce(s,o=>{const a=o.options,l=a.id,c=Eg(l,a),h=be(a.type,o.dtype);(a.position===void 0||mb(a.position,c)!==mb(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Xn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Ce(r,(o,a)=>{o||delete i[a]}),Ce(i,o=>{ar.configure(this,o,o.options),ar.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(yb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||bg(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Xn.getController(a),{datasetElementType:c,dataElementType:h}=Ze.datasets[a];Object.assign(l,{dataElementType:Xn.getElement(h),datasetElementType:c&&Xn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ce(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ce(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(yb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ce(this.scales,e=>{ar.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Nw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;cB(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Nw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ar.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ce(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Ar(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pi.has(this)?this.attached&&!pi.running(this)&&pi.start(this):(this.draw(),_b({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=B4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&jy(n,r),e.controller.draw(),r&&Fy(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Hl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=aU.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Ms(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Fh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),pi.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),zw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Uu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ce(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ce(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ce(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Oh(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=vV(e),c=uB(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Le(s.onHover,[e,a,this],this),l&&Le(s.onClick,[e,a,this],this));const h=!Oh(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},fe(Wi,"defaults",Ze),fe(Wi,"instances",Uu),fe(Wi,"overrides",Ss),fe(Wi,"registry",Xn),fe(Wi,"version",oB),fe(Wi,"getChart",vb),Wi);function wb(){return Ce(Nd.instances,t=>t._plugins.invalidate())}function Dk(t,e,n=e){t.lineCap=be(n.borderCapStyle,e.borderCapStyle),t.setLineDash(be(n.borderDash,e.borderDash)),t.lineDashOffset=be(n.borderDashOffset,e.borderDashOffset),t.lineJoin=be(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=be(n.borderWidth,e.borderWidth),t.strokeStyle=be(n.borderColor,e.borderColor)}function hB(t,e,n){t.lineTo(n.x,n.y)}function dB(t){return t.stepped?GV:t.tension||t.cubicInterpolationMode==="monotone"?QV:hB}function Mk(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function fB(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Mk(r,n,i),h=dB(s);let{move:d=!0,reverse:f}=i||{},m,_,b;for(m=0;m<=c;++m)_=r[(a+(f?c-m:m))%o],!_.skip&&(d?(t.moveTo(_.x,_.y),d=!1):h(t,b,_,f,s.stepped),b=_);return l&&(_=r[(a+(f?c:0))%o],h(t,b,_,f,s.stepped)),!!l}function pB(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Mk(r,n,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,f,m,_,b,w,E;const x=N=>(o+(c?a-N:N))%s,k=()=>{b!==w&&(t.lineTo(h,w),t.lineTo(h,b),t.lineTo(h,E))};for(l&&(m=r[x(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=r[x(f)],m.skip)continue;const N=m.x,M=m.y,O=N|0;O===_?(M<b?b=M:M>w&&(w=M),h=(d*h+N)/++d):(k(),t.lineTo(N,M),_=O,d=0,b=w=M),E=M}k()}function xg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?pB:fB}function gB(t){return t.stepped?C4:t.tension||t.cubicInterpolationMode==="monotone"?A4:es}function mB(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Dk(t,e.options),t.stroke(r)}function yB(t,e,n,i){const{segments:r,options:s}=e,o=xg(e);for(const a of r)Dk(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const _B=typeof Path2D=="function";function vB(t,e,n,i){_B&&!e.options.segment?mB(t,e,n,i):yB(t,e,n,i)}class Ba extends Pr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;w4(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=j4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=M4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=gB(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],m=s[d],_=s[f];if(m===_){a.push(m);continue}const b=Math.abs((r-m[n])/(_[n]-m[n])),w=l(m,_,b,i.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,i){return xg(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=xg(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),vB(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}fe(Ba,"id","line"),fe(Ba,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),fe(Ba,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),fe(Ba,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function bb(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Bu extends Pr{constructor(n){super();fe(this,"parsed");fe(this,"skip");fe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return bb(this,n,"x",i)}inYRange(n,i){return bb(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Hl(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,vg(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}fe(Bu,"id","point"),fe(Bu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),fe(Bu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Eb=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},wB=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class xb extends Pr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Le(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Gt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Eb(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((_,b)=>{const w=i+n/2+s.measureText(_.text).width;(b===0||c[c.length-1]+w+2*a>o)&&(d+=h,c[c.length-(b>0?0:1)]=0,m+=h,f++),l[b]={left:0,top:m,row:f,width:w,height:r},c[c.length-1]+=w+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,_=0,b=0;return this.legendItems.forEach((w,E)=>{const{itemWidth:x,itemHeight:k}=bB(i,n,s,w,r);E>0&&m+k+2*a>h&&(d+=f+a,c.push({width:f,height:m}),_+=f+a,b++,f=m=0),l[E]={left:_,top:m,col:b,width:x,height:k},f=Math.max(f,x),m+=k+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=bo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=rn(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=rn(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=rn(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=rn(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;jy(e,this),this._draw(),Fy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Ze.color,l=bo(e.rtl,this.left,this.width),c=Gt(o.font),{padding:h}=o,d=c.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:_,boxHeight:b,itemHeight:w}=Eb(o,d),E=function(O,I,v){if(isNaN(_)||_<=0||isNaN(b)||b<0)return;r.save();const C=be(v.lineWidth,1);if(r.fillStyle=be(v.fillStyle,a),r.lineCap=be(v.lineCap,"butt"),r.lineDashOffset=be(v.lineDashOffset,0),r.lineJoin=be(v.lineJoin,"miter"),r.lineWidth=C,r.strokeStyle=be(v.strokeStyle,a),r.setLineDash(be(v.lineDash,[])),o.usePointStyle){const P={radius:b*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:C},R=l.xPlus(O,_/2),S=I+f;dk(r,P,R,S,o.pointStyleWidth&&_)}else{const P=I+Math.max((d-b)/2,0),R=l.leftForLtr(O,_),S=cl(v.borderRadius);r.beginPath(),Object.values(S).some(T=>T!==0)?wg(r,{x:R,y:P,w:_,h:b,radius:S}):r.rect(R,P,_,b),r.fill(),C!==0&&r.stroke()}r.restore()},x=function(O,I,v){Uh(r,v.text,O,I+w/2,c,{strikethrough:v.hidden,textAlign:l.textAlign(v.textAlign)})},k=this.isHorizontal(),N=this._computeTitleHeight();k?m={x:rn(s,this.left+h,this.right-i[0]),y:this.top+h+N,line:0}:m={x:this.left+h,y:rn(s,this.top+N+h,this.bottom-n[0].height),line:0},vk(this.ctx,e.textDirection);const M=w+h;this.legendItems.forEach((O,I)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;const v=r.measureText(O.text).width,C=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),P=_+f+v;let R=m.x,S=m.y;l.setWidth(this.width),k?I>0&&R+P+h>this.right&&(S=m.y+=M,m.line++,R=m.x=rn(s,this.left+h,this.right-i[m.line])):I>0&&S+M>this.bottom&&(R=m.x=R+n[m.line].width+h,m.line++,S=m.y=rn(s,this.top+N+h,this.bottom-n[m.line].height));const T=l.x(R);if(E(T,S,O),R=OV(C,R+_+f,k?R+P:this.right,e.rtl),x(l.x(R),S,O),k)m.x+=P+h;else if(typeof O.text!="string"){const z=c.lineHeight;m.y+=Ok(O,z)+h}else m.y+=M}),wk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Gt(n.font),r=$n(n.padding);if(!n.display)return;const s=bo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=rn(e.align,d,this.right-f);else{const _=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);h=c+rn(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const m=rn(a,d,d+f);o.textAlign=s.textAlign(ck(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Uh(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Gt(e.font),i=$n(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Va(e,this.left,this.right)&&Va(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Va(e,r.left,r.left+r.width)&&Va(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!TB(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=wB(r,i);r&&!s&&Le(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Le(n.onHover,[e,i,this],this)}else i&&Le(n.onClick,[e,i,this],this)}}function bB(t,e,n,i,r){const s=EB(i,t,e,n),o=xB(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function EB(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function xB(t,e,n){let i=t;return typeof e.text!="string"&&(i=Ok(e,n)),i}function Ok(t,e){const n=t.text?t.text.length:0;return e*n}function TB(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var IB={id:"legend",_element:xb,start(t,e,n){const i=t.legend=new xb({ctx:t.ctx,options:n,chart:t});ar.configure(t,i,n),ar.addBox(t,i)},stop(t){ar.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;ar.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=$n(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const za={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=yg(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Qn(t,e){return e&&(_t(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function gi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function SB(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Tb(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Gt(e.bodyFont),c=Gt(e.titleFont),h=Gt(e.footerFont),d=s.length,f=r.length,m=i.length,_=$n(e.padding);let b=_.height,w=0,E=i.reduce((N,M)=>N+M.before.length+M.lines.length+M.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),E){const N=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=m*N+(E-m)*l.lineHeight+(E-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let x=0;const k=function(N){w=Math.max(w,n.measureText(N).width+x)};return n.save(),n.font=c.string,Ce(t.title,k),n.font=l.string,Ce(t.beforeBody.concat(t.afterBody),k),x=e.displayColors?o+2+e.boxPadding:0,Ce(i,N=>{Ce(N.before,k),Ce(N.lines,k),Ce(N.after,k)}),x=0,n.font=h.string,Ce(t.footer,k),n.restore(),w+=_.width,{width:w,height:b}}function kB(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function CB(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function AB(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),CB(c,t,e,n)&&(c="center"),c}function Ib(t,e,n){const i=n.yAlign||e.yAlign||kB(t,n);return{xAlign:n.xAlign||e.xAlign||AB(t,e,n,i),yAlign:i}}function PB(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function RB(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function Sb(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=cl(o);let _=PB(e,a);const b=RB(e,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(h,f)+r:a==="right"&&(_+=Math.max(d,m)+r),{x:vn(_,0,i.width-e.width),y:vn(b,0,i.height-e.height)}}function fu(t,e,n){const i=$n(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function kb(t){return Qn([],gi(t))}function NB(t,e,n){return Ms(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Cb(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Lk={beforeTitle:fi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:fi,beforeBody:fi,beforeLabel:fi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return De(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:fi,afterBody:fi,beforeFooter:fi,footer:fi,afterFooter:fi};function Wt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?Lk[e].call(n,i):r}class Tg extends Pr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new Ek(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=NB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Wt(i,"beforeTitle",this,e),s=Wt(i,"title",this,e),o=Wt(i,"afterTitle",this,e);let a=[];return a=Qn(a,gi(r)),a=Qn(a,gi(s)),a=Qn(a,gi(o)),a}getBeforeBody(e,n){return kb(Wt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Ce(e,s=>{const o={before:[],lines:[],after:[]},a=Cb(i,s);Qn(o.before,gi(Wt(a,"beforeLabel",this,s))),Qn(o.lines,Wt(a,"label",this,s)),Qn(o.after,gi(Wt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return kb(Wt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Wt(i,"beforeFooter",this,e),s=Wt(i,"footer",this,e),o=Wt(i,"afterFooter",this,e);let a=[];return a=Qn(a,gi(r)),a=Qn(a,gi(s)),a=Qn(a,gi(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(SB(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),Ce(a,h=>{const d=Cb(e.callbacks,h);r.push(Wt(d,"labelColor",this,h)),s.push(Wt(d,"labelPointStyle",this,h)),o.push(Wt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=za[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Tb(this,i),c=Object.assign({},a,l),h=Ib(this.chart,i,c),d=Sb(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=cl(a),{x:f,y:m}=e,{width:_,height:b}=n;let w,E,x,k,N,M;return s==="center"?(N=m+b/2,r==="left"?(w=f,E=w-o,k=N+o,M=N-o):(w=f+_,E=w+o,k=N-o,M=N+o),x=w):(r==="left"?E=f+Math.max(l,h)+o:r==="right"?E=f+_-Math.max(c,d)-o:E=this.caretX,s==="top"?(k=m,N=k-o,w=E-o,x=E+o):(k=m+b,N=k+o,w=E+o,x=E-o),M=k),{x1:w,x2:E,x3:x,y1:k,y2:N,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=bo(i.rtl,this.x,this.width);for(e.x=fu(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Gt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=Gt(s.bodyFont),d=fu(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,_=n.y+m;if(s.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(f,c)+c/2,E=_+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,vg(e,b,w,E),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,vg(e,b,w,E)}else{e.lineWidth=ke(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=r.leftForLtr(f,c),w=r.leftForLtr(r.xPlus(f,1),c-2),E=cl(o.borderRadius);Object.values(E).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,wg(e,{x:b,y:_,w:c,h:l,radius:E}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),wg(e,{x:w,y:_+1,w:c-2,h:l-2,radius:E}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(b,_,c,l),e.strokeRect(b,_,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,_+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=Gt(i.bodyFont);let f=d.lineHeight,m=0;const _=bo(i.rtl,this.x,this.width),b=function(v){n.fillText(v,_.x(e.x+m),e.y+f/2),e.y+=f+s},w=_.textAlign(o);let E,x,k,N,M,O,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=fu(this,w,i),n.fillStyle=i.bodyColor,Ce(this.beforeBody,b),m=a&&w!=="right"?o==="center"?c/2+h:c+2+h:0,N=0,O=r.length;N<O;++N){for(E=r[N],x=this.labelTextColors[N],n.fillStyle=x,Ce(E.before,b),k=E.lines,a&&k.length&&(this._drawColorBox(n,e,N,_,i),f=Math.max(d.lineHeight,l)),M=0,I=k.length;M<I;++M)b(k[M]),f=d.lineHeight;Ce(E.after,b)}m=0,f=d.lineHeight,Ce(this.afterBody,b),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=bo(i.rtl,this.x,this.width);for(e.x=fu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Gt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:_}=cl(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-_),n.quadraticCurveTo(a+c,l+h,a+c-_,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=za[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Tb(this,e),l=Object.assign({},o,this._size),c=Ib(n,e,l),h=Sb(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=$n(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),vk(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),wk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Oh(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Oh(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=za[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}fe(Tg,"positioners",za);var DB={id:"tooltip",_element:Tg,positioners:za,afterInit(t,e,n){n&&(t.tooltip=new Tg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Lk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const MB=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function OB(t,e,n,i){const r=t.indexOf(e);if(r===-1)return MB(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const LB=(t,e)=>t===null?null:vn(Math.round(t),0,e);function Ab(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Ig extends Xo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(De(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:OB(i,e,be(n,e),this._addedLabels),LB(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Ab.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}fe(Ig,"id","category"),fe(Ig,"defaults",{ticks:{callback:Ab}});function jB(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,_=h-1,{min:b,max:w}=e,E=!De(o),x=!De(a),k=!De(c),N=(w-b)/(d+1);let M=Mw((w-b)/_/m)*m,O,I,v,C;if(M<1e-14&&!E&&!x)return[{value:b},{value:w}];C=Math.ceil(w/M)-Math.floor(b/M),C>_&&(M=Mw(C*M/_/m)*m),De(l)||(O=Math.pow(10,l),M=Math.ceil(M*O)/O),r==="ticks"?(I=Math.floor(b/M)*M,v=Math.ceil(w/M)*M):(I=b,v=w),E&&x&&s&&TV((a-o)/s,M/1e3)?(C=Math.round(Math.min((a-o)/M,h)),M=(a-o)/C,I=o,v=a):k?(I=E?o:I,v=x?a:v,C=c-1,M=(v-I)/C):(C=(v-I)/M,ol(C,Math.round(C),M/1e3)?C=Math.round(C):C=Math.ceil(C));const P=Math.max(Ow(M),Ow(I));O=Math.pow(10,De(l)?P:l),I=Math.round(I*O)/O,v=Math.round(v*O)/O;let R=0;for(E&&(f&&I!==o?(n.push({value:o}),I<o&&R++,ol(Math.round((I+R*M)*O)/O,o,Pb(o,N,t))&&R++):I<o&&R++);R<C;++R){const S=Math.round((I+R*M)*O)/O;if(x&&S>a)break;n.push({value:S})}return x&&f&&v!==a?n.length&&ol(n[n.length-1].value,a,Pb(a,N,t))?n[n.length-1].value=a:n.push({value:a}):(!x||v===a)&&n.push({value:v}),n}function Pb(t,e,{horizontal:n,minRotation:i}){const r=as(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class FB extends Xo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return De(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=jo(r),c=jo(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=jB(r,s);return e.bounds==="ticks"&&IV(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return uk(e,this.chart.options.locale,this.options.ticks.format)}}class Sg extends FB{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=In(e)?e:0,this.max=In(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=as(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}fe(Sg,"id","linear"),fe(Sg,"defaults",{ticks:{callback:hk.formatters.numeric}});const Dd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qt=Object.keys(Dd);function Rb(t,e){return t-e}function Nb(t,e){if(De(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),In(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Wl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Db(t,e,n,i){const r=qt.length;for(let s=qt.indexOf(t);s<r-1;++s){const o=Dd[qt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return qt[s]}return qt[r-1]}function VB(t,e,n,i,r){for(let s=qt.length-1;s>=qt.indexOf(n);s--){const o=qt[s];if(Dd[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return qt[n?qt.indexOf(n):0]}function UB(t){for(let e=qt.indexOf(t)+1,n=qt.length;e<n;++e)if(Dd[qt[e]].common)return qt[e]}function Mb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Oy(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function BB(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Ob(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:BB(t,i,r,n)}class $h extends Xo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new nU._date(e.adapters.date);r.init(n),sl(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Nb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=In(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=In(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=RV(r,s,o);return this._unit=n.unit||(i.autoSkip?Db(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):VB(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:UB(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Ob(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=vn(n,0,o),i=vn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Db(s.minUnit,n,i,this._getLabelCapacity(n)),a=be(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Wl(l)||l===!0,h={};let d=n,f,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const _=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)Mb(h,f,_);return(f===i||r.bounds==="ticks"||m===1)&&Mb(h,f,_),Object.keys(h).sort(Rb).map(b=>+b)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Le(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=i[n],m=c&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=as(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Ob(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(Nb(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return DV(e.sort(Rb))}}fe($h,"id","time"),fe($h,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function pu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=ls(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=ls(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Lb extends $h{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=pu(n,this.min),this._tableRange=pu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(pu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return pu(this._table,i*this._tableRange+this._minPos,!0)}}fe(Lb,"id","timeseries"),fe(Lb,"defaults",$h.defaults);Nd.register(Ba,Bu,Sg,Ig,DB,IB);const jk="label";function jb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function zB(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Fk(t,e){t.labels=e}function Vk(t,e,n=jk){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function $B(t,e=jk){const n={labels:[],datasets:[]};return Fk(n,t.labels),Vk(n,t.datasets,e),n}function WB(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,m=D.useRef(null),_=D.useRef(null),b=()=>{m.current&&(_.current=new Nd(m.current,{type:o,data:$B(a,s),options:l&&{...l},plugins:c}),jb(e,_.current))},w=()=>{jb(e,null),_.current&&(_.current.destroy(),_.current=null)};return D.useEffect(()=>{!r&&_.current&&l&&zB(_.current,l)},[r,l]),D.useEffect(()=>{!r&&_.current&&Fk(_.current.config.data,a.labels)},[r,a.labels]),D.useEffect(()=>{!r&&_.current&&a.datasets&&Vk(_.current.config.data,a.datasets,s)},[r,a.datasets]),D.useEffect(()=>{_.current&&(r?(w(),setTimeout(b)):_.current.update(d))},[r,l,a.labels,a.datasets,d]),D.useEffect(()=>{_.current&&(w(),setTimeout(b))},[o]),D.useEffect(()=>(b(),()=>w()),[]),p.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const HB=D.forwardRef(WB);function qB(t,e){return Nd.register(e),D.forwardRef((n,i)=>p.jsx(HB,{...n,ref:i,type:t}))}const KB=qB("line",Fu);function Fb(t){if(!t||typeof t!="string")return"";const e=t.split("-");return e.length!==3?t:`${e[2]}/${e[1]}`}const Vb="brt_trendExplorer_v1",gu=["rgba(125,211,252,0.95)","rgba(167,243,208,0.95)","rgba(251,191,36,0.95)","rgba(196,181,253,0.95)","rgba(252,165,165,0.95)","rgba(253,186,116,0.95)","rgba(147,197,253,0.95)"];function Ca(){return{preset:"overlay_default",range:"all",cycleId:"",customStart:"",customEnd:"",series:[{metricId:"weight_wma",axis:"left"},{metricId:"avgStrength_wma",axis:"left"},{metricId:"calories_raw",axis:"right"}]}}function Ws(t){return(Array.isArray(t)?t:[]).filter(Boolean).slice(0,6)}function GB({derived:t,weekly:e,liftNames:n,cycles:i=[],currentCycle:r=null}){const s=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],[o,a]=D.useState(()=>{try{const S=localStorage.getItem(Vb);if(!S)return Ca();const T=JSON.parse(S),z={...Ca(),...T,series:Ws((T==null?void 0:T.series)||Ca().series)},B=String(z.range||"all");return B==="30"?z.range="month":B==="60"||B==="90"?z.range="all":["all","14","month","cycle","custom"].includes(B)||(z.range="all"),z}catch{return Ca()}});D.useEffect(()=>{try{localStorage.setItem(Vb,JSON.stringify(o))}catch{}},[o]);function l(S){if(!S||typeof S!="string")return"";const T=S.split("-");if(T.length!==3)return S;const[z,B,Q]=T;return`${Q}/${B}/${z}`}function c(S){const T=String(S||"").trim().toLowerCase();return T?T.charAt(0).toUpperCase()+T.slice(1):"Cycle"}const h=D.useMemo(()=>[...(Array.isArray(i)?i:[]).filter(Boolean)].sort((T,z)=>String((z==null?void 0:z.startDateIso)||"").localeCompare(String((T==null?void 0:T.startDateIso)||""))),[i]),d=[{id:"all",label:"All data"},{id:"14",label:"Last 2 weeks"},{id:"month",label:"Last month"},{id:"cycle",label:"Select cycle"},{id:"custom",label:"Select custom interval"}],f=D.useMemo(()=>{if(String(o.range||"all")!=="cycle")return null;if(o.cycleId){const S=h.find(T=>(T==null?void 0:T.id)===o.cycleId);if(S)return S}return r||h[0]||null},[o.range,o.cycleId,r,h]);D.useEffect(()=>{String(o.range||"all")==="cycle"&&f&&o.cycleId!==f.id&&a(S=>({...S,cycleId:f.id}))},[o.range,o.cycleId,f]);const m=D.useMemo(()=>{var T;if(!Array.isArray(t)||!t.length)return[];const S=String(o.range||"all");if(S==="14")return t.slice(Math.max(0,t.length-14));if(S==="month")return t.slice(Math.max(0,t.length-30));if(S==="cycle"){const z=f;if(!(z!=null&&z.startDateIso))return t;const B=z.startDateIso,Q=z.endDateIso||((T=t[t.length-1])==null?void 0:T.dateIso);return Q?t.filter(j=>(j==null?void 0:j.dateIso)>=B&&(j==null?void 0:j.dateIso)<=Q):t}if(S==="custom"){const z=o.customStart,B=o.customEnd;if(!z||!B)return t;const Q=z<=B?z:B,j=z<=B?B:z;return t.filter(V=>(V==null?void 0:V.dateIso)>=Q&&(V==null?void 0:V.dateIso)<=j)}return t},[t,o.range,o.customStart,o.customEnd,f]),_=D.useMemo(()=>{if(!Array.isArray(t)||!t.length||!m.length)return 0;const S=t.indexOf(m[0]);return S>=0?S:0},[t,m]),b=D.useMemo(()=>{const S=s[0],T=s[1],z=s[2],B=[{id:"weight_raw",label:"Weight (raw)",unit:"kg",defaultAxis:"left",get:j=>j==null?void 0:j.weight,style:{borderWidth:1,pointRadius:0,tension:.15,borderDash:[4,4],opacity:.55}},{id:"weight_wma",label:"Weight (smoothed)",unit:"kg",defaultAxis:"left",get:j=>{var V;return(V=j==null?void 0:j.wma)==null?void 0:V.weight},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"calories_raw",label:"Calories (raw)",unit:"kcal",defaultAxis:"right",get:j=>j==null?void 0:j.calories,style:{borderWidth:2,pointRadius:0,tension:.15,opacity:1}},{id:"protein",label:"Protein",unit:"g",defaultAxis:"right",get:j=>j==null?void 0:j.protein,style:{borderWidth:2,pointRadius:0,tension:.15,opacity:.95}},{id:"carbs",label:"Carbs",unit:"g",defaultAxis:"right",get:j=>j==null?void 0:j.carbs,style:{borderWidth:2,pointRadius:0,tension:.15,opacity:.95}},{id:"fats",label:"Fats",unit:"g",defaultAxis:"right",get:j=>j==null?void 0:j.fats,style:{borderWidth:2,pointRadius:0,tension:.15,opacity:.95}},{id:"avgStrength_raw",label:"Average strength (raw, ffilled)",unit:"kg",defaultAxis:"left",get:j=>j==null?void 0:j.avgStrength,style:{borderWidth:1,pointRadius:0,tension:.2,borderDash:[4,4],opacity:.65}},{id:"avgStrength_wma",label:"Average strength (smoothed)",unit:"kg",defaultAxis:"left",get:j=>{var V;return(V=j==null?void 0:j.wma)==null?void 0:V.avgStrength},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"lift1_raw",label:`${S} (raw 1RM)`,unit:"kg",defaultAxis:"left",get:j=>j==null?void 0:j.bench,style:{borderWidth:1,pointRadius:0,tension:.2,borderDash:[4,4],opacity:.65}},{id:"lift1_wma",label:`${S} (smoothed 1RM)`,unit:"kg",defaultAxis:"left",get:j=>{var V;return(V=j==null?void 0:j.wma)==null?void 0:V.bench},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"lift2_raw",label:`${T} (raw 1RM)`,unit:"kg",defaultAxis:"left",get:j=>j==null?void 0:j.squat,style:{borderWidth:1,pointRadius:0,tension:.2,borderDash:[4,4],opacity:.65}},{id:"lift2_wma",label:`${T} (smoothed 1RM)`,unit:"kg",defaultAxis:"left",get:j=>{var V;return(V=j==null?void 0:j.wma)==null?void 0:V.squat},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"lift3_raw",label:`${z} (raw 1RM)`,unit:"kg",defaultAxis:"left",get:j=>j==null?void 0:j.deadlift,style:{borderWidth:1,pointRadius:0,tension:.2,borderDash:[4,4],opacity:.65}},{id:"lift3_wma",label:`${z} (smoothed 1RM)`,unit:"kg",defaultAxis:"left",get:j=>{var V;return(V=j==null?void 0:j.wma)==null?void 0:V.deadlift},style:{borderWidth:2,pointRadius:0,tension:.25,opacity:1}},{id:"bfPct",label:"Body fat % (Navy)",unit:"%",defaultAxis:"left",get:j=>j==null?void 0:j.bfPct,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.95,spanGaps:!0}},{id:"lbm",label:"Lean body mass (kg)",unit:"kg",defaultAxis:"left",get:j=>j==null?void 0:j.lbm,style:{borderWidth:2,pointRadius:0,tension:.2,opacity:.95,spanGaps:!0}},{id:"lbmPct",label:"Lean mass %",unit:"%",defaultAxis:"left",get:j=>Number.isFinite(j==null?void 0:j.bfPct)?100-j.bfPct:null,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.9,spanGaps:!0}},{id:"waistCm",label:"Waist (cm)",unit:"cm",defaultAxis:"right",get:j=>j==null?void 0:j.waistCm,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.9,spanGaps:!0}},{id:"neckCm",label:"Neck (cm)",unit:"cm",defaultAxis:"right",get:j=>j==null?void 0:j.neckCm,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.9,spanGaps:!0}},{id:"hipCm",label:"Hip (cm)",unit:"cm",defaultAxis:"right",get:j=>j==null?void 0:j.hipCm,style:{borderWidth:2,pointRadius:2,tension:.15,opacity:.9,spanGaps:!0}}],Q=[{id:"tdee_weekly",label:"TDEE (weekly)",unit:"kcal",defaultAxis:"right",weeklyKey:"tdee",style:{borderWidth:2,pointRadius:0,tension:0,opacity:.95,stepped:!0}},{id:"avgCalories_weekly",label:"Avg calories (weekly)",unit:"kcal",defaultAxis:"right",weeklyKey:"avgCalories",style:{borderWidth:2,pointRadius:0,tension:0,opacity:.95,stepped:!0}},{id:"adaptationPct_weekly",label:"Adaptation % (weekly)",unit:"%",defaultAxis:"left",weeklyKey:"adaptationPct",style:{borderWidth:2,pointRadius:0,tension:0,opacity:.95,stepped:!0}},{id:"lossRatePct_weekly",label:"Loss rate vs LBM % (weekly)",unit:"%",defaultAxis:"left",weeklyKey:"lossRatePct",style:{borderWidth:2,pointRadius:0,tension:0,opacity:.95,stepped:!0}}];return{daily:B,weekly:Q,byId:[...B,...Q].reduce((j,V)=>(j[V.id]=V,j),{})}},[s]),w=D.useMemo(()=>{const[S,T,z]=s;return[{id:"overlay_default",label:"Default: Weight/Strength vs Calories",series:[{metricId:"weight_wma",axis:"left"},{metricId:"avgStrength_wma",axis:"left"},{metricId:"calories_raw",axis:"right"}]},{id:"weight_trend",label:"Weight trend (raw + smoothed)",series:[{metricId:"weight_raw",axis:"left"},{metricId:"weight_wma",axis:"left"}]},{id:"strength_trend",label:`Strength trend (${S}, ${T}, ${z})`,series:[{metricId:"lift1_wma",axis:"left"},{metricId:"lift2_wma",axis:"left"},{metricId:"lift3_wma",axis:"left"}]},{id:"body_comp",label:"Body composition (BF%, LBM, waist)",series:[{metricId:"bfPct",axis:"left"},{metricId:"lbm",axis:"left"},{metricId:"waistCm",axis:"right"}]},{id:"nutrition",label:"Nutrition (calories + macros)",series:[{metricId:"calories_raw",axis:"right"},{metricId:"protein",axis:"right"},{metricId:"carbs",axis:"right"},{metricId:"fats",axis:"right"}]},{id:"weekly_efficiency",label:"Weekly reality checks (TDEE + adaptation)",series:[{metricId:"tdee_weekly",axis:"right"},{metricId:"adaptationPct_weekly",axis:"left"},{metricId:"avgCalories_weekly",axis:"right"}]},{id:"custom",label:"Custom",series:null}]},[s]);function E(S){const T=w.find(z=>z.id===S);T&&a(z=>({...z,preset:S,series:Ws(T.series||z.series)}))}function x(S,T){a(z=>{const B=[...z.series||[]];return B[S]={...B[S],...T},{...z,preset:"custom",series:Ws(B)}})}function k(S){a(T=>{const z=[...T.series||[]];return z.splice(S,1),{...T,preset:"custom",series:Ws(z)}})}function N(){a(S=>{const T=[...S.series||[]];return T.length>=6?S:(T.push({metricId:"weight_wma",axis:"left"}),{...S,preset:"custom",series:Ws(T)})})}function M(){a(Ca())}function O(S){var z;const T=String(S||"all");if(T==="cycle"){const B=(r==null?void 0:r.id)||((z=h[0])==null?void 0:z.id)||"";a(Q=>({...Q,range:"cycle",cycleId:Q.cycleId||B}));return}if(T==="custom"){const B=Array.isArray(t)&&t.length?t[t.length-1].dateIso:new Date().toISOString().slice(0,10),Q=Array.isArray(t)&&t.length?t[Math.max(0,t.length-14)].dateIso:B;a(j=>({...j,range:"custom",customStart:j.customStart||Q,customEnd:j.customEnd||B}));return}a(B=>({...B,range:T}))}const I=D.useMemo(()=>m.map(S=>S.dateIso),[m]),v=D.useMemo(()=>{const S={},T=Array.isArray(t)?t.length:0,z=(e==null?void 0:e.weeks)||[];if(!T||!z.length)return S;const B=z.length;for(const Q of b.weekly){const j=new Array(T).fill(null);for(let V=1;V<=B;V++){const G=z[V-1],X=G==null?void 0:G[Q.weeklyKey],$=(V-1)*7,L=Math.min(V*7-1,T-1);for(let q=$;q<=L;q++)j[q]=Number.isFinite(X)?X:null}S[Q.id]=j.slice(_,_+m.length)}return S},[e,t,m.length,_,b.weekly]),C=D.useMemo(()=>Ws(o.series).map((T,z)=>{const B=b.byId[T.metricId];if(!B)return null;const Q=gu[z%gu.length],j=B.style||{},V=j.opacity??1,G=Q.replace(/\d?\.\d+\)/,`${V})`),X=B.weeklyKey?v[B.id]||new Array(m.length).fill(null):m.map(L=>{const q=B.get?B.get(L):null;return Number.isFinite(q)?q:null}),$=(T.axis||B.defaultAxis||"left")==="right"?"yRight":"yLeft";return{label:B.label,data:X,yAxisID:$,borderColor:G,borderWidth:j.borderWidth??2,pointRadius:j.pointRadius??0,tension:j.tension??.2,borderDash:j.borderDash,spanGaps:j.spanGaps??!0,stepped:j.stepped}}).filter(Boolean),[o.series,b.byId,m,v,b.weekly]),P=D.useMemo(()=>({labels:I,datasets:C}),[I,C]),R=D.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{title:S=>{var z;const T=(z=S==null?void 0:S[0])==null?void 0:z.label;return T?Fb(T):""}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:10,callback:function(S,T){const z=I==null?void 0:I[T];return Fb(z)}},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"Left axis",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"Right axis",color:"#9bb0c9"}}}}),[I]);return m.length?p.jsxs("div",{className:"chart card",style:{height:"auto"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("div",{className:"card-title",children:"Trend Explorer"}),p.jsx("div",{className:"small",children:"One chart, many views. Mix raw and smoothed series to spot trend vs noise."})]}),p.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[p.jsx("select",{className:"input",value:o.preset,onChange:S=>E(S.target.value),style:{height:32,padding:"0 10px",maxWidth:360},"aria-label":"Chart preset",children:w.map(S=>p.jsx("option",{value:S.id,children:S.label},S.id))}),p.jsx("select",{className:"input",value:o.range,onChange:S=>O(S.target.value),style:{height:32,padding:"0 10px"},"aria-label":"Range",children:d.map(S=>p.jsx("option",{value:S.id,children:S.label},S.id))}),String(o.range)==="cycle"&&p.jsxs("select",{className:"input",value:o.cycleId||"",onChange:S=>a(T=>({...T,cycleId:S.target.value})),style:{height:32,padding:"0 10px",maxWidth:320},"aria-label":"Cycle",disabled:!h.length,title:h.length?"Filter to a cycle":"No cycles yet",children:[!h.length&&p.jsx("option",{value:"",children:"No cycles"}),h.map(S=>p.jsxs("option",{value:S.id,children:[c(S.type)," since ",l(S.startDateIso),S.endDateIso?`  ${l(S.endDateIso)}`:""]},S.id))]}),String(o.range)==="custom"&&p.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[p.jsx("input",{className:"input",type:"date",value:o.customStart||"",onChange:S=>a(T=>({...T,customStart:S.target.value})),style:{height:32,padding:"0 10px"},"aria-label":"Custom start"}),p.jsx("span",{className:"small muted",children:"to"}),p.jsx("input",{className:"input",type:"date",value:o.customEnd||"",onChange:S=>a(T=>({...T,customEnd:S.target.value})),style:{height:32,padding:"0 10px"},"aria-label":"Custom end"})]}),p.jsx("button",{className:"btn",type:"button",onClick:N,style:{height:32,padding:"0 10px",textTransform:"none"},children:"+ Series"}),p.jsx("button",{className:"btn",type:"button",onClick:M,style:{height:32,padding:"0 10px",textTransform:"none"},children:"Reset"})]})]}),p.jsx("div",{style:{marginTop:10,display:"grid",gap:8},children:(o.series||[]).map((S,T)=>{const z=b.byId[S.metricId],B=S.axis||(z==null?void 0:z.defaultAxis)||"left";return p.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[p.jsx("div",{style:{width:10,height:10,borderRadius:999,background:gu[T%gu.length]}}),p.jsxs("select",{className:"input",value:S.metricId,onChange:Q=>{const j=Q.target.value,V=b.byId[j];x(T,{metricId:j,axis:(V==null?void 0:V.defaultAxis)||B})},style:{height:32,padding:"0 10px",minWidth:260},"aria-label":`Series ${T+1} metric`,children:[p.jsxs("optgroup",{label:"Weight",children:[p.jsx("option",{value:"weight_raw",children:"Weight (raw)"}),p.jsx("option",{value:"weight_wma",children:"Weight (smoothed)"})]}),p.jsxs("optgroup",{label:"Calories & Macros",children:[p.jsx("option",{value:"calories_raw",children:"Calories (raw)"}),p.jsx("option",{value:"protein",children:"Protein"}),p.jsx("option",{value:"carbs",children:"Carbs"}),p.jsx("option",{value:"fats",children:"Fats"})]}),p.jsxs("optgroup",{label:"Strength (1RM)",children:[p.jsx("option",{value:"avgStrength_raw",children:"Average strength (raw, ffilled)"}),p.jsx("option",{value:"avgStrength_wma",children:"Average strength (smoothed)"}),p.jsxs("option",{value:"lift1_raw",children:[s[0]," (raw 1RM)"]}),p.jsxs("option",{value:"lift1_wma",children:[s[0]," (smoothed 1RM)"]}),p.jsxs("option",{value:"lift2_raw",children:[s[1]," (raw 1RM)"]}),p.jsxs("option",{value:"lift2_wma",children:[s[1]," (smoothed 1RM)"]}),p.jsxs("option",{value:"lift3_raw",children:[s[2]," (raw 1RM)"]}),p.jsxs("option",{value:"lift3_wma",children:[s[2]," (smoothed 1RM)"]})]}),p.jsxs("optgroup",{label:"Body composition",children:[p.jsx("option",{value:"bfPct",children:"Body fat % (Navy)"}),p.jsx("option",{value:"lbm",children:"Lean body mass (kg)"}),p.jsx("option",{value:"lbmPct",children:"Lean mass %"})]}),p.jsxs("optgroup",{label:"Measurements",children:[p.jsx("option",{value:"waistCm",children:"Waist (cm)"}),p.jsx("option",{value:"neckCm",children:"Neck (cm)"}),p.jsx("option",{value:"hipCm",children:"Hip (cm)"})]}),p.jsxs("optgroup",{label:"Weekly (7-day blocks)",children:[p.jsx("option",{value:"tdee_weekly",children:"TDEE (weekly)"}),p.jsx("option",{value:"avgCalories_weekly",children:"Avg calories (weekly)"}),p.jsx("option",{value:"adaptationPct_weekly",children:"Adaptation % (weekly)"}),p.jsx("option",{value:"lossRatePct_weekly",children:"Loss rate vs LBM % (weekly)"})]})]}),p.jsxs("select",{className:"input",value:B,onChange:Q=>x(T,{axis:Q.target.value}),style:{height:32,padding:"0 10px",width:120},"aria-label":`Series ${T+1} axis`,children:[p.jsx("option",{value:"left",children:"Left axis"}),p.jsx("option",{value:"right",children:"Right axis"})]}),p.jsx("div",{className:"muted",style:{fontSize:12},children:z!=null&&z.unit?`Unit: ${z.unit}`:""}),p.jsx("button",{className:"btn",type:"button",onClick:()=>k(T),style:{height:32,padding:"0 10px",textTransform:"none"},"aria-label":`Remove series ${T+1}`,children:"Remove"})]},T)})}),p.jsx("div",{className:"chart-inner",style:{height:320,marginTop:10},children:p.jsx(KB,{data:P,options:R})})]}):p.jsxs("div",{className:"chart card",children:[p.jsx("div",{className:"card-title",children:"Trend Explorer"}),p.jsx("div",{className:"muted",style:{marginTop:8},children:"No data yet."})]})}function Gr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function QB(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function YB(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function XB({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Weekly Analysis"}),p.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),p.jsx("div",{className:"table-wrap",style:{marginTop:12},children:p.jsxs("table",{className:"table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Week #"}),p.jsx("th",{children:"Avg Calories"}),p.jsx("th",{children:"Weight Change (kg)"}),p.jsx("th",{children:"Calculated TDEE"}),p.jsx("th",{children:"TDEE "}),p.jsx("th",{children:"Adaptation %"}),p.jsx("th",{children:"LBM (kg)"}),p.jsx("th",{children:"Loss Rate vs LBM %"}),p.jsx("th",{children:"Status"})]})}),p.jsx("tbody",{children:t.weeks.map(n=>p.jsxs("tr",{children:[p.jsx("td",{children:n.week}),p.jsx("td",{children:Gr(n.avgCalories,0)}),p.jsx("td",{children:Gr(n.weightChange,2)}),p.jsx("td",{children:Gr(n.tdee,0)}),p.jsx("td",{children:Gr(n.tdeeChangeFromBaseline,0)}),p.jsx("td",{className:QB(n.adaptationPct),children:Gr(n.adaptationPct,1)}),p.jsx("td",{children:Gr(n.lbm,1)}),p.jsx("td",{children:Gr(n.lossRatePct,2)}),p.jsx("td",{className:YB(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),p.jsxs("div",{className:"notice info",style:{marginTop:12},children:[p.jsx("div",{children:p.jsx("b",{children:"How to read this:"})}),p.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[p.jsxs("div",{children:[p.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),p.jsxs("div",{children:[p.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),p.jsxs("div",{children:[p.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",p.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function qf(t,e){const n=Bl(t).getTime(),i=Bl(e).getTime();return Math.floor((n-i)/(24*60*60*1e3))}function zi(t){const e=(t||[]).map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function Ub(t,e,n){return Math.max(e,Math.min(n,t))}function pe(t,e=0){return Number.isFinite(t)?Number(t).toFixed(e):""}function JB(t){const e=String(t||"").toLowerCase();return e==="cut"||e==="cutting"?"cut":e==="bulk"||e==="bulking"?"bulk":e==="maintain"||e==="maintaining"?"maintain":"none"}function ZB(t){return t==="cut"?"CUT":t==="bulk"?"BULK":t==="maintain"?"MAINTAIN":"NO CYCLE"}function e5(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=.2?{key:"stable",sym:"",label:"Stable",value:e}:e<-1?{key:"rapid_loss",sym:"",label:"Rapid loss",value:e}:e<-.2?{key:"losing",sym:"",label:"Losing",value:e}:e>1?{key:"rapid_gain",sym:"",label:"Rapid gain",value:e}:e>.2?{key:"gaining",sym:"",label:"Gaining",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function t5(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=.5?{key:"stable",sym:"",label:"Stable",value:e}:e<-.5?{key:"decreasing",sym:"",label:"Decreasing",value:e}:e>.5?{key:"increasing",sym:"",label:"Increasing",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function n5(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=2?{key:"stable",sym:"",label:"Stable",value:e}:e>2?{key:"increasing",sym:"",label:"Increasing",value:e}:e<-5?{key:"rapid_decline",sym:"",label:"Rapid decline",value:e}:e<-2?{key:"declining",sym:"",label:"Declining",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function i5(t){return t==="cut"?"cycle-badge cut":t==="bulk"?"cycle-badge bulk":t==="maintain"?"cycle-badge maintain":"cycle-badge none"}function r5(t){const{cycle:e,hasCycleTarget:n,currentAvgCal:i,currentProtein:r,proteinPerKg:s,targetProtein2g:o,currentWeight:a,targetWeight:l,weightToGoal:c,directionToGoal:h,derivedLen:d,daysLogged:f,daysRemaining:m,hasNavyAny:_,hasNavyInWindow:b,weightTrend:w,bfTrend:E,strengthTrend:x,lossRate:k,calculatedTdee:N,baselineTdee:M,adaptationPct:O,strengthDeclinePct:I,weeklyWeightChange:v,weeklyWeightLoss:C,prevWeekTdee:P}=t,R=[],S=[];if(d<14||!Number.isFinite(M)||!Number.isFinite(N)){let L="";return m>0?L=`Need ${m} more days of consistent logging to assess status.`:L="Need at least 14 days of consistent logging to assess status.",f<5&&(L=`Only ${f}/7 days logged this week. Need 5 days per week for accurate assessment.`),_?b||S.push("No recent Navy measurements in the selected period. BF% trend will be less accurate."):S.push("Take your first body measurements (neck, waist, hip) to enable body composition tracking."),e==="none"&&S.push("No active cycle set. Create a cycle so status checks alignment with your goal."),n&&Number.isFinite(l)&&Number.isFinite(a)&&S.push(`Goal: ${pe(l,1)}kg (currently ${pe(a,1)}kg, ${pe(Math.abs(c),1)}kg to go).`),{level:"gray",title:"Insufficient Data",emoji:"",message:L,warnings:R,notes:S}}if(f<5){const L=`Only ${f}/7 days logged this week. Need 5 days per week for accurate assessment.`;return _||S.push("Take your first body measurements (neck, waist, hip) to enable body composition tracking."),{level:"gray",title:"Insufficient Data",emoji:"",message:L,warnings:R,notes:S}}const T=Math.round(i||0),z=Math.round(r||0),B=Math.round(N||0),Q=Math.round(M||0),j=E.key!=="unknown",V=x.key!=="unknown";(!_||!b||!j)&&S.push("Body fat trend is unavailable in this period. Add Navy measurements (neck/waist/hip) for more accurate status."),V||S.push("Strength trend is unavailable. Log your big-3 lifts (bench/squat/deadlift) to improve accuracy.");const G=Number.isFinite(c)?Math.abs(c):null;function X(){!n||!Number.isFinite(l)||!Number.isFinite(a)||!Number.isFinite(G)||G<=2||(h==="need to lose"?R.push(`Note: You're ${pe(G,1)}kg from your target of ${pe(l,1)}kg. Consider switching to a Cut cycle if fat loss is the priority.`):h==="need to gain"&&R.push(`Note: You're ${pe(G,1)}kg from your target of ${pe(l,1)}kg. Consider switching to a Bulk cycle if gaining is the priority.`))}function $(){e!=="none"&&(e==="cut"?(w.key==="stable"||w.key==="gaining"||w.key==="rapid_gain"||j&&(E.key==="stable"||E.key==="increasing"))&&R.push(" Cycle misalignment: In a Cut cycle, weight should trend  and body fat should trend  over time."):e==="bulk"?(w.key==="stable"||w.key==="losing"||w.key==="rapid_loss"||V&&x.key==="stable")&&R.push(" Cycle misalignment: In a Bulk cycle, weight should trend  and strength should trend  over time."):e==="maintain"&&(w.key==="rapid_gain"||w.key==="rapid_loss")&&R.push(" Cycle misalignment: In a Maintain cycle, weight should stay  (stable)."))}if(Number.isFinite(O)&&O<-15&&x.key==="rapid_decline"){const L=` URGENT: TDEE dropped ${pe(O,1)}% (from ${Q} to ${B}). Take a 2-week diet break: increase from ${T} to ~${B} cal/day.`;return $(),{level:"red",title:"Metabolic Crash",emoji:"",message:L,warnings:R,notes:S}}if(j&&w.key!=="gaining"&&E.key==="increasing"&&(x.key==="declining"||x.key==="rapid_decline")){let L=" CRITICAL: Body fat is rising while weight is dropping  likely muscle loss.";return Number.isFinite(s)&&s<1.8?L=` CRITICAL: Insufficient protein (${z}g, ${pe(s,1)}g/kg) causing muscle loss. Increase to ~${Math.round(o)}g and raise calories to maintenance (~${B}).`:L=` CRITICAL: Despite adequate protein (${z}g, ${pe(s,1)}g/kg), you're losing muscle faster than fat. Stop cutting: increase from ${T} to maintenance (~${B}) and focus on progressive overload.`,$(),n&&Number.isFinite(l)&&Number.isFinite(a)&&a<l&&R.push(` You're already below your goal weight of ${pe(l,1)}kg. Stop cutting and switch to Maintain or Bulk.`),{level:"red",title:"Skinny-Fat Trajectory",emoji:"",message:L,warnings:R,notes:S}}if(x.key==="rapid_decline"&&(w.key==="losing"||w.key==="rapid_loss")){let L="";return Number.isFinite(s)&&s<1.6?L=` URGENT: Protein too low (${z}g, ${pe(s,1)}g/kg). Increase to ~${Math.round(o)}g/day. Keep calories at ${T} while training stays consistent.`:Number.isFinite(I)&&I>5?L=` URGENT: Strength is declining ${pe(I,1)}% from baseline. Review training stimulus/recovery. Consider reducing cardio and keeping calories closer to maintenance (~${B}).`:L=` URGENT: Strength dropping rapidly while cutting. Increase calories from ${T} to ~${T+300} and reassess training recovery.`,$(),{level:"red",title:"Inadequate Protein / Poor Training",emoji:"",message:L,warnings:R,notes:S}}if(j&&(w.key==="gaining"||w.key==="rapid_gain")&&E.key==="increasing"&&x.key==="stable"){let L="";return Number.isFinite(s)&&s<1.6?L=` Eating ${T} cal but only ${z}g protein (${pe(s,1)}g/kg). Increase protein to ~${Math.round(o)}g and reduce total calories to ~${Math.max(0,T-300)}.`:L=` Eating ${T} cal with adequate protein (${z}g, ${pe(s,1)}g/kg) but no strength gains. Either reduce ~${Math.max(0,T-400)} for a cut or increase training intensity/volume to actually build muscle.`,$(),{level:"red",title:"Overfeeding Without Stimulus",emoji:"",message:L,warnings:R,notes:S}}if(j&&E.key==="increasing"&&(x.key==="declining"||x.key==="rapid_decline")){let L=" Losing muscle and gaining fat. Resume consistent training immediately.";return Number.isFinite(P)&&Number.isFinite(i)&&(L=` Losing muscle and gaining fat. Resume consistent training immediately. You're eating ~${T} vs estimated TDEE ~${Math.round(P)}. Reduce to maintenance until training is consistent.`),R.push("Cannot progress in any cycle without consistent training. Consider switching to Maintaining until training is back on track."),X(),{level:"red",title:"Detraining",emoji:"",message:L,warnings:R,notes:S}}if(Number.isFinite(P)&&Number.isFinite(i)&&Number.isFinite(v)){const L=(P-i)*7,q=-v*7700;if(Math.abs(q-L)>3850){const ne=(i-P)*7/7700,le=`Weight changed ${pe(v,1)}kg/week but calories suggest ${pe(ne,1)}kg/week. Likely water retention (sodium/carbs/hormones/timing). Keep ${T} cal and reassess in 1 week.`;return $(),X(),{level:"gray",title:"Water Weight Fluctuation",emoji:"",message:le,warnings:R,notes:S}}}if(w.key==="rapid_loss"&&(x.key==="declining"||x.key==="rapid_decline")){let L="";return Number.isFinite(s)&&s<1.8?L=` Losing muscle due to insufficient protein. Currently ${z}g (${pe(s,1)}g/kg). Increase to ~${Math.round(o)}g/day and reduce deficit to ~${T+200} cal.`:L=` Deficit too aggressive despite adequate protein (${z}g/day, ${pe(s,1)}g/kg). Increase calories from ${T} to ~${T+250} to preserve muscle.`,Number.isFinite(k)&&k>1&&S.push(`Loss rate: ${pe(k,2)}% of LBM/week (aggressive).`),$(),{level:"yellow",title:"Cutting (Aggressive)",emoji:"",message:L,warnings:R,notes:S}}if(j&&w.key==="rapid_gain"&&E.key==="increasing"&&x.key==="increasing"){const L=` Excessive fat gain. Reduce from ${T} to ~${Math.max(0,T-250)} cal/day while keeping protein around ${z}g.`;return $(),X(),{level:"yellow",title:"Dirty Bulking",emoji:"",message:L,warnings:R,notes:S}}if(w.key==="stable"&&(!j||E.key==="stable")&&(!V||x.key==="stable")){let L="You're stable with no clear trend.";return e==="maintain"?L=`You're maintaining as intended. If you want a direction, choose Cut (~${Math.max(0,B-500)} cal) or Bulk (~${B+300} cal).`:e==="cut"?(L=` Eating near maintenance (${T}  ${B}) but in a Cut cycle. Reduce to ~${Math.max(0,B-500)} cal/day to start cutting.`,Number.isFinite(O)&&O<-10&&S.push(`Metabolic adaptation: ${pe(O,1)}%. Consider a short diet break near maintenance.`)):e==="bulk"?L=` Weight is stable but in a Bulk cycle. Increase from ${T} to ~${B+400} cal/day to start gaining.`:L="Set a cycle to interpret trends in context.",X(),{level:"yellow",title:"Spinning Wheels",emoji:"",message:L,warnings:R,notes:S}}if(w.key==="stable"&&j&&E.key==="decreasing"&&x.key==="increasing"){let L=` Excellent recomp: losing fat and gaining muscle while maintaining weight. Current calories (${T}) fit your plan.`;return e==="cut"&&(L=` Good progress but misaligned: you're recomping (weight stable) in a Cut cycle. To lose weight as planned, reduce to ~${Math.max(0,T-300)} cal/day.`),e==="bulk"&&(L=` Good progress but misaligned: you're recomping (weight stable) in a Bulk cycle. To gain as planned, increase to ~${T+400} cal/day.`),X(),{level:"green",title:e==="bulk"?"Gaintaining":"Recomping",emoji:"",message:L,warnings:R,notes:S}}if(w.key==="gaining"&&x.key==="increasing"&&(!j||E.key==="stable"||E.key==="increasing")){let L=` Perfect lean bulk. Stay around ${T} calories/day with ${z}g protein.`;return e==="maintain"&&(L=` Misaligned: you're bulking in a Maintaining cycle. Either reduce to maintenance (~${B} cal) or switch cycle to Bulking.`),e==="cut"&&(L=` Misaligned: you're bulking in a Cutting cycle. Either reduce to ~${Math.max(0,B-500)} cal or switch cycle to Bulking.`),n&&Number.isFinite(l)&&Number.isFinite(c)&&c<-2?S.push(`On track toward ${pe(l,1)}kg  ${pe(Math.abs(c),1)}kg to go.`):n&&Number.isFinite(l)&&Number.isFinite(c)&&c>2&&R.push(` Moving away from goal: currently ${pe(a,1)}kg vs target ${pe(l,1)}kg.`),{level:"green",title:"Lean Bulking",emoji:"",message:L,warnings:R,notes:S}}if(w.key==="losing"&&(!j||E.key==="decreasing")&&(x.key==="stable"||x.key==="increasing")&&(Number.isFinite(k)?k>=.5&&k<=1:!0)){let q=` Perfect fat loss: losing fat while preserving muscle. Maintain ${T} calories/day and ${z}g protein.`;if(e==="maintain"&&(q=` Misaligned: you're cutting effectively but in a Maintaining cycle. Either increase to maintenance (~${B} cal) or switch cycle to Cutting.`),e==="bulk"&&(q=` Misaligned: you're losing weight but in a Bulking cycle. Either increase to ~${B+400} cal or switch cycle to Cutting.`),n&&Number.isFinite(l)&&Number.isFinite(c)&&c>2&&C>0){const ne=c/C;S.push(`At ~${pe(C,1)}kg/week, you'll reach ${pe(l,1)}kg in ~${Math.ceil(ne)} weeks.`)}return n&&Number.isFinite(c)&&Math.abs(c)<=1&&S.push(` Almost at your goal weight of ${pe(l,1)}kg. Consider switching to Maintaining within 12 weeks.`),{level:"green",title:"Cutting (Optimal)",emoji:"",message:q,warnings:R,notes:S}}if(w.key==="losing"&&(!j||E.key==="decreasing")&&x.key==="stable"){let L=`Slow but safe cut at ~${T} cal/day.`;return C<.3&&(L=`Safe but slow cut. Consider reducing to ~${Math.max(0,T-200)} cal/day to accelerate.`),e==="maintain"&&(L=` Misaligned: you're cutting (slowly) but in a Maintaining cycle. Either increase to maintenance (~${B}) or switch to Cutting.`),e==="bulk"&&(L=` Misaligned: you're losing weight but in a Bulking cycle. Increase to ~${B+400} immediately or switch to Cutting.`),n&&Number.isFinite(c)&&c>5&&S.push(`You're ${pe(c,1)}kg from your goal of ${pe(l,1)}kg. Consider a slightly larger deficit to reach it sooner.`),{level:"green",title:"Cutting (Conservative)",emoji:"",message:L,warnings:R,notes:S}}if(w.key==="stable"&&(!j||E.key==="stable"||E.key==="decreasing")&&(x.key==="stable"||x.key==="increasing")){let L=` Solid maintenance at ~${T} cal/day.`;return e==="cut"&&(L=` Misaligned: weight is stable but you're in a Cut cycle. Reduce to ~${Math.max(0,B-500)} cal or switch cycle to Maintaining.`),e==="bulk"&&(L=` Misaligned: weight is stable but you're in a Bulk cycle. Increase to ~${B+400} cal or switch cycle to Maintaining.`),X(),{level:"green",title:"Maintaining Successfully",emoji:"",message:L,warnings:R,notes:S}}return $(),X(),{level:"yellow",title:"Mixed Signals",emoji:"",message:"Trends are mixed across weight/body fat/strength. Keep logging consistently for another 12 weeks, then reassess.",warnings:R,notes:S}}function s5({derived:t,weekly:e,profile:n,currentCycle:i}){var f,m;const[r,s]=D.useState(7),[o,a]=D.useState(!1),l=D.useMemo(()=>{var Ve,ve,Vr,Jo,Zo,yc;const _=Array.isArray(t)?t:[],b=_.length;if(!b)return{rangeDays:r,status:{level:"gray",title:"Insufficient Data",emoji:"",message:"No data yet. Add your first entry to see your status.",warnings:[],notes:[]},cycle:"none",cycleBadge:"NO CYCLE",weightTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},bfTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},strengthTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},currentAvgCal:null,currentProtein:null,currentWeight:null,targetWeight:null,goalProgress:null};const w=_[_.length-1].dateIso,E=_.filter(te=>{const ge=qf(w,te.dateIso);return ge>=0&&ge<=r-1}),x=_.filter(te=>{const ge=qf(w,te.dateIso);return ge>=r&&ge<=r*2-1}),k=zi(E.map(te=>{var ge;return Number.isFinite((ge=te==null?void 0:te.wma)==null?void 0:ge.weight)?te.wma.weight:te.weight})),N=zi(x.map(te=>{var ge;return Number.isFinite((ge=te==null?void 0:te.wma)==null?void 0:ge.weight)?te.wma.weight:te.weight})),M=Number.isFinite(k)&&Number.isFinite(N)?(k-N)*(7/r):null,O=e5(M),I=zi(E.map(te=>te.bfPct).filter(Number.isFinite)),v=zi(x.map(te=>te.bfPct).filter(Number.isFinite)),C=Number.isFinite(I)&&Number.isFinite(v)?I-v:null,P=t5(C),R=zi(E.map(te=>{var ge;return(ge=te==null?void 0:te.wma)==null?void 0:ge.avgStrength}).filter(Number.isFinite)),S=zi(x.map(te=>{var ge;return(ge=te==null?void 0:te.wma)==null?void 0:ge.avgStrength}).filter(Number.isFinite)),T=Number.isFinite(R)&&Number.isFinite(S)&&S!==0?(R-S)/S*100:null,z=n5(T),B=zi(E.map(te=>te.calories).filter(Number.isFinite)),Q=zi(E.map(te=>te.protein).filter(Number.isFinite)),j=_[_.length-1],V=Number.isFinite((Ve=j==null?void 0:j.wma)==null?void 0:Ve.weight)?j.wma.weight:j.weight;let G=null;if(E.length>=2){const te=E[0],ge=E[E.length-1],pn=Number.isFinite((ve=te==null?void 0:te.wma)==null?void 0:ve.weight)?te.wma.weight:te.weight,Li=Number.isFinite((Vr=ge==null?void 0:ge.wma)==null?void 0:Vr.weight)?ge.wma.weight:ge.weight;if(Number.isFinite(pn)&&Number.isFinite(Li)){const Os=Math.max(1,E.length-1);G=(Li-pn)*(7/Os)}}const X=Number.isFinite(G)?Math.max(0,-G):null;let $=null;if(Number.isFinite(B)&&Number.isFinite(G)){const ge=-G*7700/7;$=B+ge}const L=(e==null?void 0:e.baselineTdee)??null,q=Number.isFinite($)&&Number.isFinite(L)&&L!==0?($-L)/L*100:null,ne=(e==null?void 0:e.baselineStrength)??null,le=Number.isFinite(ne)&&Number.isFinite(R)&&ne!==0?(ne-R)/ne*100:null;let re=null;for(let te=_.length-1;te>=0;te--)if(Number.isFinite((Jo=_[te])==null?void 0:Jo.lbm)){re=_[te].lbm;break}const Te=Number.isFinite(re)&&Number.isFinite(X)&&re>0?X/re*100:null,Ye=Number.isFinite(Q)&&Number.isFinite(V)&&V>0?Q/V:null,fn=Number.isFinite(V)?V*2:null,Be=_.filter(te=>{const ge=qf(w,te.dateIso);return ge>=0&&ge<=6}),et=te=>Number.isFinite(te.weight)&&Number.isFinite(te.protein)&&Number.isFinite(te.carbs)&&Number.isFinite(te.fats),J=Be.filter(et).length,de=_.filter(et).length,Ke=Math.max(0,14-de),st=_.some(te=>Number.isFinite(te.neck)||Number.isFinite(te.waist)||Number.isFinite(te.hip)||Number.isFinite(te.bfPct)),en=E.some(te=>Number.isFinite(te.bfPct)),tt=JB(i==null?void 0:i.type),Sn=tt!=="maintain"&&Number.isFinite(i==null?void 0:i.targetWeightKg),$t=Sn?Number(i.targetWeightKg):null,xt=Sn&&Number.isFinite($t)&&Number.isFinite(V)?V-$t:null;let tn=null;Number.isFinite(xt)&&(Math.abs(xt)<=1?tn="at goal":xt>0?tn="need to lose":tn="need to gain");let ui=null;if(Sn&&Number.isFinite($t)&&(i!=null&&i.startDateIso)){const te=_.find(pn=>(pn.dateIso||"")>=(i.startDateIso||"")),ge=te?Number.isFinite((Zo=te==null?void 0:te.wma)==null?void 0:Zo.weight)?te.wma.weight:te.weight:null;if(Number.isFinite(ge)&&Number.isFinite(V)){const pn=Math.abs(ge-$t),Li=tt==="cut"?ge-V:V-ge,Os=Ub(Li,0,pn||1),Md=pn>0?Os/pn*100:0;ui={startWeight:ge,totalNeeded:pn,progress:Os,pct:Ub(Md,0,100)}}}const Z=(e==null?void 0:e.weeks)||[],Ot=Z.length>=2?(yc=Z[Z.length-2])==null?void 0:yc.tdee:null,kn=r5({cycle:tt,hasCycleTarget:Sn,currentAvgCal:B,currentProtein:Q,proteinPerKg:Ye,targetProtein2g:fn,currentWeight:V,targetWeight:$t,weightToGoal:xt,directionToGoal:tn,derivedLen:b,daysLogged:J,daysRemaining:Ke,hasNavyAny:st,hasNavyInWindow:en,weightTrend:O,bfTrend:P,strengthTrend:z,lossRate:Te,calculatedTdee:$,baselineTdee:L,adaptationPct:q,strengthDeclinePct:le,weeklyWeightChange:G,weeklyWeightLoss:X,prevWeekTdee:Ot});return{rangeDays:r,status:kn,cycle:tt,cycleBadge:ZB(tt),weightTrend:O,bfTrend:P,strengthTrend:z,currentAvgCal:B,currentProtein:Q,currentWeight:V,targetWeight:$t,weightToGoal:xt,goalProgress:ui,calculatedTdee:$,baselineTdee:L,adaptationPct:q,daysLogged:J,hasNavyAny:st,hasNavyInWindow:en,proteinPerKg:Ye,targetProtein2g:fn,lossRate:Te,weeklyWeightChange:G}},[t,e,i,r]),{status:c}=l,h=(c==null?void 0:c.level)||"gray",d=((c==null?void 0:c.warnings)||[]).length>0&&h==="green";return p.jsxs("div",{className:`status-banner level-${h}${d?" has-accent":""}`,children:[p.jsxs("div",{className:"status-left",children:[p.jsxs("div",{className:"status-topline",children:[p.jsxs("div",{className:"status-title",children:[p.jsx("span",{style:{marginRight:8},children:c.emoji}),c.title]}),p.jsx("div",{className:i5(l.cycle),children:l.cycleBadge})]}),p.jsx("div",{className:"status-message",children:c.message}),p.jsxs("div",{className:"status-trends",children:[p.jsxs("div",{className:"trend-item",children:[p.jsx("span",{className:"trend-k",children:"Weight"}),p.jsx("span",{className:"trend-v",children:l.weightTrend.sym}),p.jsx("span",{className:"trend-n",children:Number.isFinite(l.weightTrend.value)?`${pe(l.weightTrend.value,1)} kg/wk`:""})]}),p.jsxs("div",{className:"trend-item",children:[p.jsx("span",{className:"trend-k",children:"Body fat"}),p.jsx("span",{className:"trend-v",children:l.bfTrend.sym}),p.jsx("span",{className:"trend-n",children:Number.isFinite(l.bfTrend.value)?`${pe(l.bfTrend.value,1)} %`:""})]}),p.jsxs("div",{className:"trend-item",children:[p.jsx("span",{className:"trend-k",children:"Strength"}),p.jsx("span",{className:"trend-v",children:l.strengthTrend.sym}),p.jsx("span",{className:"trend-n",children:Number.isFinite(l.strengthTrend.value)?`${pe(l.strengthTrend.value,1)} %`:""})]}),Number.isFinite(l.currentAvgCal)&&p.jsxs("div",{className:"trend-item",children:[p.jsx("span",{className:"trend-k",children:"Avg cal"}),p.jsx("span",{className:"trend-v",children:""}),p.jsxs("span",{className:"trend-n",children:[Math.round(l.currentAvgCal)," /day"]})]}),Number.isFinite(l.proteinPerKg)&&p.jsxs("div",{className:"trend-item",children:[p.jsx("span",{className:"trend-k",children:"Protein"}),p.jsx("span",{className:"trend-v",children:""}),p.jsxs("span",{className:"trend-n",children:[pe(l.proteinPerKg,1)," g/kg"]})]})]}),l.goalProgress&&p.jsxs("div",{className:"status-goal",children:[p.jsxs("div",{className:"status-goal-text",children:["Goal: ",pe(l.targetWeight,1),"kg  Progress: ",pe(l.goalProgress.progress,1)," / ",pe(l.goalProgress.totalNeeded,1),"kg"]}),p.jsx("div",{className:"progress",children:p.jsx("div",{className:"progress-bar",style:{width:`${l.goalProgress.pct}%`}})})]}),!!((f=c.warnings)!=null&&f.length)&&p.jsx("div",{className:"status-warnings",children:c.warnings.map((_,b)=>p.jsx("div",{className:"status-warning",children:_},b))}),!!((m=c.notes)!=null&&m.length)&&p.jsx("div",{className:"status-notes",children:c.notes.map((_,b)=>p.jsx("div",{className:"status-note",children:_},b))})]}),p.jsxs("div",{className:"status-right",children:[p.jsxs("div",{className:"status-controls",children:[p.jsxs("select",{value:String(r),onChange:_=>s(Number(_.target.value)),children:[p.jsx("option",{value:"7",children:"Last 7 days"}),p.jsx("option",{value:"14",children:"Last 14 days"}),p.jsx("option",{value:"30",children:"Last 30 days"})]}),p.jsx("button",{className:"btn small icon",type:"button",onClick:()=>a(!0),"aria-label":"How status is determined",children:""})]}),Number.isFinite(l.calculatedTdee)&&Number.isFinite(l.baselineTdee)&&p.jsxs("div",{className:"status-mini",children:[p.jsx("div",{className:"muted",children:"TDEE"}),p.jsxs("div",{className:"mini-row",children:[p.jsxs("span",{children:[Math.round(l.baselineTdee),"  ",Math.round(l.calculatedTdee)," cal"]}),Number.isFinite(l.adaptationPct)&&p.jsxs("span",{className:"muted",children:["(",pe(l.adaptationPct,1),"%)"]})]})]}),l.hasNavyAny&&!l.hasNavyInWindow&&p.jsxs("div",{className:"status-mini",children:[p.jsx("div",{className:"muted",children:"Body fat"}),p.jsx("div",{className:"mini-row",children:p.jsx("span",{children:"Take measurements in this period"})})]})]}),o&&p.jsx("div",{className:"modal-backdrop",onClick:()=>a(!1),children:p.jsxs("div",{className:"modal",onClick:_=>_.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("div",{className:"modal-title",children:"How this status is determined"}),p.jsx("button",{className:"btn small",type:"button",onClick:()=>a(!1),children:"Close"})]}),p.jsxs("div",{className:"modal-body",children:[p.jsx("p",{className:"muted",children:"Status compares the selected period to the previous period of the same length. Weight uses smoothed trend; calories & protein use raw averages."}),p.jsxs("div",{className:"modal-grid",children:[p.jsxs("div",{children:[p.jsx("div",{className:"modal-subtitle",children:"Weight trend (kg/week)"}),p.jsxs("ul",{className:"modal-list",children:[p.jsx("li",{children:"Stable: 0.2 or less"}),p.jsx("li",{children:"Losing/Gaining: > 0.2"}),p.jsx("li",{children:"Rapid loss/gain: > 1.0"})]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"modal-subtitle",children:"Body fat trend (% points)"}),p.jsxs("ul",{className:"modal-list",children:[p.jsx("li",{children:"Stable: 0.5 or less"}),p.jsx("li",{children:"Decreasing/Increasing: > 0.5"})]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"modal-subtitle",children:"Strength trend (% change)"}),p.jsxs("ul",{className:"modal-list",children:[p.jsx("li",{children:"Stable: 2% or less"}),p.jsx("li",{children:"Increasing: > 2%"}),p.jsx("li",{children:"Declining: < -2%"}),p.jsx("li",{children:"Rapid decline: < -5%"})]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"modal-subtitle",children:"Cycle expectations"}),p.jsxs("ul",{className:"modal-list",children:[p.jsxs("li",{children:[p.jsx("b",{children:"Cutting:"})," Weight , Body fat , Strength "]}),p.jsxs("li",{children:[p.jsx("b",{children:"Bulking:"})," Weight , Strength , Body fat /slight "]}),p.jsxs("li",{children:[p.jsx("b",{children:"Maintaining:"})," Weight , Strength /, Body fat /"]})]})]})]}),p.jsx("p",{className:"muted",style:{marginTop:12},children:"Recommendations use your logged averages and calculated TDEE. If you skip logs (or measurements), the banner will fall back to fewer signals and ask for more data."})]})]})})]})}function o5(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function a5(t){if(!t||typeof t!="string")return"";const e=t.split("-");if(e.length!==3)return t;const[n,i,r]=e;return`${r}/${i}/${n}`}function $i(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function l5(){const t=Lr(),{user:e}=Hn(),{profile:n}=gc(),i=Array.isArray(n==null?void 0:n.liftNames)&&n.liftNames.length===3?n.liftNames:["Bench Press","Squat","Deadlift"],[r,s]=D.useState([]),o=Array.isArray(n==null?void 0:n.cycles)?n.cycles:[],[a,l]=D.useState(null),[c,h]=D.useState(()=>{try{return localStorage.getItem("brt_demoScenario")||"cutting_optimal"}catch{return"cutting_optimal"}});D.useEffect(()=>{if(!e)try{localStorage.setItem("brt_demoScenario",c)}catch{}},[c,e]),D.useEffect(()=>{if(l(null),!e)return;const O=Ay(e.uid,I=>s(I),I=>l((I==null?void 0:I.message)||"Failed to load entries."));return()=>O()},[e]);const d=D.useMemo(()=>zF(c),[c]),f=D.useMemo(()=>WF(84,c),[c]),m=D.useMemo(()=>$F(f,c),[f,c]),_=e?n:d,b=e?r:f,w=e?o:m,E=D.useMemo(()=>{if(!(w!=null&&w.length))return null;const O=Mh(),I=w.find(C=>!C.endDateIso);return I||w.find(C=>(C.startDateIso||"")<=O&&(C.endDateIso||"")>=O)||null},[w]);function x(){if(!e){t("/signup");return}t("/profile#cycles")}const k=D.useMemo(()=>ZS(b,_||{}),[b,_]),N=D.useMemo(()=>OF(k),[k]),M=D.useMemo(()=>{var j;if(!k.length)return null;const O=k[0],I=k[k.length-1],v=(j=I==null?void 0:I.wma)==null?void 0:j.weight,C=Number.isFinite(O.weight)&&Number.isFinite(I.weight)?I.weight-O.weight:null,P=I.calories,R=O.calories,S=Number.isFinite(P)&&Number.isFinite(R)?P-R:null,T=I.avgStrength,z=O.avgStrength,B=Number.isFinite(T)&&Number.isFinite(z)?T-z:null;let Q=null;for(let V=k.length-1;V>=0;V--)if(Number.isFinite(k[V].bfPct)){Q=k[V].bfPct;break}return{weightTrend:v,totalLost:C,calNow:P,calDelta:S,strengthNow:T,strengthDelta:B,bf:Q}},[k]);return p.jsxs(p.Fragment,{children:[!e&&p.jsx("div",{className:"notice info",style:{marginTop:14},children:p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[p.jsxs("div",{children:[p.jsx("b",{children:"Demo mode:"})," This dashboard is showing ~12 weeks of realistic sample data. Log in to start tracking your own."]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[p.jsx("span",{className:"muted",children:"Scenario"}),p.jsx("select",{className:"input",value:c,onChange:O=>h(O.target.value),style:{height:32,padding:"0 10px",maxWidth:260},children:LF.map(O=>p.jsx("option",{value:O.id,children:O.label},O.id))})]})]})}),e&&(!(_!=null&&_.sex)||!(_!=null&&_.height))&&p.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",p.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),a&&p.jsx("div",{className:"notice error",style:{marginTop:14},children:a}),p.jsx(s5,{derived:k,weekly:N,profile:_,currentCycle:E}),p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Summary"}),p.jsx("button",{className:"btn",type:"button",onClick:x,style:{textTransform:"none"},children:E?`${o5(E.type)}${E.startDateIso?` since ${a5(E.startDateIso)}`:""}`:"Create new cycle"})]}),!M||!k.length?p.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",p.jsx("b",{children:"Entry"}),"."]}):p.jsxs("div",{className:"grid",style:{marginTop:12},children:[p.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[p.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),p.jsxs("div",{className:"big",children:[$i(M.weightTrend,1)," kg"]}),p.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),p.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[p.jsx("div",{className:"card-title",children:"Total weight change"}),p.jsxs("div",{className:"big",children:[$i(M.totalLost,1)," kg"]}),p.jsx("div",{className:"small",children:"Negative = loss"})]}),p.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[p.jsx("div",{className:"card-title",children:"Calories now / change from start"}),p.jsxs("div",{className:"big",children:[$i(M.calNow,0)," kcal"]}),p.jsxs("div",{className:"small",children:[" ",$i(M.calDelta,0)," kcal"]})]}),p.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[p.jsx("div",{className:"card-title",children:"Average strength now"}),p.jsxs("div",{className:"big",children:[$i(M.strengthNow,1)," kg"]}),p.jsxs("div",{className:"small",children:[" ",$i(M.strengthDelta,1)," kg"]})]}),p.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[p.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),p.jsx("div",{className:"big",children:M.bf===null?"":`${$i(M.bf,1)}%`}),p.jsx("div",{className:"small",children:"Most recent measurement day"})]}),p.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[p.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),p.jsx("div",{className:"big",children:Number.isFinite(N.baselineTdee)?`${$i(N.baselineTdee,0)} kcal`:""}),p.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),k.length>0&&p.jsx("div",{className:"grid",style:{marginTop:14},children:p.jsx("div",{style:{gridColumn:"span 12"},children:p.jsx(GB,{derived:k,weekly:N,liftNames:i,cycles:w,currentCycle:E})})}),k.length>=14&&p.jsx(XB,{weekly:N})]})}function Uk(t){return`brt_notifications_v1_${t}`}function c5(t){if(!t)return[];try{const e=localStorage.getItem(Uk(t));if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}}function Bb(t,e){if(t)try{localStorage.setItem(Uk(t),JSON.stringify(e))}catch{}}function u5(){const{user:t}=Hn(),e=Lr(),[n,i]=D.useState(()=>c5(t==null?void 0:t.uid)),r=D.useMemo(()=>[...n].sort((a,l)=>((l==null?void 0:l.createdAt)||0)-((a==null?void 0:a.createdAt)||0)),[n]);function s(a){const l=n.filter(c=>c.id!==a);i(l),Bb(t==null?void 0:t.uid,l)}function o(){i([]),Bb(t==null?void 0:t.uid,[])}return p.jsxs("div",{className:"page",children:[p.jsxs("div",{className:"page-header",children:[p.jsxs("div",{children:[p.jsx("h2",{children:"Notifications"}),p.jsx("div",{className:"small",children:"This is a placeholder for a future notification system."})]}),p.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[p.jsx("button",{className:"btn small",onClick:()=>e("/dashboard"),children:"Back"}),p.jsx("button",{className:"btn small",onClick:o,disabled:r.length===0,children:"Clear all"})]})]}),r.length===0?p.jsx("div",{className:"panel",children:p.jsx("div",{className:"small",children:"No notifications yet."})}):p.jsx("div",{className:"panel",style:{padding:0},children:p.jsxs("table",{className:"table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{style:{width:140},children:"Date"}),p.jsx("th",{children:"Message"}),p.jsx("th",{style:{width:120}})]})}),p.jsx("tbody",{children:r.map(a=>p.jsxs("tr",{children:[p.jsx("td",{className:"small",children:a!=null&&a.createdAt?new Date(a.createdAt).toLocaleDateString():"-"}),p.jsx("td",{children:(a==null?void 0:a.message)||"-"}),p.jsx("td",{style:{textAlign:"right"},children:p.jsx("button",{className:"btn small",onClick:()=>s(a.id),children:"Dismiss"})})]},a.id))})]})})]})}function h5(){const{user:t,login:e,authError:n,clearAuthError:i}=Hn(),r=Lr(),s=Or(),[o,a]=D.useState(""),[l,c]=D.useState(""),[h,d]=D.useState(!1),[f,m]=D.useState(null);D.useEffect(()=>{i==null||i()},[]),D.useEffect(()=>{t&&r("/dashboard")},[t]);async function _(b){var w;b.preventDefault(),m(null),d(!0);try{await e(o.trim(),l);const E=((w=s.state)==null?void 0:w.from)||"/dashboard";r(E)}catch{}finally{d(!1)}}return p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Log in"}),p.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&p.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&p.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),p.jsxs("form",{onSubmit:_,style:{marginTop:12},children:[p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Email"}),p.jsx("input",{value:o,onChange:b=>a(b.target.value),type:"email",required:!0})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Password"}),p.jsx("input",{value:l,onChange:b=>c(b.target.value),type:"password",required:!0})]})]}),p.jsxs("div",{className:"footer-actions",children:[p.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),p.jsx(Pl,{className:"btn",to:"/reset-password",children:"Forgot password"}),p.jsx(Pl,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function d5(){const{signup:t,authError:e,clearAuthError:n}=Hn(),i=Lr(),[r,s]=D.useState(""),[o,a]=D.useState(""),[l,c]=D.useState(""),[h,d]=D.useState(!1),[f,m]=D.useState(null);D.useEffect(()=>{n==null||n()},[]);async function _(b){if(b.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Create account"}),p.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&p.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&p.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),p.jsxs("form",{onSubmit:_,style:{marginTop:12},children:[p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Email"}),p.jsx("input",{value:r,onChange:b=>s(b.target.value),type:"email",required:!0})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Password"}),p.jsx("input",{value:o,onChange:b=>a(b.target.value),type:"password",required:!0})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Confirm password"}),p.jsx("input",{value:l,onChange:b=>c(b.target.value),type:"password",required:!0})]})]}),p.jsxs("div",{className:"footer-actions",children:[p.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),p.jsx(Pl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function f5(){const{resetPassword:t,authError:e,clearAuthError:n}=Hn(),[i,r]=D.useState(""),[s,o]=D.useState(!1),[a,l]=D.useState(!1);D.useEffect(()=>{n==null||n()},[]);async function c(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Reset password"}),p.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&p.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&p.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),p.jsxs("form",{onSubmit:c,style:{marginTop:12},children:[p.jsx("div",{className:"row",children:p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Email"}),p.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),p.jsxs("div",{className:"footer-actions",children:[p.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),p.jsx(Pl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function p5(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function g5(t,e){const n=e.map(o=>o.map(p5).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function m5({entries:t,derived:e}){var s,o,a,l,c,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchLoadKg","benchReps","bench1rmKg","squatLoadKg","squatReps","squat1rmKg","deadliftLoadKg","deadliftReps","deadlift1rmKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.benchLoad,d.benchReps,d.bench,d.squatLoad,d.squatReps,d.squat,d.deadliftLoad,d.deadliftReps,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(c=f==null?void 0:f.wma)==null?void 0:c.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}function Bk(t){return["cutting","bulking","maintaining","cut","bulk","maintain"].includes(t)}function zk(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function $k(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:zk(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).filter(e=>Bk(e.type)).sort((e,n)=>String(e.startDateIso||"").localeCompare(String(n.startDateIso||""))):[]}function y5(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}async function _5(t,{type:e,startDateIso:n,targetWeightKg:i}){if(!t)throw new Error("Not authenticated");if(!Bk(e))throw new Error("Invalid cycle type");if(e=zk(e),!n)throw new Error("Start date is required");let r=null;if((e==="cutting"||e==="bulking")&&(r=Number(i),!Number.isFinite(r)||r<=0))throw new Error("Cycle target weight must be a positive number (kg).");const s=kr(Zt,"users",t);await IS(Zt,async o=>{const a=await o.get(s);if(!a.exists())throw new Error("Profile not found. Please refresh and try again.");const l=a.data()||{},h=$k(l.cycles).map(f=>({...f})),d=h.findIndex(f=>f.endDateIso===null);if(d>=0){const f=h[d];let m=IF(n,-1);f.startDateIso&&m<f.startDateIso&&(m=f.startDateIso),h[d]={...f,endDateIso:m}}h.push({id:y5(),type:e,startDateIso:n,endDateIso:null,targetWeightKg:r}),o.update(s,{cycles:h,updatedAt:pc()})})}async function v5(t,e,n){if(!t)throw new Error("Not authenticated");if(!e)throw new Error("cycleId is required");if(!n)throw new Error("End date is required");const i=kr(Zt,"users",t);await IS(Zt,async r=>{const s=await r.get(i);if(!s.exists())throw new Error("Profile not found. Please refresh and try again.");const o=s.data()||{},a=$k(o.cycles),l=a.findIndex(h=>h.id===e);if(l<0)throw new Error("Cycle not found.");const c=a.map(h=>({...h}));c[l]={...c[l],endDateIso:n},r.update(i,{cycles:c,updatedAt:pc()})})}const Hs=["Bench Press","Squat","Deadlift"];function Kf(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function w5(){const{user:t}=Hn(),e=Or(),{profile:n,updateProfile:i,loading:r,profileError:s}=gc(),[o,a]=D.useState(n.sex||""),[l,c]=D.useState(n.height||""),[h,d]=D.useState(!!n.triplemeasurements),f=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Hs,[m,_]=D.useState(f[0]),[b,w]=D.useState(f[1]),[E,x]=D.useState(f[2]),k=D.useMemo(()=>[m,b,E].map((de,Ke)=>String(de||"").trim()||Hs[Ke]),[m,b,E]),[N,M]=D.useState(!1),[O,I]=D.useState(null),[v,C]=D.useState(""),[P,R]=D.useState(""),[S,T]=D.useState(""),z=D.useMemo(()=>Array.isArray(n.cycles)?[...n.cycles].sort((J,de)=>String(de.startDateIso||"").localeCompare(String(J.startDateIso||""))):[],[n.cycles]),[B,Q]=D.useState("cutting"),[j,V]=D.useState(Mh()),[G,X]=D.useState("");D.useEffect(()=>{B==="maintaining"&&X("")},[B]);const $=D.useMemo(()=>z.find(J=>!J.endDateIso)||null,[z]),[L,q]=D.useState([]),[ne,le]=D.useState(!1);D.useEffect(()=>{a(n.sex||""),c(n.height||""),d(!!n.triplemeasurements);const J=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Hs;_(J[0]),w(J[1]),x(J[2])},[n.sex,n.height,n.triplemeasurements,n.liftNames]),D.useEffect(()=>{(e==null?void 0:e.hash)==="#cycles"&&setTimeout(()=>{var J;(J=document.getElementById("cycles"))==null||J.scrollIntoView({behavior:"smooth",block:"start"})},50)},[e==null?void 0:e.hash]);async function re(J){J.preventDefault(),I(null),M(!0);try{const de=Number(l);if(!o)throw new Error("Sex is required.");if(!Number.isFinite(de)||de<=0)throw new Error("Height must be a positive number (cm).");await i({sex:o,height:de,triplemeasurements:!!h,liftNames:k}),I({type:"success",text:"Profile saved."})}catch(de){I({type:"error",text:(de==null?void 0:de.message)||"Failed to save profile."})}finally{M(!1)}}async function Te(J){var de;J.preventDefault(),I(null),M(!0);try{if(!B)throw new Error("Pick a cycle type.");if(!j)throw new Error("Pick a start date.");const st=(de=[...await Be()||[]].reverse().find(tt=>Number.isFinite(Number(tt==null?void 0:tt.weight))))==null?void 0:de.weight;if(B==="cutting"||B==="bulking"){const tt=Number(G);if(!Number.isFinite(tt)||tt<=0)throw new Error("Enter a valid target weight (kg).");if(Number.isFinite(Number(st))){if(B==="cutting"&&tt>=Number(st))throw new Error("For a cutting cycle, target weight must be lower than your current weight.");if(B==="bulking"&&tt<=Number(st))throw new Error("For a bulking cycle, target weight must be higher than your current weight.")}}const en=B==="cutting"||B==="bulking"?Number(G):null;await _5(t.uid,{type:B,startDateIso:j,targetWeightKg:en}),X(""),I({type:"success",text:`Cycle started: ${Kf(B)}.`})}catch(Ke){I({type:"error",text:(Ke==null?void 0:Ke.message)||"Failed to start cycle."})}finally{M(!1)}}async function Ye(J){I(null),M(!0);try{await v5(t.uid,J,Mh()),I({type:"success",text:"Cycle ended."})}catch(de){I({type:"error",text:(de==null?void 0:de.message)||"Failed to end cycle."})}finally{M(!1)}}async function fn(J){if(J.preventDefault(),I(null),!!(t!=null&&t.email)){if(P!==S){I({type:"error",text:"New passwords do not match."});return}M(!0);try{const de=Ps.credential(t.email,v);await TD(t,de),await CD(t,P),C(""),R(""),T(""),I({type:"success",text:"Password updated."})}catch(de){I({type:"error",text:(de==null?void 0:de.message)||"Failed to update password."})}finally{M(!1)}}}async function Be(){return ne?L:new Promise((J,de)=>{const Ke=Ay(t.uid,st=>{q(st),le(!0),Ke(),J(st)},st=>{de(st)})})}async function et(){I(null),M(!0);try{await Be();const J=ZS(L,{...n,sex:o,height:Number(l),triplemeasurements:!!h}),de=m5({entries:L,derived:J}),Ke=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;g5(Ke,de),I({type:"success",text:"CSV downloaded."})}catch(J){I({type:"error",text:(J==null?void 0:J.message)||"Failed to export CSV."})}finally{M(!1)}}return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Profile & Settings"}),p.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),s&&p.jsx("div",{className:"notice error",style:{marginTop:12},children:s}),O&&p.jsx("div",{className:`notice ${O.type==="error"?"error":"success"}`,style:{marginTop:12},children:O.text}),p.jsxs("form",{onSubmit:re,style:{marginTop:12},children:[p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Sex (required for Navy BF%)"}),p.jsxs("select",{value:o,onChange:J=>a(J.target.value),required:!0,children:[p.jsx("option",{value:"",children:"Select"}),p.jsx("option",{value:"male",children:"Male"}),p.jsx("option",{value:"female",children:"Female"})]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Height (cm)"}),p.jsx("input",{inputMode:"numeric",value:l,onChange:J=>c(J.target.value),placeholder:"e.g. 175",required:!0})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Triple measurements mode"}),p.jsxs("select",{value:h?"1":"0",onChange:J=>d(J.target.value==="1"),children:[p.jsx("option",{value:"0",children:"Off (single value per site)"}),p.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),p.jsxs("div",{className:"grid",style:{marginTop:12},children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Lift 1 name"}),p.jsx("input",{value:m,onChange:J=>_(J.target.value),placeholder:Hs[0]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Lift 2 name"}),p.jsx("input",{value:b,onChange:J=>w(J.target.value),placeholder:Hs[1]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Lift 3 name"}),p.jsx("input",{value:E,onChange:J=>x(J.target.value),placeholder:Hs[2]})]})]}),p.jsxs("div",{className:"footer-actions",children:[p.jsx("button",{className:"btn primary",disabled:N||r,children:N?"Saving":"Save profile"}),p.jsx("button",{className:"btn",type:"button",onClick:et,disabled:N,children:"Export CSV"})]})]})]}),p.jsxs("div",{className:"panel",id:"cycles",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Cycles"}),p.jsx("div",{className:"muted",children:"Cutting / Bulking / Maintaining  track your phases over time."})]}),p.jsxs("form",{onSubmit:Te,style:{marginTop:12},children:[p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Cycle type"}),p.jsxs("select",{value:B,onChange:J=>Q(J.target.value),children:[p.jsx("option",{value:"cutting",children:"Cutting"}),p.jsx("option",{value:"bulking",children:"Bulking"}),p.jsx("option",{value:"maintaining",children:"Maintaining"})]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Start date"}),p.jsx("input",{type:"date",value:j,onChange:J=>V(J.target.value)})]}),(B==="cutting"||B==="bulking")&&p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Target weight (kg)"}),p.jsx("input",{inputMode:"decimal",value:G,onChange:J=>X(J.target.value),placeholder:"e.g. 82.0"})]}),p.jsxs("div",{className:"field",style:{minWidth:220},children:[p.jsx("label",{children:"Current"}),p.jsx("input",{value:$?`${Kf($.type)} (since ${$.startDateIso})${($.type==="cutting"||$.type==="bulking")&&Number.isFinite(Number($.targetWeightKg))?`  target ${Number($.targetWeightKg).toFixed(1)}kg`:""}`:"No active cycle",readOnly:!0})]})]}),p.jsxs("div",{className:"footer-actions",children:[p.jsx("button",{className:"btn primary",disabled:N,children:$?"Start new cycle (ends current)":"Start cycle"}),$&&p.jsx("button",{className:"btn",type:"button",onClick:()=>Ye($.id),disabled:N,children:"End current cycle (today)"})]})]}),p.jsx("hr",{className:"sep"}),p.jsx("div",{className:"table-wrap",children:p.jsxs("table",{className:"table",style:{minWidth:760},children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Type"}),p.jsx("th",{children:"Target (kg)"}),p.jsx("th",{children:"Began"}),p.jsx("th",{children:"Ended"}),p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:z.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:6,className:"muted",children:"No cycles yet. Start one above."})}):z.map(J=>{const de=!J.endDateIso;return p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("b",{children:Kf(J.type)})}),p.jsx("td",{children:(J.type==="cutting"||J.type==="bulking")&&Number.isFinite(Number(J.targetWeightKg))?Number(J.targetWeightKg).toFixed(1):""}),p.jsx("td",{children:J.startDateIso||""}),p.jsx("td",{children:J.endDateIso||""}),p.jsx("td",{children:de?p.jsx("span",{className:"text-green strong",children:"Active"}):p.jsx("span",{className:"muted",children:"Ended"})}),p.jsx("td",{children:de?p.jsx("button",{className:"btn",type:"button",onClick:()=>Ye(J.id),disabled:N,children:"End today"}):p.jsx("span",{className:"muted",children:""})})]},J.id)})})]})})]}),p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Change Password"}),p.jsx("div",{className:"muted",children:"Re-auth required."})]}),p.jsxs("form",{onSubmit:fn,style:{marginTop:12},children:[p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Current password"}),p.jsx("input",{type:"password",value:v,onChange:J=>C(J.target.value),required:!0})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"New password"}),p.jsx("input",{type:"password",value:P,onChange:J=>R(J.target.value),required:!0})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Confirm new password"}),p.jsx("input",{type:"password",value:S,onChange:J=>T(J.target.value),required:!0})]})]}),p.jsx("div",{className:"footer-actions",children:p.jsx("button",{className:"btn primary",disabled:N,children:"Update password"})})]})]})]})}function jt(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function b5({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:r}){const s=String(t||"").toLowerCase()==="female",[o,a]=D.useState(Mh()),[l,c]=D.useState(""),[h,d]=D.useState(""),[f,m]=D.useState(""),[_,b]=D.useState(""),[w,E]=D.useState(""),[x,k]=D.useState(""),[N,M]=D.useState(""),[O,I]=D.useState(""),[v,C]=D.useState(""),[P,R]=D.useState(""),[S,T]=D.useState(""),[z,B]=D.useState(""),[Q,j]=D.useState(""),[V,G]=D.useState(""),[X,$]=D.useState(""),[L,q]=D.useState(""),[ne,le]=D.useState(""),[re,Te]=D.useState(""),[Ye,fn]=D.useState(""),[Be,et]=D.useState(""),[J,de]=D.useState(""),[Ke,st]=D.useState(""),en=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],tt=D.useMemo(()=>{const Z=JS({protein:jt(h)||0,carbs:jt(f)||0,fats:jt(_)||0});return Number.isFinite(Z)?Math.round(Z):0},[h,f,_]),Sn=D.useMemo(()=>Jr(jt(w),jt(x)),[w,x]),$t=D.useMemo(()=>Jr(jt(N),jt(O)),[N,O]),xt=D.useMemo(()=>Jr(jt(v),jt(P)),[v,P]),tn=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f))&&Number.isFinite(Number(_));async function ui(Z){if(Z.preventDefault(),!tn())return;const Ot=Jr(jt(w),jt(x)),kn=Jr(jt(N),jt(O)),Ve=Jr(jt(v),jt(P)),ve={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(f),fats:Number(_),benchLoad:w===""?null:Number(w),benchReps:x===""?null:Number(x),squatLoad:N===""?null:Number(N),squatReps:O===""?null:Number(O),deadliftLoad:v===""?null:Number(v),deadliftReps:P===""?null:Number(P),bench:Number.isFinite(Ot)?Math.round(Ot*10)/10:null,squat:Number.isFinite(kn)?Math.round(kn*10)/10:null,deadlift:Number.isFinite(Ve)?Math.round(Ve*10)/10:null};e?(ve.neck1=V===""?null:Number(V),ve.neck2=X===""?null:Number(X),ve.neck3=L===""?null:Number(L),ve.waist1=ne===""?null:Number(ne),ve.waist2=re===""?null:Number(re),ve.waist3=Ye===""?null:Number(Ye),ve.hip1=s?Be===""?null:Number(Be):null,ve.hip2=s?J===""?null:Number(J):null,ve.hip3=s?Ke===""?null:Number(Ke):null):(ve.neck=S===""?null:Number(S),ve.waist=z===""?null:Number(z),ve.hip=s?Q===""?null:Number(Q):null),await i(ve)}return p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"Daily Entry"}),p.jsxs("div",{className:"muted",children:["Calories preview: ",p.jsx("b",{children:tt})," kcal"]})]}),p.jsxs("form",{onSubmit:ui,style:{marginTop:12},children:[p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Date"}),p.jsx("input",{type:"date",value:o,onChange:Z=>a(Z.target.value)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Weight (kg)"}),p.jsx("input",{inputMode:"decimal",value:l,onChange:Z=>c(Z.target.value),placeholder:"e.g. 85.2",required:!0})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Protein (g)"}),p.jsx("input",{inputMode:"numeric",value:h,onChange:Z=>d(Z.target.value),placeholder:"e.g. 180"})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Carbs (g)"}),p.jsx("input",{inputMode:"numeric",value:f,onChange:Z=>m(Z.target.value),placeholder:"e.g. 220",required:!0})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Fats (g)"}),p.jsx("input",{inputMode:"numeric",value:_,onChange:Z=>b(Z.target.value),placeholder:"e.g. 70",required:!0})]})]}),p.jsx("hr",{className:"sep"}),p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsxs("label",{children:[en[0]," ",p.jsx("span",{className:"muted",children:"(optional)"})]}),p.jsxs("div",{className:"inline2",children:[p.jsx("input",{inputMode:"decimal",value:w,onChange:Z=>E(Z.target.value),placeholder:"Load (kg)"}),p.jsx("input",{inputMode:"numeric",value:x,onChange:Z=>k(Z.target.value),placeholder:"Reps"})]}),p.jsxs("div",{className:"muted small",children:["Est. 1RM: ",p.jsx("b",{children:Number.isFinite(Sn)?Math.round(Sn*10)/10:""})," kg"]})]}),p.jsxs("div",{className:"field",children:[p.jsxs("label",{children:[en[1]," ",p.jsx("span",{className:"muted",children:"(optional)"})]}),p.jsxs("div",{className:"inline2",children:[p.jsx("input",{inputMode:"decimal",value:N,onChange:Z=>M(Z.target.value),placeholder:"Load (kg)"}),p.jsx("input",{inputMode:"numeric",value:O,onChange:Z=>I(Z.target.value),placeholder:"Reps"})]}),p.jsxs("div",{className:"muted small",children:["Est. 1RM: ",p.jsx("b",{children:Number.isFinite($t)?Math.round($t*10)/10:""})," kg"]})]}),p.jsxs("div",{className:"field",children:[p.jsxs("label",{children:[en[2]," ",p.jsx("span",{className:"muted",children:"(optional)"})]}),p.jsxs("div",{className:"inline2",children:[p.jsx("input",{inputMode:"decimal",value:v,onChange:Z=>C(Z.target.value),placeholder:"Load (kg)"}),p.jsx("input",{inputMode:"numeric",value:P,onChange:Z=>R(Z.target.value),placeholder:"Reps"})]}),p.jsxs("div",{className:"muted small",children:["Est. 1RM: ",p.jsx("b",{children:Number.isFinite(xt)?Math.round(xt*10)/10:""})," kg"]})]})]}),p.jsx("div",{className:"muted small",style:{marginTop:6},children:"Enter both load + reps to calculate 1RM. If left blank, strength trends will carry forward the last known value."}),p.jsx("hr",{className:"sep"}),p.jsxs("div",{className:"notice info",children:[p.jsx("b",{children:"Navy measurements (weekly)"}),p.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",s?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),p.jsx("div",{style:{height:10}}),e?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Neck 1 (cm)"}),p.jsx("input",{inputMode:"decimal",value:V,onChange:Z=>G(Z.target.value)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Neck 2 (cm)"}),p.jsx("input",{inputMode:"decimal",value:X,onChange:Z=>$(Z.target.value)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Neck 3 (cm)"}),p.jsx("input",{inputMode:"decimal",value:L,onChange:Z=>q(Z.target.value)})]})]}),p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Waist 1 (cm)"}),p.jsx("input",{inputMode:"decimal",value:ne,onChange:Z=>le(Z.target.value)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Waist 2 (cm)"}),p.jsx("input",{inputMode:"decimal",value:re,onChange:Z=>Te(Z.target.value)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Waist 3 (cm)"}),p.jsx("input",{inputMode:"decimal",value:Ye,onChange:Z=>fn(Z.target.value)})]})]}),s?p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Hip 1 (cm)"}),p.jsx("input",{inputMode:"decimal",value:Be,onChange:Z=>et(Z.target.value)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Hip 2 (cm)"}),p.jsx("input",{inputMode:"decimal",value:J,onChange:Z=>de(Z.target.value)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Hip 3 (cm)"}),p.jsx("input",{inputMode:"decimal",value:Ke,onChange:Z=>st(Z.target.value)})]})]}):null]}):p.jsxs("div",{className:"row",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Neck (cm)"}),p.jsx("input",{inputMode:"decimal",value:S,onChange:Z=>T(Z.target.value),placeholder:"optional"})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Waist (cm)"}),p.jsx("input",{inputMode:"decimal",value:z,onChange:Z=>B(Z.target.value),placeholder:"optional"})]}),s?p.jsxs("div",{className:"field",children:[p.jsx("label",{children:"Hip (cm)"}),p.jsx("input",{inputMode:"decimal",value:Q,onChange:Z=>j(Z.target.value),placeholder:"optional"})]}):null]}),p.jsx("div",{className:"footer-actions",children:p.jsx("button",{className:"btn primary",type:"submit",disabled:!tn()||r,children:r?"Saving":"Add / Update Entry"})})]})]})}function E5(t,e){const n=D.useContext(li),i=n==null?void 0:n.navigator;D.useEffect(()=>{if(!t||!i||typeof i.block!="function")return;const r=i.block(s=>{window.confirm(e)&&(r(),s.retry())});return r},[i,t,e]),D.useEffect(()=>{if(!t)return;const r=s=>(s.preventDefault(),s.returnValue=e,e);return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[t,e])}function x5(t){return t==null?"":String(t)}function T5(t){if(t===""||t===null||t===void 0)return null;const e=Number(t);return Number.isFinite(e)?e:null}function mu(t,e){return`${t}::${e}`}function I5({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:r}){const[s,o]=D.useState(!1),[a,l]=D.useState(null),[c,h]=D.useState(!1),[d,f]=D.useState({}),[m,_]=D.useState({}),[b,w]=D.useState([]),[E,x]=D.useState([]),k=D.useRef({}),N=String(t||"").toLowerCase()==="female",M=Array.isArray(r)&&r.length===3?r:["Bench Press","Squat","Deadlift"],O=D.useMemo(()=>{const $=new Map;for(const L of n||[])$.set(L.dateIso,L);return $},[n]);D.useEffect(()=>{const $=new Set((n||[]).map(L=>L.dateIso));f(L=>{const q={...L};let ne=!1;for(const le of Object.keys(q)){const[re]=le.split("::");$.has(re)||(delete q[le],ne=!0)}return ne?q:L}),_(L=>{const q={...L};let ne=!1;for(const le of Object.keys(q)){const[re]=le.split("::");$.has(re)||(delete q[le],ne=!0)}return ne?q:L})},[n]);const I=D.useMemo(()=>{const $=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"benchLoad",label:`${M[0]} Load`},{key:"benchReps",label:`${M[0]} Reps`},{key:"squatLoad",label:`${M[1]} Load`},{key:"squatReps",label:`${M[1]} Reps`},{key:"deadliftLoad",label:`${M[2]} Load`},{key:"deadliftReps",label:`${M[2]} Reps`}];return i?($.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),N&&$.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):($.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),N&&$.push({key:"hip",label:"Hip"})),$.push({key:"_actions",label:"Actions",readOnly:!0}),$},[i,N,M]);function v($,L){const q=O.get($);return x5(q==null?void 0:q[L])}function C($,L){const q=mu($,L);return Object.prototype.hasOwnProperty.call(d,q)?d[q]:v($,L)}function P($,L,q){if(!c)return;const ne=mu($,L),le=v($,L);f(re=>{const Te={...re};return q===le?Object.prototype.hasOwnProperty.call(Te,ne)&&delete Te[ne]:Te[ne]=q,Te}),_(re=>{const Te={...re};return q===le?Object.prototype.hasOwnProperty.call(Te,ne)&&delete Te[ne]:Te[ne]=!0,Te})}function R($,L){const q=mu($,L);k.current[q]=C($,L)}function S($,L){const q=mu($,L),ne=k.current[q];delete k.current[q];const le=C($,L);ne!==void 0&&ne!==le&&(w(re=>[...re,{ck:q,dateIso:$,key:L,prev:ne,next:le}]),x([]))}function T($,L){P($.dateIso,$.key,L)}function z(){c&&(l(null),w($=>{if($.length===0)return $;const L=[...$],q=L.pop();return T(q,q.prev),x(ne=>[...ne,q]),L}))}function B(){c&&(l(null),x($=>{if($.length===0)return $;const L=[...$],q=L.pop();return T(q,q.next),w(ne=>[...ne,q]),L}))}function Q($,L){const q=Jr($,L);return Number.isFinite(q)?Math.round(q*10)/10:null}async function j(){const $=Object.keys(m||{});if($.length!==0){l(null),o(!0);try{const L={};for(const ne of $){const[le,re]=ne.split("::"),Te=C(le,re),Ye=T5(Te);L[le]||(L[le]={}),L[le][re]=Ye}for(const ne of Object.keys(L)){const le=O.get(ne)||{},re=L[ne],Te=Object.prototype.hasOwnProperty.call(re,"benchLoad")||Object.prototype.hasOwnProperty.call(re,"benchReps"),Ye=Object.prototype.hasOwnProperty.call(re,"squatLoad")||Object.prototype.hasOwnProperty.call(re,"squatReps"),fn=Object.prototype.hasOwnProperty.call(re,"deadliftLoad")||Object.prototype.hasOwnProperty.call(re,"deadliftReps");if(Te){const Be=Object.prototype.hasOwnProperty.call(re,"benchLoad")?re.benchLoad:le.benchLoad??null,et=Object.prototype.hasOwnProperty.call(re,"benchReps")?re.benchReps:le.benchReps??null;re.bench=Q(Be,et)}if(Ye){const Be=Object.prototype.hasOwnProperty.call(re,"squatLoad")?re.squatLoad:le.squatLoad??null,et=Object.prototype.hasOwnProperty.call(re,"squatReps")?re.squatReps:le.squatReps??null;re.squat=Q(Be,et)}if(fn){const Be=Object.prototype.hasOwnProperty.call(re,"deadliftLoad")?re.deadliftLoad:le.deadliftLoad??null,et=Object.prototype.hasOwnProperty.call(re,"deadliftReps")?re.deadliftReps:le.deadliftReps??null;re.deadlift=Q(Be,et)}}const q=Object.keys(L).map(ne=>({dateIso:ne,patch:L[ne]}));await CF(e,q),f({}),_({}),w([]),x([]),l({type:"success",text:"Saved changes."}),h(!1)}catch(L){l({type:"error",text:(L==null?void 0:L.message)||"Failed to save changes."})}finally{o(!1)}}}async function V($){if(confirm(`Delete entry for ${$}?`)){l(null),o(!0);try{await AF(e,$),f(L=>{const q={...L};for(const ne of Object.keys(q))ne.startsWith(`${$}::`)&&delete q[ne];return q}),_(L=>{const q={...L};for(const ne of Object.keys(q))ne.startsWith(`${$}::`)&&delete q[ne];return q}),l({type:"success",text:"Deleted."})}catch(L){l({type:"error",text:(L==null?void 0:L.message)||"Failed to delete."})}finally{o(!1)}}}const G=Object.keys(m||{}).length>0;E5(c&&G,"You have unsaved changes. Leave without saving?");function X(){h(!1),f({}),_({}),w([]),x([]),l(null)}return p.jsxs("div",{className:"panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h2",{children:"All Entries"}),p.jsxs("div",{className:"table-actions",children:[p.jsx("button",{className:"btn icon small",onClick:z,disabled:!c||b.length===0||s,title:"Undo","aria-label":"Undo",children:""}),p.jsx("button",{className:"btn icon small",onClick:B,disabled:!c||E.length===0||s,title:"Redo","aria-label":"Redo",children:""}),c?G?p.jsx("button",{className:"btn primary small",onClick:j,disabled:!G||s,children:s?"saving":"save"}):p.jsx("button",{className:"btn primary small",onClick:X,disabled:s,children:"cancel"}):p.jsx("button",{className:"btn primary small",onClick:()=>h(!0),disabled:s,children:"edit"})]})]}),a&&p.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:12},children:a.text}),p.jsx("div",{className:"table-wrap",style:{marginTop:12},children:p.jsxs("table",{className:"table",children:[p.jsx("thead",{children:p.jsx("tr",{children:I.map($=>p.jsx("th",{children:$.label},$.key))})}),p.jsx("tbody",{children:n.map($=>p.jsx("tr",{children:I.map(L=>L.key==="_actions"?p.jsx("td",{children:p.jsx("button",{className:"btn danger",onClick:()=>V($.dateIso),disabled:s,children:"Delete"})},L.key):L.readOnly?p.jsx("td",{children:$[L.key]},L.key):p.jsx("td",{children:c?p.jsx("input",{value:C($.dateIso,L.key),onChange:q=>P($.dateIso,L.key,q.target.value),onFocus:()=>R($.dateIso,L.key),onBlur:()=>S($.dateIso,L.key),inputMode:"decimal",disabled:s}):p.jsx("span",{children:C($.dateIso,L.key)})},L.key))},$.dateIso))})]})})]})}function S5(){const{user:t}=Hn(),{profile:e}=gc(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=D.useState([]),[s,o]=D.useState(!1),[a,l]=D.useState(null);D.useEffect(()=>{if(!t)return;const f=Ay(t.uid,m=>r(m),m=>l({type:"error",text:(m==null?void 0:m.message)||"Failed to load entries."}));return()=>f()},[t]);const c=D.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function d(f){l(null),o(!0);try{await kF(t.uid,f),l({type:"success",text:"Entry saved."})}catch(m){l({type:"error",text:(m==null?void 0:m.message)||"Failed to save entry."})}finally{o(!1)}}return p.jsxs(p.Fragment,{children:[a&&p.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),p.jsx(b5,{sex:h,tripleEnabled:c,liftNames:n,onSubmit:d,busy:s}),p.jsx(I5,{sex:h,userId:t.uid,entries:i,tripleEnabled:c,liftNames:n})]})}const k5=[{value:"user",label:"Standard"},{value:"admin",label:"Administrator"}];function C5(t){return(t==null?void 0:t.accountType)==="admin"||t!=null&&t.isAdmin?"admin":"user"}function A5(){const{user:t}=Hn(),{profile:e,loading:n}=gc(),i=Lr(),[r,s]=D.useState([]),[o,a]=D.useState(!0),[l,c]=D.useState(null),[h,d]=D.useState(!1),[f,m]=D.useState({}),[_,b]=D.useState(null),[w,E]=D.useState(!1),[x,k]=D.useState(null),N=!!(e!=null&&e.isAdmin)||(e==null?void 0:e.accountType)==="admin";D.useEffect(()=>{if(!t||n)return;if(!N){s([]),a(!1),c(null);return}a(!0),c(null);const T=HL(gS(Zt,"users"),qL("email","asc")),z=xy(T,B=>{const Q=B.docs.map(j=>({id:j.id,...j.data()}));s(Q),a(!1)},B=>{c((B==null?void 0:B.message)||String(B)),a(!1)});return()=>z()},[t,N,n]);const M=D.useMemo(()=>{const T={};return r.forEach(z=>{T[z.id]=C5(z)}),T},[r]),O=D.useMemo(()=>{if(!h)return!1;for(const T of Object.keys(f))if(f[T]!==M[T])return!0;return!1},[f,M,h]);function I(){k(null),b(null),d(!0),m({...M})}function v(){d(!1),m({}),b(null),k(null)}async function C(){if(t){E(!0),b(null),k(null);try{const T=SS(Zt);let z=0;for(const B of Object.keys(f)){const Q=f[B],j=M[B];if(Q===j)continue;const V=kr(Zt,"users",B),G=Q==="admin";T.update(V,{accountType:Q,isAdmin:G}),z+=1}z>0&&await T.commit(),k(new Date),d(!1),m({})}catch(T){b((T==null?void 0:T.message)||String(T))}finally{E(!1)}}}function P(){return h?O?C():v():I()}const R=D.useMemo(()=>h?O?w?"Saving":"Save":"Cancel":"Edit",[h,O,w]),S=D.useMemo(()=>!h||!O?!1:w,[h,O,w]);return p.jsxs(p.Fragment,{children:[n&&p.jsx("div",{className:"card",children:p.jsx("div",{className:"small",children:"Loading"})}),!n&&t&&!N&&p.jsxs("div",{className:"card",children:[p.jsx("h2",{style:{marginTop:0},children:"Not an Administrator"}),p.jsx("div",{className:"small",style:{marginTop:8},children:"Sorry, but youre not an Administrator."}),p.jsx("div",{style:{marginTop:14},children:p.jsx("button",{className:"btn",onClick:()=>i("/dashboard"),children:"Back to dashboard"})})]}),!n&&t&&N&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"panel",children:[p.jsx("h2",{style:{margin:0},children:"Administrator Panel"}),p.jsx("div",{className:"small",style:{marginTop:6},children:"Manage user account types."})]}),p.jsxs("div",{className:"card",children:[p.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("div",{className:"small",children:"Signed in as"}),p.jsx("div",{style:{fontWeight:800,marginTop:2},children:(t==null?void 0:t.email)||""}),p.jsxs("div",{style:{marginTop:8},className:N?"notice success":"notice info",children:[p.jsx("b",{children:"Status:"})," ",N?"Administrator":"Standard user"]})]}),p.jsx("button",{className:"btn small",onClick:P,disabled:S,children:R})]}),l&&p.jsxs("div",{className:"notice danger",style:{marginTop:12},children:[p.jsx("b",{children:"Could not load users."}),p.jsx("div",{className:"small",style:{marginTop:6,opacity:.9},children:l}),p.jsxs("div",{className:"small",style:{marginTop:8,opacity:.9},children:["If you are the admin, set ",p.jsx("code",{children:"isAdmin"})," = ",p.jsx("code",{children:"true"})," in your own Firestore user document and make sure your Firestore rules allow admins to read ",p.jsx("code",{children:"/users"}),"."]})]}),_&&p.jsxs("div",{className:"notice danger",style:{marginTop:12},children:[p.jsx("b",{children:"Save failed."}),p.jsx("div",{className:"small",style:{marginTop:6,opacity:.9},children:_})]}),x&&p.jsxs("div",{className:"notice success",style:{marginTop:12},children:["Saved at ",x.toLocaleTimeString()]}),p.jsx("div",{style:{marginTop:14,overflowX:"auto"},children:p.jsxs("table",{className:"table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Email"}),p.jsx("th",{style:{width:220},children:"Account type"})]})}),p.jsxs("tbody",{children:[o&&p.jsx("tr",{children:p.jsx("td",{colSpan:2,className:"small",children:"Loading"})}),!o&&r.length===0&&p.jsx("tr",{children:p.jsx("td",{colSpan:2,className:"small",children:"No users found."})}),!o&&r.map(T=>{const z=M[T.id],B=h?f[T.id]??z:z;return p.jsxs("tr",{children:[p.jsxs("td",{children:[p.jsx("div",{style:{fontWeight:700},children:T.email||""}),p.jsx("div",{className:"small",style:{opacity:.8},children:T.id})]}),p.jsxs("td",{children:[!h&&p.jsx("span",{className:"pill",children:z==="admin"?"Administrator":"Standard"}),h&&p.jsx("select",{className:"input",value:B,onChange:Q=>m(j=>({...j,[T.id]:Q.target.value})),disabled:w,children:k5.map(Q=>p.jsx("option",{value:Q.value,children:Q.label},Q.value))})]})]},T.id)})]})]})})]})]})]})}function P5(){return p.jsxs(p.Fragment,{children:[p.jsx(TF,{}),p.jsx("div",{className:"app-shell",children:p.jsxs(DP,{children:[p.jsx(Rn,{path:"/",element:p.jsx($p,{to:"/dashboard",replace:!0})}),p.jsx(Rn,{path:"/dashboard",element:p.jsx(l5,{})}),p.jsx(Rn,{path:"/login",element:p.jsx(h5,{})}),p.jsx(Rn,{path:"/signup",element:p.jsx(d5,{})}),p.jsx(Rn,{path:"/reset-password",element:p.jsx(f5,{})}),p.jsx(Rn,{path:"/profile",element:p.jsx(tu,{children:p.jsx(w5,{})})}),p.jsx(Rn,{path:"/admin",element:p.jsx(tu,{children:p.jsx(A5,{})})}),p.jsx(Rn,{path:"/notifications",element:p.jsx(tu,{children:p.jsx(u5,{})})}),p.jsx(Rn,{path:"/entry",element:p.jsx(tu,{children:p.jsx(S5,{})})}),p.jsx(Rn,{path:"*",element:p.jsx($p,{to:"/dashboard",replace:!0})})]})})]})}class R5 extends Rg.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?p.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[p.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),p.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),p.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),p.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}Gf.createRoot(document.getElementById("root")).render(p.jsx(Rg.StrictMode,{children:p.jsx(BP,{basename:"/Body-Recomp-Tracker/",children:p.jsx(wF,{children:p.jsx(xF,{children:p.jsx(R5,{children:p.jsx(P5,{})})})})})}));
