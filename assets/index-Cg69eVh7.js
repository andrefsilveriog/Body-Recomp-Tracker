var Zk=Object.defineProperty;var eC=(t,e,n)=>e in t?Zk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>eC(t,typeof e!="symbol"?e+"":e,n);function tC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function nC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RE={exports:{}},Dh={},NE={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ul=Symbol.for("react.element"),iC=Symbol.for("react.portal"),rC=Symbol.for("react.fragment"),sC=Symbol.for("react.strict_mode"),oC=Symbol.for("react.profiler"),aC=Symbol.for("react.provider"),lC=Symbol.for("react.context"),cC=Symbol.for("react.forward_ref"),uC=Symbol.for("react.suspense"),hC=Symbol.for("react.memo"),dC=Symbol.for("react.lazy"),Sv=Symbol.iterator;function fC(t){return t===null||typeof t!="object"?null:(t=Sv&&t[Sv]||t["@@iterator"],typeof t=="function"?t:null)}var DE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ME=Object.assign,OE={};function Lo(t,e,n){this.props=t,this.context=e,this.refs=OE,this.updater=n||DE}Lo.prototype.isReactComponent={};Lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function LE(){}LE.prototype=Lo.prototype;function wg(t,e,n){this.props=t,this.context=e,this.refs=OE,this.updater=n||DE}var Eg=wg.prototype=new LE;Eg.constructor=wg;ME(Eg,Lo.prototype);Eg.isPureReactComponent=!0;var kv=Array.isArray,FE=Object.prototype.hasOwnProperty,bg={current:null},jE={key:!0,ref:!0,__self:!0,__source:!0};function VE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FE.call(e,i)&&!jE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Ul,type:t,key:s,ref:o,props:r,_owner:bg.current}}function pC(t,e){return{$$typeof:Ul,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ul}function gC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cv=/\/+/g;function zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gC(""+t.key):e.toString(36)}function ou(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ul:case iC:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+zd(o,0):i,kv(r)?(n="",t!=null&&(n=t.replace(Cv,"$&/")+"/"),ou(r,e,n,"",function(c){return c})):r!=null&&(Tg(r)&&(r=pC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Cv,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",kv(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+zd(s,a);o+=ou(s,e,n,l,r)}else if(l=fC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+zd(s,a++),o+=ou(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tc(t,e,n){if(t==null)return t;var i=[],r=0;return ou(t,i,"","",function(s){return e.call(n,s,r++)}),i}function mC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},au={transition:null},yC={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:au,ReactCurrentOwner:bg};function UE(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Tc,forEach:function(t,e,n){Tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tc(t,function(){e++}),e},toArray:function(t){return Tc(t,function(e){return e})||[]},only:function(t){if(!Tg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Lo;me.Fragment=rC;me.Profiler=oC;me.PureComponent=wg;me.StrictMode=sC;me.Suspense=uC;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yC;me.act=UE;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ME({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)FE.call(e,l)&&!jE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Ul,type:t.type,key:r,ref:s,props:i,_owner:o}};me.createContext=function(t){return t={$$typeof:lC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aC,_context:t},t.Consumer=t};me.createElement=VE;me.createFactory=function(t){var e=VE.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:cC,render:t}};me.isValidElement=Tg;me.lazy=function(t){return{$$typeof:dC,_payload:{_status:-1,_result:t},_init:mC}};me.memo=function(t,e){return{$$typeof:hC,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};me.unstable_act=UE;me.useCallback=function(t,e){return Ut.current.useCallback(t,e)};me.useContext=function(t){return Ut.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};me.useEffect=function(t,e){return Ut.current.useEffect(t,e)};me.useId=function(){return Ut.current.useId()};me.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Ut.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};me.useRef=function(t){return Ut.current.useRef(t)};me.useState=function(t){return Ut.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Ut.current.useTransition()};me.version="18.3.1";NE.exports=me;var M=NE.exports;const xg=nC(M),vC=tC({__proto__:null,default:xg},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C=M,wC=Symbol.for("react.element"),EC=Symbol.for("react.fragment"),bC=Object.prototype.hasOwnProperty,TC=_C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xC={key:!0,ref:!0,__self:!0,__source:!0};function BE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)bC.call(e,i)&&!xC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:wC,type:t,key:s,ref:o,props:r,_owner:TC.current}}Dh.Fragment=EC;Dh.jsx=BE;Dh.jsxs=BE;RE.exports=Dh;var g=RE.exports,zf={},zE={exports:{}},on={},$E={exports:{}},WE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var Q=B.length;B.push(K);e:for(;0<Q;){var V=Q-1>>>1,L=B[V];if(0<r(L,K))B[V]=K,B[Q]=L,Q=V;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var K=B[0],Q=B.pop();if(Q!==K){B[0]=Q;e:for(var V=0,L=B.length,W=L>>>1;V<W;){var X=2*(V+1)-1,ce=B[X],Z=X+1,ke=B[Z];if(0>r(ce,Q))Z<L&&0>r(ke,ce)?(B[V]=ke,B[Z]=Q,V=Z):(B[V]=ce,B[X]=Q,V=X);else if(Z<L&&0>r(ke,Q))B[V]=ke,B[Z]=Q,V=Z;else break e}}return K}function r(B,K){var Q=B.sortIndex-K.sortIndex;return Q!==0?Q:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var K=n(c);K!==null;){if(K.callback===null)i(c);else if(K.startTime<=B)i(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function N(B){if(b=!1,S(B),!v)if(n(l)!==null)v=!0,he(D);else{var K=n(c);K!==null&&re(N,K.startTime-B)}}function D(B,K){v=!1,b&&(b=!1,T(_),_=-1),m=!0;var Q=f;try{for(S(K),d=n(l);d!==null&&(!(d.expirationTime>K)||B&&!A());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var L=V(d.expirationTime<=K);K=t.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&i(l),S(K)}else i(l);d=n(l)}if(d!==null)var W=!0;else{var X=n(c);X!==null&&re(N,X.startTime-K),W=!1}return W}finally{d=null,f=Q,m=!1}}var O=!1,x=null,_=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function R(){if(x!==null){var B=t.unstable_now();C=B;var K=!0;try{K=x(!0,B)}finally{K?P():(O=!1,x=null)}}else O=!1}var P;if(typeof E=="function")P=function(){E(R)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,q=ie.port2;ie.port1.onmessage=R,P=function(){q.postMessage(null)}}else P=function(){w(R,0)};function he(B){x=B,O||(O=!0,P())}function re(B,K){_=w(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,he(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var Q=f;f=K;try{return B()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=f;f=B;try{return K()}finally{f=Q}},t.unstable_scheduleCallback=function(B,K,Q){var V=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?V+Q:V):Q=V,B){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Q+L,B={id:h++,callback:K,priorityLevel:B,startTime:Q,expirationTime:L,sortIndex:-1},Q>V?(B.sortIndex=Q,e(c,B),n(l)===null&&B===n(c)&&(b?(T(_),_=-1):b=!0,re(N,Q-V))):(B.sortIndex=L,e(l,B),v||m||(v=!0,he(D))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var K=f;return function(){var Q=f;f=K;try{return B.apply(this,arguments)}finally{f=Q}}}})(WE);$E.exports=WE;var IC=$E.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SC=M,sn=IC;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HE=new Set,ol={};function xs(t,e){yo(t,e),yo(t+"Capture",e)}function yo(t,e){for(ol[t]=e,t=0;t<e.length;t++)HE.add(e[t])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$f=Object.prototype.hasOwnProperty,kC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pv={},Av={};function CC(t){return $f.call(Av,t)?!0:$f.call(Pv,t)?!1:kC.test(t)?Av[t]=!0:(Pv[t]=!0,!1)}function PC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AC(t,e,n,i){if(e===null||typeof e>"u"||PC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ig=/[\-:]([a-z])/g;function Sg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ig,Sg);Et[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ig,Sg);Et[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ig,Sg);Et[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function kg(t,e,n,i){var r=Et.hasOwnProperty(e)?Et[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AC(e,n,r,i)&&(n=null),i||r===null?CC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ai=SC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xc=Symbol.for("react.element"),Hs=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),Cg=Symbol.for("react.strict_mode"),Wf=Symbol.for("react.profiler"),qE=Symbol.for("react.provider"),KE=Symbol.for("react.context"),Pg=Symbol.for("react.forward_ref"),Hf=Symbol.for("react.suspense"),qf=Symbol.for("react.suspense_list"),Ag=Symbol.for("react.memo"),Wi=Symbol.for("react.lazy"),GE=Symbol.for("react.offscreen"),Rv=Symbol.iterator;function la(t){return t===null||typeof t!="object"?null:(t=Rv&&t[Rv]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,$d;function xa(t){if($d===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$d=e&&e[1]||""}return`
`+$d+t}var Wd=!1;function Hd(t,e){if(!t||Wd)return"";Wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xa(t):""}function RC(t){switch(t.tag){case 5:return xa(t.type);case 16:return xa("Lazy");case 13:return xa("Suspense");case 19:return xa("SuspenseList");case 0:case 2:case 15:return t=Hd(t.type,!1),t;case 11:return t=Hd(t.type.render,!1),t;case 1:return t=Hd(t.type,!0),t;default:return""}}function Kf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qs:return"Fragment";case Hs:return"Portal";case Wf:return"Profiler";case Cg:return"StrictMode";case Hf:return"Suspense";case qf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case KE:return(t.displayName||"Context")+".Consumer";case qE:return(t._context.displayName||"Context")+".Provider";case Pg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ag:return e=t.displayName||null,e!==null?e:Kf(t.type)||"Memo";case Wi:e=t._payload,t=t._init;try{return Kf(t(e))}catch{}}return null}function NC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kf(e);case 8:return e===Cg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function QE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DC(t){var e=QE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ic(t){t._valueTracker||(t._valueTracker=DC(t))}function YE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=QE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ru(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gf(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function XE(t,e){e=e.checked,e!=null&&kg(t,"checked",e,!1)}function Qf(t,e){XE(t,e);var n=wr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yf(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yf(t,e,n){(e!=="number"||Ru(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function so(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Xf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Ia(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function JE(t,e){var n=wr(e.value),i=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Ov(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sc,eb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sc=Sc||document.createElement("div"),Sc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MC=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){MC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ja[e]=ja[t]})});function tb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ja.hasOwnProperty(t)&&ja[t]?(""+e).trim():e+"px"}function nb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=tb(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var OC=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zf(t,e){if(e){if(OC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function ep(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tp=null;function Rg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var np=null,oo=null,ao=null;function Lv(t){if(t=$l(t)){if(typeof np!="function")throw Error($(280));var e=t.stateNode;e&&(e=jh(e),np(t.stateNode,t.type,e))}}function ib(t){oo?ao?ao.push(t):ao=[t]:oo=t}function rb(){if(oo){var t=oo,e=ao;if(ao=oo=null,Lv(t),e)for(t=0;t<e.length;t++)Lv(e[t])}}function sb(t,e){return t(e)}function ob(){}var qd=!1;function ab(t,e,n){if(qd)return t(e,n);qd=!0;try{return sb(t,e,n)}finally{qd=!1,(oo!==null||ao!==null)&&(ob(),rb())}}function ll(t,e){var n=t.stateNode;if(n===null)return null;var i=jh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ip=!1;if(bi)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){ip=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{ip=!1}function LC(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Va=!1,Nu=null,Du=!1,rp=null,FC={onError:function(t){Va=!0,Nu=t}};function jC(t,e,n,i,r,s,o,a,l){Va=!1,Nu=null,LC.apply(FC,arguments)}function VC(t,e,n,i,r,s,o,a,l){if(jC.apply(this,arguments),Va){if(Va){var c=Nu;Va=!1,Nu=null}else throw Error($(198));Du||(Du=!0,rp=c)}}function Is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fv(t){if(Is(t)!==t)throw Error($(188))}function UC(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Fv(r),t;if(s===i)return Fv(r),e;s=s.sibling}throw Error($(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function cb(t){return t=UC(t),t!==null?ub(t):null}function ub(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ub(t);if(e!==null)return e;t=t.sibling}return null}var hb=sn.unstable_scheduleCallback,jv=sn.unstable_cancelCallback,BC=sn.unstable_shouldYield,zC=sn.unstable_requestPaint,Qe=sn.unstable_now,$C=sn.unstable_getCurrentPriorityLevel,Ng=sn.unstable_ImmediatePriority,db=sn.unstable_UserBlockingPriority,Mu=sn.unstable_NormalPriority,WC=sn.unstable_LowPriority,fb=sn.unstable_IdlePriority,Mh=null,Gn=null;function HC(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Mh,t,void 0,(t.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:GC,qC=Math.log,KC=Math.LN2;function GC(t){return t>>>=0,t===0?32:31-(qC(t)/KC|0)|0}var kc=64,Cc=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Sa(a):(s&=o,s!==0&&(i=Sa(s)))}else o=n&~r,o!==0?i=Sa(o):s!==0&&(i=Sa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Pn(e),r=1<<n,i|=t[n],e&=~r;return i}function QC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=QC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function sp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pb(){var t=kc;return kc<<=1,!(kc&4194240)&&(kc=64),t}function Kd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pn(e),t[e]=n}function XC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Pn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Dg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Pn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Pe=0;function gb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mb,Mg,yb,vb,_b,op=!1,Pc=[],or=null,ar=null,lr=null,cl=new Map,ul=new Map,qi=[],JC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vv(t,e){switch(t){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":cl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(e.pointerId)}}function ua(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=$l(e),e!==null&&Mg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ZC(t,e,n,i,r){switch(e){case"focusin":return or=ua(or,t,e,n,i,r),!0;case"dragenter":return ar=ua(ar,t,e,n,i,r),!0;case"mouseover":return lr=ua(lr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return cl.set(s,ua(cl.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ul.set(s,ua(ul.get(s)||null,t,e,n,i,r)),!0}return!1}function wb(t){var e=Jr(t.target);if(e!==null){var n=Is(e);if(n!==null){if(e=n.tag,e===13){if(e=lb(n),e!==null){t.blockedOn=e,_b(t.priority,function(){yb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ap(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);tp=i,n.target.dispatchEvent(i),tp=null}else return e=$l(n),e!==null&&Mg(e),t.blockedOn=n,!1;e.shift()}return!0}function Uv(t,e,n){lu(t)&&n.delete(e)}function e1(){op=!1,or!==null&&lu(or)&&(or=null),ar!==null&&lu(ar)&&(ar=null),lr!==null&&lu(lr)&&(lr=null),cl.forEach(Uv),ul.forEach(Uv)}function ha(t,e){t.blockedOn===e&&(t.blockedOn=null,op||(op=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,e1)))}function hl(t){function e(r){return ha(r,t)}if(0<Pc.length){ha(Pc[0],t);for(var n=1;n<Pc.length;n++){var i=Pc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(or!==null&&ha(or,t),ar!==null&&ha(ar,t),lr!==null&&ha(lr,t),cl.forEach(e),ul.forEach(e),n=0;n<qi.length;n++)i=qi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<qi.length&&(n=qi[0],n.blockedOn===null);)wb(n),n.blockedOn===null&&qi.shift()}var lo=Ai.ReactCurrentBatchConfig,Lu=!0;function t1(t,e,n,i){var r=Pe,s=lo.transition;lo.transition=null;try{Pe=1,Og(t,e,n,i)}finally{Pe=r,lo.transition=s}}function n1(t,e,n,i){var r=Pe,s=lo.transition;lo.transition=null;try{Pe=4,Og(t,e,n,i)}finally{Pe=r,lo.transition=s}}function Og(t,e,n,i){if(Lu){var r=ap(t,e,n,i);if(r===null)rf(t,e,i,Fu,n),Vv(t,i);else if(ZC(r,t,e,n,i))i.stopPropagation();else if(Vv(t,i),e&4&&-1<JC.indexOf(t)){for(;r!==null;){var s=$l(r);if(s!==null&&mb(s),s=ap(t,e,n,i),s===null&&rf(t,e,i,Fu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else rf(t,e,i,null,n)}}var Fu=null;function ap(t,e,n,i){if(Fu=null,t=Rg(i),t=Jr(t),t!==null)if(e=Is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fu=t,null}function Eb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($C()){case Ng:return 1;case db:return 4;case Mu:case WC:return 16;case fb:return 536870912;default:return 16}default:return 16}}var Zi=null,Lg=null,cu=null;function bb(){if(cu)return cu;var t,e=Lg,n=e.length,i,r="value"in Zi?Zi.value:Zi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return cu=r.slice(t,1<i?1-i:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ac(){return!0}function Bv(){return!1}function an(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ac:Bv,this.isPropagationStopped=Bv,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),e}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fg=an(Fo),zl=$e({},Fo,{view:0,detail:0}),i1=an(zl),Gd,Qd,da,Oh=$e({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(Gd=t.screenX-da.screenX,Qd=t.screenY-da.screenY):Qd=Gd=0,da=t),Gd)},movementY:function(t){return"movementY"in t?t.movementY:Qd}}),zv=an(Oh),r1=$e({},Oh,{dataTransfer:0}),s1=an(r1),o1=$e({},zl,{relatedTarget:0}),Yd=an(o1),a1=$e({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),l1=an(a1),c1=$e({},Fo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),u1=an(c1),h1=$e({},Fo,{data:0}),$v=an(h1),d1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=p1[t])?!!e[t]:!1}function jg(){return g1}var m1=$e({},zl,{key:function(t){if(t.key){var e=d1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?f1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jg,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),y1=an(m1),v1=$e({},Oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wv=an(v1),_1=$e({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jg}),w1=an(_1),E1=$e({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),b1=an(E1),T1=$e({},Oh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x1=an(T1),I1=[9,13,27,32],Vg=bi&&"CompositionEvent"in window,Ua=null;bi&&"documentMode"in document&&(Ua=document.documentMode);var S1=bi&&"TextEvent"in window&&!Ua,Tb=bi&&(!Vg||Ua&&8<Ua&&11>=Ua),Hv=" ",qv=!1;function xb(t,e){switch(t){case"keyup":return I1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ib(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ks=!1;function k1(t,e){switch(t){case"compositionend":return Ib(e);case"keypress":return e.which!==32?null:(qv=!0,Hv);case"textInput":return t=e.data,t===Hv&&qv?null:t;default:return null}}function C1(t,e){if(Ks)return t==="compositionend"||!Vg&&xb(t,e)?(t=bb(),cu=Lg=Zi=null,Ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tb&&e.locale!=="ko"?null:e.data;default:return null}}var P1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!P1[t.type]:e==="textarea"}function Sb(t,e,n,i){ib(i),e=ju(e,"onChange"),0<e.length&&(n=new Fg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ba=null,dl=null;function A1(t){Fb(t,0)}function Lh(t){var e=Ys(t);if(YE(e))return t}function R1(t,e){if(t==="change")return e}var kb=!1;if(bi){var Xd;if(bi){var Jd="oninput"in document;if(!Jd){var Gv=document.createElement("div");Gv.setAttribute("oninput","return;"),Jd=typeof Gv.oninput=="function"}Xd=Jd}else Xd=!1;kb=Xd&&(!document.documentMode||9<document.documentMode)}function Qv(){Ba&&(Ba.detachEvent("onpropertychange",Cb),dl=Ba=null)}function Cb(t){if(t.propertyName==="value"&&Lh(dl)){var e=[];Sb(e,dl,t,Rg(t)),ab(A1,e)}}function N1(t,e,n){t==="focusin"?(Qv(),Ba=e,dl=n,Ba.attachEvent("onpropertychange",Cb)):t==="focusout"&&Qv()}function D1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lh(dl)}function M1(t,e){if(t==="click")return Lh(e)}function O1(t,e){if(t==="input"||t==="change")return Lh(e)}function L1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:L1;function fl(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!$f.call(e,r)||!Nn(t[r],e[r]))return!1}return!0}function Yv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xv(t,e){var n=Yv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yv(n)}}function Pb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ab(){for(var t=window,e=Ru();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ru(t.document)}return e}function Ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function F1(t){var e=Ab(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pb(n.ownerDocument.documentElement,n)){if(i!==null&&Ug(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Xv(n,s);var o=Xv(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var j1=bi&&"documentMode"in document&&11>=document.documentMode,Gs=null,lp=null,za=null,cp=!1;function Jv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cp||Gs==null||Gs!==Ru(i)||(i=Gs,"selectionStart"in i&&Ug(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),za&&fl(za,i)||(za=i,i=ju(lp,"onSelect"),0<i.length&&(e=new Fg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Gs)))}function Rc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qs={animationend:Rc("Animation","AnimationEnd"),animationiteration:Rc("Animation","AnimationIteration"),animationstart:Rc("Animation","AnimationStart"),transitionend:Rc("Transition","TransitionEnd")},Zd={},Rb={};bi&&(Rb=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function Fh(t){if(Zd[t])return Zd[t];if(!Qs[t])return t;var e=Qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Rb)return Zd[t]=e[n];return t}var Nb=Fh("animationend"),Db=Fh("animationiteration"),Mb=Fh("animationstart"),Ob=Fh("transitionend"),Lb=new Map,Zv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(t,e){Lb.set(t,e),xs(e,[t])}for(var ef=0;ef<Zv.length;ef++){var tf=Zv[ef],V1=tf.toLowerCase(),U1=tf[0].toUpperCase()+tf.slice(1);Cr(V1,"on"+U1)}Cr(Nb,"onAnimationEnd");Cr(Db,"onAnimationIteration");Cr(Mb,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(Ob,"onTransitionEnd");yo("onMouseEnter",["mouseout","mouseover"]);yo("onMouseLeave",["mouseout","mouseover"]);yo("onPointerEnter",["pointerout","pointerover"]);yo("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function e_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,VC(i,e,void 0,t),t.currentTarget=null}function Fb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;e_(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;e_(r,a,c),s=l}}}if(Du)throw t=rp,Du=!1,rp=null,t}function Oe(t,e){var n=e[pp];n===void 0&&(n=e[pp]=new Set);var i=t+"__bubble";n.has(i)||(jb(e,t,2,!1),n.add(i))}function nf(t,e,n){var i=0;e&&(i|=4),jb(n,t,i,e)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function pl(t){if(!t[Nc]){t[Nc]=!0,HE.forEach(function(n){n!=="selectionchange"&&(B1.has(n)||nf(n,!1,t),nf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nc]||(e[Nc]=!0,nf("selectionchange",!1,e))}}function jb(t,e,n,i){switch(Eb(e)){case 1:var r=t1;break;case 4:r=n1;break;default:r=Og}n=r.bind(null,e,n,t),r=void 0,!ip||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function rf(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Jr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}ab(function(){var c=s,h=Rg(n),d=[];e:{var f=Lb.get(t);if(f!==void 0){var m=Fg,v=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":m=y1;break;case"focusin":v="focus",m=Yd;break;case"focusout":v="blur",m=Yd;break;case"beforeblur":case"afterblur":m=Yd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=s1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=w1;break;case Nb:case Db:case Mb:m=l1;break;case Ob:m=b1;break;case"scroll":m=i1;break;case"wheel":m=x1;break;case"copy":case"cut":case"paste":m=u1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Wv}var b=(e&4)!==0,w=!b&&t==="scroll",T=b?f!==null?f+"Capture":null:f;b=[];for(var E=c,S;E!==null;){S=E;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,T!==null&&(N=ll(E,T),N!=null&&b.push(gl(E,N,S)))),w)break;E=E.return}0<b.length&&(f=new m(f,v,null,n,h),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==tp&&(v=n.relatedTarget||n.fromElement)&&(Jr(v)||v[Ti]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?Jr(v):null,v!==null&&(w=Is(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(b=zv,N="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=Wv,N="onPointerLeave",T="onPointerEnter",E="pointer"),w=m==null?f:Ys(m),S=v==null?f:Ys(v),f=new b(N,E+"leave",m,n,h),f.target=w,f.relatedTarget=S,N=null,Jr(h)===c&&(b=new b(T,E+"enter",v,n,h),b.target=S,b.relatedTarget=w,N=b),w=N,m&&v)t:{for(b=m,T=v,E=0,S=b;S;S=Fs(S))E++;for(S=0,N=T;N;N=Fs(N))S++;for(;0<E-S;)b=Fs(b),E--;for(;0<S-E;)T=Fs(T),S--;for(;E--;){if(b===T||T!==null&&b===T.alternate)break t;b=Fs(b),T=Fs(T)}b=null}else b=null;m!==null&&t_(d,f,m,b,!1),v!==null&&w!==null&&t_(d,w,v,b,!0)}}e:{if(f=c?Ys(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=R1;else if(Kv(f))if(kb)D=O1;else{D=D1;var O=N1}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=M1);if(D&&(D=D(t,c))){Sb(d,D,n,h);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Yf(f,"number",f.value)}switch(O=c?Ys(c):window,t){case"focusin":(Kv(O)||O.contentEditable==="true")&&(Gs=O,lp=c,za=null);break;case"focusout":za=lp=Gs=null;break;case"mousedown":cp=!0;break;case"contextmenu":case"mouseup":case"dragend":cp=!1,Jv(d,n,h);break;case"selectionchange":if(j1)break;case"keydown":case"keyup":Jv(d,n,h)}var x;if(Vg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ks?xb(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Tb&&n.locale!=="ko"&&(Ks||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ks&&(x=bb()):(Zi=h,Lg="value"in Zi?Zi.value:Zi.textContent,Ks=!0)),O=ju(c,_),0<O.length&&(_=new $v(_,t,null,n,h),d.push({event:_,listeners:O}),x?_.data=x:(x=Ib(n),x!==null&&(_.data=x)))),(x=S1?k1(t,n):C1(t,n))&&(c=ju(c,"onBeforeInput"),0<c.length&&(h=new $v("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=x))}Fb(d,e)})}function gl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ju(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ll(t,n),s!=null&&i.unshift(gl(t,s,r)),s=ll(t,e),s!=null&&i.push(gl(t,s,r))),t=t.return}return i}function Fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=ll(n,s),l!=null&&o.unshift(gl(n,l,a))):r||(l=ll(n,s),l!=null&&o.push(gl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var z1=/\r\n?/g,$1=/\u0000|\uFFFD/g;function n_(t){return(typeof t=="string"?t:""+t).replace(z1,`
`).replace($1,"")}function Dc(t,e,n){if(e=n_(e),n_(t)!==e&&n)throw Error($(425))}function Vu(){}var up=null,hp=null;function dp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fp=typeof setTimeout=="function"?setTimeout:void 0,W1=typeof clearTimeout=="function"?clearTimeout:void 0,i_=typeof Promise=="function"?Promise:void 0,H1=typeof queueMicrotask=="function"?queueMicrotask:typeof i_<"u"?function(t){return i_.resolve(null).then(t).catch(q1)}:fp;function q1(t){setTimeout(function(){throw t})}function sf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),hl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);hl(e)}function cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function r_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jo=Math.random().toString(36).slice(2),qn="__reactFiber$"+jo,ml="__reactProps$"+jo,Ti="__reactContainer$"+jo,pp="__reactEvents$"+jo,K1="__reactListeners$"+jo,G1="__reactHandles$"+jo;function Jr(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ti]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=r_(t);t!==null;){if(n=t[qn])return n;t=r_(t)}return e}t=n,n=t.parentNode}return null}function $l(t){return t=t[qn]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function jh(t){return t[ml]||null}var gp=[],Xs=-1;function Pr(t){return{current:t}}function Fe(t){0>Xs||(t.current=gp[Xs],gp[Xs]=null,Xs--)}function Ne(t,e){Xs++,gp[Xs]=t.current,t.current=e}var Er={},Rt=Pr(Er),Kt=Pr(!1),cs=Er;function vo(t,e){var n=t.type.contextTypes;if(!n)return Er;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Gt(t){return t=t.childContextTypes,t!=null}function Uu(){Fe(Kt),Fe(Rt)}function s_(t,e,n){if(Rt.current!==Er)throw Error($(168));Ne(Rt,e),Ne(Kt,n)}function Vb(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,NC(t)||"Unknown",r));return $e({},n,i)}function Bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,cs=Rt.current,Ne(Rt,t),Ne(Kt,Kt.current),!0}function o_(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=Vb(t,e,cs),i.__reactInternalMemoizedMergedChildContext=t,Fe(Kt),Fe(Rt),Ne(Rt,t)):Fe(Kt),Ne(Kt,n)}var fi=null,Vh=!1,of=!1;function Ub(t){fi===null?fi=[t]:fi.push(t)}function Q1(t){Vh=!0,Ub(t)}function Ar(){if(!of&&fi!==null){of=!0;var t=0,e=Pe;try{var n=fi;for(Pe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}fi=null,Vh=!1}catch(r){throw fi!==null&&(fi=fi.slice(t+1)),hb(Ng,Ar),r}finally{Pe=e,of=!1}}return null}var Js=[],Zs=0,zu=null,$u=0,dn=[],fn=0,us=null,gi=1,mi="";function qr(t,e){Js[Zs++]=$u,Js[Zs++]=zu,zu=t,$u=e}function Bb(t,e,n){dn[fn++]=gi,dn[fn++]=mi,dn[fn++]=us,us=t;var i=gi;t=mi;var r=32-Pn(i)-1;i&=~(1<<r),n+=1;var s=32-Pn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,gi=1<<32-Pn(e)+r|n<<r|i,mi=s+t}else gi=1<<s|n<<r|i,mi=t}function Bg(t){t.return!==null&&(qr(t,1),Bb(t,1,0))}function zg(t){for(;t===zu;)zu=Js[--Zs],Js[Zs]=null,$u=Js[--Zs],Js[Zs]=null;for(;t===us;)us=dn[--fn],dn[fn]=null,mi=dn[--fn],dn[fn]=null,gi=dn[--fn],dn[fn]=null}var nn=null,en=null,je=!1,kn=null;function zb(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function a_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,en=cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:gi,overflow:mi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,en=null,!0):!1;default:return!1}}function mp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yp(t){if(je){var e=en;if(e){var n=e;if(!a_(t,e)){if(mp(t))throw Error($(418));e=cr(n.nextSibling);var i=nn;e&&a_(t,e)?zb(i,n):(t.flags=t.flags&-4097|2,je=!1,nn=t)}}else{if(mp(t))throw Error($(418));t.flags=t.flags&-4097|2,je=!1,nn=t}}}function l_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function Mc(t){if(t!==nn)return!1;if(!je)return l_(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dp(t.type,t.memoizedProps)),e&&(e=en)){if(mp(t))throw $b(),Error($(418));for(;e;)zb(t,e),e=cr(e.nextSibling)}if(l_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){en=cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}en=null}}else en=nn?cr(t.stateNode.nextSibling):null;return!0}function $b(){for(var t=en;t;)t=cr(t.nextSibling)}function _o(){en=nn=null,je=!1}function $g(t){kn===null?kn=[t]:kn.push(t)}var Y1=Ai.ReactCurrentBatchConfig;function fa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Oc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c_(t){var e=t._init;return e(t._payload)}function Wb(t){function e(T,E){if(t){var S=T.deletions;S===null?(T.deletions=[E],T.flags|=16):S.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function i(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function r(T,E){return T=fr(T,E),T.index=0,T.sibling=null,T}function s(T,E,S){return T.index=S,t?(S=T.alternate,S!==null?(S=S.index,S<E?(T.flags|=2,E):S):(T.flags|=2,E)):(T.flags|=1048576,E)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,E,S,N){return E===null||E.tag!==6?(E=ff(S,T.mode,N),E.return=T,E):(E=r(E,S),E.return=T,E)}function l(T,E,S,N){var D=S.type;return D===qs?h(T,E,S.props.children,N,S.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Wi&&c_(D)===E.type)?(N=r(E,S.props),N.ref=fa(T,E,S),N.return=T,N):(N=yu(S.type,S.key,S.props,null,T.mode,N),N.ref=fa(T,E,S),N.return=T,N)}function c(T,E,S,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=pf(S,T.mode,N),E.return=T,E):(E=r(E,S.children||[]),E.return=T,E)}function h(T,E,S,N,D){return E===null||E.tag!==7?(E=os(S,T.mode,N,D),E.return=T,E):(E=r(E,S),E.return=T,E)}function d(T,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ff(""+E,T.mode,S),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case xc:return S=yu(E.type,E.key,E.props,null,T.mode,S),S.ref=fa(T,null,E),S.return=T,S;case Hs:return E=pf(E,T.mode,S),E.return=T,E;case Wi:var N=E._init;return d(T,N(E._payload),S)}if(Ia(E)||la(E))return E=os(E,T.mode,S,null),E.return=T,E;Oc(T,E)}return null}function f(T,E,S,N){var D=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:a(T,E,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xc:return S.key===D?l(T,E,S,N):null;case Hs:return S.key===D?c(T,E,S,N):null;case Wi:return D=S._init,f(T,E,D(S._payload),N)}if(Ia(S)||la(S))return D!==null?null:h(T,E,S,N,null);Oc(T,S)}return null}function m(T,E,S,N,D){if(typeof N=="string"&&N!==""||typeof N=="number")return T=T.get(S)||null,a(E,T,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case xc:return T=T.get(N.key===null?S:N.key)||null,l(E,T,N,D);case Hs:return T=T.get(N.key===null?S:N.key)||null,c(E,T,N,D);case Wi:var O=N._init;return m(T,E,S,O(N._payload),D)}if(Ia(N)||la(N))return T=T.get(S)||null,h(E,T,N,D,null);Oc(E,N)}return null}function v(T,E,S,N){for(var D=null,O=null,x=E,_=E=0,I=null;x!==null&&_<S.length;_++){x.index>_?(I=x,x=null):I=x.sibling;var C=f(T,x,S[_],N);if(C===null){x===null&&(x=I);break}t&&x&&C.alternate===null&&e(T,x),E=s(C,E,_),O===null?D=C:O.sibling=C,O=C,x=I}if(_===S.length)return n(T,x),je&&qr(T,_),D;if(x===null){for(;_<S.length;_++)x=d(T,S[_],N),x!==null&&(E=s(x,E,_),O===null?D=x:O.sibling=x,O=x);return je&&qr(T,_),D}for(x=i(T,x);_<S.length;_++)I=m(x,T,_,S[_],N),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?_:I.key),E=s(I,E,_),O===null?D=I:O.sibling=I,O=I);return t&&x.forEach(function(A){return e(T,A)}),je&&qr(T,_),D}function b(T,E,S,N){var D=la(S);if(typeof D!="function")throw Error($(150));if(S=D.call(S),S==null)throw Error($(151));for(var O=D=null,x=E,_=E=0,I=null,C=S.next();x!==null&&!C.done;_++,C=S.next()){x.index>_?(I=x,x=null):I=x.sibling;var A=f(T,x,C.value,N);if(A===null){x===null&&(x=I);break}t&&x&&A.alternate===null&&e(T,x),E=s(A,E,_),O===null?D=A:O.sibling=A,O=A,x=I}if(C.done)return n(T,x),je&&qr(T,_),D;if(x===null){for(;!C.done;_++,C=S.next())C=d(T,C.value,N),C!==null&&(E=s(C,E,_),O===null?D=C:O.sibling=C,O=C);return je&&qr(T,_),D}for(x=i(T,x);!C.done;_++,C=S.next())C=m(x,T,_,C.value,N),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?_:C.key),E=s(C,E,_),O===null?D=C:O.sibling=C,O=C);return t&&x.forEach(function(R){return e(T,R)}),je&&qr(T,_),D}function w(T,E,S,N){if(typeof S=="object"&&S!==null&&S.type===qs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xc:e:{for(var D=S.key,O=E;O!==null;){if(O.key===D){if(D=S.type,D===qs){if(O.tag===7){n(T,O.sibling),E=r(O,S.props.children),E.return=T,T=E;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Wi&&c_(D)===O.type){n(T,O.sibling),E=r(O,S.props),E.ref=fa(T,O,S),E.return=T,T=E;break e}n(T,O);break}else e(T,O);O=O.sibling}S.type===qs?(E=os(S.props.children,T.mode,N,S.key),E.return=T,T=E):(N=yu(S.type,S.key,S.props,null,T.mode,N),N.ref=fa(T,E,S),N.return=T,T=N)}return o(T);case Hs:e:{for(O=S.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(T,E.sibling),E=r(E,S.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else e(T,E);E=E.sibling}E=pf(S,T.mode,N),E.return=T,T=E}return o(T);case Wi:return O=S._init,w(T,E,O(S._payload),N)}if(Ia(S))return v(T,E,S,N);if(la(S))return b(T,E,S,N);Oc(T,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(T,E.sibling),E=r(E,S),E.return=T,T=E):(n(T,E),E=ff(S,T.mode,N),E.return=T,T=E),o(T)):n(T,E)}return w}var wo=Wb(!0),Hb=Wb(!1),Wu=Pr(null),Hu=null,eo=null,Wg=null;function Hg(){Wg=eo=Hu=null}function qg(t){var e=Wu.current;Fe(Wu),t._currentValue=e}function vp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function co(t,e){Hu=t,Wg=eo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(Wg!==t)if(t={context:t,memoizedValue:e,next:null},eo===null){if(Hu===null)throw Error($(308));eo=t,Hu.dependencies={lanes:0,firstContext:t}}else eo=eo.next=t;return e}var Zr=null;function Kg(t){Zr===null?Zr=[t]:Zr.push(t)}function qb(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Kg(e)):(n.next=r.next,r.next=n),e.interleaved=n,xi(t,i)}function xi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hi=!1;function Gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ee&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,xi(t,n)}return r=i.interleaved,r===null?(e.next=e,Kg(i)):(e.next=r.next,r.next=e),i.interleaved=e,xi(t,n)}function hu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Dg(t,n)}}function u_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qu(t,e,n,i){var r=t.updateQueue;Hi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,b=a;switch(f=e,m=n,b.tag){case 1:if(v=b.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=$e({},d,f);break e;case 2:Hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ds|=o,t.lanes=o,t.memoizedState=d}}function h_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error($(191,r));r.call(i)}}}var Wl={},Qn=Pr(Wl),yl=Pr(Wl),vl=Pr(Wl);function es(t){if(t===Wl)throw Error($(174));return t}function Qg(t,e){switch(Ne(vl,e),Ne(yl,t),Ne(Qn,Wl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jf(e,t)}Fe(Qn),Ne(Qn,e)}function Eo(){Fe(Qn),Fe(yl),Fe(vl)}function Gb(t){es(vl.current);var e=es(Qn.current),n=Jf(e,t.type);e!==n&&(Ne(yl,t),Ne(Qn,n))}function Yg(t){yl.current===t&&(Fe(Qn),Fe(yl))}var Ue=Pr(0);function Ku(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var af=[];function Xg(){for(var t=0;t<af.length;t++)af[t]._workInProgressVersionPrimary=null;af.length=0}var du=Ai.ReactCurrentDispatcher,lf=Ai.ReactCurrentBatchConfig,hs=0,Be=null,tt=null,lt=null,Gu=!1,$a=!1,_l=0,X1=0;function It(){throw Error($(321))}function Jg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nn(t[n],e[n]))return!1;return!0}function Zg(t,e,n,i,r,s){if(hs=s,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,du.current=t===null||t.memoizedState===null?tP:nP,t=n(i,r),$a){s=0;do{if($a=!1,_l=0,25<=s)throw Error($(301));s+=1,lt=tt=null,e.updateQueue=null,du.current=iP,t=n(i,r)}while($a)}if(du.current=Qu,e=tt!==null&&tt.next!==null,hs=0,lt=tt=Be=null,Gu=!1,e)throw Error($(300));return t}function em(){var t=_l!==0;return _l=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Be.memoizedState=lt=t:lt=lt.next=t,lt}function wn(){if(tt===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var e=lt===null?Be.memoizedState:lt.next;if(e!==null)lt=e,tt=t;else{if(t===null)throw Error($(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},lt===null?Be.memoizedState=lt=t:lt=lt.next=t}return lt}function wl(t,e){return typeof e=="function"?e(t):e}function cf(t){var e=wn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=tt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((hs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Be.lanes|=h,ds|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Nn(i,e.memoizedState)||(Ht=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Be.lanes|=s,ds|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uf(t){var e=wn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Nn(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Qb(){}function Yb(t,e){var n=Be,i=wn(),r=e(),s=!Nn(i.memoizedState,r);if(s&&(i.memoizedState=r,Ht=!0),i=i.queue,tm(Zb.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,El(9,Jb.bind(null,n,i,r,e),void 0,null),ut===null)throw Error($(349));hs&30||Xb(n,e,r)}return r}function Xb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Jb(t,e,n,i){e.value=n,e.getSnapshot=i,eT(e)&&tT(t)}function Zb(t,e,n){return n(function(){eT(e)&&tT(t)})}function eT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nn(t,n)}catch{return!0}}function tT(t){var e=xi(t,1);e!==null&&An(e,t,1,-1)}function d_(t){var e=Wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:t},e.queue=t,t=t.dispatch=eP.bind(null,Be,t),[e.memoizedState,t]}function El(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function nT(){return wn().memoizedState}function fu(t,e,n,i){var r=Wn();Be.flags|=t,r.memoizedState=El(1|e,n,void 0,i===void 0?null:i)}function Uh(t,e,n,i){var r=wn();i=i===void 0?null:i;var s=void 0;if(tt!==null){var o=tt.memoizedState;if(s=o.destroy,i!==null&&Jg(i,o.deps)){r.memoizedState=El(e,n,s,i);return}}Be.flags|=t,r.memoizedState=El(1|e,n,s,i)}function f_(t,e){return fu(8390656,8,t,e)}function tm(t,e){return Uh(2048,8,t,e)}function iT(t,e){return Uh(4,2,t,e)}function rT(t,e){return Uh(4,4,t,e)}function sT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oT(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4,4,sT.bind(null,e,t),n)}function nm(){}function aT(t,e){var n=wn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Jg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function lT(t,e){var n=wn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Jg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function cT(t,e,n){return hs&21?(Nn(n,e)||(n=pb(),Be.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function J1(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var i=lf.transition;lf.transition={};try{t(!1),e()}finally{Pe=n,lf.transition=i}}function uT(){return wn().memoizedState}function Z1(t,e,n){var i=dr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},hT(t))dT(e,n);else if(n=qb(t,e,n,i),n!==null){var r=jt();An(n,t,i,r),fT(n,e,i)}}function eP(t,e,n){var i=dr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(hT(t))dT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Nn(a,o)){var l=e.interleaved;l===null?(r.next=r,Kg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=qb(t,e,r,i),n!==null&&(r=jt(),An(n,t,i,r),fT(n,e,i))}}function hT(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function dT(t,e){$a=Gu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Dg(t,n)}}var Qu={readContext:_n,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},tP={readContext:_n,useCallback:function(t,e){return Wn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:f_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fu(4194308,4,sT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return fu(4,2,t,e)},useMemo:function(t,e){var n=Wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Wn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Z1.bind(null,Be,t),[i.memoizedState,t]},useRef:function(t){var e=Wn();return t={current:t},e.memoizedState=t},useState:d_,useDebugValue:nm,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=d_(!1),e=t[0];return t=J1.bind(null,t[1]),Wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Be,r=Wn();if(je){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ut===null)throw Error($(349));hs&30||Xb(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,f_(Zb.bind(null,i,s,t),[t]),i.flags|=2048,El(9,Jb.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Wn(),e=ut.identifierPrefix;if(je){var n=mi,i=gi;n=(i&~(1<<32-Pn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=_l++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=X1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nP={readContext:_n,useCallback:aT,useContext:_n,useEffect:tm,useImperativeHandle:oT,useInsertionEffect:iT,useLayoutEffect:rT,useMemo:lT,useReducer:cf,useRef:nT,useState:function(){return cf(wl)},useDebugValue:nm,useDeferredValue:function(t){var e=wn();return cT(e,tt.memoizedState,t)},useTransition:function(){var t=cf(wl)[0],e=wn().memoizedState;return[t,e]},useMutableSource:Qb,useSyncExternalStore:Yb,useId:uT,unstable_isNewReconciler:!1},iP={readContext:_n,useCallback:aT,useContext:_n,useEffect:tm,useImperativeHandle:oT,useInsertionEffect:iT,useLayoutEffect:rT,useMemo:lT,useReducer:uf,useRef:nT,useState:function(){return uf(wl)},useDebugValue:nm,useDeferredValue:function(t){var e=wn();return tt===null?e.memoizedState=t:cT(e,tt.memoizedState,t)},useTransition:function(){var t=uf(wl)[0],e=wn().memoizedState;return[t,e]},useMutableSource:Qb,useSyncExternalStore:Yb,useId:uT,unstable_isNewReconciler:!1};function In(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _p(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bh={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=jt(),r=dr(t),s=wi(i,r);s.payload=e,n!=null&&(s.callback=n),e=ur(t,s,r),e!==null&&(An(e,t,r,i),hu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=jt(),r=dr(t),s=wi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ur(t,s,r),e!==null&&(An(e,t,r,i),hu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),i=dr(t),r=wi(n,i);r.tag=2,e!=null&&(r.callback=e),e=ur(t,r,i),e!==null&&(An(e,t,i,n),hu(e,t,i))}};function p_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!fl(n,i)||!fl(r,s):!0}function pT(t,e,n){var i=!1,r=Er,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(r=Gt(e)?cs:Rt.current,i=e.contextTypes,s=(i=i!=null)?vo(t,r):Er),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function g_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Bh.enqueueReplaceState(e,e.state,null)}function wp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Gg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=_n(s):(s=Gt(e)?cs:Rt.current,r.context=vo(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_p(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Bh.enqueueReplaceState(r,r.state,null),qu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,e){try{var n="",i=e;do n+=RC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function hf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ep(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rP=typeof WeakMap=="function"?WeakMap:Map;function gT(t,e,n){n=wi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Xu||(Xu=!0,Rp=i),Ep(t,e)},n}function mT(t,e,n){n=wi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Ep(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ep(t,e),typeof i!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function m_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new rP;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=vP.bind(null,t,e,n),e.then(t,t))}function y_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wi(-1,1),e.tag=2,ur(n,e,1))),n.lanes|=1),t)}var sP=Ai.ReactCurrentOwner,Ht=!1;function Lt(t,e,n,i){e.child=t===null?Hb(e,null,n,i):wo(e,t.child,n,i)}function __(t,e,n,i,r){n=n.render;var s=e.ref;return co(e,r),i=Zg(t,e,n,i,s,r),n=em(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ii(t,e,r)):(je&&n&&Bg(e),e.flags|=1,Lt(t,e,i,r),e.child)}function w_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!um(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yT(t,e,s,i,r)):(t=yu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fl,n(o,i)&&t.ref===e.ref)return Ii(t,e,r)}return e.flags|=1,t=fr(s,i),t.ref=e.ref,t.return=e,e.child=t}function yT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(fl(s,i)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,Ii(t,e,r)}return bp(t,e,n,i,r)}function vT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(no,Zt),Zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(no,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ne(no,Zt),Zt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ne(no,Zt),Zt|=i;return Lt(t,e,r,n),e.child}function _T(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bp(t,e,n,i,r){var s=Gt(n)?cs:Rt.current;return s=vo(e,s),co(e,r),n=Zg(t,e,n,i,s,r),i=em(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ii(t,e,r)):(je&&i&&Bg(e),e.flags|=1,Lt(t,e,n,r),e.child)}function E_(t,e,n,i,r){if(Gt(n)){var s=!0;Bu(e)}else s=!1;if(co(e,r),e.stateNode===null)pu(t,e),pT(e,n,i),wp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Gt(n)?cs:Rt.current,c=vo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&g_(e,o,i,c),Hi=!1;var f=e.memoizedState;o.state=f,qu(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Kt.current||Hi?(typeof h=="function"&&(_p(e,n,h,i),l=e.memoizedState),(a=Hi||p_(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Kb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:In(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_n(l):(l=Gt(n)?cs:Rt.current,l=vo(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&g_(e,o,i,l),Hi=!1,f=e.memoizedState,o.state=f,qu(e,i,o,r);var v=e.memoizedState;a!==d||f!==v||Kt.current||Hi?(typeof m=="function"&&(_p(e,n,m,i),v=e.memoizedState),(c=Hi||p_(e,n,c,i,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Tp(t,e,n,i,s,r)}function Tp(t,e,n,i,r,s){_T(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&o_(e,n,!1),Ii(t,e,s);i=e.stateNode,sP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=wo(e,t.child,null,s),e.child=wo(e,null,a,s)):Lt(t,e,a,s),e.memoizedState=i.state,r&&o_(e,n,!0),e.child}function wT(t){var e=t.stateNode;e.pendingContext?s_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&s_(t,e.context,!1),Qg(t,e.containerInfo)}function b_(t,e,n,i,r){return _o(),$g(r),e.flags|=256,Lt(t,e,n,i),e.child}var xp={dehydrated:null,treeContext:null,retryLane:0};function Ip(t){return{baseLanes:t,cachePool:null,transitions:null}}function ET(t,e,n){var i=e.pendingProps,r=Ue.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ne(Ue,r&1),t===null)return yp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Wh(o,i,0,null),t=os(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ip(n),e.memoizedState=xp,t):im(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return oP(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=fr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=fr(a,s):(s=os(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Ip(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xp,i}return s=t.child,t=s.sibling,i=fr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function im(t,e){return e=Wh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lc(t,e,n,i){return i!==null&&$g(i),wo(e,t.child,null,n),t=im(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oP(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=hf(Error($(422))),Lc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Wh({mode:"visible",children:i.children},r,0,null),s=os(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&wo(e,t.child,null,o),e.child.memoizedState=Ip(o),e.memoizedState=xp,s);if(!(e.mode&1))return Lc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error($(419)),i=hf(s,i,void 0),Lc(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ht||a){if(i=ut,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,xi(t,r),An(i,t,r,-1))}return cm(),i=hf(Error($(421))),Lc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=_P.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,en=cr(r.nextSibling),nn=e,je=!0,kn=null,t!==null&&(dn[fn++]=gi,dn[fn++]=mi,dn[fn++]=us,gi=t.id,mi=t.overflow,us=e),e=im(e,i.children),e.flags|=4096,e)}function T_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),vp(t.return,e,n)}function df(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function bT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Lt(t,e,i.children,n),i=Ue.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&T_(t,n,e);else if(t.tag===19)T_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ne(Ue,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ku(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),df(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ku(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}df(e,!0,n,null,s);break;case"together":df(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aP(t,e,n){switch(e.tag){case 3:wT(e),_o();break;case 5:Gb(e);break;case 1:Gt(e.type)&&Bu(e);break;case 4:Qg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ne(Wu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ne(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?ET(t,e,n):(Ne(Ue,Ue.current&1),t=Ii(t,e,n),t!==null?t.sibling:null);Ne(Ue,Ue.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return bT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ne(Ue,Ue.current),i)break;return null;case 22:case 23:return e.lanes=0,vT(t,e,n)}return Ii(t,e,n)}var TT,Sp,xT,IT;TT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sp=function(){};xT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,es(Qn.current);var s=null;switch(n){case"input":r=Gf(t,r),i=Gf(t,i),s=[];break;case"select":r=$e({},r,{value:void 0}),i=$e({},i,{value:void 0}),s=[];break;case"textarea":r=Xf(t,r),i=Xf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Vu)}Zf(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ol.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ol.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};IT=function(t,e,n,i){n!==i&&(e.flags|=4)};function pa(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function lP(t,e,n){var i=e.pendingProps;switch(zg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Gt(e.type)&&Uu(),St(e),null;case 3:return i=e.stateNode,Eo(),Fe(Kt),Fe(Rt),Xg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Mc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(Mp(kn),kn=null))),Sp(t,e),St(e),null;case 5:Yg(e);var r=es(vl.current);if(n=e.type,t!==null&&e.stateNode!=null)xT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return St(e),null}if(t=es(Qn.current),Mc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[qn]=e,i[ml]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(r=0;r<ka.length;r++)Oe(ka[r],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Nv(i,s),Oe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",i);break;case"textarea":Mv(i,s),Oe("invalid",i)}Zf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Dc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Dc(i.textContent,a,t),r=["children",""+a]):ol.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",i)}switch(n){case"input":Ic(i),Dv(i,s,!0);break;case"textarea":Ic(i),Ov(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Vu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[qn]=e,t[ml]=i,TT(t,e,!1,!1),e.stateNode=t;e:{switch(o=ep(n,i),n){case"dialog":Oe("cancel",t),Oe("close",t),r=i;break;case"iframe":case"object":case"embed":Oe("load",t),r=i;break;case"video":case"audio":for(r=0;r<ka.length;r++)Oe(ka[r],t);r=i;break;case"source":Oe("error",t),r=i;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),r=i;break;case"details":Oe("toggle",t),r=i;break;case"input":Nv(t,i),r=Gf(t,i),Oe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=$e({},i,{value:void 0}),Oe("invalid",t);break;case"textarea":Mv(t,i),r=Xf(t,i),Oe("invalid",t);break;default:r=i}Zf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?nb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&eb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&al(t,l):typeof l=="number"&&al(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ol.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&kg(t,s,l,o))}switch(n){case"input":Ic(t),Dv(t,i,!1);break;case"textarea":Ic(t),Ov(t);break;case"option":i.value!=null&&t.setAttribute("value",""+wr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?so(t,!!i.multiple,s,!1):i.defaultValue!=null&&so(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Vu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)IT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=es(vl.current),es(Qn.current),Mc(e)){if(i=e.stateNode,n=e.memoizedProps,i[qn]=e,(s=i.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:Dc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[qn]=e,e.stateNode=i}return St(e),null;case 13:if(Fe(Ue),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&en!==null&&e.mode&1&&!(e.flags&128))$b(),_o(),e.flags|=98560,s=!1;else if(s=Mc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[qn]=e}else _o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else kn!==null&&(Mp(kn),kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?rt===0&&(rt=3):cm())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return Eo(),Sp(t,e),t===null&&pl(e.stateNode.containerInfo),St(e),null;case 10:return qg(e.type._context),St(e),null;case 17:return Gt(e.type)&&Uu(),St(e),null;case 19:if(Fe(Ue),s=e.memoizedState,s===null)return St(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)pa(s,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ku(t),o!==null){for(e.flags|=128,pa(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Ue,Ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qe()>To&&(e.flags|=128,i=!0,pa(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ku(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return St(e),null}else 2*Qe()-s.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,i=!0,pa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qe(),e.sibling=null,n=Ue.current,Ne(Ue,i?n&1|2:n&1),e):(St(e),null);case 22:case 23:return lm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function cP(t,e){switch(zg(e),e.tag){case 1:return Gt(e.type)&&Uu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Eo(),Fe(Kt),Fe(Rt),Xg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yg(e),null;case 13:if(Fe(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));_o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(Ue),null;case 4:return Eo(),null;case 10:return qg(e.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var Fc=!1,Pt=!1,uP=typeof WeakSet=="function"?WeakSet:Set,J=null;function to(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ke(t,e,i)}else n.current=null}function kp(t,e,n){try{n()}catch(i){Ke(t,e,i)}}var x_=!1;function hP(t,e){if(up=Lu,t=Ab(),Ug(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hp={focusedElem:t,selectionRange:n},Lu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,w=v.memoizedState,T=e.stateNode,E=T.getSnapshotBeforeUpdate(e.elementType===e.type?b:In(e.type,b),w);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(N){Ke(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return v=x_,x_=!1,v}function Wa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&kp(e,n,s)}r=r.next}while(r!==i)}}function zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Cp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ST(t){var e=t.alternate;e!==null&&(t.alternate=null,ST(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[ml],delete e[pp],delete e[K1],delete e[G1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kT(t){return t.tag===5||t.tag===3||t.tag===4}function I_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vu));else if(i!==4&&(t=t.child,t!==null))for(Pp(t,e,n),t=t.sibling;t!==null;)Pp(t,e,n),t=t.sibling}function Ap(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ap(t,e,n),t=t.sibling;t!==null;)Ap(t,e,n),t=t.sibling}var gt=null,Sn=!1;function ji(t,e,n){for(n=n.child;n!==null;)CT(t,e,n),n=n.sibling}function CT(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Mh,n)}catch{}switch(n.tag){case 5:Pt||to(n,e);case 6:var i=gt,r=Sn;gt=null,ji(t,e,n),gt=i,Sn=r,gt!==null&&(Sn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Sn?(t=gt,n=n.stateNode,t.nodeType===8?sf(t.parentNode,n):t.nodeType===1&&sf(t,n),hl(t)):sf(gt,n.stateNode));break;case 4:i=gt,r=Sn,gt=n.stateNode.containerInfo,Sn=!0,ji(t,e,n),gt=i,Sn=r;break;case 0:case 11:case 14:case 15:if(!Pt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kp(n,e,o),r=r.next}while(r!==i)}ji(t,e,n);break;case 1:if(!Pt&&(to(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ke(n,e,a)}ji(t,e,n);break;case 21:ji(t,e,n);break;case 22:n.mode&1?(Pt=(i=Pt)||n.memoizedState!==null,ji(t,e,n),Pt=i):ji(t,e,n);break;default:ji(t,e,n)}}function S_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uP),e.forEach(function(i){var r=wP.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Sn=!1;break e;case 3:gt=a.stateNode.containerInfo,Sn=!0;break e;case 4:gt=a.stateNode.containerInfo,Sn=!0;break e}a=a.return}if(gt===null)throw Error($(160));CT(s,o,r),gt=null,Sn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ke(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PT(e,t),e=e.sibling}function PT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),Un(t),i&4){try{Wa(3,t,t.return),zh(3,t)}catch(b){Ke(t,t.return,b)}try{Wa(5,t,t.return)}catch(b){Ke(t,t.return,b)}}break;case 1:xn(e,t),Un(t),i&512&&n!==null&&to(n,n.return);break;case 5:if(xn(e,t),Un(t),i&512&&n!==null&&to(n,n.return),t.flags&32){var r=t.stateNode;try{al(r,"")}catch(b){Ke(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&XE(r,s),ep(a,o);var c=ep(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?nb(r,d):h==="dangerouslySetInnerHTML"?eb(r,d):h==="children"?al(r,d):kg(r,h,d,c)}switch(a){case"input":Qf(r,s);break;case"textarea":JE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?so(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?so(r,!!s.multiple,s.defaultValue,!0):so(r,!!s.multiple,s.multiple?[]:"",!1))}r[ml]=s}catch(b){Ke(t,t.return,b)}}break;case 6:if(xn(e,t),Un(t),i&4){if(t.stateNode===null)throw Error($(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(b){Ke(t,t.return,b)}}break;case 3:if(xn(e,t),Un(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{hl(e.containerInfo)}catch(b){Ke(t,t.return,b)}break;case 4:xn(e,t),Un(t);break;case 13:xn(e,t),Un(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(om=Qe())),i&4&&S_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(c=Pt)||h,xn(e,t),Pt=c):xn(e,t),Un(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(J=t,h=t.child;h!==null;){for(d=J=h;J!==null;){switch(f=J,m=f.child,f.tag){case 0:case 11:case 14:case 15:Wa(4,f,f.return);break;case 1:to(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){Ke(i,n,b)}}break;case 5:to(f,f.return);break;case 22:if(f.memoizedState!==null){C_(d);continue}}m!==null?(m.return=f,J=m):C_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=tb("display",o))}catch(b){Ke(t,t.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){Ke(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xn(e,t),Un(t),i&4&&S_(t);break;case 21:break;default:xn(e,t),Un(t)}}function Un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kT(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(al(r,""),i.flags&=-33);var s=I_(t);Ap(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=I_(t);Pp(t,a,o);break;default:throw Error($(161))}}catch(l){Ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dP(t,e,n){J=t,AT(t)}function AT(t,e,n){for(var i=(t.mode&1)!==0;J!==null;){var r=J,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Fc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Pt;a=Fc;var c=Pt;if(Fc=o,(Pt=l)&&!c)for(J=r;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?P_(r):l!==null?(l.return=o,J=l):P_(r);for(;s!==null;)J=s,AT(s),s=s.sibling;J=r,Fc=a,Pt=c}k_(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,J=s):k_(t)}}function k_(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||zh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Pt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&h_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}h_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&hl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Pt||e.flags&512&&Cp(e)}catch(f){Ke(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function C_(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function P_(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zh(4,e)}catch(l){Ke(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ke(e,r,l)}}var s=e.return;try{Cp(e)}catch(l){Ke(e,s,l)}break;case 5:var o=e.return;try{Cp(e)}catch(l){Ke(e,o,l)}}}catch(l){Ke(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var fP=Math.ceil,Yu=Ai.ReactCurrentDispatcher,rm=Ai.ReactCurrentOwner,mn=Ai.ReactCurrentBatchConfig,Ee=0,ut=null,Ze=null,_t=0,Zt=0,no=Pr(0),rt=0,bl=null,ds=0,$h=0,sm=0,Ha=null,$t=null,om=0,To=1/0,di=null,Xu=!1,Rp=null,hr=null,jc=!1,er=null,Ju=0,qa=0,Np=null,gu=-1,mu=0;function jt(){return Ee&6?Qe():gu!==-1?gu:gu=Qe()}function dr(t){return t.mode&1?Ee&2&&_t!==0?_t&-_t:Y1.transition!==null?(mu===0&&(mu=pb()),mu):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:Eb(t.type)),t):1}function An(t,e,n,i){if(50<qa)throw qa=0,Np=null,Error($(185));Bl(t,n,i),(!(Ee&2)||t!==ut)&&(t===ut&&(!(Ee&2)&&($h|=n),rt===4&&Ki(t,_t)),Qt(t,i),n===1&&Ee===0&&!(e.mode&1)&&(To=Qe()+500,Vh&&Ar()))}function Qt(t,e){var n=t.callbackNode;YC(t,e);var i=Ou(t,t===ut?_t:0);if(i===0)n!==null&&jv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&jv(n),e===1)t.tag===0?Q1(A_.bind(null,t)):Ub(A_.bind(null,t)),H1(function(){!(Ee&6)&&Ar()}),n=null;else{switch(gb(i)){case 1:n=Ng;break;case 4:n=db;break;case 16:n=Mu;break;case 536870912:n=fb;break;default:n=Mu}n=jT(n,RT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RT(t,e){if(gu=-1,mu=0,Ee&6)throw Error($(327));var n=t.callbackNode;if(uo()&&t.callbackNode!==n)return null;var i=Ou(t,t===ut?_t:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Zu(t,i);else{e=i;var r=Ee;Ee|=2;var s=DT();(ut!==t||_t!==e)&&(di=null,To=Qe()+500,ss(t,e));do try{mP();break}catch(a){NT(t,a)}while(!0);Hg(),Yu.current=s,Ee=r,Ze!==null?e=0:(ut=null,_t=0,e=rt)}if(e!==0){if(e===2&&(r=sp(t),r!==0&&(i=r,e=Dp(t,r))),e===1)throw n=bl,ss(t,0),Ki(t,i),Qt(t,Qe()),n;if(e===6)Ki(t,i);else{if(r=t.current.alternate,!(i&30)&&!pP(r)&&(e=Zu(t,i),e===2&&(s=sp(t),s!==0&&(i=s,e=Dp(t,s))),e===1))throw n=bl,ss(t,0),Ki(t,i),Qt(t,Qe()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:Kr(t,$t,di);break;case 3:if(Ki(t,i),(i&130023424)===i&&(e=om+500-Qe(),10<e)){if(Ou(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=fp(Kr.bind(null,t,$t,di),e);break}Kr(t,$t,di);break;case 4:if(Ki(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Pn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Qe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fP(i/1960))-i,10<i){t.timeoutHandle=fp(Kr.bind(null,t,$t,di),i);break}Kr(t,$t,di);break;case 5:Kr(t,$t,di);break;default:throw Error($(329))}}}return Qt(t,Qe()),t.callbackNode===n?RT.bind(null,t):null}function Dp(t,e){var n=Ha;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=Zu(t,e),t!==2&&(e=$t,$t=n,e!==null&&Mp(e)),t}function Mp(t){$t===null?$t=t:$t.push.apply($t,t)}function pP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Nn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ki(t,e){for(e&=~sm,e&=~$h,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pn(e),i=1<<n;t[n]=-1,e&=~i}}function A_(t){if(Ee&6)throw Error($(327));uo();var e=Ou(t,0);if(!(e&1))return Qt(t,Qe()),null;var n=Zu(t,e);if(t.tag!==0&&n===2){var i=sp(t);i!==0&&(e=i,n=Dp(t,i))}if(n===1)throw n=bl,ss(t,0),Ki(t,e),Qt(t,Qe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kr(t,$t,di),Qt(t,Qe()),null}function am(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(To=Qe()+500,Vh&&Ar())}}function fs(t){er!==null&&er.tag===0&&!(Ee&6)&&uo();var e=Ee;Ee|=1;var n=mn.transition,i=Pe;try{if(mn.transition=null,Pe=1,t)return t()}finally{Pe=i,mn.transition=n,Ee=e,!(Ee&6)&&Ar()}}function lm(){Zt=no.current,Fe(no)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,W1(n)),Ze!==null)for(n=Ze.return;n!==null;){var i=n;switch(zg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Uu();break;case 3:Eo(),Fe(Kt),Fe(Rt),Xg();break;case 5:Yg(i);break;case 4:Eo();break;case 13:Fe(Ue);break;case 19:Fe(Ue);break;case 10:qg(i.type._context);break;case 22:case 23:lm()}n=n.return}if(ut=t,Ze=t=fr(t.current,null),_t=Zt=e,rt=0,bl=null,sm=$h=ds=0,$t=Ha=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Zr=null}return t}function NT(t,e){do{var n=Ze;try{if(Hg(),du.current=Qu,Gu){for(var i=Be.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Gu=!1}if(hs=0,lt=tt=Be=null,$a=!1,_l=0,rm.current=null,n===null||n.return===null){rt=1,bl=e,Ze=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=y_(o);if(m!==null){m.flags&=-257,v_(m,o,a,s,e),m.mode&1&&m_(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var b=new Set;b.add(l),e.updateQueue=b}else v.add(l);break e}else{if(!(e&1)){m_(s,c,e),cm();break e}l=Error($(426))}}else if(je&&a.mode&1){var w=y_(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),v_(w,o,a,s,e),$g(bo(l,a));break e}}s=l=bo(l,a),rt!==4&&(rt=2),Ha===null?Ha=[s]:Ha.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=gT(s,l,e);u_(s,T);break e;case 1:a=l;var E=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(hr===null||!hr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=mT(s,a,e);u_(s,N);break e}}s=s.return}while(s!==null)}OT(n)}catch(D){e=D,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function DT(){var t=Yu.current;return Yu.current=Qu,t===null?Qu:t}function cm(){(rt===0||rt===3||rt===2)&&(rt=4),ut===null||!(ds&268435455)&&!($h&268435455)||Ki(ut,_t)}function Zu(t,e){var n=Ee;Ee|=2;var i=DT();(ut!==t||_t!==e)&&(di=null,ss(t,e));do try{gP();break}catch(r){NT(t,r)}while(!0);if(Hg(),Ee=n,Yu.current=i,Ze!==null)throw Error($(261));return ut=null,_t=0,rt}function gP(){for(;Ze!==null;)MT(Ze)}function mP(){for(;Ze!==null&&!BC();)MT(Ze)}function MT(t){var e=FT(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?OT(t):Ze=e,rm.current=null}function OT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cP(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Ze=null;return}}else if(n=lP(n,e,Zt),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);rt===0&&(rt=5)}function Kr(t,e,n){var i=Pe,r=mn.transition;try{mn.transition=null,Pe=1,yP(t,e,n,i)}finally{mn.transition=r,Pe=i}return null}function yP(t,e,n,i){do uo();while(er!==null);if(Ee&6)throw Error($(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(XC(t,s),t===ut&&(Ze=ut=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jc||(jc=!0,jT(Mu,function(){return uo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=Pe;Pe=1;var a=Ee;Ee|=4,rm.current=null,hP(t,n),PT(n,t),F1(hp),Lu=!!up,hp=up=null,t.current=n,dP(n),zC(),Ee=a,Pe=o,mn.transition=s}else t.current=n;if(jc&&(jc=!1,er=t,Ju=r),s=t.pendingLanes,s===0&&(hr=null),HC(n.stateNode),Qt(t,Qe()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Xu)throw Xu=!1,t=Rp,Rp=null,t;return Ju&1&&t.tag!==0&&uo(),s=t.pendingLanes,s&1?t===Np?qa++:(qa=0,Np=t):qa=0,Ar(),null}function uo(){if(er!==null){var t=gb(Ju),e=mn.transition,n=Pe;try{if(mn.transition=null,Pe=16>t?16:t,er===null)var i=!1;else{if(t=er,er=null,Ju=0,Ee&6)throw Error($(331));var r=Ee;for(Ee|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:Wa(8,h,s)}var d=h.child;if(d!==null)d.return=h,J=d;else for(;J!==null;){h=J;var f=h.sibling,m=h.return;if(ST(h),h===c){J=null;break}if(f!==null){f.return=m,J=f;break}J=m}}}var v=s.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wa(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,J=T;break e}J=s.return}}var E=t.current;for(J=E;J!==null;){o=J;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,J=S;else e:for(o=E;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zh(9,a)}}catch(D){Ke(a,a.return,D)}if(a===o){J=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,J=N;break e}J=a.return}}if(Ee=r,Ar(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Mh,t)}catch{}i=!0}return i}finally{Pe=n,mn.transition=e}}return!1}function R_(t,e,n){e=bo(n,e),e=gT(t,e,1),t=ur(t,e,1),e=jt(),t!==null&&(Bl(t,1,e),Qt(t,e))}function Ke(t,e,n){if(t.tag===3)R_(t,t,n);else for(;e!==null;){if(e.tag===3){R_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(hr===null||!hr.has(i))){t=bo(n,t),t=mT(e,t,1),e=ur(e,t,1),t=jt(),e!==null&&(Bl(e,1,t),Qt(e,t));break}}e=e.return}}function vP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,ut===t&&(_t&n)===n&&(rt===4||rt===3&&(_t&130023424)===_t&&500>Qe()-om?ss(t,0):sm|=n),Qt(t,e)}function LT(t,e){e===0&&(t.mode&1?(e=Cc,Cc<<=1,!(Cc&130023424)&&(Cc=4194304)):e=1);var n=jt();t=xi(t,e),t!==null&&(Bl(t,e,n),Qt(t,n))}function _P(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),LT(t,n)}function wP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),LT(t,n)}var FT;FT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,aP(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,je&&e.flags&1048576&&Bb(e,$u,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;pu(t,e),t=e.pendingProps;var r=vo(e,Rt.current);co(e,n),r=Zg(null,e,i,t,r,n);var s=em();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(i)?(s=!0,Bu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Gg(e),r.updater=Bh,e.stateNode=r,r._reactInternals=e,wp(e,i,t,n),e=Tp(null,e,i,!0,s,n)):(e.tag=0,je&&s&&Bg(e),Lt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(pu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=bP(i),t=In(i,t),r){case 0:e=bp(null,e,i,t,n);break e;case 1:e=E_(null,e,i,t,n);break e;case 11:e=__(null,e,i,t,n);break e;case 14:e=w_(null,e,i,In(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:In(i,r),bp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:In(i,r),E_(t,e,i,r,n);case 3:e:{if(wT(e),t===null)throw Error($(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Kb(t,e),qu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=bo(Error($(423)),e),e=b_(t,e,i,n,r);break e}else if(i!==r){r=bo(Error($(424)),e),e=b_(t,e,i,n,r);break e}else for(en=cr(e.stateNode.containerInfo.firstChild),nn=e,je=!0,kn=null,n=Hb(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_o(),i===r){e=Ii(t,e,n);break e}Lt(t,e,i,n)}e=e.child}return e;case 5:return Gb(e),t===null&&yp(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,dp(i,r)?o=null:s!==null&&dp(i,s)&&(e.flags|=32),_T(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&yp(e),null;case 13:return ET(t,e,n);case 4:return Qg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=wo(e,null,i,n):Lt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:In(i,r),__(t,e,i,r,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ne(Wu,i._currentValue),i._currentValue=o,s!==null)if(Nn(s.value,o)){if(s.children===r.children&&!Kt.current){e=Ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=wi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),vp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),vp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,co(e,n),r=_n(r),i=i(r),e.flags|=1,Lt(t,e,i,n),e.child;case 14:return i=e.type,r=In(i,e.pendingProps),r=In(i.type,r),w_(t,e,i,r,n);case 15:return yT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:In(i,r),pu(t,e),e.tag=1,Gt(i)?(t=!0,Bu(e)):t=!1,co(e,n),pT(e,i,r),wp(e,i,r,n),Tp(null,e,i,!0,t,n);case 19:return bT(t,e,n);case 22:return vT(t,e,n)}throw Error($(156,e.tag))};function jT(t,e){return hb(t,e)}function EP(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,i){return new EP(t,e,n,i)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bP(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pg)return 11;if(t===Ag)return 14}return 2}function fr(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")um(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qs:return os(n.children,r,s,e);case Cg:o=8,r|=8;break;case Wf:return t=pn(12,n,e,r|2),t.elementType=Wf,t.lanes=s,t;case Hf:return t=pn(13,n,e,r),t.elementType=Hf,t.lanes=s,t;case qf:return t=pn(19,n,e,r),t.elementType=qf,t.lanes=s,t;case GE:return Wh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qE:o=10;break e;case KE:o=9;break e;case Pg:o=11;break e;case Ag:o=14;break e;case Wi:o=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=pn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function os(t,e,n,i){return t=pn(7,t,i,e),t.lanes=n,t}function Wh(t,e,n,i){return t=pn(22,t,i,e),t.elementType=GE,t.lanes=n,t.stateNode={isHidden:!1},t}function ff(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function pf(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TP(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kd(0),this.expirationTimes=Kd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function hm(t,e,n,i,r,s,o,a,l){return t=new TP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gg(s),t}function xP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function VT(t){if(!t)return Er;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Gt(n))return Vb(t,n,e)}return e}function UT(t,e,n,i,r,s,o,a,l){return t=hm(n,i,!0,t,r,s,o,a,l),t.context=VT(null),n=t.current,i=jt(),r=dr(n),s=wi(i,r),s.callback=e??null,ur(n,s,r),t.current.lanes=r,Bl(t,r,i),Qt(t,i),t}function Hh(t,e,n,i){var r=e.current,s=jt(),o=dr(r);return n=VT(n),e.context===null?e.context=n:e.pendingContext=n,e=wi(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ur(r,e,o),t!==null&&(An(t,r,o,s),hu(t,r,o)),o}function eh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dm(t,e){N_(t,e),(t=t.alternate)&&N_(t,e)}function IP(){return null}var BT=typeof reportError=="function"?reportError:function(t){console.error(t)};function fm(t){this._internalRoot=t}qh.prototype.render=fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Hh(t,e,null,null)};qh.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Hh(null,t,null,null)}),e[Ti]=null}};function qh(t){this._internalRoot=t}qh.prototype.unstable_scheduleHydration=function(t){if(t){var e=vb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qi.length&&e!==0&&e<qi[n].priority;n++);qi.splice(n,0,t),n===0&&wb(t)}};function pm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function D_(){}function SP(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=eh(o);s.call(c)}}var o=UT(e,i,t,0,null,!1,!1,"",D_);return t._reactRootContainer=o,t[Ti]=o.current,pl(t.nodeType===8?t.parentNode:t),fs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=eh(l);a.call(c)}}var l=hm(t,0,!1,null,null,!1,!1,"",D_);return t._reactRootContainer=l,t[Ti]=l.current,pl(t.nodeType===8?t.parentNode:t),fs(function(){Hh(e,l,n,i)}),l}function Gh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=eh(o);a.call(l)}}Hh(e,o,t,r)}else o=SP(n,e,t,r,i);return eh(o)}mb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sa(e.pendingLanes);n!==0&&(Dg(e,n|1),Qt(e,Qe()),!(Ee&6)&&(To=Qe()+500,Ar()))}break;case 13:fs(function(){var i=xi(t,1);if(i!==null){var r=jt();An(i,t,1,r)}}),dm(t,1)}};Mg=function(t){if(t.tag===13){var e=xi(t,134217728);if(e!==null){var n=jt();An(e,t,134217728,n)}dm(t,134217728)}};yb=function(t){if(t.tag===13){var e=dr(t),n=xi(t,e);if(n!==null){var i=jt();An(n,t,e,i)}dm(t,e)}};vb=function(){return Pe};_b=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};np=function(t,e,n){switch(e){case"input":if(Qf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=jh(i);if(!r)throw Error($(90));YE(i),Qf(i,r)}}}break;case"textarea":JE(t,n);break;case"select":e=n.value,e!=null&&so(t,!!n.multiple,e,!1)}};sb=am;ob=fs;var kP={usingClientEntryPoint:!1,Events:[$l,Ys,jh,ib,rb,am]},ga={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CP={bundleType:ga.bundleType,version:ga.version,rendererPackageName:ga.rendererPackageName,rendererConfig:ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cb(t),t===null?null:t.stateNode},findFiberByHostInstance:ga.findFiberByHostInstance||IP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{Mh=Vc.inject(CP),Gn=Vc}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kP;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pm(e))throw Error($(200));return xP(t,e,null,n)};on.createRoot=function(t,e){if(!pm(t))throw Error($(299));var n=!1,i="",r=BT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=hm(t,1,!1,null,null,n,!1,i,r),t[Ti]=e.current,pl(t.nodeType===8?t.parentNode:t),new fm(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=cb(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return fs(t)};on.hydrate=function(t,e,n){if(!Kh(e))throw Error($(200));return Gh(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!pm(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=BT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=UT(e,null,t,1,n??null,r,!1,s,o),t[Ti]=e.current,pl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new qh(e)};on.render=function(t,e,n){if(!Kh(e))throw Error($(200));return Gh(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Kh(t))throw Error($(40));return t._reactRootContainer?(fs(function(){Gh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};on.unstable_batchedUpdates=am;on.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Kh(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Gh(t,e,n,!1,i)};on.version="18.3.1-next-f1338f8080-20240426";function zT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zT)}catch(t){console.error(t)}}zT(),zE.exports=on;var PP=zE.exports,M_=PP;zf.createRoot=M_.createRoot,zf.hydrateRoot=M_.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tl(){return Tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tl.apply(this,arguments)}var tr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(tr||(tr={}));const O_="popstate";function AP(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Op("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:th(r)}return NP(e,n,null,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RP(){return Math.random().toString(36).substr(2,8)}function L_(t,e){return{usr:t.state,key:t.key,idx:e}}function Op(t,e,n,i){return n===void 0&&(n=null),Tl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vo(e):e,{state:n,key:e&&e.key||i||RP()})}function th(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function NP(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=tr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Tl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=tr.Pop;let w=h(),T=w==null?null:w-c;c=w,l&&l({action:a,location:b.location,delta:T})}function f(w,T){a=tr.Push;let E=Op(b.location,w,T);c=h()+1;let S=L_(E,c),N=b.createHref(E);try{o.pushState(S,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(N)}s&&l&&l({action:a,location:b.location,delta:1})}function m(w,T){a=tr.Replace;let E=Op(b.location,w,T);c=h();let S=L_(E,c),N=b.createHref(E);o.replaceState(S,"",N),s&&l&&l({action:a,location:b.location,delta:0})}function v(w){let T=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof w=="string"?w:th(w);return E=E.replace(/ $/,"%20"),ze(T,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,T)}let b={get action(){return a},get location(){return t(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(O_,d),l=w,()=>{r.removeEventListener(O_,d),l=null}},createHref(w){return e(r,w)},createURL:v,encodeLocation(w){let T=v(w);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:m,go(w){return o.go(w)}};return b}var F_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(F_||(F_={}));function DP(t,e,n){return n===void 0&&(n="/"),MP(t,e,n)}function MP(t,e,n,i){let r=typeof e=="string"?Vo(e):e,s=xo(r.pathname||"/",n);if(s==null)return null;let o=$T(t);OP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=qP(s);a=WP(o[l],c)}return a}function $T(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ze(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=pr([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(ze(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),$T(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:zP(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of WT(s.path))r(s,o,l)}),e}function WT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=WT(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function OP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$P(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const LP=/^:[\w-]+$/,FP=3,jP=2,VP=1,UP=10,BP=-2,j_=t=>t==="*";function zP(t,e){let n=t.split("/"),i=n.length;return n.some(j_)&&(i+=BP),e&&(i+=jP),n.filter(r=>!j_(r)).reduce((r,s)=>r+(LP.test(s)?FP:s===""?VP:UP),i)}function $P(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function WP(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Lp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:pr([s,d.pathname]),pathnameBase:XP(pr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=pr([s,d.pathnameBase]))}return o}function Lp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=HP(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let b=a[d]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const v=a[d];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function HP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function qP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const KP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GP=t=>KP.test(t);function QP(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Vo(t):t,s;if(n)if(GP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),gm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=V_(n.substring(1),"/"):s=V_(n,e)}else s=e;return{pathname:s,search:JP(i),hash:ZP(r)}}function V_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function gf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mm(t,e){let n=YP(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function ym(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Vo(t):(r=Tl({},t),ze(!r.pathname||!r.pathname.includes("?"),gf("?","pathname","search",r)),ze(!r.pathname||!r.pathname.includes("#"),gf("#","pathname","hash",r)),ze(!r.search||!r.search.includes("#"),gf("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=QP(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const pr=t=>t.join("/").replace(/\/\/+/g,"/"),XP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function eA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const HT=["post","put","patch","delete"];new Set(HT);const tA=["get",...HT];new Set(tA);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xl.apply(this,arguments)}const Qh=M.createContext(null),qT=M.createContext(null),ii=M.createContext(null),Yh=M.createContext(null),Rr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),KT=M.createContext(null);function nA(t,e){let{relative:n}=e===void 0?{}:e;Uo()||ze(!1);let{basename:i,navigator:r}=M.useContext(ii),{hash:s,pathname:o,search:a}=Xh(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:pr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Uo(){return M.useContext(Yh)!=null}function Nr(){return Uo()||ze(!1),M.useContext(Yh).location}function GT(t){M.useContext(ii).static||M.useLayoutEffect(t)}function Bo(){let{isDataRoute:t}=M.useContext(Rr);return t?gA():iA()}function iA(){Uo()||ze(!1);let t=M.useContext(Qh),{basename:e,future:n,navigator:i}=M.useContext(ii),{matches:r}=M.useContext(Rr),{pathname:s}=Nr(),o=JSON.stringify(mm(r,n.v7_relativeSplatPath)),a=M.useRef(!1);return GT(()=>{a.current=!0}),M.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=ym(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:pr([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function Xh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=M.useContext(ii),{matches:r}=M.useContext(Rr),{pathname:s}=Nr(),o=JSON.stringify(mm(r,i.v7_relativeSplatPath));return M.useMemo(()=>ym(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function rA(t,e){return sA(t,e)}function sA(t,e,n,i){Uo()||ze(!1);let{navigator:r}=M.useContext(ii),{matches:s}=M.useContext(Rr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Nr(),h;if(e){var d;let w=typeof e=="string"?Vo(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||ze(!1),h=w}else h=c;let f=h.pathname||"/",m=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=DP(t,{pathname:m}),b=uA(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:pr([l,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:pr([l,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,i);return e&&b?M.createElement(Yh.Provider,{value:{location:xl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:tr.Pop}},b):b}function oA(){let t=pA(),e=eA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:r},n):null,null)}const aA=M.createElement(oA,null);class lA extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Rr.Provider,{value:this.props.routeContext},M.createElement(KT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cA(t){let{routeContext:e,match:n,children:i}=t,r=M.useContext(Qh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Rr.Provider,{value:e},i)}function uA(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||ze(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:m}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,v=!1,b=null,w=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,b=d.route.errorElement||aA,l&&(c<0&&f===0?(mA("route-fallback"),v=!0,w=null):c===f&&(v=!0,w=d.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,f+1)),E=()=>{let S;return m?S=b:v?S=w:d.route.Component?S=M.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,M.createElement(cA,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(lA,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:E(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):E()},null)}var QT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(QT||{}),YT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(YT||{});function hA(t){let e=M.useContext(Qh);return e||ze(!1),e}function dA(t){let e=M.useContext(qT);return e||ze(!1),e}function fA(t){let e=M.useContext(Rr);return e||ze(!1),e}function XT(t){let e=fA(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function pA(){var t;let e=M.useContext(KT),n=dA(),i=XT();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function gA(){let{router:t}=hA(QT.UseNavigateStable),e=XT(YT.UseNavigateStable),n=M.useRef(!1);return GT(()=>{n.current=!0}),M.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,xl({fromRouteId:e},s)))},[t,e])}const U_={};function mA(t,e,n){U_[t]||(U_[t]=!0)}function yA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Fp(t){let{to:e,replace:n,state:i,relative:r}=t;Uo()||ze(!1);let{future:s,static:o}=M.useContext(ii),{matches:a}=M.useContext(Rr),{pathname:l}=Nr(),c=Bo(),h=ym(e,mm(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return M.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function zn(t){ze(!1)}function vA(t){let{basename:e="/",children:n=null,location:i,navigationType:r=tr.Pop,navigator:s,static:o=!1,future:a}=t;Uo()&&ze(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:o,future:xl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Vo(i));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:v="default"}=i,b=M.useMemo(()=>{let w=xo(h,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:m,key:v},navigationType:r}},[l,h,d,f,m,v,r]);return b==null?null:M.createElement(ii.Provider,{value:c},M.createElement(Yh.Provider,{children:n,value:b}))}function _A(t){let{children:e,location:n}=t;return rA(jp(e),n)}new Promise(()=>{});function jp(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(i,r)=>{if(!M.isValidElement(i))return;let s=[...e,r];if(i.type===M.Fragment){n.push.apply(n,jp(i.props.children,s));return}i.type!==zn&&ze(!1),!i.props.index||!i.props.children||ze(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=jp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nh(){return nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nh.apply(this,arguments)}function JT(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function wA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EA(t,e){return t.button===0&&(!e||e==="_self")&&!wA(t)}const bA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],xA="6";try{window.__reactRouterVersion=xA}catch{}const IA=M.createContext({isTransitioning:!1}),SA="startTransition",B_=vC[SA];function kA(t){let{basename:e,children:n,future:i,window:r}=t,s=M.useRef();s.current==null&&(s.current=AP({window:r,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=M.useCallback(d=>{c&&B_?B_(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.useEffect(()=>yA(i),[i]),M.createElement(vA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const CA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Il=M.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=JT(e,bA),{basename:m}=M.useContext(ii),v,b=!1;if(typeof c=="string"&&PA.test(c)&&(v=c,CA))try{let S=new URL(window.location.href),N=c.startsWith("//")?new URL(S.protocol+c):new URL(c),D=xo(N.pathname,m);N.origin===S.origin&&D!=null?c=D+N.search+N.hash:b=!0}catch{}let w=nA(c,{relative:r}),T=RA(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function E(S){i&&i(S),S.defaultPrevented||T(S)}return M.createElement("a",nh({},f,{href:v||w,onClick:b||s?i:E,ref:n,target:l}))}),js=M.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=JT(e,TA),f=Xh(l,{relative:d.relative}),m=Nr(),v=M.useContext(qT),{navigator:b,basename:w}=M.useContext(ii),T=v!=null&&NA(f)&&c===!0,E=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,S=m.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(S=S.toLowerCase(),N=N?N.toLowerCase():null,E=E.toLowerCase()),N&&w&&(N=xo(N,w)||N);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let O=S===E||!o&&S.startsWith(E)&&S.charAt(D)==="/",x=N!=null&&(N===E||!o&&N.startsWith(E)&&N.charAt(E.length)==="/"),_={isActive:O,isPending:x,isTransitioning:T},I=O?i:void 0,C;typeof s=="function"?C=s(_):C=[s,O?"active":null,x?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let A=typeof a=="function"?a(_):a;return M.createElement(Il,nh({},d,{"aria-current":I,className:C,ref:n,style:A,to:l,viewTransition:c}),typeof h=="function"?h(_):h)});var Vp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Vp||(Vp={}));var z_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(z_||(z_={}));function AA(t){let e=M.useContext(Qh);return e||ze(!1),e}function RA(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Bo(),c=Nr(),h=Xh(t,{relative:o});return M.useCallback(d=>{if(EA(d,n)){d.preventDefault();let f=i!==void 0?i:th(c)===th(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}function NA(t,e){e===void 0&&(e={});let n=M.useContext(IA);n==null&&ze(!1);let{basename:i}=AA(Vp.useViewTransitionState),r=Xh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=xo(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=xo(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Lp(r.pathname,o)!=null||Lp(r.pathname,s)!=null}var $_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},DA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ex={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new MA;const f=s<<2|a>>4;if(i.push(f),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const v=c<<6&192|d;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OA=function(t){const e=ZT(t);return ex.encodeByteArray(e,!0)},ih=function(t){return OA(t).replace(/\./g,"")},tx=function(t){try{return ex.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=()=>LA().__FIREBASE_DEFAULTS__,jA=()=>{if(typeof process>"u"||typeof $_>"u")return;const t=$_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tx(t[1]);return e&&JSON.parse(e)},Jh=()=>{try{return FA()||jA()||VA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nx=t=>{var e,n;return(n=(e=Jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},UA=t=>{const e=nx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ix=()=>{var t;return(t=Jh())===null||t===void 0?void 0:t.config},rx=t=>{var e;return(e=Jh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ih(JSON.stringify(n)),ih(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function WA(){var t;const e=(t=Jh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KA(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GA(){return!WA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ox(){try{return typeof indexedDB=="object"}catch{return!1}}function ax(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function QA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="FirebaseError";class Fn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=YA,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ss.prototype.create)}}class Ss{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?XA(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Fn(r,a,i)}}function XA(t,e){return t.replace(JA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const JA=/\{\$([^}]+)}/g;function ZA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(W_(s)&&W_(o)){if(!rh(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function W_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ca(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Pa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function eR(t,e){const n=new tR(t,e);return n.subscribe.bind(n)}class tR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");nR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=mf),r.error===void 0&&(r.error=mf),r.complete===void 0&&(r.complete=mf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=1e3,rR=2,sR=4*60*60*1e3,oR=.5;function H_(t,e=iR,n=rR){const i=e*Math.pow(n,t),r=Math.round(oR*i*(Math.random()-.5)*2);return Math.min(sR,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return t&&t._delegate?t._delegate:t}class Dn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new BA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cR(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lR(t){return t===Gr?void 0:t}function cR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const hR={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},dR=ve.INFO,fR={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},pR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=fR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zh{constructor(e){this.name=e,this._logLevel=dR,this._logHandler=pR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const gR=(t,e)=>e.some(n=>t instanceof n);let q_,K_;function mR(){return q_||(q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yR(){return K_||(K_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lx=new WeakMap,Up=new WeakMap,cx=new WeakMap,yf=new WeakMap,vm=new WeakMap;function vR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lx.set(n,t)}).catch(()=>{}),vm.set(e,t),e}function _R(t){if(Up.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Up.set(t,e)}let Bp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Up.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wR(t){Bp=t(Bp)}function ER(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(vf(this),e,...n);return cx.set(i,e.sort?e.sort():[e]),gr(i)}:yR().includes(t)?function(...e){return t.apply(vf(this),e),gr(lx.get(this))}:function(...e){return gr(t.apply(vf(this),e))}}function bR(t){return typeof t=="function"?ER(t):(t instanceof IDBTransaction&&_R(t),gR(t,mR())?new Proxy(t,Bp):t)}function gr(t){if(t instanceof IDBRequest)return vR(t);if(yf.has(t))return yf.get(t);const e=bR(t);return e!==t&&(yf.set(t,e),vm.set(e,t)),e}const vf=t=>vm.get(t);function ux(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=gr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(gr(o.result),l.oldVersion,l.newVersion,gr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const TR=["get","getKey","getAll","getAllKeys","count"],xR=["put","add","delete","clear"],_f=new Map;function G_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_f.get(e))return _f.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=xR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||TR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return _f.set(e,s),s}wR(t=>({...t,get:(e,n,i)=>G_(e,n)||t.get(e,n,i),has:(e,n)=>!!G_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function SR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zp="@firebase/app",Q_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Zh("@firebase/app"),kR="@firebase/app-compat",CR="@firebase/analytics-compat",PR="@firebase/analytics",AR="@firebase/app-check-compat",RR="@firebase/app-check",NR="@firebase/auth",DR="@firebase/auth-compat",MR="@firebase/database",OR="@firebase/data-connect",LR="@firebase/database-compat",FR="@firebase/functions",jR="@firebase/functions-compat",VR="@firebase/installations",UR="@firebase/installations-compat",BR="@firebase/messaging",zR="@firebase/messaging-compat",$R="@firebase/performance",WR="@firebase/performance-compat",HR="@firebase/remote-config",qR="@firebase/remote-config-compat",KR="@firebase/storage",GR="@firebase/storage-compat",QR="@firebase/firestore",YR="@firebase/vertexai-preview",XR="@firebase/firestore-compat",JR="firebase",ZR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="[DEFAULT]",eN={[zp]:"fire-core",[kR]:"fire-core-compat",[PR]:"fire-analytics",[CR]:"fire-analytics-compat",[RR]:"fire-app-check",[AR]:"fire-app-check-compat",[NR]:"fire-auth",[DR]:"fire-auth-compat",[MR]:"fire-rtdb",[OR]:"fire-data-connect",[LR]:"fire-rtdb-compat",[FR]:"fire-fn",[jR]:"fire-fn-compat",[VR]:"fire-iid",[UR]:"fire-iid-compat",[BR]:"fire-fcm",[zR]:"fire-fcm-compat",[$R]:"fire-perf",[WR]:"fire-perf-compat",[HR]:"fire-rc",[qR]:"fire-rc-compat",[KR]:"fire-gcs",[GR]:"fire-gcs-compat",[QR]:"fire-fst",[XR]:"fire-fst-compat",[YR]:"fire-vertex","fire-js":"fire-js",[JR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Map,tN=new Map,Wp=new Map;function Y_(t,e){try{t.container.addComponent(e)}catch(n){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(Wp.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;Wp.set(e,t);for(const n of sh.values())Y_(n,t);for(const n of tN.values())Y_(n,t);return!0}function ql(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Ss("app","Firebase",nN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=ZR;function hx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:$p,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw mr.create("bad-app-name",{appName:String(r)});if(n||(n=ix()),!n)throw mr.create("no-options");const s=sh.get(r);if(s){if(rh(n,s.options)&&rh(i,s.config))return s;throw mr.create("duplicate-app",{appName:r})}const o=new uR(r);for(const l of Wp.values())o.addComponent(l);const a=new iN(n,i,o);return sh.set(r,a),a}function dx(t=$p){const e=sh.get(t);if(!e&&t===$p&&ix())return hx();if(!e)throw mr.create("no-app",{appName:t});return e}function yn(t,e,n){var i;let r=(i=eN[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(a.join(" "));return}ei(new Dn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firebase-heartbeat-database",sN=1,Sl="firebase-heartbeat-store";let wf=null;function fx(){return wf||(wf=ux(rN,sN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),wf}async function oN(t){try{const n=(await fx()).transaction(Sl),i=await n.objectStore(Sl).get(px(t));return await n.done,i}catch(e){if(e instanceof Fn)Si.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Si.warn(n.message)}}}async function X_(t,e){try{const i=(await fx()).transaction(Sl,"readwrite");await i.objectStore(Sl).put(e,px(t)),await i.done}catch(n){if(n instanceof Fn)Si.warn(n.message);else{const i=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Si.warn(i.message)}}}function px(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=1024,lN=30*24*60*60*1e3;class cN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=J_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=lN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Si.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=J_(),{heartbeatsToSend:i,unsentEntries:r}=uN(this._heartbeatsCache.heartbeats),s=ih(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Si.warn(n),""}}}function J_(){return new Date().toISOString().substring(0,10)}function uN(t,e=aN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Z_(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Z_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class hN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ox()?ax().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return X_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return X_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Z_(t){return ih(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){ei(new Dn("platform-logger",e=>new IR(e),"PRIVATE")),ei(new Dn("heartbeat",e=>new cN(e),"PRIVATE")),yn(zp,Q_,t),yn(zp,Q_,"esm2017"),yn("fire-js","")}dN("");function _m(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function gx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fN=gx,mx=new Ss("auth","Firebase",gx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Zh("@firebase/auth");function pN(t,...e){oh.logLevel<=ve.WARN&&oh.warn(`Auth (${zo}): ${t}`,...e)}function vu(t,...e){oh.logLevel<=ve.ERROR&&oh.error(`Auth (${zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw wm(t,...e)}function Yn(t,...e){return wm(t,...e)}function yx(t,e,n){const i=Object.assign(Object.assign({},fN()),{[e]:n});return new Ss("auth","Firebase",i).create(e,{appName:t.name})}function Ei(t){return yx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return mx.create(t,...e)}function le(t,e,...n){if(!t)throw wm(e,...n)}function yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vu(e),new Error(e)}function ki(t,e){t||yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gN(){return e0()==="http:"||e0()==="https:"}function e0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gN()||sx()||"connection"in navigator)?navigator.onLine:!0}function yN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ki(n>e,"Short delay should be less than long delay!"),this.isMobile=$A()||qA()}get(){return mN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new Kl(3e4,6e4);function Ri(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ri(t,e,n,i,r={}){return _x(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Hl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return HA()||(c.referrerPolicy="no-referrer"),vx.fetch()(wx(t,t.config.apiHost,n,a),c)})}async function _x(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},vN),e);try{const r=new EN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Uc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Uc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Uc(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw yx(t,h,c);Mn(t,h)}}catch(r){if(r instanceof Fn)throw r;Mn(t,"network-request-failed",{message:String(r)})}}async function Gl(t,e,n,i,r={}){const s=await ri(t,e,n,i,r);return"mfaPendingCredential"in s&&Mn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function wx(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Em(t.config,r):`${t.config.apiScheme}://${r}`}function wN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Yn(this.auth,"network-request-failed")),_N.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Yn(t,e,i);return r.customData._tokenResponse=n,r}function t0(t){return t!==void 0&&t.enterprise!==void 0}class bN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function TN(t,e){return ri(t,"GET","/v2/recaptchaConfig",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function Ex(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IN(t,e=!1){const n=Ve(t),i=await n.getIdToken(e),r=bm(i);le(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ka(Ef(r.auth_time)),issuedAtTime:Ka(Ef(r.iat)),expirationTime:Ka(Ef(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ef(t){return Number(t)*1e3}function bm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return vu("JWT malformed, contained fewer than 3 sections"),null;try{const r=tx(n);return r?JSON.parse(r):(vu("Failed to decode base64 JWT payload"),null)}catch(r){return vu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function n0(t){const e=bm(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Fn&&SN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function SN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Io(t,Ex(n,{idToken:i}));le(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bx(s.providerUserInfo):[],a=PN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function CN(t){const e=Ve(t);await ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bx(t){return t.map(e=>{var{providerId:n}=e,i=_m(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e){const n=await _x(t,{},async()=>{const i=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=wx(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vx.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RN(t,e){return ri(t,"POST","/v2/accounts:revokeToken",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=n0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await AN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new ho;return i&&(le(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(le(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vi{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=_m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Io(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return IN(this,e)}reload(){return CN(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ah(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await Io(this,xN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:N,isAnonymous:D,providerData:O,stsTokenManager:x}=n;le(S&&x,e,"internal-error");const _=ho.fromJSON(this.name,x);le(typeof S=="string",e,"internal-error"),Vi(d,e.name),Vi(f,e.name),le(typeof N=="boolean",e,"internal-error"),le(typeof D=="boolean",e,"internal-error"),Vi(m,e.name),Vi(v,e.name),Vi(b,e.name),Vi(w,e.name),Vi(T,e.name),Vi(E,e.name);const I=new vi({uid:S,auth:e,email:f,emailVerified:N,displayName:d,isAnonymous:D,photoURL:v,phoneNumber:m,tenantId:b,stsTokenManager:_,createdAt:T,lastLoginAt:E});return O&&Array.isArray(O)&&(I.providerData=O.map(C=>Object.assign({},C))),w&&(I._redirectEventId=w),I}static async _fromIdTokenResponse(e,n,i=!1){const r=new ho;r.updateFromServerResponse(n);const s=new vi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ah(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];le(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?bx(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new ho;a.updateFromIdToken(i);const l=new vi({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new qp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;function _i(t){ki(t instanceof Function,"Expected a class definition");let e=i0.get(t);return e?(ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tx.type="NONE";const r0=Tx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t,e,n){return`firebase:${t}:${e}:${n}`}class fo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=_u(this.userKey,r.apiKey,s),this.fullPersistenceKey=_u("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new fo(_i(r0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||_i(r0);const o=_u(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=vi._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new fo(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new fo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Px(e))return"Blackberry";if(Ax(e))return"Webos";if(Ix(e))return"Safari";if((e.includes("chrome/")||Sx(e))&&!e.includes("edge/"))return"Chrome";if(Cx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function xx(t=Nt()){return/firefox\//i.test(t)}function Ix(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sx(t=Nt()){return/crios\//i.test(t)}function kx(t=Nt()){return/iemobile/i.test(t)}function Cx(t=Nt()){return/android/i.test(t)}function Px(t=Nt()){return/blackberry/i.test(t)}function Ax(t=Nt()){return/webos/i.test(t)}function Tm(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NN(t=Nt()){var e;return Tm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function DN(){return KA()&&document.documentMode===10}function Rx(t=Nt()){return Tm(t)||Cx(t)||Ax(t)||Px(t)||/windows phone/i.test(t)||kx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e=[]){let n;switch(t){case"Browser":n=s0(Nt());break;case"Worker":n=`${s0(Nt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e={}){return ri(t,"GET","/v2/passwordPolicy",Ri(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=6;class FN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o0(this),this.idTokenSubscription=new o0(this),this.beforeStateQueue=new MN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_i(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await fo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ex(this,{idToken:e}),i=await vi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ah(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Ei(this));const n=e?Ve(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ON(this),n=new FN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ss("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await RN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_i(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[_i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Dr(t){return Ve(t)}class o0{constructor(e){this.auth=e,this.observer=null,this.addObserver=eR(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VN(t){ed=t}function Dx(t){return ed.loadJS(t)}function UN(){return ed.recaptchaEnterpriseScript}function BN(){return ed.gapiScript}function zN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $N="recaptcha-enterprise",WN="NO_RECAPTCHA";class HN{constructor(e){this.type=$N,this.auth=Dr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{TN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new bN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;t0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(WN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&t0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=UN();l.length!==0&&(l+=a),Dx(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function a0(t,e,n,i=!1){const r=new HN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function lh(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await a0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await a0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t,e){const n=ql(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(rh(s,e??{}))return r;Mn(r,"already-initialized")}return n.initialize({options:e})}function KN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(_i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function GN(t,e,n){const i=Dr(t);le(i._canInitEmulator,i,"emulator-config-failed"),le(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=Mx(e),{host:o,port:a}=QN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),YN()}function Mx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QN(t){const e=Mx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:l0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:l0(o)}}}function l0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function XN(t,e){return ri(t,"POST","/v1/accounts:update",e)}async function JN(t,e){return ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return Gl(t,"POST","/v1/accounts:signInWithPassword",Ri(t,e))}async function eD(t,e){return ri(t,"POST","/v1/accounts:sendOobCode",Ri(t,e))}async function tD(t,e){return eD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e){return Gl(t,"POST","/v1/accounts:signInWithEmailLink",Ri(t,e))}async function iD(t,e){return Gl(t,"POST","/v1/accounts:signInWithEmailLink",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends xm{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new kl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new kl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lh(e,n,"signInWithPassword",ZN);case"emailLink":return nD(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lh(e,i,"signUpPassword",JN);case"emailLink":return iD(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t,e){return Gl(t,"POST","/v1/accounts:signInWithIdp",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="http://localhost";class ps extends xm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=_m(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new ps(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return po(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,po(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,po(e,n)}buildRequest(){const e={requestUri:rD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oD(t){const e=Ca(Pa(t)).link,n=e?Ca(Pa(e)).deep_link_id:null,i=Ca(Pa(t)).deep_link_id;return(i?Ca(Pa(i)).link:null)||i||n||e||t}class Im{constructor(e){var n,i,r,s,o,a;const l=Ca(Pa(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=sD((r=l.mode)!==null&&r!==void 0?r:null);le(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=oD(e);try{return new Im(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.providerId=ks.PROVIDER_ID}static credential(e,n){return kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Im.parseLink(n);return le(i,"argument-error"),kl._fromEmailAndCode(e,i.code,i.tenantId)}}ks.PROVIDER_ID="password";ks.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ks.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Ox{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Ql{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Qi.credential(n,i)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Ql{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Ql{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Xi.credential(n,i)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e){return Gl(t,"POST","/v1/accounts:signUp",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await vi._fromIdTokenResponse(e,i,r),o=c0(i);return new gs({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=c0(i);return new gs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function c0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends Fn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new ch(e,n,i,r)}}function Lx(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(t,s,e,i):s})}async function lD(t,e,n=!1){const i=await Io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(t,e,n=!1){const{auth:i}=t;if(Kn(i.app))return Promise.reject(Ei(i));const r="reauthenticate";try{const s=await Io(t,Lx(i,r,e,t),n);le(s.idToken,i,"internal-error");const o=bm(s.idToken);le(o,i,"internal-error");const{sub:a}=o;return le(t.uid===a,i,"user-mismatch"),gs._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Mn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(t,e,n=!1){if(Kn(t.app))return Promise.reject(Ei(t));const i="signIn",r=await Lx(t,i,e),s=await gs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function cD(t,e){return jx(Dr(t),e)}async function uD(t,e){return Fx(Ve(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(t){const e=Dr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hD(t,e,n){const i=Dr(t);await lh(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",tD)}async function dD(t,e,n){if(Kn(t.app))return Promise.reject(Ei(t));const i=Dr(t),o=await lh(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Vx(t),l}),a=await gs._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function fD(t,e,n){return Kn(t.app)?Promise.reject(Ei(t)):cD(Ve(t),ks.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Vx(t),i})}function pD(t,e){return gD(Ve(t),null,e)}async function gD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Io(t,XN(i,s));await t._updateTokensIfNecessary(o,!0)}function mD(t,e,n,i){return Ve(t).onIdTokenChanged(e,n,i)}function yD(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function vD(t,e,n,i){return Ve(t).onAuthStateChanged(e,n,i)}function _D(t){return Ve(t).signOut()}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=1e3,ED=10;class Bx extends Ux{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);DN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,ED):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},wD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bx.type="LOCAL";const bD=Bx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends Ux{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zx.type="SESSION";const $x=zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new td(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await TD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Sm("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function ID(t){Xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function SD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CD(){return Wx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="firebaseLocalStorageDb",PD=1,hh="firebaseLocalStorage",qx="fbase_key";class Yl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nd(t,e){return t.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function AD(){const t=indexedDB.deleteDatabase(Hx);return new Yl(t).toPromise()}function Kp(){const t=indexedDB.open(Hx,PD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(hh,{keyPath:qx})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(hh)?e(i):(i.close(),await AD(),e(await Kp()))})})}async function u0(t,e,n){const i=nd(t,!0).put({[qx]:e,value:n});return new Yl(i).toPromise()}async function RD(t,e){const n=nd(t,!1).get(e),i=await new Yl(n).toPromise();return i===void 0?null:i.value}function h0(t,e){const n=nd(t,!0).delete(e);return new Yl(n).toPromise()}const ND=800,DD=3;class Kx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>DD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance(CD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await SD(),!this.activeServiceWorker)return;this.sender=new xD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await u0(e,uh,"1"),await h0(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>u0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>RD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>h0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=nd(r,!1).getAll();return new Yl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ND)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kx.type="LOCAL";const MD=Kx;new Kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){return e?_i(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends xm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,n){return po(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LD(t){return jx(t.auth,new km(t),t.bypassAuthState)}function FD(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),Fx(n,new km(t),t.bypassAuthState)}async function jD(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),lD(n,new km(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LD;case"linkViaPopup":case"linkViaRedirect":return jD;case"reauthViaPopup":case"reauthViaRedirect":return FD;default:Mn(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=new Kl(2e3,1e4);class io extends Gx{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=Sm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VD.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="pendingRedirect",wu=new Map;class BD extends Gx{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=wu.get(this.auth._key());if(!e){try{const i=await zD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}wu.set(this.auth._key(),e)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zD(t,e){const n=HD(e),i=WD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function $D(t,e){wu.set(t._key(),e)}function WD(t){return _i(t._redirectPersistence)}function HD(t){return _u(UD,t.config.apiKey,t.name)}async function qD(t,e,n=!1){if(Kn(t.app))return Promise.reject(Ei(t));const i=Dr(t),r=OD(i,e),o=await new BD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=10*60*1e3;class GD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Qx(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KD&&this.cachedEventUids.clear(),this.cachedEventUids.has(d0(e))}saveEventToCache(e){this.cachedEventUids.add(d0(e)),this.lastProcessedEventTime=Date.now()}}function d0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Qx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JD=/^https?/;async function ZD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YD(t);for(const n of e)try{if(eM(n))return}catch{}Mn(t,"unauthorized-domain")}function eM(t){const e=Hp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!JD.test(n))return!1;if(XD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new Kl(3e4,6e4);function f0(){const t=Xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nM(t){return new Promise((e,n)=>{var i,r,s;function o(){f0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f0(),n(Yn(t,"network-request-failed"))},timeout:tM.get()})}if(!((r=(i=Xn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Xn().gapi)===null||s===void 0)&&s.load)o();else{const a=zN("iframefcb");return Xn()[a]=()=>{gapi.load?o():n(Yn(t,"network-request-failed"))},Dx(`${BN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Eu=null,e})}let Eu=null;function iM(t){return Eu=Eu||nM(t),Eu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new Kl(5e3,15e3),sM="__/auth/iframe",oM="emulator/auth/iframe",aM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cM(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Em(e,oM):`https://${t.config.authDomain}/${sM}`,i={apiKey:e.apiKey,appName:t.name,v:zo},r=lM.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Hl(i).slice(1)}`}async function uM(t){const e=await iM(t),n=Xn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:cM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Yn(t,"network-request-failed"),a=Xn().setTimeout(()=>{s(o)},rM.get());function l(){Xn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dM=500,fM=600,pM="_blank",gM="http://localhost";class p0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mM(t,e,n,i=dM,r=fM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hM),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Nt().toLowerCase();n&&(a=Sx(c)?pM:n),xx(c)&&(e=e||gM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(NN(c)&&a!=="_self")return yM(e||"",a),new p0(null);const d=window.open(e||"",a,h);le(d,t,"popup-blocked");try{d.focus()}catch{}return new p0(d)}function yM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="__/auth/handler",_M="emulator/auth/handler",wM=encodeURIComponent("fac");async function g0(t,e,n,i,r,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:zo,eventId:r};if(e instanceof Ox){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Ql){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${wM}=${encodeURIComponent(l)}`:"";return`${EM(t)}?${Hl(a).slice(1)}${c}`}function EM({config:t}){return t.emulator?Em(t,_M):`https://${t.authDomain}/${vM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="webStorageSupport";class bM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$x,this._completeRedirectFn=qD,this._overrideRedirectResult=$D}async _openPopup(e,n,i,r){var s;ki((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await g0(e,n,i,Hp(),r);return mM(e,o,Sm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await g0(e,n,i,Hp(),r);return ID(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ki(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await uM(e),i=new GD(e);return n.register("authEvent",r=>(le(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bf,{type:bf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[bf];o!==void 0&&n(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Rx()||Ix()||Tm()}}const TM=bM;var m0="@firebase/auth",y0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SM(t){ei(new Dn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nx(t)},c=new jN(i,r,s,l);return KN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ei(new Dn("auth-internal",e=>{const n=Dr(e.getProvider("auth").getImmediate());return(i=>new xM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(m0,y0,IM(t)),yn(m0,y0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=5*60,CM=rx("authIdTokenMaxAge")||kM;let v0=null;const PM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>CM)return;const r=n==null?void 0:n.token;v0!==r&&(v0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function AM(t=dx()){const e=ql(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qN(t,{popupRedirectResolver:TM,persistence:[MD,bD,$x]}),i=rx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=PM(s.toString());yD(n,o,()=>o(n.currentUser)),mD(n,a=>o(a))}}const r=nx("auth");return r&&GN(n,`http://${r}`),n}function RM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}VN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Yn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",RM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SM("Browser");var NM="firebase",DM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn(NM,DM,"app");var _0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,Yx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,_){function I(){}I.prototype=_.prototype,x.D=_.prototype,x.prototype=new I,x.prototype.constructor=x,x.C=function(C,A,R){for(var P=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)P[ie-2]=arguments[ie];return _.prototype[A].apply(C,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,_,I){I||(I=0);var C=Array(16);if(typeof _=="string")for(var A=0;16>A;++A)C[A]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(A=0;16>A;++A)C[A]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=x.g[0],I=x.g[1],A=x.g[2];var R=x.g[3],P=_+(R^I&(A^R))+C[0]+3614090360&4294967295;_=I+(P<<7&4294967295|P>>>25),P=R+(A^_&(I^A))+C[1]+3905402710&4294967295,R=_+(P<<12&4294967295|P>>>20),P=A+(I^R&(_^I))+C[2]+606105819&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(_^A&(R^_))+C[3]+3250441966&4294967295,I=A+(P<<22&4294967295|P>>>10),P=_+(R^I&(A^R))+C[4]+4118548399&4294967295,_=I+(P<<7&4294967295|P>>>25),P=R+(A^_&(I^A))+C[5]+1200080426&4294967295,R=_+(P<<12&4294967295|P>>>20),P=A+(I^R&(_^I))+C[6]+2821735955&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(_^A&(R^_))+C[7]+4249261313&4294967295,I=A+(P<<22&4294967295|P>>>10),P=_+(R^I&(A^R))+C[8]+1770035416&4294967295,_=I+(P<<7&4294967295|P>>>25),P=R+(A^_&(I^A))+C[9]+2336552879&4294967295,R=_+(P<<12&4294967295|P>>>20),P=A+(I^R&(_^I))+C[10]+4294925233&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(_^A&(R^_))+C[11]+2304563134&4294967295,I=A+(P<<22&4294967295|P>>>10),P=_+(R^I&(A^R))+C[12]+1804603682&4294967295,_=I+(P<<7&4294967295|P>>>25),P=R+(A^_&(I^A))+C[13]+4254626195&4294967295,R=_+(P<<12&4294967295|P>>>20),P=A+(I^R&(_^I))+C[14]+2792965006&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(_^A&(R^_))+C[15]+1236535329&4294967295,I=A+(P<<22&4294967295|P>>>10),P=_+(A^R&(I^A))+C[1]+4129170786&4294967295,_=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(_^I))+C[6]+3225465664&4294967295,R=_+(P<<9&4294967295|P>>>23),P=A+(_^I&(R^_))+C[11]+643717713&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^_&(A^R))+C[0]+3921069994&4294967295,I=A+(P<<20&4294967295|P>>>12),P=_+(A^R&(I^A))+C[5]+3593408605&4294967295,_=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(_^I))+C[10]+38016083&4294967295,R=_+(P<<9&4294967295|P>>>23),P=A+(_^I&(R^_))+C[15]+3634488961&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^_&(A^R))+C[4]+3889429448&4294967295,I=A+(P<<20&4294967295|P>>>12),P=_+(A^R&(I^A))+C[9]+568446438&4294967295,_=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(_^I))+C[14]+3275163606&4294967295,R=_+(P<<9&4294967295|P>>>23),P=A+(_^I&(R^_))+C[3]+4107603335&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^_&(A^R))+C[8]+1163531501&4294967295,I=A+(P<<20&4294967295|P>>>12),P=_+(A^R&(I^A))+C[13]+2850285829&4294967295,_=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(_^I))+C[2]+4243563512&4294967295,R=_+(P<<9&4294967295|P>>>23),P=A+(_^I&(R^_))+C[7]+1735328473&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^_&(A^R))+C[12]+2368359562&4294967295,I=A+(P<<20&4294967295|P>>>12),P=_+(I^A^R)+C[5]+4294588738&4294967295,_=I+(P<<4&4294967295|P>>>28),P=R+(_^I^A)+C[8]+2272392833&4294967295,R=_+(P<<11&4294967295|P>>>21),P=A+(R^_^I)+C[11]+1839030562&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^_)+C[14]+4259657740&4294967295,I=A+(P<<23&4294967295|P>>>9),P=_+(I^A^R)+C[1]+2763975236&4294967295,_=I+(P<<4&4294967295|P>>>28),P=R+(_^I^A)+C[4]+1272893353&4294967295,R=_+(P<<11&4294967295|P>>>21),P=A+(R^_^I)+C[7]+4139469664&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^_)+C[10]+3200236656&4294967295,I=A+(P<<23&4294967295|P>>>9),P=_+(I^A^R)+C[13]+681279174&4294967295,_=I+(P<<4&4294967295|P>>>28),P=R+(_^I^A)+C[0]+3936430074&4294967295,R=_+(P<<11&4294967295|P>>>21),P=A+(R^_^I)+C[3]+3572445317&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^_)+C[6]+76029189&4294967295,I=A+(P<<23&4294967295|P>>>9),P=_+(I^A^R)+C[9]+3654602809&4294967295,_=I+(P<<4&4294967295|P>>>28),P=R+(_^I^A)+C[12]+3873151461&4294967295,R=_+(P<<11&4294967295|P>>>21),P=A+(R^_^I)+C[15]+530742520&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^_)+C[2]+3299628645&4294967295,I=A+(P<<23&4294967295|P>>>9),P=_+(A^(I|~R))+C[0]+4096336452&4294967295,_=I+(P<<6&4294967295|P>>>26),P=R+(I^(_|~A))+C[7]+1126891415&4294967295,R=_+(P<<10&4294967295|P>>>22),P=A+(_^(R|~I))+C[14]+2878612391&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~_))+C[5]+4237533241&4294967295,I=A+(P<<21&4294967295|P>>>11),P=_+(A^(I|~R))+C[12]+1700485571&4294967295,_=I+(P<<6&4294967295|P>>>26),P=R+(I^(_|~A))+C[3]+2399980690&4294967295,R=_+(P<<10&4294967295|P>>>22),P=A+(_^(R|~I))+C[10]+4293915773&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~_))+C[1]+2240044497&4294967295,I=A+(P<<21&4294967295|P>>>11),P=_+(A^(I|~R))+C[8]+1873313359&4294967295,_=I+(P<<6&4294967295|P>>>26),P=R+(I^(_|~A))+C[15]+4264355552&4294967295,R=_+(P<<10&4294967295|P>>>22),P=A+(_^(R|~I))+C[6]+2734768916&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~_))+C[13]+1309151649&4294967295,I=A+(P<<21&4294967295|P>>>11),P=_+(A^(I|~R))+C[4]+4149444226&4294967295,_=I+(P<<6&4294967295|P>>>26),P=R+(I^(_|~A))+C[11]+3174756917&4294967295,R=_+(P<<10&4294967295|P>>>22),P=A+(_^(R|~I))+C[2]+718787259&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~_))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+_&4294967295,x.g[1]=x.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+R&4294967295}i.prototype.u=function(x,_){_===void 0&&(_=x.length);for(var I=_-this.blockSize,C=this.B,A=this.h,R=0;R<_;){if(A==0)for(;R<=I;)r(this,x,R),R+=this.blockSize;if(typeof x=="string"){for(;R<_;)if(C[A++]=x.charCodeAt(R++),A==this.blockSize){r(this,C),A=0;break}}else for(;R<_;)if(C[A++]=x[R++],A==this.blockSize){r(this,C),A=0;break}}this.h=A,this.o+=_},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var _=1;_<x.length-8;++_)x[_]=0;var I=8*this.o;for(_=x.length-8;_<x.length;++_)x[_]=I&255,I/=256;for(this.u(x),x=Array(16),_=I=0;4>_;++_)for(var C=0;32>C;C+=8)x[I++]=this.g[_]>>>C&255;return x};function s(x,_){var I=a;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=_(x)}function o(x,_){this.h=_;for(var I=[],C=!0,A=x.length-1;0<=A;A--){var R=x[A]|0;C&&R==_||(I[A]=R,C=!1)}this.g=I}var a={};function l(x){return-128<=x&&128>x?s(x,function(_){return new o([_|0],0>_?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return w(c(-x));for(var _=[],I=1,C=0;x>=I;C++)_[C]=x/I|0,I*=4294967296;return new o(_,0)}function h(x,_){if(x.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(x.charAt(0)=="-")return w(h(x.substring(1),_));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(_,8)),C=d,A=0;A<x.length;A+=8){var R=Math.min(8,x.length-A),P=parseInt(x.substring(A,A+R),_);8>R?(R=c(Math.pow(_,R)),C=C.j(R).add(c(P))):(C=C.j(I),C=C.add(c(P)))}return C}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-w(this).m();for(var x=0,_=1,I=0;I<this.g.length;I++){var C=this.i(I);x+=(0<=C?C:4294967296+C)*_,_*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v(this))return"0";if(b(this))return"-"+w(this).toString(x);for(var _=c(Math.pow(x,6)),I=this,C="";;){var A=N(I,_).g;I=T(I,A.j(_));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(x);if(I=A,v(I))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function v(x){if(x.h!=0)return!1;for(var _=0;_<x.g.length;_++)if(x.g[_]!=0)return!1;return!0}function b(x){return x.h==-1}t.l=function(x){return x=T(this,x),b(x)?-1:v(x)?0:1};function w(x){for(var _=x.g.length,I=[],C=0;C<_;C++)I[C]=~x.g[C];return new o(I,~x.h).add(f)}t.abs=function(){return b(this)?w(this):this},t.add=function(x){for(var _=Math.max(this.g.length,x.g.length),I=[],C=0,A=0;A<=_;A++){var R=C+(this.i(A)&65535)+(x.i(A)&65535),P=(R>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);C=P>>>16,R&=65535,P&=65535,I[A]=P<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function T(x,_){return x.add(w(_))}t.j=function(x){if(v(this)||v(x))return d;if(b(this))return b(x)?w(this).j(w(x)):w(w(this).j(x));if(b(x))return w(this.j(w(x)));if(0>this.l(m)&&0>x.l(m))return c(this.m()*x.m());for(var _=this.g.length+x.g.length,I=[],C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var A=0;A<x.g.length;A++){var R=this.i(C)>>>16,P=this.i(C)&65535,ie=x.i(A)>>>16,q=x.i(A)&65535;I[2*C+2*A]+=P*q,E(I,2*C+2*A),I[2*C+2*A+1]+=R*q,E(I,2*C+2*A+1),I[2*C+2*A+1]+=P*ie,E(I,2*C+2*A+1),I[2*C+2*A+2]+=R*ie,E(I,2*C+2*A+2)}for(C=0;C<_;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=_;C<2*_;C++)I[C]=0;return new o(I,0)};function E(x,_){for(;(x[_]&65535)!=x[_];)x[_+1]+=x[_]>>>16,x[_]&=65535,_++}function S(x,_){this.g=x,this.h=_}function N(x,_){if(v(_))throw Error("division by zero");if(v(x))return new S(d,d);if(b(x))return _=N(w(x),_),new S(w(_.g),w(_.h));if(b(_))return _=N(x,w(_)),new S(w(_.g),_.h);if(30<x.g.length){if(b(x)||b(_))throw Error("slowDivide_ only works with positive integers.");for(var I=f,C=_;0>=C.l(x);)I=D(I),C=D(C);var A=O(I,1),R=O(C,1);for(C=O(C,2),I=O(I,2);!v(C);){var P=R.add(C);0>=P.l(x)&&(A=A.add(I),R=P),C=O(C,1),I=O(I,1)}return _=T(x,A.j(_)),new S(A,_)}for(A=d;0<=x.l(_);){for(I=Math.max(1,Math.floor(x.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=c(I),P=R.j(_);b(P)||0<P.l(x);)I-=C,R=c(I),P=R.j(_);v(R)&&(R=f),A=A.add(R),x=T(x,P)}return new S(A,x)}t.A=function(x){return N(this,x).h},t.and=function(x){for(var _=Math.max(this.g.length,x.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)&x.i(C);return new o(I,this.h&x.h)},t.or=function(x){for(var _=Math.max(this.g.length,x.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)|x.i(C);return new o(I,this.h|x.h)},t.xor=function(x){for(var _=Math.max(this.g.length,x.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)^x.i(C);return new o(I,this.h^x.h)};function D(x){for(var _=x.g.length+1,I=[],C=0;C<_;C++)I[C]=x.i(C)<<1|x.i(C-1)>>>31;return new o(I,x.h)}function O(x,_){var I=_>>5;_%=32;for(var C=x.g.length-I,A=[],R=0;R<C;R++)A[R]=0<_?x.i(R+I)>>>_|x.i(R+I+1)<<32-_:x.i(R+I);return new o(A,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Yx=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,as=o}).apply(typeof _0<"u"?_0:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xx,Aa,Jx,bu,Gp,Zx,eI,tI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var y=i;u=u.split(".");for(var k=0;k<u.length-1;k++){var F=u[k];if(!(F in y))break e;y=y[F]}u=u[u.length-1],k=y[u],p=p(k),p!=k&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var y=0,k=!1,F={next:function(){if(!k&&y<u.length){var j=y++;return{value:p(j,u[j]),done:!1}}return k=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}r("Array.prototype.values",function(u){return u||function(){return s(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,y){return u.call.apply(u.bind,arguments)}function d(u,p,y){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,k),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function f(u,p,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var k=y.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function v(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(k,F,j){for(var H=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)H[Ae-2]=arguments[Ae];return p.prototype[F].apply(k,H)}}function b(u){const p=u.length;if(0<p){const y=Array(p);for(let k=0;k<p;k++)y[k]=u[k];return y}return[]}function w(u,p){for(let y=1;y<arguments.length;y++){const k=arguments[y];if(l(k)){const F=u.length||0,j=k.length||0;u.length=F+j;for(let H=0;H<j;H++)u[F+H]=k[H]}else u.push(k)}}class T{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(u,p,y){for(const k in u)p.call(y,u[k],k,u)}function x(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function _(u){const p={};for(const y in u)p[y]=u[y];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let y,k;for(let F=1;F<arguments.length;F++){k=arguments[F];for(y in k)u[y]=k[y];for(let j=0;j<I.length;j++)y=I[j],Object.prototype.hasOwnProperty.call(k,y)&&(u[y]=k[y])}}function A(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function R(u){a.setTimeout(()=>{throw u},0)}function P(){var u=K;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ie{constructor(){this.h=this.g=null}add(p,y){const k=q.get();k.set(p,y),this.h?this.h.next=k:this.g=k,this.h=k}}var q=new T(()=>new he,u=>u.reset());class he{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let re,B=!1,K=new ie,Q=()=>{const u=a.Promise.resolve(void 0);re=()=>{u.then(V)}};var V=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(y){R(y)}var p=q;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return u}();function ce(u,p){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{N(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Z[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ce.aa.h.call(this)}}v(ce,W);var Z={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),Dt=0;function jn(u,p,y,k,F){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!k,this.ha=F,this.key=++Dt,this.da=this.fa=!1}function et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ht(u){this.src=u,this.g={},this.h=0}ht.prototype.add=function(u,p,y,k,F){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var H=fe(u,p,k,F);return-1<H?(p=u[H],y||(p.fa=!1)):(p=new jn(p,this.src,j,!!k,F),p.fa=y,u.push(p)),p};function G(u,p){var y=p.type;if(y in u.g){var k=u.g[y],F=Array.prototype.indexOf.call(k,p,void 0),j;(j=0<=F)&&Array.prototype.splice.call(k,F,1),j&&(et(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function fe(u,p,y,k){for(var F=0;F<u.length;++F){var j=u[F];if(!j.da&&j.listener==p&&j.capture==!!y&&j.ha==k)return F}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),dt={};function bn(u,p,y,k,F){if(Array.isArray(p)){for(var j=0;j<p.length;j++)bn(u,p[j],y,k,F);return null}return y=Or(y),u&&u[ke]?u.K(p,y,c(k)?!!k.capture:!1,F):ot(u,p,y,!1,k,F)}function ot(u,p,y,k,F,j){if(!p)throw Error("Invalid event type");var H=c(F)?!!F.capture:!!F,Ae=ne(u);if(Ae||(u[Xe]=Ae=new ht(u)),y=Ae.add(p,y,k,H,j),y.proxy)return y;if(k=si(),y.proxy=k,k.src=u,k.listener=y,u.addEventListener)X||(F=H),F===void 0&&(F=!1),u.addEventListener(p.toString(),k,F);else if(u.attachEvent)u.attachEvent(Vn(p.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return y}function si(){function u(y){return p.call(u.src,u.listener,y)}const p=Rs;return u}function ln(u,p,y,k,F){if(Array.isArray(p))for(var j=0;j<p.length;j++)ln(u,p[j],y,k,F);else k=c(k)?!!k.capture:!!k,y=Or(y),u&&u[ke]?(u=u.i,p=String(p).toString(),p in u.g&&(j=u.g[p],y=fe(j,y,k,F),-1<y&&(et(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete u.g[p],u.h--)))):u&&(u=ne(u))&&(p=u.g[p.toString()],u=-1,p&&(u=fe(p,y,k,F)),(y=-1<u?p[u]:null)&&cn(y))}function cn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ke])G(p.i,u);else{var y=u.type,k=u.proxy;p.removeEventListener?p.removeEventListener(y,k,u.capture):p.detachEvent?p.detachEvent(Vn(y),k):p.addListener&&p.removeListener&&p.removeListener(k),(y=ne(p))?(G(y,u),y.h==0&&(y.src=null,p[Xe]=null)):et(u)}}}function Vn(u){return u in dt?dt[u]:dt[u]="on"+u}function Rs(u,p){if(u.da)u=!0;else{p=new ce(p,this);var y=u.listener,k=u.ha||u.src;u.fa&&cn(u),u=y.call(k,p)}return u}function ne(u){return u=u[Xe],u instanceof ht?u:null}var Di="__closure_events_fn_"+(1e9*Math.random()>>>0);function Or(u){return typeof u=="function"?u:(u[Di]||(u[Di]=function(p){return u.handleEvent(p)}),u[Di])}function He(){L.call(this),this.i=new ht(this),this.M=this,this.F=null}v(He,L),He.prototype[ke]=!0,He.prototype.removeEventListener=function(u,p,y,k){ln(this,u,p,y,k)};function Te(u,p){var y,k=u.F;if(k)for(y=[];k;k=k.F)y.push(k);if(u=u.M,k=p.type||p,typeof p=="string")p=new W(p,u);else if(p instanceof W)p.target=p.target||u;else{var F=p;p=new W(k,u),C(p,F)}if(F=!0,y)for(var j=y.length-1;0<=j;j--){var H=p.g=y[j];F=Lr(H,k,!0,p)&&F}if(H=p.g=u,F=Lr(H,k,!0,p)&&F,F=Lr(H,k,!1,p)&&F,y)for(j=0;j<y.length;j++)H=p.g=y[j],F=Lr(H,k,!1,p)&&F}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],k=0;k<y.length;k++)et(y[k]);delete u.g[p],u.h--}}this.F=null},He.prototype.K=function(u,p,y,k){return this.i.add(String(u),p,!1,y,k)},He.prototype.L=function(u,p,y,k){return this.i.add(String(u),p,!0,y,k)};function Lr(u,p,y,k){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,j=0;j<p.length;++j){var H=p[j];if(H&&!H.da&&H.capture==y){var Ae=H.listener,ft=H.ha||H.src;H.fa&&G(u.i,H),F=Ae.call(ft,k)!==!1&&F}}return F&&!k.defaultPrevented}function Go(u,p,y){if(typeof u=="function")y&&(u=f(u,y));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Qo(u){u.g=Go(()=>{u.g=null,u.i&&(u.i=!1,Qo(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ac extends L{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Qo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Y(u){L.call(this),this.h=u,this.g={}}v(Y,L);var ge=[];function un(u){O(u.g,function(p,y){this.g.hasOwnProperty(y)&&cn(p)},u),u.g={}}Y.prototype.N=function(){Y.aa.N.call(this),un(this)},Y.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mi=a.JSON.stringify,Ns=a.JSON.parse,Sd=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function kd(){}kd.prototype.h=null;function Oy(u){return u.h||(u.h=u.i())}function Ly(){}var Yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cd(){W.call(this,"d")}v(Cd,W);function Pd(){W.call(this,"c")}v(Pd,W);var Fr={},Fy=null;function lc(){return Fy=Fy||new He}Fr.La="serverreachability";function jy(u){W.call(this,Fr.La,u)}v(jy,W);function Xo(u){const p=lc();Te(p,new jy(p))}Fr.STAT_EVENT="statevent";function Vy(u,p){W.call(this,Fr.STAT_EVENT,u),this.stat=p}v(Vy,W);function Mt(u){const p=lc();Te(p,new Vy(p,u))}Fr.Ma="timingevent";function Uy(u,p){W.call(this,Fr.Ma,u),this.size=p}v(Uy,W);function Jo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Zo(){this.g=!0}Zo.prototype.xa=function(){this.g=!1};function Ak(u,p,y,k,F,j){u.info(function(){if(u.g)if(j)for(var H="",Ae=j.split("&"),ft=0;ft<Ae.length;ft++){var xe=Ae[ft].split("=");if(1<xe.length){var Tt=xe[0];xe=xe[1];var xt=Tt.split("_");H=2<=xt.length&&xt[1]=="type"?H+(Tt+"="+xe+"&"):H+(Tt+"=redacted&")}}else H=null;else H=j;return"XMLHTTP REQ ("+k+") [attempt "+F+"]: "+p+`
`+y+`
`+H})}function Rk(u,p,y,k,F,j,H){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+F+"]: "+p+`
`+y+`
`+j+" "+H})}function Ds(u,p,y,k){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Dk(u,y)+(k?" "+k:"")})}function Nk(u,p){u.info(function(){return"TIMEOUT: "+p})}Zo.prototype.info=function(){};function Dk(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var k=y[u];if(!(2>k.length)){var F=k[1];if(Array.isArray(F)&&!(1>F.length)){var j=F[0];if(j!="noop"&&j!="stop"&&j!="close")for(var H=1;H<F.length;H++)F[H]=""}}}}return Mi(y)}catch{return p}}var cc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},By={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ad;function uc(){}v(uc,kd),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},Ad=new uc;function Oi(u,p,y,k){this.j=u,this.i=p,this.l=y,this.R=k||1,this.U=new Y(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zy}function zy(){this.i=null,this.g="",this.h=!1}var $y={},Rd={};function Nd(u,p,y){u.L=1,u.v=pc(oi(p)),u.m=y,u.P=!0,Wy(u,null)}function Wy(u,p){u.F=Date.now(),hc(u),u.A=oi(u.v);var y=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),rv(y.i,"t",k),u.C=0,y=u.j.J,u.h=new zy,u.g=bv(u.j,y?p:null,!u.m),0<u.O&&(u.M=new ac(f(u.Y,u,u.g),u.O)),p=u.U,y=u.g,k=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(ge[0]=F.toString()),F=ge);for(var j=0;j<F.length;j++){var H=bn(y,F[j],k||p.handleEvent,!1,p.h||p);if(!H)break;p.g[H.key]=H}p=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Xo(),Ak(u.i,u.u,u.A,u.l,u.R,u.m)}Oi.prototype.ca=function(u){u=u.target;const p=this.M;p&&ai(u)==3?p.j():this.Y(u)},Oi.prototype.Y=function(u){try{if(u==this.g)e:{const xt=ai(this.g);var p=this.g.Ba();const Ls=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||hv(this.g)))){this.J||xt!=4||p==7||(p==8||0>=Ls?Xo(3):Xo(2)),Dd(this);var y=this.g.Z();this.X=y;t:if(Hy(this)){var k=hv(this.g);u="";var F=k.length,j=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),ea(this);var H="";break t}this.h.i=new a.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(k[p],{stream:!(j&&p==F-1)});k.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=y==200,Rk(this.i,this.u,this.A,this.l,this.R,xt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,ft=this.g;if((Ae=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ae)){var xe=Ae;break t}}xe=null}if(y=xe)Ds(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Md(this,y);else{this.o=!1,this.s=3,Mt(12),jr(this),ea(this);break e}}if(this.P){y=!0;let Tn;for(;!this.J&&this.C<H.length;)if(Tn=Mk(this,H),Tn==Rd){xt==4&&(this.s=4,Mt(14),y=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==$y){this.s=4,Mt(15),Ds(this.i,this.l,H,"[Invalid Chunk]"),y=!1;break}else Ds(this.i,this.l,Tn,null),Md(this,Tn);if(Hy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||H.length!=0||this.h.h||(this.s=1,Mt(16),y=!1),this.o=this.o&&y,!y)Ds(this.i,this.l,H,"[Invalid Chunked Response]"),jr(this),ea(this);else if(0<H.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Ud(Tt),Tt.M=!0,Mt(11))}}else Ds(this.i,this.l,H,null),Md(this,H);xt==4&&jr(this),this.o&&!this.J&&(xt==4?vv(this.j,this):(this.o=!1,hc(this)))}else Xk(this.g),y==400&&0<H.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),jr(this),ea(this)}}}catch{}finally{}};function Hy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Mk(u,p){var y=u.C,k=p.indexOf(`
`,y);return k==-1?Rd:(y=Number(p.substring(y,k)),isNaN(y)?$y:(k+=1,k+y>p.length?Rd:(p=p.slice(k,k+y),u.C=k+y,p)))}Oi.prototype.cancel=function(){this.J=!0,jr(this)};function hc(u){u.S=Date.now()+u.I,qy(u,u.I)}function qy(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Jo(f(u.ba,u),p)}function Dd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Oi.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Nk(this.i,this.A),this.L!=2&&(Xo(),Mt(17)),jr(this),this.s=2,ea(this)):qy(this,this.S-u)};function ea(u){u.j.G==0||u.J||vv(u.j,u)}function jr(u){Dd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,un(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Md(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||Od(y.h,u))){if(!u.K&&Od(y.h,u)&&y.G==3){try{var k=y.Da.g.parse(p)}catch{k=null}if(Array.isArray(k)&&k.length==3){var F=k;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)wc(y),vc(y);else break e;Vd(y),Mt(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=Jo(f(y.Za,y),6e3));if(1>=Qy(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ur(y,11)}else if((u.K||y.g==u)&&wc(y),!E(p))for(F=y.Da.g.parse(p),p=0;p<F.length;p++){let xe=F[p];if(y.T=xe[0],xe=xe[1],y.G==2)if(xe[0]=="c"){y.K=xe[1],y.ia=xe[2];const Tt=xe[3];Tt!=null&&(y.la=Tt,y.j.info("VER="+y.la));const xt=xe[4];xt!=null&&(y.Aa=xt,y.j.info("SVER="+y.Aa));const Ls=xe[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(k=1.5*Ls,y.L=k,y.j.info("backChannelRequestTimeoutMs_="+k)),k=y;const Tn=u.g;if(Tn){const bc=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bc){var j=k.h;j.g||bc.indexOf("spdy")==-1&&bc.indexOf("quic")==-1&&bc.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ld(j,j.h),j.h=null))}if(k.D){const Bd=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bd&&(k.ya=Bd,Me(k.I,k.D,Bd))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),k=y;var H=u;if(k.qa=Ev(k,k.J?k.ia:null,k.W),H.K){Yy(k.h,H);var Ae=H,ft=k.L;ft&&(Ae.I=ft),Ae.B&&(Dd(Ae),hc(Ae)),k.g=H}else mv(k);0<y.i.length&&_c(y)}else xe[0]!="stop"&&xe[0]!="close"||Ur(y,7);else y.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Ur(y,7):jd(y):xe[0]!="noop"&&y.l&&y.l.ta(xe),y.v=0)}}Xo(4)}catch{}}var Ok=class{constructor(u,p){this.g=u,this.map=p}};function Ky(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qy(u){return u.h?1:u.g?u.g.size:0}function Od(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ld(u,p){u.g?u.g.add(p):u.h=p}function Yy(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ky.prototype.cancel=function(){if(this.i=Xy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Xy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return b(u.i)}function Lk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],y=u.length,k=0;k<y;k++)p.push(u[k]);return p}p=[],y=0;for(k in u)p[y++]=u[k];return p}function Fk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const k in u)p[y++]=k;return p}}}function Jy(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=Fk(u),k=Lk(u),F=k.length,j=0;j<F;j++)p.call(void 0,k[j],y&&y[j],u)}var Zy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jk(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var k=u[y].indexOf("="),F=null;if(0<=k){var j=u[y].substring(0,k);F=u[y].substring(k+1)}else j=u[y];p(j,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Vr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vr){this.h=u.h,dc(this,u.j),this.o=u.o,this.g=u.g,fc(this,u.s),this.l=u.l;var p=u.i,y=new ia;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),ev(this,y),this.m=u.m}else u&&(p=String(u).match(Zy))?(this.h=!1,dc(this,p[1]||"",!0),this.o=ta(p[2]||""),this.g=ta(p[3]||"",!0),fc(this,p[4]),this.l=ta(p[5]||"",!0),ev(this,p[6]||"",!0),this.m=ta(p[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}Vr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(na(p,tv,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(na(p,tv,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(na(y,y.charAt(0)=="/"?Bk:Uk,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",na(y,$k)),u.join("")};function oi(u){return new Vr(u)}function dc(u,p,y){u.j=y?ta(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function fc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ev(u,p,y){p instanceof ia?(u.i=p,Wk(u.i,u.h)):(y||(p=na(p,zk)),u.i=new ia(p,u.h))}function Me(u,p,y){u.i.set(p,y)}function pc(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ta(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function na(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Vk),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Vk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var tv=/[#\/\?@]/g,Uk=/[#\?:]/g,Bk=/[#\?]/g,zk=/[#\?@]/g,$k=/#/g;function ia(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Li(u){u.g||(u.g=new Map,u.h=0,u.i&&jk(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=ia.prototype,t.add=function(u,p){Li(this),this.i=null,u=Ms(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function nv(u,p){Li(u),p=Ms(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function iv(u,p){return Li(u),p=Ms(u,p),u.g.has(p)}t.forEach=function(u,p){Li(this),this.g.forEach(function(y,k){y.forEach(function(F){u.call(p,F,k,this)},this)},this)},t.na=function(){Li(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let k=0;k<p.length;k++){const F=u[k];for(let j=0;j<F.length;j++)y.push(p[k])}return y},t.V=function(u){Li(this);let p=[];if(typeof u=="string")iv(this,u)&&(p=p.concat(this.g.get(Ms(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},t.set=function(u,p){return Li(this),this.i=null,u=Ms(this,u),iv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function rv(u,p,y){nv(u,p),0<y.length&&(u.i=null,u.g.set(Ms(u,p),b(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var k=p[y];const j=encodeURIComponent(String(k)),H=this.V(k);for(k=0;k<H.length;k++){var F=j;H[k]!==""&&(F+="="+encodeURIComponent(String(H[k]))),u.push(F)}}return this.i=u.join("&")};function Ms(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Wk(u,p){p&&!u.j&&(Li(u),u.i=null,u.g.forEach(function(y,k){var F=k.toLowerCase();k!=F&&(nv(this,k),rv(this,F,y))},u)),u.j=p}function Hk(u,p){const y=new Zo;if(a.Image){const k=new Image;k.onload=m(Fi,y,"TestLoadImage: loaded",!0,p,k),k.onerror=m(Fi,y,"TestLoadImage: error",!1,p,k),k.onabort=m(Fi,y,"TestLoadImage: abort",!1,p,k),k.ontimeout=m(Fi,y,"TestLoadImage: timeout",!1,p,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else p(!1)}function qk(u,p){const y=new Zo,k=new AbortController,F=setTimeout(()=>{k.abort(),Fi(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:k.signal}).then(j=>{clearTimeout(F),j.ok?Fi(y,"TestPingServer: ok",!0,p):Fi(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Fi(y,"TestPingServer: error",!1,p)})}function Fi(u,p,y,k,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),k(y)}catch{}}function Kk(){this.g=new Sd}function Gk(u,p,y){const k=y||"";try{Jy(u,function(F,j){let H=F;c(F)&&(H=Mi(F)),p.push(k+j+"="+encodeURIComponent(H))})}catch(F){throw p.push(k+"type="+encodeURIComponent("_badmap")),F}}function gc(u){this.l=u.Ub||null,this.j=u.eb||!1}v(gc,kd),gc.prototype.g=function(){return new mc(this.l,this.j)},gc.prototype.i=function(u){return function(){return u}}({});function mc(u,p){He.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(mc,He),t=mc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,sa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function sv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ra(this):sa(this),this.readyState==3&&sv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ra(this))},t.Qa=function(u){this.g&&(this.response=u,ra(this))},t.ga=function(){this.g&&ra(this)};function ra(u){u.readyState=4,u.l=null,u.j=null,u.v=null,sa(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function sa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ov(u){let p="";return O(u,function(y,k){p+=k,p+=":",p+=y,p+=`\r
`}),p}function Fd(u,p,y){e:{for(k in y){var k=!1;break e}k=!0}k||(y=ov(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Me(u,p,y))}function qe(u){He.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(qe,He);var Qk=/^https?$/i,Yk=["POST","PUT"];t=qe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,y,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ad.g(),this.v=this.o?Oy(this.o):Oy(Ad),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){av(this,j);return}if(u=y||"",y=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var F in k)y.set(F,k[F]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const j of k.keys())y.set(j,k.get(j));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),F=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Yk,p,void 0))||k||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,H]of y)this.g.setRequestHeader(j,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uv(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){av(this,j)}};function av(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,lv(u),yc(u)}function lv(u){u.A||(u.A=!0,Te(u,"complete"),Te(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Te(this,"complete"),Te(this,"abort"),yc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yc(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cv(this):this.bb())},t.bb=function(){cv(this)};function cv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ai(u)!=4||u.Z()!=2)){if(u.u&&ai(u)==4)Go(u.Ea,0,u);else if(Te(u,"readystatechange"),ai(u)==4){u.h=!1;try{const H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var k;if(k=H===0){var F=String(u.D).match(Zy)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),k=!Qk.test(F?F.toLowerCase():"")}y=k}if(y)Te(u,"complete"),Te(u,"success");else{u.m=6;try{var j=2<ai(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",lv(u)}}finally{yc(u)}}}}function yc(u,p){if(u.g){uv(u);const y=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Te(u,"ready");try{y.onreadystatechange=k}catch{}}}function uv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ai(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ns(p)}};function hv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Xk(u){const p={};u=(u.g&&2<=ai(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(E(u[k]))continue;var y=A(u[k]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=p[F]||[];p[F]=j,j.push(y)}x(p,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oa(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function dv(u){this.Aa=0,this.i=[],this.j=new Zo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oa("baseRetryDelayMs",5e3,u),this.cb=oa("retryDelaySeedMs",1e4,u),this.Wa=oa("forwardChannelMaxRetries",2,u),this.wa=oa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ky(u&&u.concurrentRequestLimit),this.Da=new Kk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dv.prototype,t.la=8,t.G=1,t.connect=function(u,p,y,k){Mt(0),this.W=u,this.H=p||{},y&&k!==void 0&&(this.H.OSID=y,this.H.OAID=k),this.F=this.X,this.I=Ev(this,null,this.W),_c(this)};function jd(u){if(fv(u),u.G==3){var p=u.U++,y=oi(u.I);if(Me(y,"SID",u.K),Me(y,"RID",p),Me(y,"TYPE","terminate"),aa(u,y),p=new Oi(u,u.j,p),p.L=2,p.v=pc(oi(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=bv(p.j,null),p.g.ea(p.v)),p.F=Date.now(),hc(p)}wv(u)}function vc(u){u.g&&(Ud(u),u.g.cancel(),u.g=null)}function fv(u){vc(u),u.u&&(a.clearTimeout(u.u),u.u=null),wc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function _c(u){if(!Gy(u.h)&&!u.s){u.s=!0;var p=u.Ga;re||Q(),B||(re(),B=!0),K.add(p,u),u.B=0}}function Jk(u,p){return Qy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Jo(f(u.Ga,u,p),_v(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Oi(this,this.j,u);let j=this.o;if(this.S&&(j?(j=_(j),C(j,this.S)):j=this.S),this.m!==null||this.O||(F.H=j,j=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var k=this.i[y];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(p+=k,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=gv(this,F,p),y=oi(this.I),Me(y,"RID",u),Me(y,"CVER",22),this.D&&Me(y,"X-HTTP-Session-Id",this.D),aa(this,y),j&&(this.O?p="headers="+encodeURIComponent(String(ov(j)))+"&"+p:this.m&&Fd(y,this.m,j)),Ld(this.h,F),this.Ua&&Me(y,"TYPE","init"),this.P?(Me(y,"$req",p),Me(y,"SID","null"),F.T=!0,Nd(F,y,null)):Nd(F,y,p),this.G=2}}else this.G==3&&(u?pv(this,u):this.i.length==0||Gy(this.h)||pv(this))};function pv(u,p){var y;p?y=p.l:y=u.U++;const k=oi(u.I);Me(k,"SID",u.K),Me(k,"RID",y),Me(k,"AID",u.T),aa(u,k),u.m&&u.o&&Fd(k,u.m,u.o),y=new Oi(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=gv(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ld(u.h,y),Nd(y,k,p)}function aa(u,p){u.H&&O(u.H,function(y,k){Me(p,k,y)}),u.l&&Jy({},function(y,k){Me(p,k,y)})}function gv(u,p,y){y=Math.min(u.i.length,y);var k=u.l?f(u.l.Na,u.l,u):null;e:{var F=u.i;let j=-1;for(;;){const H=["count="+y];j==-1?0<y?(j=F[0].g,H.push("ofs="+j)):j=0:H.push("ofs="+j);let Ae=!0;for(let ft=0;ft<y;ft++){let xe=F[ft].g;const Tt=F[ft].map;if(xe-=j,0>xe)j=Math.max(0,F[ft].g-100),Ae=!1;else try{Gk(Tt,H,"req"+xe+"_")}catch{k&&k(Tt)}}if(Ae){k=H.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,k}function mv(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;re||Q(),B||(re(),B=!0),K.add(p,u),u.v=0}}function Vd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Jo(f(u.Fa,u),_v(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,yv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Jo(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),vc(this),yv(this))};function Ud(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function yv(u){u.g=new Oi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=oi(u.qa);Me(p,"RID","rpc"),Me(p,"SID",u.K),Me(p,"AID",u.T),Me(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(p,"TO",u.ja),Me(p,"TYPE","xmlhttp"),aa(u,p),u.m&&u.o&&Fd(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=pc(oi(p)),y.m=null,y.P=!0,Wy(y,u)}t.Za=function(){this.C!=null&&(this.C=null,vc(this),Vd(this),Mt(19))};function wc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function vv(u,p){var y=null;if(u.g==p){wc(u),Ud(u),u.g=null;var k=2}else if(Od(u.h,p))y=p.D,Yy(u.h,p),k=1;else return;if(u.G!=0){if(p.o)if(k==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;k=lc(),Te(k,new Uy(k,y)),_c(u)}else mv(u);else if(F=p.s,F==3||F==0&&0<p.X||!(k==1&&Jk(u,p)||k==2&&Vd(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),F){case 1:Ur(u,5);break;case 4:Ur(u,10);break;case 3:Ur(u,6);break;default:Ur(u,2)}}}function _v(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function Ur(u,p){if(u.j.info("Error code "+p),p==2){var y=f(u.fb,u),k=u.Xa;const F=!k;k=new Vr(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dc(k,"https"),pc(k),F?Hk(k.toString(),y):qk(k.toString(),y)}else Mt(2);u.G=0,u.l&&u.l.sa(p),wv(u),fv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function wv(u){if(u.G=0,u.ka=[],u.l){const p=Xy(u.h);(p.length!=0||u.i.length!=0)&&(w(u.ka,p),w(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function Ev(u,p,y){var k=y instanceof Vr?oi(y):new Vr(y);if(k.g!="")p&&(k.g=p+"."+k.g),fc(k,k.s);else{var F=a.location;k=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var j=new Vr(null);k&&dc(j,k),p&&(j.g=p),F&&fc(j,F),y&&(j.l=y),k=j}return y=u.D,p=u.ya,y&&p&&Me(k,y,p),Me(k,"VER",u.la),aa(u,k),k}function bv(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new qe(new gc({eb:y})):new qe(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tv(){}t=Tv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ec(){}Ec.prototype.g=function(u,p){return new Xt(u,p)};function Xt(u,p){He.call(this),this.g=new dv(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!E(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Os(this)}v(Xt,He),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){jd(this.g)},Xt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Mi(u),u=y);p.i.push(new Ok(p.Ya++,u)),p.G==3&&_c(p)},Xt.prototype.N=function(){this.g.l=null,delete this.j,jd(this.g),delete this.g,Xt.aa.N.call(this)};function xv(u){Cd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}v(xv,Cd);function Iv(){Pd.call(this),this.status=1}v(Iv,Pd);function Os(u){this.g=u}v(Os,Tv),Os.prototype.ua=function(){Te(this.g,"a")},Os.prototype.ta=function(u){Te(this.g,new xv(u))},Os.prototype.sa=function(u){Te(this.g,new Iv)},Os.prototype.ra=function(){Te(this.g,"b")},Ec.prototype.createWebChannel=Ec.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,tI=function(){return new Ec},eI=function(){return lc()},Zx=Fr,Gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cc.NO_ERROR=0,cc.TIMEOUT=8,cc.HTTP_ERROR=6,bu=cc,By.COMPLETE="complete",Jx=By,Ly.EventType=Yo,Yo.OPEN="a",Yo.CLOSE="b",Yo.ERROR="c",Yo.MESSAGE="d",He.prototype.listen=He.prototype.K,Aa=Ly,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Xx=qe}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const w0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Zh("@firebase/firestore");function ma(){return ms.logLevel}function ee(t,...e){if(ms.logLevel<=ve.DEBUG){const n=e.map(Cm);ms.debug(`Firestore (${$o}): ${t}`,...n)}}function Ci(t,...e){if(ms.logLevel<=ve.ERROR){const n=e.map(Cm);ms.error(`Firestore (${$o}): ${t}`,...n)}}function So(t,...e){if(ms.logLevel<=ve.WARN){const n=e.map(Cm);ms.warn(`Firestore (${$o}): ${t}`,...n)}}function Cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: `+t;throw Ci(e),new Error(e)}function be(t,e){t||oe()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class OM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LM{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(be(typeof i.accessToken=="string"),new nI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new Ct(e)}}class FM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new FM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){be(this.o===void 0);const i=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new VM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=BM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Ie(t,e){return t<e?-1:t>e?1:0}function ko(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new st(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new st(0,0))}static max(){return new ae(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,i){n===void 0?n=0:n>e.length&&oe(),i===void 0?i=e.length-n:i>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Cl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Cl{construct(e,n,i){return new Re(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const zM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Cl{construct(e,n,i){return new yt(e,n,i)}static isValidIdentifier(e){return zM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new te(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new te(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new te(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Re.fromString(e))}static fromName(e){return new se(Re.fromString(e).popFirst(5))}static empty(){return new se(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Re(e.slice()))}}function $M(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ae.fromTimestamp(i===1e9?new st(n+1,0):new st(n,i));return new br(r,se.empty(),e)}function WM(t){return new br(t.readTime,t.key,-1)}class br{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new br(ae.min(),se.empty(),-1)}static max(){return new br(ae.max(),se.empty(),-1)}}function HM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==qM)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,i)=>{n(e)})}static reject(e){return new z((n,i)=>{i(e)})}static waitFor(e){return new z((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=z.resolve(!1);for(const i of e)n=n.next(r=>r?z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new z((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new z((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function GM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pm.oe=-1;function Zl(t){return t==null}function dh(t){return t===0&&1/t==-1/0}function QM(t){return typeof t=="number"&&Number.isInteger(t)&&!dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??mt.RED,this.left=r??mt.EMPTY,this.right=s??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new mt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return mt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,i,r,s){return this}insert(e,n,i){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new tn([])}unionWith(e){let n=new wt(yt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sI("Invalid base64 string: "+s):s}}(e);return new bt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const YM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(be(!!t),typeof t=="string"){let e=0;const n=YM.exec(t);if(be(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Rm(t){const e=t.mapValue.fields.__previous_value__;return Am(e)?Rm(e):e}function Pl(t){const e=Tr(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Al{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c={mapValue:{}};function vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Am(t)?4:ZM(t)?9007199254740991:JM(t)?10:11:oe()}function ti(t,e){if(t===e)return!0;const n=vs(t);if(n!==vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pl(t).isEqual(Pl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Tr(r.timestampValue),a=Tr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ys(r.bytesValue).isEqual(ys(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ge(r.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(r.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ge(r.integerValue)===Ge(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ge(r.doubleValue),a=Ge(s.doubleValue);return o===a?dh(o)===dh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ko(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(E0(o)!==E0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ti(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function Rl(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function Co(t,e){if(t===e)return 0;const n=vs(t),i=vs(e);if(n!==i)return Ie(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ge(s.integerValue||s.doubleValue),l=Ge(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return T0(t.timestampValue,e.timestampValue);case 4:return T0(Pl(t),Pl(e));case 5:return Ie(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ys(s),l=ys(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ie(a[c],l[c]);if(h!==0)return h}return Ie(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ie(Ge(s.latitude),Ge(o.latitude));return a!==0?a:Ie(Ge(s.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return x0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,b=Ie(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:x0(m,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===$c.mapValue&&o===$c.mapValue)return 0;if(s===$c.mapValue)return 1;if(o===$c.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Ie(l[d],h[d]);if(f!==0)return f;const m=Co(a[l[d]],c[h[d]]);if(m!==0)return m}return Ie(l.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function T0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=Tr(t),i=Tr(e),r=Ie(n.seconds,i.seconds);return r!==0?r:Ie(n.nanos,i.nanos)}function x0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Co(n[r],i[r]);if(s)return s}return Ie(n.length,i.length)}function Po(t){return Qp(t)}function Qp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Tr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ys(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Qp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Qp(n.fields[o])}`;return r+"}"}(t.mapValue):oe()}function Yp(t){return!!t&&"integerValue"in t}function Nm(t){return!!t&&"arrayValue"in t}function I0(t){return!!t&&"nullValue"in t}function S0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tu(t){return!!t&&"mapValue"in t}function JM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ga(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(n)}setAll(e){let n=yt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Ga(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Tu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Cs(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Ft(Ga(this.value))}}function oI(t){const e=[];return Cs(t.fields,(n,i)=>{const r=new yt([n]);if(Tu(i)){const s=oI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ct(e,0,ae.min(),ae.min(),ae.min(),Ft.empty(),0)}static newFoundDocument(e,n,i,r){return new ct(e,1,n,ae.min(),i,r,0)}static newNoDocument(e,n){return new ct(e,2,n,ae.min(),ae.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,ae.min(),ae.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.position=e,this.inclusive=n}}function k0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=se.comparator(se.fromName(o.referenceValue),n.key):i=Co(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function C0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n="asc"){this.field=e,this.dir=n}}function eO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{}class nt extends aI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new nO(e,n,i):n==="array-contains"?new sO(e,i):n==="in"?new oO(e,i):n==="not-in"?new aO(e,i):n==="array-contains-any"?new lO(e,i):new nt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new iO(e,i):new rO(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Co(n,this.value)):n!==null&&vs(this.value)===vs(n)&&this.matchesComparison(Co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends aI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ni(e,n)}matches(e){return lI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lI(t){return t.op==="and"}function cI(t){return tO(t)&&lI(t)}function tO(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function Xp(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+Po(t.value);if(cI(t))return t.filters.map(e=>Xp(e)).join(",");{const e=t.filters.map(n=>Xp(n)).join(",");return`${t.op}(${e})`}}function uI(t,e){return t instanceof nt?function(i,r){return r instanceof nt&&i.op===r.op&&i.field.isEqual(r.field)&&ti(i.value,r.value)}(t,e):t instanceof ni?function(i,r){return r instanceof ni&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&uI(o,r.filters[a]),!0):!1}(t,e):void oe()}function hI(t){return t instanceof nt?function(n){return`${n.field.canonicalString()} ${n.op} ${Po(n.value)}`}(t):t instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(hI).join(" ,")+"}"}(t):"Filter"}class nO extends nt{constructor(e,n,i){super(e,n,i),this.key=se.fromName(i.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class iO extends nt{constructor(e,n){super(e,"in",n),this.keys=dI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rO extends nt{constructor(e,n){super(e,"not-in",n),this.keys=dI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>se.fromName(i.referenceValue))}class sO extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nm(n)&&Rl(n.arrayValue,this.value)}}class oO extends nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rl(this.value.arrayValue,n)}}class aO extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Rl(this.value.arrayValue,n)}}class lO extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Rl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function P0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new cO(t,e,n,i,r,s,o)}function Dm(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Xp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Zl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Po(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Po(i)).join(",")),e.ue=n}return e.ue}function Mm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!C0(t.startAt,e.startAt)&&C0(t.endAt,e.endAt)}function Jp(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function uO(t,e,n,i,r,s,o,a){return new id(t,e,n,i,r,s,o,a)}function Om(t){return new id(t)}function A0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hO(t){return t.collectionGroup!==null}function Qa(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new wt(yt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ph(s,i))}),n.has(yt.keyField().canonicalString())||e.ce.push(new ph(yt.keyField(),i))}return e.ce}function Jn(t){const e=ue(t);return e.le||(e.le=dO(e,Qa(t))),e.le}function dO(t,e){if(t.limitType==="F")return P0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ph(r.field,s)});const n=t.endAt?new fh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new fh(t.startAt.position,t.startAt.inclusive):null;return P0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Zp(t,e,n){return new id(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rd(t,e){return Mm(Jn(t),Jn(e))&&t.limitType===e.limitType}function fI(t){return`${Dm(Jn(t))}|lt:${t.limitType}`}function zs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>hI(r)).join(", ")}]`),Zl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Po(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Po(r)).join(",")),`Target(${i})`}(Jn(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):se.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Qa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=k0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Qa(i),r)||i.endAt&&!function(o,a,l){const c=k0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Qa(i),r))}(t,e)}function fO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pI(t){return(e,n)=>{let i=!1;for(const r of Qa(t)){const s=pO(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function pO(t,e,n){const i=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Co(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return rI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new We(se.comparator);function Pi(){return gO}const gI=new We(se.comparator);function Ra(...t){let e=gI;for(const n of t)e=e.insert(n.key,n);return e}function mI(t){let e=gI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ts(){return Ya()}function yI(){return Ya()}function Ya(){return new Wo(t=>t.toString(),(t,e)=>t.isEqual(e))}const mO=new We(se.comparator),yO=new wt(se.comparator);function ye(...t){let e=yO;for(const n of t)e=e.add(n);return e}const vO=new wt(Ie);function _O(){return vO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function vI(t){return{integerValue:""+t}}function wO(t,e){return QM(e)?vI(e):Lm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this._=void 0}}function EO(t,e,n){return t instanceof Nl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Am(s)&&(s=Rm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Dl?wI(t,e):t instanceof Ml?EI(t,e):function(r,s){const o=_I(r,s),a=R0(o)+R0(r.Pe);return Yp(o)&&Yp(r.Pe)?vI(a):Lm(r.serializer,a)}(t,e)}function bO(t,e,n){return t instanceof Dl?wI(t,e):t instanceof Ml?EI(t,e):n}function _I(t,e){return t instanceof gh?function(i){return Yp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Nl extends od{}class Dl extends od{constructor(e){super(),this.elements=e}}function wI(t,e){const n=bI(e);for(const i of t.elements)n.some(r=>ti(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ml extends od{constructor(e){super(),this.elements=e}}function EI(t,e){let n=bI(e);for(const i of t.elements)n=n.filter(r=>!ti(r,i));return{arrayValue:{values:n}}}class gh extends od{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function R0(t){return Ge(t.integerValue||t.doubleValue)}function bI(t){return Nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n){this.field=e,this.transform=n}}function xO(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Dl&&r instanceof Dl||i instanceof Ml&&r instanceof Ml?ko(i.elements,r.elements,ti):i instanceof gh&&r instanceof gh?ti(i.Pe,r.Pe):i instanceof Nl&&r instanceof Nl}(t.transform,e.transform)}class IO{constructor(e,n){this.version=e,this.transformResults=n}}class it{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new it}static exists(e){return new it(void 0,e)}static updateTime(e){return new it(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ad{}function TI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tc(t.key,it.none()):new ec(t.key,t.data,it.none());{const n=t.data,i=Ft.empty();let r=new wt(yt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Mr(t.key,i,new tn(r.toArray()),it.none())}}function SO(t,e,n){t instanceof ec?function(r,s,o){const a=r.value.clone(),l=D0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(r,s,o){if(!xu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=D0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(xI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xa(t,e,n,i){return t instanceof ec?function(s,o,a,l){if(!xu(s.precondition,o))return a;const c=s.value.clone(),h=M0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Mr?function(s,o,a,l){if(!xu(s.precondition,o))return a;const c=M0(s.fieldTransforms,l,o),h=o.data;return h.setAll(xI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function kO(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=_I(i.transform,r||null);s!=null&&(n===null&&(n=Ft.empty()),n.set(i.field,s))}return n||null}function N0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ko(i,r,(s,o)=>xO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ec extends ad{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mr extends ad{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function D0(t,e,n){const i=new Map;be(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,bO(o,a,n[r]))}return i}function M0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,EO(s,o,e))}return i}class tc extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class II extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&SO(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Xa(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Xa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=yI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=TI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(n,i)=>N0(n,i))&&ko(this.baseMutations,e.baseMutations,(n,i)=>N0(n,i))}}class Fm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){be(e.mutations.length===i.length);let r=function(){return mO}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Fm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,_e;function SI(t){switch(t){default:return oe();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function kI(t){if(t===void 0)return Ci("GRPC error has no .code"),U.UNKNOWN;switch(t){case Je.OK:return U.OK;case Je.CANCELLED:return U.CANCELLED;case Je.UNKNOWN:return U.UNKNOWN;case Je.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Je.INTERNAL:return U.INTERNAL;case Je.UNAVAILABLE:return U.UNAVAILABLE;case Je.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Je.NOT_FOUND:return U.NOT_FOUND;case Je.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Je.ABORTED:return U.ABORTED;case Je.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Je.DATA_LOSS:return U.DATA_LOSS;default:return oe()}}(_e=Je||(Je={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new as([4294967295,4294967295],0);function O0(t){const e=RO().encode(t),n=new Yx;return n.update(e),new Uint8Array(n.digest())}function L0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new as([n,i],0),new as([r,s],0)]}class jm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Na(`Invalid padding: ${n}`);if(i<0)throw new Na(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Na(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Na(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=as.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(as.fromNumber(i)));return r.compare(NO)===1&&(r=new as([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=O0(e),[i,r]=L0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new jm(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=O0(e),[i,r]=L0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ld(ae.min(),r,new We(Ie),Pi(),ye())}}class nc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new nc(i,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class CI{constructor(e,n){this.targetId=e,this.me=n}}class PI{constructor(e,n,i=bt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class F0{constructor(){this.fe=0,this.ge=V0(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),i=ye();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:oe()}}),new nc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=V0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pi(),this.qe=j0(),this.Qe=new We(Ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(Jp(s))if(i===0){const o=new se(s.path);this.Ue(n,o,ct.newNoDocument(o,ae.min()))}else be(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=ys(i).toUint8Array()}catch(l){if(l instanceof sI)return So("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new jm(o,r,s)}catch(l){return So(l instanceof Na?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Jp(a.target)){const l=new se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ct.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ye();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new ld(e,n,this.Qe,this.ke,i);return this.ke=Pi(),this.qe=j0(),this.Qe=new We(Ie),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new F0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new wt(Ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new F0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function j0(){return new We(se.comparator)}function V0(){return new We(se.comparator)}const MO={asc:"ASCENDING",desc:"DESCENDING"},OO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LO={and:"AND",or:"OR"};class FO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function eg(t,e){return t.useProto3Json||Zl(e)?e:{value:e}}function mh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jO(t,e){return mh(t,e.toTimestamp())}function rn(t){return be(!!t),ae.fromTimestamp(function(n){const i=Tr(n);return new st(i.seconds,i.nanos)}(t))}function Vm(t,e){return tg(t,e).canonicalString()}function tg(t,e){const n=function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RI(t){const e=Re.fromString(t);return be(FI(e)),e}function yh(t,e){return Vm(t.databaseId,e.path)}function Ja(t,e){const n=RI(e);if(n.get(1)!==t.databaseId.projectId)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(DI(n))}function NI(t,e){return Vm(t.databaseId,e)}function VO(t){const e=RI(t);return e.length===4?Re.emptyPath():DI(e)}function ng(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DI(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function U0(t,e,n){return{name:yh(t,e),fields:n.value.mapValue.fields}}function UO(t,e){return"found"in e?function(i,r){be(!!r.found),r.found.name,r.found.updateTime;const s=Ja(i,r.found.name),o=rn(r.found.updateTime),a=r.found.createTime?rn(r.found.createTime):ae.min(),l=new Ft({mapValue:{fields:r.found.fields}});return ct.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(i,r){be(!!r.missing),be(!!r.readTime);const s=Ja(i,r.missing),o=rn(r.readTime);return ct.newNoDocument(s,o)}(t,e):oe()}function BO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(be(h===void 0||typeof h=="string"),bt.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array),bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:kI(c.code);return new te(h,c.message||"")}(o);n=new PI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ja(t,i.document.name),s=rn(i.document.updateTime),o=i.document.createTime?rn(i.document.createTime):ae.min(),a=new Ft({mapValue:{fields:i.document.fields}}),l=ct.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Iu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ja(t,i.document),s=i.readTime?rn(i.readTime):ae.min(),o=ct.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Iu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ja(t,i.document),s=i.removedTargetIds||[];n=new Iu([],s,r,null)}else{if(!("filter"in e))return oe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new AO(r,s),a=i.targetId;n=new CI(a,o)}}return n}function MI(t,e){let n;if(e instanceof ec)n={update:U0(t,e.key,e.value)};else if(e instanceof tc)n={delete:yh(t,e.key)};else if(e instanceof Mr)n={update:U0(t,e.key,e.data),updateMask:YO(e.fieldMask)};else{if(!(e instanceof II))return oe();n={verify:yh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Nl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:jO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function zO(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?rn(r.updateTime):rn(s);return o.isEqual(ae.min())&&(o=rn(s)),new IO(o,r.transformResults||[])}(n,e))):[]}function $O(t,e){return{documents:[NI(t,e.path)]}}function WO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=NI(t,r);const s=function(c){if(c.length!==0)return LI(ni.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:$s(f.field),direction:KO(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=eg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function HO(t){let e=VO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){be(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=OI(d);return f instanceof ni&&cI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new ph(Ws(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Zl(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new fh(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new fh(m,f)}(n.endAt)),uO(e,r,o,s,a,"F",l,c)}function qO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ws(n.unaryFilter.field);return nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ws(n.unaryFilter.field);return nt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ws(n.unaryFilter.field);return nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ws(n.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return nt.create(Ws(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(i=>OI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function KO(t){return MO[t]}function GO(t){return OO[t]}function QO(t){return LO[t]}function $s(t){return{fieldPath:t.canonicalString()}}function Ws(t){return yt.fromServerFormat(t.fieldPath)}function LI(t){return t instanceof nt?function(n){if(n.op==="=="){if(S0(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(I0(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(S0(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(I0(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:GO(n.op),value:n.value}}}(t):t instanceof ni?function(n){const i=n.getFilters().map(r=>LI(r));return i.length===1?i[0]:{compositeFilter:{op:QO(n.op),filters:i}}}(t):oe()}function YO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,i,r,s=ae.min(),o=ae.min(),a=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.ct=e}}function JO(t){const e=HO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.un=new e2}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(br.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(br.min())}updateCollectionGroup(e,n,i){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class e2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new wt(Re.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new wt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ao(0)}static kn(){return new Ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.changes=new Wo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Xa(i.mutation,r,tn.empty(),st.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ye()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ye()){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Ra();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ye()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Pi();const o=Ya(),a=function(){return Ya()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Mr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Xa(h.mutation,c,h.mutation.getFieldMask(),st.now())):o.set(c.key,tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new n2(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Ya();let r=new We((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||tn.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||ye()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=yI();h.forEach(f=>{if(!s.has(f)){const m=TI(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):z.resolve(ts());let a=-1,l=s;return o.next(c=>z.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ye())).next(h=>({batchId:a,changes:mI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(i=>{let r=Ra();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Ra();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,l=>{const c=function(d,f){return new id(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ct.newInvalidDocument(h)))});let a=Ra();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Xa(h.mutation,c,tn.empty(),st.now()),sd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:rn(r.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:JO(r.bundledQuery),readTime:rn(r.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.overlays=new We(se.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ts();return z.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),z.resolve()}getOverlaysForCollection(e,n,i){const r=ts(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new We((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=ts(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ts(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return z.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new PO(n,i));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.Tr=new wt(at.Er),this.dr=new wt(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new at(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new at(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new se(new Re([])),i=new at(n,e),r=new at(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Re([])),i=new at(n,e),r=new at(n,e+1);let s=ye();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new at(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class at{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Ie(e.wr,n.wr)}static Ar(e,n){return Ie(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new wt(at.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CO(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new at(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new at(n,0),r=new at(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new wt(Ie);return n.forEach(r=>{const s=new at(r,0),o=new at(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;se.isDocumentKey(s)||(s=s.child(""));const o=new at(new se(s),0);let a=new wt(Ie);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return z.forEach(n.mutations,r=>{const s=new at(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new at(n,0),r=this.br.firstAfterOrEqual(i);return z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.Mr=e,this.docs=function(){return new We(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return z.resolve(i?i.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let i=Pi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ct.newInvalidDocument(r))}),z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Pi();const o=n.path,a=new se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||HM(WM(h),i)<=0||(r.has(h.key)||sd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,i,r){oe()}Or(e,n){return z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new c2(this)}getSize(e){return z.resolve(this.size)}}class c2 extends t2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.persistence=e,this.Nr=new Wo(n=>Dm(n),Mm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Um,this.targetCount=0,this.kr=Ao.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),z.waitFor(s).next(()=>r)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return z.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),z.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return z.resolve(i)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Pm(0),this.Kr=!1,this.Kr=!0,this.$r=new o2,this.referenceDelegate=e(this),this.Ur=new u2(this),this.indexManager=new ZO,this.remoteDocumentCache=function(r){return new l2(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new XO(n),this.Gr=new r2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new s2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new a2(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ee("MemoryPersistence","Starting transaction:",e);const r=new d2(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class d2 extends KM{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.Jr=new Um,this.Yr=null}static Zr(e){return new Bm(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),z.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,i=>{const r=se.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ye(),r=ye();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new zm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return GA()?8:GM(Nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new f2;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(ma()<=ve.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(ma()<=ve.DEBUG&&ee("QueryEngine","Query:",zs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(ma()<=ve.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):z.resolve())}Yi(e,n){if(A0(n))return z.resolve(null);let i=Jn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Zp(n,null,"F"),i=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ye(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Zp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return A0(n)||r.isEqual(ae.min())?z.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?z.resolve(null):(ma()<=ve.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zs(n)),this.rs(e,o,n,$M(r,-1)).next(a=>a))})}ts(e,n){let i=new wt(pI(e));return n.forEach((r,s)=>{sd(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return ma()<=ve.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",zs(n)),this.Ji.getDocumentsMatchingQuery(e,n,br.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new We(Ie),this._s=new Wo(s=>Dm(s),Mm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function m2(t,e,n,i){return new g2(t,e,n,i)}async function jI(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ye();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function y2(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=z.resolve();return f.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(b=>{const w=c.docVersions.get(v);be(w!==null),b.version.compareTo(w)<0&&(d.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function VI(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function v2(t,e){const n=ue(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(bt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(b,w,T){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=Pi(),c=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(_2(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(ae.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function _2(t,e,n){let i=ye(),r=ye();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Pi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function w2(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function E2(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,z.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new nr(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function ig(t,e,n){const i=ue(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Jl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function B0(t,e,n){const i=ue(t);let r=ae.min(),s=ye();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ue(l),f=d._s.get(h);return f!==void 0?z.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(i,o,Jn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:ae.min(),n?s:ye())).next(a=>(b2(i,fO(e),a),{documents:a,Ts:s})))}function b2(t,e,n){let i=t.us.get(e)||ae.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class z0{constructor(){this.activeTargetIds=_O()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T2{constructor(){this.so=new z0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new z0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc=null;function Tf(){return Wc===null?Wc=function(){return 268435456+Math.round(2147483648*Math.random())}():Wc++,"0x"+Wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class k2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Tf(),l=this.xo(n,i.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw So("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$o}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=I2[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Tf();return new Promise((o,a)=>{const l=new Xx;l.setWithCredentials(!0),l.listenOnce(Jx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case bu.NO_ERROR:const h=l.getResponseJson();ee(kt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case bu.TIMEOUT:ee(kt,`RPC '${e}' ${s} timed out`),a(new te(U.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:const d=l.getStatus();if(ee(kt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(T)>=0?T:U.UNKNOWN}(m.status);a(new te(v,m.message))}else a(new te(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(U.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{ee(kt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);ee(kt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=Tf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tI(),a=eI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");ee(kt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const v=new S2({Io:w=>{m?ee(kt,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(f||(ee(kt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),ee(kt,`RPC '${e}' stream ${r} sending:`,w),d.send(w))},To:()=>d.close()}),b=(w,T,E)=>{w.listen(T,S=>{try{E(S)}catch(N){setTimeout(()=>{throw N},0)}})};return b(d,Aa.EventType.OPEN,()=>{m||(ee(kt,`RPC '${e}' stream ${r} transport opened.`),v.yo())}),b(d,Aa.EventType.CLOSE,()=>{m||(m=!0,ee(kt,`RPC '${e}' stream ${r} transport closed`),v.So())}),b(d,Aa.EventType.ERROR,w=>{m||(m=!0,So(kt,`RPC '${e}' stream ${r} transport errored:`,w),v.So(new te(U.UNAVAILABLE,"The operation could not be completed")))}),b(d,Aa.EventType.MESSAGE,w=>{var T;if(!m){const E=w.data[0];be(!!E);const S=E,N=S.error||((T=S[0])===null||T===void 0?void 0:T.error);if(N){ee(kt,`RPC '${e}' stream ${r} received error:`,N);const D=N.status;let O=function(I){const C=Je[I];if(C!==void 0)return kI(C)}(D),x=N.message;O===void 0&&(O=U.INTERNAL,x="Unknown error status: "+D+" with message "+N.message),m=!0,v.So(new te(O,x)),d.close()}else ee(kt,`RPC '${e}' stream ${r} received:`,E),v.bo(E)}}),b(a,Zx.STAT_EVENT,w=>{w.stat===Gp.PROXY?ee(kt,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===Gp.NOPROXY&&ee(kt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){return new FO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $m(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Ci(n.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new te(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class C2 extends UI{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=BO(this.serializer,e),i=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?rn(o.readTime):ae.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=ng(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Jp(l)?{documents:$O(s,l)}:{query:WO(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AI(s,o.resumeToken);const c=eg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=mh(s,o.snapshotVersion.toTimestamp());const c=eg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=qO(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=ng(this.serializer),n.removeTarget=e,this.a_(n)}}class P2 extends UI{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=zO(e.writeResults,e.commitTime),i=rn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=ng(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>MI(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,tg(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(U.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,tg(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class R2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ci(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Ps(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await ic(c),c.q_.set("Unknown"),c.L_.delete(4),await ud(c)}(this))})}),this.q_=new R2(i,r)}}async function ud(t){if(Ps(t))for(const e of t.B_)await e(!0)}async function ic(t){for(const e of t.B_)await e(!1)}function BI(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Km(n)?qm(n):Ho(n).r_()&&Hm(n,e))}function Wm(t,e){const n=ue(t),i=Ho(n);n.N_.delete(e),i.r_()&&zI(n,e),n.N_.size===0&&(i.r_()?i.o_():Ps(n)&&n.q_.set("Unknown"))}function Hm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ho(t).A_(e)}function zI(t,e){t.Q_.xe(e),Ho(t).R_(e)}function qm(t){t.Q_=new DO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ho(t).start(),t.q_.v_()}function Km(t){return Ps(t)&&!Ho(t).n_()&&t.N_.size>0}function Ps(t){return ue(t).L_.size===0}function $I(t){t.Q_=void 0}async function D2(t){t.q_.set("Online")}async function M2(t){t.N_.forEach((e,n)=>{Hm(t,e)})}async function O2(t,e){$I(t),Km(t)?(t.q_.M_(e),qm(t)):t.q_.set("Unknown")}async function L2(t,e,n){if(t.q_.set("Online"),e instanceof PI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vh(t,i)}else if(e instanceof Iu?t.Q_.Ke(e):e instanceof CI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const i=await VI(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(bt.EMPTY_BYTE_STRING,h.snapshotVersion)),zI(s,l);const d=new nr(h.target,l,c,h.sequenceNumber);Hm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){ee("RemoteStore","Failed to raise snapshot:",i),await vh(t,i)}}async function vh(t,e,n){if(!Jl(e))throw e;t.L_.add(1),await ic(t),t.q_.set("Offline"),n||(n=()=>VI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ud(t)})}function WI(t,e){return e().catch(n=>vh(t,n,e))}async function hd(t){const e=ue(t),n=xr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;F2(e);)try{const r=await w2(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,j2(e,r)}catch(r){await vh(e,r)}HI(e)&&qI(e)}function F2(t){return Ps(t)&&t.O_.length<10}function j2(t,e){t.O_.push(e);const n=xr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function HI(t){return Ps(t)&&!xr(t).n_()&&t.O_.length>0}function qI(t){xr(t).start()}async function V2(t){xr(t).p_()}async function U2(t){const e=xr(t);for(const n of t.O_)e.m_(n.mutations)}async function B2(t,e,n){const i=t.O_.shift(),r=Fm.from(i,e,n);await WI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await hd(t)}async function z2(t,e){e&&xr(t).V_&&await async function(i,r){if(function(o){return SI(o)&&o!==U.ABORTED}(r.code)){const s=i.O_.shift();xr(i).s_(),await WI(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await hd(i)}}(t,e),HI(t)&&qI(t)}async function W0(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const i=Ps(n);n.L_.add(3),await ic(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ud(n)}async function $2(t,e){const n=ue(t);e?(n.L_.delete(2),await ud(n)):e||(n.L_.add(2),await ic(n),n.q_.set("Unknown"))}function Ho(t){return t.K_||(t.K_=function(n,i,r){const s=ue(n);return s.w_(),new C2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:D2.bind(null,t),Ro:M2.bind(null,t),mo:O2.bind(null,t),d_:L2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Km(t)?qm(t):t.q_.set("Unknown")):(await t.K_.stop(),$I(t))})),t.K_}function xr(t){return t.U_||(t.U_=function(n,i,r){const s=ue(n);return s.w_(),new P2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:V2.bind(null,t),mo:z2.bind(null,t),f_:U2.bind(null,t),g_:B2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hd(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Gm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qm(t,e){if(Ci("AsyncQueue",`${e}: ${t}`),Jl(t))return new te(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.comparator=e?(n,i)=>e(n,i)||se.comparator(n.key,i.key):(n,i)=>se.comparator(n.key,i.key),this.keyedMap=Ra(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new go;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.W_=new We(se.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ro{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ro(e,n,go.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class H2{constructor(){this.queries=q0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ue(n),s=r.queries;r.queries=q0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new te(U.ABORTED,"Firestore shutting down"))}}function q0(){return new Wo(t=>fI(t),rd)}async function q2(t,e){const n=ue(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new W2,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Qm(o,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ym(n)}async function K2(t,e){const n=ue(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function G2(t,e){const n=ue(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Ym(n)}function Q2(t,e,n){const i=ue(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Ym(t){t.Y_.forEach(e=>{e.next()})}var rg,K0;(K0=rg||(rg={})).ea="default",K0.Cache="cache";class Y2{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ro(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.key=e}}class GI{constructor(e){this.key=e}}class X2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=pI(e),this.Ra=new go(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new H0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=sd(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;f&&m?f.data.isEqual(m.data)?v!==b&&(i.track({type:3,doc:m}),w=!0):this.ga(f,m)||(i.track({type:2,doc:m}),w=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),w=!0):f&&!m&&(i.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(m?(o=o.add(m),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,v){const b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return b(m)-b(v)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ro(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new H0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new GI(i))}),this.da.forEach(i=>{e.has(i)||n.push(new KI(i))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ro.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class J2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Z2{constructor(e){this.key=e,this.va=!1}}class eL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Wo(a=>fI(a),rd),this.Ma=new Map,this.xa=new Set,this.Oa=new We(se.comparator),this.Na=new Map,this.La=new Um,this.Ba={},this.ka=new Map,this.qa=Ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function tL(t,e,n=!0){const i=eS(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await QI(i,e,n,!0),r}async function nL(t,e){const n=eS(t);await QI(n,e,!0,!1)}async function QI(t,e,n,i){const r=await E2(t.localStore,Jn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await iL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&BI(t.remoteStore,r),a}async function iL(t,e,n,i,r){t.Ka=(d,f,m)=>async function(b,w,T,E){let S=w.view.ma(T);S.ns&&(S=await B0(b.localStore,w.query,!1).then(({documents:x})=>w.view.ma(x,S)));const N=E&&E.targetChanges.get(w.targetId),D=E&&E.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(S,b.isPrimaryClient,N,D);return Q0(b,w.targetId,O.wa),O.snapshot}(t,d,f,m);const s=await B0(t.localStore,e,!0),o=new X2(e,s.Ts),a=o.ma(s.documents),l=nc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);Q0(t,n,c.wa);const h=new J2(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function rL(t,e,n){const i=ue(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!rd(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ig(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Wm(i.remoteStore,r.targetId),sg(i,r.targetId)}).catch(Xl)):(sg(i,r.targetId),await ig(i.localStore,r.targetId,!0))}async function sL(t,e){const n=ue(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Wm(n.remoteStore,i.targetId))}async function oL(t,e,n){const i=fL(t);try{const r=await function(o,a){const l=ue(o),c=st.now(),h=a.reduce((m,v)=>m.add(v.key),ye());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Pi(),b=ye();return l.cs.getEntries(m,h).next(w=>{v=w,v.forEach((T,E)=>{E.isValidDocument()||(b=b.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(w=>{d=w;const T=[];for(const E of a){const S=kO(E,d.get(E.key).overlayedDocument);S!=null&&T.push(new Mr(E.key,S,oI(S.value.mapValue),it.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,T,a)}).next(w=>{f=w;const T=w.applyToLocalDocumentSet(d,b);return l.documentOverlayCache.saveOverlays(m,w.batchId,T)})}).then(()=>({batchId:f.batchId,changes:mI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new We(Ie)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await rc(i,r.changes),await hd(i.remoteStore)}catch(r){const s=Qm(r,"Failed to persist write");n.reject(s)}}async function YI(t,e){const n=ue(t);try{const i=await v2(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(be(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?be(o.va):r.removedDocuments.size>0&&(be(o.va),o.va=!1))}),await rc(n,i,e)}catch(i){await Xl(i)}}function G0(t,e,n){const i=ue(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&Ym(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function aL(t,e,n){const i=ue(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new We(se.comparator);o=o.insert(s,ct.newNoDocument(s,ae.min()));const a=ye().add(s),l=new ld(ae.min(),new Map,new We(Ie),o,a);await YI(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Xm(i)}else await ig(i.localStore,e,!1).then(()=>sg(i,e,n)).catch(Xl)}async function lL(t,e){const n=ue(t),i=e.batch.batchId;try{const r=await y2(n.localStore,e);JI(n,i,null),XI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await rc(n,r)}catch(r){await Xl(r)}}async function cL(t,e,n){const i=ue(t);try{const r=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(be(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);JI(i,e,n),XI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await rc(i,r)}catch(r){await Xl(r)}}function XI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function JI(t,e,n){const i=ue(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function sg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||ZI(t,i)})}function ZI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Wm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Xm(t))}function Q0(t,e,n){for(const i of n)i instanceof KI?(t.La.addReference(i.key,e),uL(t,i)):i instanceof GI?(ee("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||ZI(t,i.key)):oe()}function uL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(i),Xm(t))}function Xm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Re.fromString(e)),i=t.qa.next();t.Na.set(i,new Z2(n)),t.Oa=t.Oa.insert(n,i),BI(t.remoteStore,new nr(Jn(Om(n.path)),i,"TargetPurposeLimboResolution",Pm.oe))}}async function rc(t,e,n){const i=ue(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=zm.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=ue(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>z.forEach(c,f=>z.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>z.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Jl(d))throw d;ee("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),v=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(f,b)}}}(i.localStore,s))}async function hL(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const i=await jI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new te(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rc(n,i.hs)}}function dL(t,e){const n=ue(t),i=n.Na.get(e);if(i&&i.va)return ye().add(i.key);{let r=ye();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function eS(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aL.bind(null,e),e.Ca.d_=G2.bind(null,e.eventManager),e.Ca.$a=Q2.bind(null,e.eventManager),e}function fL(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cL.bind(null,e),e}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return m2(this.persistence,new p2,e.initialUser,this.serializer)}Ga(e){return new h2(Bm.Zr,this.serializer)}Wa(e){return new T2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class og{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>G0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hL.bind(null,this.syncEngine),await $2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new H2}()}createDatastore(e){const n=cd(e.databaseInfo.databaseId),i=function(s){return new k2(s)}(e.databaseInfo);return function(s,o,a,l){return new A2(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new N2(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>G0(this.syncEngine,n,0),function(){return $0.D()?new $0:new x2}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new eL(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ue(r);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ic(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}og.provider={build:()=>new og};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=ue(r),a={documents:s.map(d=>yh(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Re.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=UO(o.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());be(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=se.fromPath(i);this.mutations.push(new II(r,this.precondition(r)))}),await async function(i,r){const s=ue(i),o={writes:r.map(a=>MI(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Re.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw oe();n=ae.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new te(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ae.min())?it.exists(!1):it.updateTime(n):it.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ae.min()))throw new te(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return it.updateTime(n)}return it.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new $m(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new gL(this.datastore),n=this.cu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const n=this.updateFunction(e);return!Zl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!SI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ct.UNAUTHENTICATED,this.clientId=iI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Qm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function If(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await jI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Y0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vL(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>W0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>W0(e.remoteStore,r)),t._onlineComponents=e}async function vL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await If(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await If(t,new _h)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await If(t,new _h);return t._offlineComponents}async function Jm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Y0(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Y0(t,new og))),t._onlineComponents}function _L(t){return Jm(t).then(e=>e.syncEngine)}function wL(t){return Jm(t).then(e=>e.datastore)}async function X0(t){const e=await Jm(t),n=e.eventManager;return n.onListen=tL.bind(null,e.syncEngine),n.onUnlisten=rL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e,n){if(!n)throw new te(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EL(t,e,n,i){if(e===!0&&i===!0)throw new te(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z0(t){if(!se.isDocumentKey(t))throw new te(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ew(t){if(se.isDocumentKey(t))throw new te(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zm(t);throw new te(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new te(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tw(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new MM;switch(i.type){case"firstParty":return new jM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=J0.get(n);i&&(ee("ComponentProvider","Removing Datastore"),J0.delete(n),i.terminate())}(this),Promise.resolve()}}function bL(t,e,n,i={}){var r;const s=(t=Rn(t,dd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Ct.MOCK_USER;else{a=zA(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new te(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ct(c)}t._authCredentials=new OM(new nI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fd(this.firestore,e,this._query)}}class Vt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}}class vr extends fd{constructor(e,n,i){super(e,n,Om(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new se(e))}withConverter(e){return new vr(this.firestore,e,this._path)}}function TL(t,e,...n){if(t=Ve(t),nS("collection","path",e),t instanceof dd){const i=Re.fromString(e,...n);return ew(i),new vr(t,null,i)}{if(!(t instanceof Vt||t instanceof vr))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Re.fromString(e,...n));return ew(i),new vr(t.firestore,null,i)}}function _s(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=iI.newId()),nS("doc","path",e),t instanceof dd){const i=Re.fromString(e,...n);return Z0(i),new Vt(t,null,new se(i))}{if(!(t instanceof Vt||t instanceof vr))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Re.fromString(e,...n));return Z0(i),new Vt(t.firestore,t instanceof vr?t.converter:null,new se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $m(this,"async_queue_retry"),this.Vu=()=>{const i=xf();i&&ee("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=xf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new yr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Jl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ci("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Gm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function iw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ir extends dd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new nw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nw(e),this._firestoreClient=void 0,await e}}}function xL(t,e){const n=typeof t=="object"?t:dx(),i=typeof t=="string"?t:"(default)",r=ql(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=UA("firestore");s&&bL(r,...s)}return r}function pd(t){if(t._terminated)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IL(t),t._firestoreClient}function IL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new XM(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,tS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new yL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ws(bt.fromBase64String(e))}catch(n){throw new te(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ws(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=/^__.*__$/;class kL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ec(e,this.data,n,this.fieldTransforms)}}class iS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class ny{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ny(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return wh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(rS(this.Cu)&&SL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class CL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||cd(e)}Qu(e,n,i,r=!1){return new ny({Cu:e,methodName:n,qu:i,path:yt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function md(t){const e=t._freezeSettings(),n=cd(t._databaseId);return new CL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iy(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);ay("Data must be an object, but it was:",o,i);const a=sS(i,o);let l,c;if(s.merge)l=new tn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=ag(e,d,n);if(!o.contains(f))throw new te(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);aS(h,f)||h.push(f)}l=new tn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new kL(new Ft(a),l,c)}class yd extends gd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}class ry extends gd{_toFieldTransform(e){return new TO(e.path,new Nl)}isEqual(e){return e instanceof ry}}function sy(t,e,n,i){const r=t.Qu(1,e,n);ay("Data must be an object, but it was:",r,i);const s=[],o=Ft.empty();Cs(i,(l,c)=>{const h=ly(e,l,n);c=Ve(c);const d=r.Nu(h);if(c instanceof yd)s.push(h);else{const f=vd(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new tn(s);return new iS(o,a,r.fieldTransforms)}function oy(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[ag(e,i,n)],l=[r];if(s.length%2!=0)throw new te(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(ag(e,s[f])),l.push(s[f+1]);const c=[],h=Ft.empty();for(let f=a.length-1;f>=0;--f)if(!aS(c,a[f])){const m=a[f];let v=l[f];v=Ve(v);const b=o.Nu(m);if(v instanceof yd)c.push(m);else{const w=vd(v,b);w!=null&&(c.push(m),h.set(m,w))}}const d=new tn(c);return new iS(h,d,o.fieldTransforms)}function vd(t,e){if(oS(t=Ve(t)))return ay("Unsupported field value:",e,t),sS(t,e);if(t instanceof gd)return function(i,r){if(!rS(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=vd(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ve(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=st.fromDate(i);return{timestampValue:mh(r.serializer,s)}}if(i instanceof st){const s=new st(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mh(r.serializer,s)}}if(i instanceof ey)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ws)return{bytesValue:AI(r.serializer,i._byteString)};if(i instanceof Vt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ty)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Lm(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Zm(i)}`)}(t,e)}function sS(t,e){const n={};return rI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(i,r)=>{const s=vd(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function oS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof ey||t instanceof ws||t instanceof Vt||t instanceof gd||t instanceof ty)}function ay(t,e,n){if(!oS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Zm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function ag(t,e,n){if((e=Ve(e))instanceof qo)return e._internalPath;if(typeof e=="string")return ly(t,e);throw wh("Field path arguments must be of type string or ",t,!1,void 0,n)}const PL=new RegExp("[~\\*/\\[\\]]");function ly(t,e,n){if(e.search(PL)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qo(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new te(U.INVALID_ARGUMENT,a+t+l)}function aS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AL extends Eh{data(){return super.data()}}function lS(t,e){return typeof e=="string"?ly(t,e):e instanceof qo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cS{convertValue(e,n="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Cs(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ge(o.doubleValue));return new ty(s)}convertGeoPoint(e){return new ey(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Rm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Pl(e));default:return null}}convertTimestamp(e){const n=Tr(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Re.fromString(e);be(FI(i));const r=new Al(i.get(1),i.get(3)),s=new se(i.popFirst(5));return r.isEqual(n)||Ci(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class NL extends cS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ws(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uy extends Eh{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(lS("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Su extends uy{data(e={}){return super.data(e)}}class DL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ro(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Su(this._firestore,this._userDataWriter,i.key,i,new ro(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Su(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ro(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Su(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ro(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ML(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ML(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}class hy extends cS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ws(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function uS(t,e,n){t=Rn(t,Vt);const i=Rn(t.firestore,Ir),r=cy(t.converter,e,n);return _d(i,[iy(md(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,it.none())])}function OL(t,e,n,...i){t=Rn(t,Vt);const r=Rn(t.firestore,Ir),s=md(r);let o;return o=typeof(e=Ve(e))=="string"||e instanceof qo?oy(s,"updateDoc",t._key,e,n,i):sy(s,"updateDoc",t._key,e),_d(r,[o.toMutation(t._key,it.exists(!0))])}function LL(t){return _d(Rn(t.firestore,Ir),[new tc(t._key,it.none())])}function hS(t,...e){var n,i,r;t=Ve(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||iw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iw(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof Vt)c=Rn(t.firestore,Ir),h=Om(t._key.path),l={next:d=>{e[o]&&e[o](FL(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Rn(t,fd);c=Rn(d.firestore,Ir),h=d._query;const f=new hy(c);l={next:m=>{e[o]&&e[o](new DL(c,f,d,m))},error:e[o+1],complete:e[o+2]},RL(t._query)}return function(f,m,v,b){const w=new pL(b),T=new Y2(m,w,v);return f.asyncQueue.enqueueAndForget(async()=>q2(await X0(f),T)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>K2(await X0(f),T))}}(pd(c),h,a,l)}function _d(t,e){return function(i,r){const s=new yr;return i.asyncQueue.enqueueAndForget(async()=>oL(await _L(i),r,s)),s.promise}(pd(t),e)}function FL(t,e,n){const i=n.docs.get(e._key),r=new hy(t);return new uy(t,r,e._key,i,new ro(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=md(e)}set(e,n,i){this._verifyNotCommitted();const r=Ji(e,this._firestore),s=cy(r.converter,n,i),o=iy(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,it.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=Ji(e,this._firestore);let o;return o=typeof(n=Ve(n))=="string"||n instanceof qo?oy(this._dataReader,"WriteBatch.update",s._key,n,i,r):sy(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,it.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ji(e,this._firestore);return this._mutations=this._mutations.concat(new tc(n._key,it.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ji(t,e){if((t=Ve(t)).firestore!==e)throw new te(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=md(n)}get(n){const i=Ji(n,this._firestore),r=new NL(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return oe();const o=s[0];if(o.isFoundDocument())return new Eh(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new Eh(this._firestore,r,i._key,null,i.converter);throw oe()})}set(n,i,r){const s=Ji(n,this._firestore),o=cy(s.converter,i,r),a=iy(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){const o=Ji(n,this._firestore);let a;return a=typeof(i=Ve(i))=="string"||i instanceof qo?oy(this._dataReader,"Transaction.update",o._key,i,r,s):sy(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=Ji(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ji(e,this._firestore),i=new hy(this._firestore);return super.get(e).then(r=>new uy(this._firestore,i,n._key,r._document,new ro(!1,!1),n.converter))}}function dS(t,e,n){t=Rn(t,Ir);const i=Object.assign(Object.assign({},jL),n);return function(s){if(s.maxAttempts<1)throw new te(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new yr;return s.asyncQueue.enqueueAndForget(async()=>{const c=await wL(s);new mL(s.asyncQueue,c,a,o,l).au()}),l.promise}(pd(t),r=>e(new UL(t,r)),i)}function sc(){return new ry("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){return pd(t=Rn(t,Ir)),new VL(t,e=>_d(t,e))}(function(e,n=!0){(function(r){$o=r})(zo),ei(new Dn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Ir(new LM(i.getProvider("auth-internal")),new UM(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),yn(w0,"4.7.3",e),yn(w0,"4.7.3","esm2017")})();const fS="@firebase/installations",dy="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=1e4,gS=`w:${dy}`,mS="FIS_v2",zL="https://firebaseinstallations.googleapis.com/v1",$L=60*60*1e3,WL="installations",HL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Es=new Ss(WL,HL,qL);function yS(t){return t instanceof Fn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS({projectId:t}){return`${zL}/projects/${t}/installations`}function _S(t){return{token:t.token,requestStatus:2,expiresIn:GL(t.expiresIn),creationTime:Date.now()}}async function wS(t,e){const i=(await e.json()).error;return Es.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function ES({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function KL(t,{refreshToken:e}){const n=ES(t);return n.append("Authorization",QL(e)),n}async function bS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function GL(t){return Number(t.replace("s","000"))}function QL(t){return`${mS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=vS(t),r=ES(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:mS,appId:t.appId,sdkVersion:gS},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await bS(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:_S(c.authToken)}}else throw await wS("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=/^[cdef][\w-]{21}$/,lg="";function ZL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=eF(t);return JL.test(n)?n:lg}catch{return lg}}function eF(t){return XL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Map;function IS(t,e){const n=wd(t);SS(n,e),tF(n,e)}function SS(t,e){const n=xS.get(t);if(n)for(const i of n)i(e)}function tF(t,e){const n=nF();n&&n.postMessage({key:t,fid:e}),iF()}let ns=null;function nF(){return!ns&&"BroadcastChannel"in self&&(ns=new BroadcastChannel("[Firebase] FID Change"),ns.onmessage=t=>{SS(t.data.key,t.data.fid)}),ns}function iF(){xS.size===0&&ns&&(ns.close(),ns=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="firebase-installations-database",sF=1,bs="firebase-installations-store";let Sf=null;function fy(){return Sf||(Sf=ux(rF,sF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bs)}}})),Sf}async function bh(t,e){const n=wd(t),r=(await fy()).transaction(bs,"readwrite"),s=r.objectStore(bs),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&IS(t,e.fid),e}async function kS(t){const e=wd(t),i=(await fy()).transaction(bs,"readwrite");await i.objectStore(bs).delete(e),await i.done}async function Ed(t,e){const n=wd(t),r=(await fy()).transaction(bs,"readwrite"),s=r.objectStore(bs),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&IS(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function py(t){let e;const n=await Ed(t.appConfig,i=>{const r=oF(i),s=aF(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===lg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function oF(t){const e=t||{fid:ZL(),registrationStatus:0};return CS(e)}function aF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Es.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=lF(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cF(t)}:{installationEntry:e}}async function lF(t,e){try{const n=await YL(t,e);return bh(t.appConfig,n)}catch(n){throw yS(n)&&n.customData.serverCode===409?await kS(t.appConfig):await bh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function cF(t){let e=await rw(t.appConfig);for(;e.registrationStatus===1;)await TS(100),e=await rw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await py(t);return i||n}return e}function rw(t){return Ed(t,e=>{if(!e)throw Es.create("installation-not-found");return CS(e)})}function CS(t){return uF(t)?{fid:t.fid,registrationStatus:0}:t}function uF(t){return t.registrationStatus===1&&t.registrationTime+pS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF({appConfig:t,heartbeatServiceProvider:e},n){const i=dF(t,n),r=KL(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:gS,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await bS(()=>fetch(i,a));if(l.ok){const c=await l.json();return _S(c)}else throw await wS("Generate Auth Token",l)}function dF(t,{fid:e}){return`${vS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gy(t,e=!1){let n;const i=await Ed(t.appConfig,s=>{if(!PS(s))throw Es.create("not-registered");const o=s.authToken;if(!e&&gF(o))return s;if(o.requestStatus===1)return n=fF(t,e),s;{if(!navigator.onLine)throw Es.create("app-offline");const a=yF(s);return n=pF(t,a),a}});return n?await n:i.authToken}async function fF(t,e){let n=await sw(t.appConfig);for(;n.authToken.requestStatus===1;)await TS(100),n=await sw(t.appConfig);const i=n.authToken;return i.requestStatus===0?gy(t,e):i}function sw(t){return Ed(t,e=>{if(!PS(e))throw Es.create("not-registered");const n=e.authToken;return vF(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function pF(t,e){try{const n=await hF(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await bh(t.appConfig,i),n}catch(n){if(yS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await kS(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await bh(t.appConfig,i)}throw n}}function PS(t){return t!==void 0&&t.registrationStatus===2}function gF(t){return t.requestStatus===2&&!mF(t)}function mF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$L}function yF(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function vF(t){return t.requestStatus===1&&t.requestTime+pS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(t){const e=t,{installationEntry:n,registrationPromise:i}=await py(e);return i?i.catch(console.error):gy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e=!1){const n=t;return await EF(n),(await gy(n,e)).token}async function EF(t){const{registrationPromise:e}=await py(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t){if(!t||!t.options)throw kf("App Configuration");if(!t.name)throw kf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw kf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function kf(t){return Es.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="installations",TF="installations-internal",xF=t=>{const e=t.getProvider("app").getImmediate(),n=bF(e),i=ql(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},IF=t=>{const e=t.getProvider("app").getImmediate(),n=ql(e,AS).getImmediate();return{getId:()=>_F(n),getToken:r=>wF(n,r)}};function SF(){ei(new Dn(AS,xF,"PUBLIC")),ei(new Dn(TF,IF,"PRIVATE"))}SF();yn(fS,dy);yn(fS,dy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="analytics",kF="firebase_id",CF="origin",PF=60*1e3,AF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",my="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=new Zh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},vn=new Ss("analytics","Analytics",RF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t){if(!t.startsWith(my)){const e=vn.create("invalid-gtag-resource",{gtagURL:t});return Yt.warn(e.message),""}return t}function RS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function DF(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function MF(t,e){const n=DF("firebase-js-sdk-policy",{createScriptURL:NF}),i=document.createElement("script"),r=`${my}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function OF(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function LF(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await RS(n)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){Yt.error(a)}t("config",r,s)}async function FF(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await RS(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Yt.error(s)}}function jF(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await FF(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await LF(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Yt.error(a)}}return r}function VF(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=jF(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function UF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(my)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=30,zF=1e3;class $F{constructor(e={},n=zF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const NS=new $F;function WF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function HF(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:WF(i)},s=AF.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw vn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function qF(t,e=NS,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw vn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw vn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new QF;return setTimeout(async()=>{a.abort()},PF),DS({appId:i,apiKey:r,measurementId:s},o,a,e)}async function DS(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=NS){var s;const{appId:o,measurementId:a}=t;try{await KF(i,e)}catch(l){if(a)return Yt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await HF(t);return r.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!GF(c)){if(r.deleteThrottleMetadata(o),a)return Yt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?H_(n,r.intervalMillis,BF):H_(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Yt.debug(`Calling attemptFetch again in ${h} millis`),DS(t,d,i,r)}}function KF(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function GF(t){if(!(t instanceof Fn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class QF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function YF(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XF(){if(ox())try{await ax()}catch(t){return Yt.warn(vn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Yt.warn(vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function JF(t,e,n,i,r,s,o){var a;const l=qF(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Yt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Yt.error(m)),e.push(l);const c=XF().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,c]);UF(s)||MF(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[CF]="firebase",f.update=!0,d!=null&&(f[kF]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.app=e}_delete(){return delete Za[this.app.options.appId],Promise.resolve()}}let Za={},aw=[];const lw={};let Cf="dataLayer",ej="gtag",cw,MS,uw=!1;function tj(){const t=[];if(sx()&&t.push("This is a browser extension environment."),QA()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=vn.create("invalid-analytics-context",{errorInfo:e});Yt.warn(n.message)}}function nj(t,e,n){tj();const i=t.options.appId;if(!i)throw vn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Yt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw vn.create("no-api-key");if(Za[i]!=null)throw vn.create("already-exists",{id:i});if(!uw){OF(Cf);const{wrappedGtag:s,gtagCore:o}=VF(Za,aw,lw,Cf,ej);MS=s,cw=o,uw=!0}return Za[i]=JF(t,aw,lw,e,cw,Cf,n),new ZF(t)}function ij(t,e,n,i){t=Ve(t),YF(MS,Za[t.app.options.appId],e,n,i).catch(r=>Yt.error(r))}const hw="@firebase/analytics",dw="0.10.8";function rj(){ei(new Dn(ow,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return nj(i,r,n)},"PUBLIC")),ei(new Dn("analytics-internal",t,"PRIVATE")),yn(hw,dw),yn(hw,dw,"esm2017");function t(e){try{const n=e.getProvider(ow).getImmediate();return{logEvent:(i,r,s)=>ij(n,i,r,s)}}catch(n){throw vn.create("interop-component-reg-failed",{reason:n})}}}rj();const sj={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},OS=hx(sj),ya=AM(OS),On=xL(OS),LS=M.createContext(null);function oj({children:t}){const[e,n]=M.useState(null),[i,r]=M.useState(!0),[s,o]=M.useState(null);M.useEffect(()=>{const l=vD(ya,c=>{n(c),r(!1)});return()=>l()},[]);const a=M.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,c){o(null);try{return(await dD(ya,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,c){o(null);try{return(await fD(ya,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await _D(ya)},async resetPassword(l){o(null);try{await hD(ya,l)}catch(c){throw o((c==null?void 0:c.message)||"Failed to send reset email."),c}}}),[e,i,s]);return g.jsx(LS.Provider,{value:a,children:t})}function Ni(){return M.useContext(LS)}function aj(){const{user:t,logout:e}=Ni(),n=Bo();async function i(){await e(),n("/dashboard")}return g.jsx("div",{className:"nav",children:g.jsxs("div",{className:"nav-inner",children:[g.jsxs("div",{className:"brand",children:[g.jsx("div",{className:"badge"}),g.jsxs("div",{children:[g.jsx("h1",{children:"Body Recomposition Tracker"}),g.jsx("div",{className:"small",children:"Created by Andre Gomes"})]})]}),g.jsxs("div",{className:"nav-links",children:[g.jsxs("div",{className:"nav-tabs",children:[g.jsx(js,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),g.jsx(js,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&g.jsx(js,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&g.jsx(js,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),g.jsx("div",{className:"nav-actions",children:t?g.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):g.jsxs(g.Fragment,{children:[g.jsx(js,{to:"/login",className:"btn",children:"Log in"}),g.jsx(js,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function fw({children:t}){const{user:e,initializing:n}=Ni();return n?g.jsx("div",{className:"panel",children:g.jsx("div",{className:"muted",children:"Loading"})}):e?t:g.jsx(Fp,{to:"/login",replace:!0})}const FS=M.createContext(null),pw={email:"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],createdAt:null};function lj(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function cj(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:lj(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).sort((e,n)=>String(n.startDateIso||"").localeCompare(String(e.startDateIso||""))):[]}function uj({children:t}){const{user:e}=Ni(),[n,i]=M.useState(pw),[r,s]=M.useState(!1),[o,a]=M.useState(null);M.useEffect(()=>{if(i(pw),a(null),!e)return;const c=_s(On,"users",e.uid);s(!0);const h=hS(c,async d=>{if(!d.exists()){await uS(c,{email:e.email||"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],createdAt:sc()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],cycles:cj(f.cycles),createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=M.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(c){if(!e)throw new Error("Not authenticated");a(null);const h=_s(On,"users",e.uid);await OL(h,c)}}),[n,r,o,e]);return g.jsx(FS.Provider,{value:l,children:t})}function yy(){return M.useContext(FS)}function vy(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function No(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function Th(){return vy(new Date)}function hj(t,e){const n=No(t);return n.setDate(n.getDate()+Number(e)),vy(n)}function dj(t,e){return t.dateIso.localeCompare(e.dateIso)}function _y(t,e,n){const i=TL(On,"users",t,"entries");return hS(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(dj);e(o)},n)}async function fj(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=_s(On,"users",t,"entries",n),r=No(n),s={...e,dateIso:n,date:e.date||r,updatedAt:sc()};await uS(i,s,{merge:!0})}async function pj(t,e){const n=BL(On);for(const i of e||[]){const r=i==null?void 0:i.dateIso,s=i==null?void 0:i.patch;if(!r||!s)continue;const o=_s(On,"users",t,"entries",r);n.update(o,{...s,updatedAt:sc()})}await n.commit()}async function gj(t,e){const n=_s(On,"users",t,"entries",e);await LL(n)}const mj=2/8;function jS({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function Qr(t,e){const n=Number(t),i=Number(e);if(!Number.isFinite(n)||n<=0||!Number.isFinite(i)||i<=0||i>=37)return null;const r=n*(36/(37-i));return Number.isFinite(r)?r:null}function yj({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>r==null||r===""?NaN:Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function Vs(t,e=mj){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function vj(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function Pf(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=vj(i,r,s);return Number.isFinite(o)?o:null}function _j({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=Pf(n,"neck",i),a=Pf(n,"waist",i),l=Pf(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const c=a-o;if(!(c>0))return null;const h=495/(1.0324-.19077*Math.log10(c)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const c=a+l-o;if(!(c>0))return null;const h=495/(1.29579-.35004*Math.log10(c)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function wj({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function VS(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(v=>Br(v.bench)),o=t.map(v=>Br(v.squat)),a=t.map(v=>Br(v.deadlift)),l=v=>{let b=null;return v.map(w=>Number.isFinite(w)?(b=w,w):b)},c=l(s),h=l(o),d=l(a),f=t.map((v,b)=>({dateIso:v.dateIso,weight:Br(v.weight),protein:Br(v.protein),carbs:Br(v.carbs),fats:Br(v.fats),bench:s[b],squat:o[b],deadlift:a[b],calories:jS(v),avgStrength:yj({bench:c[b],squat:h[b],deadlift:d[b]}),bfPct:_j({sex:i,heightCm:r,entry:v,tripleEnabled:n})}));f.forEach(v=>{v.lbm=wj({weightKg:v.weight,bfPct:v.bfPct})});const m={weight:Vs(f.map(v=>v.weight)),bench:Vs(f.map(v=>v.bench)),squat:Vs(f.map(v=>v.squat)),deadlift:Vs(f.map(v=>v.deadlift)),calories:Vs(f.map(v=>v.calories)),avgStrength:Vs(f.map(v=>v.avgStrength))};return f.map((v,b)=>({...v,wma:{weight:m.weight[b],bench:m.bench[b],squat:m.squat[b],deadlift:m.deadlift[b],calories:m.calories[b],avgStrength:m.avgStrength[b]}}))}function Ej(t){var f,m,v,b;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=w=>w*7-1;function s(w){var T;for(let E=w;E>=0;E--){const S=(T=t[E])==null?void 0:T.lbm;if(Number.isFinite(S))return S}return null}for(let w=1;w<=i;w++){const T=(w-1)*7,E=r(w),S=t.slice(T,E+1),N=va(S.map(P=>P.calories)),D=va(S.map(P=>{var ie;return(ie=P==null?void 0:P.wma)==null?void 0:ie.avgStrength})),O=(m=(f=S[0])==null?void 0:f.wma)==null?void 0:m.weight,x=(b=(v=S[S.length-1])==null?void 0:v.wma)==null?void 0:b.weight,_=Number.isFinite(O)&&Number.isFinite(x)?x-O:null;let I=null;if(Number.isFinite(N)&&Number.isFinite(_)){const ie=-_*7700/7;I=N+ie}const C=s(E);let A=null,R="";Number.isFinite(C)&&Number.isFinite(_)&&(A=Math.max(0,-_)/C*100,A<.5?R="Conservative":A<=1?R="Optimal":R="Aggressive"),e.push({week:w,avgCalories:N,weightChange:_,tdee:I,avgStrengthWma:D,lbm:C,lossRatePct:A,lossRateStatus:R,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(w=>w.tdee).filter(Number.isFinite),a=o.length?va(o):null,l=e.slice(0,2).map(w=>w.avgStrengthWma).filter(Number.isFinite),c=l.length?va(l):null,h=e.slice(0,2).map(w=>Number.isFinite(w.weightChange)?Math.max(0,-w.weightChange):null).filter(Number.isFinite),d=h.length?va(h):null;if(Number.isFinite(a))for(const w of e)Number.isFinite(w.tdee)&&(w.tdeeChangeFromBaseline=w.tdee-a,w.adaptationPct=w.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:c,baselineWeeklyLoss:d}}function Br(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function va(t){const e=(t||[]).map(n=>n==null||n===""?NaN:Number(n)).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function li(){let t=0,e=0;for(;t===0;)t=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}function gw(t,e,n){return Math.max(e,Math.min(n,t))}function bj(){return{email:"sample@demo.local",sex:"male",height:175,triplemeasurements:!1,createdAt:null}}function Tj(t=60){const e=new Date;e.setDate(e.getDate()-(t-1));const n=[];let i=90,r=100,s=140,o=180;for(let a=0;a<t;a++){const l=new Date(e);l.setDate(e.getDate()+a);const c=vy(l),d=2400-Math.floor(a/14)*125;i-=5.5/(t-1),r+=4/(t-1),s+=4/(t-1),o+=5/(t-1);const f=i+li()*.8,m=r+li()*2,v=s+li()*2.5,b=o+li()*2.8,w=180+li()*10,T=70+li()*6,E=(d-4*w-9*T)/4+li()*10,S={id:c,dateIso:c,date:null,weight:Hc(f),protein:Af(w),carbs:Af(gw(E,100,320)),fats:Af(gw(T,45,95)),bench:Hc(m),squat:Hc(v),deadlift:Hc(b),neck:null,waist:null,hip:null};if(a%7===0){const O=96+-7*(a/(t-1));S.neck=40+li()*.3,S.waist=O+li()*.6}n.push(S)}return n}function Af(t){return Number.isFinite(t)?Math.round(t):null}function Hc(t){return Number.isFinite(t)?Math.round(t*10)/10:null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function oc(t){return t+.5|0}const ir=(t,e,n)=>Math.max(Math.min(t,n),e);function Da(t){return ir(oc(t*2.55),0,255)}function _r(t){return ir(oc(t*255),0,255)}function pi(t){return ir(oc(t/2.55)/100,0,1)}function mw(t){return ir(oc(t*100),0,100)}const hn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},cg=[..."0123456789ABCDEF"],xj=t=>cg[t&15],Ij=t=>cg[(t&240)>>4]+cg[t&15],qc=t=>(t&240)>>4===(t&15),Sj=t=>qc(t.r)&&qc(t.g)&&qc(t.b)&&qc(t.a);function kj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&hn[t[1]]*17,g:255&hn[t[2]]*17,b:255&hn[t[3]]*17,a:e===5?hn[t[4]]*17:255}:(e===7||e===9)&&(n={r:hn[t[1]]<<4|hn[t[2]],g:hn[t[3]]<<4|hn[t[4]],b:hn[t[5]]<<4|hn[t[6]],a:e===9?hn[t[7]]<<4|hn[t[8]]:255})),n}const Cj=(t,e)=>t<255?e(t):"";function Pj(t){var e=Sj(t)?xj:Ij;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Cj(t.a,e):void 0}const Aj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function US(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Rj(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function Nj(t,e,n){const i=US(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Dj(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function wy(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=Dj(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function Ey(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(_r)}function by(t,e,n){return Ey(US,t,e,n)}function Mj(t,e,n){return Ey(Nj,t,e,n)}function Oj(t,e,n){return Ey(Rj,t,e,n)}function BS(t){return(t%360+360)%360}function Lj(t){const e=Aj.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Da(+e[5]):_r(+e[5]));const r=BS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Mj(r,s,o):e[1]==="hsv"?i=Oj(r,s,o):i=by(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function Fj(t,e){var n=wy(t);n[0]=BS(n[0]+e),n=by(n),t.r=n[0],t.g=n[1],t.b=n[2]}function jj(t){if(!t)return;const e=wy(t),n=e[0],i=mw(e[1]),r=mw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${pi(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const yw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Vj(){const t={},e=Object.keys(vw),n=Object.keys(yw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,yw[s]);s=parseInt(vw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Kc;function Uj(t){Kc||(Kc=Vj(),Kc.transparent=[0,0,0,0]);const e=Kc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Bj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zj(t){const e=Bj.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Da(o):ir(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Da(i):ir(i,0,255)),r=255&(e[4]?Da(r):ir(r,0,255)),s=255&(e[6]?Da(s):ir(s,0,255)),{r:i,g:r,b:s,a:n}}}function $j(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${pi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Rf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Us=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Wj(t,e,n){const i=Us(pi(t.r)),r=Us(pi(t.g)),s=Us(pi(t.b));return{r:_r(Rf(i+n*(Us(pi(e.r))-i))),g:_r(Rf(r+n*(Us(pi(e.g))-r))),b:_r(Rf(s+n*(Us(pi(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Gc(t,e,n){if(t){let i=wy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=by(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function zS(t,e){return t&&Object.assign(e||{},t)}function _w(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=_r(t[3]))):(e=zS(t,{r:0,g:0,b:0,a:1}),e.a=_r(e.a)),e}function Hj(t){return t.charAt(0)==="r"?zj(t):Lj(t)}class Ol{constructor(e){if(e instanceof Ol)return e;const n=typeof e;let i;n==="object"?i=_w(e):n==="string"&&(i=kj(e)||Uj(e)||Hj(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=zS(this._rgb);return e&&(e.a=pi(e.a)),e}set rgb(e){this._rgb=_w(e)}rgbString(){return this._valid?$j(this._rgb):void 0}hexString(){return this._valid?Pj(this._rgb):void 0}hslString(){return this._valid?jj(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=Wj(this._rgb,e._rgb,n)),this}clone(){return new Ol(this.rgb)}alpha(e){return this._rgb.a=_r(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=oc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Gc(this._rgb,2,e),this}darken(e){return Gc(this._rgb,2,-e),this}saturate(e){return Gc(this._rgb,1,e),this}desaturate(e){return Gc(this._rgb,1,-e),this}rotate(e){return Fj(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ci(){}const qj=(()=>{let t=0;return()=>t++})();function De(t){return t==null}function vt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Se(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function En(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Bn(t,e){return En(t)?t:e}function we(t,e){return typeof t>"u"?e:t}const Kj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Le(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ce(t,e,n,i){let r,s,o;if(vt(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(Se(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function xh(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Ih(t){if(vt(t))return t.map(Ih);if(Se(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Ih(t[n[r]]);return e}return t}function $S(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Gj(t,e,n,i){if(!$S(t))return;const r=e[t],s=n[t];Se(r)&&Se(s)?Ll(r,s,i):e[t]=Ih(s)}function Ll(t,e,n){const i=vt(e)?e:[e],r=i.length;if(!Se(t))return t;n=n||{};const s=n.merger||Gj;let o;for(let a=0;a<r;++a){if(o=i[a],!Se(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function el(t,e){return Ll(t,e,{merger:Qj})}function Qj(t,e,n){if(!$S(t))return;const i=e[t],r=n[t];Se(i)&&Se(r)?el(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ih(r))}const ww={"":t=>t,x:t=>t.x,y:t=>t.y};function Yj(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Xj(t){const e=Yj(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Sh(t,e){return(ww[e]||(ww[e]=Xj(e)))(t)}function Ty(t){return t.charAt(0).toUpperCase()+t.slice(1)}const kh=t=>typeof t<"u",Sr=t=>typeof t=="function",Ew=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Jj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const At=Math.PI,Zn=2*At,Zj=Zn+At,Ch=Number.POSITIVE_INFINITY,eV=At/180,Cn=At/2,zr=At/4,bw=At*2/3,WS=Math.log10,Do=Math.sign;function tl(t,e,n){return Math.abs(t-e)<n}function Tw(t){const e=Math.round(t);t=tl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(WS(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function tV(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function nV(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Fl(t){return!nV(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function iV(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function rV(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function is(t){return t*(At/180)}function sV(t){return t*(180/At)}function xw(t){if(!En(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function oV(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*At&&(s+=Zn),{angle:s,distance:r}}function ug(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function aV(t,e){return(t-e+Zj)%Zn-At}function $i(t){return(t%Zn+Zn)%Zn}function HS(t,e,n,i){const r=$i(t),s=$i(e),o=$i(n),a=$i(s-r),l=$i(o-r),c=$i(r-s),h=$i(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function gn(t,e,n){return Math.max(e,Math.min(n,t))}function lV(t){return gn(t,-32768,32767)}function Ma(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function xy(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const rs=(t,e,n,i)=>xy(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),cV=(t,e,n)=>xy(t,n,i=>t[i][e]>=n);function uV(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const qS=["push","pop","shift","splice","unshift"];function hV(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),qS.forEach(n=>{const i="_onData"+Ty(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Iw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(qS.forEach(s=>{delete t[s]}),delete t._chartjs)}function dV(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const KS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function GS(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,KS.call(window,()=>{i=!1,t.apply(e,n)}))}}function fV(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const QS=t=>t==="start"?"left":t==="end"?"right":"center",Jt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,pV=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function gV(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(r=Math.min(rs(l,h,d).lo,n?i:rs(e,h,o.getPixelForValue(d)).lo),c){const b=l.slice(0,r+1).reverse().findIndex(w=>!De(w[a.axis]));r-=Math.max(0,b)}r=gn(r,0,i-1)}if(v){let b=Math.max(rs(l,o.axis,f,!0).hi+1,n?0:rs(e,h,o.getPixelForValue(f),!0).hi+1);if(c){const w=l.slice(b-1).findIndex(T=>!De(T[a.axis]));b+=Math.max(0,w)}s=gn(b,r,i)-r}else s=i-r}return{start:r,count:s}}function mV(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Qc=t=>t===0||t===1,Sw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Zn/n)),kw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Zn/n)+1,nl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Cn)+1,easeOutSine:t=>Math.sin(t*Cn),easeInOutSine:t=>-.5*(Math.cos(At*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Qc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qc(t)?t:Sw(t,.075,.3),easeOutElastic:t=>Qc(t)?t:kw(t,.075,.3),easeInOutElastic(t){return Qc(t)?t:t<.5?.5*Sw(t*2,.1125,.45):.5+.5*kw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-nl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?nl.easeInBounce(t*2)*.5:nl.easeOutBounce(t*2-1)*.5+.5};function Iy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Cw(t){return Iy(t)?t:new Ol(t)}function Nf(t){return Iy(t)?t:new Ol(t).saturate(.5).darken(.1).hexString()}const yV=["x","y","borderWidth","radius","tension"],vV=["color","borderColor","backgroundColor"];function _V(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:vV},numbers:{type:"number",properties:yV}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function wV(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Pw=new Map;function EV(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Pw.get(n);return i||(i=new Intl.NumberFormat(t,e),Pw.set(n,i)),i}function YS(t,e,n){return EV(e,n).format(t)}const bV={values(t){return vt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=TV(t,n)}const o=WS(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),YS(t,i,l)}};function TV(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var XS={formatters:bV};function xV(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:XS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ts=Object.create(null),hg=Object.create(null);function il(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Df(t,e,n){return typeof e=="string"?Ll(il(t,e),n):Ll(il(t,""),e)}class IV{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Nf(r.backgroundColor),this.hoverBorderColor=(i,r)=>Nf(r.borderColor),this.hoverColor=(i,r)=>Nf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Df(this,e,n)}get(e){return il(this,e)}describe(e,n){return Df(hg,e,n)}override(e,n){return Df(Ts,e,n)}route(e,n,i,r){const s=il(this,e),o=il(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Se(l)?Object.assign({},c,l):we(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ye=new IV({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_V,wV,xV]);function SV(t){return!t||De(t.size)||De(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Aw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function $r(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Rw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function dg(t,e,n,i){JS(t,e,n,i,null)}function JS(t,e,n,i,r){let s,o,a,l,c,h,d,f;const m=e.pointStyle,v=e.rotation,b=e.radius;let w=(v||0)*eV;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,b,0,0,Zn):t.arc(n,i,b,0,Zn),t.closePath();break;case"triangle":h=r?r/2:b,t.moveTo(n+Math.sin(w)*h,i-Math.cos(w)*b),w+=bw,t.lineTo(n+Math.sin(w)*h,i-Math.cos(w)*b),w+=bw,t.lineTo(n+Math.sin(w)*h,i-Math.cos(w)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(w+zr)*l,d=Math.cos(w+zr)*(r?r/2-c:l),a=Math.sin(w+zr)*l,f=Math.sin(w+zr)*(r?r/2-c:l),t.arc(n-d,i-a,c,w-At,w-Cn),t.arc(n+f,i-o,c,w-Cn,w),t.arc(n+d,i+a,c,w,w+Cn),t.arc(n-f,i+o,c,w+Cn,w+At),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*b,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}w+=zr;case"rectRot":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":w+=zr;case"cross":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),w+=zr,d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(w)*b,a=Math.sin(w)*b,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(r?r/2:b),i+Math.sin(w)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function jl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Sy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ky(t){t.restore()}function kV(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function CV(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function PV(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),De(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function AV(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function RV(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ph(t,e,n,i,r,s={}){const o=vt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,PV(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&RV(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),De(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),AV(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function fg(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*At,At,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,At,Cn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Cn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Cn,!0),t.lineTo(n+o.topLeft,i)}const NV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,DV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function MV(t,e){const n=(""+t).match(NV);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const OV=t=>+t||0;function ZS(t,e){const n={},i=Se(e),r=i?Object.keys(e):e,s=Se(t)?i?o=>we(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=OV(s(o));return n}function LV(t){return ZS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function rl(t){return ZS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ln(t){const e=LV(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qt(t,e){t=t||{},e=e||Ye.font;let n=we(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=we(t.style,e.style);i&&!(""+i).match(DV)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:we(t.family,e.family),lineHeight:MV(we(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:we(t.weight,e.weight),string:""};return r.string=SV(r),r}function Yc(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function FV(t,e,n){const{min:i,max:r}=t,s=Kj(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function As(t,e){return Object.assign(Object.create(t),e)}function Cy(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=ik("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Cy([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return tk(a,l,()=>HV(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Dw(a).includes(l)},ownKeys(a){return Dw(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Mo(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ek(t,i),setContext:s=>Mo(t,s,n,i),override:s=>Mo(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return tk(s,o,()=>VV(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function ek(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Sr(n)?n:()=>n,isIndexable:Sr(i)?i:()=>i}}const jV=(t,e)=>t?t+Ty(e):e,Py=(t,e)=>Se(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function tk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function VV(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Sr(a)&&o.isScriptable(e)&&(a=UV(e,a,t,n)),vt(a)&&a.length&&(a=BV(e,a,t,o.isIndexable)),Py(e,a)&&(a=Mo(a,r,s&&s[e],o)),a}function UV(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),Py(t,l)&&(l=Ay(r._scopes,r,t,l)),l}function BV(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(Se(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Ay(c,r,t,h);e.push(Mo(d,s,o&&o[t],a))}}return e}function nk(t,e,n){return Sr(t)?t(e,n):t}const zV=(t,e)=>t===!0?e:typeof t=="string"?Sh(e,t):void 0;function $V(t,e,n,i,r){for(const s of e){const o=zV(n,s);if(o){t.add(o);const a=nk(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Ay(t,e,n,i){const r=e._rootScopes,s=nk(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Nw(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=Nw(a,o,s,l,i),l===null)?!1:Cy(Array.from(a),[""],r,s,()=>WV(e,n,i))}function Nw(t,e,n,i,r){for(;n;)n=$V(t,e,n,i,r);return n}function WV(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return vt(r)&&Se(n)?n:r||{}}function HV(t,e,n,i){let r;for(const s of e)if(r=ik(jV(s,t),n),typeof r<"u")return Py(t,r)?Ay(n,i,t,r):r}function ik(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Dw(t){let e=t._keys;return e||(e=t._keys=qV(t._scopes)),e}function qV(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const KV=Number.EPSILON||1e-14,Oo=(t,e)=>e<t.length&&!t[e].skip&&t[e],rk=t=>t==="x"?"y":"x";function GV(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=ug(s,r),l=ug(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function QV(t,e,n){const i=t.length;let r,s,o,a,l,c=Oo(t,0);for(let h=0;h<i-1;++h)if(l=c,c=Oo(t,h+1),!(!l||!c)){if(tl(e[h],0,KV)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function YV(t,e,n="x"){const i=rk(n),r=t.length;let s,o,a,l=Oo(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Oo(t,c+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[c])}}function XV(t,e="x"){const n=rk(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Oo(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Oo(t,o+1),!!l){if(c){const h=c[e]-l[e];r[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Do(r[o-1])!==Do(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}QV(t,r,s),YV(t,s,e)}function Xc(t,e,n){return Math.max(Math.min(t,n),e)}function JV(t,e){let n,i,r,s,o,a=jl(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&jl(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Xc(r.cp1x,e.left,e.right),r.cp1y=Xc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Xc(r.cp2x,e.left,e.right),r.cp2y=Xc(r.cp2y,e.top,e.bottom)))}function ZV(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")XV(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=GV(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&JV(t,n)}function Ry(){return typeof window<"u"&&typeof document<"u"}function Ny(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ah(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const bd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function e4(t,e){return bd(t).getPropertyValue(e)}const t4=["top","right","bottom","left"];function ls(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=t4[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const n4=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function i4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(n4(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Yr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=bd(n),s=r.boxSizing==="border-box",o=ls(r,"padding"),a=ls(r,"border","width"),{x:l,y:c,box:h}=i4(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:v}=e;return s&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-f)/v*n.height/i)}}function r4(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Ny(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=bd(s),l=ls(a,"border","width"),c=ls(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Ah(a.maxWidth,s,"clientWidth"),r=Ah(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Ch,maxHeight:r||Ch}}const rr=t=>Math.round(t*10)/10;function s4(t,e,n,i){const r=bd(t),s=ls(r,"margin"),o=Ah(r.maxWidth,t,"clientWidth")||Ch,a=Ah(r.maxHeight,t,"clientHeight")||Ch,l=r4(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const f=ls(r,"border","width"),m=ls(r,"padding");c-=m.width+f.width,h-=m.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=rr(Math.min(c,o,l.maxWidth)),h=rr(Math.min(h,a,l.maxHeight)),c&&!h&&(h=rr(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=rr(Math.floor(h*i))),{width:c,height:h}}function Mw(t,e,n){const i=e||1,r=rr(t.height*i),s=rr(t.width*i);t.height=rr(t.height),t.width=rr(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const o4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ry()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Ow(t,e){const n=e4(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Xr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function a4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function l4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Xr(t,r,n),a=Xr(r,s,n),l=Xr(s,e,n),c=Xr(o,a,n),h=Xr(a,l,n);return Xr(c,h,n)}const c4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},u4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function mo(t,e,n){return t?c4(e,n):u4()}function sk(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function ok(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ak(t){return t==="angle"?{between:HS,compare:aV,normalize:$i}:{between:Ma,compare:(e,n)=>e-n,normalize:e=>e}}function Lw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function h4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=ak(i),l=e.length;let{start:c,end:h,loop:d}=t,f,m;if(d){for(c+=l,h+=l,f=0,m=l;f<m&&o(a(e[c%l][i]),r,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function d4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=ak(i),{start:h,end:d,loop:f,style:m}=h4(t,e,n),v=[];let b=!1,w=null,T,E,S;const N=()=>l(r,S,T)&&a(r,S)!==0,D=()=>a(s,T)===0||l(s,S,T),O=()=>b||N(),x=()=>!b||D();for(let _=h,I=h;_<=d;++_)E=e[_%o],!E.skip&&(T=c(E[i]),T!==S&&(b=l(T,r,s),w===null&&O()&&(w=a(T,r)===0?_:I),w!==null&&x()&&(v.push(Lw({start:w,end:_,loop:f,count:o,style:m})),w=null),I=_,S=T));return w!==null&&v.push(Lw({start:w,end:d,loop:f,count:o,style:m})),v}function f4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=d4(i[r],t.points,e);s.length&&n.push(...s)}return n}function p4(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function g4(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function m4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=p4(n,r,s,i);if(i===!0)return Fw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return Fw(t,g4(n,o,l,c),n,e)}function Fw(t,e,n,i){return!i||!i.setContext||!n?e:y4(t,e,n,i)}function y4(t,e,n,i){const r=t._chart.getContext(),s=jw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function m(v,b,w,T){const E=a?-1:1;if(v!==b){for(v+=l;n[v%l].skip;)v-=E;for(;n[b%l].skip;)b+=E;v%l!==b%l&&(c.push({start:v%l,end:b%l,loop:w,style:T}),h=T,d=b%l)}}for(const v of e){d=a?d:v.start;let b=n[d%l],w;for(f=d+1;f<=v.end;f++){const T=n[f%l];w=jw(i.setContext(As(r,{type:"segment",p0:b,p1:T,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),v4(w,h)&&m(d,f-1,v.loop,h),b=T,h=w}d<f-1&&m(d,f-1,v.loop,h)}return c}function jw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function v4(t,e){if(!e)return!1;const n=[],i=function(r,s){return Iy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Jc(t,e,n){return t.options.clip?t[n]:e[n]}function _4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Jc(n,e,"left"),right:Jc(n,e,"right"),top:Jc(i,e,"top"),bottom:Jc(i,e,"bottom")}:e}function w4(t,e){const n=e._clip;if(n.disabled)return!1;const i=_4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class E4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=KS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ui=new E4;const Vw="transparent",b4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Cw(t||Vw),r=i.valid&&Cw(e||Vw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class T4{constructor(e,n,i,r){const s=n[i];r=Yc([e.to,r,s,e.from]);const o=Yc([e.from,s,r]);this._active=!0,this._fn=e.fn||b4[e.type||typeof o],this._easing=nl[e.easing]||nl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Yc([e.to,n,r,e.from]),this._from=Yc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class lk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Se(e))return;const n=Object.keys(Ye.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Se(s))return;const o={};for(const a of n)o[a]=s[a];(vt(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=I4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&x4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new T4(f,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return ui.add(this._chart,i),!0}}function x4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function I4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Uw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function S4(t,e,n){if(n===!1)return!1;const i=Uw(t,n),r=Uw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function k4(t){let e,n,i,r;return Se(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function ck(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Bw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],En(c)&&(s||e===0||Do(e)===Do(c))&&(e+=c)}return!h&&!i.all?0:e}function C4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function Mf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function P4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function A4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function R4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function zw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function $w(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=P4(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const v=e[m],{[l]:b,[c]:w}=v,T=v._stacks||(v._stacks={});f=T[c]=R4(r,h,b),f[a]=w,f._top=zw(f,o,!0,i.type),f._bottom=zw(f,o,!1,i.type);const E=f._visualValues||(f._visualValues={});E[a]=w}}function Of(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function N4(t,e){return As(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function D4(t,e,n){return As(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _a(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Lf=t=>t==="reset"||t==="none",Ww=(t,e)=>e?t:Object.assign({},t),M4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:ck(n,!0),values:null};class sl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Mf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_a(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,v)=>d==="x"?f:d==="r"?v:m,s=n.xAxisID=we(i.xAxisID,Of(e,"x")),o=n.yAxisID=we(i.yAxisID,Of(e,"y")),a=n.rAxisID=we(i.rAxisID,Of(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Iw(this._data,this),e._stacked&&_a(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Se(n)){const r=this._cachedMeta;this._data=C4(n,r)}else if(i!==n){if(i){Iw(i,this);const r=this._cachedMeta;_a(r),r._parsed=[]}n&&Object.isExtensible(n)&&hV(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Mf(n.vScale,n),n.stack!==i.stack&&(r=!0,_a(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&($w(this,n._parsed),n._stacked=Mf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{vt(r[e])?f=this.parseArrayData(i,r,e,n):Se(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&$w(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let f,m,v;for(f=0,m=r;f<m;++f)v=f+i,d[f]={[a]:h||s.parse(c[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],c[h]={x:s.parse(Sh(m,a),f),y:o.parse(Sh(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:ck(r,!0),values:n._stacks[e.axis]._visualValues};return Bw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=Bw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=M4(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=A4(a);let f,m;function v(){m=r[f];const b=m[a.axis];return!En(m[e.axis])||h>b||d<b}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],En(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=k4(we(this.options.clip,S4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=D4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=N4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&kh(i);if(a)return Ww(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Ye.elements[e]),v=()=>this.getContext(i,r,n),b=c.resolveNamedOptions(f,m,v,d);return b.$shared&&(b.$shared=l,s[o]=Object.freeze(Ww(b,l))),b}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const c=new lk(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Lf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Lf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Lf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&_a(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}de(sl,"defaults",{}),de(sl,"datasetElementType",null),de(sl,"dataElementType",null);class ku extends sl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=gV(n,r,o);this._drawStart=a,this._drawCount=l,mV(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,m=a.axis,{spanGaps:v,segment:b}=this.options,w=Fl(v)?v:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||r==="none",E=n+i,S=e.length;let N=n>0&&this.getParsed(n-1);for(let D=0;D<S;++D){const O=e[D],x=T?O:{};if(D<n||D>=E){x.skip=!0;continue}const _=this.getParsed(D),I=De(_[m]),C=x[f]=o.getPixelForValue(_[f],D),A=x[m]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],D);x.skip=isNaN(C)||isNaN(A)||I,x.stop=D>0&&Math.abs(_[f]-N[f])>w,b&&(x.parsed=_,x.raw=c.data[D]),d&&(x.options=h||this.resolveDataElementOptions(D,O.active?"active":r)),T||this.updateElement(O,D,x,r),N=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}de(ku,"id","line"),de(ku,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),de(ku,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Wr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Dy{constructor(e){de(this,"options");this.options=e||{}}static override(e){Object.assign(Dy.prototype,e)}init(){}formats(){return Wr()}parse(){return Wr()}format(){return Wr()}add(){return Wr()}diff(){return Wr()}startOf(){return Wr()}endOf(){return Wr()}}var O4={_date:Dy};function L4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?cV:rs;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(s,e,n-d),m=c(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(b=>!De(b[d.axis]));h.lo-=Math.max(0,m);const v=f.slice(h.hi).findIndex(b=>!De(b[d.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:s.length-1}}function Td(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=L4(s[a],e,o,r);for(let m=d;m<=f;++m){const v=h[m];v.skip||i(v,c,m)}}}function F4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Ff(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Td(t,n,e,function(a,l,c){!r&&!jl(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function j4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=oV(o,{x:e.x,y:e.y});HS(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return Td(t,n,e,s),r}function V4(t,e,n,i,r,s){let o=[];const a=F4(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const v=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(v))&&!m)return;const w=a(e,v);w<l?(o=[{element:h,datasetIndex:d,index:f}],l=w):w===l&&o.push({element:h,datasetIndex:d,index:f})}return Td(t,n,e,c),o}function jf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?j4(t,e,n,r):V4(t,e,n,i,r,s)}function Hw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Td(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var U4={modes:{index(t,e,n,i){const r=Yr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Ff(t,r,s,i,o):jf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Yr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Ff(t,r,s,i,o):jf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Yr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Ff(t,r,s,i,o)},nearest(t,e,n,i){const r=Yr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return jf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Yr(e,t);return Hw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Yr(e,t);return Hw(t,r,"y",n.intersect,i)}}};const uk=["left","top","right","bottom"];function wa(t,e){return t.filter(n=>n.pos===e)}function qw(t,e){return t.filter(n=>uk.indexOf(n.pos)===-1&&n.box.axis===e)}function Ea(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function B4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function z4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!uk.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function $4(t,e){const n=z4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function W4(t){const e=B4(t),n=Ea(e.filter(c=>c.box.fullSize),!0),i=Ea(wa(e,"left"),!0),r=Ea(wa(e,"right")),s=Ea(wa(e,"top"),!0),o=Ea(wa(e,"bottom")),a=qw(e,"x"),l=qw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:wa(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Kw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function hk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function H4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Se(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&hk(o,s.getPadding());const a=Math.max(0,e.outerWidth-Kw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Kw(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function q4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function K4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Oa(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,K4(a.horizontal,e));const{same:d,other:f}=H4(e,n,a,i);c|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return c&&Oa(r,e,n,i)||h}function Zc(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Gw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;kh(c.start)&&(o=c.start),l.fullSize?Zc(l,r.left,o,n.outerWidth-r.right-r.left,f):Zc(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;kh(c.start)&&(s=c.start),l.fullSize?Zc(l,s,r.top,f,n.outerHeight-r.bottom-r.top):Zc(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var sr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Ln(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=W4(t.boxes),l=a.vertical,c=a.horizontal;Ce(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=l.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);hk(f,Ln(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),v=$4(l.concat(c),d);Oa(a.fullSize,m,d,v),Oa(l,m,d,v),Oa(c,m,d,v)&&Oa(l,m,d,v),q4(m),Gw(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,Gw(a.rightAndBottom,m,d,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ce(a.chartArea,b=>{const w=b.box;Object.assign(w,t.chartArea),w.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class dk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class G4 extends dk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Cu="$chartjs",Q4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Qw=t=>t===null||t==="";function Y4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Cu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Qw(r)){const s=Ow(t,"width");s!==void 0&&(t.width=s)}if(Qw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Ow(t,"height");s!==void 0&&(t.height=s)}return t}const fk=o4?{passive:!0}:!1;function X4(t,e,n){t&&t.addEventListener(e,n,fk)}function J4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,fk)}function Z4(t,e){const n=Q4[t.type]||t.type,{x:i,y:r}=Yr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Rh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function eU(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Rh(a.addedNodes,i),o=o&&!Rh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function tU(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Rh(a.removedNodes,i),o=o&&!Rh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Vl=new Map;let Yw=0;function pk(){const t=window.devicePixelRatio;t!==Yw&&(Yw=t,Vl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function nU(t,e){Vl.size||window.addEventListener("resize",pk),Vl.set(t,e)}function iU(t){Vl.delete(t),Vl.size||window.removeEventListener("resize",pk)}function rU(t,e,n){const i=t.canvas,r=i&&Ny(i);if(!r)return;const s=GS((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),nU(t,s),o}function Vf(t,e,n){n&&n.disconnect(),e==="resize"&&iU(t)}function sU(t,e,n){const i=t.canvas,r=GS(s=>{t.ctx!==null&&n(Z4(s,t))},t);return X4(i,e,r),r}class oU extends dk{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Y4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Cu])return!1;const i=n[Cu].initial;["height","width"].forEach(s=>{const o=i[s];De(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Cu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:eU,detach:tU,resize:rU}[n]||sU;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Vf,detach:Vf,resize:Vf}[n]||J4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return s4(e,n,i,r)}isAttached(e){const n=e&&Ny(e);return!!(n&&n.isConnected)}}function aU(t){return!Ry()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?G4:oU}class kr{constructor(){de(this,"x");de(this,"y");de(this,"active",!1);de(this,"options");de(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Fl(this.x)&&Fl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}de(kr,"defaults",{}),de(kr,"defaultRoutes");function lU(t,e){const n=t.options.ticks,i=cU(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?hU(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return dU(e,c,s,o/r),c;const h=uU(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(eu(e,c,h,De(m)?0:a-m,a),d=0,f=o-1;d<f;d++)eu(e,c,h,s[d],s[d+1]);return eu(e,c,h,l,De(m)?e.length:l+m),c}return eu(e,c,h),c}function cU(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function uU(t,e,n){const i=fU(t),r=e.length/n;if(!i)return Math.max(r,1);const s=tV(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function hU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function dU(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function eu(t,e,n,i,r){const s=we(i,0),o=Math.min(we(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function fU(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const pU=t=>t==="left"?"right":t==="right"?"left":t,Xw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Jw=(t,e)=>Math.min(e||t,t);function Zw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function gU(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function mU(t,e){Ce(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function ba(t){return t.drawTicks?t.tickLength:0}function eE(t,e){if(!t.display)return 0;const n=qt(t.font,e),i=Ln(t.padding);return(vt(t.text)?t.text.length:1)*n.lineHeight+i.height}function yU(t,e){return As(t,{scale:e,type:"scale"})}function vU(t,e,n){return As(t,{tick:n,index:e,type:"tick"})}function _U(t,e,n){let i=QS(t);return(n&&e!=="right"||!n&&e==="right")&&(i=pU(i)),i}function wU(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,m,v;const b=o-r,w=a-s;if(t.isHorizontal()){if(m=Jt(i,s,a),Se(n)){const T=Object.keys(n)[0],E=n[T];v=h[T].getPixelForValue(E)+b-e}else n==="center"?v=(c.bottom+c.top)/2+b-e:v=Xw(t,n,e);f=a-s}else{if(Se(n)){const T=Object.keys(n)[0],E=n[T];m=h[T].getPixelForValue(E)-w+e}else n==="center"?m=(c.left+c.right)/2-w+e:m=Xw(t,n,e);v=Jt(i,o,r),d=n==="left"?-Cn:Cn}return{titleX:m,titleY:v,maxWidth:f,rotation:d}}class Ko extends kr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Bn(e,Number.POSITIVE_INFINITY),n=Bn(n,Number.NEGATIVE_INFINITY),i=Bn(i,Number.POSITIVE_INFINITY),r=Bn(r,Number.NEGATIVE_INFINITY),{min:Bn(e,i),max:Bn(n,r),minDefined:En(e),maxDefined:En(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Bn(n,Bn(i,n)),max:Bn(i,Bn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Le(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=FV(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Zw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=lU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Le(this.options.afterUpdate,[this])}beforeSetDimensions(){Le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Le(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Le(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Le(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Jw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=gn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-ba(e.grid)-n.padding-eE(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=sV(Math.min(Math.asin(gn((h.highest.height+6)/a,-1,1)),Math.asin(gn(l/c,-1,1))-Math.asin(gn(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Le(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=eE(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ba(s)+l):(e.height=this.maxHeight,e.width=ba(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,v=is(this.labelRotation),b=Math.cos(v),w=Math.sin(v);if(a){const T=i.mirror?0:w*d.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+T+m)}else{const T=i.mirror?0:b*d.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+T+m)}this._calculatePadding(c,h,w,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Le(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)De(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Zw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Jw(n,i));let c=0,h=0,d,f,m,v,b,w,T,E,S,N,D;for(d=0;d<n;d+=l){if(v=e[d].label,b=this._resolveTickFontOptions(d),r.font=w=b.string,T=s[w]=s[w]||{data:{},gc:[]},E=b.lineHeight,S=N=0,!De(v)&&!vt(v))S=Aw(r,T.data,T.gc,S,v),N=E;else if(vt(v))for(f=0,m=v.length;f<m;++f)D=v[f],!De(D)&&!vt(D)&&(S=Aw(r,T.data,T.gc,S,D),N+=E);o.push(S),a.push(N),c=Math.max(S,c),h=Math.max(N,h)}mU(s,n);const O=o.indexOf(c),x=a.indexOf(h),_=I=>({width:o[I]||0,height:a[I]||0});return{first:_(0),last:_(n-1),widest:_(O),highest:_(x),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return lV(this._alignToPixels?$r(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=vU(this.getContext(),e,i))}return this.$context||(this.$context=yU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=is(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ba(s),m=[],v=a.setContext(this.getContext()),b=v.display?v.width:0,w=b/2,T=function(he){return $r(i,he,b)};let E,S,N,D,O,x,_,I,C,A,R,P;if(o==="top")E=T(this.bottom),x=this.bottom-f,I=E-w,A=T(e.top)+w,P=e.bottom;else if(o==="bottom")E=T(this.top),A=e.top,P=T(e.bottom)-w,x=E+w,I=this.top+f;else if(o==="left")E=T(this.right),O=this.right-f,_=E-w,C=T(e.left)+w,R=e.right;else if(o==="right")E=T(this.left),C=e.left,R=T(e.right)-w,O=E+w,_=this.left+f;else if(n==="x"){if(o==="center")E=T((e.top+e.bottom)/2+.5);else if(Se(o)){const he=Object.keys(o)[0],re=o[he];E=T(this.chart.scales[he].getPixelForValue(re))}A=e.top,P=e.bottom,x=E+w,I=x+f}else if(n==="y"){if(o==="center")E=T((e.left+e.right)/2);else if(Se(o)){const he=Object.keys(o)[0],re=o[he];E=T(this.chart.scales[he].getPixelForValue(re))}O=E-w,_=O-f,C=e.left,R=e.right}const ie=we(r.ticks.maxTicksLimit,d),q=Math.max(1,Math.ceil(d/ie));for(S=0;S<d;S+=q){const he=this.getContext(S),re=s.setContext(he),B=a.setContext(he),K=re.lineWidth,Q=re.color,V=B.dash||[],L=B.dashOffset,W=re.tickWidth,X=re.tickColor,ce=re.tickBorderDash||[],Z=re.tickBorderDashOffset;N=gU(this,S,l),N!==void 0&&(D=$r(i,N,K),c?O=_=C=R=D:x=I=A=P=D,m.push({tx1:O,ty1:x,tx2:_,ty2:I,x1:C,y1:A,x2:R,y2:P,width:K,color:Q,borderDash:V,borderDashOffset:L,tickWidth:W,tickColor:X,tickBorderDash:ce,tickBorderDashOffset:Z}))}return this._ticksLength=d,this._borderValue=E,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=ba(i.grid),m=f+h,v=d?-h:m,b=-is(this.labelRotation),w=[];let T,E,S,N,D,O,x,_,I,C,A,R,P="middle";if(r==="top")O=this.bottom-v,x=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+v,x=this._getXAxisLabelAlignment();else if(r==="left"){const q=this._getYAxisLabelAlignment(f);x=q.textAlign,D=q.x}else if(r==="right"){const q=this._getYAxisLabelAlignment(f);x=q.textAlign,D=q.x}else if(n==="x"){if(r==="center")O=(e.top+e.bottom)/2+m;else if(Se(r)){const q=Object.keys(r)[0],he=r[q];O=this.chart.scales[q].getPixelForValue(he)+m}x=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")D=(e.left+e.right)/2-m;else if(Se(r)){const q=Object.keys(r)[0],he=r[q];D=this.chart.scales[q].getPixelForValue(he)}x=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const ie=this._getLabelSizes();for(T=0,E=a.length;T<E;++T){S=a[T],N=S.label;const q=s.setContext(this.getContext(T));_=this.getPixelForTick(T)+s.labelOffset,I=this._resolveTickFontOptions(T),C=I.lineHeight,A=vt(N)?N.length:1;const he=A/2,re=q.color,B=q.textStrokeColor,K=q.textStrokeWidth;let Q=x;o?(D=_,x==="inner"&&(T===E-1?Q=this.options.reverse?"left":"right":T===0?Q=this.options.reverse?"right":"left":Q="center"),r==="top"?c==="near"||b!==0?R=-A*C+C/2:c==="center"?R=-ie.highest.height/2-he*C+C:R=-ie.highest.height+C/2:c==="near"||b!==0?R=C/2:c==="center"?R=ie.highest.height/2-he*C:R=ie.highest.height-A*C,d&&(R*=-1),b!==0&&!q.showLabelBackdrop&&(D+=C/2*Math.sin(b))):(O=_,R=(1-A)*C/2);let V;if(q.showLabelBackdrop){const L=Ln(q.backdropPadding),W=ie.heights[T],X=ie.widths[T];let ce=R-L.top,Z=0-L.left;switch(P){case"middle":ce-=W/2;break;case"bottom":ce-=W;break}switch(x){case"center":Z-=X/2;break;case"right":Z-=X;break;case"inner":T===E-1?Z-=X:T>0&&(Z-=X/2);break}V={left:Z,top:ce,width:X+L.width,height:W+L.height,color:q.backdropColor}}w.push({label:N,font:I,textOffset:R,options:{rotation:b,color:re,strokeColor:B,strokeWidth:K,textAlign:Q,textBaseline:P,translation:[D,O],backdrop:V}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-is(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=$r(e,this.left,o)-o/2,h=$r(e,this.right,a)+a/2,d=f=l):(d=$r(e,this.top,o)-o/2,f=$r(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Sy(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Ph(i,c,0,h,l,a)}r&&ky(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=qt(i.font),o=Ln(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Se(n)?(l+=o.bottom,vt(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=wU(this,l,n,a);Ph(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:_U(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=we(e.grid&&e.grid.z,-1),r=we(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ko.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return qt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class tu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;TU(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,EU(e,o,i),this.override&&Ye.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Ye[r]&&(delete Ye[r][i],this.override&&delete Ts[i])}}function EU(t,e,n){const i=Ll(Object.create(null),[n?Ye.get(n):{},Ye.get(e),t.defaults]);Ye.set(e,i),t.defaultRoutes&&bU(e,t.defaultRoutes),t.descriptors&&Ye.describe(e,t.descriptors)}function bU(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ye.route(s,r,l,a)})}function TU(t){return"id"in t&&"defaults"in t}class xU{constructor(){this.controllers=new tu(sl,"datasets",!0),this.elements=new tu(kr,"elements"),this.plugins=new tu(Object,"plugins"),this.scales=new tu(Ko,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Ce(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=Ty(e);Le(i["before"+r],[],i),n[e](i),Le(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Hn=new xU;class IU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Le(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){De(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=we(i.options&&i.options.plugins,{}),s=SU(i);return r===!1&&!n?[]:CU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function SU(t){const e={},n=[],i=Object.keys(Hn.plugins.items);for(let s=0;s<i.length;s++)n.push(Hn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function kU(t,e){return!e&&t===!1?null:t===!0?{}:t}function CU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=kU(i[l],r);c!==null&&s.push({plugin:a,options:PU(t.config,{plugin:a,local:n[l]},c,o)})}return s}function PU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pg(t,e){const n=Ye.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function AU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function RU(t,e){return t===e?"_index_":"_value_"}function tE(t){if(t==="x"||t==="y"||t==="r")return t}function NU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function gg(t,...e){if(tE(t))return t;for(const n of e){const i=n.axis||NU(n.position)||t.length>1&&tE(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function nE(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function DU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return nE(t,"x",n[0])||nE(t,"y",n[0])}return{}}function MU(t,e){const n=Ts[t.type]||{scales:{}},i=e.scales||{},r=pg(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Se(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=gg(o,a,DU(o,t),Ye.scales[a.type]),c=RU(l,r),h=n.scales||{};s[o]=el(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||pg(a,e),h=(Ts[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=AU(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),el(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];el(a,[Ye.scales[a.type],Ye.scale])}),s}function gk(t){const e=t.options||(t.options={});e.plugins=we(e.plugins,{}),e.scales=MU(t,e)}function mk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function OU(t){return t=t||{},t.data=mk(t.data),gk(t),t}const iE=new Map,yk=new Set;function nu(t,e){let n=iE.get(t);return n||(n=e(),iE.set(t,n),yk.add(n)),n}const Ta=(t,e,n)=>{const i=Sh(e,n);i!==void 0&&t.add(i)};class LU{constructor(e){this._config=OU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=mk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),gk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return nu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return nu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return nu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return nu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Ta(l,e,d))),h.forEach(d=>Ta(l,r,d)),h.forEach(d=>Ta(l,Ts[s]||{},d)),h.forEach(d=>Ta(l,Ye,d)),h.forEach(d=>Ta(l,hg,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),yk.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ts[n]||{},Ye.datasets[n]||{},{type:n},Ye,hg]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=rE(this._resolverCache,e,r);let l=o;if(jU(o,n)){s.$shared=!1,i=Sr(i)?i():i;const c=this.createResolver(e,i,a);l=Mo(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=rE(this._resolverCache,e,i);return Se(n)?Mo(s,n,void 0,r):s}}function rE(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Cy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const FU=t=>Se(t)&&Object.getOwnPropertyNames(t).some(e=>Sr(t[e]));function jU(t,e){const{isScriptable:n,isIndexable:i}=ek(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Sr(a)||FU(a))||o&&vt(a))return!0}return!1}var VU="4.5.1";const UU=["top","bottom","left","right","chartArea"];function sE(t,e){return t==="top"||t==="bottom"||UU.indexOf(t)===-1&&e==="x"}function oE(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function aE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Le(n&&n.onComplete,[t],e)}function BU(t){const e=t.chart,n=e.options.animation;Le(n&&n.onProgress,[t],e)}function vk(t){return Ry()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Pu={},lE=t=>{const e=vk(t);return Object.values(Pu).filter(n=>n.canvas===e).pop()};function zU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function $U(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var zi;let xd=(zi=class{static register(...e){Hn.add(...e),cE()}static unregister(...e){Hn.remove(...e),cE()}constructor(e,n){const i=this.config=new LU(n),r=vk(e),s=lE(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||aU(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=qj(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new IU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=fV(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Pu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ui.listen(this,"complete",aE),ui.listen(this,"progress",BU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return De(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Rw(this.canvas,this.ctx),this}stop(){return ui.stop(this),this}resize(e,n){ui.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Le(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ce(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=gg(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Ce(s,o=>{const a=o.options,l=a.id,c=gg(l,a),h=we(a.type,o.dtype);(a.position===void 0||sE(a.position,c)!==sE(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Hn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Ce(r,(o,a)=>{o||delete i[a]}),Ce(i,o=>{sr.configure(this,o,o.options),sr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(oE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||pg(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Hn.getController(a),{datasetElementType:c,dataElementType:h}=Ye.datasets[a];Object.assign(l,{dataElementType:Hn.getElement(h),datasetElementType:c&&Hn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ce(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ce(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(oE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ce(this.scales,e=>{sr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Ew(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;zU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Ew(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;sr.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ce(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Sr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ui.has(this)?this.attached&&!ui.running(this)&&ui.start(this):(this.draw(),aE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=w4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Sy(n,r),e.controller.draw(),r&&ky(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return jl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=U4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=As(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);kh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ui.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Rw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Pu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ce(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ce(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ce(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!xh(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=Jj(e),c=$U(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Le(s.onHover,[e,a,this],this),l&&Le(s.onClick,[e,a,this],this));const h=!xh(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},de(zi,"defaults",Ye),de(zi,"instances",Pu),de(zi,"overrides",Ts),de(zi,"registry",Hn),de(zi,"version",VU),de(zi,"getChart",lE),zi);function cE(){return Ce(xd.instances,t=>t._plugins.invalidate())}function _k(t,e,n=e){t.lineCap=we(n.borderCapStyle,e.borderCapStyle),t.setLineDash(we(n.borderDash,e.borderDash)),t.lineDashOffset=we(n.borderDashOffset,e.borderDashOffset),t.lineJoin=we(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=we(n.borderWidth,e.borderWidth),t.strokeStyle=we(n.borderColor,e.borderColor)}function WU(t,e,n){t.lineTo(n.x,n.y)}function HU(t){return t.stepped?kV:t.tension||t.cubicInterpolationMode==="monotone"?CV:WU}function wk(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function qU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=wk(r,n,i),h=HU(s);let{move:d=!0,reverse:f}=i||{},m,v,b;for(m=0;m<=c;++m)v=r[(a+(f?c-m:m))%o],!v.skip&&(d?(t.moveTo(v.x,v.y),d=!1):h(t,b,v,f,s.stepped),b=v);return l&&(v=r[(a+(f?c:0))%o],h(t,b,v,f,s.stepped)),!!l}function KU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=wk(r,n,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,f,m,v,b,w,T;const E=N=>(o+(c?a-N:N))%s,S=()=>{b!==w&&(t.lineTo(h,w),t.lineTo(h,b),t.lineTo(h,T))};for(l&&(m=r[E(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=r[E(f)],m.skip)continue;const N=m.x,D=m.y,O=N|0;O===v?(D<b?b=D:D>w&&(w=D),h=(d*h+N)/++d):(S(),t.lineTo(N,D),v=O,d=0,b=w=D),T=D}S()}function mg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?KU:qU}function GU(t){return t.stepped?a4:t.tension||t.cubicInterpolationMode==="monotone"?l4:Xr}function QU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),_k(t,e.options),t.stroke(r)}function YU(t,e,n,i){const{segments:r,options:s}=e,o=mg(e);for(const a of r)_k(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const XU=typeof Path2D=="function";function JU(t,e,n,i){XU&&!e.options.segment?QU(t,e,n,i):YU(t,e,n,i)}class La extends kr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;ZV(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=m4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=f4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=GU(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],m=s[d],v=s[f];if(m===v){a.push(m);continue}const b=Math.abs((r-m[n])/(v[n]-m[n])),w=l(m,v,b,i.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,i){return mg(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=mg(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),JU(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}de(La,"id","line"),de(La,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),de(La,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),de(La,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function uE(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Au extends kr{constructor(n){super();de(this,"parsed");de(this,"skip");de(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return uE(this,n,"x",i)}inYRange(n,i){return uE(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!jl(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,dg(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}de(Au,"id","point"),de(Au,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),de(Au,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const hE=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},ZU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class dE extends kr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Le(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=qt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=hE(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((v,b)=>{const w=i+n/2+s.measureText(v.text).width;(b===0||c[c.length-1]+w+2*a>o)&&(d+=h,c[c.length-(b>0?0:1)]=0,m+=h,f++),l[b]={left:0,top:m,row:f,width:w,height:r},c[c.length-1]+=w+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,v=0,b=0;return this.legendItems.forEach((w,T)=>{const{itemWidth:E,itemHeight:S}=eB(i,n,s,w,r);T>0&&m+S+2*a>h&&(d+=f+a,c.push({width:f,height:m}),v+=f+a,b++,f=m=0),l[T]={left:v,top:m,col:b,width:E,height:S},f=Math.max(f,E),m+=S+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=mo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Jt(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Jt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Jt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Jt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sy(e,this),this._draw(),ky(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Ye.color,l=mo(e.rtl,this.left,this.width),c=qt(o.font),{padding:h}=o,d=c.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:b,itemHeight:w}=hE(o,d),T=function(O,x,_){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;r.save();const I=we(_.lineWidth,1);if(r.fillStyle=we(_.fillStyle,a),r.lineCap=we(_.lineCap,"butt"),r.lineDashOffset=we(_.lineDashOffset,0),r.lineJoin=we(_.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=we(_.strokeStyle,a),r.setLineDash(we(_.lineDash,[])),o.usePointStyle){const C={radius:b*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:I},A=l.xPlus(O,v/2),R=x+f;JS(r,C,A,R,o.pointStyleWidth&&v)}else{const C=x+Math.max((d-b)/2,0),A=l.leftForLtr(O,v),R=rl(_.borderRadius);r.beginPath(),Object.values(R).some(P=>P!==0)?fg(r,{x:A,y:C,w:v,h:b,radius:R}):r.rect(A,C,v,b),r.fill(),I!==0&&r.stroke()}r.restore()},E=function(O,x,_){Ph(r,_.text,O,x+w/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},S=this.isHorizontal(),N=this._computeTitleHeight();S?m={x:Jt(s,this.left+h,this.right-i[0]),y:this.top+h+N,line:0}:m={x:this.left+h,y:Jt(s,this.top+N+h,this.bottom-n[0].height),line:0},sk(this.ctx,e.textDirection);const D=w+h;this.legendItems.forEach((O,x)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;const _=r.measureText(O.text).width,I=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),C=v+f+_;let A=m.x,R=m.y;l.setWidth(this.width),S?x>0&&A+C+h>this.right&&(R=m.y+=D,m.line++,A=m.x=Jt(s,this.left+h,this.right-i[m.line])):x>0&&R+D>this.bottom&&(A=m.x=A+n[m.line].width+h,m.line++,R=m.y=Jt(s,this.top+N+h,this.bottom-n[m.line].height));const P=l.x(A);if(T(P,R,O),A=pV(I,A+v+f,S?A+C:this.right,e.rtl),E(l.x(A),R,O),S)m.x+=C+h;else if(typeof O.text!="string"){const ie=c.lineHeight;m.y+=Ek(O,ie)+h}else m.y+=D}),ok(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=qt(n.font),r=Ln(n.padding);if(!n.display)return;const s=mo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=Jt(e.align,d,this.right-f);else{const v=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);h=c+Jt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=Jt(a,d,d+f);o.textAlign=s.textAlign(QS(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Ph(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=qt(e.font),i=Ln(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Ma(e,this.left,this.right)&&Ma(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ma(e,r.left,r.left+r.width)&&Ma(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!iB(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=ZU(r,i);r&&!s&&Le(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Le(n.onHover,[e,i,this],this)}else i&&Le(n.onClick,[e,i,this],this)}}function eB(t,e,n,i,r){const s=tB(i,t,e,n),o=nB(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function tB(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function nB(t,e,n){let i=t;return typeof e.text!="string"&&(i=Ek(e,n)),i}function Ek(t,e){const n=t.text?t.text.length:0;return e*n}function iB(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var rB={id:"legend",_element:dE,start(t,e,n){const i=t.legend=new dE({ctx:t.ctx,options:n,chart:t});sr.configure(t,i,n),sr.addBox(t,i)},stop(t){sr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;sr.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Ln(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Fa={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=ug(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function $n(t,e){return e&&(vt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function hi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function sB(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function fE(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=qt(e.bodyFont),c=qt(e.titleFont),h=qt(e.footerFont),d=s.length,f=r.length,m=i.length,v=Ln(e.padding);let b=v.height,w=0,T=i.reduce((N,D)=>N+D.before.length+D.lines.length+D.after.length,0);if(T+=t.beforeBody.length+t.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),T){const N=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=m*N+(T-m)*l.lineHeight+(T-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let E=0;const S=function(N){w=Math.max(w,n.measureText(N).width+E)};return n.save(),n.font=c.string,Ce(t.title,S),n.font=l.string,Ce(t.beforeBody.concat(t.afterBody),S),E=e.displayColors?o+2+e.boxPadding:0,Ce(i,N=>{Ce(N.before,S),Ce(N.lines,S),Ce(N.after,S)}),E=0,n.font=h.string,Ce(t.footer,S),n.restore(),w+=v.width,{width:w,height:b}}function oB(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function aB(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function lB(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),aB(c,t,e,n)&&(c="center"),c}function pE(t,e,n){const i=n.yAlign||e.yAlign||oB(t,n);return{xAlign:n.xAlign||e.xAlign||lB(t,e,n,i),yAlign:i}}function cB(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function uB(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function gE(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=rl(o);let v=cB(e,a);const b=uB(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,f)+r:a==="right"&&(v+=Math.max(d,m)+r),{x:gn(v,0,i.width-e.width),y:gn(b,0,i.height-e.height)}}function iu(t,e,n){const i=Ln(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function mE(t){return $n([],hi(t))}function hB(t,e,n){return As(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function yE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const bk={beforeTitle:ci,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ci,beforeBody:ci,beforeLabel:ci,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return De(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ci,afterBody:ci,beforeFooter:ci,footer:ci,afterFooter:ci};function zt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?bk[e].call(n,i):r}class yg extends kr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new lk(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=hB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=zt(i,"beforeTitle",this,e),s=zt(i,"title",this,e),o=zt(i,"afterTitle",this,e);let a=[];return a=$n(a,hi(r)),a=$n(a,hi(s)),a=$n(a,hi(o)),a}getBeforeBody(e,n){return mE(zt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Ce(e,s=>{const o={before:[],lines:[],after:[]},a=yE(i,s);$n(o.before,hi(zt(a,"beforeLabel",this,s))),$n(o.lines,zt(a,"label",this,s)),$n(o.after,hi(zt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return mE(zt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=zt(i,"beforeFooter",this,e),s=zt(i,"footer",this,e),o=zt(i,"afterFooter",this,e);let a=[];return a=$n(a,hi(r)),a=$n(a,hi(s)),a=$n(a,hi(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(sB(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),Ce(a,h=>{const d=yE(e.callbacks,h);r.push(zt(d,"labelColor",this,h)),s.push(zt(d,"labelPointStyle",this,h)),o.push(zt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Fa[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=fE(this,i),c=Object.assign({},a,l),h=pE(this.chart,i,c),d=gE(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=rl(a),{x:f,y:m}=e,{width:v,height:b}=n;let w,T,E,S,N,D;return s==="center"?(N=m+b/2,r==="left"?(w=f,T=w-o,S=N+o,D=N-o):(w=f+v,T=w+o,S=N-o,D=N+o),E=w):(r==="left"?T=f+Math.max(l,h)+o:r==="right"?T=f+v-Math.max(c,d)-o:T=this.caretX,s==="top"?(S=m,N=S-o,w=T-o,E=T+o):(S=m+b,N=S+o,w=T+o,E=T-o),D=S),{x1:w,x2:T,x3:E,y1:S,y2:N,y3:D}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=mo(i.rtl,this.x,this.width);for(e.x=iu(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=qt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=qt(s.bodyFont),d=iu(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(s.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(f,c)+c/2,T=v+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,dg(e,b,w,T),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,dg(e,b,w,T)}else{e.lineWidth=Se(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=r.leftForLtr(f,c),w=r.leftForLtr(r.xPlus(f,1),c-2),T=rl(o.borderRadius);Object.values(T).some(E=>E!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,fg(e,{x:b,y:v,w:c,h:l,radius:T}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),fg(e,{x:w,y:v+1,w:c-2,h:l-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(b,v,c,l),e.strokeRect(b,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=qt(i.bodyFont);let f=d.lineHeight,m=0;const v=mo(i.rtl,this.x,this.width),b=function(_){n.fillText(_,v.x(e.x+m),e.y+f/2),e.y+=f+s},w=v.textAlign(o);let T,E,S,N,D,O,x;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=iu(this,w,i),n.fillStyle=i.bodyColor,Ce(this.beforeBody,b),m=a&&w!=="right"?o==="center"?c/2+h:c+2+h:0,N=0,O=r.length;N<O;++N){for(T=r[N],E=this.labelTextColors[N],n.fillStyle=E,Ce(T.before,b),S=T.lines,a&&S.length&&(this._drawColorBox(n,e,N,v,i),f=Math.max(d.lineHeight,l)),D=0,x=S.length;D<x;++D)b(S[D]),f=d.lineHeight;Ce(T.after,b)}m=0,f=d.lineHeight,Ce(this.afterBody,b),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=mo(i.rtl,this.x,this.width);for(e.x=iu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=qt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:v}=rl(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-v),n.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Fa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=fE(this,e),l=Object.assign({},o,this._size),c=pE(n,e,l),h=gE(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ln(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),sk(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),ok(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!xh(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!xh(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Fa[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}de(yg,"positioners",Fa);var dB={id:"tooltip",_element:yg,positioners:Fa,afterInit(t,e,n){n&&(t.tooltip=new yg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const fB=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function pB(t,e,n,i){const r=t.indexOf(e);if(r===-1)return fB(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const gB=(t,e)=>t===null?null:gn(Math.round(t),0,e);function vE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class vg extends Ko{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(De(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:pB(i,e,we(n,e),this._addedLabels),gB(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return vE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}de(vg,"id","category"),de(vg,"defaults",{ticks:{callback:vE}});function mB(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,v=h-1,{min:b,max:w}=e,T=!De(o),E=!De(a),S=!De(c),N=(w-b)/(d+1);let D=Tw((w-b)/v/m)*m,O,x,_,I;if(D<1e-14&&!T&&!E)return[{value:b},{value:w}];I=Math.ceil(w/D)-Math.floor(b/D),I>v&&(D=Tw(I*D/v/m)*m),De(l)||(O=Math.pow(10,l),D=Math.ceil(D*O)/O),r==="ticks"?(x=Math.floor(b/D)*D,_=Math.ceil(w/D)*D):(x=b,_=w),T&&E&&s&&iV((a-o)/s,D/1e3)?(I=Math.round(Math.min((a-o)/D,h)),D=(a-o)/I,x=o,_=a):S?(x=T?o:x,_=E?a:_,I=c-1,D=(_-x)/I):(I=(_-x)/D,tl(I,Math.round(I),D/1e3)?I=Math.round(I):I=Math.ceil(I));const C=Math.max(xw(D),xw(x));O=Math.pow(10,De(l)?C:l),x=Math.round(x*O)/O,_=Math.round(_*O)/O;let A=0;for(T&&(f&&x!==o?(n.push({value:o}),x<o&&A++,tl(Math.round((x+A*D)*O)/O,o,_E(o,N,t))&&A++):x<o&&A++);A<I;++A){const R=Math.round((x+A*D)*O)/O;if(E&&R>a)break;n.push({value:R})}return E&&f&&_!==a?n.length&&tl(n[n.length-1].value,a,_E(a,N,t))?n[n.length-1].value=a:n.push({value:a}):(!E||_===a)&&n.push({value:_}),n}function _E(t,e,{horizontal:n,minRotation:i}){const r=is(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class yB extends Ko{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return De(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Do(r),c=Do(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=mB(r,s);return e.bounds==="ticks"&&rV(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return YS(e,this.chart.options.locale,this.options.ticks.format)}}class _g extends yB{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=En(e)?e:0,this.max=En(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=is(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}de(_g,"id","linear"),de(_g,"defaults",{ticks:{callback:XS.formatters.numeric}});const Id={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wt=Object.keys(Id);function wE(t,e){return t-e}function EE(t,e){if(De(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),En(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Fl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function bE(t,e,n,i){const r=Wt.length;for(let s=Wt.indexOf(t);s<r-1;++s){const o=Id[Wt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Wt[s]}return Wt[r-1]}function vB(t,e,n,i,r){for(let s=Wt.length-1;s>=Wt.indexOf(n);s--){const o=Wt[s];if(Id[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Wt[n?Wt.indexOf(n):0]}function _B(t){for(let e=Wt.indexOf(t)+1,n=Wt.length;e<n;++e)if(Id[Wt[e]].common)return Wt[e]}function TE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=xy(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function wB(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function xE(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:wB(t,i,r,n)}class Nh extends Ko{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new O4._date(e.adapters.date);r.init(n),el(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:EE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=En(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=En(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=uV(r,s,o);return this._unit=n.unit||(i.autoSkip?bE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):vB(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:_B(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),xE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=gn(n,0,o),i=gn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||bE(s.minUnit,n,i,this._getLabelCapacity(n)),a=we(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Fl(l)||l===!0,h={};let d=n,f,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)TE(h,f,v);return(f===i||r.bounds==="ticks"||m===1)&&TE(h,f,v),Object.keys(h).sort(wE).map(b=>+b)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Le(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=i[n],m=c&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=is(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,xE(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(EE(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return dV(e.sort(wE))}}de(Nh,"id","time"),de(Nh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ru(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=rs(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=rs(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class IE extends Nh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ru(n,this.min),this._tableRange=ru(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(ru(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return ru(this._table,i*this._tableRange+this._minPos,!0)}}de(IE,"id","timeseries"),de(IE,"defaults",Nh.defaults);xd.register(La,Au,_g,vg,dB,rB);const Tk="label";function SE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function EB(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function xk(t,e){t.labels=e}function Ik(t,e,n=Tk){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function bB(t,e=Tk){const n={labels:[],datasets:[]};return xk(n,t.labels),Ik(n,t.datasets,e),n}function TB(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,m=M.useRef(null),v=M.useRef(null),b=()=>{m.current&&(v.current=new xd(m.current,{type:o,data:bB(a,s),options:l&&{...l},plugins:c}),SE(e,v.current))},w=()=>{SE(e,null),v.current&&(v.current.destroy(),v.current=null)};return M.useEffect(()=>{!r&&v.current&&l&&EB(v.current,l)},[r,l]),M.useEffect(()=>{!r&&v.current&&xk(v.current.config.data,a.labels)},[r,a.labels]),M.useEffect(()=>{!r&&v.current&&a.datasets&&Ik(v.current.config.data,a.datasets,s)},[r,a.datasets]),M.useEffect(()=>{v.current&&(r?(w(),setTimeout(b)):v.current.update(d))},[r,l,a.labels,a.datasets,d]),M.useEffect(()=>{v.current&&(w(),setTimeout(b))},[o]),M.useEffect(()=>(b(),()=>w()),[]),g.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const xB=M.forwardRef(TB);function IB(t,e){return xd.register(e),M.forwardRef((n,i)=>g.jsx(xB,{...n,ref:i,type:t}))}const My=IB("line",ku);function SB({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return g.jsxs("div",{className:"chart card",children:[g.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),g.jsx("div",{className:"chart-inner",children:g.jsx(My,{data:r,options:s})})]})}function kB({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],i=t.map(c=>c.dateIso),r=t.map(c=>{var h;return(h=c.wma)==null?void 0:h.bench}),s=t.map(c=>{var h;return(h=c.wma)==null?void 0:h.squat}),o=t.map(c=>{var h;return(h=c.wma)==null?void 0:h.deadlift}),a={labels:i,datasets:[{label:`${n[0]} (7-day WMA)`,data:r,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[1]} (7-day WMA)`,data:s,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[2]} (7-day WMA)`,data:o,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:c=>{var h,d;return`${c.dataset.label}: ${(d=(h=c.parsed.y)==null?void 0:h.toFixed)==null?void 0:d.call(h,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return g.jsxs("div",{className:"chart card",children:[g.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),g.jsx("div",{className:"chart-inner",children:g.jsx(My,{data:a,options:l})})]})}function CB({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>a.calories),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (raw)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.15}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return g.jsxs("div",{className:"chart card",children:[g.jsx("div",{className:"card-title",children:"Smoothed Weight/Strength vs Raw Calories"}),g.jsx("div",{className:"chart-inner",children:g.jsx(My,{data:s,options:o})})]})}function Hr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function PB(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function AB(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function RB({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Weekly Analysis"}),g.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),g.jsx("div",{className:"table-wrap",style:{marginTop:12},children:g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Week #"}),g.jsx("th",{children:"Avg Calories"}),g.jsx("th",{children:"Weight Change (kg)"}),g.jsx("th",{children:"Calculated TDEE"}),g.jsx("th",{children:"TDEE "}),g.jsx("th",{children:"Adaptation %"}),g.jsx("th",{children:"LBM (kg)"}),g.jsx("th",{children:"Loss Rate vs LBM %"}),g.jsx("th",{children:"Status"})]})}),g.jsx("tbody",{children:t.weeks.map(n=>g.jsxs("tr",{children:[g.jsx("td",{children:n.week}),g.jsx("td",{children:Hr(n.avgCalories,0)}),g.jsx("td",{children:Hr(n.weightChange,2)}),g.jsx("td",{children:Hr(n.tdee,0)}),g.jsx("td",{children:Hr(n.tdeeChangeFromBaseline,0)}),g.jsx("td",{className:PB(n.adaptationPct),children:Hr(n.adaptationPct,1)}),g.jsx("td",{children:Hr(n.lbm,1)}),g.jsx("td",{children:Hr(n.lossRatePct,2)}),g.jsx("td",{className:AB(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),g.jsxs("div",{className:"notice info",style:{marginTop:12},children:[g.jsx("div",{children:g.jsx("b",{children:"How to read this:"})}),g.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[g.jsxs("div",{children:[g.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",g.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function pt(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function kE(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function CE(t,e){const n=No(t).getTime(),i=No(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function PE(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function NB(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function DB({derived:t,weekly:e,profile:n,currentCycle:i}){const r=M.useMemo(()=>{var S,N,D,O;if(!(t!=null&&t.length))return[];const s=t[t.length-1],o=s.dateIso,a=(S=e==null?void 0:e.weeks)!=null&&S.length?e.weeks[e.weeks.length-1]:null,l=e==null?void 0:e.baselineTdee,c=e==null?void 0:e.baselineStrength,h=e==null?void 0:e.baselineWeeklyLoss,d=t.filter(x=>{const _=CE(o,x.dateIso);return _>=0&&_<=6}),f=d.length,m=PE(d.map(x=>x.protein)),v=PE(d.map(x=>x.calories)),b=Number.isFinite((N=s==null?void 0:s.wma)==null?void 0:N.weight)?s.wma.weight:s.weight,w=[];if(a&&Number.isFinite(l)&&Number.isFinite(a.tdee)&&Number.isFinite(a.adaptationPct)){const x=Math.max(0,-a.adaptationPct);let _="good";x>=10?_="bad":x>=5&&(_="warn");const I=a.adaptationPct<0?"dropped":"increased",C=`${pt(Math.abs(a.adaptationPct),0)}%`;w.push({key:"adaptation",level:_,title:"Metabolic adaptation",message:`Your TDEE has ${I} ${C} from baseline (${pt(l,0)}  ${pt(a.tdee,0)} kcal).`,action:_!=="good"?"Consider a refeed day or reducing training volume.":null})}if(a&&Number.isFinite(a.lossRatePct)){const x=String(a.lossRateStatus||"").toUpperCase();let _="info";a.lossRateStatus==="Optimal"&&(_="good"),a.lossRateStatus==="Aggressive"&&(_="bad");const I=a.lossRateStatus==="Aggressive"?"Risk of muscle loss.":a.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";w.push({key:"lossrate",level:_,title:"Loss rate vs LBM",message:`This week: ${pt(a.lossRatePct,1)}% of LBM lost  ${x}. ${I}`,action:null})}if(a&&Number.isFinite(c)&&Number.isFinite(a.avgStrengthWma)){const x=(a.avgStrengthWma-c)/c*100;let _="good",I="",C="Strength maintained/increasing.",A=null;x<-7.5?(_="bad",I="",C="Strength declining significantly.",A="Consider eating more or reducing cardio."):x<-5&&(_="warn",I="",C="Strength declining.",A="Consider eating more or reducing cardio."),w.push({key:"strength",level:_,title:"Strength trend",message:`${C} ${I} (${pt(x,1)}% vs baseline)`,action:A})}if(a&&Number.isFinite(a.tdee)&&Number.isFinite(a.lbm)){const x=a.lbm,_=.005*x,I=.01*x,C=_*7700/7,A=I*7700/7,R=a.tdee-C,P=a.tdee-A,ie=kE(Math.min(P,R),50),q=kE(Math.max(P,R),50);w.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${ie}-${q} kcal/day this week.`,action:null})}f<6&&w.push({key:"completeness",level:"warn",title:"Data completeness",message:`${f}/7 days logged this week  missing data may affect accuracy.`,action:null});let T=null;for(let x=t.length-1;x>=0;x--)if(Number.isFinite((D=t[x])==null?void 0:D.bfPct)){T=t[x].dateIso;break}if(!T)w.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const x=CE(o,T);x>=7?w.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):w.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-x} day(s).`,action:null})}if(Number.isFinite(m)&&Number.isFinite(b)){const x=1.6*b,_=2.2*b;if(m<x){const I=(x-m)/x*100;w.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${pt(I,0)}% below the muscle-retention range (${pt(m,0)}g/day vs ${pt(x,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else m>_?w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${pt(m,0)}g/day).`,action:null}):w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${pt(m,0)}g/day).`,action:null})}if(a&&Number.isFinite(h)&&Number.isFinite(a.weightChange)){const x=Math.max(0,-a.weightChange),_=h;(x<.2||_>.2&&x<_*.35)&&w.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${pt(x,1)}kg this week vs ${pt(_,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const E=Number(i==null?void 0:i.targetWeightKg);if(((i==null?void 0:i.type)==="cutting"||(i==null?void 0:i.type)==="bulking")&&Number.isFinite(E)&&t.length>=2){const x=t.find(C=>C.dateIso>=i.startDateIso)||t[0],_=Number(x==null?void 0:x.weight),I=Number((O=t[t.length-1])==null?void 0:O.weight);if(Number.isFinite(_)&&Number.isFinite(I)){if(i.type==="cutting"&&_>E){const C=_-I,A=_-E,R=Math.max(0,Math.min(1,C/A))*100;C>=1&&w.push({level:"good",title:"Progress milestone",message:`${pt(C,1)}kg down since cycle start  ${pt(R,0)}% to target.`,action:null})}if(i.type==="bulking"&&_<E){const C=I-_,A=E-_,R=Math.max(0,Math.min(1,C/A))*100;C>=1&&w.push({level:"good",title:"Progress milestone",message:`${pt(C,1)}kg up since cycle start  ${pt(R,0)}% to target.`,action:null})}}}return a||(w.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(v)&&w.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${pt(v,0)} kcal/day.`,action:null})),w},[t,e,n]);return r.length?g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Insights"}),g.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),g.jsx("div",{className:"grid",style:{marginTop:12},children:r.map(s=>g.jsxs("div",{className:`card insight-card ${NB(s.level)}`,style:{gridColumn:"span 6"},children:[g.jsx("div",{className:"insight-title",children:s.title}),g.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:s.message}),s.action&&g.jsx("div",{className:"small",style:{marginTop:8},children:s.action})]},s.key))})]}):null}function Uf(t,e){const n=No(t).getTime(),i=No(e).getTime();return Math.floor((n-i)/(24*60*60*1e3))}function Ui(t){const e=(t||[]).map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function AE(t,e,n){return Math.max(e,Math.min(n,t))}function pe(t,e=0){return Number.isFinite(t)?Number(t).toFixed(e):""}function MB(t){const e=String(t||"").toLowerCase();return e==="cut"||e==="cutting"?"cut":e==="bulk"||e==="bulking"?"bulk":e==="maintain"||e==="maintaining"?"maintain":"none"}function OB(t){return t==="cut"?"CUT":t==="bulk"?"BULK":t==="maintain"?"MAINTAIN":"NO CYCLE"}function LB(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=.2?{key:"stable",sym:"",label:"Stable",value:e}:e<-1?{key:"rapid_loss",sym:"",label:"Rapid loss",value:e}:e<-.2?{key:"losing",sym:"",label:"Losing",value:e}:e>1?{key:"rapid_gain",sym:"",label:"Rapid gain",value:e}:e>.2?{key:"gaining",sym:"",label:"Gaining",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function FB(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=.5?{key:"stable",sym:"",label:"Stable",value:e}:e<-.5?{key:"decreasing",sym:"",label:"Decreasing",value:e}:e>.5?{key:"increasing",sym:"",label:"Increasing",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function jB(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=2?{key:"stable",sym:"",label:"Stable",value:e}:e>2?{key:"increasing",sym:"",label:"Increasing",value:e}:e<-5?{key:"rapid_decline",sym:"",label:"Rapid decline",value:e}:e<-2?{key:"declining",sym:"",label:"Declining",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function VB(t){return t==="cut"?"cycle-badge cut":t==="bulk"?"cycle-badge bulk":t==="maintain"?"cycle-badge maintain":"cycle-badge none"}function UB(t){const{cycle:e,hasCycleTarget:n,currentAvgCal:i,currentProtein:r,proteinPerKg:s,targetProtein2g:o,currentWeight:a,targetWeight:l,weightToGoal:c,directionToGoal:h,derivedLen:d,daysLogged:f,daysRemaining:m,hasNavyAny:v,hasNavyInWindow:b,weightTrend:w,bfTrend:T,strengthTrend:E,lossRate:S,calculatedTdee:N,baselineTdee:D,adaptationPct:O,strengthDeclinePct:x,weeklyWeightChange:_,weeklyWeightLoss:I,prevWeekTdee:C}=t,A=[],R=[];if(d<14||!Number.isFinite(D)||!Number.isFinite(N)){let L="";return m>0?L=`Need ${m} more days of consistent logging to assess status.`:L="Need at least 14 days of consistent logging to assess status.",f<5&&(L=`Only ${f}/7 days logged this week. Need 5 days per week for accurate assessment.`),v?b||R.push("No recent Navy measurements in the selected period. BF% trend will be less accurate."):R.push("Take your first body measurements (neck, waist, hip) to enable body composition tracking."),e==="none"&&R.push("No active cycle set. Create a cycle so status checks alignment with your goal."),n&&Number.isFinite(l)&&Number.isFinite(a)&&R.push(`Goal: ${pe(l,1)}kg (currently ${pe(a,1)}kg, ${pe(Math.abs(c),1)}kg to go).`),{level:"gray",title:"Insufficient Data",emoji:"",message:L,warnings:A,notes:R}}if(f<5){const L=`Only ${f}/7 days logged this week. Need 5 days per week for accurate assessment.`;return v||R.push("Take your first body measurements (neck, waist, hip) to enable body composition tracking."),{level:"gray",title:"Insufficient Data",emoji:"",message:L,warnings:A,notes:R}}const P=Math.round(i||0),ie=Math.round(r||0),q=Math.round(N||0),he=Math.round(D||0),re=T.key!=="unknown",B=E.key!=="unknown";(!v||!b||!re)&&R.push("Body fat trend is unavailable in this period. Add Navy measurements (neck/waist/hip) for more accurate status."),B||R.push("Strength trend is unavailable. Log your big-3 lifts (bench/squat/deadlift) to improve accuracy.");const K=Number.isFinite(c)?Math.abs(c):null;function Q(){!n||!Number.isFinite(l)||!Number.isFinite(a)||!Number.isFinite(K)||K<=2||(h==="need to lose"?A.push(`Note: You're ${pe(K,1)}kg from your target of ${pe(l,1)}kg. Consider switching to a Cut cycle if fat loss is the priority.`):h==="need to gain"&&A.push(`Note: You're ${pe(K,1)}kg from your target of ${pe(l,1)}kg. Consider switching to a Bulk cycle if gaining is the priority.`))}function V(){e!=="none"&&(e==="cut"?(w.key==="stable"||w.key==="gaining"||w.key==="rapid_gain"||re&&(T.key==="stable"||T.key==="increasing"))&&A.push(" Cycle misalignment: In a Cut cycle, weight should trend  and body fat should trend  over time."):e==="bulk"?(w.key==="stable"||w.key==="losing"||w.key==="rapid_loss"||B&&E.key==="stable")&&A.push(" Cycle misalignment: In a Bulk cycle, weight should trend  and strength should trend  over time."):e==="maintain"&&(w.key==="rapid_gain"||w.key==="rapid_loss")&&A.push(" Cycle misalignment: In a Maintain cycle, weight should stay  (stable)."))}if(Number.isFinite(O)&&O<-15&&E.key==="rapid_decline"){const L=` URGENT: TDEE dropped ${pe(O,1)}% (from ${he} to ${q}). Take a 2-week diet break: increase from ${P} to ~${q} cal/day.`;return V(),{level:"red",title:"Metabolic Crash",emoji:"",message:L,warnings:A,notes:R}}if(re&&w.key!=="gaining"&&T.key==="increasing"&&(E.key==="declining"||E.key==="rapid_decline")){let L=" CRITICAL: Body fat is rising while weight is dropping  likely muscle loss.";return Number.isFinite(s)&&s<1.8?L=` CRITICAL: Insufficient protein (${ie}g, ${pe(s,1)}g/kg) causing muscle loss. Increase to ~${Math.round(o)}g and raise calories to maintenance (~${q}).`:L=` CRITICAL: Despite adequate protein (${ie}g, ${pe(s,1)}g/kg), you're losing muscle faster than fat. Stop cutting: increase from ${P} to maintenance (~${q}) and focus on progressive overload.`,V(),n&&Number.isFinite(l)&&Number.isFinite(a)&&a<l&&A.push(` You're already below your goal weight of ${pe(l,1)}kg. Stop cutting and switch to Maintain or Bulk.`),{level:"red",title:"Skinny-Fat Trajectory",emoji:"",message:L,warnings:A,notes:R}}if(E.key==="rapid_decline"&&(w.key==="losing"||w.key==="rapid_loss")){let L="";return Number.isFinite(s)&&s<1.6?L=` URGENT: Protein too low (${ie}g, ${pe(s,1)}g/kg). Increase to ~${Math.round(o)}g/day. Keep calories at ${P} while training stays consistent.`:Number.isFinite(x)&&x>5?L=` URGENT: Strength is declining ${pe(x,1)}% from baseline. Review training stimulus/recovery. Consider reducing cardio and keeping calories closer to maintenance (~${q}).`:L=` URGENT: Strength dropping rapidly while cutting. Increase calories from ${P} to ~${P+300} and reassess training recovery.`,V(),{level:"red",title:"Inadequate Protein / Poor Training",emoji:"",message:L,warnings:A,notes:R}}if(re&&(w.key==="gaining"||w.key==="rapid_gain")&&T.key==="increasing"&&E.key==="stable"){let L="";return Number.isFinite(s)&&s<1.6?L=` Eating ${P} cal but only ${ie}g protein (${pe(s,1)}g/kg). Increase protein to ~${Math.round(o)}g and reduce total calories to ~${Math.max(0,P-300)}.`:L=` Eating ${P} cal with adequate protein (${ie}g, ${pe(s,1)}g/kg) but no strength gains. Either reduce ~${Math.max(0,P-400)} for a cut or increase training intensity/volume to actually build muscle.`,V(),{level:"red",title:"Overfeeding Without Stimulus",emoji:"",message:L,warnings:A,notes:R}}if(re&&T.key==="increasing"&&(E.key==="declining"||E.key==="rapid_decline")){let L=" Losing muscle and gaining fat. Resume consistent training immediately.";return Number.isFinite(C)&&Number.isFinite(i)&&(L=` Losing muscle and gaining fat. Resume consistent training immediately. You're eating ~${P} vs estimated TDEE ~${Math.round(C)}. Reduce to maintenance until training is consistent.`),A.push("Cannot progress in any cycle without consistent training. Consider switching to Maintaining until training is back on track."),Q(),{level:"red",title:"Detraining",emoji:"",message:L,warnings:A,notes:R}}if(Number.isFinite(C)&&Number.isFinite(i)&&Number.isFinite(_)){const L=(C-i)*7,W=-_*7700;if(Math.abs(W-L)>3850){const X=(i-C)*7/7700,ce=`Weight changed ${pe(_,1)}kg/week but calories suggest ${pe(X,1)}kg/week. Likely water retention (sodium/carbs/hormones/timing). Keep ${P} cal and reassess in 1 week.`;return V(),Q(),{level:"gray",title:"Water Weight Fluctuation",emoji:"",message:ce,warnings:A,notes:R}}}if(w.key==="rapid_loss"&&(E.key==="declining"||E.key==="rapid_decline")){let L="";return Number.isFinite(s)&&s<1.8?L=` Losing muscle due to insufficient protein. Currently ${ie}g (${pe(s,1)}g/kg). Increase to ~${Math.round(o)}g/day and reduce deficit to ~${P+200} cal.`:L=` Deficit too aggressive despite adequate protein (${ie}g/day, ${pe(s,1)}g/kg). Increase calories from ${P} to ~${P+250} to preserve muscle.`,Number.isFinite(S)&&S>1&&R.push(`Loss rate: ${pe(S,2)}% of LBM/week (aggressive).`),V(),{level:"yellow",title:"Cutting (Aggressive)",emoji:"",message:L,warnings:A,notes:R}}if(re&&w.key==="rapid_gain"&&T.key==="increasing"&&E.key==="increasing"){const L=` Excessive fat gain. Reduce from ${P} to ~${Math.max(0,P-250)} cal/day while keeping protein around ${ie}g.`;return V(),Q(),{level:"yellow",title:"Dirty Bulking",emoji:"",message:L,warnings:A,notes:R}}if(w.key==="stable"&&(!re||T.key==="stable")&&(!B||E.key==="stable")){let L="You're stable with no clear trend.";return e==="maintain"?L=`You're maintaining as intended. If you want a direction, choose Cut (~${Math.max(0,q-500)} cal) or Bulk (~${q+300} cal).`:e==="cut"?(L=` Eating near maintenance (${P}  ${q}) but in a Cut cycle. Reduce to ~${Math.max(0,q-500)} cal/day to start cutting.`,Number.isFinite(O)&&O<-10&&R.push(`Metabolic adaptation: ${pe(O,1)}%. Consider a short diet break near maintenance.`)):e==="bulk"?L=` Weight is stable but in a Bulk cycle. Increase from ${P} to ~${q+400} cal/day to start gaining.`:L="Set a cycle to interpret trends in context.",Q(),{level:"yellow",title:"Spinning Wheels",emoji:"",message:L,warnings:A,notes:R}}if(w.key==="stable"&&re&&T.key==="decreasing"&&E.key==="increasing"){let L=` Excellent recomp: losing fat and gaining muscle while maintaining weight. Current calories (${P}) fit your plan.`;return e==="cut"&&(L=` Good progress but misaligned: you're recomping (weight stable) in a Cut cycle. To lose weight as planned, reduce to ~${Math.max(0,P-300)} cal/day.`),e==="bulk"&&(L=` Good progress but misaligned: you're recomping (weight stable) in a Bulk cycle. To gain as planned, increase to ~${P+400} cal/day.`),Q(),{level:"green",title:e==="bulk"?"Gaintaining":"Recomping",emoji:"",message:L,warnings:A,notes:R}}if(w.key==="gaining"&&E.key==="increasing"&&(!re||T.key==="stable"||T.key==="increasing")){let L=` Perfect lean bulk. Stay around ${P} calories/day with ${ie}g protein.`;return e==="maintain"&&(L=` Misaligned: you're bulking in a Maintaining cycle. Either reduce to maintenance (~${q} cal) or switch cycle to Bulking.`),e==="cut"&&(L=` Misaligned: you're bulking in a Cutting cycle. Either reduce to ~${Math.max(0,q-500)} cal or switch cycle to Bulking.`),n&&Number.isFinite(l)&&Number.isFinite(c)&&c<-2?R.push(`On track toward ${pe(l,1)}kg  ${pe(Math.abs(c),1)}kg to go.`):n&&Number.isFinite(l)&&Number.isFinite(c)&&c>2&&A.push(` Moving away from goal: currently ${pe(a,1)}kg vs target ${pe(l,1)}kg.`),{level:"green",title:"Lean Bulking",emoji:"",message:L,warnings:A,notes:R}}if(w.key==="losing"&&(!re||T.key==="decreasing")&&(E.key==="stable"||E.key==="increasing")&&(Number.isFinite(S)?S>=.5&&S<=1:!0)){let W=` Perfect fat loss: losing fat while preserving muscle. Maintain ${P} calories/day and ${ie}g protein.`;if(e==="maintain"&&(W=` Misaligned: you're cutting effectively but in a Maintaining cycle. Either increase to maintenance (~${q} cal) or switch cycle to Cutting.`),e==="bulk"&&(W=` Misaligned: you're losing weight but in a Bulking cycle. Either increase to ~${q+400} cal or switch cycle to Cutting.`),n&&Number.isFinite(l)&&Number.isFinite(c)&&c>2&&I>0){const X=c/I;R.push(`At ~${pe(I,1)}kg/week, you'll reach ${pe(l,1)}kg in ~${Math.ceil(X)} weeks.`)}return n&&Number.isFinite(c)&&Math.abs(c)<=1&&R.push(` Almost at your goal weight of ${pe(l,1)}kg. Consider switching to Maintaining within 12 weeks.`),{level:"green",title:"Cutting (Optimal)",emoji:"",message:W,warnings:A,notes:R}}if(w.key==="losing"&&(!re||T.key==="decreasing")&&E.key==="stable"){let L=`Slow but safe cut at ~${P} cal/day.`;return I<.3&&(L=`Safe but slow cut. Consider reducing to ~${Math.max(0,P-200)} cal/day to accelerate.`),e==="maintain"&&(L=` Misaligned: you're cutting (slowly) but in a Maintaining cycle. Either increase to maintenance (~${q}) or switch to Cutting.`),e==="bulk"&&(L=` Misaligned: you're losing weight but in a Bulking cycle. Increase to ~${q+400} immediately or switch to Cutting.`),n&&Number.isFinite(c)&&c>5&&R.push(`You're ${pe(c,1)}kg from your goal of ${pe(l,1)}kg. Consider a slightly larger deficit to reach it sooner.`),{level:"green",title:"Cutting (Conservative)",emoji:"",message:L,warnings:A,notes:R}}if(w.key==="stable"&&(!re||T.key==="stable"||T.key==="decreasing")&&(E.key==="stable"||E.key==="increasing")){let L=` Solid maintenance at ~${P} cal/day.`;return e==="cut"&&(L=` Misaligned: weight is stable but you're in a Cut cycle. Reduce to ~${Math.max(0,q-500)} cal or switch cycle to Maintaining.`),e==="bulk"&&(L=` Misaligned: weight is stable but you're in a Bulk cycle. Increase to ~${q+400} cal or switch cycle to Maintaining.`),Q(),{level:"green",title:"Maintaining Successfully",emoji:"",message:L,warnings:A,notes:R}}return V(),Q(),{level:"yellow",title:"Mixed Signals",emoji:"",message:"Trends are mixed across weight/body fat/strength. Keep logging consistently for another 12 weeks, then reassess.",warnings:A,notes:R}}function BB({derived:t,weekly:e,profile:n,currentCycle:i}){var f,m;const[r,s]=M.useState(7),[o,a]=M.useState(!1),l=M.useMemo(()=>{var He,Te,Lr,Go,Qo,ac;const v=Array.isArray(t)?t:[],b=v.length;if(!b)return{rangeDays:r,status:{level:"gray",title:"Insufficient Data",emoji:"",message:"No data yet. Add your first entry to see your status.",warnings:[],notes:[]},cycle:"none",cycleBadge:"NO CYCLE",weightTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},bfTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},strengthTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},currentAvgCal:null,currentProtein:null,currentWeight:null,targetWeight:null,goalProgress:null};const w=v[v.length-1].dateIso,T=v.filter(Y=>{const ge=Uf(w,Y.dateIso);return ge>=0&&ge<=r-1}),E=v.filter(Y=>{const ge=Uf(w,Y.dateIso);return ge>=r&&ge<=r*2-1}),S=Ui(T.map(Y=>{var ge;return Number.isFinite((ge=Y==null?void 0:Y.wma)==null?void 0:ge.weight)?Y.wma.weight:Y.weight})),N=Ui(E.map(Y=>{var ge;return Number.isFinite((ge=Y==null?void 0:Y.wma)==null?void 0:ge.weight)?Y.wma.weight:Y.weight})),D=Number.isFinite(S)&&Number.isFinite(N)?(S-N)*(7/r):null,O=LB(D),x=Ui(T.map(Y=>Y.bfPct).filter(Number.isFinite)),_=Ui(E.map(Y=>Y.bfPct).filter(Number.isFinite)),I=Number.isFinite(x)&&Number.isFinite(_)?x-_:null,C=FB(I),A=Ui(T.map(Y=>{var ge;return(ge=Y==null?void 0:Y.wma)==null?void 0:ge.avgStrength}).filter(Number.isFinite)),R=Ui(E.map(Y=>{var ge;return(ge=Y==null?void 0:Y.wma)==null?void 0:ge.avgStrength}).filter(Number.isFinite)),P=Number.isFinite(A)&&Number.isFinite(R)&&R!==0?(A-R)/R*100:null,ie=jB(P),q=Ui(T.map(Y=>Y.calories).filter(Number.isFinite)),he=Ui(T.map(Y=>Y.protein).filter(Number.isFinite)),re=v[v.length-1],B=Number.isFinite((He=re==null?void 0:re.wma)==null?void 0:He.weight)?re.wma.weight:re.weight;let K=null;if(T.length>=2){const Y=T[0],ge=T[T.length-1],un=Number.isFinite((Te=Y==null?void 0:Y.wma)==null?void 0:Te.weight)?Y.wma.weight:Y.weight,Mi=Number.isFinite((Lr=ge==null?void 0:ge.wma)==null?void 0:Lr.weight)?ge.wma.weight:ge.weight;if(Number.isFinite(un)&&Number.isFinite(Mi)){const Ns=Math.max(1,T.length-1);K=(Mi-un)*(7/Ns)}}const Q=Number.isFinite(K)?Math.max(0,-K):null;let V=null;if(Number.isFinite(q)&&Number.isFinite(K)){const ge=-K*7700/7;V=q+ge}const L=(e==null?void 0:e.baselineTdee)??null,W=Number.isFinite(V)&&Number.isFinite(L)&&L!==0?(V-L)/L*100:null,X=(e==null?void 0:e.baselineStrength)??null,ce=Number.isFinite(X)&&Number.isFinite(A)&&X!==0?(X-A)/X*100:null;let Z=null;for(let Y=v.length-1;Y>=0;Y--)if(Number.isFinite((Go=v[Y])==null?void 0:Go.lbm)){Z=v[Y].lbm;break}const ke=Number.isFinite(Z)&&Number.isFinite(Q)&&Z>0?Q/Z*100:null,Dt=Number.isFinite(he)&&Number.isFinite(B)&&B>0?he/B:null,jn=Number.isFinite(B)?B*2:null,et=v.filter(Y=>{const ge=Uf(w,Y.dateIso);return ge>=0&&ge<=6}),ht=Y=>Number.isFinite(Y.weight)&&Number.isFinite(Y.protein)&&Number.isFinite(Y.carbs)&&Number.isFinite(Y.fats),G=et.filter(ht).length,fe=v.filter(ht).length,Xe=Math.max(0,14-fe),dt=v.some(Y=>Number.isFinite(Y.neck)||Number.isFinite(Y.waist)||Number.isFinite(Y.hip)||Number.isFinite(Y.bfPct)),bn=T.some(Y=>Number.isFinite(Y.bfPct)),ot=MB(i==null?void 0:i.type),si=ot!=="maintain"&&Number.isFinite(i==null?void 0:i.targetWeightKg),ln=si?Number(i.targetWeightKg):null,cn=si&&Number.isFinite(ln)&&Number.isFinite(B)?B-ln:null;let Vn=null;Number.isFinite(cn)&&(Math.abs(cn)<=1?Vn="at goal":cn>0?Vn="need to lose":Vn="need to gain");let Rs=null;if(si&&Number.isFinite(ln)&&(i!=null&&i.startDateIso)){const Y=v.find(un=>(un.dateIso||"")>=(i.startDateIso||"")),ge=Y?Number.isFinite((Qo=Y==null?void 0:Y.wma)==null?void 0:Qo.weight)?Y.wma.weight:Y.weight:null;if(Number.isFinite(ge)&&Number.isFinite(B)){const un=Math.abs(ge-ln),Mi=ot==="cut"?ge-B:B-ge,Ns=AE(Mi,0,un||1),Sd=un>0?Ns/un*100:0;Rs={startWeight:ge,totalNeeded:un,progress:Ns,pct:AE(Sd,0,100)}}}const ne=(e==null?void 0:e.weeks)||[],Di=ne.length>=2?(ac=ne[ne.length-2])==null?void 0:ac.tdee:null,Or=UB({cycle:ot,hasCycleTarget:si,currentAvgCal:q,currentProtein:he,proteinPerKg:Dt,targetProtein2g:jn,currentWeight:B,targetWeight:ln,weightToGoal:cn,directionToGoal:Vn,derivedLen:b,daysLogged:G,daysRemaining:Xe,hasNavyAny:dt,hasNavyInWindow:bn,weightTrend:O,bfTrend:C,strengthTrend:ie,lossRate:ke,calculatedTdee:V,baselineTdee:L,adaptationPct:W,strengthDeclinePct:ce,weeklyWeightChange:K,weeklyWeightLoss:Q,prevWeekTdee:Di});return{rangeDays:r,status:Or,cycle:ot,cycleBadge:OB(ot),weightTrend:O,bfTrend:C,strengthTrend:ie,currentAvgCal:q,currentProtein:he,currentWeight:B,targetWeight:ln,weightToGoal:cn,goalProgress:Rs,calculatedTdee:V,baselineTdee:L,adaptationPct:W,daysLogged:G,hasNavyAny:dt,hasNavyInWindow:bn,proteinPerKg:Dt,targetProtein2g:jn,lossRate:ke,weeklyWeightChange:K}},[t,e,i,r]),{status:c}=l,h=(c==null?void 0:c.level)||"gray",d=((c==null?void 0:c.warnings)||[]).length>0&&h==="green";return g.jsxs("div",{className:`status-banner level-${h}${d?" has-accent":""}`,children:[g.jsxs("div",{className:"status-left",children:[g.jsxs("div",{className:"status-topline",children:[g.jsxs("div",{className:"status-title",children:[g.jsx("span",{style:{marginRight:8},children:c.emoji}),c.title]}),g.jsx("div",{className:VB(l.cycle),children:l.cycleBadge})]}),g.jsx("div",{className:"status-message",children:c.message}),g.jsxs("div",{className:"status-trends",children:[g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Weight"}),g.jsx("span",{className:"trend-v",children:l.weightTrend.sym}),g.jsx("span",{className:"trend-n",children:Number.isFinite(l.weightTrend.value)?`${pe(l.weightTrend.value,1)} kg/wk`:""})]}),g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Body fat"}),g.jsx("span",{className:"trend-v",children:l.bfTrend.sym}),g.jsx("span",{className:"trend-n",children:Number.isFinite(l.bfTrend.value)?`${pe(l.bfTrend.value,1)} %`:""})]}),g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Strength"}),g.jsx("span",{className:"trend-v",children:l.strengthTrend.sym}),g.jsx("span",{className:"trend-n",children:Number.isFinite(l.strengthTrend.value)?`${pe(l.strengthTrend.value,1)} %`:""})]}),Number.isFinite(l.currentAvgCal)&&g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Avg cal"}),g.jsx("span",{className:"trend-v",children:""}),g.jsxs("span",{className:"trend-n",children:[Math.round(l.currentAvgCal)," /day"]})]}),Number.isFinite(l.proteinPerKg)&&g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Protein"}),g.jsx("span",{className:"trend-v",children:""}),g.jsxs("span",{className:"trend-n",children:[pe(l.proteinPerKg,1)," g/kg"]})]})]}),l.goalProgress&&g.jsxs("div",{className:"status-goal",children:[g.jsxs("div",{className:"status-goal-text",children:["Goal: ",pe(l.targetWeight,1),"kg  Progress: ",pe(l.goalProgress.progress,1)," / ",pe(l.goalProgress.totalNeeded,1),"kg"]}),g.jsx("div",{className:"progress",children:g.jsx("div",{className:"progress-bar",style:{width:`${l.goalProgress.pct}%`}})})]}),!!((f=c.warnings)!=null&&f.length)&&g.jsx("div",{className:"status-warnings",children:c.warnings.map((v,b)=>g.jsx("div",{className:"status-warning",children:v},b))}),!!((m=c.notes)!=null&&m.length)&&g.jsx("div",{className:"status-notes",children:c.notes.map((v,b)=>g.jsx("div",{className:"status-note",children:v},b))})]}),g.jsxs("div",{className:"status-right",children:[g.jsxs("div",{className:"status-controls",children:[g.jsxs("select",{value:String(r),onChange:v=>s(Number(v.target.value)),children:[g.jsx("option",{value:"7",children:"Last 7 days"}),g.jsx("option",{value:"14",children:"Last 14 days"}),g.jsx("option",{value:"30",children:"Last 30 days"})]}),g.jsx("button",{className:"btn small icon",type:"button",onClick:()=>a(!0),"aria-label":"How status is determined",children:""})]}),Number.isFinite(l.calculatedTdee)&&Number.isFinite(l.baselineTdee)&&g.jsxs("div",{className:"status-mini",children:[g.jsx("div",{className:"muted",children:"TDEE"}),g.jsxs("div",{className:"mini-row",children:[g.jsxs("span",{children:[Math.round(l.baselineTdee),"  ",Math.round(l.calculatedTdee)," cal"]}),Number.isFinite(l.adaptationPct)&&g.jsxs("span",{className:"muted",children:["(",pe(l.adaptationPct,1),"%)"]})]})]}),l.hasNavyAny&&!l.hasNavyInWindow&&g.jsxs("div",{className:"status-mini",children:[g.jsx("div",{className:"muted",children:"Body fat"}),g.jsx("div",{className:"mini-row",children:g.jsx("span",{children:"Take measurements in this period"})})]})]}),o&&g.jsx("div",{className:"modal-backdrop",onClick:()=>a(!1),children:g.jsxs("div",{className:"modal",onClick:v=>v.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("div",{className:"modal-title",children:"How this status is determined"}),g.jsx("button",{className:"btn small",type:"button",onClick:()=>a(!1),children:"Close"})]}),g.jsxs("div",{className:"modal-body",children:[g.jsx("p",{className:"muted",children:"Status compares the selected period to the previous period of the same length. Weight uses smoothed trend; calories & protein use raw averages."}),g.jsxs("div",{className:"modal-grid",children:[g.jsxs("div",{children:[g.jsx("div",{className:"modal-subtitle",children:"Weight trend (kg/week)"}),g.jsxs("ul",{className:"modal-list",children:[g.jsx("li",{children:"Stable: 0.2 or less"}),g.jsx("li",{children:"Losing/Gaining: > 0.2"}),g.jsx("li",{children:"Rapid loss/gain: > 1.0"})]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"modal-subtitle",children:"Body fat trend (% points)"}),g.jsxs("ul",{className:"modal-list",children:[g.jsx("li",{children:"Stable: 0.5 or less"}),g.jsx("li",{children:"Decreasing/Increasing: > 0.5"})]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"modal-subtitle",children:"Strength trend (% change)"}),g.jsxs("ul",{className:"modal-list",children:[g.jsx("li",{children:"Stable: 2% or less"}),g.jsx("li",{children:"Increasing: > 2%"}),g.jsx("li",{children:"Declining: < -2%"}),g.jsx("li",{children:"Rapid decline: < -5%"})]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"modal-subtitle",children:"Cycle expectations"}),g.jsxs("ul",{className:"modal-list",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Cutting:"})," Weight , Body fat , Strength "]}),g.jsxs("li",{children:[g.jsx("b",{children:"Bulking:"})," Weight , Strength , Body fat /slight "]}),g.jsxs("li",{children:[g.jsx("b",{children:"Maintaining:"})," Weight , Strength /, Body fat /"]})]})]})]}),g.jsx("p",{className:"muted",style:{marginTop:12},children:"Recommendations use your logged averages and calculated TDEE. If you skip logs (or measurements), the banner will fall back to fewer signals and ask for more data."})]})]})})]})}function zB(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function $B(t){if(!t||typeof t!="string")return"";const e=t.split("-");if(e.length!==3)return t;const[n,i,r]=e;return`${r}/${i}/${n}`}function Bi(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function Sk({view:t="dashboard"}){const e=Bo(),{user:n}=Ni(),{profile:i}=yy(),r=Array.isArray(i==null?void 0:i.liftNames)&&i.liftNames.length===3?i.liftNames:["Bench Press","Squat","Deadlift"],[s,o]=M.useState([]),a=Array.isArray(i==null?void 0:i.cycles)?i.cycles:[],[l,c]=M.useState(null);M.useEffect(()=>{if(c(null),!n)return;const D=_y(n.uid,O=>o(O),O=>c((O==null?void 0:O.message)||"Failed to load entries."));return()=>D()},[n]);const h=M.useMemo(()=>bj(),[]),d=M.useMemo(()=>Tj(60),[]),f=M.useMemo(()=>d!=null&&d.length?[{id:"demo",type:"cutting",targetWeightKg:84,startDateIso:d[0].dateIso,endDateIso:null}]:[],[d]),m=n?i:h,v=n?s:d,b=n?a:f,w=M.useMemo(()=>{if(!(b!=null&&b.length))return null;const D=Th(),O=b.find(_=>!_.endDateIso);return O||b.find(_=>(_.startDateIso||"")<=D&&(_.endDateIso||"")>=D)||null},[b]);function T(){if(!n){e("/signup");return}e("/profile#cycles")}const E=M.useMemo(()=>VS(v,m||{}),[v,m]),S=M.useMemo(()=>Ej(E),[E]),N=M.useMemo(()=>{var he;if(!E.length)return null;const D=E[0],O=E[E.length-1],x=(he=O==null?void 0:O.wma)==null?void 0:he.weight,_=Number.isFinite(D.weight)&&Number.isFinite(O.weight)?O.weight-D.weight:null,I=O.calories,C=D.calories,A=Number.isFinite(I)&&Number.isFinite(C)?I-C:null,R=O.avgStrength,P=D.avgStrength,ie=Number.isFinite(R)&&Number.isFinite(P)?R-P:null;let q=null;for(let re=E.length-1;re>=0;re--)if(Number.isFinite(E[re].bfPct)){q=E[re].bfPct;break}return{weightTrend:x,totalLost:_,calNow:I,calDelta:A,strengthNow:R,strengthDelta:ie,bf:q}},[E]);return g.jsxs(g.Fragment,{children:[!n&&g.jsxs("div",{className:"notice info",style:{marginTop:14},children:[g.jsx("b",{children:"Demo mode:"})," This dashboard is showing 60 days of realistic sample data. Log in to start tracking your own."]}),n&&(!(m!=null&&m.sex)||!(m!=null&&m.height))&&g.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",g.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),l&&g.jsx("div",{className:"notice error",style:{marginTop:14},children:l}),t==="insights"&&g.jsxs(g.Fragment,{children:[g.jsx(BB,{derived:E,weekly:S,profile:m,currentCycle:w}),g.jsx(DB,{derived:E,weekly:S,profile:m||{},currentCycle:w})]}),g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Summary"}),g.jsx("button",{className:"btn",type:"button",onClick:T,style:{textTransform:"none"},children:w?`${zB(w.type)}${w.startDateIso?` since ${$B(w.startDateIso)}`:""}`:"Create new cycle"})]}),!N||!E.length?g.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",g.jsx("b",{children:"Entry"}),"."]}):g.jsxs("div",{className:"grid",style:{marginTop:12},children:[g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),g.jsxs("div",{className:"big",children:[Bi(N.weightTrend,1)," kg"]}),g.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Total weight change"}),g.jsxs("div",{className:"big",children:[Bi(N.totalLost,1)," kg"]}),g.jsx("div",{className:"small",children:"Negative = loss"})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Calories now / change from start"}),g.jsxs("div",{className:"big",children:[Bi(N.calNow,0)," kcal"]}),g.jsxs("div",{className:"small",children:[" ",Bi(N.calDelta,0)," kcal"]})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Average strength now"}),g.jsxs("div",{className:"big",children:[Bi(N.strengthNow,1)," kg"]}),g.jsxs("div",{className:"small",children:[" ",Bi(N.strengthDelta,1)," kg"]})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),g.jsx("div",{className:"big",children:N.bf===null?"":`${Bi(N.bf,1)}%`}),g.jsx("div",{className:"small",children:"Most recent measurement day"})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),g.jsx("div",{className:"big",children:Number.isFinite(S.baselineTdee)?`${Bi(S.baselineTdee,0)} kcal`:""}),g.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),E.length>0&&g.jsxs("div",{className:"grid",style:{marginTop:14},children:[g.jsx("div",{style:{gridColumn:"span 12"},children:g.jsx(SB,{derived:E})}),g.jsx("div",{style:{gridColumn:"span 12"},children:g.jsx(kB,{derived:E,liftNames:r})}),g.jsx("div",{style:{gridColumn:"span 12"},children:g.jsx(CB,{derived:E})})]}),E.length>=14&&g.jsx(RB,{weekly:S})]})}function WB(){return g.jsx(Sk,{view:"insights"})}function HB(){const{user:t,login:e,authError:n,clearAuthError:i}=Ni(),r=Bo(),s=Nr(),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,d]=M.useState(!1),[f,m]=M.useState(null);M.useEffect(()=>{i==null||i()},[]),M.useEffect(()=>{t&&r("/dashboard")},[t]);async function v(b){var w;b.preventDefault(),m(null),d(!0);try{await e(o.trim(),l);const T=((w=s.state)==null?void 0:w.from)||"/dashboard";r(T)}catch{}finally{d(!1)}}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Log in"}),g.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&g.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&g.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),g.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Email"}),g.jsx("input",{value:o,onChange:b=>a(b.target.value),type:"email",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Password"}),g.jsx("input",{value:l,onChange:b=>c(b.target.value),type:"password",required:!0})]})]}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),g.jsx(Il,{className:"btn",to:"/reset-password",children:"Forgot password"}),g.jsx(Il,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function qB(){const{signup:t,authError:e,clearAuthError:n}=Ni(),i=Bo(),[r,s]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,d]=M.useState(!1),[f,m]=M.useState(null);M.useEffect(()=>{n==null||n()},[]);async function v(b){if(b.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Create account"}),g.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&g.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&g.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),g.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Email"}),g.jsx("input",{value:r,onChange:b=>s(b.target.value),type:"email",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Password"}),g.jsx("input",{value:o,onChange:b=>a(b.target.value),type:"password",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Confirm password"}),g.jsx("input",{value:l,onChange:b=>c(b.target.value),type:"password",required:!0})]})]}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),g.jsx(Il,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function KB(){const{resetPassword:t,authError:e,clearAuthError:n}=Ni(),[i,r]=M.useState(""),[s,o]=M.useState(!1),[a,l]=M.useState(!1);M.useEffect(()=>{n==null||n()},[]);async function c(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Reset password"}),g.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&g.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&g.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),g.jsxs("form",{onSubmit:c,style:{marginTop:12},children:[g.jsx("div",{className:"row",children:g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Email"}),g.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),g.jsx(Il,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function GB(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function QB(t,e){const n=e.map(o=>o.map(GB).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function YB({entries:t,derived:e}){var s,o,a,l,c,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchLoadKg","benchReps","bench1rmKg","squatLoadKg","squatReps","squat1rmKg","deadliftLoadKg","deadliftReps","deadlift1rmKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.benchLoad,d.benchReps,d.bench,d.squatLoad,d.squatReps,d.squat,d.deadliftLoad,d.deadliftReps,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(c=f==null?void 0:f.wma)==null?void 0:c.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}function kk(t){return["cutting","bulking","maintaining","cut","bulk","maintain"].includes(t)}function Ck(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function Pk(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:Ck(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).filter(e=>kk(e.type)).sort((e,n)=>String(e.startDateIso||"").localeCompare(String(n.startDateIso||""))):[]}function XB(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}async function JB(t,{type:e,startDateIso:n,targetWeightKg:i}){if(!t)throw new Error("Not authenticated");if(!kk(e))throw new Error("Invalid cycle type");if(e=Ck(e),!n)throw new Error("Start date is required");let r=null;if((e==="cutting"||e==="bulking")&&(r=Number(i),!Number.isFinite(r)||r<=0))throw new Error("Cycle target weight must be a positive number (kg).");const s=_s(On,"users",t);await dS(On,async o=>{const a=await o.get(s);if(!a.exists())throw new Error("Profile not found. Please refresh and try again.");const l=a.data()||{},h=Pk(l.cycles).map(f=>({...f})),d=h.findIndex(f=>f.endDateIso===null);if(d>=0){const f=h[d];let m=hj(n,-1);f.startDateIso&&m<f.startDateIso&&(m=f.startDateIso),h[d]={...f,endDateIso:m}}h.push({id:XB(),type:e,startDateIso:n,endDateIso:null,targetWeightKg:r}),o.update(s,{cycles:h,updatedAt:sc()})})}async function ZB(t,e,n){if(!t)throw new Error("Not authenticated");if(!e)throw new Error("cycleId is required");if(!n)throw new Error("End date is required");const i=_s(On,"users",t);await dS(On,async r=>{const s=await r.get(i);if(!s.exists())throw new Error("Profile not found. Please refresh and try again.");const o=s.data()||{},a=Pk(o.cycles),l=a.findIndex(h=>h.id===e);if(l<0)throw new Error("Cycle not found.");const c=a.map(h=>({...h}));c[l]={...c[l],endDateIso:n},r.update(i,{cycles:c,updatedAt:sc()})})}const Bs=["Bench Press","Squat","Deadlift"];function Bf(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function e5(){const{user:t}=Ni(),e=Nr(),{profile:n,updateProfile:i,loading:r,profileError:s}=yy(),[o,a]=M.useState(n.sex||""),[l,c]=M.useState(n.height||""),[h,d]=M.useState(!!n.triplemeasurements),f=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Bs,[m,v]=M.useState(f[0]),[b,w]=M.useState(f[1]),[T,E]=M.useState(f[2]),S=M.useMemo(()=>[m,b,T].map((fe,Xe)=>String(fe||"").trim()||Bs[Xe]),[m,b,T]),[N,D]=M.useState(!1),[O,x]=M.useState(null),[_,I]=M.useState(""),[C,A]=M.useState(""),[R,P]=M.useState(""),ie=M.useMemo(()=>Array.isArray(n.cycles)?[...n.cycles].sort((G,fe)=>String(fe.startDateIso||"").localeCompare(String(G.startDateIso||""))):[],[n.cycles]),[q,he]=M.useState("cutting"),[re,B]=M.useState(Th()),[K,Q]=M.useState("");M.useEffect(()=>{q==="maintaining"&&Q("")},[q]);const V=M.useMemo(()=>ie.find(G=>!G.endDateIso)||null,[ie]),[L,W]=M.useState([]),[X,ce]=M.useState(!1);M.useEffect(()=>{a(n.sex||""),c(n.height||""),d(!!n.triplemeasurements);const G=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Bs;v(G[0]),w(G[1]),E(G[2])},[n.sex,n.height,n.triplemeasurements,n.liftNames]),M.useEffect(()=>{(e==null?void 0:e.hash)==="#cycles"&&setTimeout(()=>{var G;(G=document.getElementById("cycles"))==null||G.scrollIntoView({behavior:"smooth",block:"start"})},50)},[e==null?void 0:e.hash]);async function Z(G){G.preventDefault(),x(null),D(!0);try{const fe=Number(l);if(!o)throw new Error("Sex is required.");if(!Number.isFinite(fe)||fe<=0)throw new Error("Height must be a positive number (cm).");await i({sex:o,height:fe,triplemeasurements:!!h,liftNames:S}),x({type:"success",text:"Profile saved."})}catch(fe){x({type:"error",text:(fe==null?void 0:fe.message)||"Failed to save profile."})}finally{D(!1)}}async function ke(G){var fe;G.preventDefault(),x(null),D(!0);try{if(!q)throw new Error("Pick a cycle type.");if(!re)throw new Error("Pick a start date.");const dt=(fe=[...await et()||[]].reverse().find(ot=>Number.isFinite(Number(ot==null?void 0:ot.weight))))==null?void 0:fe.weight;if(q==="cutting"||q==="bulking"){const ot=Number(K);if(!Number.isFinite(ot)||ot<=0)throw new Error("Enter a valid target weight (kg).");if(Number.isFinite(Number(dt))){if(q==="cutting"&&ot>=Number(dt))throw new Error("For a cutting cycle, target weight must be lower than your current weight.");if(q==="bulking"&&ot<=Number(dt))throw new Error("For a bulking cycle, target weight must be higher than your current weight.")}}const bn=q==="cutting"||q==="bulking"?Number(K):null;await JB(t.uid,{type:q,startDateIso:re,targetWeightKg:bn}),Q(""),x({type:"success",text:`Cycle started: ${Bf(q)}.`})}catch(Xe){x({type:"error",text:(Xe==null?void 0:Xe.message)||"Failed to start cycle."})}finally{D(!1)}}async function Dt(G){x(null),D(!0);try{await ZB(t.uid,G,Th()),x({type:"success",text:"Cycle ended."})}catch(fe){x({type:"error",text:(fe==null?void 0:fe.message)||"Failed to end cycle."})}finally{D(!1)}}async function jn(G){if(G.preventDefault(),x(null),!!(t!=null&&t.email)){if(C!==R){x({type:"error",text:"New passwords do not match."});return}D(!0);try{const fe=ks.credential(t.email,_);await uD(t,fe),await pD(t,C),I(""),A(""),P(""),x({type:"success",text:"Password updated."})}catch(fe){x({type:"error",text:(fe==null?void 0:fe.message)||"Failed to update password."})}finally{D(!1)}}}async function et(){return X?L:new Promise((G,fe)=>{const Xe=_y(t.uid,dt=>{W(dt),ce(!0),Xe(),G(dt)},dt=>{fe(dt)})})}async function ht(){x(null),D(!0);try{await et();const G=VS(L,{...n,sex:o,height:Number(l),triplemeasurements:!!h}),fe=YB({entries:L,derived:G}),Xe=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;QB(Xe,fe),x({type:"success",text:"CSV downloaded."})}catch(G){x({type:"error",text:(G==null?void 0:G.message)||"Failed to export CSV."})}finally{D(!1)}}return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Profile & Settings"}),g.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),s&&g.jsx("div",{className:"notice error",style:{marginTop:12},children:s}),O&&g.jsx("div",{className:`notice ${O.type==="error"?"error":"success"}`,style:{marginTop:12},children:O.text}),g.jsxs("form",{onSubmit:Z,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Sex (required for Navy BF%)"}),g.jsxs("select",{value:o,onChange:G=>a(G.target.value),required:!0,children:[g.jsx("option",{value:"",children:"Select"}),g.jsx("option",{value:"male",children:"Male"}),g.jsx("option",{value:"female",children:"Female"})]})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Height (cm)"}),g.jsx("input",{inputMode:"numeric",value:l,onChange:G=>c(G.target.value),placeholder:"e.g. 175",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Triple measurements mode"}),g.jsxs("select",{value:h?"1":"0",onChange:G=>d(G.target.value==="1"),children:[g.jsx("option",{value:"0",children:"Off (single value per site)"}),g.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),g.jsxs("div",{className:"grid",style:{marginTop:12},children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Lift 1 name"}),g.jsx("input",{value:m,onChange:G=>v(G.target.value),placeholder:Bs[0]})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Lift 2 name"}),g.jsx("input",{value:b,onChange:G=>w(G.target.value),placeholder:Bs[1]})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Lift 3 name"}),g.jsx("input",{value:T,onChange:G=>E(G.target.value),placeholder:Bs[2]})]})]}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:N||r,children:N?"Saving":"Save profile"}),g.jsx("button",{className:"btn",type:"button",onClick:ht,disabled:N,children:"Export CSV"})]})]})]}),g.jsxs("div",{className:"panel",id:"cycles",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Cycles"}),g.jsx("div",{className:"muted",children:"Cutting / Bulking / Maintaining  track your phases over time."})]}),g.jsxs("form",{onSubmit:ke,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Cycle type"}),g.jsxs("select",{value:q,onChange:G=>he(G.target.value),children:[g.jsx("option",{value:"cutting",children:"Cutting"}),g.jsx("option",{value:"bulking",children:"Bulking"}),g.jsx("option",{value:"maintaining",children:"Maintaining"})]})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Start date"}),g.jsx("input",{type:"date",value:re,onChange:G=>B(G.target.value)})]}),(q==="cutting"||q==="bulking")&&g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Target weight (kg)"}),g.jsx("input",{inputMode:"decimal",value:K,onChange:G=>Q(G.target.value),placeholder:"e.g. 82.0"})]}),g.jsxs("div",{className:"field",style:{minWidth:220},children:[g.jsx("label",{children:"Current"}),g.jsx("input",{value:V?`${Bf(V.type)} (since ${V.startDateIso})${(V.type==="cutting"||V.type==="bulking")&&Number.isFinite(Number(V.targetWeightKg))?`  target ${Number(V.targetWeightKg).toFixed(1)}kg`:""}`:"No active cycle",readOnly:!0})]})]}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:N,children:V?"Start new cycle (ends current)":"Start cycle"}),V&&g.jsx("button",{className:"btn",type:"button",onClick:()=>Dt(V.id),disabled:N,children:"End current cycle (today)"})]})]}),g.jsx("hr",{className:"sep"}),g.jsx("div",{className:"table-wrap",children:g.jsxs("table",{className:"table",style:{minWidth:760},children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Type"}),g.jsx("th",{children:"Target (kg)"}),g.jsx("th",{children:"Began"}),g.jsx("th",{children:"Ended"}),g.jsx("th",{children:"Status"}),g.jsx("th",{children:"Actions"})]})}),g.jsx("tbody",{children:ie.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:6,className:"muted",children:"No cycles yet. Start one above."})}):ie.map(G=>{const fe=!G.endDateIso;return g.jsxs("tr",{children:[g.jsx("td",{children:g.jsx("b",{children:Bf(G.type)})}),g.jsx("td",{children:(G.type==="cutting"||G.type==="bulking")&&Number.isFinite(Number(G.targetWeightKg))?Number(G.targetWeightKg).toFixed(1):""}),g.jsx("td",{children:G.startDateIso||""}),g.jsx("td",{children:G.endDateIso||""}),g.jsx("td",{children:fe?g.jsx("span",{className:"text-green strong",children:"Active"}):g.jsx("span",{className:"muted",children:"Ended"})}),g.jsx("td",{children:fe?g.jsx("button",{className:"btn",type:"button",onClick:()=>Dt(G.id),disabled:N,children:"End today"}):g.jsx("span",{className:"muted",children:""})})]},G.id)})})]})})]}),g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Change Password"}),g.jsx("div",{className:"muted",children:"Re-auth required."})]}),g.jsxs("form",{onSubmit:jn,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Current password"}),g.jsx("input",{type:"password",value:_,onChange:G=>I(G.target.value),required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"New password"}),g.jsx("input",{type:"password",value:C,onChange:G=>A(G.target.value),required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Confirm new password"}),g.jsx("input",{type:"password",value:R,onChange:G=>P(G.target.value),required:!0})]})]}),g.jsx("div",{className:"footer-actions",children:g.jsx("button",{className:"btn primary",disabled:N,children:"Update password"})})]})]})]})}function Ot(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function t5({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:r}){const s=String(t||"").toLowerCase()==="female",[o,a]=M.useState(Th()),[l,c]=M.useState(""),[h,d]=M.useState(""),[f,m]=M.useState(""),[v,b]=M.useState(""),[w,T]=M.useState(""),[E,S]=M.useState(""),[N,D]=M.useState(""),[O,x]=M.useState(""),[_,I]=M.useState(""),[C,A]=M.useState(""),[R,P]=M.useState(""),[ie,q]=M.useState(""),[he,re]=M.useState(""),[B,K]=M.useState(""),[Q,V]=M.useState(""),[L,W]=M.useState(""),[X,ce]=M.useState(""),[Z,ke]=M.useState(""),[Dt,jn]=M.useState(""),[et,ht]=M.useState(""),[G,fe]=M.useState(""),[Xe,dt]=M.useState(""),bn=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],ot=M.useMemo(()=>{const ne=jS({protein:Ot(h)||0,carbs:Ot(f)||0,fats:Ot(v)||0});return Number.isFinite(ne)?Math.round(ne):0},[h,f,v]),si=M.useMemo(()=>Qr(Ot(w),Ot(E)),[w,E]),ln=M.useMemo(()=>Qr(Ot(N),Ot(O)),[N,O]),cn=M.useMemo(()=>Qr(Ot(_),Ot(C)),[_,C]),Vn=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f))&&Number.isFinite(Number(v));async function Rs(ne){if(ne.preventDefault(),!Vn())return;const Di=Qr(Ot(w),Ot(E)),Or=Qr(Ot(N),Ot(O)),He=Qr(Ot(_),Ot(C)),Te={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(f),fats:Number(v),benchLoad:w===""?null:Number(w),benchReps:E===""?null:Number(E),squatLoad:N===""?null:Number(N),squatReps:O===""?null:Number(O),deadliftLoad:_===""?null:Number(_),deadliftReps:C===""?null:Number(C),bench:Number.isFinite(Di)?Math.round(Di*10)/10:null,squat:Number.isFinite(Or)?Math.round(Or*10)/10:null,deadlift:Number.isFinite(He)?Math.round(He*10)/10:null};e?(Te.neck1=B===""?null:Number(B),Te.neck2=Q===""?null:Number(Q),Te.neck3=L===""?null:Number(L),Te.waist1=X===""?null:Number(X),Te.waist2=Z===""?null:Number(Z),Te.waist3=Dt===""?null:Number(Dt),Te.hip1=s?et===""?null:Number(et):null,Te.hip2=s?G===""?null:Number(G):null,Te.hip3=s?Xe===""?null:Number(Xe):null):(Te.neck=R===""?null:Number(R),Te.waist=ie===""?null:Number(ie),Te.hip=s?he===""?null:Number(he):null),await i(Te)}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Daily Entry"}),g.jsxs("div",{className:"muted",children:["Calories preview: ",g.jsx("b",{children:ot})," kcal"]})]}),g.jsxs("form",{onSubmit:Rs,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Date"}),g.jsx("input",{type:"date",value:o,onChange:ne=>a(ne.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Weight (kg)"}),g.jsx("input",{inputMode:"decimal",value:l,onChange:ne=>c(ne.target.value),placeholder:"e.g. 85.2",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Protein (g)"}),g.jsx("input",{inputMode:"numeric",value:h,onChange:ne=>d(ne.target.value),placeholder:"e.g. 180"})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Carbs (g)"}),g.jsx("input",{inputMode:"numeric",value:f,onChange:ne=>m(ne.target.value),placeholder:"e.g. 220",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Fats (g)"}),g.jsx("input",{inputMode:"numeric",value:v,onChange:ne=>b(ne.target.value),placeholder:"e.g. 70",required:!0})]})]}),g.jsx("hr",{className:"sep"}),g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsxs("label",{children:[bn[0]," ",g.jsx("span",{className:"muted",children:"(optional)"})]}),g.jsxs("div",{className:"inline2",children:[g.jsx("input",{inputMode:"decimal",value:w,onChange:ne=>T(ne.target.value),placeholder:"Load (kg)"}),g.jsx("input",{inputMode:"numeric",value:E,onChange:ne=>S(ne.target.value),placeholder:"Reps"})]}),g.jsxs("div",{className:"muted small",children:["Est. 1RM: ",g.jsx("b",{children:Number.isFinite(si)?Math.round(si*10)/10:""})," kg"]})]}),g.jsxs("div",{className:"field",children:[g.jsxs("label",{children:[bn[1]," ",g.jsx("span",{className:"muted",children:"(optional)"})]}),g.jsxs("div",{className:"inline2",children:[g.jsx("input",{inputMode:"decimal",value:N,onChange:ne=>D(ne.target.value),placeholder:"Load (kg)"}),g.jsx("input",{inputMode:"numeric",value:O,onChange:ne=>x(ne.target.value),placeholder:"Reps"})]}),g.jsxs("div",{className:"muted small",children:["Est. 1RM: ",g.jsx("b",{children:Number.isFinite(ln)?Math.round(ln*10)/10:""})," kg"]})]}),g.jsxs("div",{className:"field",children:[g.jsxs("label",{children:[bn[2]," ",g.jsx("span",{className:"muted",children:"(optional)"})]}),g.jsxs("div",{className:"inline2",children:[g.jsx("input",{inputMode:"decimal",value:_,onChange:ne=>I(ne.target.value),placeholder:"Load (kg)"}),g.jsx("input",{inputMode:"numeric",value:C,onChange:ne=>A(ne.target.value),placeholder:"Reps"})]}),g.jsxs("div",{className:"muted small",children:["Est. 1RM: ",g.jsx("b",{children:Number.isFinite(cn)?Math.round(cn*10)/10:""})," kg"]})]})]}),g.jsx("div",{className:"muted small",style:{marginTop:6},children:"Enter both load + reps to calculate 1RM. If left blank, strength trends will carry forward the last known value."}),g.jsx("hr",{className:"sep"}),g.jsxs("div",{className:"notice info",children:[g.jsx("b",{children:"Navy measurements (weekly)"}),g.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",s?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),g.jsx("div",{style:{height:10}}),e?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Neck 1 (cm)"}),g.jsx("input",{inputMode:"decimal",value:B,onChange:ne=>K(ne.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Neck 2 (cm)"}),g.jsx("input",{inputMode:"decimal",value:Q,onChange:ne=>V(ne.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Neck 3 (cm)"}),g.jsx("input",{inputMode:"decimal",value:L,onChange:ne=>W(ne.target.value)})]})]}),g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Waist 1 (cm)"}),g.jsx("input",{inputMode:"decimal",value:X,onChange:ne=>ce(ne.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Waist 2 (cm)"}),g.jsx("input",{inputMode:"decimal",value:Z,onChange:ne=>ke(ne.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Waist 3 (cm)"}),g.jsx("input",{inputMode:"decimal",value:Dt,onChange:ne=>jn(ne.target.value)})]})]}),s?g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Hip 1 (cm)"}),g.jsx("input",{inputMode:"decimal",value:et,onChange:ne=>ht(ne.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Hip 2 (cm)"}),g.jsx("input",{inputMode:"decimal",value:G,onChange:ne=>fe(ne.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Hip 3 (cm)"}),g.jsx("input",{inputMode:"decimal",value:Xe,onChange:ne=>dt(ne.target.value)})]})]}):null]}):g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Neck (cm)"}),g.jsx("input",{inputMode:"decimal",value:R,onChange:ne=>P(ne.target.value),placeholder:"optional"})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Waist (cm)"}),g.jsx("input",{inputMode:"decimal",value:ie,onChange:ne=>q(ne.target.value),placeholder:"optional"})]}),s?g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Hip (cm)"}),g.jsx("input",{inputMode:"decimal",value:he,onChange:ne=>re(ne.target.value),placeholder:"optional"})]}):null]}),g.jsx("div",{className:"footer-actions",children:g.jsx("button",{className:"btn primary",type:"submit",disabled:!Vn()||r,children:r?"Saving":"Add / Update Entry"})})]})]})}function n5(t,e){const n=M.useContext(ii),i=n==null?void 0:n.navigator;M.useEffect(()=>{if(!t||!i||typeof i.block!="function")return;const r=i.block(s=>{window.confirm(e)&&(r(),s.retry())});return r},[i,t,e]),M.useEffect(()=>{if(!t)return;const r=s=>(s.preventDefault(),s.returnValue=e,e);return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[t,e])}function i5(t){return t==null?"":String(t)}function r5(t){if(t===""||t===null||t===void 0)return null;const e=Number(t);return Number.isFinite(e)?e:null}function su(t,e){return`${t}::${e}`}function s5({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:r}){const[s,o]=M.useState(!1),[a,l]=M.useState(null),[c,h]=M.useState(!1),[d,f]=M.useState({}),[m,v]=M.useState({}),[b,w]=M.useState([]),[T,E]=M.useState([]),S=M.useRef({}),N=String(t||"").toLowerCase()==="female",D=Array.isArray(r)&&r.length===3?r:["Bench Press","Squat","Deadlift"],O=M.useMemo(()=>{const V=new Map;for(const L of n||[])V.set(L.dateIso,L);return V},[n]);M.useEffect(()=>{const V=new Set((n||[]).map(L=>L.dateIso));f(L=>{const W={...L};let X=!1;for(const ce of Object.keys(W)){const[Z]=ce.split("::");V.has(Z)||(delete W[ce],X=!0)}return X?W:L}),v(L=>{const W={...L};let X=!1;for(const ce of Object.keys(W)){const[Z]=ce.split("::");V.has(Z)||(delete W[ce],X=!0)}return X?W:L})},[n]);const x=M.useMemo(()=>{const V=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"benchLoad",label:`${D[0]} Load`},{key:"benchReps",label:`${D[0]} Reps`},{key:"squatLoad",label:`${D[1]} Load`},{key:"squatReps",label:`${D[1]} Reps`},{key:"deadliftLoad",label:`${D[2]} Load`},{key:"deadliftReps",label:`${D[2]} Reps`}];return i?(V.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),N&&V.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):(V.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),N&&V.push({key:"hip",label:"Hip"})),V.push({key:"_actions",label:"Actions",readOnly:!0}),V},[i,N,D]);function _(V,L){const W=O.get(V);return i5(W==null?void 0:W[L])}function I(V,L){const W=su(V,L);return Object.prototype.hasOwnProperty.call(d,W)?d[W]:_(V,L)}function C(V,L,W){if(!c)return;const X=su(V,L),ce=_(V,L);f(Z=>{const ke={...Z};return W===ce?Object.prototype.hasOwnProperty.call(ke,X)&&delete ke[X]:ke[X]=W,ke}),v(Z=>{const ke={...Z};return W===ce?Object.prototype.hasOwnProperty.call(ke,X)&&delete ke[X]:ke[X]=!0,ke})}function A(V,L){const W=su(V,L);S.current[W]=I(V,L)}function R(V,L){const W=su(V,L),X=S.current[W];delete S.current[W];const ce=I(V,L);X!==void 0&&X!==ce&&(w(Z=>[...Z,{ck:W,dateIso:V,key:L,prev:X,next:ce}]),E([]))}function P(V,L){C(V.dateIso,V.key,L)}function ie(){c&&(l(null),w(V=>{if(V.length===0)return V;const L=[...V],W=L.pop();return P(W,W.prev),E(X=>[...X,W]),L}))}function q(){c&&(l(null),E(V=>{if(V.length===0)return V;const L=[...V],W=L.pop();return P(W,W.next),w(X=>[...X,W]),L}))}function he(V,L){const W=Qr(V,L);return Number.isFinite(W)?Math.round(W*10)/10:null}async function re(){const V=Object.keys(m||{});if(V.length!==0){l(null),o(!0);try{const L={};for(const X of V){const[ce,Z]=X.split("::"),ke=I(ce,Z),Dt=r5(ke);L[ce]||(L[ce]={}),L[ce][Z]=Dt}for(const X of Object.keys(L)){const ce=O.get(X)||{},Z=L[X],ke=Object.prototype.hasOwnProperty.call(Z,"benchLoad")||Object.prototype.hasOwnProperty.call(Z,"benchReps"),Dt=Object.prototype.hasOwnProperty.call(Z,"squatLoad")||Object.prototype.hasOwnProperty.call(Z,"squatReps"),jn=Object.prototype.hasOwnProperty.call(Z,"deadliftLoad")||Object.prototype.hasOwnProperty.call(Z,"deadliftReps");if(ke){const et=Object.prototype.hasOwnProperty.call(Z,"benchLoad")?Z.benchLoad:ce.benchLoad??null,ht=Object.prototype.hasOwnProperty.call(Z,"benchReps")?Z.benchReps:ce.benchReps??null;Z.bench=he(et,ht)}if(Dt){const et=Object.prototype.hasOwnProperty.call(Z,"squatLoad")?Z.squatLoad:ce.squatLoad??null,ht=Object.prototype.hasOwnProperty.call(Z,"squatReps")?Z.squatReps:ce.squatReps??null;Z.squat=he(et,ht)}if(jn){const et=Object.prototype.hasOwnProperty.call(Z,"deadliftLoad")?Z.deadliftLoad:ce.deadliftLoad??null,ht=Object.prototype.hasOwnProperty.call(Z,"deadliftReps")?Z.deadliftReps:ce.deadliftReps??null;Z.deadlift=he(et,ht)}}const W=Object.keys(L).map(X=>({dateIso:X,patch:L[X]}));await pj(e,W),f({}),v({}),w([]),E([]),l({type:"success",text:"Saved changes."}),h(!1)}catch(L){l({type:"error",text:(L==null?void 0:L.message)||"Failed to save changes."})}finally{o(!1)}}}async function B(V){if(confirm(`Delete entry for ${V}?`)){l(null),o(!0);try{await gj(e,V),f(L=>{const W={...L};for(const X of Object.keys(W))X.startsWith(`${V}::`)&&delete W[X];return W}),v(L=>{const W={...L};for(const X of Object.keys(W))X.startsWith(`${V}::`)&&delete W[X];return W}),l({type:"success",text:"Deleted."})}catch(L){l({type:"error",text:(L==null?void 0:L.message)||"Failed to delete."})}finally{o(!1)}}}const K=Object.keys(m||{}).length>0;n5(c&&K,"You have unsaved changes. Leave without saving?");function Q(){h(!1),f({}),v({}),w([]),E([]),l(null)}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"All Entries"}),g.jsxs("div",{className:"table-actions",children:[g.jsx("button",{className:"btn icon small",onClick:ie,disabled:!c||b.length===0||s,title:"Undo","aria-label":"Undo",children:""}),g.jsx("button",{className:"btn icon small",onClick:q,disabled:!c||T.length===0||s,title:"Redo","aria-label":"Redo",children:""}),c?K?g.jsx("button",{className:"btn primary small",onClick:re,disabled:!K||s,children:s?"saving":"save"}):g.jsx("button",{className:"btn primary small",onClick:Q,disabled:s,children:"cancel"}):g.jsx("button",{className:"btn primary small",onClick:()=>h(!0),disabled:s,children:"edit"})]})]}),a&&g.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:12},children:a.text}),g.jsx("div",{className:"table-wrap",style:{marginTop:12},children:g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsx("tr",{children:x.map(V=>g.jsx("th",{children:V.label},V.key))})}),g.jsx("tbody",{children:n.map(V=>g.jsx("tr",{children:x.map(L=>L.key==="_actions"?g.jsx("td",{children:g.jsx("button",{className:"btn danger",onClick:()=>B(V.dateIso),disabled:s,children:"Delete"})},L.key):L.readOnly?g.jsx("td",{children:V[L.key]},L.key):g.jsx("td",{children:c?g.jsx("input",{value:I(V.dateIso,L.key),onChange:W=>C(V.dateIso,L.key,W.target.value),onFocus:()=>A(V.dateIso,L.key),onBlur:()=>R(V.dateIso,L.key),inputMode:"decimal",disabled:s}):g.jsx("span",{children:I(V.dateIso,L.key)})},L.key))},V.dateIso))})]})})]})}function o5(){const{user:t}=Ni(),{profile:e}=yy(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=M.useState([]),[s,o]=M.useState(!1),[a,l]=M.useState(null);M.useEffect(()=>{if(!t)return;const f=_y(t.uid,m=>r(m),m=>l({type:"error",text:(m==null?void 0:m.message)||"Failed to load entries."}));return()=>f()},[t]);const c=M.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function d(f){l(null),o(!0);try{await fj(t.uid,f),l({type:"success",text:"Entry saved."})}catch(m){l({type:"error",text:(m==null?void 0:m.message)||"Failed to save entry."})}finally{o(!1)}}return g.jsxs(g.Fragment,{children:[a&&g.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),g.jsx(t5,{sex:h,tripleEnabled:c,liftNames:n,onSubmit:d,busy:s}),g.jsx(s5,{sex:h,userId:t.uid,entries:i,tripleEnabled:c,liftNames:n})]})}function a5(){return g.jsxs(g.Fragment,{children:[g.jsx(aj,{}),g.jsx("div",{className:"app-shell",children:g.jsxs(_A,{children:[g.jsx(zn,{path:"/",element:g.jsx(Fp,{to:"/dashboard",replace:!0})}),g.jsx(zn,{path:"/dashboard",element:g.jsx(Sk,{})}),g.jsx(zn,{path:"/insights",element:g.jsx(WB,{})}),g.jsx(zn,{path:"/login",element:g.jsx(HB,{})}),g.jsx(zn,{path:"/signup",element:g.jsx(qB,{})}),g.jsx(zn,{path:"/reset-password",element:g.jsx(KB,{})}),g.jsx(zn,{path:"/profile",element:g.jsx(fw,{children:g.jsx(e5,{})})}),g.jsx(zn,{path:"/entry",element:g.jsx(fw,{children:g.jsx(o5,{})})}),g.jsx(zn,{path:"*",element:g.jsx(Fp,{to:"/dashboard",replace:!0})})]})})]})}class l5 extends xg.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?g.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[g.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),g.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),g.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),g.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}zf.createRoot(document.getElementById("root")).render(g.jsx(xg.StrictMode,{children:g.jsx(kA,{basename:"/Body-Recomp-Tracker/",children:g.jsx(oj,{children:g.jsx(uj,{children:g.jsx(l5,{children:g.jsx(a5,{})})})})})}));
