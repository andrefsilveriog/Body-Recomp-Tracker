var Zk=Object.defineProperty;var eC=(t,e,n)=>e in t?Zk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ie=(t,e,n)=>eC(t,typeof e!="symbol"?e+"":e,n);function tC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function nC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SE={exports:{}},dh={},xE={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),iC=Symbol.for("react.portal"),rC=Symbol.for("react.fragment"),sC=Symbol.for("react.strict_mode"),oC=Symbol.for("react.profiler"),aC=Symbol.for("react.provider"),lC=Symbol.for("react.context"),uC=Symbol.for("react.forward_ref"),cC=Symbol.for("react.suspense"),hC=Symbol.for("react.memo"),dC=Symbol.for("react.lazy"),y_=Symbol.iterator;function fC(t){return t===null||typeof t!="object"?null:(t=y_&&t[y_]||t["@@iterator"],typeof t=="function"?t:null)}var bE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kE=Object.assign,CE={};function mo(t,e,n){this.props=t,this.context=e,this.refs=CE,this.updater=n||bE}mo.prototype.isReactComponent={};mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function AE(){}AE.prototype=mo.prototype;function sg(t,e,n){this.props=t,this.context=e,this.refs=CE,this.updater=n||bE}var og=sg.prototype=new AE;og.constructor=sg;kE(og,mo.prototype);og.isPureReactComponent=!0;var __=Array.isArray,PE=Object.prototype.hasOwnProperty,ag={current:null},RE={key:!0,ref:!0,__self:!0,__source:!0};function NE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)PE.call(e,i)&&!RE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:El,type:t,key:s,ref:o,props:r,_owner:ag.current}}function pC(t,e){return{$$typeof:El,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lg(t){return typeof t=="object"&&t!==null&&t.$$typeof===El}function gC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var v_=/\/+/g;function Id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gC(""+t.key):e.toString(36)}function Bu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case El:case iC:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Id(o,0):i,__(r)?(n="",t!=null&&(n=t.replace(v_,"$&/")+"/"),Bu(r,e,n,"",function(u){return u})):r!=null&&(lg(r)&&(r=pC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(v_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",__(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Id(s,a);o+=Bu(s,e,n,l,r)}else if(l=fC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Id(s,a++),o+=Bu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function su(t,e,n){if(t==null)return t;var i=[],r=0;return Bu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function mC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},zu={transition:null},yC={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:zu,ReactCurrentOwner:ag};function DE(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:su,forEach:function(t,e,n){su(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return su(t,function(){e++}),e},toArray:function(t){return su(t,function(e){return e})||[]},only:function(t){if(!lg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=mo;oe.Fragment=rC;oe.Profiler=oC;oe.PureComponent=sg;oe.StrictMode=sC;oe.Suspense=cC;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yC;oe.act=DE;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=kE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ag.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)PE.call(e,l)&&!RE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:El,type:t.type,key:r,ref:s,props:i,_owner:o}};oe.createContext=function(t){return t={$$typeof:lC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aC,_context:t},t.Consumer=t};oe.createElement=NE;oe.createFactory=function(t){var e=NE.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:uC,render:t}};oe.isValidElement=lg;oe.lazy=function(t){return{$$typeof:dC,_payload:{_status:-1,_result:t},_init:mC}};oe.memo=function(t,e){return{$$typeof:hC,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=zu.transition;zu.transition={};try{t()}finally{zu.transition=e}};oe.unstable_act=DE;oe.useCallback=function(t,e){return bt.current.useCallback(t,e)};oe.useContext=function(t){return bt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return bt.current.useEffect(t,e)};oe.useId=function(){return bt.current.useId()};oe.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return bt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};oe.useRef=function(t){return bt.current.useRef(t)};oe.useState=function(t){return bt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return bt.current.useTransition()};oe.version="18.3.1";xE.exports=oe;var O=xE.exports;const ug=nC(O),_C=tC({__proto__:null,default:ug},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC=O,wC=Symbol.for("react.element"),EC=Symbol.for("react.fragment"),TC=Object.prototype.hasOwnProperty,IC=vC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SC={key:!0,ref:!0,__self:!0,__source:!0};function ME(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)TC.call(e,i)&&!SC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:wC,type:t,key:s,ref:o,props:r,_owner:IC.current}}dh.Fragment=EC;dh.jsx=ME;dh.jsxs=ME;SE.exports=dh;var y=SE.exports,xf={},OE={exports:{}},Kt={},LE={exports:{}},VE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,K){var G=z.length;z.push(K);e:for(;0<G;){var de=G-1>>>1,te=z[de];if(0<r(te,K))z[de]=K,z[G]=te,G=de;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var K=z[0],G=z.pop();if(G!==K){z[0]=G;e:for(var de=0,te=z.length,re=te>>>1;de<re;){var Ae=2*(de+1)-1,qe=z[Ae],Ne=Ae+1,jt=z[Ne];if(0>r(qe,G))Ne<te&&0>r(jt,qe)?(z[de]=jt,z[Ne]=G,de=Ne):(z[de]=qe,z[Ae]=G,de=Ae);else if(Ne<te&&0>r(jt,G))z[de]=jt,z[Ne]=G,de=Ne;else break e}}return K}function r(z,K){var G=z.sortIndex-K.sortIndex;return G!==0?G:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,m=!1,_=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var K=n(u);K!==null;){if(K.callback===null)i(u);else if(K.startTime<=z)i(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(u)}}function R(z){if(w=!1,x(z),!_)if(n(l)!==null)_=!0,he(M);else{var K=n(u);K!==null&&pe(R,K.startTime-z)}}function M(z,K){_=!1,w&&(w=!1,E(v),v=-1),m=!0;var G=f;try{for(x(K),d=n(l);d!==null&&(!(d.expirationTime>K)||z&&!P());){var de=d.callback;if(typeof de=="function"){d.callback=null,f=d.priorityLevel;var te=de(d.expirationTime<=K);K=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(l)&&i(l),x(K)}else i(l);d=n(l)}if(d!==null)var re=!0;else{var Ae=n(u);Ae!==null&&pe(R,Ae.startTime-K),re=!1}return re}finally{d=null,f=G,m=!1}}var N=!1,I=null,v=-1,k=5,C=-1;function P(){return!(t.unstable_now()-C<k)}function D(){if(I!==null){var z=t.unstable_now();C=z;var K=!0;try{K=I(!0,z)}finally{K?A():(N=!1,I=null)}}else N=!1}var A;if(typeof S=="function")A=function(){S(D)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,se=ne.port2;ne.port1.onmessage=D,A=function(){se.postMessage(null)}}else A=function(){T(D,0)};function he(z){I=z,N||(N=!0,A())}function pe(z,K){v=T(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,he(M))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var G=f;f=K;try{return z()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=f;f=z;try{return K()}finally{f=G}},t.unstable_scheduleCallback=function(z,K,G){var de=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?de+G:de):G=de,z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=G+te,z={id:h++,callback:K,priorityLevel:z,startTime:G,expirationTime:te,sortIndex:-1},G>de?(z.sortIndex=G,e(u,z),n(l)===null&&z===n(u)&&(w?(E(v),v=-1):w=!0,pe(R,G-de))):(z.sortIndex=te,e(l,z),_||m||(_=!0,he(M))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var K=f;return function(){var G=f;f=K;try{return z.apply(this,arguments)}finally{f=G}}}})(VE);LE.exports=VE;var xC=LE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=O,qt=xC;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FE=new Set,Ua={};function os(t,e){Ys(t,e),Ys(t+"Capture",e)}function Ys(t,e){for(Ua[t]=e,t=0;t<e.length;t++)FE.add(e[t])}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bf=Object.prototype.hasOwnProperty,kC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w_={},E_={};function CC(t){return bf.call(E_,t)?!0:bf.call(w_,t)?!1:kC.test(t)?E_[t]=!0:(w_[t]=!0,!1)}function AC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PC(t,e,n,i){if(e===null||typeof e>"u"||AC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var cg=/[\-:]([a-z])/g;function hg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cg,hg);ot[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cg,hg);ot[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cg,hg);ot[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function dg(t,e,n,i){var r=ot.hasOwnProperty(e)?ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PC(e,n,r,i)&&(n=null),i||r===null?CC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var fi=bC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ou=Symbol.for("react.element"),bs=Symbol.for("react.portal"),ks=Symbol.for("react.fragment"),fg=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),jE=Symbol.for("react.provider"),UE=Symbol.for("react.context"),pg=Symbol.for("react.forward_ref"),Cf=Symbol.for("react.suspense"),Af=Symbol.for("react.suspense_list"),gg=Symbol.for("react.memo"),ki=Symbol.for("react.lazy"),BE=Symbol.for("react.offscreen"),T_=Symbol.iterator;function zo(t){return t===null||typeof t!="object"?null:(t=T_&&t[T_]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Sd;function ra(t){if(Sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sd=e&&e[1]||""}return`
`+Sd+t}var xd=!1;function bd(t,e){if(!t||xd)return"";xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ra(t):""}function RC(t){switch(t.tag){case 5:return ra(t.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 2:case 15:return t=bd(t.type,!1),t;case 11:return t=bd(t.type.render,!1),t;case 1:return t=bd(t.type,!0),t;default:return""}}function Pf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ks:return"Fragment";case bs:return"Portal";case kf:return"Profiler";case fg:return"StrictMode";case Cf:return"Suspense";case Af:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case UE:return(t.displayName||"Context")+".Consumer";case jE:return(t._context.displayName||"Context")+".Provider";case pg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gg:return e=t.displayName||null,e!==null?e:Pf(t.type)||"Memo";case ki:e=t._payload,t=t._init;try{return Pf(t(e))}catch{}}return null}function NC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pf(e);case 8:return e===fg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DC(t){var e=zE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function au(t){t._valueTracker||(t._valueTracker=DC(t))}function $E(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=zE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function dc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rf(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function I_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WE(t,e){e=e.checked,e!=null&&dg(t,"checked",e,!1)}function Nf(t,e){WE(t,e);var n=tr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Df(t,e.type,n):e.hasOwnProperty("defaultValue")&&Df(t,e.type,tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function S_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Df(t,e,n){(e!=="number"||dc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function js(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+tr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Mf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(sa(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tr(n)}}function HE(t,e){var n=tr(e.value),i=tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function b_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Of(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lu,KE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lu=lu||document.createElement("div"),lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MC=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(t){MC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),va[e]=va[t]})});function GE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||va.hasOwnProperty(t)&&va[t]?(""+e).trim():e+"px"}function QE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=GE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var OC=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lf(t,e){if(e){if(OC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Vf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ff=null;function mg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,Us=null,Bs=null;function k_(t){if(t=Sl(t)){if(typeof jf!="function")throw Error(B(280));var e=t.stateNode;e&&(e=yh(e),jf(t.stateNode,t.type,e))}}function YE(t){Us?Bs?Bs.push(t):Bs=[t]:Us=t}function XE(){if(Us){var t=Us,e=Bs;if(Bs=Us=null,k_(t),e)for(t=0;t<e.length;t++)k_(e[t])}}function JE(t,e){return t(e)}function ZE(){}var kd=!1;function eT(t,e,n){if(kd)return t(e,n);kd=!0;try{return JE(t,e,n)}finally{kd=!1,(Us!==null||Bs!==null)&&(ZE(),XE())}}function za(t,e){var n=t.stateNode;if(n===null)return null;var i=yh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Uf=!1;if(si)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Uf=!1}function LC(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var wa=!1,fc=null,pc=!1,Bf=null,VC={onError:function(t){wa=!0,fc=t}};function FC(t,e,n,i,r,s,o,a,l){wa=!1,fc=null,LC.apply(VC,arguments)}function jC(t,e,n,i,r,s,o,a,l){if(FC.apply(this,arguments),wa){if(wa){var u=fc;wa=!1,fc=null}else throw Error(B(198));pc||(pc=!0,Bf=u)}}function as(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function C_(t){if(as(t)!==t)throw Error(B(188))}function UC(t){var e=t.alternate;if(!e){if(e=as(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return C_(r),t;if(s===i)return C_(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function nT(t){return t=UC(t),t!==null?iT(t):null}function iT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iT(t);if(e!==null)return e;t=t.sibling}return null}var rT=qt.unstable_scheduleCallback,A_=qt.unstable_cancelCallback,BC=qt.unstable_shouldYield,zC=qt.unstable_requestPaint,Be=qt.unstable_now,$C=qt.unstable_getCurrentPriorityLevel,yg=qt.unstable_ImmediatePriority,sT=qt.unstable_UserBlockingPriority,gc=qt.unstable_NormalPriority,WC=qt.unstable_LowPriority,oT=qt.unstable_IdlePriority,fh=null,Nn=null;function HC(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(fh,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:GC,qC=Math.log,KC=Math.LN2;function GC(t){return t>>>=0,t===0?32:31-(qC(t)/KC|0)|0}var uu=64,cu=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=oa(a):(s&=o,s!==0&&(i=oa(s)))}else o=n&~r,o!==0?i=oa(o):s!==0&&(i=oa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-gn(e),r=1<<n,i|=t[n],e&=~r;return i}function QC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=QC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function zf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aT(){var t=uu;return uu<<=1,!(uu&4194240)&&(uu=64),t}function Cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function XC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-gn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function _g(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-gn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ve=0;function lT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uT,vg,cT,hT,dT,$f=!1,hu=[],zi=null,$i=null,Wi=null,$a=new Map,Wa=new Map,Ai=[],JC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P_(t,e){switch(t){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":$a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(e.pointerId)}}function Wo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Sl(e),e!==null&&vg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ZC(t,e,n,i,r){switch(e){case"focusin":return zi=Wo(zi,t,e,n,i,r),!0;case"dragenter":return $i=Wo($i,t,e,n,i,r),!0;case"mouseover":return Wi=Wo(Wi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return $a.set(s,Wo($a.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Wa.set(s,Wo(Wa.get(s)||null,t,e,n,i,r)),!0}return!1}function fT(t){var e=Dr(t.target);if(e!==null){var n=as(e);if(n!==null){if(e=n.tag,e===13){if(e=tT(n),e!==null){t.blockedOn=e,dT(t.priority,function(){cT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ff=i,n.target.dispatchEvent(i),Ff=null}else return e=Sl(n),e!==null&&vg(e),t.blockedOn=n,!1;e.shift()}return!0}function R_(t,e,n){$u(t)&&n.delete(e)}function eA(){$f=!1,zi!==null&&$u(zi)&&(zi=null),$i!==null&&$u($i)&&($i=null),Wi!==null&&$u(Wi)&&(Wi=null),$a.forEach(R_),Wa.forEach(R_)}function Ho(t,e){t.blockedOn===e&&(t.blockedOn=null,$f||($f=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,eA)))}function Ha(t){function e(r){return Ho(r,t)}if(0<hu.length){Ho(hu[0],t);for(var n=1;n<hu.length;n++){var i=hu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(zi!==null&&Ho(zi,t),$i!==null&&Ho($i,t),Wi!==null&&Ho(Wi,t),$a.forEach(e),Wa.forEach(e),n=0;n<Ai.length;n++)i=Ai[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ai.length&&(n=Ai[0],n.blockedOn===null);)fT(n),n.blockedOn===null&&Ai.shift()}var zs=fi.ReactCurrentBatchConfig,yc=!0;function tA(t,e,n,i){var r=ve,s=zs.transition;zs.transition=null;try{ve=1,wg(t,e,n,i)}finally{ve=r,zs.transition=s}}function nA(t,e,n,i){var r=ve,s=zs.transition;zs.transition=null;try{ve=4,wg(t,e,n,i)}finally{ve=r,zs.transition=s}}function wg(t,e,n,i){if(yc){var r=Wf(t,e,n,i);if(r===null)Fd(t,e,i,_c,n),P_(t,i);else if(ZC(r,t,e,n,i))i.stopPropagation();else if(P_(t,i),e&4&&-1<JC.indexOf(t)){for(;r!==null;){var s=Sl(r);if(s!==null&&uT(s),s=Wf(t,e,n,i),s===null&&Fd(t,e,i,_c,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Fd(t,e,i,null,n)}}var _c=null;function Wf(t,e,n,i){if(_c=null,t=mg(i),t=Dr(t),t!==null)if(e=as(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _c=t,null}function pT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($C()){case yg:return 1;case sT:return 4;case gc:case WC:return 16;case oT:return 536870912;default:return 16}default:return 16}}var Oi=null,Eg=null,Wu=null;function gT(){if(Wu)return Wu;var t,e=Eg,n=e.length,i,r="value"in Oi?Oi.value:Oi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Wu=r.slice(t,1<i?1-i:void 0)}function Hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function du(){return!0}function N_(){return!1}function Gt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?du:N_,this.isPropagationStopped=N_,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tg=Gt(yo),Il=Le({},yo,{view:0,detail:0}),iA=Gt(Il),Ad,Pd,qo,ph=Le({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ig,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(Ad=t.screenX-qo.screenX,Pd=t.screenY-qo.screenY):Pd=Ad=0,qo=t),Ad)},movementY:function(t){return"movementY"in t?t.movementY:Pd}}),D_=Gt(ph),rA=Le({},ph,{dataTransfer:0}),sA=Gt(rA),oA=Le({},Il,{relatedTarget:0}),Rd=Gt(oA),aA=Le({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),lA=Gt(aA),uA=Le({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cA=Gt(uA),hA=Le({},yo,{data:0}),M_=Gt(hA),dA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pA[t])?!!e[t]:!1}function Ig(){return gA}var mA=Le({},Il,{key:function(t){if(t.key){var e=dA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ig,charCode:function(t){return t.type==="keypress"?Hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yA=Gt(mA),_A=Le({},ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O_=Gt(_A),vA=Le({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ig}),wA=Gt(vA),EA=Le({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),TA=Gt(EA),IA=Le({},ph,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SA=Gt(IA),xA=[9,13,27,32],Sg=si&&"CompositionEvent"in window,Ea=null;si&&"documentMode"in document&&(Ea=document.documentMode);var bA=si&&"TextEvent"in window&&!Ea,mT=si&&(!Sg||Ea&&8<Ea&&11>=Ea),L_=" ",V_=!1;function yT(t,e){switch(t){case"keyup":return xA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _T(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cs=!1;function kA(t,e){switch(t){case"compositionend":return _T(e);case"keypress":return e.which!==32?null:(V_=!0,L_);case"textInput":return t=e.data,t===L_&&V_?null:t;default:return null}}function CA(t,e){if(Cs)return t==="compositionend"||!Sg&&yT(t,e)?(t=gT(),Wu=Eg=Oi=null,Cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mT&&e.locale!=="ko"?null:e.data;default:return null}}var AA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AA[t.type]:e==="textarea"}function vT(t,e,n,i){YE(i),e=vc(e,"onChange"),0<e.length&&(n=new Tg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ta=null,qa=null;function PA(t){PT(t,0)}function gh(t){var e=Rs(t);if($E(e))return t}function RA(t,e){if(t==="change")return e}var wT=!1;if(si){var Nd;if(si){var Dd="oninput"in document;if(!Dd){var j_=document.createElement("div");j_.setAttribute("oninput","return;"),Dd=typeof j_.oninput=="function"}Nd=Dd}else Nd=!1;wT=Nd&&(!document.documentMode||9<document.documentMode)}function U_(){Ta&&(Ta.detachEvent("onpropertychange",ET),qa=Ta=null)}function ET(t){if(t.propertyName==="value"&&gh(qa)){var e=[];vT(e,qa,t,mg(t)),eT(PA,e)}}function NA(t,e,n){t==="focusin"?(U_(),Ta=e,qa=n,Ta.attachEvent("onpropertychange",ET)):t==="focusout"&&U_()}function DA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gh(qa)}function MA(t,e){if(t==="click")return gh(e)}function OA(t,e){if(t==="input"||t==="change")return gh(e)}function LA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:LA;function Ka(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!bf.call(e,r)||!_n(t[r],e[r]))return!1}return!0}function B_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z_(t,e){var n=B_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B_(n)}}function TT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IT(){for(var t=window,e=dc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dc(t.document)}return e}function xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VA(t){var e=IT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&TT(n.ownerDocument.documentElement,n)){if(i!==null&&xg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=z_(n,s);var o=z_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var FA=si&&"documentMode"in document&&11>=document.documentMode,As=null,Hf=null,Ia=null,qf=!1;function $_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qf||As==null||As!==dc(i)||(i=As,"selectionStart"in i&&xg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ia&&Ka(Ia,i)||(Ia=i,i=vc(Hf,"onSelect"),0<i.length&&(e=new Tg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=As)))}function fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ps={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},Md={},ST={};si&&(ST=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function mh(t){if(Md[t])return Md[t];if(!Ps[t])return t;var e=Ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ST)return Md[t]=e[n];return t}var xT=mh("animationend"),bT=mh("animationiteration"),kT=mh("animationstart"),CT=mh("transitionend"),AT=new Map,W_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){AT.set(t,e),os(e,[t])}for(var Od=0;Od<W_.length;Od++){var Ld=W_[Od],jA=Ld.toLowerCase(),UA=Ld[0].toUpperCase()+Ld.slice(1);ur(jA,"on"+UA)}ur(xT,"onAnimationEnd");ur(bT,"onAnimationIteration");ur(kT,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(CT,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function H_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,jC(i,e,void 0,t),t.currentTarget=null}function PT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;H_(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;H_(r,a,u),s=l}}}if(pc)throw t=Bf,pc=!1,Bf=null,t}function xe(t,e){var n=e[Xf];n===void 0&&(n=e[Xf]=new Set);var i=t+"__bubble";n.has(i)||(RT(e,t,2,!1),n.add(i))}function Vd(t,e,n){var i=0;e&&(i|=4),RT(n,t,i,e)}var pu="_reactListening"+Math.random().toString(36).slice(2);function Ga(t){if(!t[pu]){t[pu]=!0,FE.forEach(function(n){n!=="selectionchange"&&(BA.has(n)||Vd(n,!1,t),Vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pu]||(e[pu]=!0,Vd("selectionchange",!1,e))}}function RT(t,e,n,i){switch(pT(e)){case 1:var r=tA;break;case 4:r=nA;break;default:r=wg}n=r.bind(null,e,n,t),r=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Fd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Dr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}eT(function(){var u=s,h=mg(n),d=[];e:{var f=AT.get(t);if(f!==void 0){var m=Tg,_=t;switch(t){case"keypress":if(Hu(n)===0)break e;case"keydown":case"keyup":m=yA;break;case"focusin":_="focus",m=Rd;break;case"focusout":_="blur",m=Rd;break;case"beforeblur":case"afterblur":m=Rd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=D_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=sA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=wA;break;case xT:case bT:case kT:m=lA;break;case CT:m=TA;break;case"scroll":m=iA;break;case"wheel":m=SA;break;case"copy":case"cut":case"paste":m=cA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O_}var w=(e&4)!==0,T=!w&&t==="scroll",E=w?f!==null?f+"Capture":null:f;w=[];for(var S=u,x;S!==null;){x=S;var R=x.stateNode;if(x.tag===5&&R!==null&&(x=R,E!==null&&(R=za(S,E),R!=null&&w.push(Qa(S,R,x)))),T)break;S=S.return}0<w.length&&(f=new m(f,_,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Ff&&(_=n.relatedTarget||n.fromElement)&&(Dr(_)||_[oi]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=u,_=_?Dr(_):null,_!==null&&(T=as(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=u),m!==_)){if(w=D_,R="onMouseLeave",E="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(w=O_,R="onPointerLeave",E="onPointerEnter",S="pointer"),T=m==null?f:Rs(m),x=_==null?f:Rs(_),f=new w(R,S+"leave",m,n,h),f.target=T,f.relatedTarget=x,R=null,Dr(h)===u&&(w=new w(E,S+"enter",_,n,h),w.target=x,w.relatedTarget=T,R=w),T=R,m&&_)t:{for(w=m,E=_,S=0,x=w;x;x=_s(x))S++;for(x=0,R=E;R;R=_s(R))x++;for(;0<S-x;)w=_s(w),S--;for(;0<x-S;)E=_s(E),x--;for(;S--;){if(w===E||E!==null&&w===E.alternate)break t;w=_s(w),E=_s(E)}w=null}else w=null;m!==null&&q_(d,f,m,w,!1),_!==null&&T!==null&&q_(d,T,_,w,!0)}}e:{if(f=u?Rs(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=RA;else if(F_(f))if(wT)M=OA;else{M=DA;var N=NA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=MA);if(M&&(M=M(t,u))){vT(d,M,n,h);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Df(f,"number",f.value)}switch(N=u?Rs(u):window,t){case"focusin":(F_(N)||N.contentEditable==="true")&&(As=N,Hf=u,Ia=null);break;case"focusout":Ia=Hf=As=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,$_(d,n,h);break;case"selectionchange":if(FA)break;case"keydown":case"keyup":$_(d,n,h)}var I;if(Sg)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Cs?yT(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(mT&&n.locale!=="ko"&&(Cs||v!=="onCompositionStart"?v==="onCompositionEnd"&&Cs&&(I=gT()):(Oi=h,Eg="value"in Oi?Oi.value:Oi.textContent,Cs=!0)),N=vc(u,v),0<N.length&&(v=new M_(v,t,null,n,h),d.push({event:v,listeners:N}),I?v.data=I:(I=_T(n),I!==null&&(v.data=I)))),(I=bA?kA(t,n):CA(t,n))&&(u=vc(u,"onBeforeInput"),0<u.length&&(h=new M_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=I))}PT(d,e)})}function Qa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=za(t,n),s!=null&&i.unshift(Qa(t,s,r)),s=za(t,e),s!=null&&i.push(Qa(t,s,r))),t=t.return}return i}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=za(n,s),l!=null&&o.unshift(Qa(n,l,a))):r||(l=za(n,s),l!=null&&o.push(Qa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var zA=/\r\n?/g,$A=/\u0000|\uFFFD/g;function K_(t){return(typeof t=="string"?t:""+t).replace(zA,`
`).replace($A,"")}function gu(t,e,n){if(e=K_(e),K_(t)!==e&&n)throw Error(B(425))}function wc(){}var Kf=null,Gf=null;function Qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yf=typeof setTimeout=="function"?setTimeout:void 0,WA=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,HA=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(t){return G_.resolve(null).then(t).catch(qA)}:Yf;function qA(t){setTimeout(function(){throw t})}function jd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ha(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ha(e)}function Hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Q_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Pn="__reactFiber$"+_o,Ya="__reactProps$"+_o,oi="__reactContainer$"+_o,Xf="__reactEvents$"+_o,KA="__reactListeners$"+_o,GA="__reactHandles$"+_o;function Dr(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[oi]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Q_(t);t!==null;){if(n=t[Pn])return n;t=Q_(t)}return e}t=n,n=t.parentNode}return null}function Sl(t){return t=t[Pn]||t[oi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function yh(t){return t[Ya]||null}var Jf=[],Ns=-1;function cr(t){return{current:t}}function Ce(t){0>Ns||(t.current=Jf[Ns],Jf[Ns]=null,Ns--)}function Te(t,e){Ns++,Jf[Ns]=t.current,t.current=e}var nr={},_t=cr(nr),Mt=cr(!1),qr=nr;function Xs(t,e){var n=t.type.contextTypes;if(!n)return nr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ot(t){return t=t.childContextTypes,t!=null}function Ec(){Ce(Mt),Ce(_t)}function Y_(t,e,n){if(_t.current!==nr)throw Error(B(168));Te(_t,e),Te(Mt,n)}function NT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(B(108,NC(t)||"Unknown",r));return Le({},n,i)}function Tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nr,qr=_t.current,Te(_t,t),Te(Mt,Mt.current),!0}function X_(t,e,n){var i=t.stateNode;if(!i)throw Error(B(169));n?(t=NT(t,e,qr),i.__reactInternalMemoizedMergedChildContext=t,Ce(Mt),Ce(_t),Te(_t,t)):Ce(Mt),Te(Mt,n)}var Yn=null,_h=!1,Ud=!1;function DT(t){Yn===null?Yn=[t]:Yn.push(t)}function QA(t){_h=!0,DT(t)}function hr(){if(!Ud&&Yn!==null){Ud=!0;var t=0,e=ve;try{var n=Yn;for(ve=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Yn=null,_h=!1}catch(r){throw Yn!==null&&(Yn=Yn.slice(t+1)),rT(yg,hr),r}finally{ve=e,Ud=!1}}return null}var Ds=[],Ms=0,Ic=null,Sc=0,Yt=[],Xt=0,Kr=null,Jn=1,Zn="";function Cr(t,e){Ds[Ms++]=Sc,Ds[Ms++]=Ic,Ic=t,Sc=e}function MT(t,e,n){Yt[Xt++]=Jn,Yt[Xt++]=Zn,Yt[Xt++]=Kr,Kr=t;var i=Jn;t=Zn;var r=32-gn(i)-1;i&=~(1<<r),n+=1;var s=32-gn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Jn=1<<32-gn(e)+r|n<<r|i,Zn=s+t}else Jn=1<<s|n<<r|i,Zn=t}function bg(t){t.return!==null&&(Cr(t,1),MT(t,1,0))}function kg(t){for(;t===Ic;)Ic=Ds[--Ms],Ds[Ms]=null,Sc=Ds[--Ms],Ds[Ms]=null;for(;t===Kr;)Kr=Yt[--Xt],Yt[Xt]=null,Zn=Yt[--Xt],Yt[Xt]=null,Jn=Yt[--Xt],Yt[Xt]=null}var Ht=null,$t=null,Pe=!1,fn=null;function OT(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function J_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,$t=Hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kr!==null?{id:Jn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,$t=null,!0):!1;default:return!1}}function Zf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ep(t){if(Pe){var e=$t;if(e){var n=e;if(!J_(t,e)){if(Zf(t))throw Error(B(418));e=Hi(n.nextSibling);var i=Ht;e&&J_(t,e)?OT(i,n):(t.flags=t.flags&-4097|2,Pe=!1,Ht=t)}}else{if(Zf(t))throw Error(B(418));t.flags=t.flags&-4097|2,Pe=!1,Ht=t}}}function Z_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function mu(t){if(t!==Ht)return!1;if(!Pe)return Z_(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qf(t.type,t.memoizedProps)),e&&(e=$t)){if(Zf(t))throw LT(),Error(B(418));for(;e;)OT(t,e),e=Hi(e.nextSibling)}if(Z_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Ht?Hi(t.stateNode.nextSibling):null;return!0}function LT(){for(var t=$t;t;)t=Hi(t.nextSibling)}function Js(){$t=Ht=null,Pe=!1}function Cg(t){fn===null?fn=[t]:fn.push(t)}var YA=fi.ReactCurrentBatchConfig;function Ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var i=n.stateNode}if(!i)throw Error(B(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function yu(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ev(t){var e=t._init;return e(t._payload)}function VT(t){function e(E,S){if(t){var x=E.deletions;x===null?(E.deletions=[S],E.flags|=16):x.push(S)}}function n(E,S){if(!t)return null;for(;S!==null;)e(E,S),S=S.sibling;return null}function i(E,S){for(E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function r(E,S){return E=Qi(E,S),E.index=0,E.sibling=null,E}function s(E,S,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<S?(E.flags|=2,S):x):(E.flags|=2,S)):(E.flags|=1048576,S)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,S,x,R){return S===null||S.tag!==6?(S=Kd(x,E.mode,R),S.return=E,S):(S=r(S,x),S.return=E,S)}function l(E,S,x,R){var M=x.type;return M===ks?h(E,S,x.props.children,R,x.key):S!==null&&(S.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ki&&ev(M)===S.type)?(R=r(S,x.props),R.ref=Ko(E,S,x),R.return=E,R):(R=Ju(x.type,x.key,x.props,null,E.mode,R),R.ref=Ko(E,S,x),R.return=E,R)}function u(E,S,x,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==x.containerInfo||S.stateNode.implementation!==x.implementation?(S=Gd(x,E.mode,R),S.return=E,S):(S=r(S,x.children||[]),S.return=E,S)}function h(E,S,x,R,M){return S===null||S.tag!==7?(S=Br(x,E.mode,R,M),S.return=E,S):(S=r(S,x),S.return=E,S)}function d(E,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Kd(""+S,E.mode,x),S.return=E,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ou:return x=Ju(S.type,S.key,S.props,null,E.mode,x),x.ref=Ko(E,null,S),x.return=E,x;case bs:return S=Gd(S,E.mode,x),S.return=E,S;case ki:var R=S._init;return d(E,R(S._payload),x)}if(sa(S)||zo(S))return S=Br(S,E.mode,x,null),S.return=E,S;yu(E,S)}return null}function f(E,S,x,R){var M=S!==null?S.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:a(E,S,""+x,R);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ou:return x.key===M?l(E,S,x,R):null;case bs:return x.key===M?u(E,S,x,R):null;case ki:return M=x._init,f(E,S,M(x._payload),R)}if(sa(x)||zo(x))return M!==null?null:h(E,S,x,R,null);yu(E,x)}return null}function m(E,S,x,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(x)||null,a(S,E,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ou:return E=E.get(R.key===null?x:R.key)||null,l(S,E,R,M);case bs:return E=E.get(R.key===null?x:R.key)||null,u(S,E,R,M);case ki:var N=R._init;return m(E,S,x,N(R._payload),M)}if(sa(R)||zo(R))return E=E.get(x)||null,h(S,E,R,M,null);yu(S,R)}return null}function _(E,S,x,R){for(var M=null,N=null,I=S,v=S=0,k=null;I!==null&&v<x.length;v++){I.index>v?(k=I,I=null):k=I.sibling;var C=f(E,I,x[v],R);if(C===null){I===null&&(I=k);break}t&&I&&C.alternate===null&&e(E,I),S=s(C,S,v),N===null?M=C:N.sibling=C,N=C,I=k}if(v===x.length)return n(E,I),Pe&&Cr(E,v),M;if(I===null){for(;v<x.length;v++)I=d(E,x[v],R),I!==null&&(S=s(I,S,v),N===null?M=I:N.sibling=I,N=I);return Pe&&Cr(E,v),M}for(I=i(E,I);v<x.length;v++)k=m(I,E,v,x[v],R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?v:k.key),S=s(k,S,v),N===null?M=k:N.sibling=k,N=k);return t&&I.forEach(function(P){return e(E,P)}),Pe&&Cr(E,v),M}function w(E,S,x,R){var M=zo(x);if(typeof M!="function")throw Error(B(150));if(x=M.call(x),x==null)throw Error(B(151));for(var N=M=null,I=S,v=S=0,k=null,C=x.next();I!==null&&!C.done;v++,C=x.next()){I.index>v?(k=I,I=null):k=I.sibling;var P=f(E,I,C.value,R);if(P===null){I===null&&(I=k);break}t&&I&&P.alternate===null&&e(E,I),S=s(P,S,v),N===null?M=P:N.sibling=P,N=P,I=k}if(C.done)return n(E,I),Pe&&Cr(E,v),M;if(I===null){for(;!C.done;v++,C=x.next())C=d(E,C.value,R),C!==null&&(S=s(C,S,v),N===null?M=C:N.sibling=C,N=C);return Pe&&Cr(E,v),M}for(I=i(E,I);!C.done;v++,C=x.next())C=m(I,E,v,C.value,R),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?v:C.key),S=s(C,S,v),N===null?M=C:N.sibling=C,N=C);return t&&I.forEach(function(D){return e(E,D)}),Pe&&Cr(E,v),M}function T(E,S,x,R){if(typeof x=="object"&&x!==null&&x.type===ks&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ou:e:{for(var M=x.key,N=S;N!==null;){if(N.key===M){if(M=x.type,M===ks){if(N.tag===7){n(E,N.sibling),S=r(N,x.props.children),S.return=E,E=S;break e}}else if(N.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ki&&ev(M)===N.type){n(E,N.sibling),S=r(N,x.props),S.ref=Ko(E,N,x),S.return=E,E=S;break e}n(E,N);break}else e(E,N);N=N.sibling}x.type===ks?(S=Br(x.props.children,E.mode,R,x.key),S.return=E,E=S):(R=Ju(x.type,x.key,x.props,null,E.mode,R),R.ref=Ko(E,S,x),R.return=E,E=R)}return o(E);case bs:e:{for(N=x.key;S!==null;){if(S.key===N)if(S.tag===4&&S.stateNode.containerInfo===x.containerInfo&&S.stateNode.implementation===x.implementation){n(E,S.sibling),S=r(S,x.children||[]),S.return=E,E=S;break e}else{n(E,S);break}else e(E,S);S=S.sibling}S=Gd(x,E.mode,R),S.return=E,E=S}return o(E);case ki:return N=x._init,T(E,S,N(x._payload),R)}if(sa(x))return _(E,S,x,R);if(zo(x))return w(E,S,x,R);yu(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,S!==null&&S.tag===6?(n(E,S.sibling),S=r(S,x),S.return=E,E=S):(n(E,S),S=Kd(x,E.mode,R),S.return=E,E=S),o(E)):n(E,S)}return T}var Zs=VT(!0),FT=VT(!1),xc=cr(null),bc=null,Os=null,Ag=null;function Pg(){Ag=Os=bc=null}function Rg(t){var e=xc.current;Ce(xc),t._currentValue=e}function tp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function $s(t,e){bc=t,Ag=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(Ag!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(bc===null)throw Error(B(308));Os=t,bc.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var Mr=null;function Ng(t){Mr===null?Mr=[t]:Mr.push(t)}function jT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ng(e)):(n.next=r.next,r.next=n),e.interleaved=n,ai(t,i)}function ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ci=!1;function Dg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,fe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ai(t,n)}return r=i.interleaved,r===null?(e.next=e,Ng(i)):(e.next=r.next,r.next=e),i.interleaved=e,ai(t,n)}function qu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,_g(t,n)}}function tv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kc(t,e,n,i){var r=t.updateQueue;Ci=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(f=e,m=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){d=_.call(m,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,f=typeof _=="function"?_.call(m,d,f):_,f==null)break e;d=Le({},d,f);break e;case 2:Ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Qr|=o,t.lanes=o,t.memoizedState=d}}function nv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(B(191,r));r.call(i)}}}var xl={},Dn=cr(xl),Xa=cr(xl),Ja=cr(xl);function Or(t){if(t===xl)throw Error(B(174));return t}function Mg(t,e){switch(Te(Ja,e),Te(Xa,t),Te(Dn,xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Of(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Of(e,t)}Ce(Dn),Te(Dn,e)}function eo(){Ce(Dn),Ce(Xa),Ce(Ja)}function BT(t){Or(Ja.current);var e=Or(Dn.current),n=Of(e,t.type);e!==n&&(Te(Xa,t),Te(Dn,n))}function Og(t){Xa.current===t&&(Ce(Dn),Ce(Xa))}var De=cr(0);function Cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bd=[];function Lg(){for(var t=0;t<Bd.length;t++)Bd[t]._workInProgressVersionPrimary=null;Bd.length=0}var Ku=fi.ReactCurrentDispatcher,zd=fi.ReactCurrentBatchConfig,Gr=0,Me=null,Ke=null,Xe=null,Ac=!1,Sa=!1,Za=0,XA=0;function ht(){throw Error(B(321))}function Vg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function Fg(t,e,n,i,r,s){if(Gr=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ku.current=t===null||t.memoizedState===null?t1:n1,t=n(i,r),Sa){s=0;do{if(Sa=!1,Za=0,25<=s)throw Error(B(301));s+=1,Xe=Ke=null,e.updateQueue=null,Ku.current=i1,t=n(i,r)}while(Sa)}if(Ku.current=Pc,e=Ke!==null&&Ke.next!==null,Gr=0,Xe=Ke=Me=null,Ac=!1,e)throw Error(B(300));return t}function jg(){var t=Za!==0;return Za=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Me.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function sn(){if(Ke===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Xe===null?Me.memoizedState:Xe.next;if(e!==null)Xe=e,Ke=t;else{if(t===null)throw Error(B(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Xe===null?Me.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function el(t,e){return typeof e=="function"?e(t):e}function $d(t){var e=sn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=Ke,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Gr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Me.lanes|=h,Qr|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,_n(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Me.lanes|=s,Qr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wd(t){var e=sn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);_n(s,e.memoizedState)||(Nt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function zT(){}function $T(t,e){var n=Me,i=sn(),r=e(),s=!_n(i.memoizedState,r);if(s&&(i.memoizedState=r,Nt=!0),i=i.queue,Ug(qT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,tl(9,HT.bind(null,n,i,r,e),void 0,null),Je===null)throw Error(B(349));Gr&30||WT(n,e,r)}return r}function WT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HT(t,e,n,i){e.value=n,e.getSnapshot=i,KT(e)&&GT(t)}function qT(t,e,n){return n(function(){KT(e)&&GT(t)})}function KT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function GT(t){var e=ai(t,1);e!==null&&mn(e,t,1,-1)}function iv(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:t},e.queue=t,t=t.dispatch=e1.bind(null,Me,t),[e.memoizedState,t]}function tl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function QT(){return sn().memoizedState}function Gu(t,e,n,i){var r=Cn();Me.flags|=t,r.memoizedState=tl(1|e,n,void 0,i===void 0?null:i)}function vh(t,e,n,i){var r=sn();i=i===void 0?null:i;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,i!==null&&Vg(i,o.deps)){r.memoizedState=tl(e,n,s,i);return}}Me.flags|=t,r.memoizedState=tl(1|e,n,s,i)}function rv(t,e){return Gu(8390656,8,t,e)}function Ug(t,e){return vh(2048,8,t,e)}function YT(t,e){return vh(4,2,t,e)}function XT(t,e){return vh(4,4,t,e)}function JT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZT(t,e,n){return n=n!=null?n.concat([t]):null,vh(4,4,JT.bind(null,e,t),n)}function Bg(){}function eI(t,e){var n=sn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Vg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function tI(t,e){var n=sn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Vg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function nI(t,e,n){return Gr&21?(_n(n,e)||(n=aT(),Me.lanes|=n,Qr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function JA(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var i=zd.transition;zd.transition={};try{t(!1),e()}finally{ve=n,zd.transition=i}}function iI(){return sn().memoizedState}function ZA(t,e,n){var i=Gi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},rI(t))sI(e,n);else if(n=jT(t,e,n,i),n!==null){var r=St();mn(n,t,i,r),oI(n,e,i)}}function e1(t,e,n){var i=Gi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(rI(t))sI(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,_n(a,o)){var l=e.interleaved;l===null?(r.next=r,Ng(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=jT(t,e,r,i),n!==null&&(r=St(),mn(n,t,i,r),oI(n,e,i))}}function rI(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function sI(t,e){Sa=Ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oI(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,_g(t,n)}}var Pc={readContext:rn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},t1={readContext:rn,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:rv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gu(4194308,4,JT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gu(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Cn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ZA.bind(null,Me,t),[i.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:iv,useDebugValue:Bg,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=iv(!1),e=t[0];return t=JA.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Me,r=Cn();if(Pe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Je===null)throw Error(B(349));Gr&30||WT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,rv(qT.bind(null,i,s,t),[t]),i.flags|=2048,tl(9,HT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Cn(),e=Je.identifierPrefix;if(Pe){var n=Zn,i=Jn;n=(i&~(1<<32-gn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},n1={readContext:rn,useCallback:eI,useContext:rn,useEffect:Ug,useImperativeHandle:ZT,useInsertionEffect:YT,useLayoutEffect:XT,useMemo:tI,useReducer:$d,useRef:QT,useState:function(){return $d(el)},useDebugValue:Bg,useDeferredValue:function(t){var e=sn();return nI(e,Ke.memoizedState,t)},useTransition:function(){var t=$d(el)[0],e=sn().memoizedState;return[t,e]},useMutableSource:zT,useSyncExternalStore:$T,useId:iI,unstable_isNewReconciler:!1},i1={readContext:rn,useCallback:eI,useContext:rn,useEffect:Ug,useImperativeHandle:ZT,useInsertionEffect:YT,useLayoutEffect:XT,useMemo:tI,useReducer:Wd,useRef:QT,useState:function(){return Wd(el)},useDebugValue:Bg,useDeferredValue:function(t){var e=sn();return Ke===null?e.memoizedState=t:nI(e,Ke.memoizedState,t)},useTransition:function(){var t=Wd(el)[0],e=sn().memoizedState;return[t,e]},useMutableSource:zT,useSyncExternalStore:$T,useId:iI,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function np(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wh={isMounted:function(t){return(t=t._reactInternals)?as(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=St(),r=Gi(t),s=ii(i,r);s.payload=e,n!=null&&(s.callback=n),e=qi(t,s,r),e!==null&&(mn(e,t,r,i),qu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=St(),r=Gi(t),s=ii(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=qi(t,s,r),e!==null&&(mn(e,t,r,i),qu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),i=Gi(t),r=ii(n,i);r.tag=2,e!=null&&(r.callback=e),e=qi(t,r,i),e!==null&&(mn(e,t,i,n),qu(e,t,i))}};function sv(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ka(n,i)||!Ka(r,s):!0}function aI(t,e,n){var i=!1,r=nr,s=e.contextType;return typeof s=="object"&&s!==null?s=rn(s):(r=Ot(e)?qr:_t.current,i=e.contextTypes,s=(i=i!=null)?Xs(t,r):nr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function ov(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&wh.enqueueReplaceState(e,e.state,null)}function ip(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Dg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=rn(s):(s=Ot(e)?qr:_t.current,r.context=Xs(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(np(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&wh.enqueueReplaceState(r,r.state,null),kc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,e){try{var n="",i=e;do n+=RC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r1=typeof WeakMap=="function"?WeakMap:Map;function lI(t,e,n){n=ii(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Nc||(Nc=!0,pp=i),rp(t,e)},n}function uI(t,e,n){n=ii(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){rp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){rp(t,e),typeof i!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function av(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new r1;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=_1.bind(null,t,e,n),e.then(t,t))}function lv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ii(-1,1),e.tag=2,qi(n,e,1))),n.lanes|=1),t)}var s1=fi.ReactCurrentOwner,Nt=!1;function It(t,e,n,i){e.child=t===null?FT(e,null,n,i):Zs(e,t.child,n,i)}function cv(t,e,n,i,r){n=n.render;var s=e.ref;return $s(e,r),i=Fg(t,e,n,i,s,r),n=jg(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,li(t,e,r)):(Pe&&n&&bg(e),e.flags|=1,It(t,e,i,r),e.child)}function hv(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Qg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,cI(t,e,s,i,r)):(t=Ju(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ka,n(o,i)&&t.ref===e.ref)return li(t,e,r)}return e.flags|=1,t=Qi(s,i),t.ref=e.ref,t.return=e,e.child=t}function cI(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ka(s,i)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,li(t,e,r)}return sp(t,e,n,i,r)}function hI(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Vs,zt),zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Vs,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Te(Vs,zt),zt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Te(Vs,zt),zt|=i;return It(t,e,r,n),e.child}function dI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sp(t,e,n,i,r){var s=Ot(n)?qr:_t.current;return s=Xs(e,s),$s(e,r),n=Fg(t,e,n,i,s,r),i=jg(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,li(t,e,r)):(Pe&&i&&bg(e),e.flags|=1,It(t,e,n,r),e.child)}function dv(t,e,n,i,r){if(Ot(n)){var s=!0;Tc(e)}else s=!1;if($s(e,r),e.stateNode===null)Qu(t,e),aI(e,n,i),ip(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=rn(u):(u=Ot(n)?qr:_t.current,u=Xs(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&ov(e,o,i,u),Ci=!1;var f=e.memoizedState;o.state=f,kc(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Mt.current||Ci?(typeof h=="function"&&(np(e,n,h,i),l=e.memoizedState),(a=Ci||sv(e,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,UT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:hn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=rn(l):(l=Ot(n)?qr:_t.current,l=Xs(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&ov(e,o,i,l),Ci=!1,f=e.memoizedState,o.state=f,kc(e,i,o,r);var _=e.memoizedState;a!==d||f!==_||Mt.current||Ci?(typeof m=="function"&&(np(e,n,m,i),_=e.memoizedState),(u=Ci||sv(e,n,u,i,f,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return op(t,e,n,i,s,r)}function op(t,e,n,i,r,s){dI(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&X_(e,n,!1),li(t,e,s);i=e.stateNode,s1.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Zs(e,t.child,null,s),e.child=Zs(e,null,a,s)):It(t,e,a,s),e.memoizedState=i.state,r&&X_(e,n,!0),e.child}function fI(t){var e=t.stateNode;e.pendingContext?Y_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Y_(t,e.context,!1),Mg(t,e.containerInfo)}function fv(t,e,n,i,r){return Js(),Cg(r),e.flags|=256,It(t,e,n,i),e.child}var ap={dehydrated:null,treeContext:null,retryLane:0};function lp(t){return{baseLanes:t,cachePool:null,transitions:null}}function pI(t,e,n){var i=e.pendingProps,r=De.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Te(De,r&1),t===null)return ep(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ih(o,i,0,null),t=Br(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lp(n),e.memoizedState=ap,t):zg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return o1(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Qi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Qi(a,s):(s=Br(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?lp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ap,i}return s=t.child,t=s.sibling,i=Qi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function zg(t,e){return e=Ih({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _u(t,e,n,i){return i!==null&&Cg(i),Zs(e,t.child,null,n),t=zg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function o1(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Hd(Error(B(422))),_u(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ih({mode:"visible",children:i.children},r,0,null),s=Br(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Zs(e,t.child,null,o),e.child.memoizedState=lp(o),e.memoizedState=ap,s);if(!(e.mode&1))return _u(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(B(419)),i=Hd(s,i,void 0),_u(t,e,o,i)}if(a=(o&t.childLanes)!==0,Nt||a){if(i=Je,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ai(t,r),mn(i,t,r,-1))}return Gg(),i=Hd(Error(B(421))),_u(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=v1.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,$t=Hi(r.nextSibling),Ht=e,Pe=!0,fn=null,t!==null&&(Yt[Xt++]=Jn,Yt[Xt++]=Zn,Yt[Xt++]=Kr,Jn=t.id,Zn=t.overflow,Kr=e),e=zg(e,i.children),e.flags|=4096,e)}function pv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),tp(t.return,e,n)}function qd(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function gI(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(It(t,e,i.children,n),i=De.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pv(t,n,e);else if(t.tag===19)pv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Te(De,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Cc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),qd(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Cc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}qd(e,!0,n,null,s);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function li(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function a1(t,e,n){switch(e.tag){case 3:fI(e),Js();break;case 5:BT(e);break;case 1:Ot(e.type)&&Tc(e);break;case 4:Mg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Te(xc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Te(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?pI(t,e,n):(Te(De,De.current&1),t=li(t,e,n),t!==null?t.sibling:null);Te(De,De.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return gI(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Te(De,De.current),i)break;return null;case 22:case 23:return e.lanes=0,hI(t,e,n)}return li(t,e,n)}var mI,up,yI,_I;mI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};up=function(){};yI=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Or(Dn.current);var s=null;switch(n){case"input":r=Rf(t,r),i=Rf(t,i),s=[];break;case"select":r=Le({},r,{value:void 0}),i=Le({},i,{value:void 0}),s=[];break;case"textarea":r=Mf(t,r),i=Mf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=wc)}Lf(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ua.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ua.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};_I=function(t,e,n,i){n!==i&&(e.flags|=4)};function Go(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function l1(t,e,n){var i=e.pendingProps;switch(kg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Ot(e.type)&&Ec(),dt(e),null;case 3:return i=e.stateNode,eo(),Ce(Mt),Ce(_t),Lg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(mu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(yp(fn),fn=null))),up(t,e),dt(e),null;case 5:Og(e);var r=Or(Ja.current);if(n=e.type,t!==null&&e.stateNode!=null)yI(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(B(166));return dt(e),null}if(t=Or(Dn.current),mu(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Pn]=e,i[Ya]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(r=0;r<aa.length;r++)xe(aa[r],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":I_(i,s),xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},xe("invalid",i);break;case"textarea":x_(i,s),xe("invalid",i)}Lf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&gu(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gu(i.textContent,a,t),r=["children",""+a]):Ua.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",i)}switch(n){case"input":au(i),S_(i,s,!0);break;case"textarea":au(i),b_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=wc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Pn]=e,t[Ya]=i,mI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vf(n,i),n){case"dialog":xe("cancel",t),xe("close",t),r=i;break;case"iframe":case"object":case"embed":xe("load",t),r=i;break;case"video":case"audio":for(r=0;r<aa.length;r++)xe(aa[r],t);r=i;break;case"source":xe("error",t),r=i;break;case"img":case"image":case"link":xe("error",t),xe("load",t),r=i;break;case"details":xe("toggle",t),r=i;break;case"input":I_(t,i),r=Rf(t,i),xe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Le({},i,{value:void 0}),xe("invalid",t);break;case"textarea":x_(t,i),r=Mf(t,i),xe("invalid",t);break;default:r=i}Lf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?QE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ba(t,l):typeof l=="number"&&Ba(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ua.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",t):l!=null&&dg(t,s,l,o))}switch(n){case"input":au(t),S_(t,i,!1);break;case"textarea":au(t),b_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+tr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?js(t,!!i.multiple,s,!1):i.defaultValue!=null&&js(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=wc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)_I(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(n=Or(Ja.current),Or(Dn.current),mu(e)){if(i=e.stateNode,n=e.memoizedProps,i[Pn]=e,(s=i.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:gu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gu(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Pn]=e,e.stateNode=i}return dt(e),null;case 13:if(Ce(De),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&$t!==null&&e.mode&1&&!(e.flags&128))LT(),Js(),e.flags|=98560,s=!1;else if(s=mu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Pn]=e}else Js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else fn!==null&&(yp(fn),fn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ge===0&&(Ge=3):Gg())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return eo(),up(t,e),t===null&&Ga(e.stateNode.containerInfo),dt(e),null;case 10:return Rg(e.type._context),dt(e),null;case 17:return Ot(e.type)&&Ec(),dt(e),null;case 19:if(Ce(De),s=e.memoizedState,s===null)return dt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Go(s,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cc(t),o!==null){for(e.flags|=128,Go(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>no&&(e.flags|=128,i=!0,Go(s,!1),e.lanes=4194304)}else{if(!i)if(t=Cc(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Go(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pe)return dt(e),null}else 2*Be()-s.renderingStartTime>no&&n!==1073741824&&(e.flags|=128,i=!0,Go(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=De.current,Te(De,i?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Kg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?zt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function u1(t,e){switch(kg(e),e.tag){case 1:return Ot(e.type)&&Ec(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return eo(),Ce(Mt),Ce(_t),Lg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Og(e),null;case 13:if(Ce(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(De),null;case 4:return eo(),null;case 10:return Rg(e.type._context),null;case 22:case 23:return Kg(),null;case 24:return null;default:return null}}var vu=!1,gt=!1,c1=typeof WeakSet=="function"?WeakSet:Set,H=null;function Ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){je(t,e,i)}else n.current=null}function cp(t,e,n){try{n()}catch(i){je(t,e,i)}}var gv=!1;function h1(t,e){if(Kf=yc,t=IT(),xg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gf={focusedElem:t,selectionRange:n},yc=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,T=_.memoizedState,E=e.stateNode,S=E.getSnapshotBeforeUpdate(e.elementType===e.type?w:hn(e.type,w),T);E.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(R){je(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return _=gv,gv=!1,_}function xa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&cp(e,n,s)}r=r.next}while(r!==i)}}function Eh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function hp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vI(t){var e=t.alternate;e!==null&&(t.alternate=null,vI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Ya],delete e[Xf],delete e[KA],delete e[GA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wI(t){return t.tag===5||t.tag===3||t.tag===4}function mv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wc));else if(i!==4&&(t=t.child,t!==null))for(dp(t,e,n),t=t.sibling;t!==null;)dp(t,e,n),t=t.sibling}function fp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(fp(t,e,n),t=t.sibling;t!==null;)fp(t,e,n),t=t.sibling}var et=null,dn=!1;function Ti(t,e,n){for(n=n.child;n!==null;)EI(t,e,n),n=n.sibling}function EI(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(fh,n)}catch{}switch(n.tag){case 5:gt||Ls(n,e);case 6:var i=et,r=dn;et=null,Ti(t,e,n),et=i,dn=r,et!==null&&(dn?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(dn?(t=et,n=n.stateNode,t.nodeType===8?jd(t.parentNode,n):t.nodeType===1&&jd(t,n),Ha(t)):jd(et,n.stateNode));break;case 4:i=et,r=dn,et=n.stateNode.containerInfo,dn=!0,Ti(t,e,n),et=i,dn=r;break;case 0:case 11:case 14:case 15:if(!gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cp(n,e,o),r=r.next}while(r!==i)}Ti(t,e,n);break;case 1:if(!gt&&(Ls(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){je(n,e,a)}Ti(t,e,n);break;case 21:Ti(t,e,n);break;case 22:n.mode&1?(gt=(i=gt)||n.memoizedState!==null,Ti(t,e,n),gt=i):Ti(t,e,n);break;default:Ti(t,e,n)}}function yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c1),e.forEach(function(i){var r=w1.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:et=a.stateNode,dn=!1;break e;case 3:et=a.stateNode.containerInfo,dn=!0;break e;case 4:et=a.stateNode.containerInfo,dn=!0;break e}a=a.return}if(et===null)throw Error(B(160));EI(s,o,r),et=null,dn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){je(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TI(e,t),e=e.sibling}function TI(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),Sn(t),i&4){try{xa(3,t,t.return),Eh(3,t)}catch(w){je(t,t.return,w)}try{xa(5,t,t.return)}catch(w){je(t,t.return,w)}}break;case 1:cn(e,t),Sn(t),i&512&&n!==null&&Ls(n,n.return);break;case 5:if(cn(e,t),Sn(t),i&512&&n!==null&&Ls(n,n.return),t.flags&32){var r=t.stateNode;try{Ba(r,"")}catch(w){je(t,t.return,w)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&WE(r,s),Vf(a,o);var u=Vf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?QE(r,d):h==="dangerouslySetInnerHTML"?KE(r,d):h==="children"?Ba(r,d):dg(r,h,d,u)}switch(a){case"input":Nf(r,s);break;case"textarea":HE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?js(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?js(r,!!s.multiple,s.defaultValue,!0):js(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ya]=s}catch(w){je(t,t.return,w)}}break;case 6:if(cn(e,t),Sn(t),i&4){if(t.stateNode===null)throw Error(B(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(w){je(t,t.return,w)}}break;case 3:if(cn(e,t),Sn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ha(e.containerInfo)}catch(w){je(t,t.return,w)}break;case 4:cn(e,t),Sn(t);break;case 13:cn(e,t),Sn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Hg=Be())),i&4&&yv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(u=gt)||h,cn(e,t),gt=u):cn(e,t),Sn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(d=H=h;H!==null;){switch(f=H,m=f.child,f.tag){case 0:case 11:case 14:case 15:xa(4,f,f.return);break;case 1:Ls(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){je(i,n,w)}}break;case 5:Ls(f,f.return);break;case 22:if(f.memoizedState!==null){vv(d);continue}}m!==null?(m.return=f,H=m):vv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=GE("display",o))}catch(w){je(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){je(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:cn(e,t),Sn(t),i&4&&yv(t);break;case 21:break;default:cn(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wI(n)){var i=n;break e}n=n.return}throw Error(B(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ba(r,""),i.flags&=-33);var s=mv(t);fp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=mv(t);dp(t,a,o);break;default:throw Error(B(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function d1(t,e,n){H=t,II(t)}function II(t,e,n){for(var i=(t.mode&1)!==0;H!==null;){var r=H,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||vu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||gt;a=vu;var u=gt;if(vu=o,(gt=l)&&!u)for(H=r;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?wv(r):l!==null?(l.return=o,H=l):wv(r);for(;s!==null;)H=s,II(s),s=s.sibling;H=r,vu=a,gt=u}_v(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,H=s):_v(t)}}function _v(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Eh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!gt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nv(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ha(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}gt||e.flags&512&&hp(e)}catch(f){je(e,e.return,f)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function vv(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function wv(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eh(4,e)}catch(l){je(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){je(e,r,l)}}var s=e.return;try{hp(e)}catch(l){je(e,s,l)}break;case 5:var o=e.return;try{hp(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var f1=Math.ceil,Rc=fi.ReactCurrentDispatcher,$g=fi.ReactCurrentOwner,en=fi.ReactCurrentBatchConfig,fe=0,Je=null,We=null,rt=0,zt=0,Vs=cr(0),Ge=0,nl=null,Qr=0,Th=0,Wg=0,ba=null,At=null,Hg=0,no=1/0,Qn=null,Nc=!1,pp=null,Ki=null,wu=!1,Li=null,Dc=0,ka=0,gp=null,Yu=-1,Xu=0;function St(){return fe&6?Be():Yu!==-1?Yu:Yu=Be()}function Gi(t){return t.mode&1?fe&2&&rt!==0?rt&-rt:YA.transition!==null?(Xu===0&&(Xu=aT()),Xu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:pT(t.type)),t):1}function mn(t,e,n,i){if(50<ka)throw ka=0,gp=null,Error(B(185));Tl(t,n,i),(!(fe&2)||t!==Je)&&(t===Je&&(!(fe&2)&&(Th|=n),Ge===4&&Pi(t,rt)),Lt(t,i),n===1&&fe===0&&!(e.mode&1)&&(no=Be()+500,_h&&hr()))}function Lt(t,e){var n=t.callbackNode;YC(t,e);var i=mc(t,t===Je?rt:0);if(i===0)n!==null&&A_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&A_(n),e===1)t.tag===0?QA(Ev.bind(null,t)):DT(Ev.bind(null,t)),HA(function(){!(fe&6)&&hr()}),n=null;else{switch(lT(i)){case 1:n=yg;break;case 4:n=sT;break;case 16:n=gc;break;case 536870912:n=oT;break;default:n=gc}n=RI(n,SI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function SI(t,e){if(Yu=-1,Xu=0,fe&6)throw Error(B(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var i=mc(t,t===Je?rt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Mc(t,i);else{e=i;var r=fe;fe|=2;var s=bI();(Je!==t||rt!==e)&&(Qn=null,no=Be()+500,Ur(t,e));do try{m1();break}catch(a){xI(t,a)}while(!0);Pg(),Rc.current=s,fe=r,We!==null?e=0:(Je=null,rt=0,e=Ge)}if(e!==0){if(e===2&&(r=zf(t),r!==0&&(i=r,e=mp(t,r))),e===1)throw n=nl,Ur(t,0),Pi(t,i),Lt(t,Be()),n;if(e===6)Pi(t,i);else{if(r=t.current.alternate,!(i&30)&&!p1(r)&&(e=Mc(t,i),e===2&&(s=zf(t),s!==0&&(i=s,e=mp(t,s))),e===1))throw n=nl,Ur(t,0),Pi(t,i),Lt(t,Be()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(B(345));case 2:Ar(t,At,Qn);break;case 3:if(Pi(t,i),(i&130023424)===i&&(e=Hg+500-Be(),10<e)){if(mc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){St(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Yf(Ar.bind(null,t,At,Qn),e);break}Ar(t,At,Qn);break;case 4:if(Pi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-gn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Be()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*f1(i/1960))-i,10<i){t.timeoutHandle=Yf(Ar.bind(null,t,At,Qn),i);break}Ar(t,At,Qn);break;case 5:Ar(t,At,Qn);break;default:throw Error(B(329))}}}return Lt(t,Be()),t.callbackNode===n?SI.bind(null,t):null}function mp(t,e){var n=ba;return t.current.memoizedState.isDehydrated&&(Ur(t,e).flags|=256),t=Mc(t,e),t!==2&&(e=At,At=n,e!==null&&yp(e)),t}function yp(t){At===null?At=t:At.push.apply(At,t)}function p1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!_n(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pi(t,e){for(e&=~Wg,e&=~Th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),i=1<<n;t[n]=-1,e&=~i}}function Ev(t){if(fe&6)throw Error(B(327));Ws();var e=mc(t,0);if(!(e&1))return Lt(t,Be()),null;var n=Mc(t,e);if(t.tag!==0&&n===2){var i=zf(t);i!==0&&(e=i,n=mp(t,i))}if(n===1)throw n=nl,Ur(t,0),Pi(t,e),Lt(t,Be()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ar(t,At,Qn),Lt(t,Be()),null}function qg(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(no=Be()+500,_h&&hr())}}function Yr(t){Li!==null&&Li.tag===0&&!(fe&6)&&Ws();var e=fe;fe|=1;var n=en.transition,i=ve;try{if(en.transition=null,ve=1,t)return t()}finally{ve=i,en.transition=n,fe=e,!(fe&6)&&hr()}}function Kg(){zt=Vs.current,Ce(Vs)}function Ur(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WA(n)),We!==null)for(n=We.return;n!==null;){var i=n;switch(kg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ec();break;case 3:eo(),Ce(Mt),Ce(_t),Lg();break;case 5:Og(i);break;case 4:eo();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:Rg(i.type._context);break;case 22:case 23:Kg()}n=n.return}if(Je=t,We=t=Qi(t.current,null),rt=zt=e,Ge=0,nl=null,Wg=Th=Qr=0,At=ba=null,Mr!==null){for(e=0;e<Mr.length;e++)if(n=Mr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Mr=null}return t}function xI(t,e){do{var n=We;try{if(Pg(),Ku.current=Pc,Ac){for(var i=Me.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ac=!1}if(Gr=0,Xe=Ke=Me=null,Sa=!1,Za=0,$g.current=null,n===null||n.return===null){Ge=1,nl=e,We=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=lv(o);if(m!==null){m.flags&=-257,uv(m,o,a,s,e),m.mode&1&&av(s,u,e),e=m,l=u;var _=e.updateQueue;if(_===null){var w=new Set;w.add(l),e.updateQueue=w}else _.add(l);break e}else{if(!(e&1)){av(s,u,e),Gg();break e}l=Error(B(426))}}else if(Pe&&a.mode&1){var T=lv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),uv(T,o,a,s,e),Cg(to(l,a));break e}}s=l=to(l,a),Ge!==4&&(Ge=2),ba===null?ba=[s]:ba.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=lI(s,l,e);tv(s,E);break e;case 1:a=l;var S=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ki===null||!Ki.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=uI(s,a,e);tv(s,R);break e}}s=s.return}while(s!==null)}CI(n)}catch(M){e=M,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function bI(){var t=Rc.current;return Rc.current=Pc,t===null?Pc:t}function Gg(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Je===null||!(Qr&268435455)&&!(Th&268435455)||Pi(Je,rt)}function Mc(t,e){var n=fe;fe|=2;var i=bI();(Je!==t||rt!==e)&&(Qn=null,Ur(t,e));do try{g1();break}catch(r){xI(t,r)}while(!0);if(Pg(),fe=n,Rc.current=i,We!==null)throw Error(B(261));return Je=null,rt=0,Ge}function g1(){for(;We!==null;)kI(We)}function m1(){for(;We!==null&&!BC();)kI(We)}function kI(t){var e=PI(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?CI(t):We=e,$g.current=null}function CI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=u1(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,We=null;return}}else if(n=l1(n,e,zt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ge===0&&(Ge=5)}function Ar(t,e,n){var i=ve,r=en.transition;try{en.transition=null,ve=1,y1(t,e,n,i)}finally{en.transition=r,ve=i}return null}function y1(t,e,n,i){do Ws();while(Li!==null);if(fe&6)throw Error(B(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(XC(t,s),t===Je&&(We=Je=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wu||(wu=!0,RI(gc,function(){return Ws(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=en.transition,en.transition=null;var o=ve;ve=1;var a=fe;fe|=4,$g.current=null,h1(t,n),TI(n,t),VA(Gf),yc=!!Kf,Gf=Kf=null,t.current=n,d1(n),zC(),fe=a,ve=o,en.transition=s}else t.current=n;if(wu&&(wu=!1,Li=t,Dc=r),s=t.pendingLanes,s===0&&(Ki=null),HC(n.stateNode),Lt(t,Be()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Nc)throw Nc=!1,t=pp,pp=null,t;return Dc&1&&t.tag!==0&&Ws(),s=t.pendingLanes,s&1?t===gp?ka++:(ka=0,gp=t):ka=0,hr(),null}function Ws(){if(Li!==null){var t=lT(Dc),e=en.transition,n=ve;try{if(en.transition=null,ve=16>t?16:t,Li===null)var i=!1;else{if(t=Li,Li=null,Dc=0,fe&6)throw Error(B(331));var r=fe;for(fe|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(H=u;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:xa(8,h,s)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var f=h.sibling,m=h.return;if(vI(h),h===u){H=null;break}if(f!==null){f.return=m,H=f;break}H=m}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xa(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,H=E;break e}H=s.return}}var S=t.current;for(H=S;H!==null;){o=H;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,H=x;else e:for(o=S;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Eh(9,a)}}catch(M){je(a,a.return,M)}if(a===o){H=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,H=R;break e}H=a.return}}if(fe=r,hr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(fh,t)}catch{}i=!0}return i}finally{ve=n,en.transition=e}}return!1}function Tv(t,e,n){e=to(n,e),e=lI(t,e,1),t=qi(t,e,1),e=St(),t!==null&&(Tl(t,1,e),Lt(t,e))}function je(t,e,n){if(t.tag===3)Tv(t,t,n);else for(;e!==null;){if(e.tag===3){Tv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ki===null||!Ki.has(i))){t=to(n,t),t=uI(e,t,1),e=qi(e,t,1),t=St(),e!==null&&(Tl(e,1,t),Lt(e,t));break}}e=e.return}}function _1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(rt&n)===n&&(Ge===4||Ge===3&&(rt&130023424)===rt&&500>Be()-Hg?Ur(t,0):Wg|=n),Lt(t,e)}function AI(t,e){e===0&&(t.mode&1?(e=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):e=1);var n=St();t=ai(t,e),t!==null&&(Tl(t,e,n),Lt(t,n))}function v1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),AI(t,n)}function w1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(e),AI(t,n)}var PI;PI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,a1(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,Pe&&e.flags&1048576&&MT(e,Sc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Qu(t,e),t=e.pendingProps;var r=Xs(e,_t.current);$s(e,n),r=Fg(null,e,i,t,r,n);var s=jg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(i)?(s=!0,Tc(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Dg(e),r.updater=wh,e.stateNode=r,r._reactInternals=e,ip(e,i,t,n),e=op(null,e,i,!0,s,n)):(e.tag=0,Pe&&s&&bg(e),It(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Qu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=T1(i),t=hn(i,t),r){case 0:e=sp(null,e,i,t,n);break e;case 1:e=dv(null,e,i,t,n);break e;case 11:e=cv(null,e,i,t,n);break e;case 14:e=hv(null,e,i,hn(i.type,t),n);break e}throw Error(B(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hn(i,r),sp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hn(i,r),dv(t,e,i,r,n);case 3:e:{if(fI(e),t===null)throw Error(B(387));i=e.pendingProps,s=e.memoizedState,r=s.element,UT(t,e),kc(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=to(Error(B(423)),e),e=fv(t,e,i,n,r);break e}else if(i!==r){r=to(Error(B(424)),e),e=fv(t,e,i,n,r);break e}else for($t=Hi(e.stateNode.containerInfo.firstChild),Ht=e,Pe=!0,fn=null,n=FT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Js(),i===r){e=li(t,e,n);break e}It(t,e,i,n)}e=e.child}return e;case 5:return BT(e),t===null&&ep(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Qf(i,r)?o=null:s!==null&&Qf(i,s)&&(e.flags|=32),dI(t,e),It(t,e,o,n),e.child;case 6:return t===null&&ep(e),null;case 13:return pI(t,e,n);case 4:return Mg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Zs(e,null,i,n):It(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hn(i,r),cv(t,e,i,r,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Te(xc,i._currentValue),i._currentValue=o,s!==null)if(_n(s.value,o)){if(s.children===r.children&&!Mt.current){e=li(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ii(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}It(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,$s(e,n),r=rn(r),i=i(r),e.flags|=1,It(t,e,i,n),e.child;case 14:return i=e.type,r=hn(i,e.pendingProps),r=hn(i.type,r),hv(t,e,i,r,n);case 15:return cI(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hn(i,r),Qu(t,e),e.tag=1,Ot(i)?(t=!0,Tc(e)):t=!1,$s(e,n),aI(e,i,r),ip(e,i,r,n),op(null,e,i,!0,t,n);case 19:return gI(t,e,n);case 22:return hI(t,e,n)}throw Error(B(156,e.tag))};function RI(t,e){return rT(t,e)}function E1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,i){return new E1(t,e,n,i)}function Qg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function T1(t){if(typeof t=="function")return Qg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pg)return 11;if(t===gg)return 14}return 2}function Qi(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ju(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Qg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ks:return Br(n.children,r,s,e);case fg:o=8,r|=8;break;case kf:return t=Jt(12,n,e,r|2),t.elementType=kf,t.lanes=s,t;case Cf:return t=Jt(13,n,e,r),t.elementType=Cf,t.lanes=s,t;case Af:return t=Jt(19,n,e,r),t.elementType=Af,t.lanes=s,t;case BE:return Ih(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jE:o=10;break e;case UE:o=9;break e;case pg:o=11;break e;case gg:o=14;break e;case ki:o=16,i=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Br(t,e,n,i){return t=Jt(7,t,i,e),t.lanes=n,t}function Ih(t,e,n,i){return t=Jt(22,t,i,e),t.elementType=BE,t.lanes=n,t.stateNode={isHidden:!1},t}function Kd(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function Gd(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I1(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cd(0),this.expirationTimes=Cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Yg(t,e,n,i,r,s,o,a,l){return t=new I1(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dg(s),t}function S1(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function NI(t){if(!t)return nr;t=t._reactInternals;e:{if(as(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Ot(n))return NT(t,n,e)}return e}function DI(t,e,n,i,r,s,o,a,l){return t=Yg(n,i,!0,t,r,s,o,a,l),t.context=NI(null),n=t.current,i=St(),r=Gi(n),s=ii(i,r),s.callback=e??null,qi(n,s,r),t.current.lanes=r,Tl(t,r,i),Lt(t,i),t}function Sh(t,e,n,i){var r=e.current,s=St(),o=Gi(r);return n=NI(n),e.context===null?e.context=n:e.pendingContext=n,e=ii(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=qi(r,e,o),t!==null&&(mn(t,r,o,s),qu(t,r,o)),o}function Oc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xg(t,e){Iv(t,e),(t=t.alternate)&&Iv(t,e)}function x1(){return null}var MI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jg(t){this._internalRoot=t}xh.prototype.render=Jg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Sh(t,e,null,null)};xh.prototype.unmount=Jg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){Sh(null,t,null,null)}),e[oi]=null}};function xh(t){this._internalRoot=t}xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=hT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ai.length&&e!==0&&e<Ai[n].priority;n++);Ai.splice(n,0,t),n===0&&fT(t)}};function Zg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sv(){}function b1(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Oc(o);s.call(u)}}var o=DI(e,i,t,0,null,!1,!1,"",Sv);return t._reactRootContainer=o,t[oi]=o.current,Ga(t.nodeType===8?t.parentNode:t),Yr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Oc(l);a.call(u)}}var l=Yg(t,0,!1,null,null,!1,!1,"",Sv);return t._reactRootContainer=l,t[oi]=l.current,Ga(t.nodeType===8?t.parentNode:t),Yr(function(){Sh(e,l,n,i)}),l}function kh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Oc(o);a.call(l)}}Sh(e,o,t,r)}else o=b1(n,e,t,r,i);return Oc(o)}uT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(_g(e,n|1),Lt(e,Be()),!(fe&6)&&(no=Be()+500,hr()))}break;case 13:Yr(function(){var i=ai(t,1);if(i!==null){var r=St();mn(i,t,1,r)}}),Xg(t,1)}};vg=function(t){if(t.tag===13){var e=ai(t,134217728);if(e!==null){var n=St();mn(e,t,134217728,n)}Xg(t,134217728)}};cT=function(t){if(t.tag===13){var e=Gi(t),n=ai(t,e);if(n!==null){var i=St();mn(n,t,e,i)}Xg(t,e)}};hT=function(){return ve};dT=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};jf=function(t,e,n){switch(e){case"input":if(Nf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=yh(i);if(!r)throw Error(B(90));$E(i),Nf(i,r)}}}break;case"textarea":HE(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};JE=qg;ZE=Yr;var k1={usingClientEntryPoint:!1,Events:[Sl,Rs,yh,YE,XE,qg]},Qo={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C1={bundleType:Qo.bundleType,version:Qo.version,rendererPackageName:Qo.rendererPackageName,rendererConfig:Qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nT(t),t===null?null:t.stateNode},findFiberByHostInstance:Qo.findFiberByHostInstance||x1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{fh=Eu.inject(C1),Nn=Eu}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k1;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zg(e))throw Error(B(200));return S1(t,e,null,n)};Kt.createRoot=function(t,e){if(!Zg(t))throw Error(B(299));var n=!1,i="",r=MI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Yg(t,1,!1,null,null,n,!1,i,r),t[oi]=e.current,Ga(t.nodeType===8?t.parentNode:t),new Jg(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=nT(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return Yr(t)};Kt.hydrate=function(t,e,n){if(!bh(e))throw Error(B(200));return kh(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Zg(t))throw Error(B(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=MI;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=DI(e,null,t,1,n??null,r,!1,s,o),t[oi]=e.current,Ga(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new xh(e)};Kt.render=function(t,e,n){if(!bh(e))throw Error(B(200));return kh(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!bh(t))throw Error(B(40));return t._reactRootContainer?(Yr(function(){kh(null,null,t,!1,function(){t._reactRootContainer=null,t[oi]=null})}),!0):!1};Kt.unstable_batchedUpdates=qg;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bh(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return kh(t,e,n,!1,i)};Kt.version="18.3.1-next-f1338f8080-20240426";function OI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OI)}catch(t){console.error(t)}}OI(),OE.exports=Kt;var A1=OE.exports,xv=A1;xf.createRoot=xv.createRoot,xf.hydrateRoot=xv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},il.apply(this,arguments)}var Vi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vi||(Vi={}));const bv="popstate";function P1(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return _p("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Lc(r)}return N1(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function em(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R1(){return Math.random().toString(36).substr(2,8)}function kv(t,e){return{usr:t.state,key:t.key,idx:e}}function _p(t,e,n,i){return n===void 0&&(n=null),il({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vo(e):e,{state:n,key:e&&e.key||i||R1()})}function Lc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function N1(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Vi.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(il({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Vi.Pop;let T=h(),E=T==null?null:T-u;u=T,l&&l({action:a,location:w.location,delta:E})}function f(T,E){a=Vi.Push;let S=_p(w.location,T,E);u=h()+1;let x=kv(S,u),R=w.createHref(S);try{o.pushState(x,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(R)}s&&l&&l({action:a,location:w.location,delta:1})}function m(T,E){a=Vi.Replace;let S=_p(w.location,T,E);u=h();let x=kv(S,u),R=w.createHref(S);o.replaceState(x,"",R),s&&l&&l({action:a,location:w.location,delta:0})}function _(T){let E=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof T=="string"?T:Lc(T);return S=S.replace(/ $/,"%20"),Oe(E,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,E)}let w={get action(){return a},get location(){return t(r,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(bv,d),l=T,()=>{r.removeEventListener(bv,d),l=null}},createHref(T){return e(r,T)},createURL:_,encodeLocation(T){let E=_(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:m,go(T){return o.go(T)}};return w}var Cv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cv||(Cv={}));function D1(t,e,n){return n===void 0&&(n="/"),M1(t,e,n)}function M1(t,e,n,i){let r=typeof e=="string"?vo(e):e,s=io(r.pathname||"/",n);if(s==null)return null;let o=LI(t);O1(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=q1(s);a=W1(o[l],u)}return a}function LI(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Yi([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Oe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),LI(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:z1(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of VI(s.path))r(s,o,l)}),e}function VI(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=VI(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function O1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$1(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const L1=/^:[\w-]+$/,V1=3,F1=2,j1=1,U1=10,B1=-2,Av=t=>t==="*";function z1(t,e){let n=t.split("/"),i=n.length;return n.some(Av)&&(i+=B1),e&&(i+=F1),n.filter(r=>!Av(r)).reduce((r,s)=>r+(L1.test(s)?V1:s===""?j1:U1),i)}function $1(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function W1(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=vp({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Yi([s,d.pathname]),pathnameBase:X1(Yi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Yi([s,d.pathnameBase]))}return o}function vp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=H1(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const _=a[d];return m&&!_?u[f]=void 0:u[f]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function H1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),em(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function q1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return em(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function io(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const K1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G1=t=>K1.test(t);function Q1(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?vo(t):t,s;if(n)if(G1(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),em(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Pv(n.substring(1),"/"):s=Pv(n,e)}else s=e;return{pathname:s,search:J1(i),hash:Z1(r)}}function Pv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Qd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tm(t,e){let n=Y1(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function nm(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=vo(t):(r=il({},t),Oe(!r.pathname||!r.pathname.includes("?"),Qd("?","pathname","search",r)),Oe(!r.pathname||!r.pathname.includes("#"),Qd("#","pathname","hash",r)),Oe(!r.search||!r.search.includes("#"),Qd("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=Q1(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Yi=t=>t.join("/").replace(/\/\/+/g,"/"),X1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),J1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function eP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const FI=["post","put","patch","delete"];new Set(FI);const tP=["get",...FI];new Set(tP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rl.apply(this,arguments)}const Ch=O.createContext(null),jI=O.createContext(null),pi=O.createContext(null),Ah=O.createContext(null),dr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),UI=O.createContext(null);function nP(t,e){let{relative:n}=e===void 0?{}:e;wo()||Oe(!1);let{basename:i,navigator:r}=O.useContext(pi),{hash:s,pathname:o,search:a}=Ph(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Yi([i,o])),r.createHref({pathname:l,search:a,hash:s})}function wo(){return O.useContext(Ah)!=null}function fr(){return wo()||Oe(!1),O.useContext(Ah).location}function BI(t){O.useContext(pi).static||O.useLayoutEffect(t)}function Eo(){let{isDataRoute:t}=O.useContext(dr);return t?gP():iP()}function iP(){wo()||Oe(!1);let t=O.useContext(Ch),{basename:e,future:n,navigator:i}=O.useContext(pi),{matches:r}=O.useContext(dr),{pathname:s}=fr(),o=JSON.stringify(tm(r,n.v7_relativeSplatPath)),a=O.useRef(!1);return BI(()=>{a.current=!0}),O.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=nm(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Yi([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function Ph(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(pi),{matches:r}=O.useContext(dr),{pathname:s}=fr(),o=JSON.stringify(tm(r,i.v7_relativeSplatPath));return O.useMemo(()=>nm(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function rP(t,e){return sP(t,e)}function sP(t,e,n,i){wo()||Oe(!1);let{navigator:r}=O.useContext(pi),{matches:s}=O.useContext(dr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=fr(),h;if(e){var d;let T=typeof e=="string"?vo(e):e;l==="/"||(d=T.pathname)!=null&&d.startsWith(l)||Oe(!1),h=T}else h=u;let f=h.pathname||"/",m=f;if(l!=="/"){let T=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=D1(t,{pathname:m}),w=cP(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:Yi([l,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:Yi([l,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,i);return e&&w?O.createElement(Ah.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Vi.Pop}},w):w}function oP(){let t=pP(),e=eP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const aP=O.createElement(oP,null);class lP extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(dr.Provider,{value:this.props.routeContext},O.createElement(UI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uP(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(Ch);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(dr.Provider,{value:e},i)}function cP(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Oe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=n,_=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||_){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,_=!1,w=null,T=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||aP,l&&(u<0&&f===0?(mP("route-fallback"),_=!0,T=null):u===f&&(_=!0,T=d.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),S=()=>{let x;return m?x=w:_?x=T:d.route.Component?x=O.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=h,O.createElement(uP,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(lP,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}var zI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zI||{}),$I=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($I||{});function hP(t){let e=O.useContext(Ch);return e||Oe(!1),e}function dP(t){let e=O.useContext(jI);return e||Oe(!1),e}function fP(t){let e=O.useContext(dr);return e||Oe(!1),e}function WI(t){let e=fP(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function pP(){var t;let e=O.useContext(UI),n=dP(),i=WI();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function gP(){let{router:t}=hP(zI.UseNavigateStable),e=WI($I.UseNavigateStable),n=O.useRef(!1);return BI(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,rl({fromRouteId:e},s)))},[t,e])}const Rv={};function mP(t,e,n){Rv[t]||(Rv[t]=!0)}function yP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wp(t){let{to:e,replace:n,state:i,relative:r}=t;wo()||Oe(!1);let{future:s,static:o}=O.useContext(pi),{matches:a}=O.useContext(dr),{pathname:l}=fr(),u=Eo(),h=nm(e,tm(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return O.useEffect(()=>u(JSON.parse(d),{replace:n,state:i,relative:r}),[u,d,r,n,i]),null}function bn(t){Oe(!1)}function _P(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Vi.Pop,navigator:s,static:o=!1,future:a}=t;wo()&&Oe(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:o,future:rl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=vo(i));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:_="default"}=i,w=O.useMemo(()=>{let T=io(h,l);return T==null?null:{location:{pathname:T,search:d,hash:f,state:m,key:_},navigationType:r}},[l,h,d,f,m,_,r]);return w==null?null:O.createElement(pi.Provider,{value:u},O.createElement(Ah.Provider,{children:n,value:w}))}function vP(t){let{children:e,location:n}=t;return rP(Ep(e),n)}new Promise(()=>{});function Ep(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,Ep(i.props.children,s));return}i.type!==bn&&Oe(!1),!i.props.index||!i.props.children||Oe(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Ep(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vc.apply(this,arguments)}function HI(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function wP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EP(t,e){return t.button===0&&(!e||e==="_self")&&!wP(t)}const TP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],SP="6";try{window.__reactRouterVersion=SP}catch{}const xP=O.createContext({isTransitioning:!1}),bP="startTransition",Nv=_C[bP];function kP(t){let{basename:e,children:n,future:i,window:r}=t,s=O.useRef();s.current==null&&(s.current=P1({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=O.useCallback(d=>{u&&Nv?Nv(()=>l(d)):l(d)},[l,u]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>yP(i),[i]),O.createElement(_P,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const CP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sl=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d}=e,f=HI(e,TP),{basename:m}=O.useContext(pi),_,w=!1;if(typeof u=="string"&&AP.test(u)&&(_=u,CP))try{let x=new URL(window.location.href),R=u.startsWith("//")?new URL(x.protocol+u):new URL(u),M=io(R.pathname,m);R.origin===x.origin&&M!=null?u=M+R.search+R.hash:w=!0}catch{}let T=nP(u,{relative:r}),E=RP(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function S(x){i&&i(x),x.defaultPrevented||E(x)}return O.createElement("a",Vc({},f,{href:_||T,onClick:w||s?i:S,ref:n,target:l}))}),vs=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,d=HI(e,IP),f=Ph(l,{relative:d.relative}),m=fr(),_=O.useContext(jI),{navigator:w,basename:T}=O.useContext(pi),E=_!=null&&NP(f)&&u===!0,S=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,x=m.pathname,R=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(x=x.toLowerCase(),R=R?R.toLowerCase():null,S=S.toLowerCase()),R&&T&&(R=io(R,T)||R);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let N=x===S||!o&&x.startsWith(S)&&x.charAt(M)==="/",I=R!=null&&(R===S||!o&&R.startsWith(S)&&R.charAt(S.length)==="/"),v={isActive:N,isPending:I,isTransitioning:E},k=N?i:void 0,C;typeof s=="function"?C=s(v):C=[s,N?"active":null,I?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(v):a;return O.createElement(sl,Vc({},d,{"aria-current":k,className:C,ref:n,style:P,to:l,viewTransition:u}),typeof h=="function"?h(v):h)});var Tp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Tp||(Tp={}));var Dv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Dv||(Dv={}));function PP(t){let e=O.useContext(Ch);return e||Oe(!1),e}function RP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Eo(),u=fr(),h=Ph(t,{relative:o});return O.useCallback(d=>{if(EP(d,n)){d.preventDefault();let f=i!==void 0?i:Lc(u)===Lc(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,n,t,s,o,a])}function NP(t,e){e===void 0&&(e={});let n=O.useContext(xP);n==null&&Oe(!1);let{basename:i}=PP(Tp.useViewTransitionState),r=Ph(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=io(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=io(n.nextLocation.pathname,i)||n.nextLocation.pathname;return vp(r.pathname,o)!=null||vp(r.pathname,s)!=null}var Mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},DP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},KI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||d==null)throw new MP;const f=s<<2|a>>4;if(i.push(f),u!==64){const m=a<<4&240|u>>2;if(i.push(m),d!==64){const _=u<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OP=function(t){const e=qI(t);return KI.encodeByteArray(e,!0)},Fc=function(t){return OP(t).replace(/\./g,"")},GI=function(t){try{return KI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=()=>LP().__FIREBASE_DEFAULTS__,FP=()=>{if(typeof process>"u"||typeof Mv>"u")return;const t=Mv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GI(t[1]);return e&&JSON.parse(e)},Rh=()=>{try{return VP()||FP()||jP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QI=t=>{var e,n;return(n=(e=Rh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},UP=t=>{const e=QI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},YI=()=>{var t;return(t=Rh())===null||t===void 0?void 0:t.config},XI=t=>{var e;return(e=Rh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fc(JSON.stringify(n)),Fc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $P(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function WP(){var t;const e=(t=Rh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KP(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GP(){return!WP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZI(){try{return typeof indexedDB=="object"}catch{return!1}}function eS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function QP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="FirebaseError";class In extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=YP,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ls.prototype.create)}}class ls{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?XP(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new In(r,a,i)}}function XP(t,e){return t.replace(JP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const JP=/\{\$([^}]+)}/g;function ZP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Ov(s)&&Ov(o)){if(!jc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ov(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ua(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function eR(t,e){const n=new tR(t,e);return n.subscribe.bind(n)}class tR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");nR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Yd),r.error===void 0&&(r.error=Yd),r.complete===void 0&&(r.complete=Yd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=1e3,rR=2,sR=4*60*60*1e3,oR=.5;function Lv(t,e=iR,n=rR){const i=e*Math.pow(n,t),r=Math.round(oR*i*(Math.random()-.5)*2);return Math.min(sR,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t){return t&&t._delegate?t._delegate:t}class vn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new BP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uR(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lR(t){return t===Pr?void 0:t}function uR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const hR={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},dR=le.INFO,fR={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},pR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=fR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nh{constructor(e){this.name=e,this._logLevel=dR,this._logHandler=pR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const gR=(t,e)=>e.some(n=>t instanceof n);let Vv,Fv;function mR(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yR(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tS=new WeakMap,Ip=new WeakMap,nS=new WeakMap,Xd=new WeakMap,im=new WeakMap;function _R(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tS.set(n,t)}).catch(()=>{}),im.set(e,t),e}function vR(t){if(Ip.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ip.set(t,e)}let Sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ip.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wR(t){Sp=t(Sp)}function ER(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Jd(this),e,...n);return nS.set(i,e.sort?e.sort():[e]),Xi(i)}:yR().includes(t)?function(...e){return t.apply(Jd(this),e),Xi(tS.get(this))}:function(...e){return Xi(t.apply(Jd(this),e))}}function TR(t){return typeof t=="function"?ER(t):(t instanceof IDBTransaction&&vR(t),gR(t,mR())?new Proxy(t,Sp):t)}function Xi(t){if(t instanceof IDBRequest)return _R(t);if(Xd.has(t))return Xd.get(t);const e=TR(t);return e!==t&&(Xd.set(t,e),im.set(e,t)),e}const Jd=t=>im.get(t);function iS(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Xi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Xi(o.result),l.oldVersion,l.newVersion,Xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const IR=["get","getKey","getAll","getAllKeys","count"],SR=["put","add","delete","clear"],Zd=new Map;function jv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zd.get(e))return Zd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=SR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||IR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return Zd.set(e,s),s}wR(t=>({...t,get:(e,n,i)=>jv(e,n)||t.get(e,n,i),has:(e,n)=>!!jv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function bR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xp="@firebase/app",Uv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Nh("@firebase/app"),kR="@firebase/app-compat",CR="@firebase/analytics-compat",AR="@firebase/analytics",PR="@firebase/app-check-compat",RR="@firebase/app-check",NR="@firebase/auth",DR="@firebase/auth-compat",MR="@firebase/database",OR="@firebase/data-connect",LR="@firebase/database-compat",VR="@firebase/functions",FR="@firebase/functions-compat",jR="@firebase/installations",UR="@firebase/installations-compat",BR="@firebase/messaging",zR="@firebase/messaging-compat",$R="@firebase/performance",WR="@firebase/performance-compat",HR="@firebase/remote-config",qR="@firebase/remote-config-compat",KR="@firebase/storage",GR="@firebase/storage-compat",QR="@firebase/firestore",YR="@firebase/vertexai-preview",XR="@firebase/firestore-compat",JR="firebase",ZR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="[DEFAULT]",eN={[xp]:"fire-core",[kR]:"fire-core-compat",[AR]:"fire-analytics",[CR]:"fire-analytics-compat",[RR]:"fire-app-check",[PR]:"fire-app-check-compat",[NR]:"fire-auth",[DR]:"fire-auth-compat",[MR]:"fire-rtdb",[OR]:"fire-data-connect",[LR]:"fire-rtdb-compat",[VR]:"fire-fn",[FR]:"fire-fn-compat",[jR]:"fire-iid",[UR]:"fire-iid-compat",[BR]:"fire-fcm",[zR]:"fire-fcm-compat",[$R]:"fire-perf",[WR]:"fire-perf-compat",[HR]:"fire-rc",[qR]:"fire-rc-compat",[KR]:"fire-gcs",[GR]:"fire-gcs-compat",[QR]:"fire-fst",[XR]:"fire-fst-compat",[YR]:"fire-vertex","fire-js":"fire-js",[JR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Map,tN=new Map,kp=new Map;function Bv(t,e){try{t.container.addComponent(e)}catch(n){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Un(t){const e=t.name;if(kp.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,t);for(const n of Uc.values())Bv(n,t);for(const n of tN.values())Bv(n,t);return!0}function kl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new ls("app","Firebase",nN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=ZR;function rS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:bp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ji.create("bad-app-name",{appName:String(r)});if(n||(n=YI()),!n)throw Ji.create("no-options");const s=Uc.get(r);if(s){if(jc(n,s.options)&&jc(i,s.config))return s;throw Ji.create("duplicate-app",{appName:r})}const o=new cR(r);for(const l of kp.values())o.addComponent(l);const a=new iN(n,i,o);return Uc.set(r,a),a}function sS(t=bp){const e=Uc.get(t);if(!e&&t===bp&&YI())return rS();if(!e)throw Ji.create("no-app",{appName:t});return e}function tn(t,e,n){var i;let r=(i=eN[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(a.join(" "));return}Un(new vn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firebase-heartbeat-database",sN=1,ol="firebase-heartbeat-store";let ef=null;function oS(){return ef||(ef=iS(rN,sN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ol)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),ef}async function oN(t){try{const n=(await oS()).transaction(ol),i=await n.objectStore(ol).get(aS(t));return await n.done,i}catch(e){if(e instanceof In)ui.warn(e.message);else{const n=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ui.warn(n.message)}}}async function zv(t,e){try{const i=(await oS()).transaction(ol,"readwrite");await i.objectStore(ol).put(e,aS(t)),await i.done}catch(n){if(n instanceof In)ui.warn(n.message);else{const i=Ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ui.warn(i.message)}}}function aS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=1024,lN=30*24*60*60*1e3;class uN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$v();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=lN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ui.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$v(),{heartbeatsToSend:i,unsentEntries:r}=cN(this._heartbeatsCache.heartbeats),s=Fc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ui.warn(n),""}}}function $v(){return new Date().toISOString().substring(0,10)}function cN(t,e=aN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Wv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Wv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class hN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZI()?eS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wv(t){return Fc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){Un(new vn("platform-logger",e=>new xR(e),"PRIVATE")),Un(new vn("heartbeat",e=>new uN(e),"PRIVATE")),tn(xp,Uv,t),tn(xp,Uv,"esm2017"),tn("fire-js","")}dN("");function rm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function lS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fN=lS,uS=new ls("auth","Firebase",lS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Nh("@firebase/auth");function pN(t,...e){Bc.logLevel<=le.WARN&&Bc.warn(`Auth (${To}): ${t}`,...e)}function Zu(t,...e){Bc.logLevel<=le.ERROR&&Bc.error(`Auth (${To}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw sm(t,...e)}function Mn(t,...e){return sm(t,...e)}function cS(t,e,n){const i=Object.assign(Object.assign({},fN()),{[e]:n});return new ls("auth","Firebase",i).create(e,{appName:t.name})}function ri(t){return cS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return uS.create(t,...e)}function X(t,e,...n){if(!t)throw sm(e,...n)}function ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zu(e),new Error(e)}function ci(t,e){t||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gN(){return Hv()==="http:"||Hv()==="https:"}function Hv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gN()||JI()||"connection"in navigator)?navigator.onLine:!0}function yN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ci(n>e,"Short delay should be less than long delay!"),this.isMobile=$P()||qP()}get(){return mN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=new Cl(3e4,6e4);function gi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zn(t,e,n,i,r={}){return dS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=bl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return HP()||(u.referrerPolicy="no-referrer"),hS.fetch()(fS(t,t.config.apiHost,n,a),u)})}async function dS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},_N),e);try{const r=new EN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Tu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Tu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Tu(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cS(t,h,u);wn(t,h)}}catch(r){if(r instanceof In)throw r;wn(t,"network-request-failed",{message:String(r)})}}async function Al(t,e,n,i,r={}){const s=await zn(t,e,n,i,r);return"mfaPendingCredential"in s&&wn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?om(t.config,r):`${t.config.apiScheme}://${r}`}function wN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Mn(this.auth,"network-request-failed")),vN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Mn(t,e,i);return r.customData._tokenResponse=n,r}function qv(t){return t!==void 0&&t.enterprise!==void 0}class TN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function IN(t,e){return zn(t,"GET","/v2/recaptchaConfig",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e){return zn(t,"POST","/v1/accounts:delete",e)}async function pS(t,e){return zn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xN(t,e=!1){const n=Re(t),i=await n.getIdToken(e),r=am(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ca(tf(r.auth_time)),issuedAtTime:Ca(tf(r.iat)),expirationTime:Ca(tf(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tf(t){return Number(t)*1e3}function am(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const r=GI(n);return r?JSON.parse(r):(Zu("Failed to decode base64 JWT payload"),null)}catch(r){return Zu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Kv(t){const e=am(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof In&&bN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function bN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ro(t,pS(n,{idToken:i}));X(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?gS(s.providerUserInfo):[],a=AN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ap(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function CN(t){const e=Re(t);await zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function gS(t){return t.map(e=>{var{providerId:n}=e,i=rm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(t,e){const n=await dS(t,{},async()=>{const i=bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=fS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hS.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RN(t,e){return zn(t,"POST","/v2/accounts:revokeToken",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=Kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await PN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Hs;return i&&(X(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hs,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=rm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ap(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ro(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xN(this,e)}reload(){return CN(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await zc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(ri(this.auth));const e=await this.getIdToken();return await ro(this,SN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(u=n.createdAt)!==null&&u!==void 0?u:void 0,S=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:R,isAnonymous:M,providerData:N,stsTokenManager:I}=n;X(x&&I,e,"internal-error");const v=Hs.fromJSON(this.name,I);X(typeof x=="string",e,"internal-error"),Ii(d,e.name),Ii(f,e.name),X(typeof R=="boolean",e,"internal-error"),X(typeof M=="boolean",e,"internal-error"),Ii(m,e.name),Ii(_,e.name),Ii(w,e.name),Ii(T,e.name),Ii(E,e.name),Ii(S,e.name);const k=new ti({uid:x,auth:e,email:f,emailVerified:R,displayName:d,isAnonymous:M,photoURL:_,phoneNumber:m,tenantId:w,stsTokenManager:v,createdAt:E,lastLoginAt:S});return N&&Array.isArray(N)&&(k.providerData=N.map(C=>Object.assign({},C))),T&&(k._redirectEventId=T),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new Hs;r.updateFromServerResponse(n);const s=new ti({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await zc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?gS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Hs;a.updateFromIdToken(i);const l=new ti({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ap(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;function ni(t){ci(t instanceof Function,"Expected a class definition");let e=Gv.get(t);return e?(ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mS.type="NONE";const Qv=mS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e,n){return`firebase:${t}:${e}:${n}`}class qs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=ec(this.userKey,r.apiKey,s),this.fullPersistenceKey=ec("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new qs(ni(Qv),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||ni(Qv);const o=ec(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=ti._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new qs(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new qs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TS(e))return"Blackberry";if(IS(e))return"Webos";if(_S(e))return"Safari";if((e.includes("chrome/")||vS(e))&&!e.includes("edge/"))return"Chrome";if(ES(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function yS(t=vt()){return/firefox\//i.test(t)}function _S(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vS(t=vt()){return/crios\//i.test(t)}function wS(t=vt()){return/iemobile/i.test(t)}function ES(t=vt()){return/android/i.test(t)}function TS(t=vt()){return/blackberry/i.test(t)}function IS(t=vt()){return/webos/i.test(t)}function lm(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NN(t=vt()){var e;return lm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function DN(){return KP()&&document.documentMode===10}function SS(t=vt()){return lm(t)||ES(t)||IS(t)||TS(t)||/windows phone/i.test(t)||wS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t,e=[]){let n;switch(t){case"Browser":n=Yv(vt());break;case"Worker":n=`${Yv(vt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e={}){return zn(t,"GET","/v2/passwordPolicy",gi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=6;class VN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xv(this),this.idTokenSubscription=new Xv(this),this.beforeStateQueue=new MN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await qs.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pS(this,{idToken:e}),i=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(ri(this));const n=e?Re(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ON(this),n=new VN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ls("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await RN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await qs.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function pr(t){return Re(t)}class Xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=eR(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jN(t){Dh=t}function bS(t){return Dh.loadJS(t)}function UN(){return Dh.recaptchaEnterpriseScript}function BN(){return Dh.gapiScript}function zN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $N="recaptcha-enterprise",WN="NO_RECAPTCHA";class HN{constructor(e){this.type=$N,this.auth=pr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{IN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new TN(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;qv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(WN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&qv(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=UN();l.length!==0&&(l+=a),bS(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Jv(t,e,n,i=!1){const r=new HN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function $c(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Jv(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Jv(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t,e){const n=kl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(jc(s,e??{}))return r;wn(r,"already-initialized")}return n.initialize({options:e})}function KN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function GN(t,e,n){const i=pr(t);X(i._canInitEmulator,i,"emulator-config-failed"),X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=kS(e),{host:o,port:a}=QN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),YN()}function kS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QN(t){const e=kS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Zv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Zv(o)}}}function Zv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,n){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function XN(t,e){return zn(t,"POST","/v1/accounts:update",e)}async function JN(t,e){return zn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return Al(t,"POST","/v1/accounts:signInWithPassword",gi(t,e))}async function eD(t,e){return zn(t,"POST","/v1/accounts:sendOobCode",gi(t,e))}async function tD(t,e){return eD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",gi(t,e))}async function iD(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends um{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new al(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new al(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $c(e,n,"signInWithPassword",ZN);case"emailLink":return nD(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $c(e,i,"signUpPassword",JN);case"emailLink":return iD(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t,e){return Al(t,"POST","/v1/accounts:signInWithIdp",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="http://localhost";class Xr extends um{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=rm(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Xr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ks(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ks(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ks(e,n)}buildRequest(){const e={requestUri:rD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oD(t){const e=la(ua(t)).link,n=e?la(ua(e)).deep_link_id:null,i=la(ua(t)).deep_link_id;return(i?la(ua(i)).link:null)||i||n||e||t}class cm{constructor(e){var n,i,r,s,o,a;const l=la(ua(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=sD((r=l.mode)!==null&&r!==void 0?r:null);X(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=oD(e);try{return new cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.providerId=us.PROVIDER_ID}static credential(e,n){return al._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=cm.parseLink(n);return X(i,"argument-error"),al._fromEmailAndCode(e,i.code,i.tenantId)}}us.PROVIDER_ID="password";us.EMAIL_PASSWORD_SIGN_IN_METHOD="password";us.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends CS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Pl{constructor(){super("facebook.com")}static credential(e){return Xr._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xr._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ni.credential(n,i)}catch{return null}}}Ni.GOOGLE_SIGN_IN_METHOD="google.com";Ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Pl{constructor(){super("github.com")}static credential(e){return Xr._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.GITHUB_SIGN_IN_METHOD="github.com";Di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Pl{constructor(){super("twitter.com")}static credential(e,n){return Xr._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e){return Al(t,"POST","/v1/accounts:signUp",gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ti._fromIdTokenResponse(e,i,r),o=e0(i);return new Jr({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=e0(i);return new Jr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function e0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends In{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Wc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Wc(e,n,i,r)}}function AS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wc._fromErrorAndOperation(t,s,e,i):s})}async function lD(t,e,n=!1){const i=await ro(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e,n=!1){const{auth:i}=t;if(Rn(i.app))return Promise.reject(ri(i));const r="reauthenticate";try{const s=await ro(t,AS(i,r,e,t),n);X(s.idToken,i,"internal-error");const o=am(s.idToken);X(o,i,"internal-error");const{sub:a}=o;return X(t.uid===a,i,"user-mismatch"),Jr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t,e,n=!1){if(Rn(t.app))return Promise.reject(ri(t));const i="signIn",r=await AS(t,i,e),s=await Jr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function uD(t,e){return RS(pr(t),e)}async function cD(t,e){return PS(Re(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(t){const e=pr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hD(t,e,n){const i=pr(t);await $c(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",tD)}async function dD(t,e,n){if(Rn(t.app))return Promise.reject(ri(t));const i=pr(t),o=await $c(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&NS(t),l}),a=await Jr._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function fD(t,e,n){return Rn(t.app)?Promise.reject(ri(t)):uD(Re(t),us.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&NS(t),i})}function pD(t,e){return gD(Re(t),null,e)}async function gD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await ro(t,XN(i,s));await t._updateTokensIfNecessary(o,!0)}function mD(t,e,n,i){return Re(t).onIdTokenChanged(e,n,i)}function yD(t,e,n){return Re(t).beforeAuthStateChanged(e,n)}function _D(t,e,n,i){return Re(t).onAuthStateChanged(e,n,i)}function vD(t){return Re(t).signOut()}const Hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=1e3,ED=10;class MS extends DS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);DN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,ED):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},wD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}MS.type="LOCAL";const TD=MS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS extends DS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OS.type="SESSION";const LS=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Mh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await ID(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=hm("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function xD(t){On().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function bD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CD(){return VS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebaseLocalStorageDb",AD=1,qc="firebaseLocalStorage",jS="fbase_key";class Rl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oh(t,e){return t.transaction([qc],e?"readwrite":"readonly").objectStore(qc)}function PD(){const t=indexedDB.deleteDatabase(FS);return new Rl(t).toPromise()}function Pp(){const t=indexedDB.open(FS,AD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(qc,{keyPath:jS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(qc)?e(i):(i.close(),await PD(),e(await Pp()))})})}async function t0(t,e,n){const i=Oh(t,!0).put({[jS]:e,value:n});return new Rl(i).toPromise()}async function RD(t,e){const n=Oh(t,!1).get(e),i=await new Rl(n).toPromise();return i===void 0?null:i.value}function n0(t,e){const n=Oh(t,!0).delete(e);return new Rl(n).toPromise()}const ND=800,DD=3;class US{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>DD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mh._getInstance(CD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await bD(),!this.activeServiceWorker)return;this.sender=new SD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await t0(e,Hc,"1"),await n0(e,Hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>t0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>RD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Oh(r,!1).getAll();return new Rl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ND)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}US.type="LOCAL";const MD=US;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){return e?ni(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends um{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ks(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ks(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ks(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LD(t){return RS(t.auth,new dm(t),t.bypassAuthState)}function VD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),PS(n,new dm(t),t.bypassAuthState)}async function FD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),lD(n,new dm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LD;case"linkViaPopup":case"linkViaRedirect":return FD;case"reauthViaPopup":case"reauthViaRedirect":return VD;default:wn(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new Cl(2e3,1e4);class Fs extends BS{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const e=hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jD.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="pendingRedirect",tc=new Map;class BD extends BS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=tc.get(this.auth._key());if(!e){try{const i=await zD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}tc.set(this.auth._key(),e)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zD(t,e){const n=HD(e),i=WD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function $D(t,e){tc.set(t._key(),e)}function WD(t){return ni(t._redirectPersistence)}function HD(t){return ec(UD,t.config.apiKey,t.name)}async function qD(t,e,n=!1){if(Rn(t.app))return Promise.reject(ri(t));const i=pr(t),r=OD(i,e),o=await new BD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=10*60*1e3;class GD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!zS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KD&&this.cachedEventUids.clear(),this.cachedEventUids.has(i0(e))}saveEventToCache(e){this.cachedEventUids.add(i0(e)),this.lastProcessedEventTime=Date.now()}}function i0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t,e={}){return zn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JD=/^https?/;async function ZD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YD(t);for(const n of e)try{if(eM(n))return}catch{}wn(t,"unauthorized-domain")}function eM(t){const e=Cp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!JD.test(n))return!1;if(XD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new Cl(3e4,6e4);function r0(){const t=On().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nM(t){return new Promise((e,n)=>{var i,r,s;function o(){r0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r0(),n(Mn(t,"network-request-failed"))},timeout:tM.get()})}if(!((r=(i=On().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=On().gapi)===null||s===void 0)&&s.load)o();else{const a=zN("iframefcb");return On()[a]=()=>{gapi.load?o():n(Mn(t,"network-request-failed"))},bS(`${BN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw nc=null,e})}let nc=null;function iM(t){return nc=nc||nM(t),nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new Cl(5e3,15e3),sM="__/auth/iframe",oM="emulator/auth/iframe",aM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uM(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?om(e,oM):`https://${t.config.authDomain}/${sM}`,i={apiKey:e.apiKey,appName:t.name,v:To},r=lM.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${bl(i).slice(1)}`}async function cM(t){const e=await iM(t),n=On().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:uM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Mn(t,"network-request-failed"),a=On().setTimeout(()=>{s(o)},rM.get());function l(){On().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dM=500,fM=600,pM="_blank",gM="http://localhost";class s0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mM(t,e,n,i=dM,r=fM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hM),{width:i.toString(),height:r.toString(),top:s,left:o}),u=vt().toLowerCase();n&&(a=vS(u)?pM:n),yS(u)&&(e=e||gM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,_])=>`${f}${m}=${_},`,"");if(NN(u)&&a!=="_self")return yM(e||"",a),new s0(null);const d=window.open(e||"",a,h);X(d,t,"popup-blocked");try{d.focus()}catch{}return new s0(d)}function yM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="__/auth/handler",vM="emulator/auth/handler",wM=encodeURIComponent("fac");async function o0(t,e,n,i,r,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:To,eventId:r};if(e instanceof CS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Pl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${wM}=${encodeURIComponent(l)}`:"";return`${EM(t)}?${bl(a).slice(1)}${u}`}function EM({config:t}){return t.emulator?om(t,vM):`https://${t.authDomain}/${_M}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="webStorageSupport";class TM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LS,this._completeRedirectFn=qD,this._overrideRedirectResult=$D}async _openPopup(e,n,i,r){var s;ci((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await o0(e,n,i,Cp(),r);return mM(e,o,hm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await o0(e,n,i,Cp(),r);return xD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ci(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await cM(e),i=new GD(e);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nf,{type:nf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[nf];o!==void 0&&n(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SS()||_S()||lm()}}const IM=TM;var a0="@firebase/auth",l0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bM(t){Un(new vn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xS(t)},u=new FN(i,r,s,l);return KN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Un(new vn("auth-internal",e=>{const n=pr(e.getProvider("auth").getImmediate());return(i=>new SM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tn(a0,l0,xM(t)),tn(a0,l0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=5*60,CM=XI("authIdTokenMaxAge")||kM;let u0=null;const AM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>CM)return;const r=n==null?void 0:n.token;u0!==r&&(u0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function PM(t=sS()){const e=kl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qN(t,{popupRedirectResolver:IM,persistence:[MD,TD,LS]}),i=XI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=AM(s.toString());yD(n,o,()=>o(n.currentUser)),mD(n,a=>o(a))}}const r=QI("auth");return r&&GN(n,`http://${r}`),n}function RM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Mn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",RM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bM("Browser");var NM="firebase",DM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn(NM,DM,"app");var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zr,$S;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function k(){}k.prototype=v.prototype,I.D=v.prototype,I.prototype=new k,I.prototype.constructor=I,I.C=function(C,P,D){for(var A=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)A[ne-2]=arguments[ne];return v.prototype[P].apply(C,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,k){k||(k=0);var C=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)C[P]=v.charCodeAt(k++)|v.charCodeAt(k++)<<8|v.charCodeAt(k++)<<16|v.charCodeAt(k++)<<24;else for(P=0;16>P;++P)C[P]=v[k++]|v[k++]<<8|v[k++]<<16|v[k++]<<24;v=I.g[0],k=I.g[1],P=I.g[2];var D=I.g[3],A=v+(D^k&(P^D))+C[0]+3614090360&4294967295;v=k+(A<<7&4294967295|A>>>25),A=D+(P^v&(k^P))+C[1]+3905402710&4294967295,D=v+(A<<12&4294967295|A>>>20),A=P+(k^D&(v^k))+C[2]+606105819&4294967295,P=D+(A<<17&4294967295|A>>>15),A=k+(v^P&(D^v))+C[3]+3250441966&4294967295,k=P+(A<<22&4294967295|A>>>10),A=v+(D^k&(P^D))+C[4]+4118548399&4294967295,v=k+(A<<7&4294967295|A>>>25),A=D+(P^v&(k^P))+C[5]+1200080426&4294967295,D=v+(A<<12&4294967295|A>>>20),A=P+(k^D&(v^k))+C[6]+2821735955&4294967295,P=D+(A<<17&4294967295|A>>>15),A=k+(v^P&(D^v))+C[7]+4249261313&4294967295,k=P+(A<<22&4294967295|A>>>10),A=v+(D^k&(P^D))+C[8]+1770035416&4294967295,v=k+(A<<7&4294967295|A>>>25),A=D+(P^v&(k^P))+C[9]+2336552879&4294967295,D=v+(A<<12&4294967295|A>>>20),A=P+(k^D&(v^k))+C[10]+4294925233&4294967295,P=D+(A<<17&4294967295|A>>>15),A=k+(v^P&(D^v))+C[11]+2304563134&4294967295,k=P+(A<<22&4294967295|A>>>10),A=v+(D^k&(P^D))+C[12]+1804603682&4294967295,v=k+(A<<7&4294967295|A>>>25),A=D+(P^v&(k^P))+C[13]+4254626195&4294967295,D=v+(A<<12&4294967295|A>>>20),A=P+(k^D&(v^k))+C[14]+2792965006&4294967295,P=D+(A<<17&4294967295|A>>>15),A=k+(v^P&(D^v))+C[15]+1236535329&4294967295,k=P+(A<<22&4294967295|A>>>10),A=v+(P^D&(k^P))+C[1]+4129170786&4294967295,v=k+(A<<5&4294967295|A>>>27),A=D+(k^P&(v^k))+C[6]+3225465664&4294967295,D=v+(A<<9&4294967295|A>>>23),A=P+(v^k&(D^v))+C[11]+643717713&4294967295,P=D+(A<<14&4294967295|A>>>18),A=k+(D^v&(P^D))+C[0]+3921069994&4294967295,k=P+(A<<20&4294967295|A>>>12),A=v+(P^D&(k^P))+C[5]+3593408605&4294967295,v=k+(A<<5&4294967295|A>>>27),A=D+(k^P&(v^k))+C[10]+38016083&4294967295,D=v+(A<<9&4294967295|A>>>23),A=P+(v^k&(D^v))+C[15]+3634488961&4294967295,P=D+(A<<14&4294967295|A>>>18),A=k+(D^v&(P^D))+C[4]+3889429448&4294967295,k=P+(A<<20&4294967295|A>>>12),A=v+(P^D&(k^P))+C[9]+568446438&4294967295,v=k+(A<<5&4294967295|A>>>27),A=D+(k^P&(v^k))+C[14]+3275163606&4294967295,D=v+(A<<9&4294967295|A>>>23),A=P+(v^k&(D^v))+C[3]+4107603335&4294967295,P=D+(A<<14&4294967295|A>>>18),A=k+(D^v&(P^D))+C[8]+1163531501&4294967295,k=P+(A<<20&4294967295|A>>>12),A=v+(P^D&(k^P))+C[13]+2850285829&4294967295,v=k+(A<<5&4294967295|A>>>27),A=D+(k^P&(v^k))+C[2]+4243563512&4294967295,D=v+(A<<9&4294967295|A>>>23),A=P+(v^k&(D^v))+C[7]+1735328473&4294967295,P=D+(A<<14&4294967295|A>>>18),A=k+(D^v&(P^D))+C[12]+2368359562&4294967295,k=P+(A<<20&4294967295|A>>>12),A=v+(k^P^D)+C[5]+4294588738&4294967295,v=k+(A<<4&4294967295|A>>>28),A=D+(v^k^P)+C[8]+2272392833&4294967295,D=v+(A<<11&4294967295|A>>>21),A=P+(D^v^k)+C[11]+1839030562&4294967295,P=D+(A<<16&4294967295|A>>>16),A=k+(P^D^v)+C[14]+4259657740&4294967295,k=P+(A<<23&4294967295|A>>>9),A=v+(k^P^D)+C[1]+2763975236&4294967295,v=k+(A<<4&4294967295|A>>>28),A=D+(v^k^P)+C[4]+1272893353&4294967295,D=v+(A<<11&4294967295|A>>>21),A=P+(D^v^k)+C[7]+4139469664&4294967295,P=D+(A<<16&4294967295|A>>>16),A=k+(P^D^v)+C[10]+3200236656&4294967295,k=P+(A<<23&4294967295|A>>>9),A=v+(k^P^D)+C[13]+681279174&4294967295,v=k+(A<<4&4294967295|A>>>28),A=D+(v^k^P)+C[0]+3936430074&4294967295,D=v+(A<<11&4294967295|A>>>21),A=P+(D^v^k)+C[3]+3572445317&4294967295,P=D+(A<<16&4294967295|A>>>16),A=k+(P^D^v)+C[6]+76029189&4294967295,k=P+(A<<23&4294967295|A>>>9),A=v+(k^P^D)+C[9]+3654602809&4294967295,v=k+(A<<4&4294967295|A>>>28),A=D+(v^k^P)+C[12]+3873151461&4294967295,D=v+(A<<11&4294967295|A>>>21),A=P+(D^v^k)+C[15]+530742520&4294967295,P=D+(A<<16&4294967295|A>>>16),A=k+(P^D^v)+C[2]+3299628645&4294967295,k=P+(A<<23&4294967295|A>>>9),A=v+(P^(k|~D))+C[0]+4096336452&4294967295,v=k+(A<<6&4294967295|A>>>26),A=D+(k^(v|~P))+C[7]+1126891415&4294967295,D=v+(A<<10&4294967295|A>>>22),A=P+(v^(D|~k))+C[14]+2878612391&4294967295,P=D+(A<<15&4294967295|A>>>17),A=k+(D^(P|~v))+C[5]+4237533241&4294967295,k=P+(A<<21&4294967295|A>>>11),A=v+(P^(k|~D))+C[12]+1700485571&4294967295,v=k+(A<<6&4294967295|A>>>26),A=D+(k^(v|~P))+C[3]+2399980690&4294967295,D=v+(A<<10&4294967295|A>>>22),A=P+(v^(D|~k))+C[10]+4293915773&4294967295,P=D+(A<<15&4294967295|A>>>17),A=k+(D^(P|~v))+C[1]+2240044497&4294967295,k=P+(A<<21&4294967295|A>>>11),A=v+(P^(k|~D))+C[8]+1873313359&4294967295,v=k+(A<<6&4294967295|A>>>26),A=D+(k^(v|~P))+C[15]+4264355552&4294967295,D=v+(A<<10&4294967295|A>>>22),A=P+(v^(D|~k))+C[6]+2734768916&4294967295,P=D+(A<<15&4294967295|A>>>17),A=k+(D^(P|~v))+C[13]+1309151649&4294967295,k=P+(A<<21&4294967295|A>>>11),A=v+(P^(k|~D))+C[4]+4149444226&4294967295,v=k+(A<<6&4294967295|A>>>26),A=D+(k^(v|~P))+C[11]+3174756917&4294967295,D=v+(A<<10&4294967295|A>>>22),A=P+(v^(D|~k))+C[2]+718787259&4294967295,P=D+(A<<15&4294967295|A>>>17),A=k+(D^(P|~v))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+D&4294967295}i.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var k=v-this.blockSize,C=this.B,P=this.h,D=0;D<v;){if(P==0)for(;D<=k;)r(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<v;)if(C[P++]=I.charCodeAt(D++),P==this.blockSize){r(this,C),P=0;break}}else for(;D<v;)if(C[P++]=I[D++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=v},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var k=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=k&255,k/=256;for(this.u(I),I=Array(16),v=k=0;4>v;++v)for(var C=0;32>C;C+=8)I[k++]=this.g[v]>>>C&255;return I};function s(I,v){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=v(I)}function o(I,v){this.h=v;for(var k=[],C=!0,P=I.length-1;0<=P;P--){var D=I[P]|0;C&&D==v||(k[P]=D,C=!1)}this.g=k}var a={};function l(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return T(u(-I));for(var v=[],k=1,C=0;I>=k;C++)v[C]=I/k|0,k*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return T(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(v,8)),C=d,P=0;P<I.length;P+=8){var D=Math.min(8,I.length-P),A=parseInt(I.substring(P,P+D),v);8>D?(D=u(Math.pow(v,D)),C=C.j(D).add(u(A))):(C=C.j(k),C=C.add(u(A)))}return C}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-T(this).m();for(var I=0,v=1,k=0;k<this.g.length;k++){var C=this.i(k);I+=(0<=C?C:4294967296+C)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(w(this))return"-"+T(this).toString(I);for(var v=u(Math.pow(I,6)),k=this,C="";;){var P=R(k,v).g;k=E(k,P.j(v));var D=((0<k.g.length?k.g[0]:k.h)>>>0).toString(I);if(k=P,_(k))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=E(this,I),w(I)?-1:_(I)?0:1};function T(I){for(var v=I.g.length,k=[],C=0;C<v;C++)k[C]=~I.g[C];return new o(k,~I.h).add(f)}t.abs=function(){return w(this)?T(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),k=[],C=0,P=0;P<=v;P++){var D=C+(this.i(P)&65535)+(I.i(P)&65535),A=(D>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);C=A>>>16,D&=65535,A&=65535,k[P]=A<<16|D}return new o(k,k[k.length-1]&-2147483648?-1:0)};function E(I,v){return I.add(T(v))}t.j=function(I){if(_(this)||_(I))return d;if(w(this))return w(I)?T(this).j(T(I)):T(T(this).j(I));if(w(I))return T(this.j(T(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,k=[],C=0;C<2*v;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<I.g.length;P++){var D=this.i(C)>>>16,A=this.i(C)&65535,ne=I.i(P)>>>16,se=I.i(P)&65535;k[2*C+2*P]+=A*se,S(k,2*C+2*P),k[2*C+2*P+1]+=D*se,S(k,2*C+2*P+1),k[2*C+2*P+1]+=A*ne,S(k,2*C+2*P+1),k[2*C+2*P+2]+=D*ne,S(k,2*C+2*P+2)}for(C=0;C<v;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=v;C<2*v;C++)k[C]=0;return new o(k,0)};function S(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function x(I,v){this.g=I,this.h=v}function R(I,v){if(_(v))throw Error("division by zero");if(_(I))return new x(d,d);if(w(I))return v=R(T(I),v),new x(T(v.g),T(v.h));if(w(v))return v=R(I,T(v)),new x(T(v.g),v.h);if(30<I.g.length){if(w(I)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var k=f,C=v;0>=C.l(I);)k=M(k),C=M(C);var P=N(k,1),D=N(C,1);for(C=N(C,2),k=N(k,2);!_(C);){var A=D.add(C);0>=A.l(I)&&(P=P.add(k),D=A),C=N(C,1),k=N(k,1)}return v=E(I,P.j(v)),new x(P,v)}for(P=d;0<=I.l(v);){for(k=Math.max(1,Math.floor(I.m()/v.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=u(k),A=D.j(v);w(A)||0<A.l(I);)k-=C,D=u(k),A=D.j(v);_(D)&&(D=f),P=P.add(D),I=E(I,A)}return new x(P,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),k=[],C=0;C<v;C++)k[C]=this.i(C)&I.i(C);return new o(k,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),k=[],C=0;C<v;C++)k[C]=this.i(C)|I.i(C);return new o(k,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),k=[],C=0;C<v;C++)k[C]=this.i(C)^I.i(C);return new o(k,this.h^I.h)};function M(I){for(var v=I.g.length+1,k=[],C=0;C<v;C++)k[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(k,I.h)}function N(I,v){var k=v>>5;v%=32;for(var C=I.g.length-k,P=[],D=0;D<C;D++)P[D]=0<v?I.i(D+k)>>>v|I.i(D+k+1)<<32-v:I.i(D+k);return new o(P,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,$S=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,zr=o}).apply(typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{});var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WS,ca,HS,ic,Rp,qS,KS,GS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,g){return c==Array.prototype||c==Object.prototype||(c[p]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Iu=="object"&&Iu];for(var p=0;p<c.length;++p){var g=c[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(c,p){if(p)e:{var g=i;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in g))break e;g=g[L]}c=c[c.length-1],b=g[c],p=p(b),p!=b&&p!=null&&e(g,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var g=0,b=!1,L={next:function(){if(!b&&g<c.length){var V=g++;return{value:p(V,c[V]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(c){return c||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,g){return c.call.apply(c.bind,arguments)}function d(c,p,g){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function f(c,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(c,p){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function _(c,p){function g(){}g.prototype=p.prototype,c.aa=p.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(b,L,V){for(var $=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)$[Ee-2]=arguments[Ee];return p.prototype[L].apply(b,$)}}function w(c){const p=c.length;if(0<p){const g=Array(p);for(let b=0;b<p;b++)g[b]=c[b];return g}return[]}function T(c,p){for(let g=1;g<arguments.length;g++){const b=arguments[g];if(l(b)){const L=c.length||0,V=b.length||0;c.length=L+V;for(let $=0;$<V;$++)c[L+$]=b[$]}else c.push(b)}}class E{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function S(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var M=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function N(c,p,g){for(const b in c)p.call(g,c[b],b,c)}function I(c,p){for(const g in c)p.call(void 0,c[g],g,c)}function v(c){const p={};for(const g in c)p[g]=c[g];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,p){let g,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(g in b)c[g]=b[g];for(let V=0;V<k.length;V++)g=k[V],Object.prototype.hasOwnProperty.call(b,g)&&(c[g]=b[g])}}function P(c){var p=1;c=c.split(":");const g=[];for(;0<p&&c.length;)g.push(c.shift()),p--;return c.length&&g.push(c.join(":")),g}function D(c){a.setTimeout(()=>{throw c},0)}function A(){var c=K;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ne{constructor(){this.h=this.g=null}add(p,g){const b=se.get();b.set(p,g),this.h?this.h.next=b:this.g=b,this.h=b}}var se=new E(()=>new he,c=>c.reset());class he{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,z=!1,K=new ne,G=()=>{const c=a.Promise.resolve(void 0);pe=()=>{c.then(de)}};var de=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(g){D(g)}var p=se;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}z=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return c}();function qe(c,p){if(re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(M){e:{try{R(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=c.fromElement:g=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ne[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&qe.aa.h.call(this)}}_(qe,re);var Ne={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var jt="closure_listenable_"+(1e6*Math.random()|0),mr=0;function Co(c,p,g,b,L){this.listener=c,this.proxy=null,this.src=p,this.type=g,this.capture=!!b,this.ha=L,this.key=++mr,this.da=this.fa=!1}function an(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function yi(c){this.src=c,this.g={},this.h=0}yi.prototype.add=function(c,p,g,b,L){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var $=yr(c,p,b,L);return-1<$?(p=c[$],g||(p.fa=!1)):(p=new Co(p,this.src,V,!!b,L),p.fa=g,c.push(p)),p};function _i(c,p){var g=p.type;if(g in c.g){var b=c.g[g],L=Array.prototype.indexOf.call(b,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(b,L,1),V&&(an(p),c.g[g].length==0&&(delete c.g[g],c.h--))}}function yr(c,p,g,b){for(var L=0;L<c.length;++L){var V=c[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==b)return L}return-1}var j="closure_lm_"+(1e6*Math.random()|0),Y={};function ln(c,p,g,b,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)ln(c,p[V],g,b,L);return null}return g=Ey(g),c&&c[jt]?c.K(p,g,u(b)?!!b.capture:!1,L):_r(c,p,g,!1,b,L)}function _r(c,p,g,b,L,V){if(!p)throw Error("Invalid event type");var $=u(L)?!!L.capture:!!L,Ee=sd(c);if(Ee||(c[j]=Ee=new yi(c)),g=Ee.add(p,g,b,$,V),g.proxy)return g;if(b=rd(),g.proxy=b,b.src=c,b.listener=g,c.addEventListener)Ae||(L=$),L===void 0&&(L=!1),c.addEventListener(p.toString(),b,L);else if(c.attachEvent)c.attachEvent(wy(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return g}function rd(){function c(g){return p.call(c.src,c.listener,g)}const p=bk;return c}function Bl(c,p,g,b,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)Bl(c,p[V],g,b,L);else b=u(b)?!!b.capture:!!b,g=Ey(g),c&&c[jt]?(c=c.i,p=String(p).toString(),p in c.g&&(V=c.g[p],g=yr(V,g,b,L),-1<g&&(an(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete c.g[p],c.h--)))):c&&(c=sd(c))&&(p=c.g[p.toString()],c=-1,p&&(c=yr(p,g,b,L)),(g=-1<c?p[c]:null)&&zl(g))}function zl(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[jt])_i(p.i,c);else{var g=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(g,b,c.capture):p.detachEvent?p.detachEvent(wy(g),b):p.addListener&&p.removeListener&&p.removeListener(b),(g=sd(p))?(_i(g,c),g.h==0&&(g.src=null,p[j]=null)):an(c)}}}function wy(c){return c in Y?Y[c]:Y[c]="on"+c}function bk(c,p){if(c.da)c=!0;else{p=new qe(p,this);var g=c.listener,b=c.ha||c.src;c.fa&&zl(c),c=g.call(b,p)}return c}function sd(c){return c=c[j],c instanceof yi?c:null}var od="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ey(c){return typeof c=="function"?c:(c[od]||(c[od]=function(p){return c.handleEvent(p)}),c[od])}function lt(){te.call(this),this.i=new yi(this),this.M=this,this.F=null}_(lt,te),lt.prototype[jt]=!0,lt.prototype.removeEventListener=function(c,p,g,b){Bl(this,c,p,g,b)};function wt(c,p){var g,b=c.F;if(b)for(g=[];b;b=b.F)g.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new re(p,c);else if(p instanceof re)p.target=p.target||c;else{var L=p;p=new re(b,c),C(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var $=p.g=g[V];L=$l($,b,!0,p)&&L}if($=p.g=c,L=$l($,b,!0,p)&&L,L=$l($,b,!1,p)&&L,g)for(V=0;V<g.length;V++)$=p.g=g[V],L=$l($,b,!1,p)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var g=c.g[p],b=0;b<g.length;b++)an(g[b]);delete c.g[p],c.h--}}this.F=null},lt.prototype.K=function(c,p,g,b){return this.i.add(String(c),p,!1,g,b)},lt.prototype.L=function(c,p,g,b){return this.i.add(String(c),p,!0,g,b)};function $l(c,p,g,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var $=p[V];if($&&!$.da&&$.capture==g){var Ee=$.listener,Ze=$.ha||$.src;$.fa&&_i(c.i,$),L=Ee.call(Ze,b)!==!1&&L}}return L&&!b.defaultPrevented}function Ty(c,p,g){if(typeof c=="function")g&&(c=f(c,g));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function Iy(c){c.g=Ty(()=>{c.g=null,c.i&&(c.i=!1,Iy(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class kk extends te{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Iy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ao(c){te.call(this),this.h=c,this.g={}}_(Ao,te);var Sy=[];function xy(c){N(c.g,function(p,g){this.g.hasOwnProperty(g)&&zl(p)},c),c.g={}}Ao.prototype.N=function(){Ao.aa.N.call(this),xy(this)},Ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ad=a.JSON.stringify,Ck=a.JSON.parse,Ak=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ld(){}ld.prototype.h=null;function by(c){return c.h||(c.h=c.i())}function ky(){}var Po={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ud(){re.call(this,"d")}_(ud,re);function cd(){re.call(this,"c")}_(cd,re);var vr={},Cy=null;function Wl(){return Cy=Cy||new lt}vr.La="serverreachability";function Ay(c){re.call(this,vr.La,c)}_(Ay,re);function Ro(c){const p=Wl();wt(p,new Ay(p))}vr.STAT_EVENT="statevent";function Py(c,p){re.call(this,vr.STAT_EVENT,c),this.stat=p}_(Py,re);function Et(c){const p=Wl();wt(p,new Py(p,c))}vr.Ma="timingevent";function Ry(c,p){re.call(this,vr.Ma,c),this.size=p}_(Ry,re);function No(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function Do(){this.g=!0}Do.prototype.xa=function(){this.g=!1};function Pk(c,p,g,b,L,V){c.info(function(){if(c.g)if(V)for(var $="",Ee=V.split("&"),Ze=0;Ze<Ee.length;Ze++){var ge=Ee[Ze].split("=");if(1<ge.length){var ut=ge[0];ge=ge[1];var ct=ut.split("_");$=2<=ct.length&&ct[1]=="type"?$+(ut+"="+ge+"&"):$+(ut+"=redacted&")}}else $=null;else $=V;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+p+`
`+g+`
`+$})}function Rk(c,p,g,b,L,V,$){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+$})}function ps(c,p,g,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Dk(c,g)+(b?" "+b:"")})}function Nk(c,p){c.info(function(){return"TIMEOUT: "+p})}Do.prototype.info=function(){};function Dk(c,p){if(!c.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var b=g[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var $=1;$<L.length;$++)L[$]=""}}}}return ad(g)}catch{return p}}var Hl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ny={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hd;function ql(){}_(ql,ld),ql.prototype.g=function(){return new XMLHttpRequest},ql.prototype.i=function(){return{}},hd=new ql;function vi(c,p,g,b){this.j=c,this.i=p,this.l=g,this.R=b||1,this.U=new Ao(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dy}function Dy(){this.i=null,this.g="",this.h=!1}var My={},dd={};function fd(c,p,g){c.L=1,c.v=Yl($n(p)),c.m=g,c.P=!0,Oy(c,null)}function Oy(c,p){c.F=Date.now(),Kl(c),c.A=$n(c.v);var g=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Qy(g.i,"t",b),c.C=0,g=c.j.J,c.h=new Dy,c.g=f_(c.j,g?p:null,!c.m),0<c.O&&(c.M=new kk(f(c.Y,c,c.g),c.O)),p=c.U,g=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Sy[0]=L.toString()),L=Sy);for(var V=0;V<L.length;V++){var $=ln(g,L[V],b||p.handleEvent,!1,p.h||p);if(!$)break;p.g[$.key]=$}p=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Ro(),Pk(c.i,c.u,c.A,c.l,c.R,c.m)}vi.prototype.ca=function(c){c=c.target;const p=this.M;p&&Wn(c)==3?p.j():this.Y(c)},vi.prototype.Y=function(c){try{if(c==this.g)e:{const ct=Wn(this.g);var p=this.g.Ba();const ys=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||n_(this.g)))){this.J||ct!=4||p==7||(p==8||0>=ys?Ro(3):Ro(2)),pd(this);var g=this.g.Z();this.X=g;t:if(Ly(this)){var b=n_(this.g);c="";var L=b.length,V=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wr(this),Mo(this);var $="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(V&&p==L-1)});b.length=0,this.h.g+=c,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,Rk(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Ze=this.g;if((Ee=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Ee)){var ge=Ee;break t}}ge=null}if(g=ge)ps(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gd(this,g);else{this.o=!1,this.s=3,Et(12),wr(this),Mo(this);break e}}if(this.P){g=!0;let un;for(;!this.J&&this.C<$.length;)if(un=Mk(this,$),un==dd){ct==4&&(this.s=4,Et(14),g=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(un==My){this.s=4,Et(15),ps(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else ps(this.i,this.l,un,null),gd(this,un);if(Ly(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||$.length!=0||this.h.h||(this.s=1,Et(16),g=!1),this.o=this.o&&g,!g)ps(this.i,this.l,$,"[Invalid Chunked Response]"),wr(this),Mo(this);else if(0<$.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Ed(ut),ut.M=!0,Et(11))}}else ps(this.i,this.l,$,null),gd(this,$);ct==4&&wr(this),this.o&&!this.J&&(ct==4?u_(this.j,this):(this.o=!1,Kl(this)))}else Xk(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),wr(this),Mo(this)}}}catch{}finally{}};function Ly(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Mk(c,p){var g=c.C,b=p.indexOf(`
`,g);return b==-1?dd:(g=Number(p.substring(g,b)),isNaN(g)?My:(b+=1,b+g>p.length?dd:(p=p.slice(b,b+g),c.C=b+g,p)))}vi.prototype.cancel=function(){this.J=!0,wr(this)};function Kl(c){c.S=Date.now()+c.I,Vy(c,c.I)}function Vy(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=No(f(c.ba,c),p)}function pd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}vi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Nk(this.i,this.A),this.L!=2&&(Ro(),Et(17)),wr(this),this.s=2,Mo(this)):Vy(this,this.S-c)};function Mo(c){c.j.G==0||c.J||u_(c.j,c)}function wr(c){pd(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,xy(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function gd(c,p){try{var g=c.j;if(g.G!=0&&(g.g==c||md(g.h,c))){if(!c.K&&md(g.h,c)&&g.G==3){try{var b=g.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)nu(g),eu(g);else break e;wd(g),Et(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=No(f(g.Za,g),6e3));if(1>=Uy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Tr(g,11)}else if((c.K||g.g==c)&&nu(g),!S(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let ge=L[p];if(g.T=ge[0],ge=ge[1],g.G==2)if(ge[0]=="c"){g.K=ge[1],g.ia=ge[2];const ut=ge[3];ut!=null&&(g.la=ut,g.j.info("VER="+g.la));const ct=ge[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const ys=ge[5];ys!=null&&typeof ys=="number"&&0<ys&&(b=1.5*ys,g.L=b,g.j.info("backChannelRequestTimeoutMs_="+b)),b=g;const un=c.g;if(un){const ru=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ru){var V=b.h;V.g||ru.indexOf("spdy")==-1&&ru.indexOf("quic")==-1&&ru.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(yd(V,V.h),V.h=null))}if(b.D){const Td=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Td&&(b.ya=Td,Se(b.I,b.D,Td))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),b=g;var $=c;if(b.qa=d_(b,b.J?b.ia:null,b.W),$.K){By(b.h,$);var Ee=$,Ze=b.L;Ze&&(Ee.I=Ze),Ee.B&&(pd(Ee),Kl(Ee)),b.g=$}else a_(b);0<g.i.length&&tu(g)}else ge[0]!="stop"&&ge[0]!="close"||Tr(g,7);else g.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Tr(g,7):vd(g):ge[0]!="noop"&&g.l&&g.l.ta(ge),g.v=0)}}Ro(4)}catch{}}var Ok=class{constructor(c,p){this.g=c,this.map=p}};function Fy(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jy(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Uy(c){return c.h?1:c.g?c.g.size:0}function md(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function yd(c,p){c.g?c.g.add(p):c.h=p}function By(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Fy.prototype.cancel=function(){if(this.i=zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function zy(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const g of c.g.values())p=p.concat(g.D);return p}return w(c.i)}function Lk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],g=c.length,b=0;b<g;b++)p.push(c[b]);return p}p=[],g=0;for(b in c)p[g++]=c[b];return p}function Vk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var g=0;g<c;g++)p.push(g);return p}p=[],g=0;for(const b in c)p[g++]=b;return p}}}function $y(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var g=Vk(c),b=Lk(c),L=b.length,V=0;V<L;V++)p.call(void 0,b[V],g&&g[V],c)}var Wy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fk(c,p){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var b=c[g].indexOf("="),L=null;if(0<=b){var V=c[g].substring(0,b);L=c[g].substring(b+1)}else V=c[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Er(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Er){this.h=c.h,Gl(this,c.j),this.o=c.o,this.g=c.g,Ql(this,c.s),this.l=c.l;var p=c.i,g=new Vo;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Hy(this,g),this.m=c.m}else c&&(p=String(c).match(Wy))?(this.h=!1,Gl(this,p[1]||"",!0),this.o=Oo(p[2]||""),this.g=Oo(p[3]||"",!0),Ql(this,p[4]),this.l=Oo(p[5]||"",!0),Hy(this,p[6]||"",!0),this.m=Oo(p[7]||"")):(this.h=!1,this.i=new Vo(null,this.h))}Er.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Lo(p,qy,!0),":");var g=this.g;return(g||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Lo(p,qy,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Lo(g,g.charAt(0)=="/"?Bk:Uk,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Lo(g,$k)),c.join("")};function $n(c){return new Er(c)}function Gl(c,p,g){c.j=g?Oo(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Ql(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Hy(c,p,g){p instanceof Vo?(c.i=p,Wk(c.i,c.h)):(g||(p=Lo(p,zk)),c.i=new Vo(p,c.h))}function Se(c,p,g){c.i.set(p,g)}function Yl(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Oo(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Lo(c,p,g){return typeof c=="string"?(c=encodeURI(c).replace(p,jk),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function jk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var qy=/[#\/\?@]/g,Uk=/[#\?:]/g,Bk=/[#\?]/g,zk=/[#\?@]/g,$k=/#/g;function Vo(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function wi(c){c.g||(c.g=new Map,c.h=0,c.i&&Fk(c.i,function(p,g){c.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Vo.prototype,t.add=function(c,p){wi(this),this.i=null,c=gs(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(p),this.h+=1,this};function Ky(c,p){wi(c),p=gs(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Gy(c,p){return wi(c),p=gs(c,p),c.g.has(p)}t.forEach=function(c,p){wi(this),this.g.forEach(function(g,b){g.forEach(function(L){c.call(p,L,b,this)},this)},this)},t.na=function(){wi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let b=0;b<p.length;b++){const L=c[b];for(let V=0;V<L.length;V++)g.push(p[b])}return g},t.V=function(c){wi(this);let p=[];if(typeof c=="string")Gy(this,c)&&(p=p.concat(this.g.get(gs(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)p=p.concat(c[g])}return p},t.set=function(c,p){return wi(this),this.i=null,c=gs(this,c),Gy(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Qy(c,p,g){Ky(c,p),0<g.length&&(c.i=null,c.g.set(gs(c,p),w(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var b=p[g];const V=encodeURIComponent(String(b)),$=this.V(b);for(b=0;b<$.length;b++){var L=V;$[b]!==""&&(L+="="+encodeURIComponent(String($[b]))),c.push(L)}}return this.i=c.join("&")};function gs(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Wk(c,p){p&&!c.j&&(wi(c),c.i=null,c.g.forEach(function(g,b){var L=b.toLowerCase();b!=L&&(Ky(this,b),Qy(this,L,g))},c)),c.j=p}function Hk(c,p){const g=new Do;if(a.Image){const b=new Image;b.onload=m(Ei,g,"TestLoadImage: loaded",!0,p,b),b.onerror=m(Ei,g,"TestLoadImage: error",!1,p,b),b.onabort=m(Ei,g,"TestLoadImage: abort",!1,p,b),b.ontimeout=m(Ei,g,"TestLoadImage: timeout",!1,p,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function qk(c,p){const g=new Do,b=new AbortController,L=setTimeout(()=>{b.abort(),Ei(g,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(V=>{clearTimeout(L),V.ok?Ei(g,"TestPingServer: ok",!0,p):Ei(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Ei(g,"TestPingServer: error",!1,p)})}function Ei(c,p,g,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(g)}catch{}}function Kk(){this.g=new Ak}function Gk(c,p,g){const b=g||"";try{$y(c,function(L,V){let $=L;u(L)&&($=ad(L)),p.push(b+V+"="+encodeURIComponent($))})}catch(L){throw p.push(b+"type="+encodeURIComponent("_badmap")),L}}function Xl(c){this.l=c.Ub||null,this.j=c.eb||!1}_(Xl,ld),Xl.prototype.g=function(){return new Jl(this.l,this.j)},Xl.prototype.i=function(c){return function(){return c}}({});function Jl(c,p){lt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Jl,lt),t=Jl.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,jo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,jo(this)),this.g&&(this.readyState=3,jo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yy(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yy(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Fo(this):jo(this),this.readyState==3&&Yy(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Fo(this))},t.Qa=function(c){this.g&&(this.response=c,Fo(this))},t.ga=function(){this.g&&Fo(this)};function Fo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,jo(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=p.next();return c.join(`\r
`)};function jo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xy(c){let p="";return N(c,function(g,b){p+=b,p+=":",p+=g,p+=`\r
`}),p}function _d(c,p,g){e:{for(b in g){var b=!1;break e}b=!0}b||(g=Xy(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Se(c,p,g))}function Fe(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Fe,lt);var Qk=/^https?$/i,Yk=["POST","PUT"];t=Fe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,g,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hd.g(),this.v=this.o?by(this.o):by(hd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(V){Jy(this,V);return}if(c=g||"",g=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)g.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const V of b.keys())g.set(V,b.get(V));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Yk,p,void 0))||b||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of g)this.g.setRequestHeader(V,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{t_(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){Jy(this,V)}};function Jy(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Zy(c),Zl(c)}function Zy(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),Zl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zl(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?e_(this):this.bb())},t.bb=function(){e_(this)};function e_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Wn(c)!=4||c.Z()!=2)){if(c.u&&Wn(c)==4)Ty(c.Ea,0,c);else if(wt(c,"readystatechange"),Wn(c)==4){c.h=!1;try{const $=c.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var b;if(b=$===0){var L=String(c.D).match(Wy)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),b=!Qk.test(L?L.toLowerCase():"")}g=b}if(g)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var V=2<Wn(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",Zy(c)}}finally{Zl(c)}}}}function Zl(c,p){if(c.g){t_(c);const g=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||wt(c,"ready");try{g.onreadystatechange=b}catch{}}}function t_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Ck(p)}};function n_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xk(c){const p={};c=(c.g&&2<=Wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(S(c[b]))continue;var g=P(c[b]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}I(p,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uo(c,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||p}function i_(c){this.Aa=0,this.i=[],this.j=new Do,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uo("baseRetryDelayMs",5e3,c),this.cb=Uo("retryDelaySeedMs",1e4,c),this.Wa=Uo("forwardChannelMaxRetries",2,c),this.wa=Uo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Fy(c&&c.concurrentRequestLimit),this.Da=new Kk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=i_.prototype,t.la=8,t.G=1,t.connect=function(c,p,g,b){Et(0),this.W=c,this.H=p||{},g&&b!==void 0&&(this.H.OSID=g,this.H.OAID=b),this.F=this.X,this.I=d_(this,null,this.W),tu(this)};function vd(c){if(r_(c),c.G==3){var p=c.U++,g=$n(c.I);if(Se(g,"SID",c.K),Se(g,"RID",p),Se(g,"TYPE","terminate"),Bo(c,g),p=new vi(c,c.j,p),p.L=2,p.v=Yl($n(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=f_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Kl(p)}h_(c)}function eu(c){c.g&&(Ed(c),c.g.cancel(),c.g=null)}function r_(c){eu(c),c.u&&(a.clearTimeout(c.u),c.u=null),nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tu(c){if(!jy(c.h)&&!c.s){c.s=!0;var p=c.Ga;pe||G(),z||(pe(),z=!0),K.add(p,c),c.B=0}}function Jk(c,p){return Uy(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=No(f(c.Ga,c,p),c_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new vi(this,this.j,c);let V=this.o;if(this.S&&(V?(V=v(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var b=this.i[g];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=o_(this,L,p),g=$n(this.I),Se(g,"RID",c),Se(g,"CVER",22),this.D&&Se(g,"X-HTTP-Session-Id",this.D),Bo(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(Xy(V)))+"&"+p:this.m&&_d(g,this.m,V)),yd(this.h,L),this.Ua&&Se(g,"TYPE","init"),this.P?(Se(g,"$req",p),Se(g,"SID","null"),L.T=!0,fd(L,g,null)):fd(L,g,p),this.G=2}}else this.G==3&&(c?s_(this,c):this.i.length==0||jy(this.h)||s_(this))};function s_(c,p){var g;p?g=p.l:g=c.U++;const b=$n(c.I);Se(b,"SID",c.K),Se(b,"RID",g),Se(b,"AID",c.T),Bo(c,b),c.m&&c.o&&_d(b,c.m,c.o),g=new vi(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),p&&(c.i=p.D.concat(c.i)),p=o_(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),yd(c.h,g),fd(g,b,p)}function Bo(c,p){c.H&&N(c.H,function(g,b){Se(p,b,g)}),c.l&&$y({},function(g,b){Se(p,b,g)})}function o_(c,p,g){g=Math.min(c.i.length,g);var b=c.l?f(c.l.Na,c.l,c):null;e:{var L=c.i;let V=-1;for(;;){const $=["count="+g];V==-1?0<g?(V=L[0].g,$.push("ofs="+V)):V=0:$.push("ofs="+V);let Ee=!0;for(let Ze=0;Ze<g;Ze++){let ge=L[Ze].g;const ut=L[Ze].map;if(ge-=V,0>ge)V=Math.max(0,L[Ze].g-100),Ee=!1;else try{Gk(ut,$,"req"+ge+"_")}catch{b&&b(ut)}}if(Ee){b=$.join("&");break e}}}return c=c.i.splice(0,g),p.D=c,b}function a_(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;pe||G(),z||(pe(),z=!0),K.add(p,c),c.v=0}}function wd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=No(f(c.Fa,c),c_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,l_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=No(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),eu(this),l_(this))};function Ed(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function l_(c){c.g=new vi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=$n(c.qa);Se(p,"RID","rpc"),Se(p,"SID",c.K),Se(p,"AID",c.T),Se(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(p,"TO",c.ja),Se(p,"TYPE","xmlhttp"),Bo(c,p),c.m&&c.o&&_d(p,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Yl($n(p)),g.m=null,g.P=!0,Oy(g,c)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),wd(this),Et(19))};function nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function u_(c,p){var g=null;if(c.g==p){nu(c),Ed(c),c.g=null;var b=2}else if(md(c.h,p))g=p.D,By(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;b=Wl(),wt(b,new Ry(b,g)),tu(c)}else a_(c);else if(L=p.s,L==3||L==0&&0<p.X||!(b==1&&Jk(c,p)||b==2&&wd(c)))switch(g&&0<g.length&&(p=c.h,p.i=p.i.concat(g)),L){case 1:Tr(c,5);break;case 4:Tr(c,10);break;case 3:Tr(c,6);break;default:Tr(c,2)}}}function c_(c,p){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*p}function Tr(c,p){if(c.j.info("Error code "+p),p==2){var g=f(c.fb,c),b=c.Xa;const L=!b;b=new Er(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gl(b,"https"),Yl(b),L?Hk(b.toString(),g):qk(b.toString(),g)}else Et(2);c.G=0,c.l&&c.l.sa(p),h_(c),r_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function h_(c){if(c.G=0,c.ka=[],c.l){const p=zy(c.h);(p.length!=0||c.i.length!=0)&&(T(c.ka,p),T(c.ka,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.ra()}}function d_(c,p,g){var b=g instanceof Er?$n(g):new Er(g);if(b.g!="")p&&(b.g=p+"."+b.g),Ql(b,b.s);else{var L=a.location;b=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new Er(null);b&&Gl(V,b),p&&(V.g=p),L&&Ql(V,L),g&&(V.l=g),b=V}return g=c.D,p=c.ya,g&&p&&Se(b,g,p),Se(b,"VER",c.la),Bo(c,b),b}function f_(c,p,g){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Fe(new Xl({eb:g})):new Fe(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function p_(){}t=p_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function iu(){}iu.prototype.g=function(c,p){return new Ut(c,p)};function Ut(c,p){lt.call(this),this.g=new i_(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!S(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ms(this)}_(Ut,lt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){vd(this.g)},Ut.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=ad(c),c=g);p.i.push(new Ok(p.Ya++,c)),p.G==3&&tu(p)},Ut.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,Ut.aa.N.call(this)};function g_(c){ud.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const g in p){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}_(g_,ud);function m_(){cd.call(this),this.status=1}_(m_,cd);function ms(c){this.g=c}_(ms,p_),ms.prototype.ua=function(){wt(this.g,"a")},ms.prototype.ta=function(c){wt(this.g,new g_(c))},ms.prototype.sa=function(c){wt(this.g,new m_)},ms.prototype.ra=function(){wt(this.g,"b")},iu.prototype.createWebChannel=iu.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,GS=function(){return new iu},KS=function(){return Wl()},qS=vr,Rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hl.NO_ERROR=0,Hl.TIMEOUT=8,Hl.HTTP_ERROR=6,ic=Hl,Ny.COMPLETE="complete",HS=Ny,ky.EventType=Po,Po.OPEN="a",Po.CLOSE="b",Po.ERROR="c",Po.MESSAGE="d",lt.prototype.listen=lt.prototype.K,ca=ky,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,WS=Fe}).apply(typeof Iu<"u"?Iu:typeof self<"u"?self:typeof window<"u"?window:{});const h0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Nh("@firebase/firestore");function Yo(){return Zr.logLevel}function q(t,...e){if(Zr.logLevel<=le.DEBUG){const n=e.map(fm);Zr.debug(`Firestore (${Io}): ${t}`,...n)}}function hi(t,...e){if(Zr.logLevel<=le.ERROR){const n=e.map(fm);Zr.error(`Firestore (${Io}): ${t}`,...n)}}function so(t,...e){if(Zr.logLevel<=le.WARN){const n=e.map(fm);Zr.warn(`Firestore (${Io}): ${t}`,...n)}}function fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: `+t;throw hi(e),new Error(e)}function we(t,e){t||J()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends In{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class OM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LM{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $r,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $r)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(we(typeof i.accessToken=="string"),new QS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new pt(e)}}class VM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new VM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const i=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new jM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=BM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function me(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Qe(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Qe(0,0))}static max(){return new Z(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n,i){n===void 0?n=0:n>e.length&&J(),i===void 0?i=e.length-n:i>e.length-n&&J(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ll.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ll?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends ll{construct(e,n,i){return new ke(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const zM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends ll{construct(e,n,i){return new nt(e,n,i)}static isValidIdentifier(e){return zM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(ke.fromString(e))}static fromName(e){return new Q(ke.fromString(e).popFirst(5))}static empty(){return new Q(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new ke(e.slice()))}}function $M(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new ir(r,Q.empty(),e)}function WM(t){return new ir(t.readTime,t.key,-1)}class ir{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ir(Z.min(),Q.empty(),-1)}static max(){return new ir(Z.max(),Q.empty(),-1)}}function HM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==qM)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,i)=>{n(e)})}static reject(e){return new U((n,i)=>{i(e)})}static waitFor(e){return new U((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=U.resolve(!1);for(const i of e)n=n.next(r=>r?U.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new U((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new U((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function GM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pm.oe=-1;function Lh(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function QM(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Su(this.root,e,this.comparator,!1)}getReverseIterator(){return new Su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Su(this.root,e,this.comparator,!0)}}class Su{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??tt.RED,this.left=r??tt.EMPTY,this.right=s??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new tt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return tt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,i,r,s){return this}insert(e,n,i){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new f0(this.data.getIterator())}getIteratorFrom(e){return new f0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class f0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new st(nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JS("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const YM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(t){if(we(!!t),typeof t=="string"){let e=0;const n=YM.exec(t);if(we(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function es(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mm(t){const e=t.mapValue.fields.__previous_value__;return gm(e)?mm(e):e}function ul(t){const e=rr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class cl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu={mapValue:{}};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gm(t)?4:ZM(t)?9007199254740991:JM(t)?10:11:J()}function Bn(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ul(t).isEqual(ul(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=rr(r.timestampValue),a=rr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return es(r.bytesValue).isEqual(es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ue(r.geoPointValue.latitude)===Ue(s.geoPointValue.latitude)&&Ue(r.geoPointValue.longitude)===Ue(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ue(r.integerValue)===Ue(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ue(r.doubleValue),a=Ue(s.doubleValue);return o===a?Kc(o)===Kc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(d0(o)!==d0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bn(o[l],a[l])))return!1;return!0}(t,e);default:return J()}}function hl(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function ao(t,e){if(t===e)return 0;const n=ts(t),i=ts(e);if(n!==i)return me(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ue(s.integerValue||s.doubleValue),l=Ue(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return p0(t.timestampValue,e.timestampValue);case 4:return p0(ul(t),ul(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(s,o){const a=es(s),l=es(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=me(a[u],l[u]);if(h!==0)return h}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=me(Ue(s.latitude),Ue(o.latitude));return a!==0?a:me(Ue(s.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return g0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=f.value)===null||l===void 0?void 0:l.arrayValue,w=me(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:g0(m,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===xu.mapValue&&o===xu.mapValue)return 0;if(s===xu.mapValue)return 1;if(o===xu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=me(l[d],h[d]);if(f!==0)return f;const m=ao(a[l[d]],u[h[d]]);if(m!==0)return m}return me(l.length,h.length)}(t.mapValue,e.mapValue);default:throw J()}}function p0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=rr(t),i=rr(e),r=me(n.seconds,i.seconds);return r!==0?r:me(n.nanos,i.nanos)}function g0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ao(n[r],i[r]);if(s)return s}return me(n.length,i.length)}function lo(t){return Np(t)}function Np(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=rr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Np(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Np(n.fields[o])}`;return r+"}"}(t.mapValue):J()}function m0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dp(t){return!!t&&"integerValue"in t}function ym(t){return!!t&&"arrayValue"in t}function y0(t){return!!t&&"nullValue"in t}function _0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rc(t){return!!t&&"mapValue"in t}function JM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Aa(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(n)}setAll(e){let n=nt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Aa(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];rc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){cs(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Pt(Aa(this.value))}}function ZS(t){const e=[];return cs(t.fields,(n,i)=>{const r=new nt([n]);if(rc(i)){const s=ZS(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,Z.min(),Z.min(),Z.min(),Pt.empty(),0)}static newFoundDocument(e,n,i,r){return new mt(e,1,n,Z.min(),i,r,0)}static newNoDocument(e,n){return new mt(e,2,n,Z.min(),Z.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,Z.min(),Z.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.position=e,this.inclusive=n}}function v0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(o.referenceValue),n.key):i=ao(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function w0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n="asc"){this.field=e,this.dir=n}}function e2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{}class He extends ex{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new n2(e,n,i):n==="array-contains"?new s2(e,i):n==="in"?new o2(e,i):n==="not-in"?new a2(e,i):n==="array-contains-any"?new l2(e,i):new He(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new i2(e,i):new r2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ao(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends ex{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new En(e,n)}matches(e){return tx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tx(t){return t.op==="and"}function nx(t){return t2(t)&&tx(t)}function t2(t){for(const e of t.filters)if(e instanceof En)return!1;return!0}function Mp(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+lo(t.value);if(nx(t))return t.filters.map(e=>Mp(e)).join(",");{const e=t.filters.map(n=>Mp(n)).join(",");return`${t.op}(${e})`}}function ix(t,e){return t instanceof He?function(i,r){return r instanceof He&&i.op===r.op&&i.field.isEqual(r.field)&&Bn(i.value,r.value)}(t,e):t instanceof En?function(i,r){return r instanceof En&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&ix(o,r.filters[a]),!0):!1}(t,e):void J()}function rx(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(rx).join(" ,")+"}"}(t):"Filter"}class n2 extends He{constructor(e,n,i){super(e,n,i),this.key=Q.fromName(i.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class i2 extends He{constructor(e,n){super(e,"in",n),this.keys=sx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class r2 extends He{constructor(e,n){super(e,"not-in",n),this.keys=sx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class s2 extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ym(n)&&hl(n.arrayValue,this.value)}}class o2 extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hl(this.value.arrayValue,n)}}class a2 extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!hl(this.value.arrayValue,n)}}class l2 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>hl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function E0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new u2(t,e,n,i,r,s,o)}function _m(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Mp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>lo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>lo(i)).join(",")),e.ue=n}return e.ue}function vm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!e2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ix(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!w0(t.startAt,e.startAt)&&w0(t.endAt,e.endAt)}function Op(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function c2(t,e,n,i,r,s,o,a){return new So(t,e,n,i,r,s,o,a)}function wm(t){return new So(t)}function T0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ox(t){return t.collectionGroup!==null}function Pa(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new st(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new dl(s,i))}),n.has(nt.keyField().canonicalString())||e.ce.push(new dl(nt.keyField(),i))}return e.ce}function Ln(t){const e=ee(t);return e.le||(e.le=h2(e,Pa(t))),e.le}function h2(t,e){if(t.limitType==="F")return E0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new dl(r.field,s)});const n=t.endAt?new Gc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Gc(t.startAt.position,t.startAt.inclusive):null;return E0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Lp(t,e){const n=t.filters.concat([e]);return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vp(t,e,n){return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vh(t,e){return vm(Ln(t),Ln(e))&&t.limitType===e.limitType}function ax(t){return`${_m(Ln(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>rx(r)).join(", ")}]`),Lh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>lo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>lo(r)).join(",")),`Target(${i})`}(Ln(t))}; limitType=${t.limitType})`}function Fh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Pa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=v0(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,Pa(i),r)||i.endAt&&!function(o,a,l){const u=v0(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,Pa(i),r))}(t,e)}function d2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lx(t){return(e,n)=>{let i=!1;for(const r of Pa(t)){const s=f2(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function f2(t,e,n){const i=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ao(l,u):J()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return XS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new Ve(Q.comparator);function di(){return p2}const ux=new Ve(Q.comparator);function ha(...t){let e=ux;for(const n of t)e=e.insert(n.key,n);return e}function cx(t){let e=ux;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Lr(){return Ra()}function hx(){return Ra()}function Ra(){return new xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const g2=new Ve(Q.comparator),m2=new st(Q.comparator);function ae(...t){let e=m2;for(const n of t)e=e.add(n);return e}const y2=new st(me);function _2(){return y2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function dx(t){return{integerValue:""+t}}function v2(t,e){return QM(e)?dx(e):Em(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this._=void 0}}function w2(t,e,n){return t instanceof fl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&gm(s)&&(s=mm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof pl?px(t,e):t instanceof gl?gx(t,e):function(r,s){const o=fx(r,s),a=I0(o)+I0(r.Pe);return Dp(o)&&Dp(r.Pe)?dx(a):Em(r.serializer,a)}(t,e)}function E2(t,e,n){return t instanceof pl?px(t,e):t instanceof gl?gx(t,e):n}function fx(t,e){return t instanceof Qc?function(i){return Dp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class fl extends jh{}class pl extends jh{constructor(e){super(),this.elements=e}}function px(t,e){const n=mx(e);for(const i of t.elements)n.some(r=>Bn(r,i))||n.push(i);return{arrayValue:{values:n}}}class gl extends jh{constructor(e){super(),this.elements=e}}function gx(t,e){let n=mx(e);for(const i of t.elements)n=n.filter(r=>!Bn(r,i));return{arrayValue:{values:n}}}class Qc extends jh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function I0(t){return Ue(t.integerValue||t.doubleValue)}function mx(t){return ym(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this.field=e,this.transform=n}}function I2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof pl&&r instanceof pl||i instanceof gl&&r instanceof gl?oo(i.elements,r.elements,Bn):i instanceof Qc&&r instanceof Qc?Bn(i.Pe,r.Pe):i instanceof fl&&r instanceof fl}(t.transform,e.transform)}class S2{constructor(e,n){this.version=e,this.transformResults=n}}class Vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vt}static exists(e){return new Vt(void 0,e)}static updateTime(e){return new Vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uh{}function yx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bh(t.key,Vt.none()):new Ml(t.key,t.data,Vt.none());{const n=t.data,i=Pt.empty();let r=new st(nt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new gr(t.key,i,new Wt(r.toArray()),Vt.none())}}function x2(t,e,n){t instanceof Ml?function(r,s,o){const a=r.value.clone(),l=x0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gr?function(r,s,o){if(!sc(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=x0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(_x(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Na(t,e,n,i){return t instanceof Ml?function(s,o,a,l){if(!sc(s.precondition,o))return a;const u=s.value.clone(),h=b0(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof gr?function(s,o,a,l){if(!sc(s.precondition,o))return a;const u=b0(s.fieldTransforms,l,o),h=o.data;return h.setAll(_x(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return sc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function b2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=fx(i.transform,r||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(i.field,s))}return n||null}function S0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&oo(i,r,(s,o)=>I2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ml extends Uh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class gr extends Uh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _x(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function x0(t,e,n){const i=new Map;we(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,E2(o,a,n[r]))}return i}function b0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,w2(s,o,e))}return i}class Bh extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k2 extends Uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&x2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Na(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Na(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=hx();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=yx(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(n,i)=>S0(n,i))&&oo(this.baseMutations,e.baseMutations,(n,i)=>S0(n,i))}}class Tm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){we(e.mutations.length===i.length);let r=function(){return g2}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Tm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ue;function R2(t){switch(t){default:return J();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function vx(t){if(t===void 0)return hi("GRPC error has no .code"),F.UNKNOWN;switch(t){case $e.OK:return F.OK;case $e.CANCELLED:return F.CANCELLED;case $e.UNKNOWN:return F.UNKNOWN;case $e.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case $e.INTERNAL:return F.INTERNAL;case $e.UNAVAILABLE:return F.UNAVAILABLE;case $e.UNAUTHENTICATED:return F.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case $e.NOT_FOUND:return F.NOT_FOUND;case $e.ALREADY_EXISTS:return F.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return F.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case $e.ABORTED:return F.ABORTED;case $e.OUT_OF_RANGE:return F.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return F.UNIMPLEMENTED;case $e.DATA_LOSS:return F.DATA_LOSS;default:return J()}}(ue=$e||($e={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new zr([4294967295,4294967295],0);function k0(t){const e=N2().encode(t),n=new $S;return n.update(e),new Uint8Array(n.digest())}function C0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zr([n,i],0),new zr([r,s],0)]}class Im{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new da(`Invalid padding: ${n}`);if(i<0)throw new da(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new da(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new da(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(zr.fromNumber(i)));return r.compare(D2)===1&&(r=new zr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=k0(e),[i,r]=C0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Im(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=k0(e),[i,r]=C0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new zh(Z.min(),r,new Ve(me),di(),ae())}}class Ol{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ol(i,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class wx{constructor(e,n){this.targetId=e,this.me=n}}class Ex{constructor(e,n,i=at.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class A0{constructor(){this.fe=0,this.ge=R0(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),i=ae();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:J()}}),new Ol(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=R0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class M2{constructor(e){this.Le=e,this.Be=new Map,this.ke=di(),this.qe=P0(),this.Qe=new Ve(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(Op(s))if(i===0){const o=new Q(s.path);this.Ue(n,o,mt.newNoDocument(o,Z.min()))}else we(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=es(i).toUint8Array()}catch(l){if(l instanceof JS)return so("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Im(o,r,s)}catch(l){return so(l instanceof da?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Op(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ae();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new zh(e,n,this.Qe,this.ke,i);return this.ke=di(),this.qe=P0(),this.Qe=new Ve(me),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new A0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new st(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new A0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function P0(){return new Ve(Q.comparator)}function R0(){return new Ve(Q.comparator)}const O2={asc:"ASCENDING",desc:"DESCENDING"},L2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V2={and:"AND",or:"OR"};class F2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fp(t,e){return t.useProto3Json||Lh(e)?e:{value:e}}function Yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j2(t,e){return Yc(t,e.toTimestamp())}function Vn(t){return we(!!t),Z.fromTimestamp(function(n){const i=rr(n);return new Qe(i.seconds,i.nanos)}(t))}function Sm(t,e){return jp(t,e).canonicalString()}function jp(t,e){const n=function(r){return new ke(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ix(t){const e=ke.fromString(t);return we(Cx(e)),e}function Up(t,e){return Sm(t.databaseId,e.path)}function rf(t,e){const n=Ix(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(xx(n))}function Sx(t,e){return Sm(t.databaseId,e)}function U2(t){const e=Ix(t);return e.length===4?ke.emptyPath():xx(e)}function Bp(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xx(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function N0(t,e,n){return{name:Up(t,e),fields:n.value.mapValue.fields}}function B2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(we(h===void 0||typeof h=="string"),at.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?F.UNKNOWN:vx(u.code);return new W(h,u.message||"")}(o);n=new Ex(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=rf(t,i.document.name),s=Vn(i.document.updateTime),o=i.document.createTime?Vn(i.document.createTime):Z.min(),a=new Pt({mapValue:{fields:i.document.fields}}),l=mt.newFoundDocument(r,s,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new oc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=rf(t,i.document),s=i.readTime?Vn(i.readTime):Z.min(),o=mt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new oc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=rf(t,i.document),s=i.removedTargetIds||[];n=new oc([],s,r,null)}else{if(!("filter"in e))return J();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new P2(r,s),a=i.targetId;n=new wx(a,o)}}return n}function z2(t,e){let n;if(e instanceof Ml)n={update:N0(t,e.key,e.value)};else if(e instanceof Bh)n={delete:Up(t,e.key)};else if(e instanceof gr)n={update:N0(t,e.key,e.data),updateMask:X2(e.fieldMask)};else{if(!(e instanceof k2))return J();n={verify:Up(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof fl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof pl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof gl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw J()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:j2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function $2(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Vn(r.updateTime):Vn(s);return o.isEqual(Z.min())&&(o=Vn(s)),new S2(o,r.transformResults||[])}(n,e))):[]}function W2(t,e){return{documents:[Sx(t,e.path)]}}function H2(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Sx(t,r);const s=function(u){if(u.length!==0)return kx(En.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:Ss(f.field),direction:G2(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Fp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function q2(t){let e=U2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){we(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=bx(d);return f instanceof En&&nx(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(_){return new dl(xs(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Lh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Gc(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new Gc(m,f)}(n.endAt)),c2(e,r,o,s,a,"F",l,u)}function K2(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=xs(n.unaryFilter.field);return He.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=xs(n.unaryFilter.field);return He.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xs(n.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xs(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return He.create(xs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(i=>bx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function G2(t){return O2[t]}function Q2(t){return L2[t]}function Y2(t){return V2[t]}function Ss(t){return{fieldPath:t.canonicalString()}}function xs(t){return nt.fromServerFormat(t.fieldPath)}function kx(t){return t instanceof He?function(n){if(n.op==="=="){if(_0(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NAN"}};if(y0(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_0(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NAN"}};if(y0(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(n.field),op:Q2(n.op),value:n.value}}}(t):t instanceof En?function(n){const i=n.getFilters().map(r=>kx(r));return i.length===1?i[0]:{compositeFilter:{op:Y2(n.op),filters:i}}}(t):J()}function X2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Cx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,i,r,s=Z.min(),o=Z.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.ct=e}}function Z2(t){const e=q2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.un=new tO}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ir.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ir.min())}updateCollectionGroup(e,n,i){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class tO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new st(ke.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new st(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new uo(0)}static kn(){return new uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.changes=new xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Na(i.mutation,r,Wt.empty(),Qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ae()){const r=Lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=ha();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Lr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ae()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=di();const o=Ra(),a=function(){return Ra()}();return n.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof gr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Na(h.mutation,u,h.mutation.getFieldMask(),Qe.now())):o.set(u.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new iO(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Ra();let r=new Ve((o,a)=>o-a),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=i.get(l)||Wt.empty();h=a.applyToLocalView(u,h),i.set(l,h);const d=(r.get(a.batchId)||ae()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=hx();h.forEach(f=>{if(!s.has(f)){const m=yx(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ox(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):U.resolve(Lr());let a=-1,l=s;return o.next(u=>U.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ae())).next(h=>({batchId:a,changes:cx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(i=>{let r=ha();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const u=function(d,f){return new So(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,mt.newInvalidDocument(h)))});let a=ha();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Na(h.mutation,u,Wt.empty(),Qe.now()),Fh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Vn(r.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Z2(r.bundledQuery),readTime:Vn(r.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.overlays=new Ve(Q.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Lr();return U.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),U.resolve()}getOverlaysForCollection(e,n,i){const r=Lr(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ve((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=Lr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Lr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return U.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new A2(n,i));let s=this.Ir.get(n);s===void 0&&(s=ae(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.Tr=new st(Ye.Er),this.dr=new st(Ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ye(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Ye(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Q(new ke([])),i=new Ye(n,e),r=new Ye(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new ke([])),i=new Ye(n,e),r=new Ye(n,e+1);let s=ae();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ye(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ye{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new st(Ye.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new C2(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ye(n,0),r=new Ye(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new st(me);return n.forEach(r=>{const s=new Ye(r,0),o=new Ye(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),U.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const o=new Ye(new Q(s),0);let a=new st(me);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return U.forEach(n.mutations,r=>{const s=new Ye(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Ye(n,0),r=this.br.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.Mr=e,this.docs=function(){return new Ve(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let i=di();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():mt.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=di();const o=n.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||HM(WM(h),i)<=0||(r.has(h.key)||Fh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,i,r){J()}Or(e,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new cO(this)}getSize(e){return U.resolve(this.size)}}class cO extends nO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.persistence=e,this.Nr=new xo(n=>_m(n),vm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xm,this.targetCount=0,this.kr=uo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new uo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return U.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),U.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return U.resolve(i)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new pm(0),this.Kr=!1,this.Kr=!0,this.$r=new aO,this.referenceDelegate=e(this),this.Ur=new hO(this),this.indexManager=new eO,this.remoteDocumentCache=function(r){return new uO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new J2(n),this.Gr=new sO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new lO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){q("MemoryPersistence","Starting transaction:",e);const r=new fO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class fO extends KM{constructor(e){super(),this.currentSequenceNumber=e}}class bm{constructor(e){this.persistence=e,this.Jr=new xm,this.Yr=null}static Zr(e){return new bm(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),U.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,i=>{const r=Q.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ae(),r=ae();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new km(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return GP()?8:GM(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new pO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Yo()<=le.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Yo()<=le.DEBUG&&q("QueryEngine","Query:",Is(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Yo()<=le.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):U.resolve())}Yi(e,n){if(T0(n))return U.resolve(null);let i=Ln(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Vp(n,null,"F"),i=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ae(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Vp(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return T0(n)||r.isEqual(Z.min())?U.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?U.resolve(null):(Yo()<=le.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Is(n)),this.rs(e,o,n,$M(r,-1)).next(a=>a))})}ts(e,n){let i=new st(lx(e));return n.forEach((r,s)=>{Fh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return Yo()<=le.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Is(n)),this.Ji.getDocumentsMatchingQuery(e,n,ir.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Ve(me),this._s=new xo(s=>_m(s),vm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function yO(t,e,n,i){return new mO(t,e,n,i)}async function Ax(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ae();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function _O(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let m=U.resolve();return f.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(w=>{const T=u.docVersions.get(_);we(T!==null),w.version.compareTo(T)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ae();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Px(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vO(t,e){const n=ee(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(at.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(w,T,E){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=di(),u=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(wO(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!i.isEqual(Z.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function wO(t,e,n){let i=ae(),r=ae();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=di();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function EO(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function TO(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Fi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function zp(t,e,n){const i=ee(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Dl(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function D0(t,e,n){const i=ee(t);let r=Z.min(),s=ae();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=ee(l),f=d._s.get(h);return f!==void 0?U.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(i,o,Ln(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:Z.min(),n?s:ae())).next(a=>(IO(i,d2(e),a),{documents:a,Ts:s})))}function IO(t,e,n){let i=t.us.get(e)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class M0{constructor(){this.activeTargetIds=_2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SO{constructor(){this.so=new M0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new M0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu=null;function sf(){return bu===null?bu=function(){return 268435456+Math.round(2147483648*Math.random())}():bu++,"0x"+bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class CO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=sf(),l=this.xo(n,i.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(h=>(q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw so("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=bO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=sf();return new Promise((o,a)=>{const l=new WS;l.setWithCredentials(!0),l.listenOnce(HS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ic.NO_ERROR:const h=l.getResponseJson();q(ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ic.TIMEOUT:q(ft,`RPC '${e}' ${s} timed out`),a(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:const d=l.getStatus();if(q(ft,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const _=function(T){const E=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(m.status);a(new W(_,m.message))}else a(new W(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(F.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{q(ft,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);q(ft,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=sf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GS(),a=KS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");q(ft,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const _=new kO({Io:T=>{m?q(ft,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(f||(q(ft,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),q(ft,`RPC '${e}' stream ${r} sending:`,T),d.send(T))},To:()=>d.close()}),w=(T,E,S)=>{T.listen(E,x=>{try{S(x)}catch(R){setTimeout(()=>{throw R},0)}})};return w(d,ca.EventType.OPEN,()=>{m||(q(ft,`RPC '${e}' stream ${r} transport opened.`),_.yo())}),w(d,ca.EventType.CLOSE,()=>{m||(m=!0,q(ft,`RPC '${e}' stream ${r} transport closed`),_.So())}),w(d,ca.EventType.ERROR,T=>{m||(m=!0,so(ft,`RPC '${e}' stream ${r} transport errored:`,T),_.So(new W(F.UNAVAILABLE,"The operation could not be completed")))}),w(d,ca.EventType.MESSAGE,T=>{var E;if(!m){const S=T.data[0];we(!!S);const x=S,R=x.error||((E=x[0])===null||E===void 0?void 0:E.error);if(R){q(ft,`RPC '${e}' stream ${r} received error:`,R);const M=R.status;let N=function(k){const C=$e[k];if(C!==void 0)return vx(C)}(M),I=R.message;N===void 0&&(N=F.INTERNAL,I="Unknown error status: "+M+" with message "+R.message),m=!0,_.So(new W(N,I)),d.close()}else q(ft,`RPC '${e}' stream ${r} received:`,S),_.bo(S)}}),w(a,qS.STAT_EVENT,T=>{T.stat===Rp.PROXY?q(ft,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===Rp.NOPROXY&&q(ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){return new F2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Rx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(hi(n.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new W(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AO extends Nx{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=B2(this.serializer,e),i=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Vn(o.readTime):Z.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Bp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Op(l)?{documents:W2(s,l)}:{query:H2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Tx(s,o.resumeToken);const u=Fp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=Yc(s,o.snapshotVersion.toTimestamp());const u=Fp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=K2(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Bp(this.serializer),n.removeTarget=e,this.a_(n)}}class PO extends Nx{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$2(e.writeResults,e.commitTime),i=Vn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Bp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>z2(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,jp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(F.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,jp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class NO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hi(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{hs(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ee(l);u.L_.add(4),await Ll(u),u.q_.set("Unknown"),u.L_.delete(4),await Wh(u)}(this))})}),this.q_=new NO(i,r)}}async function Wh(t){if(hs(t))for(const e of t.B_)await e(!0)}async function Ll(t){for(const e of t.B_)await e(!1)}function Dx(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Rm(n)?Pm(n):bo(n).r_()&&Am(n,e))}function Cm(t,e){const n=ee(t),i=bo(n);n.N_.delete(e),i.r_()&&Mx(n,e),n.N_.size===0&&(i.r_()?i.o_():hs(n)&&n.q_.set("Unknown"))}function Am(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).A_(e)}function Mx(t,e){t.Q_.xe(e),bo(t).R_(e)}function Pm(t){t.Q_=new M2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.q_.v_()}function Rm(t){return hs(t)&&!bo(t).n_()&&t.N_.size>0}function hs(t){return ee(t).L_.size===0}function Ox(t){t.Q_=void 0}async function MO(t){t.q_.set("Online")}async function OO(t){t.N_.forEach((e,n)=>{Am(t,e)})}async function LO(t,e){Ox(t),Rm(t)?(t.q_.M_(e),Pm(t)):t.q_.set("Unknown")}async function VO(t,e,n){if(t.q_.set("Online"),e instanceof Ex&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xc(t,i)}else if(e instanceof oc?t.Q_.Ke(e):e instanceof wx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const i=await Px(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),Mx(s,l);const d=new Fi(h.target,l,u,h.sequenceNumber);Am(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){q("RemoteStore","Failed to raise snapshot:",i),await Xc(t,i)}}async function Xc(t,e,n){if(!Dl(e))throw e;t.L_.add(1),await Ll(t),t.q_.set("Offline"),n||(n=()=>Px(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Wh(t)})}function Lx(t,e){return e().catch(n=>Xc(t,n,e))}async function Hh(t){const e=ee(t),n=sr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;FO(e);)try{const r=await EO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,jO(e,r)}catch(r){await Xc(e,r)}Vx(e)&&Fx(e)}function FO(t){return hs(t)&&t.O_.length<10}function jO(t,e){t.O_.push(e);const n=sr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Vx(t){return hs(t)&&!sr(t).n_()&&t.O_.length>0}function Fx(t){sr(t).start()}async function UO(t){sr(t).p_()}async function BO(t){const e=sr(t);for(const n of t.O_)e.m_(n.mutations)}async function zO(t,e,n){const i=t.O_.shift(),r=Tm.from(i,e,n);await Lx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Hh(t)}async function $O(t,e){e&&sr(t).V_&&await async function(i,r){if(function(o){return R2(o)&&o!==F.ABORTED}(r.code)){const s=i.O_.shift();sr(i).s_(),await Lx(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Hh(i)}}(t,e),Vx(t)&&Fx(t)}async function L0(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const i=hs(n);n.L_.add(3),await Ll(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Wh(n)}async function WO(t,e){const n=ee(t);e?(n.L_.delete(2),await Wh(n)):e||(n.L_.add(2),await Ll(n),n.q_.set("Unknown"))}function bo(t){return t.K_||(t.K_=function(n,i,r){const s=ee(n);return s.w_(),new AO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:MO.bind(null,t),Ro:OO.bind(null,t),mo:LO.bind(null,t),d_:VO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Rm(t)?Pm(t):t.q_.set("Unknown")):(await t.K_.stop(),Ox(t))})),t.K_}function sr(t){return t.U_||(t.U_=function(n,i,r){const s=ee(n);return s.w_(),new PO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UO.bind(null,t),mo:$O.bind(null,t),f_:BO.bind(null,t),g_:zO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Hh(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Nm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(t,e){if(hi("AsyncQueue",`${e}: ${t}`),Dl(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=ha(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Gs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Gs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.W_=new Ve(Q.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class co{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new co(e,n,Gs.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class qO{constructor(){this.queries=F0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ee(n),s=r.queries;r.queries=F0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function F0(){return new xo(t=>ax(t),Vh)}async function KO(t,e){const n=ee(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new HO,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Dm(o,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Mm(n)}async function GO(t,e){const n=ee(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function QO(t,e){const n=ee(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Mm(n)}function YO(t,e,n){const i=ee(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Mm(t){t.Y_.forEach(e=>{e.next()})}var $p,j0;(j0=$p||($p={})).ea="default",j0.Cache="cache";class XO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.key=e}}class Ux{constructor(e){this.key=e}}class JO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=lx(e),this.Ra=new Gs(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new V0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=Fh(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;f&&m?f.data.isEqual(m.data)?_!==w&&(i.track({type:3,doc:m}),T=!0):this.ga(f,m)||(i.track({type:2,doc:m}),T=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),T=!0):f&&!m&&(i.track({type:1,doc:f}),T=!0,(l||u)&&(a=!0)),T&&(m?(o=o.add(m),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,_){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return w(m)-w(_)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new co(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new V0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Ux(i))}),this.da.forEach(i=>{e.has(i)||n.push(new jx(i))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return co.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class eL{constructor(e){this.key=e,this.va=!1}}class tL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xo(a=>ax(a),Vh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(Q.comparator),this.Na=new Map,this.La=new xm,this.Ba={},this.ka=new Map,this.qa=uo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nL(t,e,n=!0){const i=qx(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await Bx(i,e,n,!0),r}async function iL(t,e){const n=qx(t);await Bx(n,e,!0,!1)}async function Bx(t,e,n,i){const r=await TO(t.localStore,Ln(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await rL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Dx(t.remoteStore,r),a}async function rL(t,e,n,i,r){t.Ka=(d,f,m)=>async function(w,T,E,S){let x=T.view.ma(E);x.ns&&(x=await D0(w.localStore,T.query,!1).then(({documents:I})=>T.view.ma(I,x)));const R=S&&S.targetChanges.get(T.targetId),M=S&&S.targetMismatches.get(T.targetId)!=null,N=T.view.applyChanges(x,w.isPrimaryClient,R,M);return B0(w,T.targetId,N.wa),N.snapshot}(t,d,f,m);const s=await D0(t.localStore,e,!0),o=new JO(e,s.Ts),a=o.ma(s.documents),l=Ol.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);B0(t,n,u.wa);const h=new ZO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function sL(t,e,n){const i=ee(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Vh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await zp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Cm(i.remoteStore,r.targetId),Wp(i,r.targetId)}).catch(Nl)):(Wp(i,r.targetId),await zp(i.localStore,r.targetId,!0))}async function oL(t,e){const n=ee(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Cm(n.remoteStore,i.targetId))}async function aL(t,e,n){const i=pL(t);try{const r=await function(o,a){const l=ee(o),u=Qe.now(),h=a.reduce((m,_)=>m.add(_.key),ae());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=di(),w=ae();return l.cs.getEntries(m,h).next(T=>{_=T,_.forEach((E,S)=>{S.isValidDocument()||(w=w.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(T=>{d=T;const E=[];for(const S of a){const x=b2(S,d.get(S.key).overlayedDocument);x!=null&&E.push(new gr(S.key,x,ZS(x.value.mapValue),Vt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,E,a)}).next(T=>{f=T;const E=T.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(m,T.batchId,E)})}).then(()=>({batchId:f.batchId,changes:cx(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Ve(me)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await Vl(i,r.changes),await Hh(i.remoteStore)}catch(r){const s=Dm(r,"Failed to persist write");n.reject(s)}}async function zx(t,e){const n=ee(t);try{const i=await vO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(we(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?we(o.va):r.removedDocuments.size>0&&(we(o.va),o.va=!1))}),await Vl(n,i,e)}catch(i){await Nl(i)}}function U0(t,e,n){const i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&Mm(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lL(t,e,n){const i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Ve(Q.comparator);o=o.insert(s,mt.newNoDocument(s,Z.min()));const a=ae().add(s),l=new zh(Z.min(),new Map,new Ve(me),o,a);await zx(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Om(i)}else await zp(i.localStore,e,!1).then(()=>Wp(i,e,n)).catch(Nl)}async function uL(t,e){const n=ee(t),i=e.batch.batchId;try{const r=await _O(n.localStore,e);Wx(n,i,null),$x(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Vl(n,r)}catch(r){await Nl(r)}}async function cL(t,e,n){const i=ee(t);try{const r=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(we(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);Wx(i,e,n),$x(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Vl(i,r)}catch(r){await Nl(r)}}function $x(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Wx(t,e,n){const i=ee(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||Hx(t,i)})}function Hx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Cm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Om(t))}function B0(t,e,n){for(const i of n)i instanceof jx?(t.La.addReference(i.key,e),hL(t,i)):i instanceof Ux?(q("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Hx(t,i.key)):J()}function hL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(i),Om(t))}function Om(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(ke.fromString(e)),i=t.qa.next();t.Na.set(i,new eL(n)),t.Oa=t.Oa.insert(n,i),Dx(t.remoteStore,new Fi(Ln(wm(n.path)),i,"TargetPurposeLimboResolution",pm.oe))}}async function Vl(t,e,n){const i=ee(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){r.push(u);const d=km.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(u,f=>U.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>U.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Dl(d))throw d;q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),_=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(f,w)}}}(i.localStore,s))}async function dL(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const i=await Ax(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vl(n,i.hs)}}function fL(t,e){const n=ee(t),i=n.Na.get(e);if(i&&i.va)return ae().add(i.key);{let r=ae();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function qx(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lL.bind(null,e),e.Ca.d_=QO.bind(null,e.eventManager),e.Ca.$a=YO.bind(null,e.eventManager),e}function pL(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cL.bind(null,e),e}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return yO(this.persistence,new gO,e.initialUser,this.serializer)}Ga(e){return new dO(bm.Zr,this.serializer)}Wa(e){return new SO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class Hp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>U0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dL.bind(null,this.syncEngine),await WO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qO}()}createDatastore(e){const n=$h(e.databaseInfo.databaseId),i=function(s){return new CO(s)}(e.databaseInfo);return function(s,o,a,l){return new RO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new DO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>U0(this.syncEngine,n,0),function(){return O0.D()?new O0:new xO}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,h){const d=new tL(r,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ee(r);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ll(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hp.provider={build:()=>new Hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=pt.UNAUTHENTICATED,this.clientId=YS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Dm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function af(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Ax(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function z0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yL(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>L0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>L0(e.remoteStore,r)),t._onlineComponents=e}async function yL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await af(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===F.FAILED_PRECONDITION||r.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),await af(t,new Jc)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await af(t,new Jc);return t._offlineComponents}async function Kx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await z0(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await z0(t,new Hp))),t._onlineComponents}function _L(t){return Kx(t).then(e=>e.syncEngine)}async function $0(t){const e=await Kx(t),n=e.eventManager;return n.onListen=nL.bind(null,e.syncEngine),n.onUnlisten=sL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vL(t,e,n,i){if(e===!0&&i===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H0(t){if(!Q.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q0(t){if(Q.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qh(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new MM;switch(i.type){case"firstParty":return new FM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=W0.get(n);i&&(q("ComponentProvider","Removing Datastore"),W0.delete(n),i.terminate())}(this),Promise.resolve()}}function wL(t,e,n,i={}){var r;const s=(t=Fn(t,Kh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=pt.MOCK_USER;else{a=zP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(u)}t._authCredentials=new OM(new QS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class xt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Zi extends ds{constructor(e,n,i){super(e,n,wm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Q(e))}withConverter(e){return new Zi(this.firestore,e,this._path)}}function Lm(t,e,...n){if(t=Re(t),Qx("collection","path",e),t instanceof Kh){const i=ke.fromString(e,...n);return q0(i),new Zi(t,null,i)}{if(!(t instanceof xt||t instanceof Zi))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ke.fromString(e,...n));return q0(i),new Zi(t.firestore,null,i)}}function or(t,e,...n){if(t=Re(t),arguments.length===1&&(e=YS.newId()),Qx("doc","path",e),t instanceof Kh){const i=ke.fromString(e,...n);return H0(i),new xt(t,null,new Q(i))}{if(!(t instanceof xt||t instanceof Zi))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ke.fromString(e,...n));return H0(i),new xt(t.firestore,t instanceof Zi?t.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Rx(this,"async_queue_retry"),this.Vu=()=>{const i=of();i&&q("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=of();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new $r;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Dl(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw hi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Nm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Q0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ns extends Kh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new G0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G0(e),this._firestoreClient=void 0,await e}}}function EL(t,e){const n=typeof t=="object"?t:sS(),i=typeof t=="string"?t:"(default)",r=kl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=UP("firestore");s&&wL(r,...s)}return r}function Vm(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TL(t),t._firestoreClient}function TL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,h){return new XM(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Gx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new mL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ho(at.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ho(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=/^__.*__$/;class SL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ml(e,this.data,n,this.fieldTransforms)}}class Yx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Xx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Um{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Xx(this.Cu)&&IL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||$h(e)}Qu(e,n,i,r=!1){return new Um({Cu:e,methodName:n,qu:i,path:nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qh(t){const e=t._freezeSettings(),n=$h(t._databaseId);return new xL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jx(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);zm("Data must be an object, but it was:",o,i);const a=tb(i,o);let l,u;if(s.merge)l=new Wt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=qp(e,d,n);if(!o.contains(f))throw new W(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ib(h,f)||h.push(f)}l=new Wt(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new SL(new Pt(a),l,u)}class Yh extends Gh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yh}}class Bm extends Gh{_toFieldTransform(e){return new T2(e.path,new fl)}isEqual(e){return e instanceof Bm}}function Zx(t,e,n,i){const r=t.Qu(1,e,n);zm("Data must be an object, but it was:",r,i);const s=[],o=Pt.empty();cs(i,(l,u)=>{const h=$m(e,l,n);u=Re(u);const d=r.Nu(h);if(u instanceof Yh)s.push(h);else{const f=jl(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Wt(s);return new Yx(o,a,r.fieldTransforms)}function eb(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[qp(e,i,n)],l=[r];if(s.length%2!=0)throw new W(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(qp(e,s[f])),l.push(s[f+1]);const u=[],h=Pt.empty();for(let f=a.length-1;f>=0;--f)if(!ib(u,a[f])){const m=a[f];let _=l[f];_=Re(_);const w=o.Nu(m);if(_ instanceof Yh)u.push(m);else{const T=jl(_,w);T!=null&&(u.push(m),h.set(m,T))}}const d=new Wt(u);return new Yx(h,d,o.fieldTransforms)}function bL(t,e,n,i=!1){return jl(n,t.Qu(i?4:3,e))}function jl(t,e){if(nb(t=Re(t)))return zm("Unsupported field value:",e,t),tb(t,e);if(t instanceof Gh)return function(i,r){if(!Xx(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=jl(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Re(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return v2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Qe.fromDate(i);return{timestampValue:Yc(r.serializer,s)}}if(i instanceof Qe){const s=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yc(r.serializer,s)}}if(i instanceof Fm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ho)return{bytesValue:Tx(r.serializer,i._byteString)};if(i instanceof xt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Sm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof jm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Em(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${qh(i)}`)}(t,e)}function tb(t,e){const n={};return XS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(t,(i,r)=>{const s=jl(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function nb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Fm||t instanceof ho||t instanceof xt||t instanceof Gh||t instanceof jm)}function zm(t,e,n){if(!nb(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=qh(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function qp(t,e,n){if((e=Re(e))instanceof Fl)return e._internalPath;if(typeof e=="string")return $m(t,e);throw Zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const kL=new RegExp("[~\\*/\\[\\]]");function $m(t,e,n){if(e.search(kL)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fl(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new W(F.INVALID_ARGUMENT,a+t+l)}function ib(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CL extends rb{data(){return super.data()}}function Wm(t,e){return typeof e=="string"?$m(t,e):e instanceof Fl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hm{}class sb extends Hm{}function PL(t,e,...n){let i=[];e instanceof Hm&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof Km).length,a=s.filter(l=>l instanceof qm).length;if(o>1||o>0&&a>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class qm extends sb{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new qm(e,n,i)}_apply(e){const n=this._parse(e);return ob(e._query,n),new ds(e.firestore,e.converter,Lp(e._query,n))}_parse(e){const n=Qh(e.firestore);return function(s,o,a,l,u,h,d){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){X0(d,h);const m=[];for(const _ of d)m.push(Y0(l,s,_));f={arrayValue:{values:m}}}else f=Y0(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||X0(d,h),f=bL(a,o,d,h==="in"||h==="not-in");return He.create(u,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Km extends Hm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Km(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)ob(o,l),o=Lp(o,l)}(e._query,n),new ds(e.firestore,e.converter,Lp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gm extends sb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gm(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dl(s,o)}(e._query,this._field,this._direction);return new ds(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new So(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function RL(t,e="asc"){const n=e,i=Wm("orderBy",t);return Gm._create(i,n)}function Y0(t,e,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ox(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ke.fromString(n));if(!Q.isDocumentKey(i))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return m0(t,new Q(i))}if(n instanceof xt)return m0(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(n)}.`)}function X0(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ob(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NL{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return cs(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ue(o.doubleValue));return new jm(s)}convertGeoPoint(e){return new Fm(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=mm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ul(e));default:return null}}convertTimestamp(e){const n=rr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ke.fromString(e);we(Cx(i));const r=new cl(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||hi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lb extends rb{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Wm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class ac extends lb{data(e={}){return super.data(e)}}class DL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new fa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ac(this._firestore,this._userDataWriter,i.key,i,new fa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new ac(r._firestore,r._userDataWriter,a.doc.key,a.doc,new fa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ac(r._firestore,r._userDataWriter,a.doc.key,a.doc,new fa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ML(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ML(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}class ub extends NL{constructor(e){super(),this.firestore=e}convertBytes(e){return new ho(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function cb(t,e,n){t=Fn(t,xt);const i=Fn(t.firestore,ns),r=ab(t.converter,e,n);return Xh(i,[Jx(Qh(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Vt.none())])}function Qm(t,e,n,...i){t=Fn(t,xt);const r=Fn(t.firestore,ns),s=Qh(r);let o;return o=typeof(e=Re(e))=="string"||e instanceof Fl?eb(s,"updateDoc",t._key,e,n,i):Zx(s,"updateDoc",t._key,e),Xh(r,[o.toMutation(t._key,Vt.exists(!0))])}function OL(t){return Xh(Fn(t.firestore,ns),[new Bh(t._key,Vt.none())])}function Ym(t,...e){var n,i,r;t=Re(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Q0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Q0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,u,h;if(t instanceof xt)u=Fn(t.firestore,ns),h=wm(t._key.path),l={next:d=>{e[o]&&e[o](LL(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Fn(t,ds);u=Fn(d.firestore,ns),h=d._query;const f=new ub(u);l={next:m=>{e[o]&&e[o](new DL(u,f,d,m))},error:e[o+1],complete:e[o+2]},AL(t._query)}return function(f,m,_,w){const T=new gL(w),E=new XO(m,T,_);return f.asyncQueue.enqueueAndForget(async()=>KO(await $0(f),E)),()=>{T.Za(),f.asyncQueue.enqueueAndForget(async()=>GO(await $0(f),E))}}(Vm(u),h,a,l)}function Xh(t,e){return function(i,r){const s=new $r;return i.asyncQueue.enqueueAndForget(async()=>aL(await _L(i),r,s)),s.promise}(Vm(t),e)}function LL(t,e,n){const i=n.docs.get(e._key),r=new ub(t);return new lb(t,r,e._key,i,new fa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qh(e)}set(e,n,i){this._verifyNotCommitted();const r=lf(e,this._firestore),s=ab(r.converter,n,i),o=Jx(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Vt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=lf(e,this._firestore);let o;return o=typeof(n=Re(n))=="string"||n instanceof Fl?eb(this._dataReader,"WriteBatch.update",s._key,n,i,r):Zx(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=lf(e,this._firestore);return this._mutations=this._mutations.concat(new Bh(n._key,Vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lf(t,e){if((t=Re(t)).firestore!==e)throw new W(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Wr(){return new Bm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){return Vm(t=Fn(t,ns)),new VL(t,e=>Xh(t,e))}(function(e,n=!0){(function(r){Io=r})(To),Un(new vn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new ns(new LM(i.getProvider("auth-internal")),new UM(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),tn(h0,"4.7.3",e),tn(h0,"4.7.3","esm2017")})();const hb="@firebase/installations",Xm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=1e4,fb=`w:${Xm}`,pb="FIS_v2",jL="https://firebaseinstallations.googleapis.com/v1",UL=60*60*1e3,BL="installations",zL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},is=new ls(BL,zL,$L);function gb(t){return t instanceof In&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb({projectId:t}){return`${jL}/projects/${t}/installations`}function yb(t){return{token:t.token,requestStatus:2,expiresIn:HL(t.expiresIn),creationTime:Date.now()}}async function _b(t,e){const i=(await e.json()).error;return is.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function vb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function WL(t,{refreshToken:e}){const n=vb(t);return n.append("Authorization",qL(e)),n}async function wb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function HL(t){return Number(t.replace("s","000"))}function qL(t){return`${pb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=mb(t),r=vb(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:pb,appId:t.appId,sdkVersion:fb},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await wb(()=>fetch(i,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:yb(u.authToken)}}else throw await _b("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=/^[cdef][\w-]{21}$/,Kp="";function YL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=XL(t);return QL.test(n)?n:Kp}catch{return Kp}}function XL(t){return GL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new Map;function Ib(t,e){const n=Jh(t);Sb(n,e),JL(n,e)}function Sb(t,e){const n=Tb.get(t);if(n)for(const i of n)i(e)}function JL(t,e){const n=ZL();n&&n.postMessage({key:t,fid:e}),eV()}let Vr=null;function ZL(){return!Vr&&"BroadcastChannel"in self&&(Vr=new BroadcastChannel("[Firebase] FID Change"),Vr.onmessage=t=>{Sb(t.data.key,t.data.fid)}),Vr}function eV(){Tb.size===0&&Vr&&(Vr.close(),Vr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="firebase-installations-database",nV=1,rs="firebase-installations-store";let uf=null;function Jm(){return uf||(uf=iS(tV,nV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(rs)}}})),uf}async function eh(t,e){const n=Jh(t),r=(await Jm()).transaction(rs,"readwrite"),s=r.objectStore(rs),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&Ib(t,e.fid),e}async function xb(t){const e=Jh(t),i=(await Jm()).transaction(rs,"readwrite");await i.objectStore(rs).delete(e),await i.done}async function Zh(t,e){const n=Jh(t),r=(await Jm()).transaction(rs,"readwrite"),s=r.objectStore(rs),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&Ib(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zm(t){let e;const n=await Zh(t.appConfig,i=>{const r=iV(i),s=rV(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Kp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function iV(t){const e=t||{fid:YL(),registrationStatus:0};return bb(e)}function rV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(is.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=sV(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:oV(t)}:{installationEntry:e}}async function sV(t,e){try{const n=await KL(t,e);return eh(t.appConfig,n)}catch(n){throw gb(n)&&n.customData.serverCode===409?await xb(t.appConfig):await eh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function oV(t){let e=await J0(t.appConfig);for(;e.registrationStatus===1;)await Eb(100),e=await J0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Zm(t);return i||n}return e}function J0(t){return Zh(t,e=>{if(!e)throw is.create("installation-not-found");return bb(e)})}function bb(t){return aV(t)?{fid:t.fid,registrationStatus:0}:t}function aV(t){return t.registrationStatus===1&&t.registrationTime+db<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV({appConfig:t,heartbeatServiceProvider:e},n){const i=uV(t,n),r=WL(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:fb,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await wb(()=>fetch(i,a));if(l.ok){const u=await l.json();return yb(u)}else throw await _b("Generate Auth Token",l)}function uV(t,{fid:e}){return`${mb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(t,e=!1){let n;const i=await Zh(t.appConfig,s=>{if(!kb(s))throw is.create("not-registered");const o=s.authToken;if(!e&&dV(o))return s;if(o.requestStatus===1)return n=cV(t,e),s;{if(!navigator.onLine)throw is.create("app-offline");const a=pV(s);return n=hV(t,a),a}});return n?await n:i.authToken}async function cV(t,e){let n=await Z0(t.appConfig);for(;n.authToken.requestStatus===1;)await Eb(100),n=await Z0(t.appConfig);const i=n.authToken;return i.requestStatus===0?ey(t,e):i}function Z0(t){return Zh(t,e=>{if(!kb(e))throw is.create("not-registered");const n=e.authToken;return gV(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function hV(t,e){try{const n=await lV(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await eh(t.appConfig,i),n}catch(n){if(gb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await xb(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await eh(t.appConfig,i)}throw n}}function kb(t){return t!==void 0&&t.registrationStatus===2}function dV(t){return t.requestStatus===2&&!fV(t)}function fV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+UL}function pV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function gV(t){return t.requestStatus===1&&t.requestTime+db<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t){const e=t,{installationEntry:n,registrationPromise:i}=await Zm(e);return i?i.catch(console.error):ey(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e=!1){const n=t;return await _V(n),(await ey(n,e)).token}async function _V(t){const{registrationPromise:e}=await Zm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){if(!t||!t.options)throw cf("App Configuration");if(!t.name)throw cf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw cf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function cf(t){return is.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="installations",wV="installations-internal",EV=t=>{const e=t.getProvider("app").getImmediate(),n=vV(e),i=kl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},TV=t=>{const e=t.getProvider("app").getImmediate(),n=kl(e,Cb).getImmediate();return{getId:()=>mV(n),getToken:r=>yV(n,r)}};function IV(){Un(new vn(Cb,EV,"PUBLIC")),Un(new vn(wV,TV,"PRIVATE"))}IV();tn(hb,Xm);tn(hb,Xm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="analytics",SV="firebase_id",xV="origin",bV=60*1e3,kV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ty="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=new Nh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},nn=new ls("analytics","Analytics",CV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){if(!t.startsWith(ty)){const e=nn.create("invalid-gtag-resource",{gtagURL:t});return Ft.warn(e.message),""}return t}function Ab(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function PV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function RV(t,e){const n=PV("firebase-js-sdk-policy",{createScriptURL:AV}),i=document.createElement("script"),r=`${ty}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function NV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function DV(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await Ab(n)).find(u=>u.measurementId===r);l&&await e[l.appId]}}catch(a){Ft.error(a)}t("config",r,s)}async function MV(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await Ab(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Ft.error(s)}}function OV(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await MV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await DV(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Ft.error(a)}}return r}function LV(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=OV(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function VV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ty)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=30,jV=1e3;class UV{constructor(e={},n=jV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Pb=new UV;function BV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function zV(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:BV(i)},s=kV.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw nn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function $V(t,e=Pb,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw nn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw nn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new qV;return setTimeout(async()=>{a.abort()},bV),Rb({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Rb(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Pb){var s;const{appId:o,measurementId:a}=t;try{await WV(i,e)}catch(l){if(a)return Ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await zV(t);return r.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!HV(u)){if(r.deleteThrottleMetadata(o),a)return Ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Lv(n,r.intervalMillis,FV):Lv(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Ft.debug(`Calling attemptFetch again in ${h} millis`),Rb(t,d,i,r)}}function WV(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function HV(t){if(!(t instanceof In)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class qV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function KV(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(){if(ZI())try{await eS()}catch(t){return Ft.warn(nn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ft.warn(nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function QV(t,e,n,i,r,s,o){var a;const l=$V(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ft.error(m)),e.push(l);const u=GV().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,u]);VV(s)||RV(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[xV]="firebase",f.update=!0,d!=null&&(f[SV]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.app=e}_delete(){return delete Da[this.app.options.appId],Promise.resolve()}}let Da={},tw=[];const nw={};let hf="dataLayer",XV="gtag",iw,Nb,rw=!1;function JV(){const t=[];if(JI()&&t.push("This is a browser extension environment."),QP()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=nn.create("invalid-analytics-context",{errorInfo:e});Ft.warn(n.message)}}function ZV(t,e,n){JV();const i=t.options.appId;if(!i)throw nn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw nn.create("no-api-key");if(Da[i]!=null)throw nn.create("already-exists",{id:i});if(!rw){NV(hf);const{wrappedGtag:s,gtagCore:o}=LV(Da,tw,nw,hf,XV);Nb=s,iw=o,rw=!0}return Da[i]=QV(t,tw,nw,e,iw,hf,n),new YV(t)}function eF(t,e,n,i){t=Re(t),KV(Nb,Da[t.app.options.appId],e,n,i).catch(r=>Ft.error(r))}const sw="@firebase/analytics",ow="0.10.8";function tF(){Un(new vn(ew,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return ZV(i,r,n)},"PUBLIC")),Un(new vn("analytics-internal",t,"PRIVATE")),tn(sw,ow),tn(sw,ow,"esm2017");function t(e){try{const n=e.getProvider(ew).getImmediate();return{logEvent:(i,r,s)=>eF(n,i,r,s)}}catch(n){throw nn.create("interop-component-reg-failed",{reason:n})}}}tF();const nF={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},Db=rS(nF),Xo=PM(Db),yn=EL(Db),Mb=O.createContext(null);function iF({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{const l=_D(Xo,u=>{n(u),r(!1)});return()=>l()},[]);const a=O.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,u){o(null);try{return(await dD(Xo,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,u){o(null);try{return(await fD(Xo,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await vD(Xo)},async resetPassword(l){o(null);try{await hD(Xo,l)}catch(u){throw o((u==null?void 0:u.message)||"Failed to send reset email."),u}}}),[e,i,s]);return y.jsx(Mb.Provider,{value:a,children:t})}function mi(){return O.useContext(Mb)}function rF(){const{user:t,logout:e}=mi(),n=Eo();async function i(){await e(),n("/dashboard")}return y.jsx("div",{className:"nav",children:y.jsxs("div",{className:"nav-inner",children:[y.jsxs("div",{className:"brand",children:[y.jsx("div",{className:"badge"}),y.jsxs("div",{children:[y.jsx("h1",{children:"Body Recomposition Tracker"}),y.jsx("div",{className:"small",children:"Trend-first logging: weight , strength /"})]})]}),y.jsxs("div",{className:"nav-links",children:[y.jsxs("div",{className:"nav-tabs",children:[y.jsx(vs,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),y.jsx(vs,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&y.jsx(vs,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&y.jsx(vs,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),y.jsx("div",{className:"nav-actions",children:t?y.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):y.jsxs(y.Fragment,{children:[y.jsx(vs,{to:"/login",className:"btn",children:"Log in"}),y.jsx(vs,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function aw({children:t}){const{user:e,initializing:n}=mi();return n?y.jsx("div",{className:"panel",children:y.jsx("div",{className:"muted",children:"Loading"})}):e?t:y.jsx(wp,{to:"/login",replace:!0})}const Ob=O.createContext(null),lw={email:"",sex:"",height:"",targetWeight:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],createdAt:null};function sF({children:t}){const{user:e}=mi(),[n,i]=O.useState(lw),[r,s]=O.useState(!1),[o,a]=O.useState(null);O.useEffect(()=>{if(i(lw),a(null),!e)return;const u=or(yn,"users",e.uid);s(!0);const h=Ym(u,async d=>{if(!d.exists()){await cb(u,{email:e.email||"",sex:"",height:"",targetWeight:null,triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],createdAt:Wr()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",targetWeight:f.targetWeight??"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=O.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(u){if(!e)throw new Error("Not authenticated");a(null);const h=or(yn,"users",e.uid);await Qm(h,u)}}),[n,r,o,e]);return y.jsx(Ob.Provider,{value:l,children:t})}function ny(){return O.useContext(Ob)}function iy(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function th(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function nh(){return iy(new Date)}function oF(t,e){const n=th(t);return n.setDate(n.getDate()+Number(e)),iy(n)}function aF(t,e){return t.dateIso.localeCompare(e.dateIso)}function ry(t,e,n){const i=Lm(yn,"users",t,"entries");return Ym(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(aF);e(o)},n)}async function lF(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=or(yn,"users",t,"entries",n),r=th(n),s={...e,dateIso:n,date:e.date||r,updatedAt:Wr()};await cb(i,s,{merge:!0})}async function uF(t,e,n){const i=or(yn,"users",t,"entries",e);await Qm(i,{...n,updatedAt:Wr()})}async function cF(t,e){const n=or(yn,"users",t,"entries",e);await OL(n)}const hF=2/8;function Lb({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function dF({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function ws(t,e=hF){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function fF(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function df(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=fF(i,r,s);return Number.isFinite(o)?o:null}function pF({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=df(n,"neck",i),a=df(n,"waist",i),l=df(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const u=a-o;if(!(u>0))return null;const h=495/(1.0324-.19077*Math.log10(u)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const u=a+l-o;if(!(u>0))return null;const h=495/(1.29579-.35004*Math.log10(u)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function gF({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function Vb(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(a=>({dateIso:a.dateIso,weight:Ir(a.weight),protein:Ir(a.protein),carbs:Ir(a.carbs),fats:Ir(a.fats),bench:Ir(a.bench),squat:Ir(a.squat),deadlift:Ir(a.deadlift),calories:Lb(a),avgStrength:dF(a),bfPct:pF({sex:i,heightCm:r,entry:a,tripleEnabled:n})}));s.forEach(a=>{a.lbm=gF({weightKg:a.weight,bfPct:a.bfPct})});const o={weight:ws(s.map(a=>a.weight)),bench:ws(s.map(a=>a.bench)),squat:ws(s.map(a=>a.squat)),deadlift:ws(s.map(a=>a.deadlift)),calories:ws(s.map(a=>a.calories)),avgStrength:ws(s.map(a=>a.avgStrength))};return s.map((a,l)=>({...a,wma:{weight:o.weight[l],bench:o.bench[l],squat:o.squat[l],deadlift:o.deadlift[l],calories:o.calories[l],avgStrength:o.avgStrength[l]}}))}function mF(t){var f,m,_,w;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=T=>T*7-1;function s(T){var E;for(let S=T;S>=0;S--){const x=(E=t[S])==null?void 0:E.lbm;if(Number.isFinite(x))return x}return null}for(let T=1;T<=i;T++){const E=(T-1)*7,S=r(T),x=t.slice(E,S+1),R=Jo(x.map(A=>A.calories)),M=Jo(x.map(A=>{var ne;return(ne=A==null?void 0:A.wma)==null?void 0:ne.avgStrength})),N=(m=(f=x[0])==null?void 0:f.wma)==null?void 0:m.weight,I=(w=(_=x[x.length-1])==null?void 0:_.wma)==null?void 0:w.weight,v=Number.isFinite(N)&&Number.isFinite(I)?I-N:null;let k=null;if(Number.isFinite(R)&&Number.isFinite(v)){const ne=-v*7700/7;k=R+ne}const C=s(S);let P=null,D="";Number.isFinite(C)&&Number.isFinite(v)&&(P=Math.max(0,-v)/C*100,P<.5?D="Conservative":P<=1?D="Optimal":D="Aggressive"),e.push({week:T,avgCalories:R,weightChange:v,tdee:k,avgStrengthWma:M,lbm:C,lossRatePct:P,lossRateStatus:D,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(T=>T.tdee).filter(Number.isFinite),a=o.length?Jo(o):null,l=e.slice(0,2).map(T=>T.avgStrengthWma).filter(Number.isFinite),u=l.length?Jo(l):null,h=e.slice(0,2).map(T=>Number.isFinite(T.weightChange)?Math.max(0,-T.weightChange):null).filter(Number.isFinite),d=h.length?Jo(h):null;if(Number.isFinite(a))for(const T of e)Number.isFinite(T.tdee)&&(T.tdeeChangeFromBaseline=T.tdee-a,T.adaptationPct=T.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:u,baselineWeeklyLoss:d}}function Ir(t){const e=Number(t);return Number.isFinite(e)?e:null}function Jo(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function Hn(){let t=0,e=0;for(;t===0;)t=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}function uw(t,e,n){return Math.max(e,Math.min(n,t))}function yF(){return{email:"sample@demo.local",sex:"male",height:175,targetWeight:82,triplemeasurements:!1,createdAt:null}}function _F(t=60){const e=new Date;e.setDate(e.getDate()-(t-1));const n=[];let i=90,r=100,s=140,o=180;for(let a=0;a<t;a++){const l=new Date(e);l.setDate(e.getDate()+a);const u=iy(l),d=2400-Math.floor(a/14)*125;i-=5.5/(t-1),r+=4/(t-1),s+=4/(t-1),o+=5/(t-1);const f=i+Hn()*.8,m=r+Hn()*2,_=s+Hn()*2.5,w=o+Hn()*2.8,T=180+Hn()*10,E=70+Hn()*6,S=(d-4*T-9*E)/4+Hn()*10,x={id:u,dateIso:u,date:null,weight:ku(f),protein:ff(T),carbs:ff(uw(S,100,320)),fats:ff(uw(E,45,95)),bench:ku(m),squat:ku(_),deadlift:ku(w),neck:null,waist:null,hip:null};if(a%7===0){const N=96+-7*(a/(t-1));x.neck=40+Hn()*.3,x.waist=N+Hn()*.6}n.push(x)}return n}function ff(t){return Number.isFinite(t)?Math.round(t):null}function ku(t){return Number.isFinite(t)?Math.round(t*10)/10:null}function Fb(t,e,n){const i=Lm(yn,"users",t,"cycles"),r=PL(i,RL("startDateIso","desc"));return Ym(r,s=>{const o=[];s.forEach(a=>{o.push({id:a.id,...a.data()})}),e(o)},n)}async function vF(t,{type:e,startDateIso:n,activeCycle:i=null}){if(!t)throw new Error("Not authenticated");if(!e||!["cut","bulk","maintain"].includes(e))throw new Error("Invalid cycle type");if(!n)throw new Error("startDateIso is required");const r=FL(yn);if(i!=null&&i.id){let a=oF(n,-1);i.startDateIso&&a<i.startDateIso&&(a=i.startDateIso);const l=or(yn,"users",t,"cycles",i.id);r.update(l,{endDateIso:a,updatedAt:Wr()})}const s=Lm(yn,"users",t,"cycles"),o=or(s);r.set(o,{type:e,startDateIso:n,endDateIso:null,createdAt:Wr(),updatedAt:Wr()}),await r.commit()}async function wF(t,e,n){if(!t)throw new Error("Not authenticated");if(!e)throw new Error("cycleId is required");if(!n)throw new Error("endDateIso is required");const i=or(yn,"users",t,"cycles",e);await Qm(i,{endDateIso:n,updatedAt:Wr()})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ul(t){return t+.5|0}const ji=(t,e,n)=>Math.max(Math.min(t,n),e);function pa(t){return ji(Ul(t*2.55),0,255)}function er(t){return ji(Ul(t*255),0,255)}function Xn(t){return ji(Ul(t/2.55)/100,0,1)}function cw(t){return ji(Ul(t*100),0,100)}const Qt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Gp=[..."0123456789ABCDEF"],EF=t=>Gp[t&15],TF=t=>Gp[(t&240)>>4]+Gp[t&15],Cu=t=>(t&240)>>4===(t&15),IF=t=>Cu(t.r)&&Cu(t.g)&&Cu(t.b)&&Cu(t.a);function SF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Qt[t[1]]*17,g:255&Qt[t[2]]*17,b:255&Qt[t[3]]*17,a:e===5?Qt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Qt[t[1]]<<4|Qt[t[2]],g:Qt[t[3]]<<4|Qt[t[4]],b:Qt[t[5]]<<4|Qt[t[6]],a:e===9?Qt[t[7]]<<4|Qt[t[8]]:255})),n}const xF=(t,e)=>t<255?e(t):"";function bF(t){var e=IF(t)?EF:TF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+xF(t.a,e):void 0}const kF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jb(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function CF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function AF(t,e,n){const i=jb(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function PF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function sy(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=PF(n,i,r,h,s),l=l*60+.5),[l|0,u||0,a]}function oy(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(er)}function ay(t,e,n){return oy(jb,t,e,n)}function RF(t,e,n){return oy(AF,t,e,n)}function NF(t,e,n){return oy(CF,t,e,n)}function Ub(t){return(t%360+360)%360}function DF(t){const e=kF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?pa(+e[5]):er(+e[5]));const r=Ub(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=RF(r,s,o):e[1]==="hsv"?i=NF(r,s,o):i=ay(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function MF(t,e){var n=sy(t);n[0]=Ub(n[0]+e),n=ay(n),t.r=n[0],t.g=n[1],t.b=n[2]}function OF(t){if(!t)return;const e=sy(t),n=e[0],i=cw(e[1]),r=cw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Xn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const hw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function LF(){const t={},e=Object.keys(dw),n=Object.keys(hw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,hw[s]);s=parseInt(dw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Au;function VF(t){Au||(Au=LF(),Au.transparent=[0,0,0,0]);const e=Au[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const FF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function jF(t){const e=FF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?pa(o):ji(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?pa(i):ji(i,0,255)),r=255&(e[4]?pa(r):ji(r,0,255)),s=255&(e[6]?pa(s):ji(s,0,255)),{r:i,g:r,b:s,a:n}}}function UF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const pf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Es=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function BF(t,e,n){const i=Es(Xn(t.r)),r=Es(Xn(t.g)),s=Es(Xn(t.b));return{r:er(pf(i+n*(Es(Xn(e.r))-i))),g:er(pf(r+n*(Es(Xn(e.g))-r))),b:er(pf(s+n*(Es(Xn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Pu(t,e,n){if(t){let i=sy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=ay(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Bb(t,e){return t&&Object.assign(e||{},t)}function fw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=er(t[3]))):(e=Bb(t,{r:0,g:0,b:0,a:1}),e.a=er(e.a)),e}function zF(t){return t.charAt(0)==="r"?jF(t):DF(t)}class ml{constructor(e){if(e instanceof ml)return e;const n=typeof e;let i;n==="object"?i=fw(e):n==="string"&&(i=SF(e)||VF(e)||zF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Bb(this._rgb);return e&&(e.a=Xn(e.a)),e}set rgb(e){this._rgb=fw(e)}rgbString(){return this._valid?UF(this._rgb):void 0}hexString(){return this._valid?bF(this._rgb):void 0}hslString(){return this._valid?OF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=BF(this._rgb,e._rgb,n)),this}clone(){return new ml(this.rgb)}alpha(e){return this._rgb.a=er(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ul(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Pu(this._rgb,2,e),this}darken(e){return Pu(this._rgb,2,-e),this}saturate(e){return Pu(this._rgb,1,e),this}desaturate(e){return Pu(this._rgb,1,-e),this}rotate(e){return MF(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function qn(){}const $F=(()=>{let t=0;return()=>t++})();function Ie(t){return t==null}function it(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ye(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function on(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function xn(t,e){return on(t)?t:e}function ce(t,e){return typeof t>"u"?e:t}const WF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function be(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function _e(t,e,n,i){let r,s,o;if(it(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ye(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function ih(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function rh(t){if(it(t))return t.map(rh);if(ye(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=rh(t[n[r]]);return e}return t}function zb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function HF(t,e,n,i){if(!zb(t))return;const r=e[t],s=n[t];ye(r)&&ye(s)?yl(r,s,i):e[t]=rh(s)}function yl(t,e,n){const i=it(e)?e:[e],r=i.length;if(!ye(t))return t;n=n||{};const s=n.merger||HF;let o;for(let a=0;a<r;++a){if(o=i[a],!ye(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],t,o,n)}return t}function Ma(t,e){return yl(t,e,{merger:qF})}function qF(t,e,n){if(!zb(t))return;const i=e[t],r=n[t];ye(i)&&ye(r)?Ma(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=rh(r))}const pw={"":t=>t,x:t=>t.x,y:t=>t.y};function KF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function GF(t){const e=KF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function sh(t,e){return(pw[e]||(pw[e]=GF(e)))(t)}function ly(t){return t.charAt(0).toUpperCase()+t.slice(1)}const oh=t=>typeof t<"u",ar=t=>typeof t=="function",gw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function QF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const yt=Math.PI,jn=2*yt,YF=jn+yt,ah=Number.POSITIVE_INFINITY,XF=yt/180,pn=yt/2,Sr=yt/4,mw=yt*2/3,$b=Math.log10,fo=Math.sign;function Oa(t,e,n){return Math.abs(t-e)<n}function yw(t){const e=Math.round(t);t=Oa(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor($b(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function JF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function ZF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function _l(t){return!ZF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function ej(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function tj(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Fr(t){return t*(yt/180)}function nj(t){return t*(180/yt)}function _w(t){if(!on(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function ij(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*yt&&(s+=jn),{angle:s,distance:r}}function Qp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rj(t,e){return(t-e+YF)%jn-yt}function bi(t){return(t%jn+jn)%jn}function Wb(t,e,n,i){const r=bi(t),s=bi(e),o=bi(n),a=bi(s-r),l=bi(o-r),u=bi(r-s),h=bi(r-o);return r===s||r===o||i&&s===o||a>l&&u<h}function Zt(t,e,n){return Math.max(e,Math.min(n,t))}function sj(t){return Zt(t,-32768,32767)}function ga(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function uy(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const jr=(t,e,n,i)=>uy(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),oj=(t,e,n)=>uy(t,n,i=>t[i][e]>=n);function aj(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Hb=["push","pop","shift","splice","unshift"];function lj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Hb.forEach(n=>{const i="_onData"+ly(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function vw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Hb.forEach(s=>{delete t[s]}),delete t._chartjs)}function uj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const qb=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Kb(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,qb.call(window,()=>{i=!1,t.apply(e,n)}))}}function cj(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Gb=t=>t==="start"?"left":t==="end"?"right":"center",Bt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,hj=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function dj(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:_}=o.getUserBounds();if(m){if(r=Math.min(jr(l,h,d).lo,n?i:jr(e,h,o.getPixelForValue(d)).lo),u){const w=l.slice(0,r+1).reverse().findIndex(T=>!Ie(T[a.axis]));r-=Math.max(0,w)}r=Zt(r,0,i-1)}if(_){let w=Math.max(jr(l,o.axis,f,!0).hi+1,n?0:jr(e,h,o.getPixelForValue(f),!0).hi+1);if(u){const T=l.slice(w-1).findIndex(E=>!Ie(E[a.axis]));w+=Math.max(0,T)}s=Zt(w,r,i)-r}else s=i-r}return{start:r,count:s}}function fj(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Ru=t=>t===0||t===1,ww=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*jn/n)),Ew=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*jn/n)+1,La={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pn)+1,easeOutSine:t=>Math.sin(t*pn),easeInOutSine:t=>-.5*(Math.cos(yt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ru(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ru(t)?t:ww(t,.075,.3),easeOutElastic:t=>Ru(t)?t:Ew(t,.075,.3),easeInOutElastic(t){return Ru(t)?t:t<.5?.5*ww(t*2,.1125,.45):.5+.5*Ew(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-La.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?La.easeInBounce(t*2)*.5:La.easeOutBounce(t*2-1)*.5+.5};function cy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Tw(t){return cy(t)?t:new ml(t)}function gf(t){return cy(t)?t:new ml(t).saturate(.5).darken(.1).hexString()}const pj=["x","y","borderWidth","radius","tension"],gj=["color","borderColor","backgroundColor"];function mj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:gj},numbers:{type:"number",properties:pj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function yj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Iw=new Map;function _j(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Iw.get(n);return i||(i=new Intl.NumberFormat(t,e),Iw.set(n,i)),i}function Qb(t,e,n){return _j(e,n).format(t)}const vj={values(t){return it(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=wj(t,n)}const o=$b(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Qb(t,i,l)}};function wj(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Yb={formatters:vj};function Ej(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Yb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ss=Object.create(null),Yp=Object.create(null);function Va(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function mf(t,e,n){return typeof e=="string"?yl(Va(t,e),n):yl(Va(t,""),e)}class Tj{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>gf(r.backgroundColor),this.hoverBorderColor=(i,r)=>gf(r.borderColor),this.hoverColor=(i,r)=>gf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return mf(this,e,n)}get(e){return Va(this,e)}describe(e,n){return mf(Yp,e,n)}override(e,n){return mf(ss,e,n)}route(e,n,i,r){const s=Va(this,e),o=Va(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return ye(l)?Object.assign({},u,l):ce(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ze=new Tj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mj,yj,Ej]);function Ij(t){return!t||Ie(t.size)||Ie(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Sw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function xr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function xw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Xp(t,e,n,i){Xb(t,e,n,i,null)}function Xb(t,e,n,i,r){let s,o,a,l,u,h,d,f;const m=e.pointStyle,_=e.rotation,w=e.radius;let T=(_||0)*XF;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(T),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,w,0,0,jn):t.arc(n,i,w,0,jn),t.closePath();break;case"triangle":h=r?r/2:w,t.moveTo(n+Math.sin(T)*h,i-Math.cos(T)*w),T+=mw,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*w),T+=mw,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*w),t.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(T+Sr)*l,d=Math.cos(T+Sr)*(r?r/2-u:l),a=Math.sin(T+Sr)*l,f=Math.sin(T+Sr)*(r?r/2-u:l),t.arc(n-d,i-a,u,T-yt,T-pn),t.arc(n+f,i-o,u,T-pn,T),t.arc(n+d,i+a,u,T,T+pn),t.arc(n-f,i+o,u,T+pn,T+yt),t.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*w,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}T+=Sr;case"rectRot":d=Math.cos(T)*(r?r/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":T+=Sr;case"cross":d=Math.cos(T)*(r?r/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(T)*(r?r/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),T+=Sr,d=Math.cos(T)*(r?r/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(T)*w,a=Math.sin(T)*w,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(T)*(r?r/2:w),i+Math.sin(T)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function vl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function hy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function dy(t){t.restore()}function Sj(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function xj(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function bj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ie(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function kj(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function Cj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function lh(t,e,n,i,r,s={}){const o=it(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,bj(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&Cj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ie(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,i,s.maxWidth)),t.fillText(u,n,i,s.maxWidth),kj(t,n,i,u,s),i+=Number(r.lineHeight);t.restore()}function Jp(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*yt,yt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,yt,pn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,pn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-pn,!0),t.lineTo(n+o.topLeft,i)}const Aj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Pj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Rj(t,e){const n=(""+t).match(Aj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Nj=t=>+t||0;function Jb(t,e){const n={},i=ye(e),r=i?Object.keys(e):e,s=ye(t)?i?o=>ce(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Nj(s(o));return n}function Dj(t){return Jb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Fa(t){return Jb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Tn(t){const e=Dj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dt(t,e){t=t||{},e=e||ze.font;let n=ce(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ce(t.style,e.style);i&&!(""+i).match(Pj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ce(t.family,e.family),lineHeight:Rj(ce(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ce(t.weight,e.weight),string:""};return r.string=Ij(r),r}function Nu(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Mj(t,e,n){const{min:i,max:r}=t,s=WF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function fs(t,e){return Object.assign(Object.create(t),e)}function fy(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=nk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>fy([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return ek(a,l,()=>zj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return kw(a).includes(l)},ownKeys(a){return kw(a)},set(a,l,u){const h=a._storage||(a._storage=r());return a[l]=h[l]=u,delete a._keys,!0}})}function po(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Zb(t,i),setContext:s=>po(t,s,n,i),override:s=>po(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return ek(s,o,()=>Lj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function Zb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ar(n)?n:()=>n,isIndexable:ar(i)?i:()=>i}}const Oj=(t,e)=>t?t+ly(e):e,py=(t,e)=>ye(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ek(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Lj(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return ar(a)&&o.isScriptable(e)&&(a=Vj(e,a,t,n)),it(a)&&a.length&&(a=Fj(e,a,t,o.isIndexable)),py(e,a)&&(a=po(a,r,s&&s[e],o)),a}function Vj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),py(t,l)&&(l=gy(r._scopes,r,t,l)),l}function Fj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ye(e[0])){const l=e,u=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=gy(u,r,t,h);e.push(po(d,s,o&&o[t],a))}}return e}function tk(t,e,n){return ar(t)?t(e,n):t}const jj=(t,e)=>t===!0?e:typeof t=="string"?sh(e,t):void 0;function Uj(t,e,n,i,r){for(const s of e){const o=jj(n,s);if(o){t.add(o);const a=tk(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function gy(t,e,n,i){const r=e._rootScopes,s=tk(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=bw(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=bw(a,o,s,l,i),l===null)?!1:fy(Array.from(a),[""],r,s,()=>Bj(e,n,i))}function bw(t,e,n,i,r){for(;n;)n=Uj(t,e,n,i,r);return n}function Bj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return it(r)&&ye(n)?n:r||{}}function zj(t,e,n,i){let r;for(const s of e)if(r=nk(Oj(s,t),n),typeof r<"u")return py(t,r)?gy(n,i,t,r):r}function nk(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function kw(t){let e=t._keys;return e||(e=t._keys=$j(t._scopes)),e}function $j(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const Wj=Number.EPSILON||1e-14,go=(t,e)=>e<t.length&&!t[e].skip&&t[e],ik=t=>t==="x"?"y":"x";function Hj(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Qp(s,r),l=Qp(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function qj(t,e,n){const i=t.length;let r,s,o,a,l,u=go(t,0);for(let h=0;h<i-1;++h)if(l=u,u=go(t,h+1),!(!l||!u)){if(Oa(e[h],0,Wj)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function Kj(t,e,n="x"){const i=ik(n),r=t.length;let s,o,a,l=go(t,0);for(let u=0;u<r;++u){if(o=a,a=l,l=go(t,u+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[u]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[u])}}function Gj(t,e="x"){const n=ik(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,u=go(t,0);for(o=0;o<i;++o)if(a=l,l=u,u=go(t,o+1),!!l){if(u){const h=u[e]-l[e];r[o]=h!==0?(u[n]-l[n])/h:0}s[o]=a?u?fo(r[o-1])!==fo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}qj(t,r,s),Kj(t,s,e)}function Du(t,e,n){return Math.max(Math.min(t,n),e)}function Qj(t,e){let n,i,r,s,o,a=vl(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&vl(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Du(r.cp1x,e.left,e.right),r.cp1y=Du(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Du(r.cp2x,e.left,e.right),r.cp2y=Du(r.cp2y,e.top,e.bottom)))}function Yj(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Gj(t,r);else{let u=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Hj(u,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&Qj(t,n)}function my(){return typeof window<"u"&&typeof document<"u"}function yy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function uh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const ed=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Xj(t,e){return ed(t).getPropertyValue(e)}const Jj=["top","right","bottom","left"];function Hr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Jj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Zj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function e4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Zj(r,s,t.target))a=r,l=s;else{const u=e.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Rr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=ed(n),s=r.boxSizing==="border-box",o=Hr(r,"padding"),a=Hr(r,"border","width"),{x:l,y:u,box:h}=e4(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:_}=e;return s&&(m-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((u-f)/_*n.height/i)}}function t4(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&yy(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=ed(s),l=Hr(a,"border","width"),u=Hr(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,i=uh(a.maxWidth,s,"clientWidth"),r=uh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||ah,maxHeight:r||ah}}const Ui=t=>Math.round(t*10)/10;function n4(t,e,n,i){const r=ed(t),s=Hr(r,"margin"),o=uh(r.maxWidth,t,"clientWidth")||ah,a=uh(r.maxHeight,t,"clientHeight")||ah,l=t4(t,e,n);let{width:u,height:h}=l;if(r.boxSizing==="content-box"){const f=Hr(r,"border","width"),m=Hr(r,"padding");u-=m.width+f.width,h-=m.height+f.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=Ui(Math.min(u,o,l.maxWidth)),h=Ui(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Ui(u/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,u=Ui(Math.floor(h*i))),{width:u,height:h}}function Cw(t,e,n){const i=e||1,r=Ui(t.height*i),s=Ui(t.width*i);t.height=Ui(t.height),t.width=Ui(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const i4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};my()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Aw(t,e){const n=Xj(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Nr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function r4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function s4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Nr(t,r,n),a=Nr(r,s,n),l=Nr(s,e,n),u=Nr(o,a,n),h=Nr(a,l,n);return Nr(u,h,n)}const o4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},a4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Qs(t,e,n){return t?o4(e,n):a4()}function rk(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function sk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ok(t){return t==="angle"?{between:Wb,compare:rj,normalize:bi}:{between:ga,compare:(e,n)=>e-n,normalize:e=>e}}function Pw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function l4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=ok(i),l=e.length;let{start:u,end:h,loop:d}=t,f,m;if(d){for(u+=l,h+=l,f=0,m=l;f<m&&o(a(e[u%l][i]),r,s);++f)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:d,style:t.style}}function u4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=ok(i),{start:h,end:d,loop:f,style:m}=l4(t,e,n),_=[];let w=!1,T=null,E,S,x;const R=()=>l(r,x,E)&&a(r,x)!==0,M=()=>a(s,E)===0||l(s,x,E),N=()=>w||R(),I=()=>!w||M();for(let v=h,k=h;v<=d;++v)S=e[v%o],!S.skip&&(E=u(S[i]),E!==x&&(w=l(E,r,s),T===null&&N()&&(T=a(E,r)===0?v:k),T!==null&&I()&&(_.push(Pw({start:T,end:v,loop:f,count:o,style:m})),T=null),k=v,x=E));return T!==null&&_.push(Pw({start:T,end:d,loop:f,count:o,style:m})),_}function c4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=u4(i[r],t.points,e);s.length&&n.push(...s)}return n}function h4(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function d4(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function f4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=h4(n,r,s,i);if(i===!0)return Rw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,u=!!t._fullLoop&&o===0&&a===r-1;return Rw(t,d4(n,o,l,u),n,e)}function Rw(t,e,n,i){return!i||!i.setContext||!n?e:p4(t,e,n,i)}function p4(t,e,n,i){const r=t._chart.getContext(),s=Nw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=s,d=e[0].start,f=d;function m(_,w,T,E){const S=a?-1:1;if(_!==w){for(_+=l;n[_%l].skip;)_-=S;for(;n[w%l].skip;)w+=S;_%l!==w%l&&(u.push({start:_%l,end:w%l,loop:T,style:E}),h=E,d=w%l)}}for(const _ of e){d=a?d:_.start;let w=n[d%l],T;for(f=d+1;f<=_.end;f++){const E=n[f%l];T=Nw(i.setContext(fs(r,{type:"segment",p0:w,p1:E,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),g4(T,h)&&m(d,f-1,_.loop,h),w=E,h=T}d<f-1&&m(d,f-1,_.loop,h)}return u}function Nw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function g4(t,e){if(!e)return!1;const n=[],i=function(r,s){return cy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Mu(t,e,n){return t.options.clip?t[n]:e[n]}function m4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Mu(n,e,"left"),right:Mu(n,e,"right"),top:Mu(i,e,"top"),bottom:Mu(i,e,"bottom")}:e}function y4(t,e){const n=e._clip;if(n.disabled)return!1;const i=m4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class _4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=qb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Kn=new _4;const Dw="transparent",v4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Tw(t||Dw),r=i.valid&&Tw(e||Dw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class w4{constructor(e,n,i,r){const s=n[i];r=Nu([e.to,r,s,e.from]);const o=Nu([e.from,s,r]);this._active=!0,this._fn=e.fn||v4[e.type||typeof o],this._easing=La[e.easing]||La.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Nu([e.to,n,r,e.from]),this._from=Nu([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class ak{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ye(e))return;const n=Object.keys(ze.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ye(s))return;const o={};for(const a of n)o[a]=s[a];(it(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=T4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&E4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[u];let d=s[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}s[u]=d=new w4(f,e,u,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Kn.add(this._chart,i),!0}}function E4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function T4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Mw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function I4(t,e,n){if(n===!1)return!1;const i=Mw(t,n),r=Mw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function S4(t){let e,n,i,r;return ye(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function lk(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Ow(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}u=t.values[l],on(u)&&(s||e===0||fo(e)===fo(u))&&(e+=u)}return!h&&!i.all?0:e}function x4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function yf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function b4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function k4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function C4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Lw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Vw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,u=o.axis,h=b4(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const _=e[m],{[l]:w,[u]:T}=_,E=_._stacks||(_._stacks={});f=E[u]=C4(r,h,w),f[a]=T,f._top=Lw(f,o,!0,i.type),f._bottom=Lw(f,o,!1,i.type);const S=f._visualValues||(f._visualValues={});S[a]=T}}function _f(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function A4(t,e){return fs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function P4(t,e,n){return fs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Zo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const vf=t=>t==="reset"||t==="none",Fw=(t,e)=>e?t:Object.assign({},t),R4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:lk(n,!0),values:null};class ja{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=yf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,_)=>d==="x"?f:d==="r"?_:m,s=n.xAxisID=ce(i.xAxisID,_f(e,"x")),o=n.yAxisID=ce(i.yAxisID,_f(e,"y")),a=n.rAxisID=ce(i.rAxisID,_f(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&vw(this._data,this),e._stacked&&Zo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ye(n)){const r=this._cachedMeta;this._data=x4(n,r)}else if(i!==n){if(i){vw(i,this);const r=this._cachedMeta;Zo(r),r._parsed=[]}n&&Object.isExtensible(n)&&lj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=yf(n.vScale,n),n.stack!==i.stack&&(r=!0,Zo(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(Vw(this,n._parsed),n._stacked=yf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{it(r[e])?f=this.parseArrayData(i,r,e,n):ye(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),u=d);i._sorted=l}o&&Vw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,d=new Array(r);let f,m,_;for(f=0,m=r;f<m;++f)_=f+i,d[f]={[a]:h||s.parse(u[_],_),[l]:o.parse(n[_],_)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],u[h]={x:s.parse(sh(m,a),f),y:o.parse(sh(m,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:lk(r,!0),values:n._stacks[e.axis]._visualValues};return Ow(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=Ow(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=R4(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=k4(a);let f,m;function _(){m=r[f];const w=m[a.axis];return!on(m[e.axis])||h>w||d<w}for(f=0;f<o&&!(!_()&&(this.updateRangeFromParsed(u,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(u,e,m,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],on(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=S4(ce(this.options.clip,I4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&u?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=P4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=A4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&oh(i);if(a)return Fw(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),m=Object.keys(ze.elements[e]),_=()=>this.getContext(i,r,n),w=u.resolveNamedOptions(f,m,_,d);return w.$shared&&(w.$shared=l,s[o]=Object.freeze(Fw(w,l))),w}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const u=new ak(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||vf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){vf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!vf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Zo(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ie(ja,"defaults",{}),ie(ja,"datasetElementType",null),ie(ja,"dataElementType",null);class lc extends ja{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=dj(n,r,o);this._drawStart=a,this._drawCount=l,fj(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,m=a.axis,{spanGaps:_,segment:w}=this.options,T=_l(_)?_:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||s||r==="none",S=n+i,x=e.length;let R=n>0&&this.getParsed(n-1);for(let M=0;M<x;++M){const N=e[M],I=E?N:{};if(M<n||M>=S){I.skip=!0;continue}const v=this.getParsed(M),k=Ie(v[m]),C=I[f]=o.getPixelForValue(v[f],M),P=I[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,v,l):v[m],M);I.skip=isNaN(C)||isNaN(P)||k,I.stop=M>0&&Math.abs(v[f]-R[f])>T,w&&(I.parsed=v,I.raw=u.data[M]),d&&(I.options=h||this.resolveDataElementOptions(M,N.active?"active":r)),E||this.updateElement(N,M,I,r),R=v}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ie(lc,"id","line"),ie(lc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ie(lc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function br(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _y{constructor(e){ie(this,"options");this.options=e||{}}static override(e){Object.assign(_y.prototype,e)}init(){}formats(){return br()}parse(){return br()}format(){return br()}add(){return br()}diff(){return br()}startOf(){return br()}endOf(){return br()}}var N4={_date:_y};function D4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?oj:jr;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(s,e,n-d),m=u(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=u(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(w=>!Ie(w[d.axis]));h.lo-=Math.max(0,m);const _=f.slice(h.hi).findIndex(w=>!Ie(w[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:s.length-1}}function td(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:d,hi:f}=D4(s[a],e,o,r);for(let m=d;m<=f;++m){const _=h[m];_.skip||i(_,u,m)}}}function M4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function wf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||td(t,n,e,function(a,l,u){!r&&!vl(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function O4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=ij(o,{x:e.x,y:e.y});Wb(d,u,h)&&r.push({element:o,datasetIndex:a,index:l})}return td(t,n,e,s),r}function L4(t,e,n,i,r,s){let o=[];const a=M4(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const _=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(_))&&!m)return;const T=a(e,_);T<l?(o=[{element:h,datasetIndex:d,index:f}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:f})}return td(t,n,e,u),o}function Ef(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?O4(t,e,n,r):L4(t,e,n,i,r,s)}function jw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return td(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var V4={modes:{index(t,e,n,i){const r=Rr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?wf(t,r,s,i,o):Ef(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Rr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?wf(t,r,s,i,o):Ef(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Rr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return wf(t,r,s,i,o)},nearest(t,e,n,i){const r=Rr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Ef(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Rr(e,t);return jw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Rr(e,t);return jw(t,r,"y",n.intersect,i)}}};const uk=["left","top","right","bottom"];function ea(t,e){return t.filter(n=>n.pos===e)}function Uw(t,e){return t.filter(n=>uk.indexOf(n.pos)===-1&&n.box.axis===e)}function ta(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function F4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function j4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!uk.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function U4(t,e){const n=j4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function B4(t){const e=F4(t),n=ta(e.filter(u=>u.box.fullSize),!0),i=ta(ea(e,"left"),!0),r=ta(ea(e,"right")),s=ta(ea(e,"top"),!0),o=ta(ea(e,"bottom")),a=Uw(e,"x"),l=Uw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ea(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Bw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function ck(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function z4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ye(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&ck(o,s.getPadding());const a=Math.max(0,e.outerWidth-Bw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Bw(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function $4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function W4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function ma(t,e,n,i){const r=[];let s,o,a,l,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,W4(a.horizontal,e));const{same:d,other:f}=z4(e,n,a,i);u|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return u&&ma(r,e,n,i)||h}function Ou(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function zw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=e.w*h,f=u.size||l.height;oh(u.start)&&(o=u.start),l.fullSize?Ou(l,r.left,o,n.outerWidth-r.right-r.left,f):Ou(l,e.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=e.h*h,f=u.size||l.width;oh(u.start)&&(s=u.start),l.fullSize?Ou(l,s,r.top,f,n.outerHeight-r.bottom-r.top):Ou(l,s,e.top+u.placed,f,d),u.start=s,u.placed+=d,s=l.right}}e.x=s,e.y=o}var Bi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Tn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=B4(t.boxes),l=a.vertical,u=a.horizontal;_e(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,T)=>T.box.options&&T.box.options.display===!1?w:w+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);ck(f,Tn(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),_=U4(l.concat(u),d);ma(a.fullSize,m,d,_),ma(l,m,d,_),ma(u,m,d,_)&&ma(l,m,d,_),$4(m),zw(a.leftAndTop,m,d,_),m.x+=m.w,m.y+=m.h,zw(a.rightAndBottom,m,d,_),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},_e(a.chartArea,w=>{const T=w.box;Object.assign(T,t.chartArea),T.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class hk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class H4 extends hk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const uc="$chartjs",q4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$w=t=>t===null||t==="";function K4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[uc]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",$w(r)){const s=Aw(t,"width");s!==void 0&&(t.width=s)}if($w(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Aw(t,"height");s!==void 0&&(t.height=s)}return t}const dk=i4?{passive:!0}:!1;function G4(t,e,n){t&&t.addEventListener(e,n,dk)}function Q4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,dk)}function Y4(t,e){const n=q4[t.type]||t.type,{x:i,y:r}=Rr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function ch(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function X4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ch(a.addedNodes,i),o=o&&!ch(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function J4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ch(a.removedNodes,i),o=o&&!ch(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const wl=new Map;let Ww=0;function fk(){const t=window.devicePixelRatio;t!==Ww&&(Ww=t,wl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Z4(t,e){wl.size||window.addEventListener("resize",fk),wl.set(t,e)}function eU(t){wl.delete(t),wl.size||window.removeEventListener("resize",fk)}function tU(t,e,n){const i=t.canvas,r=i&&yy(i);if(!r)return;const s=Kb((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),Z4(t,s),o}function Tf(t,e,n){n&&n.disconnect(),e==="resize"&&eU(t)}function nU(t,e,n){const i=t.canvas,r=Kb(s=>{t.ctx!==null&&n(Y4(s,t))},t);return G4(i,e,r),r}class iU extends hk{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(K4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[uc])return!1;const i=n[uc].initial;["height","width"].forEach(s=>{const o=i[s];Ie(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[uc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:X4,detach:J4,resize:tU}[n]||nU;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Tf,detach:Tf,resize:Tf}[n]||Q4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return n4(e,n,i,r)}isAttached(e){const n=e&&yy(e);return!!(n&&n.isConnected)}}function rU(t){return!my()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?H4:iU}class lr{constructor(){ie(this,"x");ie(this,"y");ie(this,"active",!1);ie(this,"options");ie(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return _l(this.x)&&_l(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}ie(lr,"defaults",{}),ie(lr,"defaultRoutes");function sU(t,e){const n=t.options.ticks,i=oU(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?lU(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return uU(e,u,s,o/r),u;const h=aU(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(Lu(e,u,h,Ie(m)?0:a-m,a),d=0,f=o-1;d<f;d++)Lu(e,u,h,s[d],s[d+1]);return Lu(e,u,h,l,Ie(m)?e.length:l+m),u}return Lu(e,u,h),u}function oU(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function aU(t,e,n){const i=cU(t),r=e.length/n;if(!i)return Math.max(r,1);const s=JF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function lU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function uU(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Lu(t,e,n,i,r){const s=ce(i,0),o=Math.min(ce(r,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function cU(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const hU=t=>t==="left"?"right":t==="right"?"left":t,Hw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,qw=(t,e)=>Math.min(e||t,t);function Kw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function dU(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(i===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<s-a||l>o+a)))return l}function fU(t,e){_e(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function na(t){return t.drawTicks?t.tickLength:0}function Gw(t,e){if(!t.display)return 0;const n=Dt(t.font,e),i=Tn(t.padding);return(it(t.text)?t.text.length:1)*n.lineHeight+i.height}function pU(t,e){return fs(t,{scale:e,type:"scale"})}function gU(t,e,n){return fs(t,{tick:n,index:e,type:"tick"})}function mU(t,e,n){let i=Gb(t);return(n&&e!=="right"||!n&&e==="right")&&(i=hU(i)),i}function yU(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let d=0,f,m,_;const w=o-r,T=a-s;if(t.isHorizontal()){if(m=Bt(i,s,a),ye(n)){const E=Object.keys(n)[0],S=n[E];_=h[E].getPixelForValue(S)+w-e}else n==="center"?_=(u.bottom+u.top)/2+w-e:_=Hw(t,n,e);f=a-s}else{if(ye(n)){const E=Object.keys(n)[0],S=n[E];m=h[E].getPixelForValue(S)-T+e}else n==="center"?m=(u.left+u.right)/2-T+e:m=Hw(t,n,e);_=Bt(i,o,r),d=n==="left"?-pn:pn}return{titleX:m,titleY:_,maxWidth:f,rotation:d}}class ko extends lr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=xn(e,Number.POSITIVE_INFINITY),n=xn(n,Number.NEGATIVE_INFINITY),i=xn(i,Number.POSITIVE_INFINITY),r=xn(r,Number.NEGATIVE_INFINITY),{min:xn(e,i),max:xn(n,r),minDefined:on(e),maxDefined:on(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:xn(n,xn(i,n)),max:xn(i,xn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){be(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Mj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Kw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){be(this.options.afterUpdate,[this])}beforeSetDimensions(){be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){be(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),be(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=be(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=qw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=Zt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-na(e.grid)-n.padding-Gw(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=nj(Math.min(Math.asin(Zt((h.highest.height+6)/a,-1,1)),Math.asin(Zt(l/u,-1,1))-Math.asin(Zt(f/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){be(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Gw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=na(s)+l):(e.height=this.maxHeight,e.width=na(s)+l),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,_=Fr(this.labelRotation),w=Math.cos(_),T=Math.sin(_);if(a){const E=i.mirror?0:T*d.width+w*f.height;e.height=Math.min(this.maxHeight,e.height+E+m)}else{const E=i.mirror?0:w*d.width+T*f.height;e.width=Math.min(this.maxWidth,e.width+E+m)}this._calculatePadding(u,h,T,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?u?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){be(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Ie(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Kw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/qw(n,i));let u=0,h=0,d,f,m,_,w,T,E,S,x,R,M;for(d=0;d<n;d+=l){if(_=e[d].label,w=this._resolveTickFontOptions(d),r.font=T=w.string,E=s[T]=s[T]||{data:{},gc:[]},S=w.lineHeight,x=R=0,!Ie(_)&&!it(_))x=Sw(r,E.data,E.gc,x,_),R=S;else if(it(_))for(f=0,m=_.length;f<m;++f)M=_[f],!Ie(M)&&!it(M)&&(x=Sw(r,E.data,E.gc,x,M),R+=S);o.push(x),a.push(R),u=Math.max(x,u),h=Math.max(R,h)}fU(s,n);const N=o.indexOf(u),I=a.indexOf(h),v=k=>({width:o[k]||0,height:a[k]||0});return{first:v(0),last:v(n-1),widest:v(N),highest:v(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return sj(this._alignToPixels?xr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=gU(this.getContext(),e,i))}return this.$context||(this.$context=pU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Fr(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=na(s),m=[],_=a.setContext(this.getContext()),w=_.display?_.width:0,T=w/2,E=function(he){return xr(i,he,w)};let S,x,R,M,N,I,v,k,C,P,D,A;if(o==="top")S=E(this.bottom),I=this.bottom-f,k=S-T,P=E(e.top)+T,A=e.bottom;else if(o==="bottom")S=E(this.top),P=e.top,A=E(e.bottom)-T,I=S+T,k=this.top+f;else if(o==="left")S=E(this.right),N=this.right-f,v=S-T,C=E(e.left)+T,D=e.right;else if(o==="right")S=E(this.left),C=e.left,D=E(e.right)-T,N=S+T,v=this.left+f;else if(n==="x"){if(o==="center")S=E((e.top+e.bottom)/2+.5);else if(ye(o)){const he=Object.keys(o)[0],pe=o[he];S=E(this.chart.scales[he].getPixelForValue(pe))}P=e.top,A=e.bottom,I=S+T,k=I+f}else if(n==="y"){if(o==="center")S=E((e.left+e.right)/2);else if(ye(o)){const he=Object.keys(o)[0],pe=o[he];S=E(this.chart.scales[he].getPixelForValue(pe))}N=S-T,v=N-f,C=e.left,D=e.right}const ne=ce(r.ticks.maxTicksLimit,d),se=Math.max(1,Math.ceil(d/ne));for(x=0;x<d;x+=se){const he=this.getContext(x),pe=s.setContext(he),z=a.setContext(he),K=pe.lineWidth,G=pe.color,de=z.dash||[],te=z.dashOffset,re=pe.tickWidth,Ae=pe.tickColor,qe=pe.tickBorderDash||[],Ne=pe.tickBorderDashOffset;R=dU(this,x,l),R!==void 0&&(M=xr(i,R,K),u?N=v=C=D=M:I=k=P=A=M,m.push({tx1:N,ty1:I,tx2:v,ty2:k,x1:C,y1:P,x2:D,y2:A,width:K,color:G,borderDash:de,borderDashOffset:te,tickWidth:re,tickColor:Ae,tickBorderDash:qe,tickBorderDashOffset:Ne}))}return this._ticksLength=d,this._borderValue=S,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=s,f=na(i.grid),m=f+h,_=d?-h:m,w=-Fr(this.labelRotation),T=[];let E,S,x,R,M,N,I,v,k,C,P,D,A="middle";if(r==="top")N=this.bottom-_,I=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+_,I=this._getXAxisLabelAlignment();else if(r==="left"){const se=this._getYAxisLabelAlignment(f);I=se.textAlign,M=se.x}else if(r==="right"){const se=this._getYAxisLabelAlignment(f);I=se.textAlign,M=se.x}else if(n==="x"){if(r==="center")N=(e.top+e.bottom)/2+m;else if(ye(r)){const se=Object.keys(r)[0],he=r[se];N=this.chart.scales[se].getPixelForValue(he)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-m;else if(ye(r)){const se=Object.keys(r)[0],he=r[se];M=this.chart.scales[se].getPixelForValue(he)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const ne=this._getLabelSizes();for(E=0,S=a.length;E<S;++E){x=a[E],R=x.label;const se=s.setContext(this.getContext(E));v=this.getPixelForTick(E)+s.labelOffset,k=this._resolveTickFontOptions(E),C=k.lineHeight,P=it(R)?R.length:1;const he=P/2,pe=se.color,z=se.textStrokeColor,K=se.textStrokeWidth;let G=I;o?(M=v,I==="inner"&&(E===S-1?G=this.options.reverse?"left":"right":E===0?G=this.options.reverse?"right":"left":G="center"),r==="top"?u==="near"||w!==0?D=-P*C+C/2:u==="center"?D=-ne.highest.height/2-he*C+C:D=-ne.highest.height+C/2:u==="near"||w!==0?D=C/2:u==="center"?D=ne.highest.height/2-he*C:D=ne.highest.height-P*C,d&&(D*=-1),w!==0&&!se.showLabelBackdrop&&(M+=C/2*Math.sin(w))):(N=v,D=(1-P)*C/2);let de;if(se.showLabelBackdrop){const te=Tn(se.backdropPadding),re=ne.heights[E],Ae=ne.widths[E];let qe=D-te.top,Ne=0-te.left;switch(A){case"middle":qe-=re/2;break;case"bottom":qe-=re;break}switch(I){case"center":Ne-=Ae/2;break;case"right":Ne-=Ae;break;case"inner":E===S-1?Ne-=Ae:E>0&&(Ne-=Ae/2);break}de={left:Ne,top:qe,width:Ae+te.width,height:re+te.height,color:se.backdropColor}}T.push({label:R,font:k,textOffset:D,options:{rotation:w,color:pe,strokeColor:z,strokeWidth:K,textAlign:G,textBaseline:A,translation:[M,N],backdrop:de}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Fr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return n==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=xr(e,this.left,o)-o/2,h=xr(e,this.right,a)+a/2,d=f=l):(d=xr(e,this.top,o)-o/2,f=xr(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&hy(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;lh(i,u,0,h,l,a)}r&&dy(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Dt(i.font),o=Tn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ye(n)?(l+=o.bottom,it(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=yU(this,l,n,a);lh(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:mU(a,n,r),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ce(e.grid&&e.grid.z,-1),r=ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ko.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Dt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Vu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;wU(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,_U(e,o,i),this.override&&ze.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in ze[r]&&(delete ze[r][i],this.override&&delete ss[i])}}function _U(t,e,n){const i=yl(Object.create(null),[n?ze.get(n):{},ze.get(e),t.defaults]);ze.set(e,i),t.defaultRoutes&&vU(e,t.defaultRoutes),t.descriptors&&ze.describe(e,t.descriptors)}function vU(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ze.route(s,r,l,a)})}function wU(t){return"id"in t&&"defaults"in t}class EU{constructor(){this.controllers=new Vu(ja,"datasets",!0),this.elements=new Vu(lr,"elements"),this.plugins=new Vu(Object,"plugins"),this.scales=new Vu(ko,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):_e(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=ly(e);be(i["before"+r],[],i),n[e](i),be(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var An=new EU;class TU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(be(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ie(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ce(i.options&&i.options.plugins,{}),s=IU(i);return r===!1&&!n?[]:xU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function IU(t){const e={},n=[],i=Object.keys(An.plugins.items);for(let s=0;s<i.length;s++)n.push(An.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function SU(t,e){return!e&&t===!1?null:t===!0?{}:t}function xU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=SU(i[l],r);u!==null&&s.push({plugin:a,options:bU(t.config,{plugin:a,local:n[l]},u,o)})}return s}function bU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Zp(t,e){const n=ze.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function kU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function CU(t,e){return t===e?"_index_":"_value_"}function Qw(t){if(t==="x"||t==="y"||t==="r")return t}function AU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function eg(t,...e){if(Qw(t))return t;for(const n of e){const i=n.axis||AU(n.position)||t.length>1&&Qw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Yw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function PU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Yw(t,"x",n[0])||Yw(t,"y",n[0])}return{}}function RU(t,e){const n=ss[t.type]||{scales:{}},i=e.scales||{},r=Zp(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ye(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=eg(o,a,PU(o,t),ze.scales[a.type]),u=CU(l,r),h=n.scales||{};s[o]=Ma(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Zp(a,e),h=(ss[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=kU(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),Ma(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ma(a,[ze.scales[a.type],ze.scale])}),s}function pk(t){const e=t.options||(t.options={});e.plugins=ce(e.plugins,{}),e.scales=RU(t,e)}function gk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function NU(t){return t=t||{},t.data=gk(t.data),pk(t),t}const Xw=new Map,mk=new Set;function Fu(t,e){let n=Xw.get(t);return n||(n=e(),Xw.set(t,n),mk.add(n)),n}const ia=(t,e,n)=>{const i=sh(e,n);i!==void 0&&t.add(i)};class DU{constructor(e){this._config=NU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),pk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Fu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Fu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Fu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Fu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ia(l,e,d))),h.forEach(d=>ia(l,r,d)),h.forEach(d=>ia(l,ss[s]||{},d)),h.forEach(d=>ia(l,ze,d)),h.forEach(d=>ia(l,Yp,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),mk.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,ss[n]||{},ze.datasets[n]||{},{type:n},ze,Yp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Jw(this._resolverCache,e,r);let l=o;if(OU(o,n)){s.$shared=!1,i=ar(i)?i():i;const u=this.createResolver(e,i,a);l=po(o,i,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Jw(this._resolverCache,e,i);return ye(n)?po(s,n,void 0,r):s}}function Jw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:fy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const MU=t=>ye(t)&&Object.getOwnPropertyNames(t).some(e=>ar(t[e]));function OU(t,e){const{isScriptable:n,isIndexable:i}=Zb(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(ar(a)||MU(a))||o&&it(a))return!0}return!1}var LU="4.5.1";const VU=["top","bottom","left","right","chartArea"];function Zw(t,e){return t==="top"||t==="bottom"||VU.indexOf(t)===-1&&e==="x"}function eE(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function tE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),be(n&&n.onComplete,[t],e)}function FU(t){const e=t.chart,n=e.options.animation;be(n&&n.onProgress,[t],e)}function yk(t){return my()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const cc={},nE=t=>{const e=yk(t);return Object.values(cc).filter(n=>n.canvas===e).pop()};function jU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function UU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var xi;let nd=(xi=class{static register(...e){An.add(...e),iE()}static unregister(...e){An.remove(...e),iE()}constructor(e,n){const i=this.config=new DU(n),r=yk(e),s=nE(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||rU(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=$F(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new TU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cj(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],cc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Kn.listen(this,"complete",tE),Kn.listen(this,"progress",FU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Ie(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return An}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xw(this.canvas,this.ctx),this}stop(){return Kn.stop(this),this}resize(e,n){Kn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Cw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),be(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};_e(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=eg(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),_e(s,o=>{const a=o.options,l=a.id,u=eg(l,a),h=ce(a.type,o.dtype);(a.position===void 0||Zw(a.position,u)!==Zw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=An.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),_e(r,(o,a)=>{o||delete i[a]}),_e(i,o=>{Bi.configure(this,o,o.options),Bi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(eE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Zp(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=An.getController(a),{datasetElementType:u,dataElementType:h}=ze.datasets[a];Object.assign(l,{dataElementType:An.getElement(h),datasetElementType:u&&An.getElement(u)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){_e(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||_e(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(eE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){_e(this.scales,e=>{Bi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!gw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;jU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!gw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bi.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],_e(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ar(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Kn.has(this)?this.attached&&!Kn.running(this)&&Kn.start(this):(this.draw(),tE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=y4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&hy(n,r),e.controller.draw(),r&&dy(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return vl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=V4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=fs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);oh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Kn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),xw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete cc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};_e(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){_e(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},_e(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ih(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=QF(e),u=UU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,be(s.onHover,[e,a,this],this),l&&be(s.onClick,[e,a,this],this));const h=!ih(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},ie(xi,"defaults",ze),ie(xi,"instances",cc),ie(xi,"overrides",ss),ie(xi,"registry",An),ie(xi,"version",LU),ie(xi,"getChart",nE),xi);function iE(){return _e(nd.instances,t=>t._plugins.invalidate())}function _k(t,e,n=e){t.lineCap=ce(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ce(n.borderDash,e.borderDash)),t.lineDashOffset=ce(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ce(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ce(n.borderWidth,e.borderWidth),t.strokeStyle=ce(n.borderColor,e.borderColor)}function BU(t,e,n){t.lineTo(n.x,n.y)}function zU(t){return t.stepped?Sj:t.tension||t.cubicInterpolationMode==="monotone"?xj:BU}function vk(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:u<l&&!h?i+u-l:u-l}}function $U(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:u}=vk(r,n,i),h=zU(s);let{move:d=!0,reverse:f}=i||{},m,_,w;for(m=0;m<=u;++m)_=r[(a+(f?u-m:m))%o],!_.skip&&(d?(t.moveTo(_.x,_.y),d=!1):h(t,w,_,f,s.stepped),w=_);return l&&(_=r[(a+(f?u:0))%o],h(t,w,_,f,s.stepped)),!!l}function WU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=vk(r,n,i),{move:l=!0,reverse:u}=i||{};let h=0,d=0,f,m,_,w,T,E;const S=R=>(o+(u?a-R:R))%s,x=()=>{w!==T&&(t.lineTo(h,T),t.lineTo(h,w),t.lineTo(h,E))};for(l&&(m=r[S(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=r[S(f)],m.skip)continue;const R=m.x,M=m.y,N=R|0;N===_?(M<w?w=M:M>T&&(T=M),h=(d*h+R)/++d):(x(),t.lineTo(R,M),_=N,d=0,w=T=M),E=M}x()}function tg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?WU:$U}function HU(t){return t.stepped?r4:t.tension||t.cubicInterpolationMode==="monotone"?s4:Nr}function qU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),_k(t,e.options),t.stroke(r)}function KU(t,e,n,i){const{segments:r,options:s}=e,o=tg(e);for(const a of r)_k(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const GU=typeof Path2D=="function";function QU(t,e,n,i){GU&&!e.options.segment?qU(t,e,n,i):KU(t,e,n,i)}class ya extends lr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Yj(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=f4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=c4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=HU(i);let u,h;for(u=0,h=o.length;u<h;++u){const{start:d,end:f}=o[u],m=s[d],_=s[f];if(m===_){a.push(m);continue}const w=Math.abs((r-m[n])/(_[n]-m[n])),T=l(m,_,w,i.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,i){return tg(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=tg(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),QU(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ie(ya,"id","line"),ie(ya,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ie(ya,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ie(ya,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function rE(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class hc extends lr{constructor(n){super();ie(this,"parsed");ie(this,"skip");ie(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return rE(this,n,"x",i)}inYRange(n,i){return rE(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!vl(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Xp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ie(hc,"id","point"),ie(hc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ie(hc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const sE=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},YU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class oE extends lr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=be(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Dt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=sE(i,s);let u,h;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((_,w)=>{const T=i+n/2+s.measureText(_.text).width;(w===0||u[u.length-1]+T+2*a>o)&&(d+=h,u[u.length-(w>0?0:1)]=0,m+=h,f++),l[w]={left:0,top:m,row:f,width:T,height:r},u[u.length-1]+=T+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,_=0,w=0;return this.legendItems.forEach((T,E)=>{const{itemWidth:S,itemHeight:x}=XU(i,n,s,T,r);E>0&&m+x+2*a>h&&(d+=f+a,u.push({width:f,height:m}),_+=f+a,w++,f=m=0),l[E]={left:_,top:m,col:w,width:S,height:x},f=Math.max(f,S),m+=x+a}),d+=f,u.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Qs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Bt(i,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Bt(i,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=Bt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Bt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;hy(e,this),this._draw(),dy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=ze.color,l=Qs(e.rtl,this.left,this.width),u=Dt(o.font),{padding:h}=o,d=u.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:_,boxHeight:w,itemHeight:T}=sE(o,d),E=function(N,I,v){if(isNaN(_)||_<=0||isNaN(w)||w<0)return;r.save();const k=ce(v.lineWidth,1);if(r.fillStyle=ce(v.fillStyle,a),r.lineCap=ce(v.lineCap,"butt"),r.lineDashOffset=ce(v.lineDashOffset,0),r.lineJoin=ce(v.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=ce(v.strokeStyle,a),r.setLineDash(ce(v.lineDash,[])),o.usePointStyle){const C={radius:w*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:k},P=l.xPlus(N,_/2),D=I+f;Xb(r,C,P,D,o.pointStyleWidth&&_)}else{const C=I+Math.max((d-w)/2,0),P=l.leftForLtr(N,_),D=Fa(v.borderRadius);r.beginPath(),Object.values(D).some(A=>A!==0)?Jp(r,{x:P,y:C,w:_,h:w,radius:D}):r.rect(P,C,_,w),r.fill(),k!==0&&r.stroke()}r.restore()},S=function(N,I,v){lh(r,v.text,N,I+T/2,u,{strikethrough:v.hidden,textAlign:l.textAlign(v.textAlign)})},x=this.isHorizontal(),R=this._computeTitleHeight();x?m={x:Bt(s,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:Bt(s,this.top+R+h,this.bottom-n[0].height),line:0},rk(this.ctx,e.textDirection);const M=T+h;this.legendItems.forEach((N,I)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const v=r.measureText(N.text).width,k=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),C=_+f+v;let P=m.x,D=m.y;l.setWidth(this.width),x?I>0&&P+C+h>this.right&&(D=m.y+=M,m.line++,P=m.x=Bt(s,this.left+h,this.right-i[m.line])):I>0&&D+M>this.bottom&&(P=m.x=P+n[m.line].width+h,m.line++,D=m.y=Bt(s,this.top+R+h,this.bottom-n[m.line].height));const A=l.x(P);if(E(A,D,N),P=hj(k,P+_+f,x?P+C:this.right,e.rtl),S(l.x(P),D,N),x)m.x+=C+h;else if(typeof N.text!="string"){const ne=u.lineHeight;m.y+=wk(N,ne)+h}else m.y+=M}),sk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Dt(n.font),r=Tn(n.padding);if(!n.display)return;const s=Qs(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,u=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=Bt(e.align,d,this.right-f);else{const _=this.columnSizes.reduce((w,T)=>Math.max(w,T.height),0);h=u+Bt(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const m=Bt(a,d,d+f);o.textAlign=s.textAlign(Gb(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,lh(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Dt(e.font),i=Tn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(ga(e,this.left,this.right)&&ga(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],ga(e,r.left,r.left+r.width)&&ga(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!eB(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=YU(r,i);r&&!s&&be(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&be(n.onHover,[e,i,this],this)}else i&&be(n.onClick,[e,i,this],this)}}function XU(t,e,n,i,r){const s=JU(i,t,e,n),o=ZU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function JU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function ZU(t,e,n){let i=t;return typeof e.text!="string"&&(i=wk(e,n)),i}function wk(t,e){const n=t.text?t.text.length:0;return e*n}function eB(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var tB={id:"legend",_element:oE,start(t,e,n){const i=t.legend=new oE({ctx:t.ctx,options:n,chart:t});Bi.configure(t,i,n),Bi.addBox(t,i)},stop(t){Bi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Bi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=Tn(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const _a={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Qp(e,u);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function kn(t,e){return e&&(it(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Gn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function nB(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function aE(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Dt(e.bodyFont),u=Dt(e.titleFont),h=Dt(e.footerFont),d=s.length,f=r.length,m=i.length,_=Tn(e.padding);let w=_.height,T=0,E=i.reduce((R,M)=>R+M.before.length+M.lines.length+M.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,d&&(w+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),E){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=m*R+(E-m)*l.lineHeight+(E-1)*e.bodySpacing}f&&(w+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let S=0;const x=function(R){T=Math.max(T,n.measureText(R).width+S)};return n.save(),n.font=u.string,_e(t.title,x),n.font=l.string,_e(t.beforeBody.concat(t.afterBody),x),S=e.displayColors?o+2+e.boxPadding:0,_e(i,R=>{_e(R.before,x),_e(R.lines,x),_e(R.after,x)}),S=0,n.font=h.string,_e(t.footer,x),n.restore(),T+=_.width,{width:T,height:w}}function iB(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function rB(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function sB(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return i==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),rB(u,t,e,n)&&(u="center"),u}function lE(t,e,n){const i=n.yAlign||e.yAlign||iB(t,n);return{xAlign:n.xAlign||e.xAlign||sB(t,e,n,i),yAlign:i}}function oB(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function aB(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function uE(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=Fa(o);let _=oB(e,a);const w=aB(e,l,u);return l==="center"?a==="left"?_+=u:a==="right"&&(_-=u):a==="left"?_-=Math.max(h,f)+r:a==="right"&&(_+=Math.max(d,m)+r),{x:Zt(_,0,i.width-e.width),y:Zt(w,0,i.height-e.height)}}function ju(t,e,n){const i=Tn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function cE(t){return kn([],Gn(t))}function lB(t,e,n){return fs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function hE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Ek={beforeTitle:qn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:qn,beforeBody:qn,beforeLabel:qn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ie(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:qn,afterBody:qn,beforeFooter:qn,footer:qn,afterFooter:qn};function Ct(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?Ek[e].call(n,i):r}class ng extends lr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new ak(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=lB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Ct(i,"beforeTitle",this,e),s=Ct(i,"title",this,e),o=Ct(i,"afterTitle",this,e);let a=[];return a=kn(a,Gn(r)),a=kn(a,Gn(s)),a=kn(a,Gn(o)),a}getBeforeBody(e,n){return cE(Ct(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return _e(e,s=>{const o={before:[],lines:[],after:[]},a=hE(i,s);kn(o.before,Gn(Ct(a,"beforeLabel",this,s))),kn(o.lines,Ct(a,"label",this,s)),kn(o.after,Gn(Ct(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return cE(Ct(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Ct(i,"beforeFooter",this,e),s=Ct(i,"footer",this,e),o=Ct(i,"afterFooter",this,e);let a=[];return a=kn(a,Gn(r)),a=kn(a,Gn(s)),a=kn(a,Gn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(nB(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),_e(a,h=>{const d=hE(e.callbacks,h);r.push(Ct(d,"labelColor",this,h)),s.push(Ct(d,"labelPointStyle",this,h)),o.push(Ct(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=_a[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=aE(this,i),u=Object.assign({},a,l),h=lE(this.chart,i,u),d=uE(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=Fa(a),{x:f,y:m}=e,{width:_,height:w}=n;let T,E,S,x,R,M;return s==="center"?(R=m+w/2,r==="left"?(T=f,E=T-o,x=R+o,M=R-o):(T=f+_,E=T+o,x=R-o,M=R+o),S=T):(r==="left"?E=f+Math.max(l,h)+o:r==="right"?E=f+_-Math.max(u,d)-o:E=this.caretX,s==="top"?(x=m,R=x-o,T=E-o,S=E+o):(x=m+w,R=x+o,T=E+o,S=E-o),M=x),{x1:T,x2:E,x3:S,y1:x,y2:R,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const u=Qs(i.rtl,this.x,this.width);for(e.x=ju(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",o=Dt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=Dt(s.bodyFont),d=ju(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,_=n.y+m;if(s.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=r.leftForLtr(f,u)+u/2,E=_+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Xp(e,w,T,E),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Xp(e,w,T,E)}else{e.lineWidth=ye(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=r.leftForLtr(f,u),T=r.leftForLtr(r.xPlus(f,1),u-2),E=Fa(o.borderRadius);Object.values(E).some(S=>S!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Jp(e,{x:w,y:_,w:u,h:l,radius:E}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Jp(e,{x:T,y:_+1,w:u-2,h:l-2,radius:E}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(w,_,u,l),e.strokeRect(w,_,u,l),e.fillStyle=o.backgroundColor,e.fillRect(T,_+1,u-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=i,d=Dt(i.bodyFont);let f=d.lineHeight,m=0;const _=Qs(i.rtl,this.x,this.width),w=function(v){n.fillText(v,_.x(e.x+m),e.y+f/2),e.y+=f+s},T=_.textAlign(o);let E,S,x,R,M,N,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=ju(this,T,i),n.fillStyle=i.bodyColor,_e(this.beforeBody,w),m=a&&T!=="right"?o==="center"?u/2+h:u+2+h:0,R=0,N=r.length;R<N;++R){for(E=r[R],S=this.labelTextColors[R],n.fillStyle=S,_e(E.before,w),x=E.lines,a&&x.length&&(this._drawColorBox(n,e,R,_,i),f=Math.max(d.lineHeight,l)),M=0,I=x.length;M<I;++M)w(x[M]),f=d.lineHeight;_e(E.after,w)}m=0,f=d.lineHeight,_e(this.afterBody,w),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Qs(i.rtl,this.x,this.width);for(e.x=ju(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Dt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:_}=Fa(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+u,l+h-_),n.quadraticCurveTo(a+u,l+h,a+u-_,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=_a[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=aE(this,e),l=Object.assign({},o,this._size),u=lE(n,e,l),h=uE(e,l,u,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Tn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),rk(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),sk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!ih(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!ih(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=_a[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}ie(ng,"positioners",_a);var uB={id:"tooltip",_element:ng,positioners:_a,afterInit(t,e,n){n&&(t.tooltip=new ng({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ek},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const cB=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function hB(t,e,n,i){const r=t.indexOf(e);if(r===-1)return cB(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const dB=(t,e)=>t===null?null:Zt(Math.round(t),0,e);function dE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ig extends ko{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ie(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:hB(i,e,ce(n,e),this._addedLabels),dB(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return dE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ie(ig,"id","category"),ie(ig,"defaults",{ticks:{callback:dE}});function fB(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,_=h-1,{min:w,max:T}=e,E=!Ie(o),S=!Ie(a),x=!Ie(u),R=(T-w)/(d+1);let M=yw((T-w)/_/m)*m,N,I,v,k;if(M<1e-14&&!E&&!S)return[{value:w},{value:T}];k=Math.ceil(T/M)-Math.floor(w/M),k>_&&(M=yw(k*M/_/m)*m),Ie(l)||(N=Math.pow(10,l),M=Math.ceil(M*N)/N),r==="ticks"?(I=Math.floor(w/M)*M,v=Math.ceil(T/M)*M):(I=w,v=T),E&&S&&s&&ej((a-o)/s,M/1e3)?(k=Math.round(Math.min((a-o)/M,h)),M=(a-o)/k,I=o,v=a):x?(I=E?o:I,v=S?a:v,k=u-1,M=(v-I)/k):(k=(v-I)/M,Oa(k,Math.round(k),M/1e3)?k=Math.round(k):k=Math.ceil(k));const C=Math.max(_w(M),_w(I));N=Math.pow(10,Ie(l)?C:l),I=Math.round(I*N)/N,v=Math.round(v*N)/N;let P=0;for(E&&(f&&I!==o?(n.push({value:o}),I<o&&P++,Oa(Math.round((I+P*M)*N)/N,o,fE(o,R,t))&&P++):I<o&&P++);P<k;++P){const D=Math.round((I+P*M)*N)/N;if(S&&D>a)break;n.push({value:D})}return S&&f&&v!==a?n.length&&Oa(n[n.length-1].value,a,fE(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!S||v===a)&&n.push({value:v}),n}function fE(t,e,{horizontal:n,minRotation:i}){const r=Fr(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class pB extends ko{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ie(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=fo(r),u=fo(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=fB(r,s);return e.bounds==="ticks"&&tj(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Qb(e,this.chart.options.locale,this.options.ticks.format)}}class rg extends pB{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=on(e)?e:0,this.max=on(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Fr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ie(rg,"id","linear"),ie(rg,"defaults",{ticks:{callback:Yb.formatters.numeric}});const id={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rt=Object.keys(id);function pE(t,e){return t-e}function gE(t,e){if(Ie(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),on(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(_l(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function mE(t,e,n,i){const r=Rt.length;for(let s=Rt.indexOf(t);s<r-1;++s){const o=id[Rt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Rt[s]}return Rt[r-1]}function gB(t,e,n,i,r){for(let s=Rt.length-1;s>=Rt.indexOf(n);s--){const o=Rt[s];if(id[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Rt[n?Rt.indexOf(n):0]}function mB(t){for(let e=Rt.indexOf(t)+1,n=Rt.length;e<n;++e)if(id[Rt[e]].common)return Rt[e]}function yE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=uy(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function yB(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function _E(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:yB(t,i,r,n)}class hh extends ko{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new N4._date(e.adapters.date);r.init(n),Ma(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:gE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=on(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=on(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=aj(r,s,o);return this._unit=n.unit||(i.autoSkip?mE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):gB(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:mB(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),_E(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Zt(n,0,o),i=Zt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||mE(s.minUnit,n,i,this._getLabelCapacity(n)),a=ce(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=_l(l)||l===!0,h={};let d=n,f,m;if(u&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,u?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const _=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)yE(h,f,_);return(f===i||r.bounds==="ticks"||m===1)&&yE(h,f,_),Object.keys(h).sort(pE).map(w=>+w)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return be(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=i[n],m=u&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Fr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,_E(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(gE(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return uj(e.sort(pE))}}ie(hh,"id","time"),ie(hh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Uu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=jr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=jr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class vE extends hh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Uu(n,this.min),this._tableRange=Uu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=i&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],u=r[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Uu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Uu(this._table,i*this._tableRange+this._minPos,!0)}}ie(vE,"id","timeseries"),ie(vE,"defaults",hh.defaults);nd.register(ya,hc,rg,ig,uB,tB);const Tk="label";function wE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function _B(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Ik(t,e){t.labels=e}function Sk(t,e,n=Tk){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function vB(t,e=Tk){const n={labels:[],datasets:[]};return Ik(n,t.labels),Sk(n,t.datasets,e),n}function wB(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:d,...f}=t,m=O.useRef(null),_=O.useRef(null),w=()=>{m.current&&(_.current=new nd(m.current,{type:o,data:vB(a,s),options:l&&{...l},plugins:u}),wE(e,_.current))},T=()=>{wE(e,null),_.current&&(_.current.destroy(),_.current=null)};return O.useEffect(()=>{!r&&_.current&&l&&_B(_.current,l)},[r,l]),O.useEffect(()=>{!r&&_.current&&Ik(_.current.config.data,a.labels)},[r,a.labels]),O.useEffect(()=>{!r&&_.current&&a.datasets&&Sk(_.current.config.data,a.datasets,s)},[r,a.datasets]),O.useEffect(()=>{_.current&&(r?(T(),setTimeout(w)):_.current.update(d))},[r,l,a.labels,a.datasets,d]),O.useEffect(()=>{_.current&&(T(),setTimeout(w))},[o]),O.useEffect(()=>(w(),()=>T()),[]),y.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const EB=O.forwardRef(wB);function TB(t,e){return nd.register(e),O.forwardRef((n,i)=>y.jsx(EB,{...n,ref:i,type:t}))}const vy=TB("line",lc);function IB({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(vy,{data:r,options:s})})]})}function SB({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],i=t.map(u=>u.dateIso),r=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.bench}),s=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.squat}),o=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.deadlift}),a={labels:i,datasets:[{label:`${n[0]} (7-day WMA)`,data:r,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[1]} (7-day WMA)`,data:s,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[2]} (7-day WMA)`,data:o,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:u=>{var h,d;return`${u.dataset.label}: ${(d=(h=u.parsed.y)==null?void 0:h.toFixed)==null?void 0:d.call(h,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(vy,{data:a,options:l})})]})}function xB({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>a.calories),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (raw)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.15}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Smoothed Weight/Strength vs Raw Calories"}),y.jsx("div",{className:"chart-inner",children:y.jsx(vy,{data:s,options:o})})]})}function kr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function bB(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function kB(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function CB({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Weekly Analysis"}),y.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Week #"}),y.jsx("th",{children:"Avg Calories"}),y.jsx("th",{children:"Weight Change (kg)"}),y.jsx("th",{children:"Calculated TDEE"}),y.jsx("th",{children:"TDEE "}),y.jsx("th",{children:"Adaptation %"}),y.jsx("th",{children:"LBM (kg)"}),y.jsx("th",{children:"Loss Rate vs LBM %"}),y.jsx("th",{children:"Status"})]})}),y.jsx("tbody",{children:t.weeks.map(n=>y.jsxs("tr",{children:[y.jsx("td",{children:n.week}),y.jsx("td",{children:kr(n.avgCalories,0)}),y.jsx("td",{children:kr(n.weightChange,2)}),y.jsx("td",{children:kr(n.tdee,0)}),y.jsx("td",{children:kr(n.tdeeChangeFromBaseline,0)}),y.jsx("td",{className:bB(n.adaptationPct),children:kr(n.adaptationPct,1)}),y.jsx("td",{children:kr(n.lbm,1)}),y.jsx("td",{children:kr(n.lossRatePct,2)}),y.jsx("td",{className:kB(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),y.jsxs("div",{className:"notice info",style:{marginTop:12},children:[y.jsx("div",{children:y.jsx("b",{children:"How to read this:"})}),y.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[y.jsxs("div",{children:[y.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",y.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function Tt(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function EE(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function TE(t,e){const n=th(t).getTime(),i=th(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function IE(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function AB(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function PB({derived:t,weekly:e,profile:n}){const i=O.useMemo(()=>{var S,x,R,M;if(!(t!=null&&t.length))return[];const r=t[t.length-1],s=r.dateIso,o=(S=e==null?void 0:e.weeks)!=null&&S.length?e.weeks[e.weeks.length-1]:null,a=e==null?void 0:e.baselineTdee,l=e==null?void 0:e.baselineStrength,u=e==null?void 0:e.baselineWeeklyLoss,h=t.filter(N=>{const I=TE(s,N.dateIso);return I>=0&&I<=6}),d=h.length,f=IE(h.map(N=>N.protein)),m=IE(h.map(N=>N.calories)),_=Number.isFinite((x=r==null?void 0:r.wma)==null?void 0:x.weight)?r.wma.weight:r.weight,w=[];if(o&&Number.isFinite(a)&&Number.isFinite(o.tdee)&&Number.isFinite(o.adaptationPct)){const N=Math.max(0,-o.adaptationPct);let I="good";N>=10?I="bad":N>=5&&(I="warn");const v=o.adaptationPct<0?"dropped":"increased",k=`${Tt(Math.abs(o.adaptationPct),0)}%`;w.push({key:"adaptation",level:I,title:"Metabolic adaptation",message:`Your TDEE has ${v} ${k} from baseline (${Tt(a,0)}  ${Tt(o.tdee,0)} kcal).`,action:I!=="good"?"Consider a refeed day or reducing training volume.":null})}if(o&&Number.isFinite(o.lossRatePct)){const N=String(o.lossRateStatus||"").toUpperCase();let I="info";o.lossRateStatus==="Optimal"&&(I="good"),o.lossRateStatus==="Aggressive"&&(I="bad");const v=o.lossRateStatus==="Aggressive"?"Risk of muscle loss.":o.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";w.push({key:"lossrate",level:I,title:"Loss rate vs LBM",message:`This week: ${Tt(o.lossRatePct,1)}% of LBM lost  ${N}. ${v}`,action:null})}if(o&&Number.isFinite(l)&&Number.isFinite(o.avgStrengthWma)){const N=(o.avgStrengthWma-l)/l*100;let I="good",v="",k="Strength maintained/increasing.",C=null;N<-7.5?(I="bad",v="",k="Strength declining significantly.",C="Consider eating more or reducing cardio."):N<-5&&(I="warn",v="",k="Strength declining.",C="Consider eating more or reducing cardio."),w.push({key:"strength",level:I,title:"Strength trend",message:`${k} ${v} (${Tt(N,1)}% vs baseline)`,action:C})}if(o&&Number.isFinite(o.tdee)&&Number.isFinite(o.lbm)){const N=o.lbm,I=.005*N,v=.01*N,k=I*7700/7,C=v*7700/7,P=o.tdee-k,D=o.tdee-C,A=EE(Math.min(D,P),50),ne=EE(Math.max(D,P),50);w.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${A}-${ne} kcal/day this week.`,action:null})}d<6&&w.push({key:"completeness",level:"warn",title:"Data completeness",message:`${d}/7 days logged this week  missing data may affect accuracy.`,action:null});let T=null;for(let N=t.length-1;N>=0;N--)if(Number.isFinite((R=t[N])==null?void 0:R.bfPct)){T=t[N].dateIso;break}if(!T)w.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const N=TE(s,T);N>=7?w.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):w.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-N} day(s).`,action:null})}if(Number.isFinite(f)&&Number.isFinite(_)){const N=1.6*_,I=2.2*_;if(f<N){const v=(N-f)/N*100;w.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${Tt(v,0)}% below the muscle-retention range (${Tt(f,0)}g/day vs ${Tt(N,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else f>I?w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${Tt(f,0)}g/day).`,action:null}):w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${Tt(f,0)}g/day).`,action:null})}if(o&&Number.isFinite(u)&&Number.isFinite(o.weightChange)){const N=Math.max(0,-o.weightChange),I=u;(N<.2||I>.2&&N<I*.35)&&w.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${Tt(N,1)}kg this week vs ${Tt(I,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const E=Number(n==null?void 0:n.targetWeight);if(Number.isFinite(E)&&Number.isFinite((M=t[0])==null?void 0:M.weight)&&Number.isFinite(_)){const N=t[0].weight;if(N>E){const I=N-_,v=N-E,k=Math.max(0,Math.min(1,I/v))*100,C=Math.floor(I/5)*5;C>=5&&w.push({key:"milestone",level:"good",title:"Progress milestone",message:`${Tt(C,0)}kg down! Youre ${Tt(k,0)}% to your goal.`,action:null})}}return o||(w.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(m)&&w.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${Tt(m,0)} kcal/day.`,action:null})),w},[t,e,n]);return i.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Insights"}),y.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),y.jsx("div",{className:"grid",style:{marginTop:12},children:i.map(r=>y.jsxs("div",{className:`card insight-card ${AB(r.level)}`,style:{gridColumn:"span 6"},children:[y.jsx("div",{className:"insight-title",children:r.title}),y.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:r.message}),r.action&&y.jsx("div",{className:"small",style:{marginTop:8},children:r.action})]},r.key))})]}):null}function RB(t){return t==="cut"?"Cut":t==="bulk"?"Bulk":t==="maintain"?"Maintain":String(t||"")}function Si(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function xk({view:t="dashboard"}){const e=Eo(),{user:n}=mi(),{profile:i}=ny(),r=Array.isArray(i==null?void 0:i.liftNames)&&i.liftNames.length===3?i.liftNames:["Bench Press","Squat","Deadlift"],[s,o]=O.useState([]),[a,l]=O.useState([]),[u,h]=O.useState(null);O.useEffect(()=>{if(h(null),!n)return;const N=ry(n.uid,I=>o(I),I=>h((I==null?void 0:I.message)||"Failed to load entries."));return()=>N()},[n]),O.useEffect(()=>{if(!n){l([]);return}const N=Fb(n.uid,I=>l(I),()=>{});return()=>N()},[n]);const d=O.useMemo(()=>yF(),[]),f=O.useMemo(()=>_F(60),[]),m=O.useMemo(()=>f!=null&&f.length?[{id:"demo",type:"cut",startDateIso:f[0].dateIso,endDateIso:null}]:[],[f]),_=n?i:d,w=n?s:f,T=n?a:m,E=O.useMemo(()=>{if(!(T!=null&&T.length))return null;const N=nh(),I=T.find(k=>!k.endDateIso);return I||T.find(k=>(k.startDateIso||"")<=N&&(k.endDateIso||"")>=N)||null},[T]);function S(){if(!n){e("/signup");return}e("/profile#cycles")}const x=O.useMemo(()=>Vb(w,_||{}),[w,_]),R=O.useMemo(()=>mF(x),[x]),M=O.useMemo(()=>{var pe;if(!x.length)return null;const N=x[0],I=x[x.length-1],v=(pe=I==null?void 0:I.wma)==null?void 0:pe.weight,k=Number.isFinite(N.weight)&&Number.isFinite(I.weight)?I.weight-N.weight:null,C=I.calories,P=N.calories,D=Number.isFinite(C)&&Number.isFinite(P)?C-P:null,A=I.avgStrength,ne=N.avgStrength,se=Number.isFinite(A)&&Number.isFinite(ne)?A-ne:null;let he=null;for(let z=x.length-1;z>=0;z--)if(Number.isFinite(x[z].bfPct)){he=x[z].bfPct;break}return{weightTrend:v,totalLost:k,calNow:C,calDelta:D,strengthNow:A,strengthDelta:se,bf:he}},[x]);return y.jsxs(y.Fragment,{children:[!n&&y.jsxs("div",{className:"notice info",style:{marginTop:14},children:[y.jsx("b",{children:"Demo mode:"})," This dashboard is showing 60 days of realistic sample data. Log in to start tracking your own."]}),n&&(!(_!=null&&_.sex)||!(_!=null&&_.height))&&y.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",y.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),u&&y.jsx("div",{className:"notice error",style:{marginTop:14},children:u}),t==="insights"&&y.jsx(PB,{derived:x,weekly:R,profile:_||{}}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Summary"}),y.jsx("button",{className:"btn",type:"button",onClick:S,children:E?RB(E.type).toUpperCase():"CREATE NEW CYCLE"})]}),!M||!x.length?y.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",y.jsx("b",{children:"Entry"}),"."]}):y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),y.jsxs("div",{className:"big",children:[Si(M.weightTrend,1)," kg"]}),y.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Total weight change"}),y.jsxs("div",{className:"big",children:[Si(M.totalLost,1)," kg"]}),y.jsx("div",{className:"small",children:"Negative = loss"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Calories now / change from start"}),y.jsxs("div",{className:"big",children:[Si(M.calNow,0)," kcal"]}),y.jsxs("div",{className:"small",children:[" ",Si(M.calDelta,0)," kcal"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Average strength now"}),y.jsxs("div",{className:"big",children:[Si(M.strengthNow,1)," kg"]}),y.jsxs("div",{className:"small",children:[" ",Si(M.strengthDelta,1)," kg"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),y.jsx("div",{className:"big",children:M.bf===null?"":`${Si(M.bf,1)}%`}),y.jsx("div",{className:"small",children:"Most recent measurement day"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),y.jsx("div",{className:"big",children:Number.isFinite(R.baselineTdee)?`${Si(R.baselineTdee,0)} kcal`:""}),y.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),x.length>0&&y.jsxs("div",{className:"grid",style:{marginTop:14},children:[y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(IB,{derived:x})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(SB,{derived:x,liftNames:r})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(xB,{derived:x})})]}),x.length>=14&&y.jsx(CB,{weekly:R})]})}function NB(){return y.jsx(xk,{view:"insights"})}function DB(){const{user:t,login:e,authError:n,clearAuthError:i}=mi(),r=Eo(),s=fr(),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,m]=O.useState(null);O.useEffect(()=>{i==null||i()},[]),O.useEffect(()=>{t&&r("/dashboard")},[t]);async function _(w){var T;w.preventDefault(),m(null),d(!0);try{await e(o.trim(),l);const E=((T=s.state)==null?void 0:T.from)||"/dashboard";r(E)}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Log in"}),y.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&y.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),y.jsxs("form",{onSubmit:_,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:l,onChange:w=>u(w.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),y.jsx(sl,{className:"btn",to:"/reset-password",children:"Forgot password"}),y.jsx(sl,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function MB(){const{signup:t,authError:e,clearAuthError:n}=mi(),i=Eo(),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,m]=O.useState(null);O.useEffect(()=>{n==null||n()},[]);async function _(w){if(w.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Create account"}),y.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&y.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),y.jsxs("form",{onSubmit:_,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:r,onChange:w=>s(w.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"password",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm password"}),y.jsx("input",{value:l,onChange:w=>u(w.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),y.jsx(sl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function OB(){const{resetPassword:t,authError:e,clearAuthError:n}=mi(),[i,r]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(!1);O.useEffect(()=>{n==null||n()},[]);async function u(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Reset password"}),y.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&y.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),y.jsxs("form",{onSubmit:u,style:{marginTop:12},children:[y.jsx("div",{className:"row",children:y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),y.jsx(sl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function LB(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function VB(t,e){const n=e.map(o=>o.map(LB).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function FB({entries:t,derived:e}){var s,o,a,l,u,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchKg","squatKg","deadliftKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.bench,d.squat,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(u=f==null?void 0:f.wma)==null?void 0:u.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}const Ts=["Bench Press","Squat","Deadlift"];function If(t){return t==="cut"?"Cut":t==="bulk"?"Bulk":t==="maintain"?"Maintain":String(t||"")}function jB(){const{user:t}=mi(),e=fr(),{profile:n,updateProfile:i,loading:r,profileError:s}=ny(),[o,a]=O.useState(n.sex||""),[l,u]=O.useState(n.height||""),[h,d]=O.useState(n.targetWeight??""),[f,m]=O.useState(!!n.triplemeasurements),_=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Ts,[w,T]=O.useState(_[0]),[E,S]=O.useState(_[1]),[x,R]=O.useState(_[2]),[M,N]=O.useState(!1),[I,v]=O.useState(null),[k,C]=O.useState(""),[P,D]=O.useState(""),[A,ne]=O.useState(""),[se,he]=O.useState([]),[pe,z]=O.useState("cut"),[K,G]=O.useState(nh()),[de,te]=O.useState(null),re=O.useMemo(()=>se.find(j=>!j.endDateIso)||null,[se]),[Ae,qe]=O.useState([]),[Ne,jt]=O.useState(!1);O.useEffect(()=>{a(n.sex||""),u(n.height||""),d(n.targetWeight??""),m(!!n.triplemeasurements);const j=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Ts;T(j[0]),S(j[1]),R(j[2])},[n.sex,n.height,n.targetWeight,n.triplemeasurements,n.liftNames]),O.useEffect(()=>{(e==null?void 0:e.hash)==="#cycles"&&setTimeout(()=>{var j;(j=document.getElementById("cycles"))==null||j.scrollIntoView({behavior:"smooth",block:"start"})},50)},[e==null?void 0:e.hash]),O.useEffect(()=>{if(he([]),te(null),!t)return;const j=Fb(t.uid,Y=>he(Y),Y=>te((Y==null?void 0:Y.message)||"Failed to load cycles."));return()=>j()},[t]);async function mr(j){j.preventDefault(),v(null),N(!0);try{const Y=Number(l);if(!o)throw new Error("Sex is required.");if(!Number.isFinite(Y)||Y<=0)throw new Error("Height must be a positive number (cm).");let ln=null;if(String(h).trim()!==""&&(ln=Number(h),!Number.isFinite(ln)||ln<=0))throw new Error("Target weight must be a positive number (kg).");const _r=[w,E,x].map((rd,Bl)=>String(rd??"").trim()||Ts[Bl]);await i({sex:o,height:Y,targetWeight:ln,triplemeasurements:!!f,liftNames:_r}),v({type:"success",text:"Profile saved."})}catch(Y){v({type:"error",text:(Y==null?void 0:Y.message)||"Failed to save profile."})}finally{N(!1)}}async function Co(j){j.preventDefault(),v(null),N(!0);try{if(!pe)throw new Error("Pick a cycle type.");if(!K)throw new Error("Pick a start date.");await vF(t.uid,{type:pe,startDateIso:K,activeCycle:re?{id:re.id,startDateIso:re.startDateIso}:null}),v({type:"success",text:`Cycle started: ${If(pe)}.`})}catch(Y){v({type:"error",text:(Y==null?void 0:Y.message)||"Failed to start cycle."})}finally{N(!1)}}async function an(j){v(null),N(!0);try{await wF(t.uid,j,nh()),v({type:"success",text:"Cycle ended."})}catch(Y){v({type:"error",text:(Y==null?void 0:Y.message)||"Failed to end cycle."})}finally{N(!1)}}async function yi(j){if(j.preventDefault(),v(null),!!(t!=null&&t.email)){if(P!==A){v({type:"error",text:"New passwords do not match."});return}N(!0);try{const Y=us.credential(t.email,k);await cD(t,Y),await pD(t,P),C(""),D(""),ne(""),v({type:"success",text:"Password updated."})}catch(Y){v({type:"error",text:(Y==null?void 0:Y.message)||"Failed to update password."})}finally{N(!1)}}}async function _i(){if(!Ne)return new Promise((j,Y)=>{const ln=ry(t.uid,_r=>{qe(_r),jt(!0),ln(),j()},_r=>{Y(_r)})})}async function yr(){v(null),N(!0);try{await _i();const j=Vb(Ae,{...n,sex:o,height:Number(l),triplemeasurements:!!f}),Y=FB({entries:Ae,derived:j}),ln=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;VB(ln,Y),v({type:"success",text:"CSV downloaded."})}catch(j){v({type:"error",text:(j==null?void 0:j.message)||"Failed to export CSV."})}finally{N(!1)}}return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Profile & Settings"}),y.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),s&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:s}),I&&y.jsx("div",{className:`notice ${I.type==="error"?"error":"success"}`,style:{marginTop:12},children:I.text}),y.jsxs("form",{onSubmit:mr,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Sex (required for Navy BF%)"}),y.jsxs("select",{value:o,onChange:j=>a(j.target.value),required:!0,children:[y.jsx("option",{value:"",children:"Select"}),y.jsx("option",{value:"male",children:"Male"}),y.jsx("option",{value:"female",children:"Female"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Height (cm)"}),y.jsx("input",{inputMode:"numeric",value:l,onChange:j=>u(j.target.value),placeholder:"e.g. 175",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Target weight (kg) (optional)"}),y.jsx("input",{inputMode:"numeric",value:h,onChange:j=>d(j.target.value),placeholder:"e.g. 82"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Triple measurements mode"}),y.jsxs("select",{value:f?"1":"0",onChange:j=>m(j.target.value==="1"),children:[y.jsx("option",{value:"0",children:"Off (single value per site)"}),y.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 1 name"}),y.jsx("input",{value:w,onChange:j=>T(j.target.value),placeholder:Ts[0]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 2 name"}),y.jsx("input",{value:E,onChange:j=>S(j.target.value),placeholder:Ts[1]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 3 name"}),y.jsx("input",{value:x,onChange:j=>R(j.target.value),placeholder:Ts[2]})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:M||r,children:M?"Saving":"Save profile"}),y.jsx("button",{className:"btn",type:"button",onClick:yr,disabled:M,children:"Export CSV"})]})]})]}),y.jsxs("div",{className:"panel",id:"cycles",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Cycles"}),y.jsx("div",{className:"muted",children:"Cut / Bulk / Maintain  track your phases over time."})]}),de&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:de}),y.jsxs("form",{onSubmit:Co,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Cycle type"}),y.jsxs("select",{value:pe,onChange:j=>z(j.target.value),children:[y.jsx("option",{value:"cut",children:"Cut"}),y.jsx("option",{value:"bulk",children:"Bulk"}),y.jsx("option",{value:"maintain",children:"Maintain"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Start date"}),y.jsx("input",{type:"date",value:K,onChange:j=>G(j.target.value)})]}),y.jsxs("div",{className:"field",style:{minWidth:220},children:[y.jsx("label",{children:"Current"}),y.jsx("input",{value:re?`${If(re.type)} (since ${re.startDateIso})`:"No active cycle",readOnly:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:M,children:re?"Start new cycle (ends current)":"Start cycle"}),re&&y.jsx("button",{className:"btn",type:"button",onClick:()=>an(re.id),disabled:M,children:"End current cycle (today)"})]})]}),y.jsx("hr",{className:"sep"}),y.jsx("div",{className:"table-wrap",children:y.jsxs("table",{className:"table",style:{minWidth:760},children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Type"}),y.jsx("th",{children:"Began"}),y.jsx("th",{children:"Ended"}),y.jsx("th",{children:"Status"}),y.jsx("th",{children:"Actions"})]})}),y.jsx("tbody",{children:se.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:5,className:"muted",children:"No cycles yet. Start one above."})}):se.map(j=>{const Y=!j.endDateIso;return y.jsxs("tr",{children:[y.jsx("td",{children:y.jsx("b",{children:If(j.type)})}),y.jsx("td",{children:j.startDateIso||""}),y.jsx("td",{children:j.endDateIso||""}),y.jsx("td",{children:Y?y.jsx("span",{className:"text-green strong",children:"Active"}):y.jsx("span",{className:"muted",children:"Ended"})}),y.jsx("td",{children:Y?y.jsx("button",{className:"btn",type:"button",onClick:()=>an(j.id),disabled:M,children:"End today"}):y.jsx("span",{className:"muted",children:""})})]},j.id)})})]})}),y.jsx("div",{className:"small",style:{marginTop:10},children:"Tip: cycles are for your own bookkeeping. They dont change calculations  they just help you interpret trends in context."})]}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Change Password"}),y.jsx("div",{className:"muted",children:"Re-auth required."})]}),y.jsxs("form",{onSubmit:yi,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Current password"}),y.jsx("input",{type:"password",value:k,onChange:j=>C(j.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"New password"}),y.jsx("input",{type:"password",value:P,onChange:j=>D(j.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm new password"}),y.jsx("input",{type:"password",value:A,onChange:j=>ne(j.target.value),required:!0})]})]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",disabled:M,children:"Update password"})})]})]})]})}function Sf(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function UB({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:r}){const s=String(t||"").toLowerCase()==="female",[o,a]=O.useState(nh()),[l,u]=O.useState(""),[h,d]=O.useState(""),[f,m]=O.useState(""),[_,w]=O.useState(""),[T,E]=O.useState(""),[S,x]=O.useState(""),[R,M]=O.useState(""),[N,I]=O.useState(""),[v,k]=O.useState(""),[C,P]=O.useState(""),[D,A]=O.useState(""),[ne,se]=O.useState(""),[he,pe]=O.useState(""),[z,K]=O.useState(""),[G,de]=O.useState(""),[te,re]=O.useState(""),[Ae,qe]=O.useState(""),[Ne,jt]=O.useState(""),[mr,Co]=O.useState(""),an=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],yi=O.useMemo(()=>{const j=Lb({protein:Sf(h)||0,carbs:Sf(f)||0,fats:Sf(_)||0});return Number.isFinite(j)?Math.round(j):0},[h,f,_]),_i=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f))&&Number.isFinite(Number(_));async function yr(j){if(j.preventDefault(),!_i())return;const Y={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(f),fats:Number(_),bench:T===""?null:Number(T),squat:S===""?null:Number(S),deadlift:R===""?null:Number(R)};e?(Y.neck1=D===""?null:Number(D),Y.neck2=ne===""?null:Number(ne),Y.neck3=he===""?null:Number(he),Y.waist1=z===""?null:Number(z),Y.waist2=G===""?null:Number(G),Y.waist3=te===""?null:Number(te),Y.hip1=s?Ae===""?null:Number(Ae):null,Y.hip2=s?Ne===""?null:Number(Ne):null,Y.hip3=s?mr===""?null:Number(mr):null):(Y.neck=N===""?null:Number(N),Y.waist=v===""?null:Number(v),Y.hip=s?C===""?null:Number(C):null),await i(Y)}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Daily Entry"}),y.jsxs("div",{className:"muted",children:["Calories preview: ",y.jsx("b",{children:yi})," kcal"]})]}),y.jsxs("form",{onSubmit:yr,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Date"}),y.jsx("input",{type:"date",value:o,onChange:j=>a(j.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Weight (kg)"}),y.jsx("input",{inputMode:"decimal",value:l,onChange:j=>u(j.target.value),placeholder:"e.g. 85.2",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Protein (g)"}),y.jsx("input",{inputMode:"numeric",value:h,onChange:j=>d(j.target.value),placeholder:"e.g. 180"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Carbs (g)"}),y.jsx("input",{inputMode:"numeric",value:f,onChange:j=>m(j.target.value),placeholder:"e.g. 220",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Fats (g)"}),y.jsx("input",{inputMode:"numeric",value:_,onChange:j=>w(j.target.value),placeholder:"e.g. 70",required:!0})]})]}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[an[0]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:T,onChange:j=>E(j.target.value),placeholder:"e.g. 100"})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[an[1]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:S,onChange:j=>x(j.target.value),placeholder:"e.g. 140"})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[an[2]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:R,onChange:j=>M(j.target.value),placeholder:"e.g. 180"})]})]}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"notice info",children:[y.jsx("b",{children:"Navy measurements (weekly)"}),y.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",s?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),y.jsx("div",{style:{height:10}}),e?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:D,onChange:j=>A(j.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:ne,onChange:j=>se(j.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:he,onChange:j=>pe(j.target.value)})]})]}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:z,onChange:j=>K(j.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:G,onChange:j=>de(j.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:te,onChange:j=>re(j.target.value)})]})]}),s?y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:Ae,onChange:j=>qe(j.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:Ne,onChange:j=>jt(j.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:mr,onChange:j=>Co(j.target.value)})]})]}):null]}):y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck (cm)"}),y.jsx("input",{inputMode:"decimal",value:N,onChange:j=>I(j.target.value),placeholder:"optional"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist (cm)"}),y.jsx("input",{inputMode:"decimal",value:v,onChange:j=>k(j.target.value),placeholder:"optional"})]}),s?y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip (cm)"}),y.jsx("input",{inputMode:"decimal",value:C,onChange:j=>P(j.target.value),placeholder:"optional"})]}):null]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",type:"submit",disabled:!_i()||r,children:r?"Saving":"Add / Update Entry"})})]})]})}function BB(t){return t==null?"":String(t)}function zB(t){if(t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function $B({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:r}){const[s,o]=O.useState(!1),a=String(t||"").toLowerCase()==="female",l=Array.isArray(r)&&r.length===3?r:["Bench Press","Squat","Deadlift"],[u,h]=O.useState(null),d=O.useMemo(()=>{const _=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"bench",label:l[0]},{key:"squat",label:l[1]},{key:"deadlift",label:l[2]}];return i?(_.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),a&&_.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):(_.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),a&&_.push({key:"hip",label:"Hip"})),_.push({key:"_actions",label:"Actions",readOnly:!0}),_},[i,r,t]);async function f(_,w,T){if(!(w==="dateIso"||w==="_actions")){h(null),o(!0);try{await uF(e,_,{[w]:zB(T)}),h({type:"success",text:"Saved."})}catch(E){h({type:"error",text:(E==null?void 0:E.message)||"Failed to save."})}finally{o(!1)}}}async function m(_){if(confirm(`Delete entry for ${_}?`)){h(null),o(!0);try{await cF(e,_),h({type:"success",text:"Deleted."})}catch(w){h({type:"error",text:(w==null?void 0:w.message)||"Failed to delete."})}finally{o(!1)}}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"All Entries"}),y.jsxs("div",{className:"muted",children:["Inline edit  blur to save. ",s?"Saving":""]})]}),u&&y.jsx("div",{className:`notice ${u.type==="error"?"error":"success"}`,style:{marginTop:12},children:u.text}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsx("tr",{children:d.map(_=>y.jsx("th",{children:_.label},_.key))})}),y.jsx("tbody",{children:n.map(_=>y.jsx("tr",{children:d.map(w=>w.key==="_actions"?y.jsx("td",{children:y.jsx("button",{className:"btn danger",onClick:()=>m(_.dateIso),children:"Delete"})},w.key):w.readOnly?y.jsx("td",{children:_[w.key]},w.key):y.jsx("td",{children:y.jsx("input",{defaultValue:BB(_[w.key]),onBlur:T=>f(_.dateIso,w.key,T.target.value),inputMode:"decimal"})},w.key))},_.dateIso))})]})})]})}function WB(){const{user:t}=mi(),{profile:e}=ny(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=O.useState([]),[s,o]=O.useState(!1),[a,l]=O.useState(null);O.useEffect(()=>{if(!t)return;const f=ry(t.uid,m=>r(m),m=>l({type:"error",text:(m==null?void 0:m.message)||"Failed to load entries."}));return()=>f()},[t]);const u=O.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function d(f){l(null),o(!0);try{await lF(t.uid,f),l({type:"success",text:"Entry saved."})}catch(m){l({type:"error",text:(m==null?void 0:m.message)||"Failed to save entry."})}finally{o(!1)}}return y.jsxs(y.Fragment,{children:[a&&y.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),y.jsx(UB,{sex:h,tripleEnabled:u,liftNames:n,onSubmit:d,busy:s}),y.jsx($B,{sex:h,userId:t.uid,entries:i,tripleEnabled:u,liftNames:n})]})}function HB(){return y.jsxs(y.Fragment,{children:[y.jsx(rF,{}),y.jsx("div",{className:"app-shell",children:y.jsxs(vP,{children:[y.jsx(bn,{path:"/",element:y.jsx(wp,{to:"/dashboard",replace:!0})}),y.jsx(bn,{path:"/dashboard",element:y.jsx(xk,{})}),y.jsx(bn,{path:"/insights",element:y.jsx(NB,{})}),y.jsx(bn,{path:"/login",element:y.jsx(DB,{})}),y.jsx(bn,{path:"/signup",element:y.jsx(MB,{})}),y.jsx(bn,{path:"/reset-password",element:y.jsx(OB,{})}),y.jsx(bn,{path:"/profile",element:y.jsx(aw,{children:y.jsx(jB,{})})}),y.jsx(bn,{path:"/entry",element:y.jsx(aw,{children:y.jsx(WB,{})})}),y.jsx(bn,{path:"*",element:y.jsx(wp,{to:"/dashboard",replace:!0})})]})})]})}class qB extends ug.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?y.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[y.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),y.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),y.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),y.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}xf.createRoot(document.getElementById("root")).render(y.jsx(ug.StrictMode,{children:y.jsx(kP,{basename:"/Body-Recomp-Tracker/",children:y.jsx(iF,{children:y.jsx(sF,{children:y.jsx(qB,{children:y.jsx(HB,{})})})})})}));
