var dC=Object.defineProperty;var fC=(t,e,n)=>e in t?dC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>fC(t,typeof e!="symbol"?e+"":e,n);function pC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function gC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bb={exports:{}},Vh={},zb={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),mC=Symbol.for("react.portal"),yC=Symbol.for("react.fragment"),_C=Symbol.for("react.strict_mode"),vC=Symbol.for("react.profiler"),wC=Symbol.for("react.provider"),bC=Symbol.for("react.context"),EC=Symbol.for("react.forward_ref"),TC=Symbol.for("react.suspense"),xC=Symbol.for("react.memo"),IC=Symbol.for("react.lazy"),O_=Symbol.iterator;function SC(t){return t===null||typeof t!="object"?null:(t=O_&&t[O_]||t["@@iterator"],typeof t=="function"?t:null)}var $b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wb=Object.assign,Hb={};function Vo(t,e,n){this.props=t,this.context=e,this.refs=Hb,this.updater=n||$b}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qb(){}qb.prototype=Vo.prototype;function Ig(t,e,n){this.props=t,this.context=e,this.refs=Hb,this.updater=n||$b}var Sg=Ig.prototype=new qb;Sg.constructor=Ig;Wb(Sg,Vo.prototype);Sg.isPureReactComponent=!0;var L_=Array.isArray,Kb=Object.prototype.hasOwnProperty,kg={current:null},Gb={key:!0,ref:!0,__self:!0,__source:!0};function Qb(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Kb.call(e,i)&&!Gb.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Hl,type:t,key:s,ref:o,props:r,_owner:kg.current}}function kC(t,e){return{$$typeof:Hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hl}function CC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var F_=/\/+/g;function qd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CC(""+t.key):e.toString(36)}function du(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hl:case mC:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+qd(o,0):i,L_(r)?(n="",t!=null&&(n=t.replace(F_,"$&/")+"/"),du(r,e,n,"",function(c){return c})):r!=null&&(Cg(r)&&(r=kC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(F_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",L_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+qd(s,a);o+=du(s,e,n,l,r)}else if(l=SC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+qd(s,a++),o+=du(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pc(t,e,n){if(t==null)return t;var i=[],r=0;return du(t,i,"","",function(s){return e.call(n,s,r++)}),i}function AC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},fu={transition:null},PC={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:fu,ReactCurrentOwner:kg};function Yb(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Pc,forEach:function(t,e,n){Pc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pc(t,function(){e++}),e},toArray:function(t){return Pc(t,function(e){return e})||[]},only:function(t){if(!Cg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Vo;me.Fragment=yC;me.Profiler=vC;me.PureComponent=Ig;me.StrictMode=_C;me.Suspense=TC;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PC;me.act=Yb;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Wb({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=kg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Kb.call(e,l)&&!Gb.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Hl,type:t.type,key:r,ref:s,props:i,_owner:o}};me.createContext=function(t){return t={$$typeof:bC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wC,_context:t},t.Consumer=t};me.createElement=Qb;me.createFactory=function(t){var e=Qb.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:EC,render:t}};me.isValidElement=Cg;me.lazy=function(t){return{$$typeof:IC,_payload:{_status:-1,_result:t},_init:AC}};me.memo=function(t,e){return{$$typeof:xC,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=fu.transition;fu.transition={};try{t()}finally{fu.transition=e}};me.unstable_act=Yb;me.useCallback=function(t,e){return zt.current.useCallback(t,e)};me.useContext=function(t){return zt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};me.useEffect=function(t,e){return zt.current.useEffect(t,e)};me.useId=function(){return zt.current.useId()};me.useImperativeHandle=function(t,e,n){return zt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return zt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return zt.current.useReducer(t,e,n)};me.useRef=function(t){return zt.current.useRef(t)};me.useState=function(t){return zt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return zt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return zt.current.useTransition()};me.version="18.3.1";zb.exports=me;var M=zb.exports;const Ag=gC(M),RC=pC({__proto__:null,default:Ag},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC=M,DC=Symbol.for("react.element"),MC=Symbol.for("react.fragment"),OC=Object.prototype.hasOwnProperty,LC=NC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FC={key:!0,ref:!0,__self:!0,__source:!0};function Xb(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)OC.call(e,i)&&!FC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:DC,type:t,key:s,ref:o,props:r,_owner:LC.current}}Vh.Fragment=MC;Vh.jsx=Xb;Vh.jsxs=Xb;Bb.exports=Vh;var g=Bb.exports,qf={},Jb={exports:{}},dn={},Zb={exports:{}},eE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,q){var X=B.length;B.push(q);e:for(;0<X;){var V=X-1>>>1,L=B[V];if(0<r(L,q))B[V]=q,B[X]=L,X=V;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var q=B[0],X=B.pop();if(X!==q){B[0]=X;e:for(var V=0,L=B.length,W=L>>>1;V<W;){var ee=2*(V+1)-1,ae=B[ee],ne=ee+1,xe=B[ne];if(0>r(ae,X))ne<L&&0>r(xe,ae)?(B[V]=xe,B[ne]=X,V=ne):(B[V]=ae,B[ee]=X,V=ee);else if(ne<L&&0>r(xe,X))B[V]=xe,B[ne]=X,V=ne;else break e}}return q}function r(B,q){var X=B.sortIndex-q.sortIndex;return X!==0?X:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var q=n(c);q!==null;){if(q.callback===null)i(c);else if(q.startTime<=B)i(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function N(B){if(x=!1,S(B),!v)if(n(l)!==null)v=!0,ue(D);else{var q=n(c);q!==null&&re(N,q.startTime-B)}}function D(B,q){v=!1,x&&(x=!1,T(_),_=-1),m=!0;var X=f;try{for(S(q),d=n(l);d!==null&&(!(d.expirationTime>q)||B&&!A());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var L=V(d.expirationTime<=q);q=t.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&i(l),S(q)}else i(l);d=n(l)}if(d!==null)var W=!0;else{var ee=n(c);ee!==null&&re(N,ee.startTime-q),W=!1}return W}finally{d=null,f=X,m=!1}}var O=!1,w=null,_=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function R(){if(w!==null){var B=t.unstable_now();C=B;var q=!0;try{q=w(!0,B)}finally{q?P():(O=!1,w=null)}}else O=!1}var P;if(typeof E=="function")P=function(){E(R)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,H=Y.port2;Y.port1.onmessage=R,P=function(){H.postMessage(null)}}else P=function(){b(R,0)};function ue(B){w=B,O||(O=!0,P())}function re(B,q){_=b(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,ue(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var X=f;f=q;try{return B()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=f;f=B;try{return q()}finally{f=X}},t.unstable_scheduleCallback=function(B,q,X){var V=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?V+X:V):X=V,B){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=X+L,B={id:h++,callback:q,priorityLevel:B,startTime:X,expirationTime:L,sortIndex:-1},X>V?(B.sortIndex=X,e(c,B),n(l)===null&&B===n(c)&&(x?(T(_),_=-1):x=!0,re(N,X-V))):(B.sortIndex=L,e(l,B),v||m||(v=!0,ue(D))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var q=f;return function(){var X=f;f=q;try{return B.apply(this,arguments)}finally{f=X}}}})(eE);Zb.exports=eE;var jC=Zb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC=M,hn=jC;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tE=new Set,ul={};function As(t,e){bo(t,e),bo(t+"Capture",e)}function bo(t,e){for(ul[t]=e,t=0;t<e.length;t++)tE.add(e[t])}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kf=Object.prototype.hasOwnProperty,UC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j_={},V_={};function BC(t){return Kf.call(V_,t)?!0:Kf.call(j_,t)?!1:UC.test(t)?V_[t]=!0:(j_[t]=!0,!1)}function zC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $C(t,e,n,i){if(e===null||typeof e>"u"||zC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pg=/[\-:]([a-z])/g;function Rg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pg,Rg);Et[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pg,Rg);Et[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pg,Rg);Et[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ng(t,e,n,i){var r=Et.hasOwnProperty(e)?Et[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($C(e,n,r,i)&&(n=null),i||r===null?BC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Oi=VC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),Dg=Symbol.for("react.strict_mode"),Gf=Symbol.for("react.profiler"),nE=Symbol.for("react.provider"),iE=Symbol.for("react.context"),Mg=Symbol.for("react.forward_ref"),Qf=Symbol.for("react.suspense"),Yf=Symbol.for("react.suspense_list"),Og=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),rE=Symbol.for("react.offscreen"),U_=Symbol.iterator;function da(t){return t===null||typeof t!="object"?null:(t=U_&&t[U_]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Kd;function Ca(t){if(Kd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kd=e&&e[1]||""}return`
`+Kd+t}var Gd=!1;function Qd(t,e){if(!t||Gd)return"";Gd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ca(t):""}function WC(t){switch(t.tag){case 5:return Ca(t.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 2:case 15:return t=Qd(t.type,!1),t;case 11:return t=Qd(t.type.render,!1),t;case 1:return t=Qd(t.type,!0),t;default:return""}}function Xf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case Qs:return"Portal";case Gf:return"Profiler";case Dg:return"StrictMode";case Qf:return"Suspense";case Yf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iE:return(t.displayName||"Context")+".Consumer";case nE:return(t._context.displayName||"Context")+".Provider";case Mg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Og:return e=t.displayName||null,e!==null?e:Xf(t.type)||"Memo";case Ki:e=t._payload,t=t._init;try{return Xf(t(e))}catch{}}return null}function HC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xf(e);case 8:return e===Dg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qC(t){var e=sE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=qC(t))}function oE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=sE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jf(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function B_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aE(t,e){e=e.checked,e!=null&&Ng(t,"checked",e,!1)}function Zf(t,e){aE(t,e);var n=Tr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ep(t,e.type,n):e.hasOwnProperty("defaultValue")&&ep(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function z_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ep(t,e,n){(e!=="number"||Fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Aa=Array.isArray;function co(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function tp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Aa(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function lE(t,e){var n=Tr(e.value),i=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function W_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function np(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dc,uE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dc=Dc||document.createElement("div"),Dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KC=["Webkit","ms","Moz","O"];Object.keys(za).forEach(function(t){KC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),za[e]=za[t]})});function hE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||za.hasOwnProperty(t)&&za[t]?(""+e).trim():e+"px"}function dE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=hE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var GC=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ip(t,e){if(e){if(GC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function rp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sp=null;function Lg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var op=null,uo=null,ho=null;function H_(t){if(t=Gl(t)){if(typeof op!="function")throw Error($(280));var e=t.stateNode;e&&(e=Wh(e),op(t.stateNode,t.type,e))}}function fE(t){uo?ho?ho.push(t):ho=[t]:uo=t}function pE(){if(uo){var t=uo,e=ho;if(ho=uo=null,H_(t),e)for(t=0;t<e.length;t++)H_(e[t])}}function gE(t,e){return t(e)}function mE(){}var Yd=!1;function yE(t,e,n){if(Yd)return t(e,n);Yd=!0;try{return gE(t,e,n)}finally{Yd=!1,(uo!==null||ho!==null)&&(mE(),pE())}}function dl(t,e){var n=t.stateNode;if(n===null)return null;var i=Wh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ap=!1;if(ki)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){ap=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{ap=!1}function QC(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var $a=!1,ju=null,Vu=!1,lp=null,YC={onError:function(t){$a=!0,ju=t}};function XC(t,e,n,i,r,s,o,a,l){$a=!1,ju=null,QC.apply(YC,arguments)}function JC(t,e,n,i,r,s,o,a,l){if(XC.apply(this,arguments),$a){if($a){var c=ju;$a=!1,ju=null}else throw Error($(198));Vu||(Vu=!0,lp=c)}}function Ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _E(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q_(t){if(Ps(t)!==t)throw Error($(188))}function ZC(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return q_(r),t;if(s===i)return q_(r),e;s=s.sibling}throw Error($(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function vE(t){return t=ZC(t),t!==null?wE(t):null}function wE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wE(t);if(e!==null)return e;t=t.sibling}return null}var bE=hn.unstable_scheduleCallback,K_=hn.unstable_cancelCallback,e1=hn.unstable_shouldYield,t1=hn.unstable_requestPaint,Je=hn.unstable_now,n1=hn.unstable_getCurrentPriorityLevel,Fg=hn.unstable_ImmediatePriority,EE=hn.unstable_UserBlockingPriority,Uu=hn.unstable_NormalPriority,i1=hn.unstable_LowPriority,TE=hn.unstable_IdlePriority,Uh=null,ei=null;function r1(t){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(Uh,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:a1,s1=Math.log,o1=Math.LN2;function a1(t){return t>>>=0,t===0?32:31-(s1(t)/o1|0)|0}var Mc=64,Oc=4194304;function Pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Pa(a):(s&=o,s!==0&&(i=Pa(s)))}else o=n&~r,o!==0?i=Pa(o):s!==0&&(i=Pa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Fn(e),r=1<<n,i|=t[n],e&=~r;return i}function l1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c1(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=l1(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function cp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xE(){var t=Mc;return Mc<<=1,!(Mc&4194240)&&(Mc=64),t}function Xd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ql(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function u1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Fn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function jg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Fn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ae=0;function IE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SE,Vg,kE,CE,AE,up=!1,Lc=[],cr=null,ur=null,hr=null,fl=new Map,pl=new Map,Qi=[],h1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G_(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":fl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(e.pointerId)}}function pa(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Gl(e),e!==null&&Vg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function d1(t,e,n,i,r){switch(e){case"focusin":return cr=pa(cr,t,e,n,i,r),!0;case"dragenter":return ur=pa(ur,t,e,n,i,r),!0;case"mouseover":return hr=pa(hr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return fl.set(s,pa(fl.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,pl.set(s,pa(pl.get(s)||null,t,e,n,i,r)),!0}return!1}function PE(t){var e=is(t.target);if(e!==null){var n=Ps(e);if(n!==null){if(e=n.tag,e===13){if(e=_E(n),e!==null){t.blockedOn=e,AE(t.priority,function(){kE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);sp=i,n.target.dispatchEvent(i),sp=null}else return e=Gl(n),e!==null&&Vg(e),t.blockedOn=n,!1;e.shift()}return!0}function Q_(t,e,n){pu(t)&&n.delete(e)}function f1(){up=!1,cr!==null&&pu(cr)&&(cr=null),ur!==null&&pu(ur)&&(ur=null),hr!==null&&pu(hr)&&(hr=null),fl.forEach(Q_),pl.forEach(Q_)}function ga(t,e){t.blockedOn===e&&(t.blockedOn=null,up||(up=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,f1)))}function gl(t){function e(r){return ga(r,t)}if(0<Lc.length){ga(Lc[0],t);for(var n=1;n<Lc.length;n++){var i=Lc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(cr!==null&&ga(cr,t),ur!==null&&ga(ur,t),hr!==null&&ga(hr,t),fl.forEach(e),pl.forEach(e),n=0;n<Qi.length;n++)i=Qi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Qi.length&&(n=Qi[0],n.blockedOn===null);)PE(n),n.blockedOn===null&&Qi.shift()}var fo=Oi.ReactCurrentBatchConfig,zu=!0;function p1(t,e,n,i){var r=Ae,s=fo.transition;fo.transition=null;try{Ae=1,Ug(t,e,n,i)}finally{Ae=r,fo.transition=s}}function g1(t,e,n,i){var r=Ae,s=fo.transition;fo.transition=null;try{Ae=4,Ug(t,e,n,i)}finally{Ae=r,fo.transition=s}}function Ug(t,e,n,i){if(zu){var r=hp(t,e,n,i);if(r===null)lf(t,e,i,$u,n),G_(t,i);else if(d1(r,t,e,n,i))i.stopPropagation();else if(G_(t,i),e&4&&-1<h1.indexOf(t)){for(;r!==null;){var s=Gl(r);if(s!==null&&SE(s),s=hp(t,e,n,i),s===null&&lf(t,e,i,$u,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else lf(t,e,i,null,n)}}var $u=null;function hp(t,e,n,i){if($u=null,t=Lg(i),t=is(t),t!==null)if(e=Ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_E(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $u=t,null}function RE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n1()){case Fg:return 1;case EE:return 4;case Uu:case i1:return 16;case TE:return 536870912;default:return 16}default:return 16}}var nr=null,Bg=null,gu=null;function NE(){if(gu)return gu;var t,e=Bg,n=e.length,i,r="value"in nr?nr.value:nr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return gu=r.slice(t,1<i?1-i:void 0)}function mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fc(){return!0}function Y_(){return!1}function fn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fc:Y_,this.isPropagationStopped=Y_,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fc)},persist:function(){},isPersistent:Fc}),e}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zg=fn(Uo),Kl=He({},Uo,{view:0,detail:0}),m1=fn(Kl),Jd,Zd,ma,Bh=He({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$g,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(Jd=t.screenX-ma.screenX,Zd=t.screenY-ma.screenY):Zd=Jd=0,ma=t),Jd)},movementY:function(t){return"movementY"in t?t.movementY:Zd}}),X_=fn(Bh),y1=He({},Bh,{dataTransfer:0}),_1=fn(y1),v1=He({},Kl,{relatedTarget:0}),ef=fn(v1),w1=He({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),b1=fn(w1),E1=He({},Uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T1=fn(E1),x1=He({},Uo,{data:0}),J_=fn(x1),I1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k1[t])?!!e[t]:!1}function $g(){return C1}var A1=He({},Kl,{key:function(t){if(t.key){var e=I1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$g,charCode:function(t){return t.type==="keypress"?mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P1=fn(A1),R1=He({},Bh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z_=fn(R1),N1=He({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$g}),D1=fn(N1),M1=He({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),O1=fn(M1),L1=He({},Bh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F1=fn(L1),j1=[9,13,27,32],Wg=ki&&"CompositionEvent"in window,Wa=null;ki&&"documentMode"in document&&(Wa=document.documentMode);var V1=ki&&"TextEvent"in window&&!Wa,DE=ki&&(!Wg||Wa&&8<Wa&&11>=Wa),ev=" ",tv=!1;function ME(t,e){switch(t){case"keyup":return j1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function U1(t,e){switch(t){case"compositionend":return OE(e);case"keypress":return e.which!==32?null:(tv=!0,ev);case"textInput":return t=e.data,t===ev&&tv?null:t;default:return null}}function B1(t,e){if(Xs)return t==="compositionend"||!Wg&&ME(t,e)?(t=NE(),gu=Bg=nr=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DE&&e.locale!=="ko"?null:e.data;default:return null}}var z1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!z1[t.type]:e==="textarea"}function LE(t,e,n,i){fE(i),e=Wu(e,"onChange"),0<e.length&&(n=new zg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ha=null,ml=null;function $1(t){KE(t,0)}function zh(t){var e=eo(t);if(oE(e))return t}function W1(t,e){if(t==="change")return e}var FE=!1;if(ki){var tf;if(ki){var nf="oninput"in document;if(!nf){var iv=document.createElement("div");iv.setAttribute("oninput","return;"),nf=typeof iv.oninput=="function"}tf=nf}else tf=!1;FE=tf&&(!document.documentMode||9<document.documentMode)}function rv(){Ha&&(Ha.detachEvent("onpropertychange",jE),ml=Ha=null)}function jE(t){if(t.propertyName==="value"&&zh(ml)){var e=[];LE(e,ml,t,Lg(t)),yE($1,e)}}function H1(t,e,n){t==="focusin"?(rv(),Ha=e,ml=n,Ha.attachEvent("onpropertychange",jE)):t==="focusout"&&rv()}function q1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zh(ml)}function K1(t,e){if(t==="click")return zh(e)}function G1(t,e){if(t==="input"||t==="change")return zh(e)}function Q1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:Q1;function yl(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Kf.call(e,r)||!Un(t[r],e[r]))return!1}return!0}function sv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ov(t,e){var n=sv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sv(n)}}function VE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UE(){for(var t=window,e=Fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fu(t.document)}return e}function Hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y1(t){var e=UE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&VE(n.ownerDocument.documentElement,n)){if(i!==null&&Hg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=ov(n,s);var o=ov(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var X1=ki&&"documentMode"in document&&11>=document.documentMode,Js=null,dp=null,qa=null,fp=!1;function av(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fp||Js==null||Js!==Fu(i)||(i=Js,"selectionStart"in i&&Hg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),qa&&yl(qa,i)||(qa=i,i=Wu(dp,"onSelect"),0<i.length&&(e=new zg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Js)))}function jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:jc("Animation","AnimationEnd"),animationiteration:jc("Animation","AnimationIteration"),animationstart:jc("Animation","AnimationStart"),transitionend:jc("Transition","TransitionEnd")},rf={},BE={};ki&&(BE=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function $h(t){if(rf[t])return rf[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BE)return rf[t]=e[n];return t}var zE=$h("animationend"),$E=$h("animationiteration"),WE=$h("animationstart"),HE=$h("transitionend"),qE=new Map,lv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){qE.set(t,e),As(e,[t])}for(var sf=0;sf<lv.length;sf++){var of=lv[sf],J1=of.toLowerCase(),Z1=of[0].toUpperCase()+of.slice(1);Nr(J1,"on"+Z1)}Nr(zE,"onAnimationEnd");Nr($E,"onAnimationIteration");Nr(WE,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(HE,"onTransitionEnd");bo("onMouseEnter",["mouseout","mouseover"]);bo("onMouseLeave",["mouseout","mouseover"]);bo("onPointerEnter",["pointerout","pointerover"]);bo("onPointerLeave",["pointerout","pointerover"]);As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));As("onBeforeInput",["compositionend","keypress","textInput","paste"]);As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function cv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,JC(i,e,void 0,t),t.currentTarget=null}function KE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;cv(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;cv(r,a,c),s=l}}}if(Vu)throw t=lp,Vu=!1,lp=null,t}function Oe(t,e){var n=e[_p];n===void 0&&(n=e[_p]=new Set);var i=t+"__bubble";n.has(i)||(GE(e,t,2,!1),n.add(i))}function af(t,e,n){var i=0;e&&(i|=4),GE(n,t,i,e)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function _l(t){if(!t[Vc]){t[Vc]=!0,tE.forEach(function(n){n!=="selectionchange"&&(eA.has(n)||af(n,!1,t),af(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vc]||(e[Vc]=!0,af("selectionchange",!1,e))}}function GE(t,e,n,i){switch(RE(e)){case 1:var r=p1;break;case 4:r=g1;break;default:r=Ug}n=r.bind(null,e,n,t),r=void 0,!ap||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function lf(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=is(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}yE(function(){var c=s,h=Lg(n),d=[];e:{var f=qE.get(t);if(f!==void 0){var m=zg,v=t;switch(t){case"keypress":if(mu(n)===0)break e;case"keydown":case"keyup":m=P1;break;case"focusin":v="focus",m=ef;break;case"focusout":v="blur",m=ef;break;case"beforeblur":case"afterblur":m=ef;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=X_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=_1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=D1;break;case zE:case $E:case WE:m=b1;break;case HE:m=O1;break;case"scroll":m=m1;break;case"wheel":m=F1;break;case"copy":case"cut":case"paste":m=T1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Z_}var x=(e&4)!==0,b=!x&&t==="scroll",T=x?f!==null?f+"Capture":null:f;x=[];for(var E=c,S;E!==null;){S=E;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,T!==null&&(N=dl(E,T),N!=null&&x.push(vl(E,N,S)))),b)break;E=E.return}0<x.length&&(f=new m(f,v,null,n,h),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==sp&&(v=n.relatedTarget||n.fromElement)&&(is(v)||v[Ci]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?is(v):null,v!==null&&(b=Ps(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(x=X_,N="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=Z_,N="onPointerLeave",T="onPointerEnter",E="pointer"),b=m==null?f:eo(m),S=v==null?f:eo(v),f=new x(N,E+"leave",m,n,h),f.target=b,f.relatedTarget=S,N=null,is(h)===c&&(x=new x(T,E+"enter",v,n,h),x.target=S,x.relatedTarget=b,N=x),b=N,m&&v)t:{for(x=m,T=v,E=0,S=x;S;S=zs(S))E++;for(S=0,N=T;N;N=zs(N))S++;for(;0<E-S;)x=zs(x),E--;for(;0<S-E;)T=zs(T),S--;for(;E--;){if(x===T||T!==null&&x===T.alternate)break t;x=zs(x),T=zs(T)}x=null}else x=null;m!==null&&uv(d,f,m,x,!1),v!==null&&b!==null&&uv(d,b,v,x,!0)}}e:{if(f=c?eo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=W1;else if(nv(f))if(FE)D=G1;else{D=q1;var O=H1}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=K1);if(D&&(D=D(t,c))){LE(d,D,n,h);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&ep(f,"number",f.value)}switch(O=c?eo(c):window,t){case"focusin":(nv(O)||O.contentEditable==="true")&&(Js=O,dp=c,qa=null);break;case"focusout":qa=dp=Js=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,av(d,n,h);break;case"selectionchange":if(X1)break;case"keydown":case"keyup":av(d,n,h)}var w;if(Wg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Xs?ME(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(DE&&n.locale!=="ko"&&(Xs||_!=="onCompositionStart"?_==="onCompositionEnd"&&Xs&&(w=NE()):(nr=h,Bg="value"in nr?nr.value:nr.textContent,Xs=!0)),O=Wu(c,_),0<O.length&&(_=new J_(_,t,null,n,h),d.push({event:_,listeners:O}),w?_.data=w:(w=OE(n),w!==null&&(_.data=w)))),(w=V1?U1(t,n):B1(t,n))&&(c=Wu(c,"onBeforeInput"),0<c.length&&(h=new J_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=w))}KE(d,e)})}function vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=dl(t,n),s!=null&&i.unshift(vl(t,s,r)),s=dl(t,e),s!=null&&i.push(vl(t,s,r))),t=t.return}return i}function zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uv(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=dl(n,s),l!=null&&o.unshift(vl(n,l,a))):r||(l=dl(n,s),l!=null&&o.push(vl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tA=/\r\n?/g,nA=/\u0000|\uFFFD/g;function hv(t){return(typeof t=="string"?t:""+t).replace(tA,`
`).replace(nA,"")}function Uc(t,e,n){if(e=hv(e),hv(t)!==e&&n)throw Error($(425))}function Hu(){}var pp=null,gp=null;function mp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yp=typeof setTimeout=="function"?setTimeout:void 0,iA=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,rA=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(t){return dv.resolve(null).then(t).catch(sA)}:yp;function sA(t){setTimeout(function(){throw t})}function cf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),gl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);gl(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Bo,wl="__reactProps$"+Bo,Ci="__reactContainer$"+Bo,_p="__reactEvents$"+Bo,oA="__reactListeners$"+Bo,aA="__reactHandles$"+Bo;function is(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ci]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fv(t);t!==null;){if(n=t[Jn])return n;t=fv(t)}return e}t=n,n=t.parentNode}return null}function Gl(t){return t=t[Jn]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Wh(t){return t[wl]||null}var vp=[],to=-1;function Dr(t){return{current:t}}function Fe(t){0>to||(t.current=vp[to],vp[to]=null,to--)}function Ne(t,e){to++,vp[to]=t.current,t.current=e}var xr={},Mt=Dr(xr),Yt=Dr(!1),ps=xr;function Eo(t,e){var n=t.type.contextTypes;if(!n)return xr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Xt(t){return t=t.childContextTypes,t!=null}function qu(){Fe(Yt),Fe(Mt)}function pv(t,e,n){if(Mt.current!==xr)throw Error($(168));Ne(Mt,e),Ne(Yt,n)}function QE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,HC(t)||"Unknown",r));return He({},n,i)}function Ku(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,ps=Mt.current,Ne(Mt,t),Ne(Yt,Yt.current),!0}function gv(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=QE(t,e,ps),i.__reactInternalMemoizedMergedChildContext=t,Fe(Yt),Fe(Mt),Ne(Mt,t)):Fe(Yt),Ne(Yt,n)}var _i=null,Hh=!1,uf=!1;function YE(t){_i===null?_i=[t]:_i.push(t)}function lA(t){Hh=!0,YE(t)}function Mr(){if(!uf&&_i!==null){uf=!0;var t=0,e=Ae;try{var n=_i;for(Ae=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}_i=null,Hh=!1}catch(r){throw _i!==null&&(_i=_i.slice(t+1)),bE(Fg,Mr),r}finally{Ae=e,uf=!1}}return null}var no=[],io=0,Gu=null,Qu=0,yn=[],_n=0,gs=null,wi=1,bi="";function Yr(t,e){no[io++]=Qu,no[io++]=Gu,Gu=t,Qu=e}function XE(t,e,n){yn[_n++]=wi,yn[_n++]=bi,yn[_n++]=gs,gs=t;var i=wi;t=bi;var r=32-Fn(i)-1;i&=~(1<<r),n+=1;var s=32-Fn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,wi=1<<32-Fn(e)+r|n<<r|i,bi=s+t}else wi=1<<s|n<<r|i,bi=t}function qg(t){t.return!==null&&(Yr(t,1),XE(t,1,0))}function Kg(t){for(;t===Gu;)Gu=no[--io],no[io]=null,Qu=no[--io],no[io]=null;for(;t===gs;)gs=yn[--_n],yn[_n]=null,bi=yn[--_n],yn[_n]=null,wi=yn[--_n],yn[_n]=null}var cn=null,an=null,Ue=!1,On=null;function JE(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,an=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gs!==null?{id:wi,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,an=null,!0):!1;default:return!1}}function wp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bp(t){if(Ue){var e=an;if(e){var n=e;if(!mv(t,e)){if(wp(t))throw Error($(418));e=dr(n.nextSibling);var i=cn;e&&mv(t,e)?JE(i,n):(t.flags=t.flags&-4097|2,Ue=!1,cn=t)}}else{if(wp(t))throw Error($(418));t.flags=t.flags&-4097|2,Ue=!1,cn=t}}}function yv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Bc(t){if(t!==cn)return!1;if(!Ue)return yv(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mp(t.type,t.memoizedProps)),e&&(e=an)){if(wp(t))throw ZE(),Error($(418));for(;e;)JE(t,e),e=dr(e.nextSibling)}if(yv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=cn?dr(t.stateNode.nextSibling):null;return!0}function ZE(){for(var t=an;t;)t=dr(t.nextSibling)}function To(){an=cn=null,Ue=!1}function Gg(t){On===null?On=[t]:On.push(t)}var cA=Oi.ReactCurrentBatchConfig;function ya(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function zc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _v(t){var e=t._init;return e(t._payload)}function eT(t){function e(T,E){if(t){var S=T.deletions;S===null?(T.deletions=[E],T.flags|=16):S.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function i(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function r(T,E){return T=mr(T,E),T.index=0,T.sibling=null,T}function s(T,E,S){return T.index=S,t?(S=T.alternate,S!==null?(S=S.index,S<E?(T.flags|=2,E):S):(T.flags|=2,E)):(T.flags|=1048576,E)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,E,S,N){return E===null||E.tag!==6?(E=yf(S,T.mode,N),E.return=T,E):(E=r(E,S),E.return=T,E)}function l(T,E,S,N){var D=S.type;return D===Ys?h(T,E,S.props.children,N,S.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ki&&_v(D)===E.type)?(N=r(E,S.props),N.ref=ya(T,E,S),N.return=T,N):(N=Tu(S.type,S.key,S.props,null,T.mode,N),N.ref=ya(T,E,S),N.return=T,N)}function c(T,E,S,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=_f(S,T.mode,N),E.return=T,E):(E=r(E,S.children||[]),E.return=T,E)}function h(T,E,S,N,D){return E===null||E.tag!==7?(E=hs(S,T.mode,N,D),E.return=T,E):(E=r(E,S),E.return=T,E)}function d(T,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=yf(""+E,T.mode,S),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Rc:return S=Tu(E.type,E.key,E.props,null,T.mode,S),S.ref=ya(T,null,E),S.return=T,S;case Qs:return E=_f(E,T.mode,S),E.return=T,E;case Ki:var N=E._init;return d(T,N(E._payload),S)}if(Aa(E)||da(E))return E=hs(E,T.mode,S,null),E.return=T,E;zc(T,E)}return null}function f(T,E,S,N){var D=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:a(T,E,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rc:return S.key===D?l(T,E,S,N):null;case Qs:return S.key===D?c(T,E,S,N):null;case Ki:return D=S._init,f(T,E,D(S._payload),N)}if(Aa(S)||da(S))return D!==null?null:h(T,E,S,N,null);zc(T,S)}return null}function m(T,E,S,N,D){if(typeof N=="string"&&N!==""||typeof N=="number")return T=T.get(S)||null,a(E,T,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Rc:return T=T.get(N.key===null?S:N.key)||null,l(E,T,N,D);case Qs:return T=T.get(N.key===null?S:N.key)||null,c(E,T,N,D);case Ki:var O=N._init;return m(T,E,S,O(N._payload),D)}if(Aa(N)||da(N))return T=T.get(S)||null,h(E,T,N,D,null);zc(E,N)}return null}function v(T,E,S,N){for(var D=null,O=null,w=E,_=E=0,I=null;w!==null&&_<S.length;_++){w.index>_?(I=w,w=null):I=w.sibling;var C=f(T,w,S[_],N);if(C===null){w===null&&(w=I);break}t&&w&&C.alternate===null&&e(T,w),E=s(C,E,_),O===null?D=C:O.sibling=C,O=C,w=I}if(_===S.length)return n(T,w),Ue&&Yr(T,_),D;if(w===null){for(;_<S.length;_++)w=d(T,S[_],N),w!==null&&(E=s(w,E,_),O===null?D=w:O.sibling=w,O=w);return Ue&&Yr(T,_),D}for(w=i(T,w);_<S.length;_++)I=m(w,T,_,S[_],N),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?_:I.key),E=s(I,E,_),O===null?D=I:O.sibling=I,O=I);return t&&w.forEach(function(A){return e(T,A)}),Ue&&Yr(T,_),D}function x(T,E,S,N){var D=da(S);if(typeof D!="function")throw Error($(150));if(S=D.call(S),S==null)throw Error($(151));for(var O=D=null,w=E,_=E=0,I=null,C=S.next();w!==null&&!C.done;_++,C=S.next()){w.index>_?(I=w,w=null):I=w.sibling;var A=f(T,w,C.value,N);if(A===null){w===null&&(w=I);break}t&&w&&A.alternate===null&&e(T,w),E=s(A,E,_),O===null?D=A:O.sibling=A,O=A,w=I}if(C.done)return n(T,w),Ue&&Yr(T,_),D;if(w===null){for(;!C.done;_++,C=S.next())C=d(T,C.value,N),C!==null&&(E=s(C,E,_),O===null?D=C:O.sibling=C,O=C);return Ue&&Yr(T,_),D}for(w=i(T,w);!C.done;_++,C=S.next())C=m(w,T,_,C.value,N),C!==null&&(t&&C.alternate!==null&&w.delete(C.key===null?_:C.key),E=s(C,E,_),O===null?D=C:O.sibling=C,O=C);return t&&w.forEach(function(R){return e(T,R)}),Ue&&Yr(T,_),D}function b(T,E,S,N){if(typeof S=="object"&&S!==null&&S.type===Ys&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Rc:e:{for(var D=S.key,O=E;O!==null;){if(O.key===D){if(D=S.type,D===Ys){if(O.tag===7){n(T,O.sibling),E=r(O,S.props.children),E.return=T,T=E;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ki&&_v(D)===O.type){n(T,O.sibling),E=r(O,S.props),E.ref=ya(T,O,S),E.return=T,T=E;break e}n(T,O);break}else e(T,O);O=O.sibling}S.type===Ys?(E=hs(S.props.children,T.mode,N,S.key),E.return=T,T=E):(N=Tu(S.type,S.key,S.props,null,T.mode,N),N.ref=ya(T,E,S),N.return=T,T=N)}return o(T);case Qs:e:{for(O=S.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(T,E.sibling),E=r(E,S.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else e(T,E);E=E.sibling}E=_f(S,T.mode,N),E.return=T,T=E}return o(T);case Ki:return O=S._init,b(T,E,O(S._payload),N)}if(Aa(S))return v(T,E,S,N);if(da(S))return x(T,E,S,N);zc(T,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(T,E.sibling),E=r(E,S),E.return=T,T=E):(n(T,E),E=yf(S,T.mode,N),E.return=T,T=E),o(T)):n(T,E)}return b}var xo=eT(!0),tT=eT(!1),Yu=Dr(null),Xu=null,ro=null,Qg=null;function Yg(){Qg=ro=Xu=null}function Xg(t){var e=Yu.current;Fe(Yu),t._currentValue=e}function Ep(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function po(t,e){Xu=t,Qg=ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(Qg!==t)if(t={context:t,memoizedValue:e,next:null},ro===null){if(Xu===null)throw Error($(308));ro=t,Xu.dependencies={lanes:0,firstContext:t}}else ro=ro.next=t;return e}var rs=null;function Jg(t){rs===null?rs=[t]:rs.push(t)}function nT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Jg(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ai(t,i)}function Ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gi=!1;function Zg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ee&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ai(t,n)}return r=i.interleaved,r===null?(e.next=e,Jg(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ai(t,n)}function yu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jg(t,n)}}function vv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ju(t,e,n,i){var r=t.updateQueue;Gi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(f=e,m=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=He({},d,f);break e;case 2:Gi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=d}}function wv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error($(191,r));r.call(i)}}}var Ql={},ti=Dr(Ql),bl=Dr(Ql),El=Dr(Ql);function ss(t){if(t===Ql)throw Error($(174));return t}function em(t,e){switch(Ne(El,e),Ne(bl,t),Ne(ti,Ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:np(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=np(e,t)}Fe(ti),Ne(ti,e)}function Io(){Fe(ti),Fe(bl),Fe(El)}function rT(t){ss(El.current);var e=ss(ti.current),n=np(e,t.type);e!==n&&(Ne(bl,t),Ne(ti,n))}function tm(t){bl.current===t&&(Fe(ti),Fe(bl))}var ze=Dr(0);function Zu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hf=[];function nm(){for(var t=0;t<hf.length;t++)hf[t]._workInProgressVersionPrimary=null;hf.length=0}var _u=Oi.ReactCurrentDispatcher,df=Oi.ReactCurrentBatchConfig,ms=0,$e=null,ot=null,ht=null,eh=!1,Ka=!1,Tl=0,uA=0;function kt(){throw Error($(321))}function im(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function rm(t,e,n,i,r,s){if(ms=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_u.current=t===null||t.memoizedState===null?pA:gA,t=n(i,r),Ka){s=0;do{if(Ka=!1,Tl=0,25<=s)throw Error($(301));s+=1,ht=ot=null,e.updateQueue=null,_u.current=mA,t=n(i,r)}while(Ka)}if(_u.current=th,e=ot!==null&&ot.next!==null,ms=0,ht=ot=$e=null,eh=!1,e)throw Error($(300));return t}function sm(){var t=Tl!==0;return Tl=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?$e.memoizedState=ht=t:ht=ht.next=t,ht}function In(){if(ot===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?$e.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error($(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?$e.memoizedState=ht=t:ht=ht.next=t}return ht}function xl(t,e){return typeof e=="function"?e(t):e}function ff(t){var e=In(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=ot,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((ms&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,$e.lanes|=h,ys|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Un(i,e.memoizedState)||(Gt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,$e.lanes|=s,ys|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pf(t){var e=In(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Un(s,e.memoizedState)||(Gt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function sT(){}function oT(t,e){var n=$e,i=In(),r=e(),s=!Un(i.memoizedState,r);if(s&&(i.memoizedState=r,Gt=!0),i=i.queue,om(cT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Il(9,lT.bind(null,n,i,r,e),void 0,null),ft===null)throw Error($(349));ms&30||aT(n,e,r)}return r}function aT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lT(t,e,n,i){e.value=n,e.getSnapshot=i,uT(e)&&hT(t)}function cT(t,e,n){return n(function(){uT(e)&&hT(t)})}function uT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function hT(t){var e=Ai(t,1);e!==null&&jn(e,t,1,-1)}function bv(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:t},e.queue=t,t=t.dispatch=fA.bind(null,$e,t),[e.memoizedState,t]}function Il(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function dT(){return In().memoizedState}function vu(t,e,n,i){var r=Yn();$e.flags|=t,r.memoizedState=Il(1|e,n,void 0,i===void 0?null:i)}function qh(t,e,n,i){var r=In();i=i===void 0?null:i;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,i!==null&&im(i,o.deps)){r.memoizedState=Il(e,n,s,i);return}}$e.flags|=t,r.memoizedState=Il(1|e,n,s,i)}function Ev(t,e){return vu(8390656,8,t,e)}function om(t,e){return qh(2048,8,t,e)}function fT(t,e){return qh(4,2,t,e)}function pT(t,e){return qh(4,4,t,e)}function gT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mT(t,e,n){return n=n!=null?n.concat([t]):null,qh(4,4,gT.bind(null,e,t),n)}function am(){}function yT(t,e){var n=In();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&im(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function _T(t,e){var n=In();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&im(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function vT(t,e,n){return ms&21?(Un(n,e)||(n=xE(),$e.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=n)}function hA(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var i=df.transition;df.transition={};try{t(!1),e()}finally{Ae=n,df.transition=i}}function wT(){return In().memoizedState}function dA(t,e,n){var i=gr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},bT(t))ET(e,n);else if(n=nT(t,e,n,i),n!==null){var r=Bt();jn(n,t,i,r),TT(n,e,i)}}function fA(t,e,n){var i=gr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(bT(t))ET(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Un(a,o)){var l=e.interleaved;l===null?(r.next=r,Jg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=nT(t,e,r,i),n!==null&&(r=Bt(),jn(n,t,i,r),TT(n,e,i))}}function bT(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function ET(t,e){Ka=eh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function TT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jg(t,n)}}var th={readContext:xn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},pA={readContext:xn,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:Ev,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vu(4194308,4,gT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vu(4194308,4,t,e)},useInsertionEffect:function(t,e){return vu(4,2,t,e)},useMemo:function(t,e){var n=Yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Yn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=dA.bind(null,$e,t),[i.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:bv,useDebugValue:am,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=bv(!1),e=t[0];return t=hA.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=$e,r=Yn();if(Ue){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ft===null)throw Error($(349));ms&30||aT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Ev(cT.bind(null,i,s,t),[t]),i.flags|=2048,Il(9,lT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Yn(),e=ft.identifierPrefix;if(Ue){var n=bi,i=wi;n=(i&~(1<<32-Fn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gA={readContext:xn,useCallback:yT,useContext:xn,useEffect:om,useImperativeHandle:mT,useInsertionEffect:fT,useLayoutEffect:pT,useMemo:_T,useReducer:ff,useRef:dT,useState:function(){return ff(xl)},useDebugValue:am,useDeferredValue:function(t){var e=In();return vT(e,ot.memoizedState,t)},useTransition:function(){var t=ff(xl)[0],e=In().memoizedState;return[t,e]},useMutableSource:sT,useSyncExternalStore:oT,useId:wT,unstable_isNewReconciler:!1},mA={readContext:xn,useCallback:yT,useContext:xn,useEffect:om,useImperativeHandle:mT,useInsertionEffect:fT,useLayoutEffect:pT,useMemo:_T,useReducer:pf,useRef:dT,useState:function(){return pf(xl)},useDebugValue:am,useDeferredValue:function(t){var e=In();return ot===null?e.memoizedState=t:vT(e,ot.memoizedState,t)},useTransition:function(){var t=pf(xl)[0],e=In().memoizedState;return[t,e]},useMutableSource:sT,useSyncExternalStore:oT,useId:wT,unstable_isNewReconciler:!1};function Dn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kh={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Bt(),r=gr(t),s=Ii(i,r);s.payload=e,n!=null&&(s.callback=n),e=fr(t,s,r),e!==null&&(jn(e,t,r,i),yu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Bt(),r=gr(t),s=Ii(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=fr(t,s,r),e!==null&&(jn(e,t,r,i),yu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),i=gr(t),r=Ii(n,i);r.tag=2,e!=null&&(r.callback=e),e=fr(t,r,i),e!==null&&(jn(e,t,i,n),yu(e,t,i))}};function Tv(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!yl(n,i)||!yl(r,s):!0}function xT(t,e,n){var i=!1,r=xr,s=e.contextType;return typeof s=="object"&&s!==null?s=xn(s):(r=Xt(e)?ps:Mt.current,i=e.contextTypes,s=(i=i!=null)?Eo(t,r):xr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function xv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Kh.enqueueReplaceState(e,e.state,null)}function xp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Zg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=xn(s):(s=Xt(e)?ps:Mt.current,r.context=Eo(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Tp(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Kh.enqueueReplaceState(r,r.state,null),Ju(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function So(t,e){try{var n="",i=e;do n+=WC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function gf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ip(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yA=typeof WeakMap=="function"?WeakMap:Map;function IT(t,e,n){n=Ii(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ih||(ih=!0,Op=i),Ip(t,e)},n}function ST(t,e,n){n=Ii(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Ip(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ip(t,e),typeof i!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Iv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new yA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=RA.bind(null,t,e,n),e.then(t,t))}function Sv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ii(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var _A=Oi.ReactCurrentOwner,Gt=!1;function Vt(t,e,n,i){e.child=t===null?tT(e,null,n,i):xo(e,t.child,n,i)}function Cv(t,e,n,i,r){n=n.render;var s=e.ref;return po(e,r),i=rm(t,e,n,i,s,r),n=sm(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Pi(t,e,r)):(Ue&&n&&qg(e),e.flags|=1,Vt(t,e,i,r),e.child)}function Av(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!gm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kT(t,e,s,i,r)):(t=Tu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:yl,n(o,i)&&t.ref===e.ref)return Pi(t,e,r)}return e.flags|=1,t=mr(s,i),t.ref=e.ref,t.return=e,e.child=t}function kT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(yl(s,i)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,Pi(t,e,r)}return Sp(t,e,n,i,r)}function CT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(oo,on),on|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(oo,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ne(oo,on),on|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ne(oo,on),on|=i;return Vt(t,e,r,n),e.child}function AT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sp(t,e,n,i,r){var s=Xt(n)?ps:Mt.current;return s=Eo(e,s),po(e,r),n=rm(t,e,n,i,s,r),i=sm(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Pi(t,e,r)):(Ue&&i&&qg(e),e.flags|=1,Vt(t,e,n,r),e.child)}function Pv(t,e,n,i,r){if(Xt(n)){var s=!0;Ku(e)}else s=!1;if(po(e,r),e.stateNode===null)wu(t,e),xT(e,n,i),xp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xn(c):(c=Xt(n)?ps:Mt.current,c=Eo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&xv(e,o,i,c),Gi=!1;var f=e.memoizedState;o.state=f,Ju(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Yt.current||Gi?(typeof h=="function"&&(Tp(e,n,h,i),l=e.memoizedState),(a=Gi||Tv(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,iT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Dn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=Xt(n)?ps:Mt.current,l=Eo(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&xv(e,o,i,l),Gi=!1,f=e.memoizedState,o.state=f,Ju(e,i,o,r);var v=e.memoizedState;a!==d||f!==v||Yt.current||Gi?(typeof m=="function"&&(Tp(e,n,m,i),v=e.memoizedState),(c=Gi||Tv(e,n,c,i,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return kp(t,e,n,i,s,r)}function kp(t,e,n,i,r,s){AT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&gv(e,n,!1),Pi(t,e,s);i=e.stateNode,_A.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=xo(e,t.child,null,s),e.child=xo(e,null,a,s)):Vt(t,e,a,s),e.memoizedState=i.state,r&&gv(e,n,!0),e.child}function PT(t){var e=t.stateNode;e.pendingContext?pv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pv(t,e.context,!1),em(t,e.containerInfo)}function Rv(t,e,n,i,r){return To(),Gg(r),e.flags|=256,Vt(t,e,n,i),e.child}var Cp={dehydrated:null,treeContext:null,retryLane:0};function Ap(t){return{baseLanes:t,cachePool:null,transitions:null}}function RT(t,e,n){var i=e.pendingProps,r=ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ne(ze,r&1),t===null)return bp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yh(o,i,0,null),t=hs(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ap(n),e.memoizedState=Cp,t):lm(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return vA(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=mr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=mr(a,s):(s=hs(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Ap(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Cp,i}return s=t.child,t=s.sibling,i=mr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function lm(t,e){return e=Yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $c(t,e,n,i){return i!==null&&Gg(i),xo(e,t.child,null,n),t=lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vA(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=gf(Error($(422))),$c(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Yh({mode:"visible",children:i.children},r,0,null),s=hs(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&xo(e,t.child,null,o),e.child.memoizedState=Ap(o),e.memoizedState=Cp,s);if(!(e.mode&1))return $c(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error($(419)),i=gf(s,i,void 0),$c(t,e,o,i)}if(a=(o&t.childLanes)!==0,Gt||a){if(i=ft,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ai(t,r),jn(i,t,r,-1))}return pm(),i=gf(Error($(421))),$c(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=NA.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,an=dr(r.nextSibling),cn=e,Ue=!0,On=null,t!==null&&(yn[_n++]=wi,yn[_n++]=bi,yn[_n++]=gs,wi=t.id,bi=t.overflow,gs=e),e=lm(e,i.children),e.flags|=4096,e)}function Nv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ep(t.return,e,n)}function mf(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function NT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Vt(t,e,i.children,n),i=ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nv(t,n,e);else if(t.tag===19)Nv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ne(ze,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Zu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),mf(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Zu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}mf(e,!0,n,null,s);break;case"together":mf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wA(t,e,n){switch(e.tag){case 3:PT(e),To();break;case 5:rT(e);break;case 1:Xt(e.type)&&Ku(e);break;case 4:em(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ne(Yu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ne(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?RT(t,e,n):(Ne(ze,ze.current&1),t=Pi(t,e,n),t!==null?t.sibling:null);Ne(ze,ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return NT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ne(ze,ze.current),i)break;return null;case 22:case 23:return e.lanes=0,CT(t,e,n)}return Pi(t,e,n)}var DT,Pp,MT,OT;DT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pp=function(){};MT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ss(ti.current);var s=null;switch(n){case"input":r=Jf(t,r),i=Jf(t,i),s=[];break;case"select":r=He({},r,{value:void 0}),i=He({},i,{value:void 0}),s=[];break;case"textarea":r=tp(t,r),i=tp(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Hu)}ip(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ul.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ul.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};OT=function(t,e,n,i){n!==i&&(e.flags|=4)};function _a(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function bA(t,e,n){var i=e.pendingProps;switch(Kg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return Xt(e.type)&&qu(),Ct(e),null;case 3:return i=e.stateNode,Io(),Fe(Yt),Fe(Mt),nm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(jp(On),On=null))),Pp(t,e),Ct(e),null;case 5:tm(e);var r=ss(El.current);if(n=e.type,t!==null&&e.stateNode!=null)MT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return Ct(e),null}if(t=ss(ti.current),Bc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Jn]=e,i[wl]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(r=0;r<Ra.length;r++)Oe(Ra[r],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":B_(i,s),Oe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",i);break;case"textarea":$_(i,s),Oe("invalid",i)}ip(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Uc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Uc(i.textContent,a,t),r=["children",""+a]):ul.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",i)}switch(n){case"input":Nc(i),z_(i,s,!0);break;case"textarea":Nc(i),W_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Hu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Jn]=e,t[wl]=i,DT(t,e,!1,!1),e.stateNode=t;e:{switch(o=rp(n,i),n){case"dialog":Oe("cancel",t),Oe("close",t),r=i;break;case"iframe":case"object":case"embed":Oe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ra.length;r++)Oe(Ra[r],t);r=i;break;case"source":Oe("error",t),r=i;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),r=i;break;case"details":Oe("toggle",t),r=i;break;case"input":B_(t,i),r=Jf(t,i),Oe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=He({},i,{value:void 0}),Oe("invalid",t);break;case"textarea":$_(t,i),r=tp(t,i),Oe("invalid",t);break;default:r=i}ip(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&hl(t,l):typeof l=="number"&&hl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ul.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&Ng(t,s,l,o))}switch(n){case"input":Nc(t),z_(t,i,!1);break;case"textarea":Nc(t),W_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Tr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?co(t,!!i.multiple,s,!1):i.defaultValue!=null&&co(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Hu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)OT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=ss(El.current),ss(ti.current),Bc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Jn]=e,(s=i.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Uc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Jn]=e,e.stateNode=i}return Ct(e),null;case 13:if(Fe(ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&an!==null&&e.mode&1&&!(e.flags&128))ZE(),To(),e.flags|=98560,s=!1;else if(s=Bc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Jn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),s=!1}else On!==null&&(jp(On),On=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?lt===0&&(lt=3):pm())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return Io(),Pp(t,e),t===null&&_l(e.stateNode.containerInfo),Ct(e),null;case 10:return Xg(e.type._context),Ct(e),null;case 17:return Xt(e.type)&&qu(),Ct(e),null;case 19:if(Fe(ze),s=e.memoizedState,s===null)return Ct(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)_a(s,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zu(t),o!==null){for(e.flags|=128,_a(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(ze,ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>ko&&(e.flags|=128,i=!0,_a(s,!1),e.lanes=4194304)}else{if(!i)if(t=Zu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_a(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return Ct(e),null}else 2*Je()-s.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,i=!0,_a(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=ze.current,Ne(ze,i?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return fm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?on&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function EA(t,e){switch(Kg(e),e.tag){case 1:return Xt(e.type)&&qu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Io(),Fe(Yt),Fe(Mt),nm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tm(e),null;case 13:if(Fe(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(ze),null;case 4:return Io(),null;case 10:return Xg(e.type._context),null;case 22:case 23:return fm(),null;case 24:return null;default:return null}}var Wc=!1,Rt=!1,TA=typeof WeakSet=="function"?WeakSet:Set,te=null;function so(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Qe(t,e,i)}else n.current=null}function Rp(t,e,n){try{n()}catch(i){Qe(t,e,i)}}var Dv=!1;function xA(t,e){if(pp=zu,t=UE(),Hg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(gp={focusedElem:t,selectionRange:n},zu=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,b=v.memoizedState,T=e.stateNode,E=T.getSnapshotBeforeUpdate(e.elementType===e.type?x:Dn(e.type,x),b);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(N){Qe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return v=Dv,Dv=!1,v}function Ga(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Rp(e,n,s)}r=r.next}while(r!==i)}}function Gh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LT(t){var e=t.alternate;e!==null&&(t.alternate=null,LT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[wl],delete e[_p],delete e[oA],delete e[aA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function FT(t){return t.tag===5||t.tag===3||t.tag===4}function Mv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||FT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hu));else if(i!==4&&(t=t.child,t!==null))for(Dp(t,e,n),t=t.sibling;t!==null;)Dp(t,e,n),t=t.sibling}function Mp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Mp(t,e,n),t=t.sibling;t!==null;)Mp(t,e,n),t=t.sibling}var mt=null,Mn=!1;function Bi(t,e,n){for(n=n.child;n!==null;)jT(t,e,n),n=n.sibling}function jT(t,e,n){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(Uh,n)}catch{}switch(n.tag){case 5:Rt||so(n,e);case 6:var i=mt,r=Mn;mt=null,Bi(t,e,n),mt=i,Mn=r,mt!==null&&(Mn?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(Mn?(t=mt,n=n.stateNode,t.nodeType===8?cf(t.parentNode,n):t.nodeType===1&&cf(t,n),gl(t)):cf(mt,n.stateNode));break;case 4:i=mt,r=Mn,mt=n.stateNode.containerInfo,Mn=!0,Bi(t,e,n),mt=i,Mn=r;break;case 0:case 11:case 14:case 15:if(!Rt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Rp(n,e,o),r=r.next}while(r!==i)}Bi(t,e,n);break;case 1:if(!Rt&&(so(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Qe(n,e,a)}Bi(t,e,n);break;case 21:Bi(t,e,n);break;case 22:n.mode&1?(Rt=(i=Rt)||n.memoizedState!==null,Bi(t,e,n),Rt=i):Bi(t,e,n);break;default:Bi(t,e,n)}}function Ov(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TA),e.forEach(function(i){var r=DA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Pn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mt=a.stateNode,Mn=!1;break e;case 3:mt=a.stateNode.containerInfo,Mn=!0;break e;case 4:mt=a.stateNode.containerInfo,Mn=!0;break e}a=a.return}if(mt===null)throw Error($(160));jT(s,o,r),mt=null,Mn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Qe(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VT(e,t),e=e.sibling}function VT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(e,t),qn(t),i&4){try{Ga(3,t,t.return),Gh(3,t)}catch(x){Qe(t,t.return,x)}try{Ga(5,t,t.return)}catch(x){Qe(t,t.return,x)}}break;case 1:Pn(e,t),qn(t),i&512&&n!==null&&so(n,n.return);break;case 5:if(Pn(e,t),qn(t),i&512&&n!==null&&so(n,n.return),t.flags&32){var r=t.stateNode;try{hl(r,"")}catch(x){Qe(t,t.return,x)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aE(r,s),rp(a,o);var c=rp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?dE(r,d):h==="dangerouslySetInnerHTML"?uE(r,d):h==="children"?hl(r,d):Ng(r,h,d,c)}switch(a){case"input":Zf(r,s);break;case"textarea":lE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?co(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?co(r,!!s.multiple,s.defaultValue,!0):co(r,!!s.multiple,s.multiple?[]:"",!1))}r[wl]=s}catch(x){Qe(t,t.return,x)}}break;case 6:if(Pn(e,t),qn(t),i&4){if(t.stateNode===null)throw Error($(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(x){Qe(t,t.return,x)}}break;case 3:if(Pn(e,t),qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{gl(e.containerInfo)}catch(x){Qe(t,t.return,x)}break;case 4:Pn(e,t),qn(t);break;case 13:Pn(e,t),qn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(hm=Je())),i&4&&Ov(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(c=Rt)||h,Pn(e,t),Rt=c):Pn(e,t),qn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(te=t,h=t.child;h!==null;){for(d=te=h;te!==null;){switch(f=te,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ga(4,f,f.return);break;case 1:so(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Qe(i,n,x)}}break;case 5:so(f,f.return);break;case 22:if(f.memoizedState!==null){Fv(d);continue}}m!==null?(m.return=f,te=m):Fv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hE("display",o))}catch(x){Qe(t,t.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Qe(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Pn(e,t),qn(t),i&4&&Ov(t);break;case 21:break;default:Pn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(FT(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(hl(r,""),i.flags&=-33);var s=Mv(t);Mp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Mv(t);Dp(t,a,o);break;default:throw Error($(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function IA(t,e,n){te=t,UT(t)}function UT(t,e,n){for(var i=(t.mode&1)!==0;te!==null;){var r=te,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Wc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Rt;a=Wc;var c=Rt;if(Wc=o,(Rt=l)&&!c)for(te=r;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?jv(r):l!==null?(l.return=o,te=l):jv(r);for(;s!==null;)te=s,UT(s),s=s.sibling;te=r,Wc=a,Rt=c}Lv(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,te=s):Lv(t)}}function Lv(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||Gh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Rt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Dn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wv(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&gl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Rt||e.flags&512&&Np(e)}catch(f){Qe(e,e.return,f)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function Fv(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function jv(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gh(4,e)}catch(l){Qe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Qe(e,r,l)}}var s=e.return;try{Np(e)}catch(l){Qe(e,s,l)}break;case 5:var o=e.return;try{Np(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var SA=Math.ceil,nh=Oi.ReactCurrentDispatcher,cm=Oi.ReactCurrentOwner,bn=Oi.ReactCurrentBatchConfig,Ee=0,ft=null,it=null,wt=0,on=0,oo=Dr(0),lt=0,Sl=null,ys=0,Qh=0,um=0,Qa=null,qt=null,hm=0,ko=1/0,yi=null,ih=!1,Op=null,pr=null,Hc=!1,ir=null,rh=0,Ya=0,Lp=null,bu=-1,Eu=0;function Bt(){return Ee&6?Je():bu!==-1?bu:bu=Je()}function gr(t){return t.mode&1?Ee&2&&wt!==0?wt&-wt:cA.transition!==null?(Eu===0&&(Eu=xE()),Eu):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:RE(t.type)),t):1}function jn(t,e,n,i){if(50<Ya)throw Ya=0,Lp=null,Error($(185));ql(t,n,i),(!(Ee&2)||t!==ft)&&(t===ft&&(!(Ee&2)&&(Qh|=n),lt===4&&Yi(t,wt)),Jt(t,i),n===1&&Ee===0&&!(e.mode&1)&&(ko=Je()+500,Hh&&Mr()))}function Jt(t,e){var n=t.callbackNode;c1(t,e);var i=Bu(t,t===ft?wt:0);if(i===0)n!==null&&K_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&K_(n),e===1)t.tag===0?lA(Vv.bind(null,t)):YE(Vv.bind(null,t)),rA(function(){!(Ee&6)&&Mr()}),n=null;else{switch(IE(i)){case 1:n=Fg;break;case 4:n=EE;break;case 16:n=Uu;break;case 536870912:n=TE;break;default:n=Uu}n=GT(n,BT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function BT(t,e){if(bu=-1,Eu=0,Ee&6)throw Error($(327));var n=t.callbackNode;if(go()&&t.callbackNode!==n)return null;var i=Bu(t,t===ft?wt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=sh(t,i);else{e=i;var r=Ee;Ee|=2;var s=$T();(ft!==t||wt!==e)&&(yi=null,ko=Je()+500,us(t,e));do try{AA();break}catch(a){zT(t,a)}while(!0);Yg(),nh.current=s,Ee=r,it!==null?e=0:(ft=null,wt=0,e=lt)}if(e!==0){if(e===2&&(r=cp(t),r!==0&&(i=r,e=Fp(t,r))),e===1)throw n=Sl,us(t,0),Yi(t,i),Jt(t,Je()),n;if(e===6)Yi(t,i);else{if(r=t.current.alternate,!(i&30)&&!kA(r)&&(e=sh(t,i),e===2&&(s=cp(t),s!==0&&(i=s,e=Fp(t,s))),e===1))throw n=Sl,us(t,0),Yi(t,i),Jt(t,Je()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:Xr(t,qt,yi);break;case 3:if(Yi(t,i),(i&130023424)===i&&(e=hm+500-Je(),10<e)){if(Bu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Bt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=yp(Xr.bind(null,t,qt,yi),e);break}Xr(t,qt,yi);break;case 4:if(Yi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Fn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*SA(i/1960))-i,10<i){t.timeoutHandle=yp(Xr.bind(null,t,qt,yi),i);break}Xr(t,qt,yi);break;case 5:Xr(t,qt,yi);break;default:throw Error($(329))}}}return Jt(t,Je()),t.callbackNode===n?BT.bind(null,t):null}function Fp(t,e){var n=Qa;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=sh(t,e),t!==2&&(e=qt,qt=n,e!==null&&jp(e)),t}function jp(t){qt===null?qt=t:qt.push.apply(qt,t)}function kA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Un(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yi(t,e){for(e&=~um,e&=~Qh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),i=1<<n;t[n]=-1,e&=~i}}function Vv(t){if(Ee&6)throw Error($(327));go();var e=Bu(t,0);if(!(e&1))return Jt(t,Je()),null;var n=sh(t,e);if(t.tag!==0&&n===2){var i=cp(t);i!==0&&(e=i,n=Fp(t,i))}if(n===1)throw n=Sl,us(t,0),Yi(t,e),Jt(t,Je()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xr(t,qt,yi),Jt(t,Je()),null}function dm(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(ko=Je()+500,Hh&&Mr())}}function _s(t){ir!==null&&ir.tag===0&&!(Ee&6)&&go();var e=Ee;Ee|=1;var n=bn.transition,i=Ae;try{if(bn.transition=null,Ae=1,t)return t()}finally{Ae=i,bn.transition=n,Ee=e,!(Ee&6)&&Mr()}}function fm(){on=oo.current,Fe(oo)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iA(n)),it!==null)for(n=it.return;n!==null;){var i=n;switch(Kg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&qu();break;case 3:Io(),Fe(Yt),Fe(Mt),nm();break;case 5:tm(i);break;case 4:Io();break;case 13:Fe(ze);break;case 19:Fe(ze);break;case 10:Xg(i.type._context);break;case 22:case 23:fm()}n=n.return}if(ft=t,it=t=mr(t.current,null),wt=on=e,lt=0,Sl=null,um=Qh=ys=0,qt=Qa=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}rs=null}return t}function zT(t,e){do{var n=it;try{if(Yg(),_u.current=th,eh){for(var i=$e.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}eh=!1}if(ms=0,ht=ot=$e=null,Ka=!1,Tl=0,cm.current=null,n===null||n.return===null){lt=1,Sl=e,it=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=Sv(o);if(m!==null){m.flags&=-257,kv(m,o,a,s,e),m.mode&1&&Iv(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){Iv(s,c,e),pm();break e}l=Error($(426))}}else if(Ue&&a.mode&1){var b=Sv(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),kv(b,o,a,s,e),Gg(So(l,a));break e}}s=l=So(l,a),lt!==4&&(lt=2),Qa===null?Qa=[s]:Qa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=IT(s,l,e);vv(s,T);break e;case 1:a=l;var E=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(pr===null||!pr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=ST(s,a,e);vv(s,N);break e}}s=s.return}while(s!==null)}HT(n)}catch(D){e=D,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function $T(){var t=nh.current;return nh.current=th,t===null?th:t}function pm(){(lt===0||lt===3||lt===2)&&(lt=4),ft===null||!(ys&268435455)&&!(Qh&268435455)||Yi(ft,wt)}function sh(t,e){var n=Ee;Ee|=2;var i=$T();(ft!==t||wt!==e)&&(yi=null,us(t,e));do try{CA();break}catch(r){zT(t,r)}while(!0);if(Yg(),Ee=n,nh.current=i,it!==null)throw Error($(261));return ft=null,wt=0,lt}function CA(){for(;it!==null;)WT(it)}function AA(){for(;it!==null&&!e1();)WT(it)}function WT(t){var e=KT(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?HT(t):it=e,cm.current=null}function HT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EA(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,it=null;return}}else if(n=bA(n,e,on),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);lt===0&&(lt=5)}function Xr(t,e,n){var i=Ae,r=bn.transition;try{bn.transition=null,Ae=1,PA(t,e,n,i)}finally{bn.transition=r,Ae=i}return null}function PA(t,e,n,i){do go();while(ir!==null);if(Ee&6)throw Error($(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(u1(t,s),t===ft&&(it=ft=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hc||(Hc=!0,GT(Uu,function(){return go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bn.transition,bn.transition=null;var o=Ae;Ae=1;var a=Ee;Ee|=4,cm.current=null,xA(t,n),VT(n,t),Y1(gp),zu=!!pp,gp=pp=null,t.current=n,IA(n),t1(),Ee=a,Ae=o,bn.transition=s}else t.current=n;if(Hc&&(Hc=!1,ir=t,rh=r),s=t.pendingLanes,s===0&&(pr=null),r1(n.stateNode),Jt(t,Je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ih)throw ih=!1,t=Op,Op=null,t;return rh&1&&t.tag!==0&&go(),s=t.pendingLanes,s&1?t===Lp?Ya++:(Ya=0,Lp=t):Ya=0,Mr(),null}function go(){if(ir!==null){var t=IE(rh),e=bn.transition,n=Ae;try{if(bn.transition=null,Ae=16>t?16:t,ir===null)var i=!1;else{if(t=ir,ir=null,rh=0,Ee&6)throw Error($(331));var r=Ee;for(Ee|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:Ga(8,h,s)}var d=h.child;if(d!==null)d.return=h,te=d;else for(;te!==null;){h=te;var f=h.sibling,m=h.return;if(LT(h),h===c){te=null;break}if(f!==null){f.return=m,te=f;break}te=m}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ga(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,te=T;break e}te=s.return}}var E=t.current;for(te=E;te!==null;){o=te;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,te=S;else e:for(o=E;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gh(9,a)}}catch(D){Qe(a,a.return,D)}if(a===o){te=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,te=N;break e}te=a.return}}if(Ee=r,Mr(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(Uh,t)}catch{}i=!0}return i}finally{Ae=n,bn.transition=e}}return!1}function Uv(t,e,n){e=So(n,e),e=IT(t,e,1),t=fr(t,e,1),e=Bt(),t!==null&&(ql(t,1,e),Jt(t,e))}function Qe(t,e,n){if(t.tag===3)Uv(t,t,n);else for(;e!==null;){if(e.tag===3){Uv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(pr===null||!pr.has(i))){t=So(n,t),t=ST(e,t,1),e=fr(e,t,1),t=Bt(),e!==null&&(ql(e,1,t),Jt(e,t));break}}e=e.return}}function RA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(wt&n)===n&&(lt===4||lt===3&&(wt&130023424)===wt&&500>Je()-hm?us(t,0):um|=n),Jt(t,e)}function qT(t,e){e===0&&(t.mode&1?(e=Oc,Oc<<=1,!(Oc&130023424)&&(Oc=4194304)):e=1);var n=Bt();t=Ai(t,e),t!==null&&(ql(t,e,n),Jt(t,n))}function NA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qT(t,n)}function DA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),qT(t,n)}var KT;KT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gt=!1,wA(t,e,n);Gt=!!(t.flags&131072)}else Gt=!1,Ue&&e.flags&1048576&&XE(e,Qu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;wu(t,e),t=e.pendingProps;var r=Eo(e,Mt.current);po(e,n),r=rm(null,e,i,t,r,n);var s=sm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(i)?(s=!0,Ku(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Zg(e),r.updater=Kh,e.stateNode=r,r._reactInternals=e,xp(e,i,t,n),e=kp(null,e,i,!0,s,n)):(e.tag=0,Ue&&s&&qg(e),Vt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(wu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=OA(i),t=Dn(i,t),r){case 0:e=Sp(null,e,i,t,n);break e;case 1:e=Pv(null,e,i,t,n);break e;case 11:e=Cv(null,e,i,t,n);break e;case 14:e=Av(null,e,i,Dn(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Dn(i,r),Sp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Dn(i,r),Pv(t,e,i,r,n);case 3:e:{if(PT(e),t===null)throw Error($(387));i=e.pendingProps,s=e.memoizedState,r=s.element,iT(t,e),Ju(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=So(Error($(423)),e),e=Rv(t,e,i,n,r);break e}else if(i!==r){r=So(Error($(424)),e),e=Rv(t,e,i,n,r);break e}else for(an=dr(e.stateNode.containerInfo.firstChild),cn=e,Ue=!0,On=null,n=tT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(To(),i===r){e=Pi(t,e,n);break e}Vt(t,e,i,n)}e=e.child}return e;case 5:return rT(e),t===null&&bp(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,mp(i,r)?o=null:s!==null&&mp(i,s)&&(e.flags|=32),AT(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&bp(e),null;case 13:return RT(t,e,n);case 4:return em(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=xo(e,null,i,n):Vt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Dn(i,r),Cv(t,e,i,r,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ne(Yu,i._currentValue),i._currentValue=o,s!==null)if(Un(s.value,o)){if(s.children===r.children&&!Yt.current){e=Pi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ii(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ep(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ep(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,po(e,n),r=xn(r),i=i(r),e.flags|=1,Vt(t,e,i,n),e.child;case 14:return i=e.type,r=Dn(i,e.pendingProps),r=Dn(i.type,r),Av(t,e,i,r,n);case 15:return kT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Dn(i,r),wu(t,e),e.tag=1,Xt(i)?(t=!0,Ku(e)):t=!1,po(e,n),xT(e,i,r),xp(e,i,r,n),kp(null,e,i,!0,t,n);case 19:return NT(t,e,n);case 22:return CT(t,e,n)}throw Error($(156,e.tag))};function GT(t,e){return bE(t,e)}function MA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,i){return new MA(t,e,n,i)}function gm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OA(t){if(typeof t=="function")return gm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mg)return 11;if(t===Og)return 14}return 2}function mr(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")gm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ys:return hs(n.children,r,s,e);case Dg:o=8,r|=8;break;case Gf:return t=vn(12,n,e,r|2),t.elementType=Gf,t.lanes=s,t;case Qf:return t=vn(13,n,e,r),t.elementType=Qf,t.lanes=s,t;case Yf:return t=vn(19,n,e,r),t.elementType=Yf,t.lanes=s,t;case rE:return Yh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nE:o=10;break e;case iE:o=9;break e;case Mg:o=11;break e;case Og:o=14;break e;case Ki:o=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=vn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function hs(t,e,n,i){return t=vn(7,t,i,e),t.lanes=n,t}function Yh(t,e,n,i){return t=vn(22,t,i,e),t.elementType=rE,t.lanes=n,t.stateNode={isHidden:!1},t}function yf(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function _f(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xd(0),this.expirationTimes=Xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function mm(t,e,n,i,r,s,o,a,l){return t=new LA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zg(s),t}function FA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function QT(t){if(!t)return xr;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Xt(n))return QE(t,n,e)}return e}function YT(t,e,n,i,r,s,o,a,l){return t=mm(n,i,!0,t,r,s,o,a,l),t.context=QT(null),n=t.current,i=Bt(),r=gr(n),s=Ii(i,r),s.callback=e??null,fr(n,s,r),t.current.lanes=r,ql(t,r,i),Jt(t,i),t}function Xh(t,e,n,i){var r=e.current,s=Bt(),o=gr(r);return n=QT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ii(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=fr(r,e,o),t!==null&&(jn(t,r,o,s),yu(t,r,o)),o}function oh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ym(t,e){Bv(t,e),(t=t.alternate)&&Bv(t,e)}function jA(){return null}var XT=typeof reportError=="function"?reportError:function(t){console.error(t)};function _m(t){this._internalRoot=t}Jh.prototype.render=_m.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Xh(t,e,null,null)};Jh.prototype.unmount=_m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_s(function(){Xh(null,t,null,null)}),e[Ci]=null}};function Jh(t){this._internalRoot=t}Jh.prototype.unstable_scheduleHydration=function(t){if(t){var e=CE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qi.length&&e!==0&&e<Qi[n].priority;n++);Qi.splice(n,0,t),n===0&&PE(t)}};function vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zv(){}function VA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=oh(o);s.call(c)}}var o=YT(e,i,t,0,null,!1,!1,"",zv);return t._reactRootContainer=o,t[Ci]=o.current,_l(t.nodeType===8?t.parentNode:t),_s(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=oh(l);a.call(c)}}var l=mm(t,0,!1,null,null,!1,!1,"",zv);return t._reactRootContainer=l,t[Ci]=l.current,_l(t.nodeType===8?t.parentNode:t),_s(function(){Xh(e,l,n,i)}),l}function ed(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=oh(o);a.call(l)}}Xh(e,o,t,r)}else o=VA(n,e,t,r,i);return oh(o)}SE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pa(e.pendingLanes);n!==0&&(jg(e,n|1),Jt(e,Je()),!(Ee&6)&&(ko=Je()+500,Mr()))}break;case 13:_s(function(){var i=Ai(t,1);if(i!==null){var r=Bt();jn(i,t,1,r)}}),ym(t,1)}};Vg=function(t){if(t.tag===13){var e=Ai(t,134217728);if(e!==null){var n=Bt();jn(e,t,134217728,n)}ym(t,134217728)}};kE=function(t){if(t.tag===13){var e=gr(t),n=Ai(t,e);if(n!==null){var i=Bt();jn(n,t,e,i)}ym(t,e)}};CE=function(){return Ae};AE=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};op=function(t,e,n){switch(e){case"input":if(Zf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Wh(i);if(!r)throw Error($(90));oE(i),Zf(i,r)}}}break;case"textarea":lE(t,n);break;case"select":e=n.value,e!=null&&co(t,!!n.multiple,e,!1)}};gE=dm;mE=_s;var UA={usingClientEntryPoint:!1,Events:[Gl,eo,Wh,fE,pE,dm]},va={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BA={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vE(t),t===null?null:t.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||jA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Uh=qc.inject(BA),ei=qc}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UA;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vm(e))throw Error($(200));return FA(t,e,null,n)};dn.createRoot=function(t,e){if(!vm(t))throw Error($(299));var n=!1,i="",r=XT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=mm(t,1,!1,null,null,n,!1,i,r),t[Ci]=e.current,_l(t.nodeType===8?t.parentNode:t),new _m(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=vE(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return _s(t)};dn.hydrate=function(t,e,n){if(!Zh(e))throw Error($(200));return ed(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!vm(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=XT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=YT(e,null,t,1,n??null,r,!1,s,o),t[Ci]=e.current,_l(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Jh(e)};dn.render=function(t,e,n){if(!Zh(e))throw Error($(200));return ed(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!Zh(t))throw Error($(40));return t._reactRootContainer?(_s(function(){ed(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};dn.unstable_batchedUpdates=dm;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Zh(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ed(t,e,n,!1,i)};dn.version="18.3.1-next-f1338f8080-20240426";function JT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JT)}catch(t){console.error(t)}}JT(),Jb.exports=dn;var zA=Jb.exports,$v=zA;qf.createRoot=$v.createRoot,qf.hydrateRoot=$v.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kl.apply(this,arguments)}var rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rr||(rr={}));const Wv="popstate";function $A(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Vp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:ah(r)}return HA(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WA(){return Math.random().toString(36).substr(2,8)}function Hv(t,e){return{usr:t.state,key:t.key,idx:e}}function Vp(t,e,n,i){return n===void 0&&(n=null),kl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zo(e):e,{state:n,key:e&&e.key||i||WA()})}function ah(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function HA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=rr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(kl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=rr.Pop;let b=h(),T=b==null?null:b-c;c=b,l&&l({action:a,location:x.location,delta:T})}function f(b,T){a=rr.Push;let E=Vp(x.location,b,T);c=h()+1;let S=Hv(E,c),N=x.createHref(E);try{o.pushState(S,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(N)}s&&l&&l({action:a,location:x.location,delta:1})}function m(b,T){a=rr.Replace;let E=Vp(x.location,b,T);c=h();let S=Hv(E,c),N=x.createHref(E);o.replaceState(S,"",N),s&&l&&l({action:a,location:x.location,delta:0})}function v(b){let T=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof b=="string"?b:ah(b);return E=E.replace(/ $/,"%20"),We(T,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,T)}let x={get action(){return a},get location(){return t(r,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Wv,d),l=b,()=>{r.removeEventListener(Wv,d),l=null}},createHref(b){return e(r,b)},createURL:v,encodeLocation(b){let T=v(b);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:m,go(b){return o.go(b)}};return x}var qv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qv||(qv={}));function qA(t,e,n){return n===void 0&&(n="/"),KA(t,e,n)}function KA(t,e,n,i){let r=typeof e=="string"?zo(e):e,s=Co(r.pathname||"/",n);if(s==null)return null;let o=ZT(t);GA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=sP(s);a=iP(o[l],c)}return a}function ZT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=yr([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(We(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ZT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:tP(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of ex(s.path))r(s,o,l)}),e}function ex(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=ex(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function GA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nP(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const QA=/^:[\w-]+$/,YA=3,XA=2,JA=1,ZA=10,eP=-2,Kv=t=>t==="*";function tP(t,e){let n=t.split("/"),i=n.length;return n.some(Kv)&&(i+=eP),e&&(i+=XA),n.filter(r=>!Kv(r)).reduce((r,s)=>r+(QA.test(s)?YA:s===""?JA:ZA),i)}function nP(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function iP(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Up({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:yr([s,d.pathname]),pathnameBase:uP(yr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=yr([s,d.pathnameBase]))}return o}function Up(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=rP(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let x=a[d]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const v=a[d];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function rP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function sP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Co(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const oP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aP=t=>oP.test(t);function lP(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?zo(t):t,s;if(n)if(aP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),wm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Gv(n.substring(1),"/"):s=Gv(n,e)}else s=e;return{pathname:s,search:hP(i),hash:dP(r)}}function Gv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function vf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bm(t,e){let n=cP(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Em(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=zo(t):(r=kl({},t),We(!r.pathname||!r.pathname.includes("?"),vf("?","pathname","search",r)),We(!r.pathname||!r.pathname.includes("#"),vf("#","pathname","hash",r)),We(!r.search||!r.search.includes("#"),vf("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=lP(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const yr=t=>t.join("/").replace(/\/\/+/g,"/"),uP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tx=["post","put","patch","delete"];new Set(tx);const pP=["get",...tx];new Set(pP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cl.apply(this,arguments)}const td=M.createContext(null),nx=M.createContext(null),li=M.createContext(null),nd=M.createContext(null),Or=M.createContext({outlet:null,matches:[],isDataRoute:!1}),ix=M.createContext(null);function gP(t,e){let{relative:n}=e===void 0?{}:e;$o()||We(!1);let{basename:i,navigator:r}=M.useContext(li),{hash:s,pathname:o,search:a}=id(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:yr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function $o(){return M.useContext(nd)!=null}function Lr(){return $o()||We(!1),M.useContext(nd).location}function rx(t){M.useContext(li).static||M.useLayoutEffect(t)}function Wo(){let{isDataRoute:t}=M.useContext(Or);return t?CP():mP()}function mP(){$o()||We(!1);let t=M.useContext(td),{basename:e,future:n,navigator:i}=M.useContext(li),{matches:r}=M.useContext(Or),{pathname:s}=Lr(),o=JSON.stringify(bm(r,n.v7_relativeSplatPath)),a=M.useRef(!1);return rx(()=>{a.current=!0}),M.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=Em(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:yr([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function id(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=M.useContext(li),{matches:r}=M.useContext(Or),{pathname:s}=Lr(),o=JSON.stringify(bm(r,i.v7_relativeSplatPath));return M.useMemo(()=>Em(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function yP(t,e){return _P(t,e)}function _P(t,e,n,i){$o()||We(!1);let{navigator:r}=M.useContext(li),{matches:s}=M.useContext(Or),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Lr(),h;if(e){var d;let b=typeof e=="string"?zo(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||We(!1),h=b}else h=c;let f=h.pathname||"/",m=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=qA(t,{pathname:m}),x=TP(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:yr([l,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:yr([l,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,i);return e&&x?M.createElement(nd.Provider,{value:{location:Cl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:rr.Pop}},x):x}function vP(){let t=kP(),e=fP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:r},n):null,null)}const wP=M.createElement(vP,null);class bP extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Or.Provider,{value:this.props.routeContext},M.createElement(ix.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EP(t){let{routeContext:e,match:n,children:i}=t,r=M.useContext(td);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Or.Provider,{value:e},i)}function TP(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||We(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:m}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,v=!1,x=null,b=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||wP,l&&(c<0&&f===0?(AP("route-fallback"),v=!0,b=null):c===f&&(v=!0,b=d.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,f+1)),E=()=>{let S;return m?S=x:v?S=b:d.route.Component?S=M.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,M.createElement(EP,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(bP,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:E(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):E()},null)}var sx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sx||{}),ox=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ox||{});function xP(t){let e=M.useContext(td);return e||We(!1),e}function IP(t){let e=M.useContext(nx);return e||We(!1),e}function SP(t){let e=M.useContext(Or);return e||We(!1),e}function ax(t){let e=SP(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function kP(){var t;let e=M.useContext(ix),n=IP(),i=ax();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function CP(){let{router:t}=xP(sx.UseNavigateStable),e=ax(ox.UseNavigateStable),n=M.useRef(!1);return rx(()=>{n.current=!0}),M.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Cl({fromRouteId:e},s)))},[t,e])}const Qv={};function AP(t,e,n){Qv[t]||(Qv[t]=!0)}function PP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Bp(t){let{to:e,replace:n,state:i,relative:r}=t;$o()||We(!1);let{future:s,static:o}=M.useContext(li),{matches:a}=M.useContext(Or),{pathname:l}=Lr(),c=Wo(),h=Em(e,bm(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return M.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function Nn(t){We(!1)}function RP(t){let{basename:e="/",children:n=null,location:i,navigationType:r=rr.Pop,navigator:s,static:o=!1,future:a}=t;$o()&&We(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:o,future:Cl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=zo(i));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:v="default"}=i,x=M.useMemo(()=>{let b=Co(h,l);return b==null?null:{location:{pathname:b,search:d,hash:f,state:m,key:v},navigationType:r}},[l,h,d,f,m,v,r]);return x==null?null:M.createElement(li.Provider,{value:c},M.createElement(nd.Provider,{children:n,value:x}))}function NP(t){let{children:e,location:n}=t;return yP(zp(e),n)}new Promise(()=>{});function zp(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(i,r)=>{if(!M.isValidElement(i))return;let s=[...e,r];if(i.type===M.Fragment){n.push.apply(n,zp(i.props.children,s));return}i.type!==Nn&&We(!1),!i.props.index||!i.props.children||We(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=zp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lh(){return lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lh.apply(this,arguments)}function lx(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function DP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MP(t,e){return t.button===0&&(!e||e==="_self")&&!DP(t)}const OP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],FP="6";try{window.__reactRouterVersion=FP}catch{}const jP=M.createContext({isTransitioning:!1}),VP="startTransition",Yv=RC[VP];function UP(t){let{basename:e,children:n,future:i,window:r}=t,s=M.useRef();s.current==null&&(s.current=$A({window:r,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=M.useCallback(d=>{c&&Yv?Yv(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.useEffect(()=>PP(i),[i]),M.createElement(RP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const BP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Al=M.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=lx(e,OP),{basename:m}=M.useContext(li),v,x=!1;if(typeof c=="string"&&zP.test(c)&&(v=c,BP))try{let S=new URL(window.location.href),N=c.startsWith("//")?new URL(S.protocol+c):new URL(c),D=Co(N.pathname,m);N.origin===S.origin&&D!=null?c=D+N.search+N.hash:x=!0}catch{}let b=gP(c,{relative:r}),T=WP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function E(S){i&&i(S),S.defaultPrevented||T(S)}return M.createElement("a",lh({},f,{href:v||b,onClick:x||s?i:E,ref:n,target:l}))}),Wr=M.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=lx(e,LP),f=id(l,{relative:d.relative}),m=Lr(),v=M.useContext(nx),{navigator:x,basename:b}=M.useContext(li),T=v!=null&&HP(f)&&c===!0,E=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,S=m.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(S=S.toLowerCase(),N=N?N.toLowerCase():null,E=E.toLowerCase()),N&&b&&(N=Co(N,b)||N);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let O=S===E||!o&&S.startsWith(E)&&S.charAt(D)==="/",w=N!=null&&(N===E||!o&&N.startsWith(E)&&N.charAt(E.length)==="/"),_={isActive:O,isPending:w,isTransitioning:T},I=O?i:void 0,C;typeof s=="function"?C=s(_):C=[s,O?"active":null,w?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let A=typeof a=="function"?a(_):a;return M.createElement(Al,lh({},d,{"aria-current":I,className:C,ref:n,style:A,to:l,viewTransition:c}),typeof h=="function"?h(_):h)});var $p;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($p||($p={}));var Xv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xv||(Xv={}));function $P(t){let e=M.useContext(td);return e||We(!1),e}function WP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Wo(),c=Lr(),h=id(t,{relative:o});return M.useCallback(d=>{if(MP(d,n)){d.preventDefault();let f=i!==void 0?i:ah(c)===ah(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}function HP(t,e){e===void 0&&(e={});let n=M.useContext(jP);n==null&&We(!1);let{basename:i}=$P($p.useViewTransitionState),r=id(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Co(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Co(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Up(r.pathname,o)!=null||Up(r.pathname,s)!=null}var Jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},qP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ux={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new KP;const f=s<<2|a>>4;if(i.push(f),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const v=c<<6&192|d;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GP=function(t){const e=cx(t);return ux.encodeByteArray(e,!0)},ch=function(t){return GP(t).replace(/\./g,"")},hx=function(t){try{return ux.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=()=>QP().__FIREBASE_DEFAULTS__,XP=()=>{if(typeof process>"u"||typeof Jv>"u")return;const t=Jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hx(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return YP()||XP()||JP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dx=t=>{var e,n;return(n=(e=rd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZP=t=>{const e=dx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},fx=()=>{var t;return(t=rd())===null||t===void 0?void 0:t.config},px=t=>{var e;return(e=rd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ch(JSON.stringify(n)),ch(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function iR(){var t;const e=(t=rd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oR(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aR(){return!iR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mx(){try{return typeof indexedDB=="object"}catch{return!1}}function yx(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function lR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="FirebaseError";class Hn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=cR,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rs.prototype.create)}}class Rs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?uR(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Hn(r,a,i)}}function uR(t,e){return t.replace(hR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const hR=/\{\$([^}]+)}/g;function dR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Zv(s)&&Zv(o)){if(!uh(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Zv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Na(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Da(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fR(t,e){const n=new pR(t,e);return n.subscribe.bind(n)}class pR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");gR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=wf),r.error===void 0&&(r.error=wf),r.complete===void 0&&(r.complete=wf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=1e3,yR=2,_R=4*60*60*1e3,vR=.5;function e0(t,e=mR,n=yR){const i=e*Math.pow(n,t),r=Math.round(vR*i*(Math.random()-.5)*2);return Math.min(_R,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t){return t&&t._delegate?t._delegate:t}class Bn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new eR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ER(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bR(t){return t===Jr?void 0:t}function ER(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const xR={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},IR=_e.INFO,SR={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},kR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=SR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sd{constructor(e){this.name=e,this._logLevel=IR,this._logHandler=kR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const CR=(t,e)=>e.some(n=>t instanceof n);let t0,n0;function AR(){return t0||(t0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PR(){return n0||(n0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _x=new WeakMap,Wp=new WeakMap,vx=new WeakMap,bf=new WeakMap,Tm=new WeakMap;function RR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_r(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_x.set(n,t)}).catch(()=>{}),Tm.set(e,t),e}function NR(t){if(Wp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Wp.set(t,e)}let Hp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DR(t){Hp=t(Hp)}function MR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ef(this),e,...n);return vx.set(i,e.sort?e.sort():[e]),_r(i)}:PR().includes(t)?function(...e){return t.apply(Ef(this),e),_r(_x.get(this))}:function(...e){return _r(t.apply(Ef(this),e))}}function OR(t){return typeof t=="function"?MR(t):(t instanceof IDBTransaction&&NR(t),CR(t,AR())?new Proxy(t,Hp):t)}function _r(t){if(t instanceof IDBRequest)return RR(t);if(bf.has(t))return bf.get(t);const e=OR(t);return e!==t&&(bf.set(t,e),Tm.set(e,t)),e}const Ef=t=>Tm.get(t);function wx(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=_r(o);return i&&o.addEventListener("upgradeneeded",l=>{i(_r(o.result),l.oldVersion,l.newVersion,_r(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const LR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],Tf=new Map;function i0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tf.get(e))return Tf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=FR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||LR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Tf.set(e,s),s}DR(t=>({...t,get:(e,n,i)=>i0(e,n)||t.get(e,n,i),has:(e,n)=>!!i0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function VR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qp="@firebase/app",r0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new sd("@firebase/app"),UR="@firebase/app-compat",BR="@firebase/analytics-compat",zR="@firebase/analytics",$R="@firebase/app-check-compat",WR="@firebase/app-check",HR="@firebase/auth",qR="@firebase/auth-compat",KR="@firebase/database",GR="@firebase/data-connect",QR="@firebase/database-compat",YR="@firebase/functions",XR="@firebase/functions-compat",JR="@firebase/installations",ZR="@firebase/installations-compat",eN="@firebase/messaging",tN="@firebase/messaging-compat",nN="@firebase/performance",iN="@firebase/performance-compat",rN="@firebase/remote-config",sN="@firebase/remote-config-compat",oN="@firebase/storage",aN="@firebase/storage-compat",lN="@firebase/firestore",cN="@firebase/vertexai-preview",uN="@firebase/firestore-compat",hN="firebase",dN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="[DEFAULT]",fN={[qp]:"fire-core",[UR]:"fire-core-compat",[zR]:"fire-analytics",[BR]:"fire-analytics-compat",[WR]:"fire-app-check",[$R]:"fire-app-check-compat",[HR]:"fire-auth",[qR]:"fire-auth-compat",[KR]:"fire-rtdb",[GR]:"fire-data-connect",[QR]:"fire-rtdb-compat",[YR]:"fire-fn",[XR]:"fire-fn-compat",[JR]:"fire-iid",[ZR]:"fire-iid-compat",[eN]:"fire-fcm",[tN]:"fire-fcm-compat",[nN]:"fire-perf",[iN]:"fire-perf-compat",[rN]:"fire-rc",[sN]:"fire-rc-compat",[oN]:"fire-gcs",[aN]:"fire-gcs-compat",[lN]:"fire-fst",[uN]:"fire-fst-compat",[cN]:"fire-vertex","fire-js":"fire-js",[hN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,pN=new Map,Gp=new Map;function s0(t,e){try{t.container.addComponent(e)}catch(n){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oi(t){const e=t.name;if(Gp.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,t);for(const n of hh.values())s0(n,t);for(const n of pN.values())s0(n,t);return!0}function Xl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Rs("app","Firebase",gN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=dN;function bx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Kp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw vr.create("bad-app-name",{appName:String(r)});if(n||(n=fx()),!n)throw vr.create("no-options");const s=hh.get(r);if(s){if(uh(n,s.options)&&uh(i,s.config))return s;throw vr.create("duplicate-app",{appName:r})}const o=new TR(r);for(const l of Gp.values())o.addComponent(l);const a=new mN(n,i,o);return hh.set(r,a),a}function Ex(t=Kp){const e=hh.get(t);if(!e&&t===Kp&&fx())return bx();if(!e)throw vr.create("no-app",{appName:t});return e}function En(t,e,n){var i;let r=(i=fN[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(a.join(" "));return}oi(new Bn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="firebase-heartbeat-database",_N=1,Pl="firebase-heartbeat-store";let xf=null;function Tx(){return xf||(xf=wx(yN,_N,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),xf}async function vN(t){try{const n=(await Tx()).transaction(Pl),i=await n.objectStore(Pl).get(xx(t));return await n.done,i}catch(e){if(e instanceof Hn)Ri.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(n.message)}}}async function o0(t,e){try{const i=(await Tx()).transaction(Pl,"readwrite");await i.objectStore(Pl).put(e,xx(t)),await i.done}catch(n){if(n instanceof Hn)Ri.warn(n.message);else{const i=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ri.warn(i.message)}}}function xx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=1024,bN=30*24*60*60*1e3;class EN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=a0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=bN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ri.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=a0(),{heartbeatsToSend:i,unsentEntries:r}=TN(this._heartbeatsCache.heartbeats),s=ch(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ri.warn(n),""}}}function a0(){return new Date().toISOString().substring(0,10)}function TN(t,e=wN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),l0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),l0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mx()?yx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return o0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return o0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function l0(t){return ch(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){oi(new Bn("platform-logger",e=>new jR(e),"PRIVATE")),oi(new Bn("heartbeat",e=>new EN(e),"PRIVATE")),En(qp,r0,t),En(qp,r0,"esm2017"),En("fire-js","")}IN("");function xm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SN=Ix,Sx=new Rs("auth","Firebase",Ix());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new sd("@firebase/auth");function kN(t,...e){dh.logLevel<=_e.WARN&&dh.warn(`Auth (${Ho}): ${t}`,...e)}function xu(t,...e){dh.logLevel<=_e.ERROR&&dh.error(`Auth (${Ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw Im(t,...e)}function ni(t,...e){return Im(t,...e)}function kx(t,e,n){const i=Object.assign(Object.assign({},SN()),{[e]:n});return new Rs("auth","Firebase",i).create(e,{appName:t.name})}function Si(t){return kx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Im(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Sx.create(t,...e)}function ce(t,e,...n){if(!t)throw Im(e,...n)}function Ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xu(e),new Error(e)}function Ni(t,e){t||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CN(){return c0()==="http:"||c0()==="https:"}function c0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CN()||gx()||"connection"in navigator)?navigator.onLine:!0}function PN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ni(n>e,"Short delay should be less than long delay!"),this.isMobile=nR()||sR()}get(){return AN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){Ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new Jl(3e4,6e4);function Li(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,n,i,r={}){return Ax(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Yl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return rR()||(c.referrerPolicy="no-referrer"),Cx.fetch()(Px(t,t.config.apiHost,n,a),c)})}async function Ax(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},RN),e);try{const r=new MN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Kc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Kc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Kc(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kx(t,h,c);zn(t,h)}}catch(r){if(r instanceof Hn)throw r;zn(t,"network-request-failed",{message:String(r)})}}async function Zl(t,e,n,i,r={}){const s=await ci(t,e,n,i,r);return"mfaPendingCredential"in s&&zn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Px(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Sm(t.config,r):`${t.config.apiScheme}://${r}`}function DN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ni(this.auth,"network-request-failed")),NN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ni(t,e,i);return r.customData._tokenResponse=n,r}function u0(t){return t!==void 0&&t.enterprise!==void 0}class ON{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function LN(t,e){return ci(t,"GET","/v2/recaptchaConfig",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function Rx(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jN(t,e=!1){const n=je(t),i=await n.getIdToken(e),r=km(i);ce(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Xa(If(r.auth_time)),issuedAtTime:Xa(If(r.iat)),expirationTime:Xa(If(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function If(t){return Number(t)*1e3}function km(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return xu("JWT malformed, contained fewer than 3 sections"),null;try{const r=hx(n);return r?JSON.parse(r):(xu("Failed to decode base64 JWT payload"),null)}catch(r){return xu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function h0(t){const e=km(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Hn&&VN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function VN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ao(t,Rx(n,{idToken:i}));ce(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Nx(s.providerUserInfo):[],a=zN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function BN(t){const e=je(t);await fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Nx(t){return t.map(e=>{var{providerId:n}=e,i=xm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e){const n=await Ax(t,{},async()=>{const i=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=Px(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Cx.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WN(t,e){return ci(t,"POST","/v2/accounts:revokeToken",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=h0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await $N(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new mo;return i&&(ce(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ce(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ti{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=xm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ao(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jN(this,e)}reload(){return BN(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await fh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await Ao(this,FN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:N,isAnonymous:D,providerData:O,stsTokenManager:w}=n;ce(S&&w,e,"internal-error");const _=mo.fromJSON(this.name,w);ce(typeof S=="string",e,"internal-error"),zi(d,e.name),zi(f,e.name),ce(typeof N=="boolean",e,"internal-error"),ce(typeof D=="boolean",e,"internal-error"),zi(m,e.name),zi(v,e.name),zi(x,e.name),zi(b,e.name),zi(T,e.name),zi(E,e.name);const I=new Ti({uid:S,auth:e,email:f,emailVerified:N,displayName:d,isAnonymous:D,photoURL:v,phoneNumber:m,tenantId:x,stsTokenManager:_,createdAt:T,lastLoginAt:E});return O&&Array.isArray(O)&&(I.providerData=O.map(C=>Object.assign({},C))),b&&(I._redirectEventId=b),I}static async _fromIdTokenResponse(e,n,i=!1){const r=new mo;r.updateFromServerResponse(n);const s=new Ti({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await fh(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ce(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Nx(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new mo;a.updateFromIdToken(i);const l=new Ti({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Yp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new Map;function xi(t){Ni(t instanceof Function,"Expected a class definition");let e=d0.get(t);return e?(Ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,d0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Dx.type="NONE";const f0=Dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t,e,n){return`firebase:${t}:${e}:${n}`}class yo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Iu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Iu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new yo(xi(f0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||xi(f0);const o=Iu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Ti._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new yo(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new yo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vx(e))return"Blackberry";if(Ux(e))return"Webos";if(Ox(e))return"Safari";if((e.includes("chrome/")||Lx(e))&&!e.includes("edge/"))return"Chrome";if(jx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Mx(t=Ot()){return/firefox\//i.test(t)}function Ox(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lx(t=Ot()){return/crios\//i.test(t)}function Fx(t=Ot()){return/iemobile/i.test(t)}function jx(t=Ot()){return/android/i.test(t)}function Vx(t=Ot()){return/blackberry/i.test(t)}function Ux(t=Ot()){return/webos/i.test(t)}function Cm(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HN(t=Ot()){var e;return Cm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qN(){return oR()&&document.documentMode===10}function Bx(t=Ot()){return Cm(t)||jx(t)||Ux(t)||Vx(t)||/windows phone/i.test(t)||Fx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t,e=[]){let n;switch(t){case"Browser":n=p0(Ot());break;case"Worker":n=`${p0(Ot())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ho}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e={}){return ci(t,"GET","/v2/passwordPolicy",Li(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=6;class YN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:QN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new KN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rx(this,{idToken:e}),i=await Ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Si(this));const n=e?je(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GN(this),n=new YN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await WN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xi(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[xi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&kN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fr(t){return je(t)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=fR(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JN(t){od=t}function $x(t){return od.loadJS(t)}function ZN(){return od.recaptchaEnterpriseScript}function eD(){return od.gapiScript}function tD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const nD="recaptcha-enterprise",iD="NO_RECAPTCHA";class rD{constructor(e){this.type=nD,this.auth=Fr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{LN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new ON(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;u0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(iD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&u0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ZN();l.length!==0&&(l+=a),$x(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function m0(t,e,n,i=!1){const r=new rD(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ph(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await m0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await m0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t,e){const n=Xl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(uh(s,e??{}))return r;zn(r,"already-initialized")}return n.initialize({options:e})}function oD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(xi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function aD(t,e,n){const i=Fr(t);ce(i._canInitEmulator,i,"emulator-config-failed"),ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=Wx(e),{host:o,port:a}=lD(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),cD()}function Wx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lD(t){const e=Wx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:y0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:y0(o)}}}function y0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,n){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function uD(t,e){return ci(t,"POST","/v1/accounts:update",e)}async function hD(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){return Zl(t,"POST","/v1/accounts:signInWithPassword",Li(t,e))}async function fD(t,e){return ci(t,"POST","/v1/accounts:sendOobCode",Li(t,e))}async function pD(t,e){return fD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e){return Zl(t,"POST","/v1/accounts:signInWithEmailLink",Li(t,e))}async function mD(t,e){return Zl(t,"POST","/v1/accounts:signInWithEmailLink",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Am{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Rl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Rl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,n,"signInWithPassword",dD);case"emailLink":return gD(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,i,"signUpPassword",hD);case"emailLink":return mD(e,{idToken:n,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e){return Zl(t,"POST","/v1/accounts:signInWithIdp",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="http://localhost";class vs extends Am{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=xm(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new vs(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,_o(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:yD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vD(t){const e=Na(Da(t)).link,n=e?Na(Da(e)).deep_link_id:null,i=Na(Da(t)).deep_link_id;return(i?Na(Da(i)).link:null)||i||n||e||t}class Pm{constructor(e){var n,i,r,s,o,a;const l=Na(Da(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=_D((r=l.mode)!==null&&r!==void 0?r:null);ce(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=vD(e);try{return new Pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.providerId=Ns.PROVIDER_ID}static credential(e,n){return Rl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Pm.parseLink(n);return ce(i,"argument-error"),Rl._fromEmailAndCode(e,i.code,i.tenantId)}}Ns.PROVIDER_ID="password";Ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Hx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends ec{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vs._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ji.credential(n,i)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends ec{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends ec{constructor(){super("twitter.com")}static credential(e,n){return vs._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return er.credential(n,i)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){return Zl(t,"POST","/v1/accounts:signUp",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Ti._fromIdTokenResponse(e,i,r),o=_0(i);return new ws({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=_0(i);return new ws({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function _0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Hn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new gh(e,n,i,r)}}function qx(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(t,s,e,i):s})}async function bD(t,e,n=!1){const i=await Ao(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ws._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(t,e,n=!1){const{auth:i}=t;if(Zn(i.app))return Promise.reject(Si(i));const r="reauthenticate";try{const s=await Ao(t,qx(i,r,e,t),n);ce(s.idToken,i,"internal-error");const o=km(s.idToken);ce(o,i,"internal-error");const{sub:a}=o;return ce(t.uid===a,i,"user-mismatch"),ws._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(t,e,n=!1){if(Zn(t.app))return Promise.reject(Si(t));const i="signIn",r=await qx(t,i,e),s=await ws._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function ED(t,e){return Gx(Fr(t),e)}async function TD(t,e){return Kx(je(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(t){const e=Fr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xD(t,e,n){const i=Fr(t);await ph(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pD)}async function ID(t,e,n){if(Zn(t.app))return Promise.reject(Si(t));const i=Fr(t),o=await ph(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Qx(t),l}),a=await ws._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function SD(t,e,n){return Zn(t.app)?Promise.reject(Si(t)):ED(je(t),Ns.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Qx(t),i})}function kD(t,e){return CD(je(t),null,e)}async function CD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Ao(t,uD(i,s));await t._updateTokensIfNecessary(o,!0)}function AD(t,e,n,i){return je(t).onIdTokenChanged(e,n,i)}function PD(t,e,n){return je(t).beforeAuthStateChanged(e,n)}function RD(t,e,n,i){return je(t).onAuthStateChanged(e,n,i)}function ND(t){return je(t).signOut()}const mh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=1e3,MD=10;class Xx extends Yx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);qN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,MD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},DD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xx.type="LOCAL";const OD=Xx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx extends Yx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Jx.type="SESSION";const Zx=Jx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new ad(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await LD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Rm("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return window}function jD(t){ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof ii().WorkerGlobalScope<"u"&&typeof ii().importScripts=="function"}async function VD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function BD(){return eI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="firebaseLocalStorageDb",zD=1,yh="firebaseLocalStorage",nI="fbase_key";class tc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ld(t,e){return t.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function $D(){const t=indexedDB.deleteDatabase(tI);return new tc(t).toPromise()}function Xp(){const t=indexedDB.open(tI,zD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(yh,{keyPath:nI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(yh)?e(i):(i.close(),await $D(),e(await Xp()))})})}async function v0(t,e,n){const i=ld(t,!0).put({[nI]:e,value:n});return new tc(i).toPromise()}async function WD(t,e){const n=ld(t,!1).get(e),i=await new tc(n).toPromise();return i===void 0?null:i.value}function w0(t,e){const n=ld(t,!0).delete(e);return new tc(n).toPromise()}const HD=800,qD=3;class iI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>qD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ad._getInstance(BD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VD(),!this.activeServiceWorker)return;this.sender=new FD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xp();return await v0(e,mh,"1"),await w0(e,mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>v0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>WD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>w0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=ld(r,!1).getAll();return new tc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iI.type="LOCAL";const KD=iI;new Jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t,e){return e?xi(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends Am{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QD(t){return Gx(t.auth,new Nm(t),t.bypassAuthState)}function YD(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),Kx(n,new Nm(t),t.bypassAuthState)}async function XD(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),bD(n,new Nm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QD;case"linkViaPopup":case"linkViaRedirect":return XD;case"reauthViaPopup":case"reauthViaRedirect":return YD;default:zn(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Jl(2e3,1e4);class ao extends rI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=Rm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JD.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="pendingRedirect",Su=new Map;class eM extends rI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Su.get(this.auth._key());if(!e){try{const i=await tM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Su.set(this.auth._key(),e)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tM(t,e){const n=rM(e),i=iM(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function nM(t,e){Su.set(t._key(),e)}function iM(t){return xi(t._redirectPersistence)}function rM(t){return Iu(ZD,t.config.apiKey,t.name)}async function sM(t,e,n=!1){if(Zn(t.app))return Promise.reject(Si(t));const i=Fr(t),r=GD(i,e),o=await new eM(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=10*60*1e3;class aM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!sI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oM&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hM=/^https?/;async function dM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cM(t);for(const n of e)try{if(fM(n))return}catch{}zn(t,"unauthorized-domain")}function fM(t){const e=Qp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!hM.test(n))return!1;if(uM.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=new Jl(3e4,6e4);function E0(){const t=ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gM(t){return new Promise((e,n)=>{var i,r,s;function o(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),n(ni(t,"network-request-failed"))},timeout:pM.get()})}if(!((r=(i=ii().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ii().gapi)===null||s===void 0)&&s.load)o();else{const a=tD("iframefcb");return ii()[a]=()=>{gapi.load?o():n(ni(t,"network-request-failed"))},$x(`${eD()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ku=null,e})}let ku=null;function mM(t){return ku=ku||gM(t),ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new Jl(5e3,15e3),_M="__/auth/iframe",vM="emulator/auth/iframe",wM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EM(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sm(e,vM):`https://${t.config.authDomain}/${_M}`,i={apiKey:e.apiKey,appName:t.name,v:Ho},r=bM.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Yl(i).slice(1)}`}async function TM(t){const e=await mM(t),n=ii().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:EM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=ni(t,"network-request-failed"),a=ii().setTimeout(()=>{s(o)},yM.get());function l(){ii().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IM=500,SM=600,kM="_blank",CM="http://localhost";class T0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AM(t,e,n,i=IM,r=SM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xM),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Ot().toLowerCase();n&&(a=Lx(c)?kM:n),Mx(c)&&(e=e||CM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(HN(c)&&a!=="_self")return PM(e||"",a),new T0(null);const d=window.open(e||"",a,h);ce(d,t,"popup-blocked");try{d.focus()}catch{}return new T0(d)}function PM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="__/auth/handler",NM="emulator/auth/handler",DM=encodeURIComponent("fac");async function x0(t,e,n,i,r,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ho,eventId:r};if(e instanceof Hx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof ec){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${DM}=${encodeURIComponent(l)}`:"";return`${MM(t)}?${Yl(a).slice(1)}${c}`}function MM({config:t}){return t.emulator?Sm(t,NM):`https://${t.authDomain}/${RM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="webStorageSupport";class OM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zx,this._completeRedirectFn=sM,this._overrideRedirectResult=nM}async _openPopup(e,n,i,r){var s;Ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await x0(e,n,i,Qp(),r);return AM(e,o,Rm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await x0(e,n,i,Qp(),r);return jD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ni(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await TM(e),i=new aM(e);return n.register("authEvent",r=>(ce(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sf,{type:Sf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Sf];o!==void 0&&n(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bx()||Ox()||Cm()}}const LM=OM;var I0="@firebase/auth",S0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VM(t){oi(new Bn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zx(t)},c=new XN(i,r,s,l);return oD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),oi(new Bn("auth-internal",e=>{const n=Fr(e.getProvider("auth").getImmediate());return(i=>new FM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(I0,S0,jM(t)),En(I0,S0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=5*60,BM=px("authIdTokenMaxAge")||UM;let k0=null;const zM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>BM)return;const r=n==null?void 0:n.token;k0!==r&&(k0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function $M(t=Ex()){const e=Xl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sD(t,{popupRedirectResolver:LM,persistence:[KD,OD,Zx]}),i=px("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=zM(s.toString());PD(n,o,()=>o(n.currentUser)),AD(n,a=>o(a))}}const r=dx("auth");return r&&aD(n,`http://${r}`),n}function WM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}JN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=ni("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",WM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VM("Browser");var HM="firebase",qM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En(HM,qM,"app");var C0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,oI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,_){function I(){}I.prototype=_.prototype,w.D=_.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(C,A,R){for(var P=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)P[Y-2]=arguments[Y];return _.prototype[A].apply(C,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,_,I){I||(I=0);var C=Array(16);if(typeof _=="string")for(var A=0;16>A;++A)C[A]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(A=0;16>A;++A)C[A]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=w.g[0],I=w.g[1],A=w.g[2];var R=w.g[3],P=_+(R^I&(A^R))+C[0]+3614090360&4294967295;_=I+(P<<7&4294967295|P>>>25),P=R+(A^_&(I^A))+C[1]+3905402710&4294967295,R=_+(P<<12&4294967295|P>>>20),P=A+(I^R&(_^I))+C[2]+606105819&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(_^A&(R^_))+C[3]+3250441966&4294967295,I=A+(P<<22&4294967295|P>>>10),P=_+(R^I&(A^R))+C[4]+4118548399&4294967295,_=I+(P<<7&4294967295|P>>>25),P=R+(A^_&(I^A))+C[5]+1200080426&4294967295,R=_+(P<<12&4294967295|P>>>20),P=A+(I^R&(_^I))+C[6]+2821735955&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(_^A&(R^_))+C[7]+4249261313&4294967295,I=A+(P<<22&4294967295|P>>>10),P=_+(R^I&(A^R))+C[8]+1770035416&4294967295,_=I+(P<<7&4294967295|P>>>25),P=R+(A^_&(I^A))+C[9]+2336552879&4294967295,R=_+(P<<12&4294967295|P>>>20),P=A+(I^R&(_^I))+C[10]+4294925233&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(_^A&(R^_))+C[11]+2304563134&4294967295,I=A+(P<<22&4294967295|P>>>10),P=_+(R^I&(A^R))+C[12]+1804603682&4294967295,_=I+(P<<7&4294967295|P>>>25),P=R+(A^_&(I^A))+C[13]+4254626195&4294967295,R=_+(P<<12&4294967295|P>>>20),P=A+(I^R&(_^I))+C[14]+2792965006&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(_^A&(R^_))+C[15]+1236535329&4294967295,I=A+(P<<22&4294967295|P>>>10),P=_+(A^R&(I^A))+C[1]+4129170786&4294967295,_=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(_^I))+C[6]+3225465664&4294967295,R=_+(P<<9&4294967295|P>>>23),P=A+(_^I&(R^_))+C[11]+643717713&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^_&(A^R))+C[0]+3921069994&4294967295,I=A+(P<<20&4294967295|P>>>12),P=_+(A^R&(I^A))+C[5]+3593408605&4294967295,_=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(_^I))+C[10]+38016083&4294967295,R=_+(P<<9&4294967295|P>>>23),P=A+(_^I&(R^_))+C[15]+3634488961&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^_&(A^R))+C[4]+3889429448&4294967295,I=A+(P<<20&4294967295|P>>>12),P=_+(A^R&(I^A))+C[9]+568446438&4294967295,_=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(_^I))+C[14]+3275163606&4294967295,R=_+(P<<9&4294967295|P>>>23),P=A+(_^I&(R^_))+C[3]+4107603335&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^_&(A^R))+C[8]+1163531501&4294967295,I=A+(P<<20&4294967295|P>>>12),P=_+(A^R&(I^A))+C[13]+2850285829&4294967295,_=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(_^I))+C[2]+4243563512&4294967295,R=_+(P<<9&4294967295|P>>>23),P=A+(_^I&(R^_))+C[7]+1735328473&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^_&(A^R))+C[12]+2368359562&4294967295,I=A+(P<<20&4294967295|P>>>12),P=_+(I^A^R)+C[5]+4294588738&4294967295,_=I+(P<<4&4294967295|P>>>28),P=R+(_^I^A)+C[8]+2272392833&4294967295,R=_+(P<<11&4294967295|P>>>21),P=A+(R^_^I)+C[11]+1839030562&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^_)+C[14]+4259657740&4294967295,I=A+(P<<23&4294967295|P>>>9),P=_+(I^A^R)+C[1]+2763975236&4294967295,_=I+(P<<4&4294967295|P>>>28),P=R+(_^I^A)+C[4]+1272893353&4294967295,R=_+(P<<11&4294967295|P>>>21),P=A+(R^_^I)+C[7]+4139469664&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^_)+C[10]+3200236656&4294967295,I=A+(P<<23&4294967295|P>>>9),P=_+(I^A^R)+C[13]+681279174&4294967295,_=I+(P<<4&4294967295|P>>>28),P=R+(_^I^A)+C[0]+3936430074&4294967295,R=_+(P<<11&4294967295|P>>>21),P=A+(R^_^I)+C[3]+3572445317&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^_)+C[6]+76029189&4294967295,I=A+(P<<23&4294967295|P>>>9),P=_+(I^A^R)+C[9]+3654602809&4294967295,_=I+(P<<4&4294967295|P>>>28),P=R+(_^I^A)+C[12]+3873151461&4294967295,R=_+(P<<11&4294967295|P>>>21),P=A+(R^_^I)+C[15]+530742520&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^_)+C[2]+3299628645&4294967295,I=A+(P<<23&4294967295|P>>>9),P=_+(A^(I|~R))+C[0]+4096336452&4294967295,_=I+(P<<6&4294967295|P>>>26),P=R+(I^(_|~A))+C[7]+1126891415&4294967295,R=_+(P<<10&4294967295|P>>>22),P=A+(_^(R|~I))+C[14]+2878612391&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~_))+C[5]+4237533241&4294967295,I=A+(P<<21&4294967295|P>>>11),P=_+(A^(I|~R))+C[12]+1700485571&4294967295,_=I+(P<<6&4294967295|P>>>26),P=R+(I^(_|~A))+C[3]+2399980690&4294967295,R=_+(P<<10&4294967295|P>>>22),P=A+(_^(R|~I))+C[10]+4293915773&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~_))+C[1]+2240044497&4294967295,I=A+(P<<21&4294967295|P>>>11),P=_+(A^(I|~R))+C[8]+1873313359&4294967295,_=I+(P<<6&4294967295|P>>>26),P=R+(I^(_|~A))+C[15]+4264355552&4294967295,R=_+(P<<10&4294967295|P>>>22),P=A+(_^(R|~I))+C[6]+2734768916&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~_))+C[13]+1309151649&4294967295,I=A+(P<<21&4294967295|P>>>11),P=_+(A^(I|~R))+C[4]+4149444226&4294967295,_=I+(P<<6&4294967295|P>>>26),P=R+(I^(_|~A))+C[11]+3174756917&4294967295,R=_+(P<<10&4294967295|P>>>22),P=A+(_^(R|~I))+C[2]+718787259&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~_))+C[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+R&4294967295}i.prototype.u=function(w,_){_===void 0&&(_=w.length);for(var I=_-this.blockSize,C=this.B,A=this.h,R=0;R<_;){if(A==0)for(;R<=I;)r(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<_;)if(C[A++]=w.charCodeAt(R++),A==this.blockSize){r(this,C),A=0;break}}else for(;R<_;)if(C[A++]=w[R++],A==this.blockSize){r(this,C),A=0;break}}this.h=A,this.o+=_},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;var I=8*this.o;for(_=w.length-8;_<w.length;++_)w[_]=I&255,I/=256;for(this.u(w),w=Array(16),_=I=0;4>_;++_)for(var C=0;32>C;C+=8)w[I++]=this.g[_]>>>C&255;return w};function s(w,_){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=_(w)}function o(w,_){this.h=_;for(var I=[],C=!0,A=w.length-1;0<=A;A--){var R=w[A]|0;C&&R==_||(I[A]=R,C=!1)}this.g=I}var a={};function l(w){return-128<=w&&128>w?s(w,function(_){return new o([_|0],0>_?-1:0)}):new o([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return b(c(-w));for(var _=[],I=1,C=0;w>=I;C++)_[C]=w/I|0,I*=4294967296;return new o(_,0)}function h(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return b(h(w.substring(1),_));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(_,8)),C=d,A=0;A<w.length;A+=8){var R=Math.min(8,w.length-A),P=parseInt(w.substring(A,A+R),_);8>R?(R=c(Math.pow(_,R)),C=C.j(R).add(c(P))):(C=C.j(I),C=C.add(c(P)))}return C}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-b(this).m();for(var w=0,_=1,I=0;I<this.g.length;I++){var C=this.i(I);w+=(0<=C?C:4294967296+C)*_,_*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(v(this))return"0";if(x(this))return"-"+b(this).toString(w);for(var _=c(Math.pow(w,6)),I=this,C="";;){var A=N(I,_).g;I=T(I,A.j(_));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=A,v(I))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function v(w){if(w.h!=0)return!1;for(var _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function x(w){return w.h==-1}t.l=function(w){return w=T(this,w),x(w)?-1:v(w)?0:1};function b(w){for(var _=w.g.length,I=[],C=0;C<_;C++)I[C]=~w.g[C];return new o(I,~w.h).add(f)}t.abs=function(){return x(this)?b(this):this},t.add=function(w){for(var _=Math.max(this.g.length,w.g.length),I=[],C=0,A=0;A<=_;A++){var R=C+(this.i(A)&65535)+(w.i(A)&65535),P=(R>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);C=P>>>16,R&=65535,P&=65535,I[A]=P<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function T(w,_){return w.add(b(_))}t.j=function(w){if(v(this)||v(w))return d;if(x(this))return x(w)?b(this).j(b(w)):b(b(this).j(w));if(x(w))return b(this.j(b(w)));if(0>this.l(m)&&0>w.l(m))return c(this.m()*w.m());for(var _=this.g.length+w.g.length,I=[],C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var A=0;A<w.g.length;A++){var R=this.i(C)>>>16,P=this.i(C)&65535,Y=w.i(A)>>>16,H=w.i(A)&65535;I[2*C+2*A]+=P*H,E(I,2*C+2*A),I[2*C+2*A+1]+=R*H,E(I,2*C+2*A+1),I[2*C+2*A+1]+=P*Y,E(I,2*C+2*A+1),I[2*C+2*A+2]+=R*Y,E(I,2*C+2*A+2)}for(C=0;C<_;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=_;C<2*_;C++)I[C]=0;return new o(I,0)};function E(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function S(w,_){this.g=w,this.h=_}function N(w,_){if(v(_))throw Error("division by zero");if(v(w))return new S(d,d);if(x(w))return _=N(b(w),_),new S(b(_.g),b(_.h));if(x(_))return _=N(w,b(_)),new S(b(_.g),_.h);if(30<w.g.length){if(x(w)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var I=f,C=_;0>=C.l(w);)I=D(I),C=D(C);var A=O(I,1),R=O(C,1);for(C=O(C,2),I=O(I,2);!v(C);){var P=R.add(C);0>=P.l(w)&&(A=A.add(I),R=P),C=O(C,1),I=O(I,1)}return _=T(w,A.j(_)),new S(A,_)}for(A=d;0<=w.l(_);){for(I=Math.max(1,Math.floor(w.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=c(I),P=R.j(_);x(P)||0<P.l(w);)I-=C,R=c(I),P=R.j(_);v(R)&&(R=f),A=A.add(R),w=T(w,P)}return new S(A,w)}t.A=function(w){return N(this,w).h},t.and=function(w){for(var _=Math.max(this.g.length,w.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)&w.i(C);return new o(I,this.h&w.h)},t.or=function(w){for(var _=Math.max(this.g.length,w.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)|w.i(C);return new o(I,this.h|w.h)},t.xor=function(w){for(var _=Math.max(this.g.length,w.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)^w.i(C);return new o(I,this.h^w.h)};function D(w){for(var _=w.g.length+1,I=[],C=0;C<_;C++)I[C]=w.i(C)<<1|w.i(C-1)>>>31;return new o(I,w.h)}function O(w,_){var I=_>>5;_%=32;for(var C=w.g.length-I,A=[],R=0;R<C;R++)A[R]=0<_?w.i(R+I)>>>_|w.i(R+I+1)<<32-_:w.i(R+I);return new o(A,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,oI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ds=o}).apply(typeof C0<"u"?C0:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aI,Ma,lI,Cu,Jp,cI,uI,hI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var y=i;u=u.split(".");for(var k=0;k<u.length-1;k++){var F=u[k];if(!(F in y))break e;y=y[F]}u=u[u.length-1],k=y[u],p=p(k),p!=k&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var y=0,k=!1,F={next:function(){if(!k&&y<u.length){var j=y++;return{value:p(j,u[j]),done:!1}}return k=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}r("Array.prototype.values",function(u){return u||function(){return s(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,y){return u.call.apply(u.bind,arguments)}function d(u,p,y){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,k),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function f(u,p,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var k=y.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function v(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(k,F,j){for(var K=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)K[Pe-2]=arguments[Pe];return p.prototype[F].apply(k,K)}}function x(u){const p=u.length;if(0<p){const y=Array(p);for(let k=0;k<p;k++)y[k]=u[k];return y}return[]}function b(u,p){for(let y=1;y<arguments.length;y++){const k=arguments[y];if(l(k)){const F=u.length||0,j=k.length||0;u.length=F+j;for(let K=0;K<j;K++)u[F+K]=k[K]}else u.push(k)}}class T{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(u,p,y){for(const k in u)p.call(y,u[k],k,u)}function w(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function _(u){const p={};for(const y in u)p[y]=u[y];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let y,k;for(let F=1;F<arguments.length;F++){k=arguments[F];for(y in k)u[y]=k[y];for(let j=0;j<I.length;j++)y=I[j],Object.prototype.hasOwnProperty.call(k,y)&&(u[y]=k[y])}}function A(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function R(u){a.setTimeout(()=>{throw u},0)}function P(){var u=q;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Y{constructor(){this.h=this.g=null}add(p,y){const k=H.get();k.set(p,y),this.h?this.h.next=k:this.g=k,this.h=k}}var H=new T(()=>new ue,u=>u.reset());class ue{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let re,B=!1,q=new Y,X=()=>{const u=a.Promise.resolve(void 0);re=()=>{u.then(V)}};var V=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(y){R(y)}var p=H;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return u}();function ae(u,p){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{N(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ae.aa.h.call(this)}}v(ae,W);var ne={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function pn(u,p,y,k,F){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!k,this.ha=F,this.key=++Ye,this.da=this.fa=!1}function Be(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function et(u){this.src=u,this.g={},this.h=0}et.prototype.add=function(u,p,y,k,F){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var K=de(u,p,k,F);return-1<K?(p=u[K],y||(p.fa=!1)):(p=new pn(p,this.src,j,!!k,F),p.fa=y,u.push(p)),p};function G(u,p){var y=p.type;if(y in u.g){var k=u.g[y],F=Array.prototype.indexOf.call(k,p,void 0),j;(j=0<=F)&&Array.prototype.splice.call(k,F,1),j&&(Be(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function de(u,p,y,k){for(var F=0;F<u.length;++F){var j=u[F];if(!j.da&&j.listener==p&&j.capture==!!y&&j.ha==k)return F}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),st={};function tn(u,p,y,k,F){if(Array.isArray(p)){for(var j=0;j<p.length;j++)tn(u,p[j],y,k,F);return null}return y=Cn(y),u&&u[xe]?u.K(p,y,c(k)?!!k.capture:!1,F):tt(u,p,y,!1,k,F)}function tt(u,p,y,k,F,j){if(!p)throw Error("Invalid event type");var K=c(F)?!!F.capture:!!F,Pe=Q(u);if(Pe||(u[Ke]=Pe=new et(u)),y=Pe.add(p,y,k,K,j),y.proxy)return y;if(k=kn(),y.proxy=k,k.src=u,k.listener=y,u.addEventListener)ee||(F=K),F===void 0&&(F=!1),u.addEventListener(p.toString(),k,F);else if(u.attachEvent)u.attachEvent(nn(p.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return y}function kn(){function u(y){return p.call(u.src,u.listener,y)}const p=hi;return u}function Wt(u,p,y,k,F){if(Array.isArray(p))for(var j=0;j<p.length;j++)Wt(u,p[j],y,k,F);else k=c(k)?!!k.capture:!!k,y=Cn(y),u&&u[xe]?(u=u.i,p=String(p).toString(),p in u.g&&(j=u.g[p],y=de(j,y,k,F),-1<y&&(Be(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete u.g[p],u.h--)))):u&&(u=Q(u))&&(p=u.g[p.toString()],u=-1,p&&(u=de(p,y,k,F)),(y=-1<u?p[u]:null)&&xt(y))}function xt(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[xe])G(p.i,u);else{var y=u.type,k=u.proxy;p.removeEventListener?p.removeEventListener(y,k,u.capture):p.detachEvent?p.detachEvent(nn(y),k):p.addListener&&p.removeListener&&p.removeListener(k),(y=Q(p))?(G(y,u),y.h==0&&(y.src=null,p[Ke]=null)):Be(u)}}}function nn(u){return u in st?st[u]:st[u]="on"+u}function hi(u,p){if(u.da)u=!0;else{p=new ae(p,this);var y=u.listener,k=u.ha||u.src;u.fa&&xt(u),u=y.call(k,p)}return u}function Q(u){return u=u[Ke],u instanceof et?u:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cn(u){return typeof u=="function"?u:(u[Lt]||(u[Lt]=function(p){return u.handleEvent(p)}),u[Lt])}function Ve(){L.call(this),this.i=new et(this),this.M=this,this.F=null}v(Ve,L),Ve.prototype[xe]=!0,Ve.prototype.removeEventListener=function(u,p,y,k){Wt(this,u,p,y,k)};function ve(u,p){var y,k=u.F;if(k)for(y=[];k;k=k.F)y.push(k);if(u=u.M,k=p.type||p,typeof p=="string")p=new W(p,u);else if(p instanceof W)p.target=p.target||u;else{var F=p;p=new W(k,u),C(p,F)}if(F=!0,y)for(var j=y.length-1;0<=j;j--){var K=p.g=y[j];F=Vr(K,k,!0,p)&&F}if(K=p.g=u,F=Vr(K,k,!0,p)&&F,F=Vr(K,k,!1,p)&&F,y)for(j=0;j<y.length;j++)K=p.g=y[j],F=Vr(K,k,!1,p)&&F}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],k=0;k<y.length;k++)Be(y[k]);delete u.g[p],u.h--}}this.F=null},Ve.prototype.K=function(u,p,y,k){return this.i.add(String(u),p,!1,y,k)},Ve.prototype.L=function(u,p,y,k){return this.i.add(String(u),p,!0,y,k)};function Vr(u,p,y,k){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,j=0;j<p.length;++j){var K=p[j];if(K&&!K.da&&K.capture==y){var Pe=K.listener,pt=K.ha||K.src;K.fa&&G(u.i,K),F=Pe.call(pt,k)!==!1&&F}}return F&&!k.defaultPrevented}function Jo(u,p,y){if(typeof u=="function")y&&(u=f(u,y));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Zo(u){u.g=Jo(()=>{u.g=null,u.i&&(u.i=!1,Zo(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class pc extends L{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Zo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(u){L.call(this),this.h=u,this.g={}}v(Z,L);var ge=[];function gn(u){O(u.g,function(p,y){this.g.hasOwnProperty(y)&&xt(p)},u),u.g={}}Z.prototype.N=function(){Z.aa.N.call(this),gn(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=a.JSON.stringify,Fs=a.JSON.parse,Pd=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Rd(){}Rd.prototype.h=null;function Wy(u){return u.h||(u.h=u.i())}function Hy(){}var ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nd(){W.call(this,"d")}v(Nd,W);function Dd(){W.call(this,"c")}v(Dd,W);var Ur={},qy=null;function gc(){return qy=qy||new Ve}Ur.La="serverreachability";function Ky(u){W.call(this,Ur.La,u)}v(Ky,W);function ta(u){const p=gc();ve(p,new Ky(p))}Ur.STAT_EVENT="statevent";function Gy(u,p){W.call(this,Ur.STAT_EVENT,u),this.stat=p}v(Gy,W);function Ft(u){const p=gc();ve(p,new Gy(p,u))}Ur.Ma="timingevent";function Qy(u,p){W.call(this,Ur.Ma,u),this.size=p}v(Qy,W);function na(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function ia(){this.g=!0}ia.prototype.xa=function(){this.g=!1};function $k(u,p,y,k,F,j){u.info(function(){if(u.g)if(j)for(var K="",Pe=j.split("&"),pt=0;pt<Pe.length;pt++){var Ie=Pe[pt].split("=");if(1<Ie.length){var It=Ie[0];Ie=Ie[1];var St=It.split("_");K=2<=St.length&&St[1]=="type"?K+(It+"="+Ie+"&"):K+(It+"=redacted&")}}else K=null;else K=j;return"XMLHTTP REQ ("+k+") [attempt "+F+"]: "+p+`
`+y+`
`+K})}function Wk(u,p,y,k,F,j,K){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+F+"]: "+p+`
`+y+`
`+j+" "+K})}function js(u,p,y,k){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+qk(u,y)+(k?" "+k:"")})}function Hk(u,p){u.info(function(){return"TIMEOUT: "+p})}ia.prototype.info=function(){};function qk(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var k=y[u];if(!(2>k.length)){var F=k[1];if(Array.isArray(F)&&!(1>F.length)){var j=F[0];if(j!="noop"&&j!="stop"&&j!="close")for(var K=1;K<F.length;K++)F[K]=""}}}}return Fi(y)}catch{return p}}var mc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Md;function yc(){}v(yc,Rd),yc.prototype.g=function(){return new XMLHttpRequest},yc.prototype.i=function(){return{}},Md=new yc;function ji(u,p,y,k){this.j=u,this.i=p,this.l=y,this.R=k||1,this.U=new Z(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xy}function Xy(){this.i=null,this.g="",this.h=!1}var Jy={},Od={};function Ld(u,p,y){u.L=1,u.v=bc(di(p)),u.m=y,u.P=!0,Zy(u,null)}function Zy(u,p){u.F=Date.now(),_c(u),u.A=di(u.v);var y=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),f_(y.i,"t",k),u.C=0,y=u.j.J,u.h=new Xy,u.g=R_(u.j,y?p:null,!u.m),0<u.O&&(u.M=new pc(f(u.Y,u,u.g),u.O)),p=u.U,y=u.g,k=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(ge[0]=F.toString()),F=ge);for(var j=0;j<F.length;j++){var K=tn(y,F[j],k||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),ta(),$k(u.i,u.u,u.A,u.l,u.R,u.m)}ji.prototype.ca=function(u){u=u.target;const p=this.M;p&&fi(u)==3?p.j():this.Y(u)},ji.prototype.Y=function(u){try{if(u==this.g)e:{const St=fi(this.g);var p=this.g.Ba();const Bs=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||w_(this.g)))){this.J||St!=4||p==7||(p==8||0>=Bs?ta(3):ta(2)),Fd(this);var y=this.g.Z();this.X=y;t:if(e_(this)){var k=w_(this.g);u="";var F=k.length,j=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),ra(this);var K="";break t}this.h.i=new a.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(k[p],{stream:!(j&&p==F-1)});k.length=0,this.h.g+=u,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=y==200,Wk(this.i,this.u,this.A,this.l,this.R,St,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,pt=this.g;if((Pe=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Pe)){var Ie=Pe;break t}}Ie=null}if(y=Ie)js(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jd(this,y);else{this.o=!1,this.s=3,Ft(12),Br(this),ra(this);break e}}if(this.P){y=!0;let An;for(;!this.J&&this.C<K.length;)if(An=Kk(this,K),An==Od){St==4&&(this.s=4,Ft(14),y=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Jy){this.s=4,Ft(15),js(this.i,this.l,K,"[Invalid Chunk]"),y=!1;break}else js(this.i,this.l,An,null),jd(this,An);if(e_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||K.length!=0||this.h.h||(this.s=1,Ft(16),y=!1),this.o=this.o&&y,!y)js(this.i,this.l,K,"[Invalid Chunked Response]"),Br(this),ra(this);else if(0<K.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Wd(It),It.M=!0,Ft(11))}}else js(this.i,this.l,K,null),jd(this,K);St==4&&Br(this),this.o&&!this.J&&(St==4?k_(this.j,this):(this.o=!1,_c(this)))}else uC(this.g),y==400&&0<K.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Br(this),ra(this)}}}catch{}finally{}};function e_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kk(u,p){var y=u.C,k=p.indexOf(`
`,y);return k==-1?Od:(y=Number(p.substring(y,k)),isNaN(y)?Jy:(k+=1,k+y>p.length?Od:(p=p.slice(k,k+y),u.C=k+y,p)))}ji.prototype.cancel=function(){this.J=!0,Br(this)};function _c(u){u.S=Date.now()+u.I,t_(u,u.I)}function t_(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=na(f(u.ba,u),p)}function Fd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ji.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Hk(this.i,this.A),this.L!=2&&(ta(),Ft(17)),Br(this),this.s=2,ra(this)):t_(this,this.S-u)};function ra(u){u.j.G==0||u.J||k_(u.j,u)}function Br(u){Fd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,gn(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function jd(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||Vd(y.h,u))){if(!u.K&&Vd(y.h,u)&&y.G==3){try{var k=y.Da.g.parse(p)}catch{k=null}if(Array.isArray(k)&&k.length==3){var F=k;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)kc(y),Ic(y);else break e;$d(y),Ft(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=na(f(y.Za,y),6e3));if(1>=r_(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else $r(y,11)}else if((u.K||y.g==u)&&kc(y),!E(p))for(F=y.Da.g.parse(p),p=0;p<F.length;p++){let Ie=F[p];if(y.T=Ie[0],Ie=Ie[1],y.G==2)if(Ie[0]=="c"){y.K=Ie[1],y.ia=Ie[2];const It=Ie[3];It!=null&&(y.la=It,y.j.info("VER="+y.la));const St=Ie[4];St!=null&&(y.Aa=St,y.j.info("SVER="+y.Aa));const Bs=Ie[5];Bs!=null&&typeof Bs=="number"&&0<Bs&&(k=1.5*Bs,y.L=k,y.j.info("backChannelRequestTimeoutMs_="+k)),k=y;const An=u.g;if(An){const Ac=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ac){var j=k.h;j.g||Ac.indexOf("spdy")==-1&&Ac.indexOf("quic")==-1&&Ac.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ud(j,j.h),j.h=null))}if(k.D){const Hd=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Hd&&(k.ya=Hd,Me(k.I,k.D,Hd))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),k=y;var K=u;if(k.qa=P_(k,k.J?k.ia:null,k.W),K.K){s_(k.h,K);var Pe=K,pt=k.L;pt&&(Pe.I=pt),Pe.B&&(Fd(Pe),_c(Pe)),k.g=K}else I_(k);0<y.i.length&&Sc(y)}else Ie[0]!="stop"&&Ie[0]!="close"||$r(y,7);else y.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?$r(y,7):zd(y):Ie[0]!="noop"&&y.l&&y.l.ta(Ie),y.v=0)}}ta(4)}catch{}}var Gk=class{constructor(u,p){this.g=u,this.map=p}};function n_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function i_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function r_(u){return u.h?1:u.g?u.g.size:0}function Vd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ud(u,p){u.g?u.g.add(p):u.h=p}function s_(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}n_.prototype.cancel=function(){if(this.i=o_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function o_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return x(u.i)}function Qk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],y=u.length,k=0;k<y;k++)p.push(u[k]);return p}p=[],y=0;for(k in u)p[y++]=u[k];return p}function Yk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const k in u)p[y++]=k;return p}}}function a_(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=Yk(u),k=Qk(u),F=k.length,j=0;j<F;j++)p.call(void 0,k[j],y&&y[j],u)}var l_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xk(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var k=u[y].indexOf("="),F=null;if(0<=k){var j=u[y].substring(0,k);F=u[y].substring(k+1)}else j=u[y];p(j,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function zr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof zr){this.h=u.h,vc(this,u.j),this.o=u.o,this.g=u.g,wc(this,u.s),this.l=u.l;var p=u.i,y=new aa;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),c_(this,y),this.m=u.m}else u&&(p=String(u).match(l_))?(this.h=!1,vc(this,p[1]||"",!0),this.o=sa(p[2]||""),this.g=sa(p[3]||"",!0),wc(this,p[4]),this.l=sa(p[5]||"",!0),c_(this,p[6]||"",!0),this.m=sa(p[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}zr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(oa(p,u_,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(oa(p,u_,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(oa(y,y.charAt(0)=="/"?eC:Zk,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",oa(y,nC)),u.join("")};function di(u){return new zr(u)}function vc(u,p,y){u.j=y?sa(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function wc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function c_(u,p,y){p instanceof aa?(u.i=p,iC(u.i,u.h)):(y||(p=oa(p,tC)),u.i=new aa(p,u.h))}function Me(u,p,y){u.i.set(p,y)}function bc(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function sa(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function oa(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Jk),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var u_=/[#\/\?@]/g,Zk=/[#\?:]/g,eC=/[#\?]/g,tC=/[#\?@]/g,nC=/#/g;function aa(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Vi(u){u.g||(u.g=new Map,u.h=0,u.i&&Xk(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=aa.prototype,t.add=function(u,p){Vi(this),this.i=null,u=Vs(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function h_(u,p){Vi(u),p=Vs(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function d_(u,p){return Vi(u),p=Vs(u,p),u.g.has(p)}t.forEach=function(u,p){Vi(this),this.g.forEach(function(y,k){y.forEach(function(F){u.call(p,F,k,this)},this)},this)},t.na=function(){Vi(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let k=0;k<p.length;k++){const F=u[k];for(let j=0;j<F.length;j++)y.push(p[k])}return y},t.V=function(u){Vi(this);let p=[];if(typeof u=="string")d_(this,u)&&(p=p.concat(this.g.get(Vs(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},t.set=function(u,p){return Vi(this),this.i=null,u=Vs(this,u),d_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function f_(u,p,y){h_(u,p),0<y.length&&(u.i=null,u.g.set(Vs(u,p),x(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var k=p[y];const j=encodeURIComponent(String(k)),K=this.V(k);for(k=0;k<K.length;k++){var F=j;K[k]!==""&&(F+="="+encodeURIComponent(String(K[k]))),u.push(F)}}return this.i=u.join("&")};function Vs(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function iC(u,p){p&&!u.j&&(Vi(u),u.i=null,u.g.forEach(function(y,k){var F=k.toLowerCase();k!=F&&(h_(this,k),f_(this,F,y))},u)),u.j=p}function rC(u,p){const y=new ia;if(a.Image){const k=new Image;k.onload=m(Ui,y,"TestLoadImage: loaded",!0,p,k),k.onerror=m(Ui,y,"TestLoadImage: error",!1,p,k),k.onabort=m(Ui,y,"TestLoadImage: abort",!1,p,k),k.ontimeout=m(Ui,y,"TestLoadImage: timeout",!1,p,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else p(!1)}function sC(u,p){const y=new ia,k=new AbortController,F=setTimeout(()=>{k.abort(),Ui(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:k.signal}).then(j=>{clearTimeout(F),j.ok?Ui(y,"TestPingServer: ok",!0,p):Ui(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Ui(y,"TestPingServer: error",!1,p)})}function Ui(u,p,y,k,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),k(y)}catch{}}function oC(){this.g=new Pd}function aC(u,p,y){const k=y||"";try{a_(u,function(F,j){let K=F;c(F)&&(K=Fi(F)),p.push(k+j+"="+encodeURIComponent(K))})}catch(F){throw p.push(k+"type="+encodeURIComponent("_badmap")),F}}function Ec(u){this.l=u.Ub||null,this.j=u.eb||!1}v(Ec,Rd),Ec.prototype.g=function(){return new Tc(this.l,this.j)},Ec.prototype.i=function(u){return function(){return u}}({});function Tc(u,p){Ve.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Tc,Ve),t=Tc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,ca(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,la(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;p_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function p_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?la(this):ca(this),this.readyState==3&&p_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,la(this))},t.Qa=function(u){this.g&&(this.response=u,la(this))},t.ga=function(){this.g&&la(this)};function la(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ca(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function ca(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function g_(u){let p="";return O(u,function(y,k){p+=k,p+=":",p+=y,p+=`\r
`}),p}function Bd(u,p,y){e:{for(k in y){var k=!1;break e}k=!0}k||(y=g_(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Me(u,p,y))}function Ge(u){Ve.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ge,Ve);var lC=/^https?$/i,cC=["POST","PUT"];t=Ge.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,y,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Md.g(),this.v=this.o?Wy(this.o):Wy(Md),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){m_(this,j);return}if(u=y||"",y=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var F in k)y.set(F,k[F]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const j of k.keys())y.set(j,k.get(j));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),F=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cC,p,void 0))||k||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,K]of y)this.g.setRequestHeader(j,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v_(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){m_(this,j)}};function m_(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,y_(u),xc(u)}function y_(u){u.A||(u.A=!0,ve(u,"complete"),ve(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ve(this,"complete"),ve(this,"abort"),xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xc(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?__(this):this.bb())},t.bb=function(){__(this)};function __(u){if(u.h&&typeof o<"u"&&(!u.v[1]||fi(u)!=4||u.Z()!=2)){if(u.u&&fi(u)==4)Jo(u.Ea,0,u);else if(ve(u,"readystatechange"),fi(u)==4){u.h=!1;try{const K=u.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var k;if(k=K===0){var F=String(u.D).match(l_)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),k=!lC.test(F?F.toLowerCase():"")}y=k}if(y)ve(u,"complete"),ve(u,"success");else{u.m=6;try{var j=2<fi(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",y_(u)}}finally{xc(u)}}}}function xc(u,p){if(u.g){v_(u);const y=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ve(u,"ready");try{y.onreadystatechange=k}catch{}}}function v_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function fi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Fs(p)}};function w_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function uC(u){const p={};u=(u.g&&2<=fi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(E(u[k]))continue;var y=A(u[k]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=p[F]||[];p[F]=j,j.push(y)}w(p,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function b_(u){this.Aa=0,this.i=[],this.j=new ia,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,u),this.cb=ua("retryDelaySeedMs",1e4,u),this.Wa=ua("forwardChannelMaxRetries",2,u),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new n_(u&&u.concurrentRequestLimit),this.Da=new oC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=b_.prototype,t.la=8,t.G=1,t.connect=function(u,p,y,k){Ft(0),this.W=u,this.H=p||{},y&&k!==void 0&&(this.H.OSID=y,this.H.OAID=k),this.F=this.X,this.I=P_(this,null,this.W),Sc(this)};function zd(u){if(E_(u),u.G==3){var p=u.U++,y=di(u.I);if(Me(y,"SID",u.K),Me(y,"RID",p),Me(y,"TYPE","terminate"),ha(u,y),p=new ji(u,u.j,p),p.L=2,p.v=bc(di(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=R_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),_c(p)}A_(u)}function Ic(u){u.g&&(Wd(u),u.g.cancel(),u.g=null)}function E_(u){Ic(u),u.u&&(a.clearTimeout(u.u),u.u=null),kc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Sc(u){if(!i_(u.h)&&!u.s){u.s=!0;var p=u.Ga;re||X(),B||(re(),B=!0),q.add(p,u),u.B=0}}function hC(u,p){return r_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=na(f(u.Ga,u,p),C_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new ji(this,this.j,u);let j=this.o;if(this.S&&(j?(j=_(j),C(j,this.S)):j=this.S),this.m!==null||this.O||(F.H=j,j=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var k=this.i[y];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(p+=k,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=x_(this,F,p),y=di(this.I),Me(y,"RID",u),Me(y,"CVER",22),this.D&&Me(y,"X-HTTP-Session-Id",this.D),ha(this,y),j&&(this.O?p="headers="+encodeURIComponent(String(g_(j)))+"&"+p:this.m&&Bd(y,this.m,j)),Ud(this.h,F),this.Ua&&Me(y,"TYPE","init"),this.P?(Me(y,"$req",p),Me(y,"SID","null"),F.T=!0,Ld(F,y,null)):Ld(F,y,p),this.G=2}}else this.G==3&&(u?T_(this,u):this.i.length==0||i_(this.h)||T_(this))};function T_(u,p){var y;p?y=p.l:y=u.U++;const k=di(u.I);Me(k,"SID",u.K),Me(k,"RID",y),Me(k,"AID",u.T),ha(u,k),u.m&&u.o&&Bd(k,u.m,u.o),y=new ji(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=x_(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ud(u.h,y),Ld(y,k,p)}function ha(u,p){u.H&&O(u.H,function(y,k){Me(p,k,y)}),u.l&&a_({},function(y,k){Me(p,k,y)})}function x_(u,p,y){y=Math.min(u.i.length,y);var k=u.l?f(u.l.Na,u.l,u):null;e:{var F=u.i;let j=-1;for(;;){const K=["count="+y];j==-1?0<y?(j=F[0].g,K.push("ofs="+j)):j=0:K.push("ofs="+j);let Pe=!0;for(let pt=0;pt<y;pt++){let Ie=F[pt].g;const It=F[pt].map;if(Ie-=j,0>Ie)j=Math.max(0,F[pt].g-100),Pe=!1;else try{aC(It,K,"req"+Ie+"_")}catch{k&&k(It)}}if(Pe){k=K.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,k}function I_(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;re||X(),B||(re(),B=!0),q.add(p,u),u.v=0}}function $d(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=na(f(u.Fa,u),C_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,S_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=na(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),Ic(this),S_(this))};function Wd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function S_(u){u.g=new ji(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=di(u.qa);Me(p,"RID","rpc"),Me(p,"SID",u.K),Me(p,"AID",u.T),Me(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(p,"TO",u.ja),Me(p,"TYPE","xmlhttp"),ha(u,p),u.m&&u.o&&Bd(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=bc(di(p)),y.m=null,y.P=!0,Zy(y,u)}t.Za=function(){this.C!=null&&(this.C=null,Ic(this),$d(this),Ft(19))};function kc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function k_(u,p){var y=null;if(u.g==p){kc(u),Wd(u),u.g=null;var k=2}else if(Vd(u.h,p))y=p.D,s_(u.h,p),k=1;else return;if(u.G!=0){if(p.o)if(k==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;k=gc(),ve(k,new Qy(k,y)),Sc(u)}else I_(u);else if(F=p.s,F==3||F==0&&0<p.X||!(k==1&&hC(u,p)||k==2&&$d(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),F){case 1:$r(u,5);break;case 4:$r(u,10);break;case 3:$r(u,6);break;default:$r(u,2)}}}function C_(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function $r(u,p){if(u.j.info("Error code "+p),p==2){var y=f(u.fb,u),k=u.Xa;const F=!k;k=new zr(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vc(k,"https"),bc(k),F?rC(k.toString(),y):sC(k.toString(),y)}else Ft(2);u.G=0,u.l&&u.l.sa(p),A_(u),E_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function A_(u){if(u.G=0,u.ka=[],u.l){const p=o_(u.h);(p.length!=0||u.i.length!=0)&&(b(u.ka,p),b(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function P_(u,p,y){var k=y instanceof zr?di(y):new zr(y);if(k.g!="")p&&(k.g=p+"."+k.g),wc(k,k.s);else{var F=a.location;k=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var j=new zr(null);k&&vc(j,k),p&&(j.g=p),F&&wc(j,F),y&&(j.l=y),k=j}return y=u.D,p=u.ya,y&&p&&Me(k,y,p),Me(k,"VER",u.la),ha(u,k),k}function R_(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ge(new Ec({eb:y})):new Ge(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function N_(){}t=N_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cc(){}Cc.prototype.g=function(u,p){return new rn(u,p)};function rn(u,p){Ve.call(this),this.g=new b_(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!E(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Us(this)}v(rn,Ve),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){zd(this.g)},rn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Fi(u),u=y);p.i.push(new Gk(p.Ya++,u)),p.G==3&&Sc(p)},rn.prototype.N=function(){this.g.l=null,delete this.j,zd(this.g),delete this.g,rn.aa.N.call(this)};function D_(u){Nd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}v(D_,Nd);function M_(){Dd.call(this),this.status=1}v(M_,Dd);function Us(u){this.g=u}v(Us,N_),Us.prototype.ua=function(){ve(this.g,"a")},Us.prototype.ta=function(u){ve(this.g,new D_(u))},Us.prototype.sa=function(u){ve(this.g,new M_)},Us.prototype.ra=function(){ve(this.g,"b")},Cc.prototype.createWebChannel=Cc.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,hI=function(){return new Cc},uI=function(){return gc()},cI=Ur,Jp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mc.NO_ERROR=0,mc.TIMEOUT=8,mc.HTTP_ERROR=6,Cu=mc,Yy.COMPLETE="complete",lI=Yy,Hy.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,Ma=Hy,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,aI=Ge}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});const A0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new sd("@firebase/firestore");function wa(){return bs.logLevel}function ie(t,...e){if(bs.logLevel<=_e.DEBUG){const n=e.map(Dm);bs.debug(`Firestore (${qo}): ${t}`,...n)}}function Di(t,...e){if(bs.logLevel<=_e.ERROR){const n=e.map(Dm);bs.error(`Firestore (${qo}): ${t}`,...n)}}function Po(t,...e){if(bs.logLevel<=_e.WARN){const n=e.map(Dm);bs.warn(`Firestore (${qo}): ${t}`,...n)}}function Dm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+t;throw Di(e),new Error(e)}function Te(t,e){t||oe()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pt.UNAUTHENTICATED))}shutdown(){}}class GM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QM{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Te(typeof i.accessToken=="string"),new dI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Pt(e)}}class YM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new YM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const i=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new JM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=e2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Se(t,e){return t<e?-1:t>e?1:0}function Ro(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new ct(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new ct(0,0))}static max(){return new le(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,i){n===void 0?n=0:n>e.length&&oe(),i===void 0?i=e.length-n:i>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Nl{construct(e,n,i){return new Re(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new J(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const t2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Nl{construct(e,n,i){return new _t(e,n,i)}static isValidIdentifier(e){return t2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _t(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new J(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new J(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Re.fromString(e))}static fromName(e){return new se(Re.fromString(e).popFirst(5))}static empty(){return new se(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Re(e.slice()))}}function n2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=le.fromTimestamp(i===1e9?new ct(n+1,0):new ct(n,i));return new Ir(r,se.empty(),e)}function i2(t){return new Ir(t.readTime,t.key,-1)}class Ir{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ir(le.min(),se.empty(),-1)}static max(){return new Ir(le.max(),se.empty(),-1)}}function r2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class o2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==s2)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,i)=>{n(e)})}static reject(e){return new z((n,i)=>{i(e)})}static waitFor(e){return new z((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=z.resolve(!1);for(const i of e)n=n.next(r=>r?z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new z((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new z((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function a2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ic(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mm.oe=-1;function rc(t){return t==null}function _h(t){return t===0&&1/t==-1/0}function l2(t){return typeof t=="number"&&Number.isInteger(t)&&!_h(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||yt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qc(this.root,e,this.comparator,!0)}}class Qc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??yt.RED,this.left=r??yt.EMPTY,this.right=s??yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new yt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return yt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}yt.EMPTY=null,yt.RED=!0,yt.BLACK=!1;yt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,i,r,s){return this}insert(e,n,i){return new yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new R0(this.data.getIterator())}getIteratorFrom(e){return new R0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class R0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new ln([])}unionWith(e){let n=new bt(_t.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gI("Invalid base64 string: "+s):s}}(e);return new Tt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const c2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(Te(!!t),typeof t=="string"){let e=0;const n=c2.exec(t);if(Te(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Lm(t){const e=t.mapValue.fields.__previous_value__;return Om(e)?Lm(e):e}function Dl(t){const e=Sr(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ml{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc={mapValue:{}};function Ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:d2(t)?9007199254740991:h2(t)?10:11:oe()}function ai(t,e){if(t===e)return!0;const n=Ts(t);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dl(t).isEqual(Dl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Sr(r.timestampValue),a=Sr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Es(r.bytesValue).isEqual(Es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Xe(r.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(r.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Xe(r.integerValue)===Xe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Xe(r.doubleValue),a=Xe(s.doubleValue);return o===a?_h(o)===_h(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ro(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(P0(o)!==P0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ai(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function Ol(t,e){return(t.values||[]).find(n=>ai(n,e))!==void 0}function No(t,e){if(t===e)return 0;const n=Ts(t),i=Ts(e);if(n!==i)return Se(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Xe(s.integerValue||s.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return N0(t.timestampValue,e.timestampValue);case 4:return N0(Dl(t),Dl(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Es(s),l=Es(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Se(a[c],l[c]);if(h!==0)return h}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(Xe(s.latitude),Xe(o.latitude));return a!==0?a:Se(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return D0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,x=Se(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:D0(m,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Yc.mapValue&&o===Yc.mapValue)return 0;if(s===Yc.mapValue)return 1;if(o===Yc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Se(l[d],h[d]);if(f!==0)return f;const m=No(a[l[d]],c[h[d]]);if(m!==0)return m}return Se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function N0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Sr(t),i=Sr(e),r=Se(n.seconds,i.seconds);return r!==0?r:Se(n.nanos,i.nanos)}function D0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=No(n[r],i[r]);if(s)return s}return Se(n.length,i.length)}function Do(t){return Zp(t)}function Zp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Sr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Zp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Zp(n.fields[o])}`;return r+"}"}(t.mapValue):oe()}function M0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function eg(t){return!!t&&"integerValue"in t}function Fm(t){return!!t&&"arrayValue"in t}function O0(t){return!!t&&"nullValue"in t}function L0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Au(t){return!!t&&"mapValue"in t}function h2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ja(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ds(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ja(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ja(t.arrayValue.values[n]);return e}return Object.assign({},t)}function d2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(n)}setAll(e){let n=_t.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Ja(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Au(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ds(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Ut(Ja(this.value))}}function mI(t){const e=[];return Ds(t.fields,(n,i)=>{const r=new _t([n]);if(Au(i)){const s=mI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,le.min(),le.min(),le.min(),Ut.empty(),0)}static newFoundDocument(e,n,i,r){return new dt(e,1,n,le.min(),i,r,0)}static newNoDocument(e,n){return new dt(e,2,n,le.min(),le.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,le.min(),le.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.position=e,this.inclusive=n}}function F0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=se.comparator(se.fromName(o.referenceValue),n.key):i=No(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function j0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n="asc"){this.field=e,this.dir=n}}function f2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{}class rt extends yI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new g2(e,n,i):n==="array-contains"?new _2(e,i):n==="in"?new v2(e,i):n==="not-in"?new w2(e,i):n==="array-contains-any"?new b2(e,i):new rt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new m2(e,i):new y2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(No(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends yI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $n(e,n)}matches(e){return _I(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _I(t){return t.op==="and"}function vI(t){return p2(t)&&_I(t)}function p2(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function tg(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+Do(t.value);if(vI(t))return t.filters.map(e=>tg(e)).join(",");{const e=t.filters.map(n=>tg(n)).join(",");return`${t.op}(${e})`}}function wI(t,e){return t instanceof rt?function(i,r){return r instanceof rt&&i.op===r.op&&i.field.isEqual(r.field)&&ai(i.value,r.value)}(t,e):t instanceof $n?function(i,r){return r instanceof $n&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&wI(o,r.filters[a]),!0):!1}(t,e):void oe()}function bI(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${Do(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(bI).join(" ,")+"}"}(t):"Filter"}class g2 extends rt{constructor(e,n,i){super(e,n,i),this.key=se.fromName(i.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class m2 extends rt{constructor(e,n){super(e,"in",n),this.keys=EI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class y2 extends rt{constructor(e,n){super(e,"not-in",n),this.keys=EI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function EI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>se.fromName(i.referenceValue))}class _2 extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fm(n)&&Ol(n.arrayValue,this.value)}}class v2 extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class w2 extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ol(this.value.arrayValue,n)}}class b2 extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ol(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function V0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new E2(t,e,n,i,r,s,o)}function jm(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>tg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),rc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Do(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Do(i)).join(",")),e.ue=n}return e.ue}function Vm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!f2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j0(t.startAt,e.startAt)&&j0(t.endAt,e.endAt)}function ng(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function T2(t,e,n,i,r,s,o,a){return new Ko(t,e,n,i,r,s,o,a)}function Um(t){return new Ko(t)}function U0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TI(t){return t.collectionGroup!==null}function Za(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new bt(_t.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ll(s,i))}),n.has(_t.keyField().canonicalString())||e.ce.push(new Ll(_t.keyField(),i))}return e.ce}function ri(t){const e=he(t);return e.le||(e.le=x2(e,Za(t))),e.le}function x2(t,e){if(t.limitType==="F")return V0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ll(r.field,s)});const n=t.endAt?new vh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new vh(t.startAt.position,t.startAt.inclusive):null;return V0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function ig(t,e){const n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rg(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cd(t,e){return Vm(ri(t),ri(e))&&t.limitType===e.limitType}function xI(t){return`${jm(ri(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>bI(r)).join(", ")}]`),rc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Do(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Do(r)).join(",")),`Target(${i})`}(ri(t))}; limitType=${t.limitType})`}function ud(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):se.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Za(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=F0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Za(i),r)||i.endAt&&!function(o,a,l){const c=F0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Za(i),r))}(t,e)}function I2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function II(t){return(e,n)=>{let i=!1;for(const r of Za(t)){const s=S2(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function S2(t,e,n){const i=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?No(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return pI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=new qe(se.comparator);function Mi(){return k2}const SI=new qe(se.comparator);function Oa(...t){let e=SI;for(const n of t)e=e.insert(n.key,n);return e}function kI(t){let e=SI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function os(){return el()}function CI(){return el()}function el(){return new Go(t=>t.toString(),(t,e)=>t.isEqual(e))}const C2=new qe(se.comparator),A2=new bt(se.comparator);function ye(...t){let e=A2;for(const n of t)e=e.add(n);return e}const P2=new bt(Se);function R2(){return P2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function AI(t){return{integerValue:""+t}}function N2(t,e){return l2(e)?AI(e):Bm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function D2(t,e,n){return t instanceof Fl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Om(s)&&(s=Lm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof jl?RI(t,e):t instanceof Vl?NI(t,e):function(r,s){const o=PI(r,s),a=B0(o)+B0(r.Pe);return eg(o)&&eg(r.Pe)?AI(a):Bm(r.serializer,a)}(t,e)}function M2(t,e,n){return t instanceof jl?RI(t,e):t instanceof Vl?NI(t,e):n}function PI(t,e){return t instanceof wh?function(i){return eg(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Fl extends hd{}class jl extends hd{constructor(e){super(),this.elements=e}}function RI(t,e){const n=DI(e);for(const i of t.elements)n.some(r=>ai(r,i))||n.push(i);return{arrayValue:{values:n}}}class Vl extends hd{constructor(e){super(),this.elements=e}}function NI(t,e){let n=DI(e);for(const i of t.elements)n=n.filter(r=>!ai(r,i));return{arrayValue:{values:n}}}class wh extends hd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function B0(t){return Xe(t.integerValue||t.doubleValue)}function DI(t){return Fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.field=e,this.transform=n}}function L2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof jl&&r instanceof jl||i instanceof Vl&&r instanceof Vl?Ro(i.elements,r.elements,ai):i instanceof wh&&r instanceof wh?ai(i.Pe,r.Pe):i instanceof Fl&&r instanceof Fl}(t.transform,e.transform)}class F2{constructor(e,n){this.version=e,this.transformResults=n}}class at{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new at}static exists(e){return new at(void 0,e)}static updateTime(e){return new at(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dd{}function MI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oc(t.key,at.none()):new sc(t.key,t.data,at.none());{const n=t.data,i=Ut.empty();let r=new bt(_t.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new jr(t.key,i,new ln(r.toArray()),at.none())}}function j2(t,e,n){t instanceof sc?function(r,s,o){const a=r.value.clone(),l=$0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof jr?function(r,s,o){if(!Pu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=$0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(OI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function tl(t,e,n,i){return t instanceof sc?function(s,o,a,l){if(!Pu(s.precondition,o))return a;const c=s.value.clone(),h=W0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof jr?function(s,o,a,l){if(!Pu(s.precondition,o))return a;const c=W0(s.fieldTransforms,l,o),h=o.data;return h.setAll(OI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Pu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function V2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=PI(i.transform,r||null);s!=null&&(n===null&&(n=Ut.empty()),n.set(i.field,s))}return n||null}function z0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ro(i,r,(s,o)=>L2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sc extends dd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jr extends dd{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function $0(t,e,n){const i=new Map;Te(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,M2(o,a,n[r]))}return i}function W0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,D2(s,o,e))}return i}class oc extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LI extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&j2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=tl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=tl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=CI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=MI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,(n,i)=>z0(n,i))&&Ro(this.baseMutations,e.baseMutations,(n,i)=>z0(n,i))}}class zm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Te(e.mutations.length===i.length);let r=function(){return C2}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new zm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,we;function FI(t){switch(t){default:return oe();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function jI(t){if(t===void 0)return Di("GRPC error has no .code"),U.UNKNOWN;switch(t){case nt.OK:return U.OK;case nt.CANCELLED:return U.CANCELLED;case nt.UNKNOWN:return U.UNKNOWN;case nt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case nt.INTERNAL:return U.INTERNAL;case nt.UNAVAILABLE:return U.UNAVAILABLE;case nt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case nt.NOT_FOUND:return U.NOT_FOUND;case nt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case nt.ABORTED:return U.ABORTED;case nt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case nt.DATA_LOSS:return U.DATA_LOSS;default:return oe()}}(we=nt||(nt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new ds([4294967295,4294967295],0);function H0(t){const e=$2().encode(t),n=new oI;return n.update(e),new Uint8Array(n.digest())}function q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ds([n,i],0),new ds([r,s],0)]}class $m{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new La(`Invalid padding: ${n}`);if(i<0)throw new La(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new La(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(ds.fromNumber(i)));return r.compare(W2)===1&&(r=new ds([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=H0(e),[i,r]=q0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new $m(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=H0(e),[i,r]=q0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class La extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new fd(le.min(),r,new qe(Se),Mi(),ye())}}class ac{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ac(i,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class VI{constructor(e,n){this.targetId=e,this.me=n}}class UI{constructor(e,n,i=Tt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class K0{constructor(){this.fe=0,this.ge=Q0(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),i=ye();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:oe()}}),new ac(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Q0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class H2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mi(),this.qe=G0(),this.Qe=new qe(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(ng(s))if(i===0){const o=new se(s.path);this.Ue(n,o,dt.newNoDocument(o,le.min()))}else Te(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Es(i).toUint8Array()}catch(l){if(l instanceof gI)return Po("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new $m(o,r,s)}catch(l){return Po(l instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&ng(a.target)){const l=new se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,dt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ye();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new fd(e,n,this.Qe,this.ke,i);return this.ke=Mi(),this.qe=G0(),this.Qe=new qe(Se),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new K0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new bt(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new K0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function G0(){return new qe(se.comparator)}function Q0(){return new qe(se.comparator)}const q2={asc:"ASCENDING",desc:"DESCENDING"},K2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G2={and:"AND",or:"OR"};class Q2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sg(t,e){return t.useProto3Json||rc(e)?e:{value:e}}function bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Y2(t,e){return bh(t,e.toTimestamp())}function un(t){return Te(!!t),le.fromTimestamp(function(n){const i=Sr(n);return new ct(i.seconds,i.nanos)}(t))}function Wm(t,e){return og(t,e).canonicalString()}function og(t,e){const n=function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zI(t){const e=Re.fromString(t);return Te(GI(e)),e}function Eh(t,e){return Wm(t.databaseId,e.path)}function nl(t,e){const n=zI(e);if(n.get(1)!==t.databaseId.projectId)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(WI(n))}function $I(t,e){return Wm(t.databaseId,e)}function X2(t){const e=zI(t);return e.length===4?Re.emptyPath():WI(e)}function ag(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WI(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Y0(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function J2(t,e){return"found"in e?function(i,r){Te(!!r.found),r.found.name,r.found.updateTime;const s=nl(i,r.found.name),o=un(r.found.updateTime),a=r.found.createTime?un(r.found.createTime):le.min(),l=new Ut({mapValue:{fields:r.found.fields}});return dt.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(i,r){Te(!!r.missing),Te(!!r.readTime);const s=nl(i,r.missing),o=un(r.readTime);return dt.newNoDocument(s,o)}(t,e):oe()}function Z2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Te(h===void 0||typeof h=="string"),Tt.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Tt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:jI(c.code);return new J(h,c.message||"")}(o);n=new UI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=nl(t,i.document.name),s=un(i.document.updateTime),o=i.document.createTime?un(i.document.createTime):le.min(),a=new Ut({mapValue:{fields:i.document.fields}}),l=dt.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Ru(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=nl(t,i.document),s=i.readTime?un(i.readTime):le.min(),o=dt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Ru([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=nl(t,i.document),s=i.removedTargetIds||[];n=new Ru([],s,r,null)}else{if(!("filter"in e))return oe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new z2(r,s),a=i.targetId;n=new VI(a,o)}}return n}function HI(t,e){let n;if(e instanceof sc)n={update:Y0(t,e.key,e.value)};else if(e instanceof oc)n={delete:Eh(t,e.key)};else if(e instanceof jr)n={update:Y0(t,e.key,e.data),updateMask:lO(e.fieldMask)};else{if(!(e instanceof LI))return oe();n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Fl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Y2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function eO(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?un(r.updateTime):un(s);return o.isEqual(le.min())&&(o=un(s)),new F2(o,r.transformResults||[])}(n,e))):[]}function tO(t,e){return{documents:[$I(t,e.path)]}}function nO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=$I(t,r);const s=function(c){if(c.length!==0)return KI($n.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Ks(f.field),direction:sO(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function iO(t){let e=X2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Te(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=qI(d);return f instanceof $n&&vI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new Ll(Gs(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,rc(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new vh(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new vh(m,f)}(n.endAt)),T2(e,r,o,s,a,"F",l,c)}function rO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Gs(n.unaryFilter.field);return rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Gs(n.unaryFilter.field);return rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gs(n.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gs(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Gs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(i=>qI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function sO(t){return q2[t]}function oO(t){return K2[t]}function aO(t){return G2[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Gs(t){return _t.fromServerFormat(t.fieldPath)}function KI(t){return t instanceof rt?function(n){if(n.op==="=="){if(L0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(O0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(O0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:oO(n.op),value:n.value}}}(t):t instanceof $n?function(n){const i=n.getFilters().map(r=>KI(r));return i.length===1?i[0]:{compositeFilter:{op:aO(n.op),filters:i}}}(t):oe()}function lO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,i,r,s=le.min(),o=le.min(),a=Tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.ct=e}}function uO(t){const e=iO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.un=new dO}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ir.min())}updateCollectionGroup(e,n,i){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class dO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new bt(Re.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new bt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Mo(0)}static kn(){return new Mo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.changes=new Go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&tl(i.mutation,r,ln.empty(),ct.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ye()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ye()){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Oa();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=os();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ye()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Mi();const o=el(),a=function(){return el()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof jr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),tl(h.mutation,c,h.mutation.getFieldMask(),ct.now())):o.set(c.key,ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new pO(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=el();let r=new qe((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||ln.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||ye()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=CI();h.forEach(f=>{if(!s.has(f)){const m=MI(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):z.resolve(os());let a=-1,l=s;return o.next(c=>z.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ye())).next(h=>({batchId:a,changes:kI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(i=>{let r=Oa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Oa();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,l=>{const c=function(d,f){return new Ko(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,dt.newInvalidDocument(h)))});let a=Oa();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&tl(h.mutation,c,ln.empty(),ct.now()),ud(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:un(r.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:uO(r.bundledQuery),readTime:un(r.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.overlays=new qe(se.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=os();return z.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),z.resolve()}getOverlaysForCollection(e,n,i){const r=os(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new qe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=os(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=os(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return z.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new B2(n,i));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Tr=new bt(ut.Er),this.dr=new bt(ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new ut(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new ut(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new se(new Re([])),i=new ut(n,e),r=new ut(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Re([])),i=new ut(n,e),r=new ut(n,e+1);let s=ye();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ut(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new bt(ut.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new U2(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ut(n,0),r=new ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bt(Se);return n.forEach(r=>{const s=new ut(r,0),o=new ut(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;se.isDocumentKey(s)||(s=s.child(""));const o=new ut(new se(s),0);let a=new bt(Se);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return z.forEach(n.mutations,r=>{const s=new ut(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new ut(n,0),r=this.br.firstAfterOrEqual(i);return z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.Mr=e,this.docs=function(){return new qe(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return z.resolve(i?i.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let i=Mi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():dt.newInvalidDocument(r))}),z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Mi();const o=n.path,a=new se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||r2(i2(h),i)<=0||(r.has(h.key)||ud(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,i,r){oe()}Or(e,n){return z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new bO(this)}getSize(e){return z.resolve(this.size)}}class bO extends fO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.persistence=e,this.Nr=new Go(n=>jm(n),Vm),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hm,this.targetCount=0,this.kr=Mo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Mo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),z.waitFor(s).next(()=>r)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return z.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),z.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return z.resolve(i)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mm(0),this.Kr=!1,this.Kr=!0,this.$r=new _O,this.referenceDelegate=e(this),this.Ur=new EO(this),this.indexManager=new hO,this.remoteDocumentCache=function(r){return new wO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new cO(n),this.Gr=new mO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new vO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new xO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class xO extends o2{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Jr=new Hm,this.Yr=null}static Zr(e){return new qm(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),z.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,i=>{const r=se.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ye(),r=ye();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Km(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return aR()?8:a2(Ot())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new IO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(wa()<=_e.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(wa()<=_e.DEBUG&&ie("QueryEngine","Query:",qs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(wa()<=_e.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(n))):z.resolve())}Yi(e,n){if(U0(n))return z.resolve(null);let i=ri(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=rg(n,null,"F"),i=ri(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ye(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,rg(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return U0(n)||r.isEqual(le.min())?z.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?z.resolve(null):(wa()<=_e.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qs(n)),this.rs(e,o,n,n2(r,-1)).next(a=>a))})}ts(e,n){let i=new bt(II(e));return n.forEach((r,s)=>{ud(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return wa()<=_e.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",qs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ir.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new qe(Se),this._s=new Go(s=>jm(s),Vm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function CO(t,e,n,i){return new kO(t,e,n,i)}async function QI(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ye();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function AO(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=z.resolve();return f.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(x=>{const b=c.docVersions.get(v);Te(b!==null),x.version.compareTo(b)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function YI(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function PO(t,e){const n=he(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Tt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(x,b,T){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=Mi(),c=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(RO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(le.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function RO(t,e,n){let i=ye(),r=ye();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Mi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function NO(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function DO(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,z.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new sr(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function lg(t,e,n){const i=he(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ic(o))throw o;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function X0(t,e,n){const i=he(t);let r=le.min(),s=ye();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=he(l),f=d._s.get(h);return f!==void 0?z.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(i,o,ri(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:le.min(),n?s:ye())).next(a=>(MO(i,I2(e),a),{documents:a,Ts:s})))}function MO(t,e,n){let i=t.us.get(e)||le.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class J0{constructor(){this.activeTargetIds=R2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OO{constructor(){this.so=new J0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new J0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function kf(){return Xc===null?Xc=function(){return 268435456+Math.round(2147483648*Math.random())}():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class VO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=kf(),l=this.xo(n,i.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>(ie("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Po("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=FO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=kf();return new Promise((o,a)=>{const l=new aI;l.setWithCredentials(!0),l.listenOnce(lI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Cu.NO_ERROR:const h=l.getResponseJson();ie(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Cu.TIMEOUT:ie(At,`RPC '${e}' ${s} timed out`),a(new J(U.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:const d=l.getStatus();if(ie(At,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(b){const T=b.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(T)>=0?T:U.UNKNOWN}(m.status);a(new J(v,m.message))}else a(new J(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(U.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{ie(At,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);ie(At,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=kf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hI(),a=uI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");ie(At,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const v=new jO({Io:b=>{m?ie(At,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(f||(ie(At,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),ie(At,`RPC '${e}' stream ${r} sending:`,b),d.send(b))},To:()=>d.close()}),x=(b,T,E)=>{b.listen(T,S=>{try{E(S)}catch(N){setTimeout(()=>{throw N},0)}})};return x(d,Ma.EventType.OPEN,()=>{m||(ie(At,`RPC '${e}' stream ${r} transport opened.`),v.yo())}),x(d,Ma.EventType.CLOSE,()=>{m||(m=!0,ie(At,`RPC '${e}' stream ${r} transport closed`),v.So())}),x(d,Ma.EventType.ERROR,b=>{m||(m=!0,Po(At,`RPC '${e}' stream ${r} transport errored:`,b),v.So(new J(U.UNAVAILABLE,"The operation could not be completed")))}),x(d,Ma.EventType.MESSAGE,b=>{var T;if(!m){const E=b.data[0];Te(!!E);const S=E,N=S.error||((T=S[0])===null||T===void 0?void 0:T.error);if(N){ie(At,`RPC '${e}' stream ${r} received error:`,N);const D=N.status;let O=function(I){const C=nt[I];if(C!==void 0)return jI(C)}(D),w=N.message;O===void 0&&(O=U.INTERNAL,w="Unknown error status: "+D+" with message "+N.message),m=!0,v.So(new J(O,w)),d.close()}else ie(At,`RPC '${e}' stream ${r} received:`,E),v.bo(E)}}),x(a,cI.STAT_EVENT,b=>{b.stat===Jp.PROXY?ie(At,`RPC '${e}' stream ${r} detected buffering proxy`):b.stat===Jp.NOPROXY&&ie(At,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function Cf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){return new Q2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gm(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Di(n.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new J(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UO extends XI{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Z2(this.serializer,e),i=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?un(o.readTime):le.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=ag(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=ng(l)?{documents:tO(s,l)}:{query:nO(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BI(s,o.resumeToken);const c=sg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=bh(s,o.snapshotVersion.toTimestamp());const c=sg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=rO(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=ag(this.serializer),n.removeTarget=e,this.a_(n)}}class BO extends XI{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=eO(e.writeResults,e.commitTime),i=un(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=ag(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>HI(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,og(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(U.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,og(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class $O{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Di(n),this.D_=!1):ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Ms(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=he(l);c.L_.add(4),await lc(c),c.q_.set("Unknown"),c.L_.delete(4),await gd(c)}(this))})}),this.q_=new $O(i,r)}}async function gd(t){if(Ms(t))for(const e of t.B_)await e(!0)}async function lc(t){for(const e of t.B_)await e(!1)}function JI(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Jm(n)?Xm(n):Qo(n).r_()&&Ym(n,e))}function Qm(t,e){const n=he(t),i=Qo(n);n.N_.delete(e),i.r_()&&ZI(n,e),n.N_.size===0&&(i.r_()?i.o_():Ms(n)&&n.q_.set("Unknown"))}function Ym(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qo(t).A_(e)}function ZI(t,e){t.Q_.xe(e),Qo(t).R_(e)}function Xm(t){t.Q_=new H2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qo(t).start(),t.q_.v_()}function Jm(t){return Ms(t)&&!Qo(t).n_()&&t.N_.size>0}function Ms(t){return he(t).L_.size===0}function eS(t){t.Q_=void 0}async function HO(t){t.q_.set("Online")}async function qO(t){t.N_.forEach((e,n)=>{Ym(t,e)})}async function KO(t,e){eS(t),Jm(t)?(t.q_.M_(e),Xm(t)):t.q_.set("Unknown")}async function GO(t,e,n){if(t.q_.set("Online"),e instanceof UI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Th(t,i)}else if(e instanceof Ru?t.Q_.Ke(e):e instanceof VI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const i=await YI(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Tt.EMPTY_BYTE_STRING,h.snapshotVersion)),ZI(s,l);const d=new sr(h.target,l,c,h.sequenceNumber);Ym(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){ie("RemoteStore","Failed to raise snapshot:",i),await Th(t,i)}}async function Th(t,e,n){if(!ic(e))throw e;t.L_.add(1),await lc(t),t.q_.set("Offline"),n||(n=()=>YI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await gd(t)})}function tS(t,e){return e().catch(n=>Th(t,n,e))}async function md(t){const e=he(t),n=kr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;QO(e);)try{const r=await NO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,YO(e,r)}catch(r){await Th(e,r)}nS(e)&&iS(e)}function QO(t){return Ms(t)&&t.O_.length<10}function YO(t,e){t.O_.push(e);const n=kr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function nS(t){return Ms(t)&&!kr(t).n_()&&t.O_.length>0}function iS(t){kr(t).start()}async function XO(t){kr(t).p_()}async function JO(t){const e=kr(t);for(const n of t.O_)e.m_(n.mutations)}async function ZO(t,e,n){const i=t.O_.shift(),r=zm.from(i,e,n);await tS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await md(t)}async function eL(t,e){e&&kr(t).V_&&await async function(i,r){if(function(o){return FI(o)&&o!==U.ABORTED}(r.code)){const s=i.O_.shift();kr(i).s_(),await tS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await md(i)}}(t,e),nS(t)&&iS(t)}async function ew(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const i=Ms(n);n.L_.add(3),await lc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await gd(n)}async function tL(t,e){const n=he(t);e?(n.L_.delete(2),await gd(n)):e||(n.L_.add(2),await lc(n),n.q_.set("Unknown"))}function Qo(t){return t.K_||(t.K_=function(n,i,r){const s=he(n);return s.w_(),new UO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:HO.bind(null,t),Ro:qO.bind(null,t),mo:KO.bind(null,t),d_:GO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Jm(t)?Xm(t):t.q_.set("Unknown")):(await t.K_.stop(),eS(t))})),t.K_}function kr(t){return t.U_||(t.U_=function(n,i,r){const s=he(n);return s.w_(),new BO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:XO.bind(null,t),mo:eL.bind(null,t),f_:JO.bind(null,t),g_:ZO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await md(t)):(await t.U_.stop(),t.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Zm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ey(t,e){if(Di("AsyncQueue",`${e}: ${t}`),ic(t))return new J(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||se.comparator(n.key,i.key):(n,i)=>se.comparator(n.key,i.key),this.keyedMap=Oa(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new vo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new vo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.W_=new qe(se.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Oo{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Oo(e,n,vo.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class iL{constructor(){this.queries=nw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=he(n),s=r.queries;r.queries=nw(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new J(U.ABORTED,"Firestore shutting down"))}}function nw(){return new Go(t=>xI(t),cd)}async function rL(t,e){const n=he(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new nL,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=ey(o,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&ty(n)}async function sL(t,e){const n=he(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function oL(t,e){const n=he(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&ty(n)}function aL(t,e,n){const i=he(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function ty(t){t.Y_.forEach(e=>{e.next()})}var cg,iw;(iw=cg||(cg={})).ea="default",iw.Cache="cache";class lL{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Oo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==cg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.key=e}}class sS{constructor(e){this.key=e}}class cL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=II(e),this.Ra=new vo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new tw,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=ud(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;f&&m?f.data.isEqual(m.data)?v!==x&&(i.track({type:3,doc:m}),b=!0):this.ga(f,m)||(i.track({type:2,doc:m}),b=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),b=!0):f&&!m&&(i.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(m?(o=o.add(m),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,v){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return x(m)-x(v)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Oo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new tw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new sS(i))}),this.da.forEach(i=>{e.has(i)||n.push(new rS(i))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class hL{constructor(e){this.key=e,this.va=!1}}class dL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Go(a=>xI(a),cd),this.Ma=new Map,this.xa=new Set,this.Oa=new qe(se.comparator),this.Na=new Map,this.La=new Hm,this.Ba={},this.ka=new Map,this.qa=Mo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fL(t,e,n=!0){const i=hS(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await oS(i,e,n,!0),r}async function pL(t,e){const n=hS(t);await oS(n,e,!0,!1)}async function oS(t,e,n,i){const r=await DO(t.localStore,ri(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await gL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&JI(t.remoteStore,r),a}async function gL(t,e,n,i,r){t.Ka=(d,f,m)=>async function(x,b,T,E){let S=b.view.ma(T);S.ns&&(S=await X0(x.localStore,b.query,!1).then(({documents:w})=>b.view.ma(w,S)));const N=E&&E.targetChanges.get(b.targetId),D=E&&E.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(S,x.isPrimaryClient,N,D);return sw(x,b.targetId,O.wa),O.snapshot}(t,d,f,m);const s=await X0(t.localStore,e,!0),o=new cL(e,s.Ts),a=o.ma(s.documents),l=ac.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);sw(t,n,c.wa);const h=new uL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function mL(t,e,n){const i=he(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!cd(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await lg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Qm(i.remoteStore,r.targetId),ug(i,r.targetId)}).catch(nc)):(ug(i,r.targetId),await lg(i.localStore,r.targetId,!0))}async function yL(t,e){const n=he(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Qm(n.remoteStore,i.targetId))}async function _L(t,e,n){const i=IL(t);try{const r=await function(o,a){const l=he(o),c=ct.now(),h=a.reduce((m,v)=>m.add(v.key),ye());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Mi(),x=ye();return l.cs.getEntries(m,h).next(b=>{v=b,v.forEach((T,E)=>{E.isValidDocument()||(x=x.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(b=>{d=b;const T=[];for(const E of a){const S=V2(E,d.get(E.key).overlayedDocument);S!=null&&T.push(new jr(E.key,S,mI(S.value.mapValue),at.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,T,a)}).next(b=>{f=b;const T=b.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(m,b.batchId,T)})}).then(()=>({batchId:f.batchId,changes:kI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new qe(Se)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await cc(i,r.changes),await md(i.remoteStore)}catch(r){const s=ey(r,"Failed to persist write");n.reject(s)}}async function aS(t,e){const n=he(t);try{const i=await PO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(Te(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Te(o.va):r.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await cc(n,i,e)}catch(i){await nc(i)}}function rw(t,e,n){const i=he(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&ty(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vL(t,e,n){const i=he(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new qe(se.comparator);o=o.insert(s,dt.newNoDocument(s,le.min()));const a=ye().add(s),l=new fd(le.min(),new Map,new qe(Se),o,a);await aS(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),ny(i)}else await lg(i.localStore,e,!1).then(()=>ug(i,e,n)).catch(nc)}async function wL(t,e){const n=he(t),i=e.batch.batchId;try{const r=await AO(n.localStore,e);cS(n,i,null),lS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await cc(n,r)}catch(r){await nc(r)}}async function bL(t,e,n){const i=he(t);try{const r=await function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Te(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);cS(i,e,n),lS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await cc(i,r)}catch(r){await nc(r)}}function lS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function cS(t,e,n){const i=he(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function ug(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||uS(t,i)})}function uS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Qm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ny(t))}function sw(t,e,n){for(const i of n)i instanceof rS?(t.La.addReference(i.key,e),EL(t,i)):i instanceof sS?(ie("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||uS(t,i.key)):oe()}function EL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ie("SyncEngine","New document in limbo: "+n),t.xa.add(i),ny(t))}function ny(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Re.fromString(e)),i=t.qa.next();t.Na.set(i,new hL(n)),t.Oa=t.Oa.insert(n,i),JI(t.remoteStore,new sr(ri(Um(n.path)),i,"TargetPurposeLimboResolution",Mm.oe))}}async function cc(t,e,n){const i=he(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Km.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=he(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>z.forEach(c,f=>z.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>z.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!ic(d))throw d;ie("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),v=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(f,x)}}}(i.localStore,s))}async function TL(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const i=await QI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new J(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cc(n,i.hs)}}function xL(t,e){const n=he(t),i=n.Na.get(e);if(i&&i.va)return ye().add(i.key);{let r=ye();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function hS(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vL.bind(null,e),e.Ca.d_=oL.bind(null,e.eventManager),e.Ca.$a=aL.bind(null,e.eventManager),e}function IL(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bL.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return CO(this.persistence,new SO,e.initialUser,this.serializer)}Ga(e){return new TO(qm.Zr,this.serializer)}Wa(e){return new OO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class hg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TL.bind(null,this.syncEngine),await tL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iL}()}createDatastore(e){const n=pd(e.databaseInfo.databaseId),i=function(s){return new VO(s)}(e.databaseInfo);return function(s,o,a,l){return new zO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new WO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>rw(this.syncEngine,n,0),function(){return Z0.D()?new Z0:new LO}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new dL(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=he(r);ie("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await lc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hg.provider={build:()=>new hg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=he(r),a={documents:s.map(d=>Eh(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Re.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=J2(o.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());Te(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new oc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=se.fromPath(i);this.mutations.push(new LI(r,this.precondition(r)))}),await async function(i,r){const s=he(i),o={writes:r.map(a=>HI(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Re.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw oe();n=le.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new J(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?at.exists(!1):at.updateTime(n):at.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new J(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return at.updateTime(n)}return at.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new Gm(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new kL(this.datastore),n=this.cu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const n=this.updateFunction(e);return!rc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!FI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Pt.UNAUTHENTICATED,this.clientId=fI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{ie("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ie("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ey(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Af(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await QI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ow(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PL(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>ew(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>ew(e.remoteStore,r)),t._onlineComponents=e}async function PL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Af(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Po("Error using user provided cache. Falling back to memory cache: "+n),await Af(t,new xh)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await Af(t,new xh);return t._offlineComponents}async function iy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await ow(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await ow(t,new hg))),t._onlineComponents}function RL(t){return iy(t).then(e=>e.syncEngine)}function NL(t){return iy(t).then(e=>e.datastore)}async function aw(t){const e=await iy(t),n=e.eventManager;return n.onListen=fL.bind(null,e.syncEngine),n.onUnlisten=mL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t,e,n){if(!n)throw new J(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DL(t,e,n,i){if(e===!0&&i===!0)throw new J(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cw(t){if(!se.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uw(t){if(se.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yd(t);throw new J(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new J(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hw(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new KM;switch(i.type){case"firstParty":return new XM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new J(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=lw.get(n);i&&(ie("ComponentProvider","Removing Datastore"),lw.delete(n),i.terminate())}(this),Promise.resolve()}}function ML(t,e,n,i={}){var r;const s=(t=Vn(t,_d))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Pt.MOCK_USER;else{a=tR(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new J(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Pt(c)}t._authCredentials=new GM(new dI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Os(this.firestore,e,this._query)}}class Nt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class br extends Os{constructor(e,n,i){super(e,n,Um(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new se(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function pS(t,e,...n){if(t=je(t),fS("collection","path",e),t instanceof _d){const i=Re.fromString(e,...n);return uw(i),new br(t,null,i)}{if(!(t instanceof Nt||t instanceof br))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Re.fromString(e,...n));return uw(i),new br(t.firestore,null,i)}}function Cr(t,e,...n){if(t=je(t),arguments.length===1&&(e=fI.newId()),fS("doc","path",e),t instanceof _d){const i=Re.fromString(e,...n);return cw(i),new Nt(t,null,new se(i))}{if(!(t instanceof Nt||t instanceof br))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Re.fromString(e,...n));return cw(i),new Nt(t.firestore,t instanceof br?t.converter:null,new se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gm(this,"async_queue_retry"),this.Vu=()=>{const i=Cf();i&&ie("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Cf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new wr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ic(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Di("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Zm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function fw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ar extends _d{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new dw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dw(e),this._firestoreClient=void 0,await e}}}function OL(t,e){const n=typeof t=="object"?t:Ex(),i=typeof t=="string"?t:"(default)",r=Xl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=ZP("firestore");s&&ML(r,...s)}return r}function vd(t){if(t._terminated)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LL(t),t._firestoreClient}function LL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new u2(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new AL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(Tt.fromBase64String(e))}catch(n){throw new J(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xs(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=/^__.*__$/;class jL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new sc(e,this.data,n,this.fieldTransforms)}}class gS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class oy{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new oy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ih(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mS(this.Cu)&&FL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class VL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||pd(e)}Qu(e,n,i,r=!1){return new oy({Cu:e,methodName:n,qu:i,path:_t.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uc(t){const e=t._freezeSettings(),n=pd(t._databaseId);return new VL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ay(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);hy("Data must be an object, but it was:",o,i);const a=yS(i,o);let l,c;if(s.merge)l=new ln(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=dg(e,d,n);if(!o.contains(f))throw new J(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);vS(h,f)||h.push(f)}l=new ln(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new jL(new Ut(a),l,c)}class bd extends wd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bd}}class ly extends wd{_toFieldTransform(e){return new O2(e.path,new Fl)}isEqual(e){return e instanceof ly}}function cy(t,e,n,i){const r=t.Qu(1,e,n);hy("Data must be an object, but it was:",r,i);const s=[],o=Ut.empty();Ds(i,(l,c)=>{const h=dy(e,l,n);c=je(c);const d=r.Nu(h);if(c instanceof bd)s.push(h);else{const f=hc(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new ln(s);return new gS(o,a,r.fieldTransforms)}function uy(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[dg(e,i,n)],l=[r];if(s.length%2!=0)throw new J(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(dg(e,s[f])),l.push(s[f+1]);const c=[],h=Ut.empty();for(let f=a.length-1;f>=0;--f)if(!vS(c,a[f])){const m=a[f];let v=l[f];v=je(v);const x=o.Nu(m);if(v instanceof bd)c.push(m);else{const b=hc(v,x);b!=null&&(c.push(m),h.set(m,b))}}const d=new ln(c);return new gS(h,d,o.fieldTransforms)}function UL(t,e,n,i=!1){return hc(n,t.Qu(i?4:3,e))}function hc(t,e){if(_S(t=je(t)))return hy("Unsupported field value:",e,t),yS(t,e);if(t instanceof wd)return function(i,r){if(!mS(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=hc(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return N2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=ct.fromDate(i);return{timestampValue:bh(r.serializer,s)}}if(i instanceof ct){const s=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bh(r.serializer,s)}}if(i instanceof ry)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xs)return{bytesValue:BI(r.serializer,i._byteString)};if(i instanceof Nt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Wm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof sy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Bm(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${yd(i)}`)}(t,e)}function yS(t,e){const n={};return pI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(t,(i,r)=>{const s=hc(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function _S(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof ry||t instanceof xs||t instanceof Nt||t instanceof wd||t instanceof sy)}function hy(t,e,n){if(!_S(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=yd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function dg(t,e,n){if((e=je(e))instanceof Yo)return e._internalPath;if(typeof e=="string")return dy(t,e);throw Ih("Field path arguments must be of type string or ",t,!1,void 0,n)}const BL=new RegExp("[~\\*/\\[\\]]");function dy(t,e,n){if(e.search(BL)>=0)throw Ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yo(...e.split("."))._internalPath}catch{throw Ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ih(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new J(U.INVALID_ARGUMENT,a+t+l)}function vS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zL extends Sh{data(){return super.data()}}function fy(t,e){return typeof e=="string"?dy(t,e):e instanceof Yo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class py{}class wS extends py{}function WL(t,e,...n){let i=[];e instanceof py&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof my).length,a=s.filter(l=>l instanceof gy).length;if(o>1||o>0&&a>0)throw new J(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class gy extends wS{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new gy(e,n,i)}_apply(e){const n=this._parse(e);return bS(e._query,n),new Os(e.firestore,e.converter,ig(e._query,n))}_parse(e){const n=uc(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gw(d,h);const m=[];for(const v of d)m.push(pw(l,s,v));f={arrayValue:{values:m}}}else f=pw(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gw(d,h),f=UL(a,o,d,h==="in"||h==="not-in");return rt.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class my extends py{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new my(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)bS(o,l),o=ig(o,l)}(e._query,n),new Os(e.firestore,e.converter,ig(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yy extends wS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yy(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new J(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new J(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ll(s,o)}(e._query,this._field,this._direction);return new Os(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Ko(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function HL(t,e="asc"){const n=e,i=fy("orderBy",t);return yy._create(i,n)}function pw(t,e,n){if(typeof(n=je(n))=="string"){if(n==="")throw new J(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TI(e)&&n.indexOf("/")!==-1)throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Re.fromString(n));if(!se.isDocumentKey(i))throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return M0(t,new se(i))}if(n instanceof Nt)return M0(t,n._key);throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(n)}.`)}function gw(t,e){if(!Array.isArray(t)||t.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bS(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ES{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ds(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Xe(o.doubleValue));return new sy(s)}convertGeoPoint(e){return new ry(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Lm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const n=Sr(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Re.fromString(e);Te(GI(i));const r=new Ml(i.get(1),i.get(3)),s=new se(i.popFirst(5));return r.isEqual(n)||Di(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class qL extends ES{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vy extends Sh{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(fy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Nu extends vy{data(e={}){return super.data(e)}}class KL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new lo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Nu(this._firestore,this._userDataWriter,i.key,i,new lo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Nu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new lo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Nu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new lo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:GL(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function GL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}class wy extends ES{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function TS(t,e,n){t=Vn(t,Nt);const i=Vn(t.firestore,Ar),r=_y(t.converter,e,n);return Ed(i,[ay(uc(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,at.none())])}function QL(t,e,n,...i){t=Vn(t,Nt);const r=Vn(t.firestore,Ar),s=uc(r);let o;return o=typeof(e=je(e))=="string"||e instanceof Yo?uy(s,"updateDoc",t._key,e,n,i):cy(s,"updateDoc",t._key,e),Ed(r,[o.toMutation(t._key,at.exists(!0))])}function YL(t){return Ed(Vn(t.firestore,Ar),[new oc(t._key,at.none())])}function by(t,...e){var n,i,r;t=je(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fw(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,h;if(t instanceof Nt)c=Vn(t.firestore,Ar),h=Um(t._key.path),l={next:d=>{e[o]&&e[o](XL(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Vn(t,Os);c=Vn(d.firestore,Ar),h=d._query;const f=new wy(c);l={next:m=>{e[o]&&e[o](new KL(c,f,d,m))},error:e[o+1],complete:e[o+2]},$L(t._query)}return function(f,m,v,x){const b=new SL(x),T=new lL(m,b,v);return f.asyncQueue.enqueueAndForget(async()=>rL(await aw(f),T)),()=>{b.Za(),f.asyncQueue.enqueueAndForget(async()=>sL(await aw(f),T))}}(vd(c),h,a,l)}function Ed(t,e){return function(i,r){const s=new wr;return i.asyncQueue.enqueueAndForget(async()=>_L(await RL(i),r,s)),s.promise}(vd(t),e)}function XL(t,e,n){const i=n.docs.get(e._key),r=new wy(t);return new vy(t,r,e._key,i,new lo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uc(e)}set(e,n,i){this._verifyNotCommitted();const r=tr(e,this._firestore),s=_y(r.converter,n,i),o=ay(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,at.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=tr(e,this._firestore);let o;return o=typeof(n=je(n))=="string"||n instanceof Yo?uy(this._dataReader,"WriteBatch.update",s._key,n,i,r):cy(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,at.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=tr(e,this._firestore);return this._mutations=this._mutations.concat(new oc(n._key,at.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tr(t,e){if((t=je(t)).firestore!==e)throw new J(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=uc(n)}get(n){const i=tr(n,this._firestore),r=new qL(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return oe();const o=s[0];if(o.isFoundDocument())return new Sh(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new Sh(this._firestore,r,i._key,null,i.converter);throw oe()})}set(n,i,r){const s=tr(n,this._firestore),o=_y(s.converter,i,r),a=ay(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){const o=tr(n,this._firestore);let a;return a=typeof(i=je(i))=="string"||i instanceof Yo?uy(this._dataReader,"Transaction.update",o._key,i,r,s):cy(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=tr(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=tr(e,this._firestore),i=new wy(this._firestore);return super.get(e).then(r=>new vy(this._firestore,i,n._key,r._document,new lo(!1,!1),n.converter))}}function xS(t,e,n){t=Vn(t,Ar);const i=Object.assign(Object.assign({},JL),n);return function(s){if(s.maxAttempts<1)throw new J(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new wr;return s.asyncQueue.enqueueAndForget(async()=>{const c=await NL(s);new CL(s.asyncQueue,c,a,o,l).au()}),l.promise}(vd(t),r=>e(new eF(t,r)),i)}function dc(){return new ly("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){return vd(t=Vn(t,Ar)),new ZL(t,e=>Ed(t,e))}(function(e,n=!0){(function(r){qo=r})(Ho),oi(new Bn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Ar(new QM(i.getProvider("auth-internal")),new ZM(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),En(A0,"4.7.3",e),En(A0,"4.7.3","esm2017")})();const SS="@firebase/installations",Ey="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=1e4,CS=`w:${Ey}`,AS="FIS_v2",tF="https://firebaseinstallations.googleapis.com/v1",nF=60*60*1e3,iF="installations",rF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Is=new Rs(iF,rF,sF);function PS(t){return t instanceof Hn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS({projectId:t}){return`${tF}/projects/${t}/installations`}function NS(t){return{token:t.token,requestStatus:2,expiresIn:aF(t.expiresIn),creationTime:Date.now()}}async function DS(t,e){const i=(await e.json()).error;return Is.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function MS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function oF(t,{refreshToken:e}){const n=MS(t);return n.append("Authorization",lF(e)),n}async function OS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function aF(t){return Number(t.replace("s","000"))}function lF(t){return`${AS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cF({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=RS(t),r=MS(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:AS,appId:t.appId,sdkVersion:CS},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await OS(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:NS(c.authToken)}}else throw await DS("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=/^[cdef][\w-]{21}$/,fg="";function dF(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=fF(t);return hF.test(n)?n:fg}catch{return fg}}function fF(t){return uF(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new Map;function jS(t,e){const n=Td(t);VS(n,e),pF(n,e)}function VS(t,e){const n=FS.get(t);if(n)for(const i of n)i(e)}function pF(t,e){const n=gF();n&&n.postMessage({key:t,fid:e}),mF()}let as=null;function gF(){return!as&&"BroadcastChannel"in self&&(as=new BroadcastChannel("[Firebase] FID Change"),as.onmessage=t=>{VS(t.data.key,t.data.fid)}),as}function mF(){FS.size===0&&as&&(as.close(),as=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF="firebase-installations-database",_F=1,Ss="firebase-installations-store";let Pf=null;function Ty(){return Pf||(Pf=wx(yF,_F,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ss)}}})),Pf}async function kh(t,e){const n=Td(t),r=(await Ty()).transaction(Ss,"readwrite"),s=r.objectStore(Ss),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&jS(t,e.fid),e}async function US(t){const e=Td(t),i=(await Ty()).transaction(Ss,"readwrite");await i.objectStore(Ss).delete(e),await i.done}async function xd(t,e){const n=Td(t),r=(await Ty()).transaction(Ss,"readwrite"),s=r.objectStore(Ss),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&jS(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xy(t){let e;const n=await xd(t.appConfig,i=>{const r=vF(i),s=wF(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===fg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function vF(t){const e=t||{fid:dF(),registrationStatus:0};return BS(e)}function wF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Is.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=bF(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:EF(t)}:{installationEntry:e}}async function bF(t,e){try{const n=await cF(t,e);return kh(t.appConfig,n)}catch(n){throw PS(n)&&n.customData.serverCode===409?await US(t.appConfig):await kh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function EF(t){let e=await mw(t.appConfig);for(;e.registrationStatus===1;)await LS(100),e=await mw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await xy(t);return i||n}return e}function mw(t){return xd(t,e=>{if(!e)throw Is.create("installation-not-found");return BS(e)})}function BS(t){return TF(t)?{fid:t.fid,registrationStatus:0}:t}function TF(t){return t.registrationStatus===1&&t.registrationTime+kS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xF({appConfig:t,heartbeatServiceProvider:e},n){const i=IF(t,n),r=oF(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:CS,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await OS(()=>fetch(i,a));if(l.ok){const c=await l.json();return NS(c)}else throw await DS("Generate Auth Token",l)}function IF(t,{fid:e}){return`${RS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iy(t,e=!1){let n;const i=await xd(t.appConfig,s=>{if(!zS(s))throw Is.create("not-registered");const o=s.authToken;if(!e&&CF(o))return s;if(o.requestStatus===1)return n=SF(t,e),s;{if(!navigator.onLine)throw Is.create("app-offline");const a=PF(s);return n=kF(t,a),a}});return n?await n:i.authToken}async function SF(t,e){let n=await yw(t.appConfig);for(;n.authToken.requestStatus===1;)await LS(100),n=await yw(t.appConfig);const i=n.authToken;return i.requestStatus===0?Iy(t,e):i}function yw(t){return xd(t,e=>{if(!zS(e))throw Is.create("not-registered");const n=e.authToken;return RF(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function kF(t,e){try{const n=await xF(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await kh(t.appConfig,i),n}catch(n){if(PS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await US(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kh(t.appConfig,i)}throw n}}function zS(t){return t!==void 0&&t.registrationStatus===2}function CF(t){return t.requestStatus===2&&!AF(t)}function AF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+nF}function PF(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function RF(t){return t.requestStatus===1&&t.requestTime+kS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NF(t){const e=t,{installationEntry:n,registrationPromise:i}=await xy(e);return i?i.catch(console.error):Iy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t,e=!1){const n=t;return await MF(n),(await Iy(n,e)).token}async function MF(t){const{registrationPromise:e}=await xy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t){if(!t||!t.options)throw Rf("App Configuration");if(!t.name)throw Rf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Rf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Rf(t){return Is.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="installations",LF="installations-internal",FF=t=>{const e=t.getProvider("app").getImmediate(),n=OF(e),i=Xl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},jF=t=>{const e=t.getProvider("app").getImmediate(),n=Xl(e,$S).getImmediate();return{getId:()=>NF(n),getToken:r=>DF(n,r)}};function VF(){oi(new Bn($S,FF,"PUBLIC")),oi(new Bn(LF,jF,"PRIVATE"))}VF();En(SS,Ey);En(SS,Ey,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="analytics",UF="firebase_id",BF="origin",zF=60*1e3,$F="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=new sd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Tn=new Rs("analytics","Analytics",WF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t){if(!t.startsWith(Sy)){const e=Tn.create("invalid-gtag-resource",{gtagURL:t});return Zt.warn(e.message),""}return t}function WS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function qF(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function KF(t,e){const n=qF("firebase-js-sdk-policy",{createScriptURL:HF}),i=document.createElement("script"),r=`${Sy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function GF(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function QF(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await WS(n)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){Zt.error(a)}t("config",r,s)}async function YF(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await WS(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Zt.error(s)}}function XF(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await YF(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await QF(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Zt.error(a)}}return r}function JF(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=XF(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function ZF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Sy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=30,tj=1e3;class nj{constructor(e={},n=tj){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const HS=new nj;function ij(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function rj(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:ij(i)},s=$F.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Tn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function sj(t,e=HS,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw Tn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Tn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new lj;return setTimeout(async()=>{a.abort()},zF),qS({appId:i,apiKey:r,measurementId:s},o,a,e)}async function qS(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=HS){var s;const{appId:o,measurementId:a}=t;try{await oj(i,e)}catch(l){if(a)return Zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await rj(t);return r.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!aj(c)){if(r.deleteThrottleMetadata(o),a)return Zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?e0(n,r.intervalMillis,ej):e0(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Zt.debug(`Calling attemptFetch again in ${h} millis`),qS(t,d,i,r)}}function oj(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(Tn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function aj(t){if(!(t instanceof Hn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class lj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function cj(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(){if(mx())try{await yx()}catch(t){return Zt.warn(Tn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Zt.warn(Tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function hj(t,e,n,i,r,s,o){var a;const l=sj(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Zt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Zt.error(m)),e.push(l);const c=uj().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,c]);ZF(s)||KF(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[BF]="firebase",f.update=!0,d!=null&&(f[UF]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.app=e}_delete(){return delete il[this.app.options.appId],Promise.resolve()}}let il={},vw=[];const ww={};let Nf="dataLayer",fj="gtag",bw,KS,Ew=!1;function pj(){const t=[];if(gx()&&t.push("This is a browser extension environment."),lR()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Tn.create("invalid-analytics-context",{errorInfo:e});Zt.warn(n.message)}}function gj(t,e,n){pj();const i=t.options.appId;if(!i)throw Tn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Tn.create("no-api-key");if(il[i]!=null)throw Tn.create("already-exists",{id:i});if(!Ew){GF(Nf);const{wrappedGtag:s,gtagCore:o}=JF(il,vw,ww,Nf,fj);KS=s,bw=o,Ew=!0}return il[i]=hj(t,vw,ww,e,bw,Nf,n),new dj(t)}function mj(t,e,n,i){t=je(t),cj(KS,il[t.app.options.appId],e,n,i).catch(r=>Zt.error(r))}const Tw="@firebase/analytics",xw="0.10.8";function yj(){oi(new Bn(_w,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return gj(i,r,n)},"PUBLIC")),oi(new Bn("analytics-internal",t,"PRIVATE")),En(Tw,xw),En(Tw,xw,"esm2017");function t(e){try{const n=e.getProvider(_w).getImmediate();return{logEvent:(i,r,s)=>mj(n,i,r,s)}}catch(n){throw Tn.create("interop-component-reg-failed",{reason:n})}}}yj();const _j={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},GS=bx(_j),ba=$M(GS),en=OL(GS),QS=M.createContext(null);function vj({children:t}){const[e,n]=M.useState(null),[i,r]=M.useState(!0),[s,o]=M.useState(null);M.useEffect(()=>{const l=RD(ba,c=>{n(c),r(!1)});return()=>l()},[]);const a=M.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,c){o(null);try{return(await ID(ba,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,c){o(null);try{return(await SD(ba,l,c)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await ND(ba)},async resetPassword(l){o(null);try{await xD(ba,l)}catch(c){throw o((c==null?void 0:c.message)||"Failed to send reset email."),c}}}),[e,i,s]);return g.jsx(QS.Provider,{value:a,children:t})}function ui(){return M.useContext(QS)}function wj(){const{user:t,logout:e}=ui(),n=Wo();async function i(){await e(),n("/dashboard")}return g.jsx("div",{className:"nav",children:g.jsxs("div",{className:"nav-inner",children:[g.jsxs("div",{className:"brand",children:[g.jsx("div",{className:"badge"}),g.jsxs("div",{children:[g.jsx("h1",{children:"Body Recomposition Tracker"}),g.jsx("div",{className:"small",children:"Created by Andre Gomes"})]})]}),g.jsxs("div",{className:"nav-links",children:[g.jsxs("div",{className:"nav-tabs",children:[g.jsx(Wr,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),g.jsx(Wr,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&g.jsx(Wr,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&g.jsx(Wr,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"}),t&&g.jsx(Wr,{to:"/admin",className:({isActive:r})=>r?"active":"",children:"Admin"})]}),g.jsx("div",{className:"nav-actions",children:t?g.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):g.jsxs(g.Fragment,{children:[g.jsx(Wr,{to:"/login",className:"btn",children:"Log in"}),g.jsx(Wr,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function Df({children:t}){const{user:e,initializing:n}=ui();return n?g.jsx("div",{className:"panel",children:g.jsx("div",{className:"muted",children:"Loading"})}):e?t:g.jsx(Bp,{to:"/login",replace:!0})}const YS=M.createContext(null),Iw={email:"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],isAdmin:!1,accountType:"user",accountType:"user",createdAt:null};function bj(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function Ej(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:bj(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).sort((e,n)=>String(n.startDateIso||"").localeCompare(String(e.startDateIso||""))):[]}function Tj({children:t}){const{user:e}=ui(),[n,i]=M.useState(Iw),[r,s]=M.useState(!1),[o,a]=M.useState(null);M.useEffect(()=>{if(i(Iw),a(null),!e)return;const c=Cr(en,"users",e.uid);s(!0);const h=by(c,async d=>{if(!d.exists()){await TS(c,{email:e.email||"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],isAdmin:!1,accountType:"user",accountType:"user",createdAt:dc()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],cycles:Ej(f.cycles),createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=M.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(c){if(!e)throw new Error("Not authenticated");a(null);const h=Cr(en,"users",e.uid);await QL(h,c)}}),[n,r,o,e]);return g.jsx(YS.Provider,{value:l,children:t})}function Id(){return M.useContext(YS)}function Ch(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function ks(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function Ah(){return Ch(new Date)}function xj(t,e){const n=ks(t);return n.setDate(n.getDate()+Number(e)),Ch(n)}function Ij(t,e){return t.dateIso.localeCompare(e.dateIso)}function ky(t,e,n){const i=pS(en,"users",t,"entries");return by(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(Ij);e(o)},n)}async function Sj(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=Cr(en,"users",t,"entries",n),r=ks(n),s={...e,dateIso:n,date:e.date||r,updatedAt:dc()};await TS(i,s,{merge:!0})}async function kj(t,e){const n=IS(en);for(const i of e||[]){const r=i==null?void 0:i.dateIso,s=i==null?void 0:i.patch;if(!r||!s)continue;const o=Cr(en,"users",t,"entries",r);n.update(o,{...s,updatedAt:dc()})}await n.commit()}async function Cj(t,e){const n=Cr(en,"users",t,"entries",e);await YL(n)}const Aj=2/8;function XS({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function Zr(t,e){const n=Number(t),i=Number(e);if(!Number.isFinite(n)||n<=0||!Number.isFinite(i)||i<=0||i>=37)return null;const r=n*(36/(37-i));return Number.isFinite(r)?r:null}function Pj({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>r==null||r===""?NaN:Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function $s(t,e=Aj){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function Rj(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function Mf(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=Rj(i,r,s);return Number.isFinite(o)?o:null}function Nj({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=Mf(n,"neck",i),a=Mf(n,"waist",i),l=Mf(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const c=a-o;if(!(c>0))return null;const h=495/(1.0324-.19077*Math.log10(c)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const c=a+l-o;if(!(c>0))return null;const h=495/(1.29579-.35004*Math.log10(c)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function Dj({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function JS(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(v=>Hr(v.bench)),o=t.map(v=>Hr(v.squat)),a=t.map(v=>Hr(v.deadlift)),l=v=>{let x=null;return v.map(b=>Number.isFinite(b)?(x=b,b):x)},c=l(s),h=l(o),d=l(a),f=t.map((v,x)=>({dateIso:v.dateIso,weight:Hr(v.weight),protein:Hr(v.protein),carbs:Hr(v.carbs),fats:Hr(v.fats),bench:s[x],squat:o[x],deadlift:a[x],calories:XS(v),avgStrength:Pj({bench:c[x],squat:h[x],deadlift:d[x]}),bfPct:Nj({sex:i,heightCm:r,entry:v,tripleEnabled:n})}));f.forEach(v=>{v.lbm=Dj({weightKg:v.weight,bfPct:v.bfPct})});const m={weight:$s(f.map(v=>v.weight)),bench:$s(f.map(v=>v.bench)),squat:$s(f.map(v=>v.squat)),deadlift:$s(f.map(v=>v.deadlift)),calories:$s(f.map(v=>v.calories)),avgStrength:$s(f.map(v=>v.avgStrength))};return f.map((v,x)=>({...v,wma:{weight:m.weight[x],bench:m.bench[x],squat:m.squat[x],deadlift:m.deadlift[x],calories:m.calories[x],avgStrength:m.avgStrength[x]}}))}function Mj(t){var f,m,v,x;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=b=>b*7-1;function s(b){var T;for(let E=b;E>=0;E--){const S=(T=t[E])==null?void 0:T.lbm;if(Number.isFinite(S))return S}return null}for(let b=1;b<=i;b++){const T=(b-1)*7,E=r(b),S=t.slice(T,E+1),N=Ea(S.map(P=>P.calories)),D=Ea(S.map(P=>{var Y;return(Y=P==null?void 0:P.wma)==null?void 0:Y.avgStrength})),O=(m=(f=S[0])==null?void 0:f.wma)==null?void 0:m.weight,w=(x=(v=S[S.length-1])==null?void 0:v.wma)==null?void 0:x.weight,_=Number.isFinite(O)&&Number.isFinite(w)?w-O:null;let I=null;if(Number.isFinite(N)&&Number.isFinite(_)){const Y=-_*7700/7;I=N+Y}const C=s(E);let A=null,R="";Number.isFinite(C)&&Number.isFinite(_)&&(A=Math.max(0,-_)/C*100,A<.5?R="Conservative":A<=1?R="Optimal":R="Aggressive"),e.push({week:b,avgCalories:N,weightChange:_,tdee:I,avgStrengthWma:D,lbm:C,lossRatePct:A,lossRateStatus:R,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(b=>b.tdee).filter(Number.isFinite),a=o.length?Ea(o):null,l=e.slice(0,2).map(b=>b.avgStrengthWma).filter(Number.isFinite),c=l.length?Ea(l):null,h=e.slice(0,2).map(b=>Number.isFinite(b.weightChange)?Math.max(0,-b.weightChange):null).filter(Number.isFinite),d=h.length?Ea(h):null;if(Number.isFinite(a))for(const b of e)Number.isFinite(b.tdee)&&(b.tdeeChangeFromBaseline=b.tdee-a,b.adaptationPct=b.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:c,baselineWeeklyLoss:d}}function Hr(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function Ea(t){const e=(t||[]).map(n=>n==null||n===""?NaN:Number(n)).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}const Oj=[{id:"cutting_optimal",label:"Cutting (optimal)"},{id:"cutting_aggressive",label:"Cutting (aggressive / strength down)"},{id:"recomp_maintain",label:"Recomping (maintaining weight)"},{id:"bulking_lean",label:"Lean bulking"},{id:"bulking_dirty",label:"Dirty bulking"},{id:"spinning_wheels",label:"Spinning wheels (stall)"},{id:"skinny_fat",label:"Skinny-fat trajectory (bad cut)"},{id:"detraining",label:"Detraining (no stimulus)"},{id:"metabolic_crash",label:"Metabolic crash (slowdown)"}];function Lj(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return e>>>0}function Fj(t){let e=t>>>0;return function(){e|=0,e=e+1831565813|0;let i=Math.imul(e^e>>>15,1|e);return i=i+Math.imul(i^i>>>7,61|i)^i,((i^i>>>14)>>>0)/4294967296}}function Rn(t){let e=0,n=0;for(;e===0;)e=t();for(;n===0;)n=t();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*n)}function Kn(t,e,n){return Math.max(e,Math.min(n,t))}function jj(t,e,n){return t+(e-t)*n}function ns(t){return Math.round(t*10)/10}function Vj({heightCm:t,waistCm:e,neckCm:n}){const i=Number(t),r=Number(e),s=Number(n);if(![i,r,s].every(Number.isFinite))return null;const o=r-s;if(!(o>0))return null;const a=495/(1.0324-.19077*Math.log10(o)+.15456*Math.log10(i))-450;return Number.isFinite(a)?a:null}function Uj({targetBfPct:t,heightCm:e,neckCm:n}){let i=60,r=140,s=90;for(let o=0;o<40;o++){const a=(i+r)/2,l=Vj({heightCm:e,waistCm:a,neckCm:n});if(!Number.isFinite(l)){r=a;continue}s=a,l>t?r=a:i=a}return s}function Cy(t){const e={id:t,sex:"male",heightCm:175,neckCm:40,baselineDays:14,startWeightKg:90,startBfPct:24,startTdee:2550,start1rm:{bench:120,squat:170,deadlift:220}},n={cutting_optimal:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2050,proteinPerKg:()=>2,fatPerKg:()=>.75,strengthSlope:()=>.012,bfDeltaPerDay:()=>-.04,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},cutting_aggressive:{...e,cycleType:"cutting",targetWeightKg:83,plan:{calTarget:()=>1650,rampDays:14,proteinPerKg:()=>1.6,fatPerKg:()=>.6,strengthSlope:()=>-.04,bfDeltaPerDay:()=>-.06,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.95}},recomp_maintain:{...e,cycleType:"maintaining",targetWeightKg:null,plan:{calTarget:()=>2480,proteinPerKg:()=>2.1,fatPerKg:()=>.8,strengthSlope:()=>.02,bfDeltaPerDay:()=>-.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},bulking_lean:{...e,cycleType:"bulking",targetWeightKg:93,plan:{calTarget:()=>2900,proteinPerKg:()=>2,fatPerKg:()=>.9,strengthSlope:()=>.035,bfDeltaPerDay:()=>.005,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:1}},bulking_dirty:{...e,cycleType:"bulking",targetWeightKg:96,plan:{calTarget:()=>3350,proteinPerKg:()=>1.7,fatPerKg:()=>1.05,strengthSlope:()=>.03,bfDeltaPerDay:()=>.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.95}},spinning_wheels:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2450,proteinPerKg:()=>1.9,fatPerKg:()=>.85,strengthSlope:()=>0,bfDeltaPerDay:()=>0,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.9}},skinny_fat:{...e,cycleType:"cutting",targetWeightKg:85,plan:{calTarget:()=>2050,proteinPerKg:()=>1.3,fatPerKg:()=>.9,strengthSlope:()=>-.07,bfDeltaPerDay:()=>.03,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.55}},detraining:{...e,cycleType:"maintaining",targetWeightKg:null,plan:{calTarget:()=>2600,proteinPerKg:()=>1.6,fatPerKg:()=>.9,strengthSlope:()=>-.1,bfDeltaPerDay:()=>.02,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.25}},metabolic_crash:{...e,cycleType:"cutting",targetWeightKg:84,plan:{calTarget:i=>i>24&&i<35?2450:1750,proteinPerKg:()=>1.9,fatPerKg:()=>.7,strengthSlope:()=>-.05,bfDeltaPerDay:i=>i>24&&i<35?0:-.05,refeedEvery:0,refeedDeltaCal:0,trainingConsistency:.85,adaptationMultiplier:1.8}}};return n[t]||n.cutting_optimal}function Bj(t="cutting_optimal"){const e=Cy(t);return{email:"demo@example.com",sex:e.sex,height:e.heightCm,tripleMeasurements:!1,createdAt:new Date().toISOString(),isAdmin:!1,liftNames:["Bench","Squat","Deadlift"]}}function zj(t,e="cutting_optimal"){const n=Cy(e);if(!(t!=null&&t.length))return[];const i=Math.min(n.baselineDays,t.length),r=t[0].dateIso,s=t[Math.max(0,i-1)].dateIso,o=t[Math.min(t.length-1,i)].dateIso,a=t[Math.min(t.length-1,i)].weight,l=[];l.push({id:"demo-cycle-0",type:"maintaining",startDateIso:r,endDateIso:s,targetWeightKg:null});let c=n.targetWeightKg;return n.cycleType==="cutting"&&!Number.isFinite(c)&&(c=ns(a-4)),n.cycleType==="bulking"&&!Number.isFinite(c)&&(c=ns(a+3)),n.cycleType==="maintaining"&&(c=null),l.push({id:"demo-cycle-1",type:n.cycleType,startDateIso:o,endDateIso:null,targetWeightKg:c}),l}function $j(t=84,e="cutting_optimal"){var N;const n=Cy(e),i=Lj(`brt-demo:${e}:${t}`),r=Fj(i),s=Math.min(n.baselineDays,Math.max(14,Math.floor(t/2))),o=Math.max(0,t-s),a=new Date;a.setDate(a.getDate()-(t-1));const l=Ch(a);let c=n.startWeightKg,h=0,d=n.startBfPct;const f=n.startTdee;let m=0,v=0;const x={...n.start1rm};({...n.start1rm});const b=[["bench"],["squat"],[],["bench","deadlift"],["squat"],["deadlift"],[]];function T(D,O=1){const w=D%7,_=b[w];return _.length?r()>O?[]:_:[]}const E=[],S=new Map;(N=n.plan)!=null&&N.refeedEvery&&n.plan.refeedEvery>0&&S.set("phase",Math.floor(r()*n.plan.refeedEvery));for(let D=0;D<t;D++){const O=Ch(new Date(ks(l).getTime()+D*864e5)),w=D<s,_=w?0:D-s,I=n.plan,C=c+h;let A=w?f:I.calTarget(_);if(!w){const Q=Math.max(0,I.rampDays||7);if(Q>0&&_<Q){const Lt=Q===1?1:Kn(_/(Q-1),0,1);A=jj(f,A,Lt)}}const R=S.get("phase")||0,P=!w&&I.refeedEvery&&I.refeedEvery>0&&(_+R)%I.refeedEvery===0,Y=Math.round(Rn(r)*(w?15:60));let H=A+(P?I.refeedDeltaCal:0)+Y;w&&(H-=Kn(v/2,-240,240));const ue=w?1.9:I.proteinPerKg(_),re=w?.85:I.fatPerKg(_),B=Math.max(90,Math.round(C*ue+Rn(r)*8)),q=Math.max(40,Math.round(C*re+Rn(r)*5)),X=H-(B*4+q*9),V=Math.max(0,Math.round(X/4)),L=B*4+V*4+q*9,W=w?1:I.trainingConsistency,ee=T(D,W),ae=o?Kn(_/Math.max(1,o-1),0,1):0,xe=1+(w?.006:I.strengthSlope(_))*ae,Ye={bench:null,squat:null,deadlift:null};for(const Q of["bench","squat","deadlift"]){if(D===0){Ye[Q]=ns(x[Q]+Rn(r)*1.5);continue}if(!ee.includes(Q))continue;const Lt=x[Q]*xe,Cn=ns(Lt+Rn(r)*2);Ye[Q]=Cn}const pn=w?.0012:.0025,Be=f*(1+(w?0:m))*(1+Rn(r)*pn),et=L-Be;w&&(v=v*.55+et,v=Kn(v,-700,700)),c+=et/7700,c=Kn(c,55,140);const G=w?.5:.55,de=P?.35:0,Ke=!w&&V>=350?.14:0,st=!w&&V<120?-.12:0,tn=w?.02:.04,tt=w?-.35:-.9,kn=w?.35:1.6;if(h=h*G+de+Ke+st+Rn(r)*tn,h=Kn(h,tt,kn),w)m=0;else{const Q=Be-L,Lt=L-Be,Cn=I.adaptationMultiplier||1,Ve=Q>0?-.001*Cn*Kn(Q/500,0,2):0,ve=Lt>0?2e-4*Kn(Lt/400,0,1.5):0;m+=Ve+ve,m=Kn(m,-.22,.08)}w||(d+=I.bfDeltaPerDay(_)+Rn(r)*.03,d=Kn(d,7,45));const Wt=ns(c+h+Rn(r)*.07);let xt=null,nn=null,hi=null;{xt=ns(n.neckCm+Rn(r)*.25);const Q=Uj({targetBfPct:d,heightCm:n.heightCm,neckCm:xt});nn=ns(Q+Rn(r)*.6),hi=null}E.push({id:`demo-${e}-${D}`,dateIso:O,weight:Wt,protein:B,carbs:V,fats:q,bench:Ye.bench,squat:Ye.squat,deadlift:Ye.deadlift,neck:xt,waist:nn,hip:hi})}return E}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function fc(t){return t+.5|0}const or=(t,e,n)=>Math.max(Math.min(t,n),e);function Fa(t){return or(fc(t*2.55),0,255)}function Er(t){return or(fc(t*255),0,255)}function vi(t){return or(fc(t/2.55)/100,0,1)}function Sw(t){return or(fc(t*100),0,100)}const mn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pg=[..."0123456789ABCDEF"],Wj=t=>pg[t&15],Hj=t=>pg[(t&240)>>4]+pg[t&15],Jc=t=>(t&240)>>4===(t&15),qj=t=>Jc(t.r)&&Jc(t.g)&&Jc(t.b)&&Jc(t.a);function Kj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&mn[t[1]]*17,g:255&mn[t[2]]*17,b:255&mn[t[3]]*17,a:e===5?mn[t[4]]*17:255}:(e===7||e===9)&&(n={r:mn[t[1]]<<4|mn[t[2]],g:mn[t[3]]<<4|mn[t[4]],b:mn[t[5]]<<4|mn[t[6]],a:e===9?mn[t[7]]<<4|mn[t[8]]:255})),n}const Gj=(t,e)=>t<255?e(t):"";function Qj(t){var e=qj(t)?Wj:Hj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Gj(t.a,e):void 0}const Yj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ZS(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Xj(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function Jj(t,e,n){const i=ZS(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Zj(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Ay(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=Zj(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function Py(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Er)}function Ry(t,e,n){return Py(ZS,t,e,n)}function eV(t,e,n){return Py(Jj,t,e,n)}function tV(t,e,n){return Py(Xj,t,e,n)}function ek(t){return(t%360+360)%360}function nV(t){const e=Yj.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Fa(+e[5]):Er(+e[5]));const r=ek(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=eV(r,s,o):e[1]==="hsv"?i=tV(r,s,o):i=Ry(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function iV(t,e){var n=Ay(t);n[0]=ek(n[0]+e),n=Ry(n),t.r=n[0],t.g=n[1],t.b=n[2]}function rV(t){if(!t)return;const e=Ay(t),n=e[0],i=Sw(e[1]),r=Sw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${vi(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const kw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Cw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sV(){const t={},e=Object.keys(Cw),n=Object.keys(kw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,kw[s]);s=parseInt(Cw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Zc;function oV(t){Zc||(Zc=sV(),Zc.transparent=[0,0,0,0]);const e=Zc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const aV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lV(t){const e=aV.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Fa(o):or(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Fa(i):or(i,0,255)),r=255&(e[4]?Fa(r):or(r,0,255)),s=255&(e[6]?Fa(s):or(s,0,255)),{r:i,g:r,b:s,a:n}}}function cV(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${vi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Of=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ws=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function uV(t,e,n){const i=Ws(vi(t.r)),r=Ws(vi(t.g)),s=Ws(vi(t.b));return{r:Er(Of(i+n*(Ws(vi(e.r))-i))),g:Er(Of(r+n*(Ws(vi(e.g))-r))),b:Er(Of(s+n*(Ws(vi(e.b))-s))),a:t.a+n*(e.a-t.a)}}function eu(t,e,n){if(t){let i=Ay(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Ry(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function tk(t,e){return t&&Object.assign(e||{},t)}function Aw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Er(t[3]))):(e=tk(t,{r:0,g:0,b:0,a:1}),e.a=Er(e.a)),e}function hV(t){return t.charAt(0)==="r"?lV(t):nV(t)}class Ul{constructor(e){if(e instanceof Ul)return e;const n=typeof e;let i;n==="object"?i=Aw(e):n==="string"&&(i=Kj(e)||oV(e)||hV(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=tk(this._rgb);return e&&(e.a=vi(e.a)),e}set rgb(e){this._rgb=Aw(e)}rgbString(){return this._valid?cV(this._rgb):void 0}hexString(){return this._valid?Qj(this._rgb):void 0}hslString(){return this._valid?rV(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=uV(this._rgb,e._rgb,n)),this}clone(){return new Ul(this.rgb)}alpha(e){return this._rgb.a=Er(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=fc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return eu(this._rgb,2,e),this}darken(e){return eu(this._rgb,2,-e),this}saturate(e){return eu(this._rgb,1,e),this}desaturate(e){return eu(this._rgb,1,-e),this}rotate(e){return iV(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function pi(){}const dV=(()=>{let t=0;return()=>t++})();function De(t){return t==null}function vt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ke(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Sn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Gn(t,e){return Sn(t)?t:e}function be(t,e){return typeof t>"u"?e:t}const fV=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Le(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ce(t,e,n,i){let r,s,o;if(vt(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ke(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Ph(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Rh(t){if(vt(t))return t.map(Rh);if(ke(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Rh(t[n[r]]);return e}return t}function nk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function pV(t,e,n,i){if(!nk(t))return;const r=e[t],s=n[t];ke(r)&&ke(s)?Bl(r,s,i):e[t]=Rh(s)}function Bl(t,e,n){const i=vt(e)?e:[e],r=i.length;if(!ke(t))return t;n=n||{};const s=n.merger||pV;let o;for(let a=0;a<r;++a){if(o=i[a],!ke(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function rl(t,e){return Bl(t,e,{merger:gV})}function gV(t,e,n){if(!nk(t))return;const i=e[t],r=n[t];ke(i)&&ke(r)?rl(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Rh(r))}const Pw={"":t=>t,x:t=>t.x,y:t=>t.y};function mV(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function yV(t){const e=mV(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Nh(t,e){return(Pw[e]||(Pw[e]=yV(e)))(t)}function Ny(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Dh=t=>typeof t<"u",Pr=t=>typeof t=="function",Rw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function _V(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Dt=Math.PI,si=2*Dt,vV=si+Dt,Mh=Number.POSITIVE_INFINITY,wV=Dt/180,Ln=Dt/2,qr=Dt/4,Nw=Dt*2/3,ik=Math.log10,Lo=Math.sign;function sl(t,e,n){return Math.abs(t-e)<n}function Dw(t){const e=Math.round(t);t=sl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ik(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function bV(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function EV(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function zl(t){return!EV(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function TV(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function xV(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ls(t){return t*(Dt/180)}function IV(t){return t*(180/Dt)}function Mw(t){if(!Sn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function SV(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Dt&&(s+=si),{angle:s,distance:r}}function gg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function kV(t,e){return(t-e+vV)%si-Dt}function qi(t){return(t%si+si)%si}function rk(t,e,n,i){const r=qi(t),s=qi(e),o=qi(n),a=qi(s-r),l=qi(o-r),c=qi(r-s),h=qi(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function wn(t,e,n){return Math.max(e,Math.min(n,t))}function CV(t){return wn(t,-32768,32767)}function ja(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Dy(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const cs=(t,e,n,i)=>Dy(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),AV=(t,e,n)=>Dy(t,n,i=>t[i][e]>=n);function PV(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const sk=["push","pop","shift","splice","unshift"];function RV(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),sk.forEach(n=>{const i="_onData"+Ny(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Ow(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(sk.forEach(s=>{delete t[s]}),delete t._chartjs)}function NV(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ok=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function ak(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,ok.call(window,()=>{i=!1,t.apply(e,n)}))}}function DV(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const lk=t=>t==="start"?"left":t==="end"?"right":"center",sn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,MV=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function OV(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(r=Math.min(cs(l,h,d).lo,n?i:cs(e,h,o.getPixelForValue(d)).lo),c){const x=l.slice(0,r+1).reverse().findIndex(b=>!De(b[a.axis]));r-=Math.max(0,x)}r=wn(r,0,i-1)}if(v){let x=Math.max(cs(l,o.axis,f,!0).hi+1,n?0:cs(e,h,o.getPixelForValue(f),!0).hi+1);if(c){const b=l.slice(x-1).findIndex(T=>!De(T[a.axis]));x+=Math.max(0,b)}s=wn(x,r,i)-r}else s=i-r}return{start:r,count:s}}function LV(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const tu=t=>t===0||t===1,Lw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*si/n)),Fw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*si/n)+1,ol={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ln)+1,easeOutSine:t=>Math.sin(t*Ln),easeInOutSine:t=>-.5*(Math.cos(Dt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>tu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>tu(t)?t:Lw(t,.075,.3),easeOutElastic:t=>tu(t)?t:Fw(t,.075,.3),easeInOutElastic(t){return tu(t)?t:t<.5?.5*Lw(t*2,.1125,.45):.5+.5*Fw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ol.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ol.easeInBounce(t*2)*.5:ol.easeOutBounce(t*2-1)*.5+.5};function My(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function jw(t){return My(t)?t:new Ul(t)}function Lf(t){return My(t)?t:new Ul(t).saturate(.5).darken(.1).hexString()}const FV=["x","y","borderWidth","radius","tension"],jV=["color","borderColor","backgroundColor"];function VV(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:jV},numbers:{type:"number",properties:FV}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function UV(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Vw=new Map;function BV(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Vw.get(n);return i||(i=new Intl.NumberFormat(t,e),Vw.set(n,i)),i}function ck(t,e,n){return BV(e,n).format(t)}const zV={values(t){return vt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=$V(t,n)}const o=ik(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ck(t,i,l)}};function $V(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var uk={formatters:zV};function WV(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Cs=Object.create(null),mg=Object.create(null);function al(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Ff(t,e,n){return typeof e=="string"?Bl(al(t,e),n):Bl(al(t,""),e)}class HV{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Lf(r.backgroundColor),this.hoverBorderColor=(i,r)=>Lf(r.borderColor),this.hoverColor=(i,r)=>Lf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Ff(this,e,n)}get(e){return al(this,e)}describe(e,n){return Ff(mg,e,n)}override(e,n){return Ff(Cs,e,n)}route(e,n,i,r){const s=al(this,e),o=al(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ke(l)?Object.assign({},c,l):be(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ze=new HV({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[VV,UV,WV]);function qV(t){return!t||De(t.size)||De(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Uw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Kr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Bw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function yg(t,e,n,i){hk(t,e,n,i,null)}function hk(t,e,n,i,r){let s,o,a,l,c,h,d,f;const m=e.pointStyle,v=e.rotation,x=e.radius;let b=(v||0)*wV;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(b),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,x,0,0,si):t.arc(n,i,x,0,si),t.closePath();break;case"triangle":h=r?r/2:x,t.moveTo(n+Math.sin(b)*h,i-Math.cos(b)*x),b+=Nw,t.lineTo(n+Math.sin(b)*h,i-Math.cos(b)*x),b+=Nw,t.lineTo(n+Math.sin(b)*h,i-Math.cos(b)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(b+qr)*l,d=Math.cos(b+qr)*(r?r/2-c:l),a=Math.sin(b+qr)*l,f=Math.sin(b+qr)*(r?r/2-c:l),t.arc(n-d,i-a,c,b-Dt,b-Ln),t.arc(n+f,i-o,c,b-Ln,b),t.arc(n+d,i+a,c,b,b+Ln),t.arc(n-f,i+o,c,b+Ln,b+Dt),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*x,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}b+=qr;case"rectRot":d=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,a=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":b+=qr;case"cross":d=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,a=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,a=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),b+=qr,d=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,a=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(b)*x,a=Math.sin(b)*x,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(b)*(r?r/2:x),i+Math.sin(b)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function $l(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Oy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ly(t){t.restore()}function KV(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function GV(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function QV(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),De(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function YV(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function XV(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Oh(t,e,n,i,r,s={}){const o=vt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,QV(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&XV(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),De(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),YV(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function _g(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Dt,Dt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Dt,Ln,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ln,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Ln,!0),t.lineTo(n+o.topLeft,i)}const JV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ZV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function e4(t,e){const n=(""+t).match(JV);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const t4=t=>+t||0;function dk(t,e){const n={},i=ke(e),r=i?Object.keys(e):e,s=ke(t)?i?o=>be(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=t4(s(o));return n}function n4(t){return dk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ll(t){return dk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Wn(t){const e=n4(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Qt(t,e){t=t||{},e=e||Ze.font;let n=be(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=be(t.style,e.style);i&&!(""+i).match(ZV)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:be(t.family,e.family),lineHeight:e4(be(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:be(t.weight,e.weight),string:""};return r.string=qV(r),r}function nu(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function i4(t,e,n){const{min:i,max:r}=t,s=fV(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Ls(t,e){return Object.assign(Object.create(t),e)}function Fy(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=mk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Fy([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return pk(a,l,()=>h4(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return $w(a).includes(l)},ownKeys(a){return $w(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Fo(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:fk(t,i),setContext:s=>Fo(t,s,n,i),override:s=>Fo(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return pk(s,o,()=>s4(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function fk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Pr(n)?n:()=>n,isIndexable:Pr(i)?i:()=>i}}const r4=(t,e)=>t?t+Ny(e):e,jy=(t,e)=>ke(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function s4(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Pr(a)&&o.isScriptable(e)&&(a=o4(e,a,t,n)),vt(a)&&a.length&&(a=a4(e,a,t,o.isIndexable)),jy(e,a)&&(a=Fo(a,r,s&&s[e],o)),a}function o4(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),jy(t,l)&&(l=Vy(r._scopes,r,t,l)),l}function a4(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ke(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Vy(c,r,t,h);e.push(Fo(d,s,o&&o[t],a))}}return e}function gk(t,e,n){return Pr(t)?t(e,n):t}const l4=(t,e)=>t===!0?e:typeof t=="string"?Nh(e,t):void 0;function c4(t,e,n,i,r){for(const s of e){const o=l4(n,s);if(o){t.add(o);const a=gk(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Vy(t,e,n,i){const r=e._rootScopes,s=gk(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=zw(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=zw(a,o,s,l,i),l===null)?!1:Fy(Array.from(a),[""],r,s,()=>u4(e,n,i))}function zw(t,e,n,i,r){for(;n;)n=c4(t,e,n,i,r);return n}function u4(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return vt(r)&&ke(n)?n:r||{}}function h4(t,e,n,i){let r;for(const s of e)if(r=mk(r4(s,t),n),typeof r<"u")return jy(t,r)?Vy(n,i,t,r):r}function mk(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function $w(t){let e=t._keys;return e||(e=t._keys=d4(t._scopes)),e}function d4(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const f4=Number.EPSILON||1e-14,jo=(t,e)=>e<t.length&&!t[e].skip&&t[e],yk=t=>t==="x"?"y":"x";function p4(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=gg(s,r),l=gg(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function g4(t,e,n){const i=t.length;let r,s,o,a,l,c=jo(t,0);for(let h=0;h<i-1;++h)if(l=c,c=jo(t,h+1),!(!l||!c)){if(sl(e[h],0,f4)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function m4(t,e,n="x"){const i=yk(n),r=t.length;let s,o,a,l=jo(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=jo(t,c+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[c])}}function y4(t,e="x"){const n=yk(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=jo(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=jo(t,o+1),!!l){if(c){const h=c[e]-l[e];r[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Lo(r[o-1])!==Lo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}g4(t,r,s),m4(t,s,e)}function iu(t,e,n){return Math.max(Math.min(t,n),e)}function _4(t,e){let n,i,r,s,o,a=$l(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&$l(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=iu(r.cp1x,e.left,e.right),r.cp1y=iu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=iu(r.cp2x,e.left,e.right),r.cp2y=iu(r.cp2y,e.top,e.bottom)))}function v4(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")y4(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=p4(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&_4(t,n)}function Uy(){return typeof window<"u"&&typeof document<"u"}function By(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Sd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function w4(t,e){return Sd(t).getPropertyValue(e)}const b4=["top","right","bottom","left"];function fs(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=b4[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const E4=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function T4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(E4(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function es(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Sd(n),s=r.boxSizing==="border-box",o=fs(r,"padding"),a=fs(r,"border","width"),{x:l,y:c,box:h}=T4(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:v}=e;return s&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-f)/v*n.height/i)}}function x4(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&By(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Sd(s),l=fs(a,"border","width"),c=fs(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Lh(a.maxWidth,s,"clientWidth"),r=Lh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Mh,maxHeight:r||Mh}}const ar=t=>Math.round(t*10)/10;function I4(t,e,n,i){const r=Sd(t),s=fs(r,"margin"),o=Lh(r.maxWidth,t,"clientWidth")||Mh,a=Lh(r.maxHeight,t,"clientHeight")||Mh,l=x4(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const f=fs(r,"border","width"),m=fs(r,"padding");c-=m.width+f.width,h-=m.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=ar(Math.min(c,o,l.maxWidth)),h=ar(Math.min(h,a,l.maxHeight)),c&&!h&&(h=ar(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=ar(Math.floor(h*i))),{width:c,height:h}}function Ww(t,e,n){const i=e||1,r=ar(t.height*i),s=ar(t.width*i);t.height=ar(t.height),t.width=ar(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const S4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Uy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Hw(t,e){const n=w4(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ts(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function k4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function C4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=ts(t,r,n),a=ts(r,s,n),l=ts(s,e,n),c=ts(o,a,n),h=ts(a,l,n);return ts(c,h,n)}const A4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},P4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function wo(t,e,n){return t?A4(e,n):P4()}function _k(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function vk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wk(t){return t==="angle"?{between:rk,compare:kV,normalize:qi}:{between:ja,compare:(e,n)=>e-n,normalize:e=>e}}function qw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function R4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=wk(i),l=e.length;let{start:c,end:h,loop:d}=t,f,m;if(d){for(c+=l,h+=l,f=0,m=l;f<m&&o(a(e[c%l][i]),r,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function N4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=wk(i),{start:h,end:d,loop:f,style:m}=R4(t,e,n),v=[];let x=!1,b=null,T,E,S;const N=()=>l(r,S,T)&&a(r,S)!==0,D=()=>a(s,T)===0||l(s,S,T),O=()=>x||N(),w=()=>!x||D();for(let _=h,I=h;_<=d;++_)E=e[_%o],!E.skip&&(T=c(E[i]),T!==S&&(x=l(T,r,s),b===null&&O()&&(b=a(T,r)===0?_:I),b!==null&&w()&&(v.push(qw({start:b,end:_,loop:f,count:o,style:m})),b=null),I=_,S=T));return b!==null&&v.push(qw({start:b,end:d,loop:f,count:o,style:m})),v}function D4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=N4(i[r],t.points,e);s.length&&n.push(...s)}return n}function M4(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function O4(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function L4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=M4(n,r,s,i);if(i===!0)return Kw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return Kw(t,O4(n,o,l,c),n,e)}function Kw(t,e,n,i){return!i||!i.setContext||!n?e:F4(t,e,n,i)}function F4(t,e,n,i){const r=t._chart.getContext(),s=Gw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function m(v,x,b,T){const E=a?-1:1;if(v!==x){for(v+=l;n[v%l].skip;)v-=E;for(;n[x%l].skip;)x+=E;v%l!==x%l&&(c.push({start:v%l,end:x%l,loop:b,style:T}),h=T,d=x%l)}}for(const v of e){d=a?d:v.start;let x=n[d%l],b;for(f=d+1;f<=v.end;f++){const T=n[f%l];b=Gw(i.setContext(Ls(r,{type:"segment",p0:x,p1:T,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),j4(b,h)&&m(d,f-1,v.loop,h),x=T,h=b}d<f-1&&m(d,f-1,v.loop,h)}return c}function Gw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function j4(t,e){if(!e)return!1;const n=[],i=function(r,s){return My(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function ru(t,e,n){return t.options.clip?t[n]:e[n]}function V4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:ru(n,e,"left"),right:ru(n,e,"right"),top:ru(i,e,"top"),bottom:ru(i,e,"bottom")}:e}function U4(t,e){const n=e._clip;if(n.disabled)return!1;const i=V4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class B4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ok.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gi=new B4;const Qw="transparent",z4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=jw(t||Qw),r=i.valid&&jw(e||Qw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class $4{constructor(e,n,i,r){const s=n[i];r=nu([e.to,r,s,e.from]);const o=nu([e.from,s,r]);this._active=!0,this._fn=e.fn||z4[e.type||typeof o],this._easing=ol[e.easing]||ol.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=nu([e.to,n,r,e.from]),this._from=nu([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class bk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ke(e))return;const n=Object.keys(Ze.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ke(s))return;const o={};for(const a of n)o[a]=s[a];(vt(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=H4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&W4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new $4(f,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return gi.add(this._chart,i),!0}}function W4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function H4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Yw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function q4(t,e,n){if(n===!1)return!1;const i=Yw(t,n),r=Yw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function K4(t){let e,n,i,r;return ke(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function Ek(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Xw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],Sn(c)&&(s||e===0||Lo(e)===Lo(c))&&(e+=c)}return!h&&!i.all?0:e}function G4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function jf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Q4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Y4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function X4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Jw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Zw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=Q4(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const v=e[m],{[l]:x,[c]:b}=v,T=v._stacks||(v._stacks={});f=T[c]=X4(r,h,x),f[a]=b,f._top=Jw(f,o,!0,i.type),f._bottom=Jw(f,o,!1,i.type);const E=f._visualValues||(f._visualValues={});E[a]=b}}function Vf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function J4(t,e){return Ls(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Z4(t,e,n){return Ls(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ta(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Uf=t=>t==="reset"||t==="none",eb=(t,e)=>e?t:Object.assign({},t),eU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ek(n,!0),values:null};class cl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=jf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ta(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,v)=>d==="x"?f:d==="r"?v:m,s=n.xAxisID=be(i.xAxisID,Vf(e,"x")),o=n.yAxisID=be(i.yAxisID,Vf(e,"y")),a=n.rAxisID=be(i.rAxisID,Vf(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ow(this._data,this),e._stacked&&Ta(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ke(n)){const r=this._cachedMeta;this._data=G4(n,r)}else if(i!==n){if(i){Ow(i,this);const r=this._cachedMeta;Ta(r),r._parsed=[]}n&&Object.isExtensible(n)&&RV(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=jf(n.vScale,n),n.stack!==i.stack&&(r=!0,Ta(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(Zw(this,n._parsed),n._stacked=jf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{vt(r[e])?f=this.parseArrayData(i,r,e,n):ke(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&Zw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let f,m,v;for(f=0,m=r;f<m;++f)v=f+i,d[f]={[a]:h||s.parse(c[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],c[h]={x:s.parse(Nh(m,a),f),y:o.parse(Nh(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:Ek(r,!0),values:n._stacks[e.axis]._visualValues};return Xw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=Xw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=eU(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=Y4(a);let f,m;function v(){m=r[f];const x=m[a.axis];return!Sn(m[e.axis])||h>x||d<x}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Sn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=K4(be(this.options.clip,q4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Z4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=J4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Dh(i);if(a)return eb(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Ze.elements[e]),v=()=>this.getContext(i,r,n),x=c.resolveNamedOptions(f,m,v,d);return x.$shared&&(x.$shared=l,s[o]=Object.freeze(eb(x,l))),x}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const c=new bk(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Uf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Uf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Uf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Ta(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}fe(cl,"defaults",{}),fe(cl,"datasetElementType",null),fe(cl,"dataElementType",null);class Du extends cl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=OV(n,r,o);this._drawStart=a,this._drawCount=l,LV(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,m=a.axis,{spanGaps:v,segment:x}=this.options,b=zl(v)?v:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||r==="none",E=n+i,S=e.length;let N=n>0&&this.getParsed(n-1);for(let D=0;D<S;++D){const O=e[D],w=T?O:{};if(D<n||D>=E){w.skip=!0;continue}const _=this.getParsed(D),I=De(_[m]),C=w[f]=o.getPixelForValue(_[f],D),A=w[m]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],D);w.skip=isNaN(C)||isNaN(A)||I,w.stop=D>0&&Math.abs(_[f]-N[f])>b,x&&(w.parsed=_,w.raw=c.data[D]),d&&(w.options=h||this.resolveDataElementOptions(D,O.active?"active":r)),T||this.updateElement(O,D,w,r),N=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}fe(Du,"id","line"),fe(Du,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),fe(Du,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Gr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zy{constructor(e){fe(this,"options");this.options=e||{}}static override(e){Object.assign(zy.prototype,e)}init(){}formats(){return Gr()}parse(){return Gr()}format(){return Gr()}add(){return Gr()}diff(){return Gr()}startOf(){return Gr()}endOf(){return Gr()}}var tU={_date:zy};function nU(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?AV:cs;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(s,e,n-d),m=c(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(x=>!De(x[d.axis]));h.lo-=Math.max(0,m);const v=f.slice(h.hi).findIndex(x=>!De(x[d.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:s.length-1}}function kd(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=nU(s[a],e,o,r);for(let m=d;m<=f;++m){const v=h[m];v.skip||i(v,c,m)}}}function iU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Bf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||kd(t,n,e,function(a,l,c){!r&&!$l(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function rU(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=SV(o,{x:e.x,y:e.y});rk(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return kd(t,n,e,s),r}function sU(t,e,n,i,r,s){let o=[];const a=iU(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const v=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(v))&&!m)return;const b=a(e,v);b<l?(o=[{element:h,datasetIndex:d,index:f}],l=b):b===l&&o.push({element:h,datasetIndex:d,index:f})}return kd(t,n,e,c),o}function zf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?rU(t,e,n,r):sU(t,e,n,i,r,s)}function tb(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return kd(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var oU={modes:{index(t,e,n,i){const r=es(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Bf(t,r,s,i,o):zf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Bf(t,r,s,i,o):zf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Bf(t,r,s,i,o)},nearest(t,e,n,i){const r=es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return zf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=es(e,t);return tb(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=es(e,t);return tb(t,r,"y",n.intersect,i)}}};const Tk=["left","top","right","bottom"];function xa(t,e){return t.filter(n=>n.pos===e)}function nb(t,e){return t.filter(n=>Tk.indexOf(n.pos)===-1&&n.box.axis===e)}function Ia(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function aU(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function lU(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!Tk.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function cU(t,e){const n=lU(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function uU(t){const e=aU(t),n=Ia(e.filter(c=>c.box.fullSize),!0),i=Ia(xa(e,"left"),!0),r=Ia(xa(e,"right")),s=Ia(xa(e,"top"),!0),o=Ia(xa(e,"bottom")),a=nb(e,"x"),l=nb(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:xa(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function ib(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function xk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function hU(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ke(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&xk(o,s.getPadding());const a=Math.max(0,e.outerWidth-ib(o,t,"left","right")),l=Math.max(0,e.outerHeight-ib(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function dU(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function fU(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Va(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,fU(a.horizontal,e));const{same:d,other:f}=hU(e,n,a,i);c|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return c&&Va(r,e,n,i)||h}function su(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function rb(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;Dh(c.start)&&(o=c.start),l.fullSize?su(l,r.left,o,n.outerWidth-r.right-r.left,f):su(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;Dh(c.start)&&(s=c.start),l.fullSize?su(l,s,r.top,f,n.outerHeight-r.bottom-r.top):su(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var lr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Wn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=uU(t.boxes),l=a.vertical,c=a.horizontal;Ce(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,b)=>b.box.options&&b.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);xk(f,Wn(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),v=cU(l.concat(c),d);Va(a.fullSize,m,d,v),Va(l,m,d,v),Va(c,m,d,v)&&Va(l,m,d,v),dU(m),rb(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,rb(a.rightAndBottom,m,d,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ce(a.chartArea,x=>{const b=x.box;Object.assign(b,t.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Ik{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class pU extends Ik{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Mu="$chartjs",gU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sb=t=>t===null||t==="";function mU(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Mu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",sb(r)){const s=Hw(t,"width");s!==void 0&&(t.width=s)}if(sb(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Hw(t,"height");s!==void 0&&(t.height=s)}return t}const Sk=S4?{passive:!0}:!1;function yU(t,e,n){t&&t.addEventListener(e,n,Sk)}function _U(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Sk)}function vU(t,e){const n=gU[t.type]||t.type,{x:i,y:r}=es(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Fh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function wU(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Fh(a.addedNodes,i),o=o&&!Fh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function bU(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Fh(a.removedNodes,i),o=o&&!Fh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Wl=new Map;let ob=0;function kk(){const t=window.devicePixelRatio;t!==ob&&(ob=t,Wl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function EU(t,e){Wl.size||window.addEventListener("resize",kk),Wl.set(t,e)}function TU(t){Wl.delete(t),Wl.size||window.removeEventListener("resize",kk)}function xU(t,e,n){const i=t.canvas,r=i&&By(i);if(!r)return;const s=ak((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),EU(t,s),o}function $f(t,e,n){n&&n.disconnect(),e==="resize"&&TU(t)}function IU(t,e,n){const i=t.canvas,r=ak(s=>{t.ctx!==null&&n(vU(s,t))},t);return yU(i,e,r),r}class SU extends Ik{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(mU(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Mu])return!1;const i=n[Mu].initial;["height","width"].forEach(s=>{const o=i[s];De(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Mu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:wU,detach:bU,resize:xU}[n]||IU;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:$f,detach:$f,resize:$f}[n]||_U)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return I4(e,n,i,r)}isAttached(e){const n=e&&By(e);return!!(n&&n.isConnected)}}function kU(t){return!Uy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?pU:SU}class Rr{constructor(){fe(this,"x");fe(this,"y");fe(this,"active",!1);fe(this,"options");fe(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return zl(this.x)&&zl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}fe(Rr,"defaults",{}),fe(Rr,"defaultRoutes");function CU(t,e){const n=t.options.ticks,i=AU(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?RU(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return NU(e,c,s,o/r),c;const h=PU(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(ou(e,c,h,De(m)?0:a-m,a),d=0,f=o-1;d<f;d++)ou(e,c,h,s[d],s[d+1]);return ou(e,c,h,l,De(m)?e.length:l+m),c}return ou(e,c,h),c}function AU(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function PU(t,e,n){const i=DU(t),r=e.length/n;if(!i)return Math.max(r,1);const s=bV(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function RU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function NU(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function ou(t,e,n,i,r){const s=be(i,0),o=Math.min(be(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function DU(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const MU=t=>t==="left"?"right":t==="right"?"left":t,ab=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,lb=(t,e)=>Math.min(e||t,t);function cb(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function OU(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function LU(t,e){Ce(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Sa(t){return t.drawTicks?t.tickLength:0}function ub(t,e){if(!t.display)return 0;const n=Qt(t.font,e),i=Wn(t.padding);return(vt(t.text)?t.text.length:1)*n.lineHeight+i.height}function FU(t,e){return Ls(t,{scale:e,type:"scale"})}function jU(t,e,n){return Ls(t,{tick:n,index:e,type:"tick"})}function VU(t,e,n){let i=lk(t);return(n&&e!=="right"||!n&&e==="right")&&(i=MU(i)),i}function UU(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,m,v;const x=o-r,b=a-s;if(t.isHorizontal()){if(m=sn(i,s,a),ke(n)){const T=Object.keys(n)[0],E=n[T];v=h[T].getPixelForValue(E)+x-e}else n==="center"?v=(c.bottom+c.top)/2+x-e:v=ab(t,n,e);f=a-s}else{if(ke(n)){const T=Object.keys(n)[0],E=n[T];m=h[T].getPixelForValue(E)-b+e}else n==="center"?m=(c.left+c.right)/2-b+e:m=ab(t,n,e);v=sn(i,o,r),d=n==="left"?-Ln:Ln}return{titleX:m,titleY:v,maxWidth:f,rotation:d}}class Xo extends Rr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Gn(e,Number.POSITIVE_INFINITY),n=Gn(n,Number.NEGATIVE_INFINITY),i=Gn(i,Number.POSITIVE_INFINITY),r=Gn(r,Number.NEGATIVE_INFINITY),{min:Gn(e,i),max:Gn(n,r),minDefined:Sn(e),maxDefined:Sn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Gn(n,Gn(i,n)),max:Gn(i,Gn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Le(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=i4(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?cb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=CU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Le(this.options.afterUpdate,[this])}beforeSetDimensions(){Le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Le(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Le(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Le(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=lb(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=wn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-Sa(e.grid)-n.padding-ub(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=IV(Math.min(Math.asin(wn((h.highest.height+6)/a,-1,1)),Math.asin(wn(l/c,-1,1))-Math.asin(wn(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Le(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=ub(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Sa(s)+l):(e.height=this.maxHeight,e.width=Sa(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,v=ls(this.labelRotation),x=Math.cos(v),b=Math.sin(v);if(a){const T=i.mirror?0:b*d.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+T+m)}else{const T=i.mirror?0:x*d.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+T+m)}this._calculatePadding(c,h,b,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Le(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)De(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=cb(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/lb(n,i));let c=0,h=0,d,f,m,v,x,b,T,E,S,N,D;for(d=0;d<n;d+=l){if(v=e[d].label,x=this._resolveTickFontOptions(d),r.font=b=x.string,T=s[b]=s[b]||{data:{},gc:[]},E=x.lineHeight,S=N=0,!De(v)&&!vt(v))S=Uw(r,T.data,T.gc,S,v),N=E;else if(vt(v))for(f=0,m=v.length;f<m;++f)D=v[f],!De(D)&&!vt(D)&&(S=Uw(r,T.data,T.gc,S,D),N+=E);o.push(S),a.push(N),c=Math.max(S,c),h=Math.max(N,h)}LU(s,n);const O=o.indexOf(c),w=a.indexOf(h),_=I=>({width:o[I]||0,height:a[I]||0});return{first:_(0),last:_(n-1),widest:_(O),highest:_(w),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return CV(this._alignToPixels?Kr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=jU(this.getContext(),e,i))}return this.$context||(this.$context=FU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ls(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Sa(s),m=[],v=a.setContext(this.getContext()),x=v.display?v.width:0,b=x/2,T=function(ue){return Kr(i,ue,x)};let E,S,N,D,O,w,_,I,C,A,R,P;if(o==="top")E=T(this.bottom),w=this.bottom-f,I=E-b,A=T(e.top)+b,P=e.bottom;else if(o==="bottom")E=T(this.top),A=e.top,P=T(e.bottom)-b,w=E+b,I=this.top+f;else if(o==="left")E=T(this.right),O=this.right-f,_=E-b,C=T(e.left)+b,R=e.right;else if(o==="right")E=T(this.left),C=e.left,R=T(e.right)-b,O=E+b,_=this.left+f;else if(n==="x"){if(o==="center")E=T((e.top+e.bottom)/2+.5);else if(ke(o)){const ue=Object.keys(o)[0],re=o[ue];E=T(this.chart.scales[ue].getPixelForValue(re))}A=e.top,P=e.bottom,w=E+b,I=w+f}else if(n==="y"){if(o==="center")E=T((e.left+e.right)/2);else if(ke(o)){const ue=Object.keys(o)[0],re=o[ue];E=T(this.chart.scales[ue].getPixelForValue(re))}O=E-b,_=O-f,C=e.left,R=e.right}const Y=be(r.ticks.maxTicksLimit,d),H=Math.max(1,Math.ceil(d/Y));for(S=0;S<d;S+=H){const ue=this.getContext(S),re=s.setContext(ue),B=a.setContext(ue),q=re.lineWidth,X=re.color,V=B.dash||[],L=B.dashOffset,W=re.tickWidth,ee=re.tickColor,ae=re.tickBorderDash||[],ne=re.tickBorderDashOffset;N=OU(this,S,l),N!==void 0&&(D=Kr(i,N,q),c?O=_=C=R=D:w=I=A=P=D,m.push({tx1:O,ty1:w,tx2:_,ty2:I,x1:C,y1:A,x2:R,y2:P,width:q,color:X,borderDash:V,borderDashOffset:L,tickWidth:W,tickColor:ee,tickBorderDash:ae,tickBorderDashOffset:ne}))}return this._ticksLength=d,this._borderValue=E,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=Sa(i.grid),m=f+h,v=d?-h:m,x=-ls(this.labelRotation),b=[];let T,E,S,N,D,O,w,_,I,C,A,R,P="middle";if(r==="top")O=this.bottom-v,w=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+v,w=this._getXAxisLabelAlignment();else if(r==="left"){const H=this._getYAxisLabelAlignment(f);w=H.textAlign,D=H.x}else if(r==="right"){const H=this._getYAxisLabelAlignment(f);w=H.textAlign,D=H.x}else if(n==="x"){if(r==="center")O=(e.top+e.bottom)/2+m;else if(ke(r)){const H=Object.keys(r)[0],ue=r[H];O=this.chart.scales[H].getPixelForValue(ue)+m}w=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")D=(e.left+e.right)/2-m;else if(ke(r)){const H=Object.keys(r)[0],ue=r[H];D=this.chart.scales[H].getPixelForValue(ue)}w=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const Y=this._getLabelSizes();for(T=0,E=a.length;T<E;++T){S=a[T],N=S.label;const H=s.setContext(this.getContext(T));_=this.getPixelForTick(T)+s.labelOffset,I=this._resolveTickFontOptions(T),C=I.lineHeight,A=vt(N)?N.length:1;const ue=A/2,re=H.color,B=H.textStrokeColor,q=H.textStrokeWidth;let X=w;o?(D=_,w==="inner"&&(T===E-1?X=this.options.reverse?"left":"right":T===0?X=this.options.reverse?"right":"left":X="center"),r==="top"?c==="near"||x!==0?R=-A*C+C/2:c==="center"?R=-Y.highest.height/2-ue*C+C:R=-Y.highest.height+C/2:c==="near"||x!==0?R=C/2:c==="center"?R=Y.highest.height/2-ue*C:R=Y.highest.height-A*C,d&&(R*=-1),x!==0&&!H.showLabelBackdrop&&(D+=C/2*Math.sin(x))):(O=_,R=(1-A)*C/2);let V;if(H.showLabelBackdrop){const L=Wn(H.backdropPadding),W=Y.heights[T],ee=Y.widths[T];let ae=R-L.top,ne=0-L.left;switch(P){case"middle":ae-=W/2;break;case"bottom":ae-=W;break}switch(w){case"center":ne-=ee/2;break;case"right":ne-=ee;break;case"inner":T===E-1?ne-=ee:T>0&&(ne-=ee/2);break}V={left:ne,top:ae,width:ee+L.width,height:W+L.height,color:H.backdropColor}}b.push({label:N,font:I,textOffset:R,options:{rotation:x,color:re,strokeColor:B,strokeWidth:q,textAlign:X,textBaseline:P,translation:[D,O],backdrop:V}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ls(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Kr(e,this.left,o)-o/2,h=Kr(e,this.right,a)+a/2,d=f=l):(d=Kr(e,this.top,o)-o/2,f=Kr(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Oy(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Oh(i,c,0,h,l,a)}r&&Ly(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Qt(i.font),o=Wn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ke(n)?(l+=o.bottom,vt(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=UU(this,l,n,a);Oh(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:VU(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=be(e.grid&&e.grid.z,-1),r=be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Xo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Qt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class au{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;$U(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,BU(e,o,i),this.override&&Ze.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Ze[r]&&(delete Ze[r][i],this.override&&delete Cs[i])}}function BU(t,e,n){const i=Bl(Object.create(null),[n?Ze.get(n):{},Ze.get(e),t.defaults]);Ze.set(e,i),t.defaultRoutes&&zU(e,t.defaultRoutes),t.descriptors&&Ze.describe(e,t.descriptors)}function zU(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ze.route(s,r,l,a)})}function $U(t){return"id"in t&&"defaults"in t}class WU{constructor(){this.controllers=new au(cl,"datasets",!0),this.elements=new au(Rr,"elements"),this.plugins=new au(Object,"plugins"),this.scales=new au(Xo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Ce(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=Ny(e);Le(i["before"+r],[],i),n[e](i),Le(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Xn=new WU;class HU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Le(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){De(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=be(i.options&&i.options.plugins,{}),s=qU(i);return r===!1&&!n?[]:GU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function qU(t){const e={},n=[],i=Object.keys(Xn.plugins.items);for(let s=0;s<i.length;s++)n.push(Xn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function KU(t,e){return!e&&t===!1?null:t===!0?{}:t}function GU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=KU(i[l],r);c!==null&&s.push({plugin:a,options:QU(t.config,{plugin:a,local:n[l]},c,o)})}return s}function QU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vg(t,e){const n=Ze.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function YU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function XU(t,e){return t===e?"_index_":"_value_"}function hb(t){if(t==="x"||t==="y"||t==="r")return t}function JU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function wg(t,...e){if(hb(t))return t;for(const n of e){const i=n.axis||JU(n.position)||t.length>1&&hb(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function db(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function ZU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return db(t,"x",n[0])||db(t,"y",n[0])}return{}}function e5(t,e){const n=Cs[t.type]||{scales:{}},i=e.scales||{},r=vg(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ke(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=wg(o,a,ZU(o,t),Ze.scales[a.type]),c=XU(l,r),h=n.scales||{};s[o]=rl(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||vg(a,e),h=(Cs[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=YU(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),rl(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];rl(a,[Ze.scales[a.type],Ze.scale])}),s}function Ck(t){const e=t.options||(t.options={});e.plugins=be(e.plugins,{}),e.scales=e5(t,e)}function Ak(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function t5(t){return t=t||{},t.data=Ak(t.data),Ck(t),t}const fb=new Map,Pk=new Set;function lu(t,e){let n=fb.get(t);return n||(n=e(),fb.set(t,n),Pk.add(n)),n}const ka=(t,e,n)=>{const i=Nh(e,n);i!==void 0&&t.add(i)};class n5{constructor(e){this._config=t5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ak(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ck(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return lu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return lu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return lu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return lu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ka(l,e,d))),h.forEach(d=>ka(l,r,d)),h.forEach(d=>ka(l,Cs[s]||{},d)),h.forEach(d=>ka(l,Ze,d)),h.forEach(d=>ka(l,mg,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Pk.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Cs[n]||{},Ze.datasets[n]||{},{type:n},Ze,mg]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=pb(this._resolverCache,e,r);let l=o;if(r5(o,n)){s.$shared=!1,i=Pr(i)?i():i;const c=this.createResolver(e,i,a);l=Fo(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=pb(this._resolverCache,e,i);return ke(n)?Fo(s,n,void 0,r):s}}function pb(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Fy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const i5=t=>ke(t)&&Object.getOwnPropertyNames(t).some(e=>Pr(t[e]));function r5(t,e){const{isScriptable:n,isIndexable:i}=fk(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Pr(a)||i5(a))||o&&vt(a))return!0}return!1}var s5="4.5.1";const o5=["top","bottom","left","right","chartArea"];function gb(t,e){return t==="top"||t==="bottom"||o5.indexOf(t)===-1&&e==="x"}function mb(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function yb(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Le(n&&n.onComplete,[t],e)}function a5(t){const e=t.chart,n=e.options.animation;Le(n&&n.onProgress,[t],e)}function Rk(t){return Uy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ou={},_b=t=>{const e=Rk(t);return Object.values(Ou).filter(n=>n.canvas===e).pop()};function l5(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function c5(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var Hi;let Cd=(Hi=class{static register(...e){Xn.add(...e),vb()}static unregister(...e){Xn.remove(...e),vb()}constructor(e,n){const i=this.config=new n5(n),r=Rk(e),s=_b(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||kU(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=dV(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new HU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=DV(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Ou[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}gi.listen(this,"complete",yb),gi.listen(this,"progress",a5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return De(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Xn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ww(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bw(this.canvas,this.ctx),this}stop(){return gi.stop(this),this}resize(e,n){gi.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ww(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Le(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ce(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=wg(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Ce(s,o=>{const a=o.options,l=a.id,c=wg(l,a),h=be(a.type,o.dtype);(a.position===void 0||gb(a.position,c)!==gb(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Xn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Ce(r,(o,a)=>{o||delete i[a]}),Ce(i,o=>{lr.configure(this,o,o.options),lr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(mb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||vg(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Xn.getController(a),{datasetElementType:c,dataElementType:h}=Ze.datasets[a];Object.assign(l,{dataElementType:Xn.getElement(h),datasetElementType:c&&Xn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ce(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ce(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(mb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ce(this.scales,e=>{lr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Rw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;l5(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Rw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;lr.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ce(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Pr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gi.has(this)?this.attached&&!gi.running(this)&&gi.start(this):(this.draw(),yb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=U4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Oy(n,r),e.controller.draw(),r&&Ly(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return $l(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=oU.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Ls(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Dh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),gi.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Bw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ou[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ce(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ce(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ce(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Ph(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=_V(e),c=c5(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Le(s.onHover,[e,a,this],this),l&&Le(s.onClick,[e,a,this],this));const h=!Ph(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},fe(Hi,"defaults",Ze),fe(Hi,"instances",Ou),fe(Hi,"overrides",Cs),fe(Hi,"registry",Xn),fe(Hi,"version",s5),fe(Hi,"getChart",_b),Hi);function vb(){return Ce(Cd.instances,t=>t._plugins.invalidate())}function Nk(t,e,n=e){t.lineCap=be(n.borderCapStyle,e.borderCapStyle),t.setLineDash(be(n.borderDash,e.borderDash)),t.lineDashOffset=be(n.borderDashOffset,e.borderDashOffset),t.lineJoin=be(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=be(n.borderWidth,e.borderWidth),t.strokeStyle=be(n.borderColor,e.borderColor)}function u5(t,e,n){t.lineTo(n.x,n.y)}function h5(t){return t.stepped?KV:t.tension||t.cubicInterpolationMode==="monotone"?GV:u5}function Dk(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function d5(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Dk(r,n,i),h=h5(s);let{move:d=!0,reverse:f}=i||{},m,v,x;for(m=0;m<=c;++m)v=r[(a+(f?c-m:m))%o],!v.skip&&(d?(t.moveTo(v.x,v.y),d=!1):h(t,x,v,f,s.stepped),x=v);return l&&(v=r[(a+(f?c:0))%o],h(t,x,v,f,s.stepped)),!!l}function f5(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Dk(r,n,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,f,m,v,x,b,T;const E=N=>(o+(c?a-N:N))%s,S=()=>{x!==b&&(t.lineTo(h,b),t.lineTo(h,x),t.lineTo(h,T))};for(l&&(m=r[E(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=r[E(f)],m.skip)continue;const N=m.x,D=m.y,O=N|0;O===v?(D<x?x=D:D>b&&(b=D),h=(d*h+N)/++d):(S(),t.lineTo(N,D),v=O,d=0,x=b=D),T=D}S()}function bg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?f5:d5}function p5(t){return t.stepped?k4:t.tension||t.cubicInterpolationMode==="monotone"?C4:ts}function g5(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Nk(t,e.options),t.stroke(r)}function m5(t,e,n,i){const{segments:r,options:s}=e,o=bg(e);for(const a of r)Nk(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const y5=typeof Path2D=="function";function _5(t,e,n,i){y5&&!e.options.segment?g5(t,e,n,i):m5(t,e,n,i)}class Ua extends Rr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;v4(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=L4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=D4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=p5(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],m=s[d],v=s[f];if(m===v){a.push(m);continue}const x=Math.abs((r-m[n])/(v[n]-m[n])),b=l(m,v,x,i.stepped);b[n]=e[n],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,n,i){return bg(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=bg(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),_5(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}fe(Ua,"id","line"),fe(Ua,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),fe(Ua,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),fe(Ua,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function wb(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Lu extends Rr{constructor(n){super();fe(this,"parsed");fe(this,"skip");fe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return wb(this,n,"x",i)}inYRange(n,i){return wb(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!$l(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,yg(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}fe(Lu,"id","point"),fe(Lu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),fe(Lu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const bb=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},v5=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Eb extends Rr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Le(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Qt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=bb(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((v,x)=>{const b=i+n/2+s.measureText(v.text).width;(x===0||c[c.length-1]+b+2*a>o)&&(d+=h,c[c.length-(x>0?0:1)]=0,m+=h,f++),l[x]={left:0,top:m,row:f,width:b,height:r},c[c.length-1]+=b+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,v=0,x=0;return this.legendItems.forEach((b,T)=>{const{itemWidth:E,itemHeight:S}=w5(i,n,s,b,r);T>0&&m+S+2*a>h&&(d+=f+a,c.push({width:f,height:m}),v+=f+a,x++,f=m=0),l[T]={left:v,top:m,col:x,width:E,height:S},f=Math.max(f,E),m+=S+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=wo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=sn(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=sn(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=sn(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=sn(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Oy(e,this),this._draw(),Ly(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Ze.color,l=wo(e.rtl,this.left,this.width),c=Qt(o.font),{padding:h}=o,d=c.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:x,itemHeight:b}=bb(o,d),T=function(O,w,_){if(isNaN(v)||v<=0||isNaN(x)||x<0)return;r.save();const I=be(_.lineWidth,1);if(r.fillStyle=be(_.fillStyle,a),r.lineCap=be(_.lineCap,"butt"),r.lineDashOffset=be(_.lineDashOffset,0),r.lineJoin=be(_.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=be(_.strokeStyle,a),r.setLineDash(be(_.lineDash,[])),o.usePointStyle){const C={radius:x*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:I},A=l.xPlus(O,v/2),R=w+f;hk(r,C,A,R,o.pointStyleWidth&&v)}else{const C=w+Math.max((d-x)/2,0),A=l.leftForLtr(O,v),R=ll(_.borderRadius);r.beginPath(),Object.values(R).some(P=>P!==0)?_g(r,{x:A,y:C,w:v,h:x,radius:R}):r.rect(A,C,v,x),r.fill(),I!==0&&r.stroke()}r.restore()},E=function(O,w,_){Oh(r,_.text,O,w+b/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},S=this.isHorizontal(),N=this._computeTitleHeight();S?m={x:sn(s,this.left+h,this.right-i[0]),y:this.top+h+N,line:0}:m={x:this.left+h,y:sn(s,this.top+N+h,this.bottom-n[0].height),line:0},_k(this.ctx,e.textDirection);const D=b+h;this.legendItems.forEach((O,w)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;const _=r.measureText(O.text).width,I=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),C=v+f+_;let A=m.x,R=m.y;l.setWidth(this.width),S?w>0&&A+C+h>this.right&&(R=m.y+=D,m.line++,A=m.x=sn(s,this.left+h,this.right-i[m.line])):w>0&&R+D>this.bottom&&(A=m.x=A+n[m.line].width+h,m.line++,R=m.y=sn(s,this.top+N+h,this.bottom-n[m.line].height));const P=l.x(A);if(T(P,R,O),A=MV(I,A+v+f,S?A+C:this.right,e.rtl),E(l.x(A),R,O),S)m.x+=C+h;else if(typeof O.text!="string"){const Y=c.lineHeight;m.y+=Mk(O,Y)+h}else m.y+=D}),vk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Qt(n.font),r=Wn(n.padding);if(!n.display)return;const s=wo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=sn(e.align,d,this.right-f);else{const v=this.columnSizes.reduce((x,b)=>Math.max(x,b.height),0);h=c+sn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=sn(a,d,d+f);o.textAlign=s.textAlign(lk(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Oh(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Qt(e.font),i=Wn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(ja(e,this.left,this.right)&&ja(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],ja(e,r.left,r.left+r.width)&&ja(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!T5(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=v5(r,i);r&&!s&&Le(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Le(n.onHover,[e,i,this],this)}else i&&Le(n.onClick,[e,i,this],this)}}function w5(t,e,n,i,r){const s=b5(i,t,e,n),o=E5(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function b5(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function E5(t,e,n){let i=t;return typeof e.text!="string"&&(i=Mk(e,n)),i}function Mk(t,e){const n=t.text?t.text.length:0;return e*n}function T5(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var x5={id:"legend",_element:Eb,start(t,e,n){const i=t.legend=new Eb({ctx:t.ctx,options:n,chart:t});lr.configure(t,i,n),lr.addBox(t,i)},stop(t){lr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;lr.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Wn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Ba={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=gg(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Qn(t,e){return e&&(vt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function mi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function I5(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Tb(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Qt(e.bodyFont),c=Qt(e.titleFont),h=Qt(e.footerFont),d=s.length,f=r.length,m=i.length,v=Wn(e.padding);let x=v.height,b=0,T=i.reduce((N,D)=>N+D.before.length+D.lines.length+D.after.length,0);if(T+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),T){const N=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=m*N+(T-m)*l.lineHeight+(T-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let E=0;const S=function(N){b=Math.max(b,n.measureText(N).width+E)};return n.save(),n.font=c.string,Ce(t.title,S),n.font=l.string,Ce(t.beforeBody.concat(t.afterBody),S),E=e.displayColors?o+2+e.boxPadding:0,Ce(i,N=>{Ce(N.before,S),Ce(N.lines,S),Ce(N.after,S)}),E=0,n.font=h.string,Ce(t.footer,S),n.restore(),b+=v.width,{width:b,height:x}}function S5(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function k5(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function C5(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),k5(c,t,e,n)&&(c="center"),c}function xb(t,e,n){const i=n.yAlign||e.yAlign||S5(t,n);return{xAlign:n.xAlign||e.xAlign||C5(t,e,n,i),yAlign:i}}function A5(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function P5(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function Ib(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=ll(o);let v=A5(e,a);const x=P5(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,f)+r:a==="right"&&(v+=Math.max(d,m)+r),{x:wn(v,0,i.width-e.width),y:wn(x,0,i.height-e.height)}}function cu(t,e,n){const i=Wn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Sb(t){return Qn([],mi(t))}function R5(t,e,n){return Ls(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function kb(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Ok={beforeTitle:pi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:pi,beforeBody:pi,beforeLabel:pi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return De(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:pi,afterBody:pi,beforeFooter:pi,footer:pi,afterFooter:pi};function Ht(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?Ok[e].call(n,i):r}class Eg extends Rr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new bk(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=R5(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Ht(i,"beforeTitle",this,e),s=Ht(i,"title",this,e),o=Ht(i,"afterTitle",this,e);let a=[];return a=Qn(a,mi(r)),a=Qn(a,mi(s)),a=Qn(a,mi(o)),a}getBeforeBody(e,n){return Sb(Ht(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Ce(e,s=>{const o={before:[],lines:[],after:[]},a=kb(i,s);Qn(o.before,mi(Ht(a,"beforeLabel",this,s))),Qn(o.lines,Ht(a,"label",this,s)),Qn(o.after,mi(Ht(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return Sb(Ht(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Ht(i,"beforeFooter",this,e),s=Ht(i,"footer",this,e),o=Ht(i,"afterFooter",this,e);let a=[];return a=Qn(a,mi(r)),a=Qn(a,mi(s)),a=Qn(a,mi(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(I5(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),Ce(a,h=>{const d=kb(e.callbacks,h);r.push(Ht(d,"labelColor",this,h)),s.push(Ht(d,"labelPointStyle",this,h)),o.push(Ht(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Ba[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Tb(this,i),c=Object.assign({},a,l),h=xb(this.chart,i,c),d=Ib(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=ll(a),{x:f,y:m}=e,{width:v,height:x}=n;let b,T,E,S,N,D;return s==="center"?(N=m+x/2,r==="left"?(b=f,T=b-o,S=N+o,D=N-o):(b=f+v,T=b+o,S=N-o,D=N+o),E=b):(r==="left"?T=f+Math.max(l,h)+o:r==="right"?T=f+v-Math.max(c,d)-o:T=this.caretX,s==="top"?(S=m,N=S-o,b=T-o,E=T+o):(S=m+x,N=S+o,b=T+o,E=T-o),D=S),{x1:b,x2:T,x3:E,y1:S,y2:N,y3:D}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=wo(i.rtl,this.x,this.width);for(e.x=cu(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Qt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=Qt(s.bodyFont),d=cu(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(s.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=r.leftForLtr(f,c)+c/2,T=v+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,yg(e,x,b,T),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,yg(e,x,b,T)}else{e.lineWidth=ke(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,c),b=r.leftForLtr(r.xPlus(f,1),c-2),T=ll(o.borderRadius);Object.values(T).some(E=>E!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,_g(e,{x,y:v,w:c,h:l,radius:T}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),_g(e,{x:b,y:v+1,w:c-2,h:l-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,v,c,l),e.strokeRect(x,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=Qt(i.bodyFont);let f=d.lineHeight,m=0;const v=wo(i.rtl,this.x,this.width),x=function(_){n.fillText(_,v.x(e.x+m),e.y+f/2),e.y+=f+s},b=v.textAlign(o);let T,E,S,N,D,O,w;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=cu(this,b,i),n.fillStyle=i.bodyColor,Ce(this.beforeBody,x),m=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,N=0,O=r.length;N<O;++N){for(T=r[N],E=this.labelTextColors[N],n.fillStyle=E,Ce(T.before,x),S=T.lines,a&&S.length&&(this._drawColorBox(n,e,N,v,i),f=Math.max(d.lineHeight,l)),D=0,w=S.length;D<w;++D)x(S[D]),f=d.lineHeight;Ce(T.after,x)}m=0,f=d.lineHeight,Ce(this.afterBody,x),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=wo(i.rtl,this.x,this.width);for(e.x=cu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Qt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:v}=ll(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-v),n.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Ba[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Tb(this,e),l=Object.assign({},o,this._size),c=xb(n,e,l),h=Ib(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Wn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),_k(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),vk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Ph(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Ph(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Ba[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}fe(Eg,"positioners",Ba);var N5={id:"tooltip",_element:Eg,positioners:Ba,afterInit(t,e,n){n&&(t.tooltip=new Eg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ok},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const D5=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function M5(t,e,n,i){const r=t.indexOf(e);if(r===-1)return D5(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const O5=(t,e)=>t===null?null:wn(Math.round(t),0,e);function Cb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Tg extends Xo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(De(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:M5(i,e,be(n,e),this._addedLabels),O5(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Cb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}fe(Tg,"id","category"),fe(Tg,"defaults",{ticks:{callback:Cb}});function L5(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,v=h-1,{min:x,max:b}=e,T=!De(o),E=!De(a),S=!De(c),N=(b-x)/(d+1);let D=Dw((b-x)/v/m)*m,O,w,_,I;if(D<1e-14&&!T&&!E)return[{value:x},{value:b}];I=Math.ceil(b/D)-Math.floor(x/D),I>v&&(D=Dw(I*D/v/m)*m),De(l)||(O=Math.pow(10,l),D=Math.ceil(D*O)/O),r==="ticks"?(w=Math.floor(x/D)*D,_=Math.ceil(b/D)*D):(w=x,_=b),T&&E&&s&&TV((a-o)/s,D/1e3)?(I=Math.round(Math.min((a-o)/D,h)),D=(a-o)/I,w=o,_=a):S?(w=T?o:w,_=E?a:_,I=c-1,D=(_-w)/I):(I=(_-w)/D,sl(I,Math.round(I),D/1e3)?I=Math.round(I):I=Math.ceil(I));const C=Math.max(Mw(D),Mw(w));O=Math.pow(10,De(l)?C:l),w=Math.round(w*O)/O,_=Math.round(_*O)/O;let A=0;for(T&&(f&&w!==o?(n.push({value:o}),w<o&&A++,sl(Math.round((w+A*D)*O)/O,o,Ab(o,N,t))&&A++):w<o&&A++);A<I;++A){const R=Math.round((w+A*D)*O)/O;if(E&&R>a)break;n.push({value:R})}return E&&f&&_!==a?n.length&&sl(n[n.length-1].value,a,Ab(a,N,t))?n[n.length-1].value=a:n.push({value:a}):(!E||_===a)&&n.push({value:_}),n}function Ab(t,e,{horizontal:n,minRotation:i}){const r=ls(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class F5 extends Xo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return De(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Lo(r),c=Lo(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=L5(r,s);return e.bounds==="ticks"&&xV(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return ck(e,this.chart.options.locale,this.options.ticks.format)}}class xg extends F5{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Sn(e)?e:0,this.max=Sn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=ls(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}fe(xg,"id","linear"),fe(xg,"defaults",{ticks:{callback:uk.formatters.numeric}});const Ad={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kt=Object.keys(Ad);function Pb(t,e){return t-e}function Rb(t,e){if(De(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Sn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(zl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Nb(t,e,n,i){const r=Kt.length;for(let s=Kt.indexOf(t);s<r-1;++s){const o=Ad[Kt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Kt[s]}return Kt[r-1]}function j5(t,e,n,i,r){for(let s=Kt.length-1;s>=Kt.indexOf(n);s--){const o=Kt[s];if(Ad[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Kt[n?Kt.indexOf(n):0]}function V5(t){for(let e=Kt.indexOf(t)+1,n=Kt.length;e<n;++e)if(Ad[Kt[e]].common)return Kt[e]}function Db(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Dy(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function U5(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Mb(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:U5(t,i,r,n)}class jh extends Xo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new tU._date(e.adapters.date);r.init(n),rl(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Rb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Sn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Sn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=PV(r,s,o);return this._unit=n.unit||(i.autoSkip?Nb(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):j5(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:V5(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Mb(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=wn(n,0,o),i=wn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Nb(s.minUnit,n,i,this._getLabelCapacity(n)),a=be(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=zl(l)||l===!0,h={};let d=n,f,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)Db(h,f,v);return(f===i||r.bounds==="ticks"||m===1)&&Db(h,f,v),Object.keys(h).sort(Pb).map(x=>+x)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Le(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=i[n],m=c&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=ls(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Mb(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(Rb(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return NV(e.sort(Pb))}}fe(jh,"id","time"),fe(jh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function uu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=cs(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=cs(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Ob extends jh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=uu(n,this.min),this._tableRange=uu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(uu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return uu(this._table,i*this._tableRange+this._minPos,!0)}}fe(Ob,"id","timeseries"),fe(Ob,"defaults",jh.defaults);Cd.register(Ua,Lu,xg,Tg,N5,x5);const Lk="label";function Lb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function B5(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Fk(t,e){t.labels=e}function jk(t,e,n=Lk){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function z5(t,e=Lk){const n={labels:[],datasets:[]};return Fk(n,t.labels),jk(n,t.datasets,e),n}function $5(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,m=M.useRef(null),v=M.useRef(null),x=()=>{m.current&&(v.current=new Cd(m.current,{type:o,data:z5(a,s),options:l&&{...l},plugins:c}),Lb(e,v.current))},b=()=>{Lb(e,null),v.current&&(v.current.destroy(),v.current=null)};return M.useEffect(()=>{!r&&v.current&&l&&B5(v.current,l)},[r,l]),M.useEffect(()=>{!r&&v.current&&Fk(v.current.config.data,a.labels)},[r,a.labels]),M.useEffect(()=>{!r&&v.current&&a.datasets&&jk(v.current.config.data,a.datasets,s)},[r,a.datasets]),M.useEffect(()=>{v.current&&(r?(b(),setTimeout(x)):v.current.update(d))},[r,l,a.labels,a.datasets,d]),M.useEffect(()=>{v.current&&(b(),setTimeout(x))},[o]),M.useEffect(()=>(x(),()=>b()),[]),g.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const W5=M.forwardRef($5);function H5(t,e){return Cd.register(e),M.forwardRef((n,i)=>g.jsx(W5,{...n,ref:i,type:t}))}const $y=H5("line",Du);function q5({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return g.jsxs("div",{className:"chart card",children:[g.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),g.jsx("div",{className:"chart-inner",children:g.jsx($y,{data:r,options:s})})]})}function K5({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],i=t.map(c=>c.dateIso),r=t.map(c=>{var h;return(h=c.wma)==null?void 0:h.bench}),s=t.map(c=>{var h;return(h=c.wma)==null?void 0:h.squat}),o=t.map(c=>{var h;return(h=c.wma)==null?void 0:h.deadlift}),a={labels:i,datasets:[{label:`${n[0]} (7-day WMA)`,data:r,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[1]} (7-day WMA)`,data:s,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[2]} (7-day WMA)`,data:o,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:c=>{var h,d;return`${c.dataset.label}: ${(d=(h=c.parsed.y)==null?void 0:h.toFixed)==null?void 0:d.call(h,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return g.jsxs("div",{className:"chart card",children:[g.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),g.jsx("div",{className:"chart-inner",children:g.jsx($y,{data:a,options:l})})]})}function G5({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>a.calories),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (raw)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.15}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return g.jsxs("div",{className:"chart card",children:[g.jsx("div",{className:"card-title",children:"Smoothed Weight/Strength vs Raw Calories"}),g.jsx("div",{className:"chart-inner",children:g.jsx($y,{data:s,options:o})})]})}function Qr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function Q5(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function Y5(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function X5({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Weekly Analysis"}),g.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),g.jsx("div",{className:"table-wrap",style:{marginTop:12},children:g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Week #"}),g.jsx("th",{children:"Avg Calories"}),g.jsx("th",{children:"Weight Change (kg)"}),g.jsx("th",{children:"Calculated TDEE"}),g.jsx("th",{children:"TDEE "}),g.jsx("th",{children:"Adaptation %"}),g.jsx("th",{children:"LBM (kg)"}),g.jsx("th",{children:"Loss Rate vs LBM %"}),g.jsx("th",{children:"Status"})]})}),g.jsx("tbody",{children:t.weeks.map(n=>g.jsxs("tr",{children:[g.jsx("td",{children:n.week}),g.jsx("td",{children:Qr(n.avgCalories,0)}),g.jsx("td",{children:Qr(n.weightChange,2)}),g.jsx("td",{children:Qr(n.tdee,0)}),g.jsx("td",{children:Qr(n.tdeeChangeFromBaseline,0)}),g.jsx("td",{className:Q5(n.adaptationPct),children:Qr(n.adaptationPct,1)}),g.jsx("td",{children:Qr(n.lbm,1)}),g.jsx("td",{children:Qr(n.lossRatePct,2)}),g.jsx("td",{className:Y5(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),g.jsxs("div",{className:"notice info",style:{marginTop:12},children:[g.jsx("div",{children:g.jsx("b",{children:"How to read this:"})}),g.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[g.jsxs("div",{children:[g.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",g.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function gt(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function Fb(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function jb(t,e){const n=ks(t).getTime(),i=ks(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function Vb(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function J5(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function Z5({derived:t,weekly:e,profile:n,currentCycle:i}){const r=M.useMemo(()=>{var S,N,D,O;if(!(t!=null&&t.length))return[];const s=t[t.length-1],o=s.dateIso,a=(S=e==null?void 0:e.weeks)!=null&&S.length?e.weeks[e.weeks.length-1]:null,l=e==null?void 0:e.baselineTdee,c=e==null?void 0:e.baselineStrength,h=e==null?void 0:e.baselineWeeklyLoss,d=t.filter(w=>{const _=jb(o,w.dateIso);return _>=0&&_<=6}),f=d.length,m=Vb(d.map(w=>w.protein)),v=Vb(d.map(w=>w.calories)),x=Number.isFinite((N=s==null?void 0:s.wma)==null?void 0:N.weight)?s.wma.weight:s.weight,b=[];if(a&&Number.isFinite(l)&&Number.isFinite(a.tdee)&&Number.isFinite(a.adaptationPct)){const w=Math.max(0,-a.adaptationPct);let _="good";w>=10?_="bad":w>=5&&(_="warn");const I=a.adaptationPct<0?"dropped":"increased",C=`${gt(Math.abs(a.adaptationPct),0)}%`;b.push({key:"adaptation",level:_,title:"Metabolic adaptation",message:`Your TDEE has ${I} ${C} from baseline (${gt(l,0)}  ${gt(a.tdee,0)} kcal).`,action:_!=="good"?"Consider a refeed day or reducing training volume.":null})}if(a&&Number.isFinite(a.lossRatePct)){const w=String(a.lossRateStatus||"").toUpperCase();let _="info";a.lossRateStatus==="Optimal"&&(_="good"),a.lossRateStatus==="Aggressive"&&(_="bad");const I=a.lossRateStatus==="Aggressive"?"Risk of muscle loss.":a.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";b.push({key:"lossrate",level:_,title:"Loss rate vs LBM",message:`This week: ${gt(a.lossRatePct,1)}% of LBM lost  ${w}. ${I}`,action:null})}if(a&&Number.isFinite(c)&&Number.isFinite(a.avgStrengthWma)){const w=(a.avgStrengthWma-c)/c*100;let _="good",I="",C="Strength maintained/increasing.",A=null;w<-7.5?(_="bad",I="",C="Strength declining significantly.",A="Consider eating more or reducing cardio."):w<-5&&(_="warn",I="",C="Strength declining.",A="Consider eating more or reducing cardio."),b.push({key:"strength",level:_,title:"Strength trend",message:`${C} ${I} (${gt(w,1)}% vs baseline)`,action:A})}if(a&&Number.isFinite(a.tdee)&&Number.isFinite(a.lbm)){const w=a.lbm,_=.005*w,I=.01*w,C=_*7700/7,A=I*7700/7,R=a.tdee-C,P=a.tdee-A,Y=Fb(Math.min(P,R),50),H=Fb(Math.max(P,R),50);b.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${Y}-${H} kcal/day this week.`,action:null})}f<6&&b.push({key:"completeness",level:"warn",title:"Data completeness",message:`${f}/7 days logged this week  missing data may affect accuracy.`,action:null});let T=null;for(let w=t.length-1;w>=0;w--)if(Number.isFinite((D=t[w])==null?void 0:D.bfPct)){T=t[w].dateIso;break}if(!T)b.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const w=jb(o,T);w>=7?b.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):b.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-w} day(s).`,action:null})}if(Number.isFinite(m)&&Number.isFinite(x)){const w=1.6*x,_=2.2*x;if(m<w){const I=(w-m)/w*100;b.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${gt(I,0)}% below the muscle-retention range (${gt(m,0)}g/day vs ${gt(w,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else m>_?b.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${gt(m,0)}g/day).`,action:null}):b.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${gt(m,0)}g/day).`,action:null})}if(a&&Number.isFinite(h)&&Number.isFinite(a.weightChange)){const w=Math.max(0,-a.weightChange),_=h;(w<.2||_>.2&&w<_*.35)&&b.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${gt(w,1)}kg this week vs ${gt(_,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const E=Number(i==null?void 0:i.targetWeightKg);if(((i==null?void 0:i.type)==="cutting"||(i==null?void 0:i.type)==="bulking")&&Number.isFinite(E)&&t.length>=2){const w=t.find(C=>C.dateIso>=i.startDateIso)||t[0],_=Number(w==null?void 0:w.weight),I=Number((O=t[t.length-1])==null?void 0:O.weight);if(Number.isFinite(_)&&Number.isFinite(I)){if(i.type==="cutting"&&_>E){const C=_-I,A=_-E,R=Math.max(0,Math.min(1,C/A))*100;C>=1&&b.push({level:"good",title:"Progress milestone",message:`${gt(C,1)}kg down since cycle start  ${gt(R,0)}% to target.`,action:null})}if(i.type==="bulking"&&_<E){const C=I-_,A=E-_,R=Math.max(0,Math.min(1,C/A))*100;C>=1&&b.push({level:"good",title:"Progress milestone",message:`${gt(C,1)}kg up since cycle start  ${gt(R,0)}% to target.`,action:null})}}}return a||(b.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(v)&&b.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${gt(v,0)} kcal/day.`,action:null})),b},[t,e,n]);return r.length?g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Insights"}),g.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),g.jsx("div",{className:"grid",style:{marginTop:12},children:r.map(s=>g.jsxs("div",{className:`card insight-card ${J5(s.level)}`,style:{gridColumn:"span 6"},children:[g.jsx("div",{className:"insight-title",children:s.title}),g.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:s.message}),s.action&&g.jsx("div",{className:"small",style:{marginTop:8},children:s.action})]},s.key))})]}):null}function Wf(t,e){const n=ks(t).getTime(),i=ks(e).getTime();return Math.floor((n-i)/(24*60*60*1e3))}function $i(t){const e=(t||[]).map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function Ub(t,e,n){return Math.max(e,Math.min(n,t))}function pe(t,e=0){return Number.isFinite(t)?Number(t).toFixed(e):""}function eB(t){const e=String(t||"").toLowerCase();return e==="cut"||e==="cutting"?"cut":e==="bulk"||e==="bulking"?"bulk":e==="maintain"||e==="maintaining"?"maintain":"none"}function tB(t){return t==="cut"?"CUT":t==="bulk"?"BULK":t==="maintain"?"MAINTAIN":"NO CYCLE"}function nB(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=.2?{key:"stable",sym:"",label:"Stable",value:e}:e<-1?{key:"rapid_loss",sym:"",label:"Rapid loss",value:e}:e<-.2?{key:"losing",sym:"",label:"Losing",value:e}:e>1?{key:"rapid_gain",sym:"",label:"Rapid gain",value:e}:e>.2?{key:"gaining",sym:"",label:"Gaining",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function iB(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=.5?{key:"stable",sym:"",label:"Stable",value:e}:e<-.5?{key:"decreasing",sym:"",label:"Decreasing",value:e}:e>.5?{key:"increasing",sym:"",label:"Increasing",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function rB(t){if(!Number.isFinite(t))return{key:"unknown",sym:"",label:"Unknown",value:null};const e=t;return Math.abs(e)<=2?{key:"stable",sym:"",label:"Stable",value:e}:e>2?{key:"increasing",sym:"",label:"Increasing",value:e}:e<-5?{key:"rapid_decline",sym:"",label:"Rapid decline",value:e}:e<-2?{key:"declining",sym:"",label:"Declining",value:e}:{key:"stable",sym:"",label:"Stable",value:e}}function sB(t){return t==="cut"?"cycle-badge cut":t==="bulk"?"cycle-badge bulk":t==="maintain"?"cycle-badge maintain":"cycle-badge none"}function oB(t){const{cycle:e,hasCycleTarget:n,currentAvgCal:i,currentProtein:r,proteinPerKg:s,targetProtein2g:o,currentWeight:a,targetWeight:l,weightToGoal:c,directionToGoal:h,derivedLen:d,daysLogged:f,daysRemaining:m,hasNavyAny:v,hasNavyInWindow:x,weightTrend:b,bfTrend:T,strengthTrend:E,lossRate:S,calculatedTdee:N,baselineTdee:D,adaptationPct:O,strengthDeclinePct:w,weeklyWeightChange:_,weeklyWeightLoss:I,prevWeekTdee:C}=t,A=[],R=[];if(d<14||!Number.isFinite(D)||!Number.isFinite(N)){let L="";return m>0?L=`Need ${m} more days of consistent logging to assess status.`:L="Need at least 14 days of consistent logging to assess status.",f<5&&(L=`Only ${f}/7 days logged this week. Need 5 days per week for accurate assessment.`),v?x||R.push("No recent Navy measurements in the selected period. BF% trend will be less accurate."):R.push("Take your first body measurements (neck, waist, hip) to enable body composition tracking."),e==="none"&&R.push("No active cycle set. Create a cycle so status checks alignment with your goal."),n&&Number.isFinite(l)&&Number.isFinite(a)&&R.push(`Goal: ${pe(l,1)}kg (currently ${pe(a,1)}kg, ${pe(Math.abs(c),1)}kg to go).`),{level:"gray",title:"Insufficient Data",emoji:"",message:L,warnings:A,notes:R}}if(f<5){const L=`Only ${f}/7 days logged this week. Need 5 days per week for accurate assessment.`;return v||R.push("Take your first body measurements (neck, waist, hip) to enable body composition tracking."),{level:"gray",title:"Insufficient Data",emoji:"",message:L,warnings:A,notes:R}}const P=Math.round(i||0),Y=Math.round(r||0),H=Math.round(N||0),ue=Math.round(D||0),re=T.key!=="unknown",B=E.key!=="unknown";(!v||!x||!re)&&R.push("Body fat trend is unavailable in this period. Add Navy measurements (neck/waist/hip) for more accurate status."),B||R.push("Strength trend is unavailable. Log your big-3 lifts (bench/squat/deadlift) to improve accuracy.");const q=Number.isFinite(c)?Math.abs(c):null;function X(){!n||!Number.isFinite(l)||!Number.isFinite(a)||!Number.isFinite(q)||q<=2||(h==="need to lose"?A.push(`Note: You're ${pe(q,1)}kg from your target of ${pe(l,1)}kg. Consider switching to a Cut cycle if fat loss is the priority.`):h==="need to gain"&&A.push(`Note: You're ${pe(q,1)}kg from your target of ${pe(l,1)}kg. Consider switching to a Bulk cycle if gaining is the priority.`))}function V(){e!=="none"&&(e==="cut"?(b.key==="stable"||b.key==="gaining"||b.key==="rapid_gain"||re&&(T.key==="stable"||T.key==="increasing"))&&A.push(" Cycle misalignment: In a Cut cycle, weight should trend  and body fat should trend  over time."):e==="bulk"?(b.key==="stable"||b.key==="losing"||b.key==="rapid_loss"||B&&E.key==="stable")&&A.push(" Cycle misalignment: In a Bulk cycle, weight should trend  and strength should trend  over time."):e==="maintain"&&(b.key==="rapid_gain"||b.key==="rapid_loss")&&A.push(" Cycle misalignment: In a Maintain cycle, weight should stay  (stable)."))}if(Number.isFinite(O)&&O<-15&&E.key==="rapid_decline"){const L=` URGENT: TDEE dropped ${pe(O,1)}% (from ${ue} to ${H}). Take a 2-week diet break: increase from ${P} to ~${H} cal/day.`;return V(),{level:"red",title:"Metabolic Crash",emoji:"",message:L,warnings:A,notes:R}}if(re&&b.key!=="gaining"&&T.key==="increasing"&&(E.key==="declining"||E.key==="rapid_decline")){let L=" CRITICAL: Body fat is rising while weight is dropping  likely muscle loss.";return Number.isFinite(s)&&s<1.8?L=` CRITICAL: Insufficient protein (${Y}g, ${pe(s,1)}g/kg) causing muscle loss. Increase to ~${Math.round(o)}g and raise calories to maintenance (~${H}).`:L=` CRITICAL: Despite adequate protein (${Y}g, ${pe(s,1)}g/kg), you're losing muscle faster than fat. Stop cutting: increase from ${P} to maintenance (~${H}) and focus on progressive overload.`,V(),n&&Number.isFinite(l)&&Number.isFinite(a)&&a<l&&A.push(` You're already below your goal weight of ${pe(l,1)}kg. Stop cutting and switch to Maintain or Bulk.`),{level:"red",title:"Skinny-Fat Trajectory",emoji:"",message:L,warnings:A,notes:R}}if(E.key==="rapid_decline"&&(b.key==="losing"||b.key==="rapid_loss")){let L="";return Number.isFinite(s)&&s<1.6?L=` URGENT: Protein too low (${Y}g, ${pe(s,1)}g/kg). Increase to ~${Math.round(o)}g/day. Keep calories at ${P} while training stays consistent.`:Number.isFinite(w)&&w>5?L=` URGENT: Strength is declining ${pe(w,1)}% from baseline. Review training stimulus/recovery. Consider reducing cardio and keeping calories closer to maintenance (~${H}).`:L=` URGENT: Strength dropping rapidly while cutting. Increase calories from ${P} to ~${P+300} and reassess training recovery.`,V(),{level:"red",title:"Inadequate Protein / Poor Training",emoji:"",message:L,warnings:A,notes:R}}if(re&&(b.key==="gaining"||b.key==="rapid_gain")&&T.key==="increasing"&&E.key==="stable"){let L="";return Number.isFinite(s)&&s<1.6?L=` Eating ${P} cal but only ${Y}g protein (${pe(s,1)}g/kg). Increase protein to ~${Math.round(o)}g and reduce total calories to ~${Math.max(0,P-300)}.`:L=` Eating ${P} cal with adequate protein (${Y}g, ${pe(s,1)}g/kg) but no strength gains. Either reduce ~${Math.max(0,P-400)} for a cut or increase training intensity/volume to actually build muscle.`,V(),{level:"red",title:"Overfeeding Without Stimulus",emoji:"",message:L,warnings:A,notes:R}}if(re&&T.key==="increasing"&&(E.key==="declining"||E.key==="rapid_decline")){let L=" Losing muscle and gaining fat. Resume consistent training immediately.";return Number.isFinite(C)&&Number.isFinite(i)&&(L=` Losing muscle and gaining fat. Resume consistent training immediately. You're eating ~${P} vs estimated TDEE ~${Math.round(C)}. Reduce to maintenance until training is consistent.`),A.push("Cannot progress in any cycle without consistent training. Consider switching to Maintaining until training is back on track."),X(),{level:"red",title:"Detraining",emoji:"",message:L,warnings:A,notes:R}}if(Number.isFinite(C)&&Number.isFinite(i)&&Number.isFinite(_)){const L=(C-i)*7,W=-_*7700;if(Math.abs(W-L)>3850){const ee=(i-C)*7/7700,ae=`Weight changed ${pe(_,1)}kg/week but calories suggest ${pe(ee,1)}kg/week. Likely water retention (sodium/carbs/hormones/timing). Keep ${P} cal and reassess in 1 week.`;return V(),X(),{level:"gray",title:"Water Weight Fluctuation",emoji:"",message:ae,warnings:A,notes:R}}}if(b.key==="rapid_loss"&&(E.key==="declining"||E.key==="rapid_decline")){let L="";return Number.isFinite(s)&&s<1.8?L=` Losing muscle due to insufficient protein. Currently ${Y}g (${pe(s,1)}g/kg). Increase to ~${Math.round(o)}g/day and reduce deficit to ~${P+200} cal.`:L=` Deficit too aggressive despite adequate protein (${Y}g/day, ${pe(s,1)}g/kg). Increase calories from ${P} to ~${P+250} to preserve muscle.`,Number.isFinite(S)&&S>1&&R.push(`Loss rate: ${pe(S,2)}% of LBM/week (aggressive).`),V(),{level:"yellow",title:"Cutting (Aggressive)",emoji:"",message:L,warnings:A,notes:R}}if(re&&b.key==="rapid_gain"&&T.key==="increasing"&&E.key==="increasing"){const L=` Excessive fat gain. Reduce from ${P} to ~${Math.max(0,P-250)} cal/day while keeping protein around ${Y}g.`;return V(),X(),{level:"yellow",title:"Dirty Bulking",emoji:"",message:L,warnings:A,notes:R}}if(b.key==="stable"&&(!re||T.key==="stable")&&(!B||E.key==="stable")){let L="You're stable with no clear trend.";return e==="maintain"?L=`You're maintaining as intended. If you want a direction, choose Cut (~${Math.max(0,H-500)} cal) or Bulk (~${H+300} cal).`:e==="cut"?(L=` Eating near maintenance (${P}  ${H}) but in a Cut cycle. Reduce to ~${Math.max(0,H-500)} cal/day to start cutting.`,Number.isFinite(O)&&O<-10&&R.push(`Metabolic adaptation: ${pe(O,1)}%. Consider a short diet break near maintenance.`)):e==="bulk"?L=` Weight is stable but in a Bulk cycle. Increase from ${P} to ~${H+400} cal/day to start gaining.`:L="Set a cycle to interpret trends in context.",X(),{level:"yellow",title:"Spinning Wheels",emoji:"",message:L,warnings:A,notes:R}}if(b.key==="stable"&&re&&T.key==="decreasing"&&E.key==="increasing"){let L=` Excellent recomp: losing fat and gaining muscle while maintaining weight. Current calories (${P}) fit your plan.`;return e==="cut"&&(L=` Good progress but misaligned: you're recomping (weight stable) in a Cut cycle. To lose weight as planned, reduce to ~${Math.max(0,P-300)} cal/day.`),e==="bulk"&&(L=` Good progress but misaligned: you're recomping (weight stable) in a Bulk cycle. To gain as planned, increase to ~${P+400} cal/day.`),X(),{level:"green",title:e==="bulk"?"Gaintaining":"Recomping",emoji:"",message:L,warnings:A,notes:R}}if(b.key==="gaining"&&E.key==="increasing"&&(!re||T.key==="stable"||T.key==="increasing")){let L=` Perfect lean bulk. Stay around ${P} calories/day with ${Y}g protein.`;return e==="maintain"&&(L=` Misaligned: you're bulking in a Maintaining cycle. Either reduce to maintenance (~${H} cal) or switch cycle to Bulking.`),e==="cut"&&(L=` Misaligned: you're bulking in a Cutting cycle. Either reduce to ~${Math.max(0,H-500)} cal or switch cycle to Bulking.`),n&&Number.isFinite(l)&&Number.isFinite(c)&&c<-2?R.push(`On track toward ${pe(l,1)}kg  ${pe(Math.abs(c),1)}kg to go.`):n&&Number.isFinite(l)&&Number.isFinite(c)&&c>2&&A.push(` Moving away from goal: currently ${pe(a,1)}kg vs target ${pe(l,1)}kg.`),{level:"green",title:"Lean Bulking",emoji:"",message:L,warnings:A,notes:R}}if(b.key==="losing"&&(!re||T.key==="decreasing")&&(E.key==="stable"||E.key==="increasing")&&(Number.isFinite(S)?S>=.5&&S<=1:!0)){let W=` Perfect fat loss: losing fat while preserving muscle. Maintain ${P} calories/day and ${Y}g protein.`;if(e==="maintain"&&(W=` Misaligned: you're cutting effectively but in a Maintaining cycle. Either increase to maintenance (~${H} cal) or switch cycle to Cutting.`),e==="bulk"&&(W=` Misaligned: you're losing weight but in a Bulking cycle. Either increase to ~${H+400} cal or switch cycle to Cutting.`),n&&Number.isFinite(l)&&Number.isFinite(c)&&c>2&&I>0){const ee=c/I;R.push(`At ~${pe(I,1)}kg/week, you'll reach ${pe(l,1)}kg in ~${Math.ceil(ee)} weeks.`)}return n&&Number.isFinite(c)&&Math.abs(c)<=1&&R.push(` Almost at your goal weight of ${pe(l,1)}kg. Consider switching to Maintaining within 12 weeks.`),{level:"green",title:"Cutting (Optimal)",emoji:"",message:W,warnings:A,notes:R}}if(b.key==="losing"&&(!re||T.key==="decreasing")&&E.key==="stable"){let L=`Slow but safe cut at ~${P} cal/day.`;return I<.3&&(L=`Safe but slow cut. Consider reducing to ~${Math.max(0,P-200)} cal/day to accelerate.`),e==="maintain"&&(L=` Misaligned: you're cutting (slowly) but in a Maintaining cycle. Either increase to maintenance (~${H}) or switch to Cutting.`),e==="bulk"&&(L=` Misaligned: you're losing weight but in a Bulking cycle. Increase to ~${H+400} immediately or switch to Cutting.`),n&&Number.isFinite(c)&&c>5&&R.push(`You're ${pe(c,1)}kg from your goal of ${pe(l,1)}kg. Consider a slightly larger deficit to reach it sooner.`),{level:"green",title:"Cutting (Conservative)",emoji:"",message:L,warnings:A,notes:R}}if(b.key==="stable"&&(!re||T.key==="stable"||T.key==="decreasing")&&(E.key==="stable"||E.key==="increasing")){let L=` Solid maintenance at ~${P} cal/day.`;return e==="cut"&&(L=` Misaligned: weight is stable but you're in a Cut cycle. Reduce to ~${Math.max(0,H-500)} cal or switch cycle to Maintaining.`),e==="bulk"&&(L=` Misaligned: weight is stable but you're in a Bulk cycle. Increase to ~${H+400} cal or switch cycle to Maintaining.`),X(),{level:"green",title:"Maintaining Successfully",emoji:"",message:L,warnings:A,notes:R}}return V(),X(),{level:"yellow",title:"Mixed Signals",emoji:"",message:"Trends are mixed across weight/body fat/strength. Keep logging consistently for another 12 weeks, then reassess.",warnings:A,notes:R}}function aB({derived:t,weekly:e,profile:n,currentCycle:i}){var f,m;const[r,s]=M.useState(7),[o,a]=M.useState(!1),l=M.useMemo(()=>{var Ve,ve,Vr,Jo,Zo,pc;const v=Array.isArray(t)?t:[],x=v.length;if(!x)return{rangeDays:r,status:{level:"gray",title:"Insufficient Data",emoji:"",message:"No data yet. Add your first entry to see your status.",warnings:[],notes:[]},cycle:"none",cycleBadge:"NO CYCLE",weightTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},bfTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},strengthTrend:{sym:"",label:"Unknown",value:null,key:"unknown"},currentAvgCal:null,currentProtein:null,currentWeight:null,targetWeight:null,goalProgress:null};const b=v[v.length-1].dateIso,T=v.filter(Z=>{const ge=Wf(b,Z.dateIso);return ge>=0&&ge<=r-1}),E=v.filter(Z=>{const ge=Wf(b,Z.dateIso);return ge>=r&&ge<=r*2-1}),S=$i(T.map(Z=>{var ge;return Number.isFinite((ge=Z==null?void 0:Z.wma)==null?void 0:ge.weight)?Z.wma.weight:Z.weight})),N=$i(E.map(Z=>{var ge;return Number.isFinite((ge=Z==null?void 0:Z.wma)==null?void 0:ge.weight)?Z.wma.weight:Z.weight})),D=Number.isFinite(S)&&Number.isFinite(N)?(S-N)*(7/r):null,O=nB(D),w=$i(T.map(Z=>Z.bfPct).filter(Number.isFinite)),_=$i(E.map(Z=>Z.bfPct).filter(Number.isFinite)),I=Number.isFinite(w)&&Number.isFinite(_)?w-_:null,C=iB(I),A=$i(T.map(Z=>{var ge;return(ge=Z==null?void 0:Z.wma)==null?void 0:ge.avgStrength}).filter(Number.isFinite)),R=$i(E.map(Z=>{var ge;return(ge=Z==null?void 0:Z.wma)==null?void 0:ge.avgStrength}).filter(Number.isFinite)),P=Number.isFinite(A)&&Number.isFinite(R)&&R!==0?(A-R)/R*100:null,Y=rB(P),H=$i(T.map(Z=>Z.calories).filter(Number.isFinite)),ue=$i(T.map(Z=>Z.protein).filter(Number.isFinite)),re=v[v.length-1],B=Number.isFinite((Ve=re==null?void 0:re.wma)==null?void 0:Ve.weight)?re.wma.weight:re.weight;let q=null;if(T.length>=2){const Z=T[0],ge=T[T.length-1],gn=Number.isFinite((ve=Z==null?void 0:Z.wma)==null?void 0:ve.weight)?Z.wma.weight:Z.weight,Fi=Number.isFinite((Vr=ge==null?void 0:ge.wma)==null?void 0:Vr.weight)?ge.wma.weight:ge.weight;if(Number.isFinite(gn)&&Number.isFinite(Fi)){const Fs=Math.max(1,T.length-1);q=(Fi-gn)*(7/Fs)}}const X=Number.isFinite(q)?Math.max(0,-q):null;let V=null;if(Number.isFinite(H)&&Number.isFinite(q)){const ge=-q*7700/7;V=H+ge}const L=(e==null?void 0:e.baselineTdee)??null,W=Number.isFinite(V)&&Number.isFinite(L)&&L!==0?(V-L)/L*100:null,ee=(e==null?void 0:e.baselineStrength)??null,ae=Number.isFinite(ee)&&Number.isFinite(A)&&ee!==0?(ee-A)/ee*100:null;let ne=null;for(let Z=v.length-1;Z>=0;Z--)if(Number.isFinite((Jo=v[Z])==null?void 0:Jo.lbm)){ne=v[Z].lbm;break}const xe=Number.isFinite(ne)&&Number.isFinite(X)&&ne>0?X/ne*100:null,Ye=Number.isFinite(ue)&&Number.isFinite(B)&&B>0?ue/B:null,pn=Number.isFinite(B)?B*2:null,Be=v.filter(Z=>{const ge=Wf(b,Z.dateIso);return ge>=0&&ge<=6}),et=Z=>Number.isFinite(Z.weight)&&Number.isFinite(Z.protein)&&Number.isFinite(Z.carbs)&&Number.isFinite(Z.fats),G=Be.filter(et).length,de=v.filter(et).length,Ke=Math.max(0,14-de),st=v.some(Z=>Number.isFinite(Z.neck)||Number.isFinite(Z.waist)||Number.isFinite(Z.hip)||Number.isFinite(Z.bfPct)),tn=T.some(Z=>Number.isFinite(Z.bfPct)),tt=eB(i==null?void 0:i.type),kn=tt!=="maintain"&&Number.isFinite(i==null?void 0:i.targetWeightKg),Wt=kn?Number(i.targetWeightKg):null,xt=kn&&Number.isFinite(Wt)&&Number.isFinite(B)?B-Wt:null;let nn=null;Number.isFinite(xt)&&(Math.abs(xt)<=1?nn="at goal":xt>0?nn="need to lose":nn="need to gain");let hi=null;if(kn&&Number.isFinite(Wt)&&(i!=null&&i.startDateIso)){const Z=v.find(gn=>(gn.dateIso||"")>=(i.startDateIso||"")),ge=Z?Number.isFinite((Zo=Z==null?void 0:Z.wma)==null?void 0:Zo.weight)?Z.wma.weight:Z.weight:null;if(Number.isFinite(ge)&&Number.isFinite(B)){const gn=Math.abs(ge-Wt),Fi=tt==="cut"?ge-B:B-ge,Fs=Ub(Fi,0,gn||1),Pd=gn>0?Fs/gn*100:0;hi={startWeight:ge,totalNeeded:gn,progress:Fs,pct:Ub(Pd,0,100)}}}const Q=(e==null?void 0:e.weeks)||[],Lt=Q.length>=2?(pc=Q[Q.length-2])==null?void 0:pc.tdee:null,Cn=oB({cycle:tt,hasCycleTarget:kn,currentAvgCal:H,currentProtein:ue,proteinPerKg:Ye,targetProtein2g:pn,currentWeight:B,targetWeight:Wt,weightToGoal:xt,directionToGoal:nn,derivedLen:x,daysLogged:G,daysRemaining:Ke,hasNavyAny:st,hasNavyInWindow:tn,weightTrend:O,bfTrend:C,strengthTrend:Y,lossRate:xe,calculatedTdee:V,baselineTdee:L,adaptationPct:W,strengthDeclinePct:ae,weeklyWeightChange:q,weeklyWeightLoss:X,prevWeekTdee:Lt});return{rangeDays:r,status:Cn,cycle:tt,cycleBadge:tB(tt),weightTrend:O,bfTrend:C,strengthTrend:Y,currentAvgCal:H,currentProtein:ue,currentWeight:B,targetWeight:Wt,weightToGoal:xt,goalProgress:hi,calculatedTdee:V,baselineTdee:L,adaptationPct:W,daysLogged:G,hasNavyAny:st,hasNavyInWindow:tn,proteinPerKg:Ye,targetProtein2g:pn,lossRate:xe,weeklyWeightChange:q}},[t,e,i,r]),{status:c}=l,h=(c==null?void 0:c.level)||"gray",d=((c==null?void 0:c.warnings)||[]).length>0&&h==="green";return g.jsxs("div",{className:`status-banner level-${h}${d?" has-accent":""}`,children:[g.jsxs("div",{className:"status-left",children:[g.jsxs("div",{className:"status-topline",children:[g.jsxs("div",{className:"status-title",children:[g.jsx("span",{style:{marginRight:8},children:c.emoji}),c.title]}),g.jsx("div",{className:sB(l.cycle),children:l.cycleBadge})]}),g.jsx("div",{className:"status-message",children:c.message}),g.jsxs("div",{className:"status-trends",children:[g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Weight"}),g.jsx("span",{className:"trend-v",children:l.weightTrend.sym}),g.jsx("span",{className:"trend-n",children:Number.isFinite(l.weightTrend.value)?`${pe(l.weightTrend.value,1)} kg/wk`:""})]}),g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Body fat"}),g.jsx("span",{className:"trend-v",children:l.bfTrend.sym}),g.jsx("span",{className:"trend-n",children:Number.isFinite(l.bfTrend.value)?`${pe(l.bfTrend.value,1)} %`:""})]}),g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Strength"}),g.jsx("span",{className:"trend-v",children:l.strengthTrend.sym}),g.jsx("span",{className:"trend-n",children:Number.isFinite(l.strengthTrend.value)?`${pe(l.strengthTrend.value,1)} %`:""})]}),Number.isFinite(l.currentAvgCal)&&g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Avg cal"}),g.jsx("span",{className:"trend-v",children:""}),g.jsxs("span",{className:"trend-n",children:[Math.round(l.currentAvgCal)," /day"]})]}),Number.isFinite(l.proteinPerKg)&&g.jsxs("div",{className:"trend-item",children:[g.jsx("span",{className:"trend-k",children:"Protein"}),g.jsx("span",{className:"trend-v",children:""}),g.jsxs("span",{className:"trend-n",children:[pe(l.proteinPerKg,1)," g/kg"]})]})]}),l.goalProgress&&g.jsxs("div",{className:"status-goal",children:[g.jsxs("div",{className:"status-goal-text",children:["Goal: ",pe(l.targetWeight,1),"kg  Progress: ",pe(l.goalProgress.progress,1)," / ",pe(l.goalProgress.totalNeeded,1),"kg"]}),g.jsx("div",{className:"progress",children:g.jsx("div",{className:"progress-bar",style:{width:`${l.goalProgress.pct}%`}})})]}),!!((f=c.warnings)!=null&&f.length)&&g.jsx("div",{className:"status-warnings",children:c.warnings.map((v,x)=>g.jsx("div",{className:"status-warning",children:v},x))}),!!((m=c.notes)!=null&&m.length)&&g.jsx("div",{className:"status-notes",children:c.notes.map((v,x)=>g.jsx("div",{className:"status-note",children:v},x))})]}),g.jsxs("div",{className:"status-right",children:[g.jsxs("div",{className:"status-controls",children:[g.jsxs("select",{value:String(r),onChange:v=>s(Number(v.target.value)),children:[g.jsx("option",{value:"7",children:"Last 7 days"}),g.jsx("option",{value:"14",children:"Last 14 days"}),g.jsx("option",{value:"30",children:"Last 30 days"})]}),g.jsx("button",{className:"btn small icon",type:"button",onClick:()=>a(!0),"aria-label":"How status is determined",children:""})]}),Number.isFinite(l.calculatedTdee)&&Number.isFinite(l.baselineTdee)&&g.jsxs("div",{className:"status-mini",children:[g.jsx("div",{className:"muted",children:"TDEE"}),g.jsxs("div",{className:"mini-row",children:[g.jsxs("span",{children:[Math.round(l.baselineTdee),"  ",Math.round(l.calculatedTdee)," cal"]}),Number.isFinite(l.adaptationPct)&&g.jsxs("span",{className:"muted",children:["(",pe(l.adaptationPct,1),"%)"]})]})]}),l.hasNavyAny&&!l.hasNavyInWindow&&g.jsxs("div",{className:"status-mini",children:[g.jsx("div",{className:"muted",children:"Body fat"}),g.jsx("div",{className:"mini-row",children:g.jsx("span",{children:"Take measurements in this period"})})]})]}),o&&g.jsx("div",{className:"modal-backdrop",onClick:()=>a(!1),children:g.jsxs("div",{className:"modal",onClick:v=>v.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("div",{className:"modal-title",children:"How this status is determined"}),g.jsx("button",{className:"btn small",type:"button",onClick:()=>a(!1),children:"Close"})]}),g.jsxs("div",{className:"modal-body",children:[g.jsx("p",{className:"muted",children:"Status compares the selected period to the previous period of the same length. Weight uses smoothed trend; calories & protein use raw averages."}),g.jsxs("div",{className:"modal-grid",children:[g.jsxs("div",{children:[g.jsx("div",{className:"modal-subtitle",children:"Weight trend (kg/week)"}),g.jsxs("ul",{className:"modal-list",children:[g.jsx("li",{children:"Stable: 0.2 or less"}),g.jsx("li",{children:"Losing/Gaining: > 0.2"}),g.jsx("li",{children:"Rapid loss/gain: > 1.0"})]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"modal-subtitle",children:"Body fat trend (% points)"}),g.jsxs("ul",{className:"modal-list",children:[g.jsx("li",{children:"Stable: 0.5 or less"}),g.jsx("li",{children:"Decreasing/Increasing: > 0.5"})]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"modal-subtitle",children:"Strength trend (% change)"}),g.jsxs("ul",{className:"modal-list",children:[g.jsx("li",{children:"Stable: 2% or less"}),g.jsx("li",{children:"Increasing: > 2%"}),g.jsx("li",{children:"Declining: < -2%"}),g.jsx("li",{children:"Rapid decline: < -5%"})]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"modal-subtitle",children:"Cycle expectations"}),g.jsxs("ul",{className:"modal-list",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Cutting:"})," Weight , Body fat , Strength "]}),g.jsxs("li",{children:[g.jsx("b",{children:"Bulking:"})," Weight , Strength , Body fat /slight "]}),g.jsxs("li",{children:[g.jsx("b",{children:"Maintaining:"})," Weight , Strength /, Body fat /"]})]})]})]}),g.jsx("p",{className:"muted",style:{marginTop:12},children:"Recommendations use your logged averages and calculated TDEE. If you skip logs (or measurements), the banner will fall back to fewer signals and ask for more data."})]})]})})]})}function lB(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function cB(t){if(!t||typeof t!="string")return"";const e=t.split("-");if(e.length!==3)return t;const[n,i,r]=e;return`${r}/${i}/${n}`}function Wi(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function Vk({view:t="dashboard"}){const e=Wo(),{user:n}=ui(),{profile:i}=Id(),r=Array.isArray(i==null?void 0:i.liftNames)&&i.liftNames.length===3?i.liftNames:["Bench Press","Squat","Deadlift"],[s,o]=M.useState([]),a=Array.isArray(i==null?void 0:i.cycles)?i.cycles:[],[l,c]=M.useState(null),[h,d]=M.useState(()=>{try{return localStorage.getItem("brt_demoScenario")||"cutting_optimal"}catch{return"cutting_optimal"}});M.useEffect(()=>{if(!n)try{localStorage.setItem("brt_demoScenario",h)}catch{}},[h,n]),M.useEffect(()=>{if(c(null),!n)return;const w=ky(n.uid,_=>o(_),_=>c((_==null?void 0:_.message)||"Failed to load entries."));return()=>w()},[n]);const f=M.useMemo(()=>Bj(h),[h]),m=M.useMemo(()=>$j(84,h),[h]),v=M.useMemo(()=>zj(m,h),[m,h]),x=n?i:f,b=n?s:m,T=n?a:v,E=M.useMemo(()=>{if(!(T!=null&&T.length))return null;const w=Ah(),_=T.find(C=>!C.endDateIso);return _||T.find(C=>(C.startDateIso||"")<=w&&(C.endDateIso||"")>=w)||null},[T]);function S(){if(!n){e("/signup");return}e("/profile#cycles")}const N=M.useMemo(()=>JS(b,x||{}),[b,x]),D=M.useMemo(()=>Mj(N),[N]),O=M.useMemo(()=>{var B;if(!N.length)return null;const w=N[0],_=N[N.length-1],I=(B=_==null?void 0:_.wma)==null?void 0:B.weight,C=Number.isFinite(w.weight)&&Number.isFinite(_.weight)?_.weight-w.weight:null,A=_.calories,R=w.calories,P=Number.isFinite(A)&&Number.isFinite(R)?A-R:null,Y=_.avgStrength,H=w.avgStrength,ue=Number.isFinite(Y)&&Number.isFinite(H)?Y-H:null;let re=null;for(let q=N.length-1;q>=0;q--)if(Number.isFinite(N[q].bfPct)){re=N[q].bfPct;break}return{weightTrend:I,totalLost:C,calNow:A,calDelta:P,strengthNow:Y,strengthDelta:ue,bf:re}},[N]);return g.jsxs(g.Fragment,{children:[!n&&g.jsx("div",{className:"notice info",style:{marginTop:14},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[g.jsxs("div",{children:[g.jsx("b",{children:"Demo mode:"})," This dashboard is showing ~12 weeks of realistic sample data. Log in to start tracking your own."]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[g.jsx("span",{className:"muted",children:"Scenario"}),g.jsx("select",{className:"input",value:h,onChange:w=>d(w.target.value),style:{height:32,padding:"0 10px",maxWidth:260},children:Oj.map(w=>g.jsx("option",{value:w.id,children:w.label},w.id))})]})]})}),n&&(!(x!=null&&x.sex)||!(x!=null&&x.height))&&g.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",g.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),l&&g.jsx("div",{className:"notice error",style:{marginTop:14},children:l}),t==="insights"&&g.jsxs(g.Fragment,{children:[g.jsx(aB,{derived:N,weekly:D,profile:x,currentCycle:E}),g.jsx(Z5,{derived:N,weekly:D,profile:x||{},currentCycle:E})]}),g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Summary"}),g.jsx("button",{className:"btn",type:"button",onClick:S,style:{textTransform:"none"},children:E?`${lB(E.type)}${E.startDateIso?` since ${cB(E.startDateIso)}`:""}`:"Create new cycle"})]}),!O||!N.length?g.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",g.jsx("b",{children:"Entry"}),"."]}):g.jsxs("div",{className:"grid",style:{marginTop:12},children:[g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),g.jsxs("div",{className:"big",children:[Wi(O.weightTrend,1)," kg"]}),g.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Total weight change"}),g.jsxs("div",{className:"big",children:[Wi(O.totalLost,1)," kg"]}),g.jsx("div",{className:"small",children:"Negative = loss"})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Calories now / change from start"}),g.jsxs("div",{className:"big",children:[Wi(O.calNow,0)," kcal"]}),g.jsxs("div",{className:"small",children:[" ",Wi(O.calDelta,0)," kcal"]})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Average strength now"}),g.jsxs("div",{className:"big",children:[Wi(O.strengthNow,1)," kg"]}),g.jsxs("div",{className:"small",children:[" ",Wi(O.strengthDelta,1)," kg"]})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),g.jsx("div",{className:"big",children:O.bf===null?"":`${Wi(O.bf,1)}%`}),g.jsx("div",{className:"small",children:"Most recent measurement day"})]}),g.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[g.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),g.jsx("div",{className:"big",children:Number.isFinite(D.baselineTdee)?`${Wi(D.baselineTdee,0)} kcal`:""}),g.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),N.length>0&&g.jsxs("div",{className:"grid",style:{marginTop:14},children:[g.jsx("div",{style:{gridColumn:"span 12"},children:g.jsx(q5,{derived:N})}),g.jsx("div",{style:{gridColumn:"span 12"},children:g.jsx(K5,{derived:N,liftNames:r})}),g.jsx("div",{style:{gridColumn:"span 12"},children:g.jsx(G5,{derived:N})})]}),N.length>=14&&g.jsx(X5,{weekly:D})]})}function uB(){return g.jsx(Vk,{view:"insights"})}function hB(){const{user:t,login:e,authError:n,clearAuthError:i}=ui(),r=Wo(),s=Lr(),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,d]=M.useState(!1),[f,m]=M.useState(null);M.useEffect(()=>{i==null||i()},[]),M.useEffect(()=>{t&&r("/dashboard")},[t]);async function v(x){var b;x.preventDefault(),m(null),d(!0);try{await e(o.trim(),l);const T=((b=s.state)==null?void 0:b.from)||"/dashboard";r(T)}catch{}finally{d(!1)}}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Log in"}),g.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&g.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&g.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),g.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Email"}),g.jsx("input",{value:o,onChange:x=>a(x.target.value),type:"email",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Password"}),g.jsx("input",{value:l,onChange:x=>c(x.target.value),type:"password",required:!0})]})]}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),g.jsx(Al,{className:"btn",to:"/reset-password",children:"Forgot password"}),g.jsx(Al,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function dB(){const{signup:t,authError:e,clearAuthError:n}=ui(),i=Wo(),[r,s]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState(""),[h,d]=M.useState(!1),[f,m]=M.useState(null);M.useEffect(()=>{n==null||n()},[]);async function v(x){if(x.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Create account"}),g.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&g.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&g.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),g.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Email"}),g.jsx("input",{value:r,onChange:x=>s(x.target.value),type:"email",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Password"}),g.jsx("input",{value:o,onChange:x=>a(x.target.value),type:"password",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Confirm password"}),g.jsx("input",{value:l,onChange:x=>c(x.target.value),type:"password",required:!0})]})]}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),g.jsx(Al,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function fB(){const{resetPassword:t,authError:e,clearAuthError:n}=ui(),[i,r]=M.useState(""),[s,o]=M.useState(!1),[a,l]=M.useState(!1);M.useEffect(()=>{n==null||n()},[]);async function c(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Reset password"}),g.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&g.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&g.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),g.jsxs("form",{onSubmit:c,style:{marginTop:12},children:[g.jsx("div",{className:"row",children:g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Email"}),g.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),g.jsx(Al,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function pB(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function gB(t,e){const n=e.map(o=>o.map(pB).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function mB({entries:t,derived:e}){var s,o,a,l,c,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchLoadKg","benchReps","bench1rmKg","squatLoadKg","squatReps","squat1rmKg","deadliftLoadKg","deadliftReps","deadlift1rmKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.benchLoad,d.benchReps,d.bench,d.squatLoad,d.squatReps,d.squat,d.deadliftLoad,d.deadliftReps,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(c=f==null?void 0:f.wma)==null?void 0:c.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}function Uk(t){return["cutting","bulking","maintaining","cut","bulk","maintain"].includes(t)}function Bk(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function zk(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:Bk(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).filter(e=>Uk(e.type)).sort((e,n)=>String(e.startDateIso||"").localeCompare(String(n.startDateIso||""))):[]}function yB(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}async function _B(t,{type:e,startDateIso:n,targetWeightKg:i}){if(!t)throw new Error("Not authenticated");if(!Uk(e))throw new Error("Invalid cycle type");if(e=Bk(e),!n)throw new Error("Start date is required");let r=null;if((e==="cutting"||e==="bulking")&&(r=Number(i),!Number.isFinite(r)||r<=0))throw new Error("Cycle target weight must be a positive number (kg).");const s=Cr(en,"users",t);await xS(en,async o=>{const a=await o.get(s);if(!a.exists())throw new Error("Profile not found. Please refresh and try again.");const l=a.data()||{},h=zk(l.cycles).map(f=>({...f})),d=h.findIndex(f=>f.endDateIso===null);if(d>=0){const f=h[d];let m=xj(n,-1);f.startDateIso&&m<f.startDateIso&&(m=f.startDateIso),h[d]={...f,endDateIso:m}}h.push({id:yB(),type:e,startDateIso:n,endDateIso:null,targetWeightKg:r}),o.update(s,{cycles:h,updatedAt:dc()})})}async function vB(t,e,n){if(!t)throw new Error("Not authenticated");if(!e)throw new Error("cycleId is required");if(!n)throw new Error("End date is required");const i=Cr(en,"users",t);await xS(en,async r=>{const s=await r.get(i);if(!s.exists())throw new Error("Profile not found. Please refresh and try again.");const o=s.data()||{},a=zk(o.cycles),l=a.findIndex(h=>h.id===e);if(l<0)throw new Error("Cycle not found.");const c=a.map(h=>({...h}));c[l]={...c[l],endDateIso:n},r.update(i,{cycles:c,updatedAt:dc()})})}const Hs=["Bench Press","Squat","Deadlift"];function Hf(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function wB(){const{user:t}=ui(),e=Lr(),{profile:n,updateProfile:i,loading:r,profileError:s}=Id(),[o,a]=M.useState(n.sex||""),[l,c]=M.useState(n.height||""),[h,d]=M.useState(!!n.triplemeasurements),f=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Hs,[m,v]=M.useState(f[0]),[x,b]=M.useState(f[1]),[T,E]=M.useState(f[2]),S=M.useMemo(()=>[m,x,T].map((de,Ke)=>String(de||"").trim()||Hs[Ke]),[m,x,T]),[N,D]=M.useState(!1),[O,w]=M.useState(null),[_,I]=M.useState(""),[C,A]=M.useState(""),[R,P]=M.useState(""),Y=M.useMemo(()=>Array.isArray(n.cycles)?[...n.cycles].sort((G,de)=>String(de.startDateIso||"").localeCompare(String(G.startDateIso||""))):[],[n.cycles]),[H,ue]=M.useState("cutting"),[re,B]=M.useState(Ah()),[q,X]=M.useState("");M.useEffect(()=>{H==="maintaining"&&X("")},[H]);const V=M.useMemo(()=>Y.find(G=>!G.endDateIso)||null,[Y]),[L,W]=M.useState([]),[ee,ae]=M.useState(!1);M.useEffect(()=>{a(n.sex||""),c(n.height||""),d(!!n.triplemeasurements);const G=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Hs;v(G[0]),b(G[1]),E(G[2])},[n.sex,n.height,n.triplemeasurements,n.liftNames]),M.useEffect(()=>{(e==null?void 0:e.hash)==="#cycles"&&setTimeout(()=>{var G;(G=document.getElementById("cycles"))==null||G.scrollIntoView({behavior:"smooth",block:"start"})},50)},[e==null?void 0:e.hash]);async function ne(G){G.preventDefault(),w(null),D(!0);try{const de=Number(l);if(!o)throw new Error("Sex is required.");if(!Number.isFinite(de)||de<=0)throw new Error("Height must be a positive number (cm).");await i({sex:o,height:de,triplemeasurements:!!h,liftNames:S}),w({type:"success",text:"Profile saved."})}catch(de){w({type:"error",text:(de==null?void 0:de.message)||"Failed to save profile."})}finally{D(!1)}}async function xe(G){var de;G.preventDefault(),w(null),D(!0);try{if(!H)throw new Error("Pick a cycle type.");if(!re)throw new Error("Pick a start date.");const st=(de=[...await Be()||[]].reverse().find(tt=>Number.isFinite(Number(tt==null?void 0:tt.weight))))==null?void 0:de.weight;if(H==="cutting"||H==="bulking"){const tt=Number(q);if(!Number.isFinite(tt)||tt<=0)throw new Error("Enter a valid target weight (kg).");if(Number.isFinite(Number(st))){if(H==="cutting"&&tt>=Number(st))throw new Error("For a cutting cycle, target weight must be lower than your current weight.");if(H==="bulking"&&tt<=Number(st))throw new Error("For a bulking cycle, target weight must be higher than your current weight.")}}const tn=H==="cutting"||H==="bulking"?Number(q):null;await _B(t.uid,{type:H,startDateIso:re,targetWeightKg:tn}),X(""),w({type:"success",text:`Cycle started: ${Hf(H)}.`})}catch(Ke){w({type:"error",text:(Ke==null?void 0:Ke.message)||"Failed to start cycle."})}finally{D(!1)}}async function Ye(G){w(null),D(!0);try{await vB(t.uid,G,Ah()),w({type:"success",text:"Cycle ended."})}catch(de){w({type:"error",text:(de==null?void 0:de.message)||"Failed to end cycle."})}finally{D(!1)}}async function pn(G){if(G.preventDefault(),w(null),!!(t!=null&&t.email)){if(C!==R){w({type:"error",text:"New passwords do not match."});return}D(!0);try{const de=Ns.credential(t.email,_);await TD(t,de),await kD(t,C),I(""),A(""),P(""),w({type:"success",text:"Password updated."})}catch(de){w({type:"error",text:(de==null?void 0:de.message)||"Failed to update password."})}finally{D(!1)}}}async function Be(){return ee?L:new Promise((G,de)=>{const Ke=ky(t.uid,st=>{W(st),ae(!0),Ke(),G(st)},st=>{de(st)})})}async function et(){w(null),D(!0);try{await Be();const G=JS(L,{...n,sex:o,height:Number(l),triplemeasurements:!!h}),de=mB({entries:L,derived:G}),Ke=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;gB(Ke,de),w({type:"success",text:"CSV downloaded."})}catch(G){w({type:"error",text:(G==null?void 0:G.message)||"Failed to export CSV."})}finally{D(!1)}}return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Profile & Settings"}),g.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),s&&g.jsx("div",{className:"notice error",style:{marginTop:12},children:s}),O&&g.jsx("div",{className:`notice ${O.type==="error"?"error":"success"}`,style:{marginTop:12},children:O.text}),g.jsxs("form",{onSubmit:ne,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Sex (required for Navy BF%)"}),g.jsxs("select",{value:o,onChange:G=>a(G.target.value),required:!0,children:[g.jsx("option",{value:"",children:"Select"}),g.jsx("option",{value:"male",children:"Male"}),g.jsx("option",{value:"female",children:"Female"})]})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Height (cm)"}),g.jsx("input",{inputMode:"numeric",value:l,onChange:G=>c(G.target.value),placeholder:"e.g. 175",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Triple measurements mode"}),g.jsxs("select",{value:h?"1":"0",onChange:G=>d(G.target.value==="1"),children:[g.jsx("option",{value:"0",children:"Off (single value per site)"}),g.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),g.jsxs("div",{className:"grid",style:{marginTop:12},children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Lift 1 name"}),g.jsx("input",{value:m,onChange:G=>v(G.target.value),placeholder:Hs[0]})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Lift 2 name"}),g.jsx("input",{value:x,onChange:G=>b(G.target.value),placeholder:Hs[1]})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Lift 3 name"}),g.jsx("input",{value:T,onChange:G=>E(G.target.value),placeholder:Hs[2]})]})]}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:N||r,children:N?"Saving":"Save profile"}),g.jsx("button",{className:"btn",type:"button",onClick:et,disabled:N,children:"Export CSV"})]})]})]}),g.jsxs("div",{className:"panel",id:"cycles",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Cycles"}),g.jsx("div",{className:"muted",children:"Cutting / Bulking / Maintaining  track your phases over time."})]}),g.jsxs("form",{onSubmit:xe,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Cycle type"}),g.jsxs("select",{value:H,onChange:G=>ue(G.target.value),children:[g.jsx("option",{value:"cutting",children:"Cutting"}),g.jsx("option",{value:"bulking",children:"Bulking"}),g.jsx("option",{value:"maintaining",children:"Maintaining"})]})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Start date"}),g.jsx("input",{type:"date",value:re,onChange:G=>B(G.target.value)})]}),(H==="cutting"||H==="bulking")&&g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Target weight (kg)"}),g.jsx("input",{inputMode:"decimal",value:q,onChange:G=>X(G.target.value),placeholder:"e.g. 82.0"})]}),g.jsxs("div",{className:"field",style:{minWidth:220},children:[g.jsx("label",{children:"Current"}),g.jsx("input",{value:V?`${Hf(V.type)} (since ${V.startDateIso})${(V.type==="cutting"||V.type==="bulking")&&Number.isFinite(Number(V.targetWeightKg))?`  target ${Number(V.targetWeightKg).toFixed(1)}kg`:""}`:"No active cycle",readOnly:!0})]})]}),g.jsxs("div",{className:"footer-actions",children:[g.jsx("button",{className:"btn primary",disabled:N,children:V?"Start new cycle (ends current)":"Start cycle"}),V&&g.jsx("button",{className:"btn",type:"button",onClick:()=>Ye(V.id),disabled:N,children:"End current cycle (today)"})]})]}),g.jsx("hr",{className:"sep"}),g.jsx("div",{className:"table-wrap",children:g.jsxs("table",{className:"table",style:{minWidth:760},children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Type"}),g.jsx("th",{children:"Target (kg)"}),g.jsx("th",{children:"Began"}),g.jsx("th",{children:"Ended"}),g.jsx("th",{children:"Status"}),g.jsx("th",{children:"Actions"})]})}),g.jsx("tbody",{children:Y.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:6,className:"muted",children:"No cycles yet. Start one above."})}):Y.map(G=>{const de=!G.endDateIso;return g.jsxs("tr",{children:[g.jsx("td",{children:g.jsx("b",{children:Hf(G.type)})}),g.jsx("td",{children:(G.type==="cutting"||G.type==="bulking")&&Number.isFinite(Number(G.targetWeightKg))?Number(G.targetWeightKg).toFixed(1):""}),g.jsx("td",{children:G.startDateIso||""}),g.jsx("td",{children:G.endDateIso||""}),g.jsx("td",{children:de?g.jsx("span",{className:"text-green strong",children:"Active"}):g.jsx("span",{className:"muted",children:"Ended"})}),g.jsx("td",{children:de?g.jsx("button",{className:"btn",type:"button",onClick:()=>Ye(G.id),disabled:N,children:"End today"}):g.jsx("span",{className:"muted",children:""})})]},G.id)})})]})})]}),g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Change Password"}),g.jsx("div",{className:"muted",children:"Re-auth required."})]}),g.jsxs("form",{onSubmit:pn,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Current password"}),g.jsx("input",{type:"password",value:_,onChange:G=>I(G.target.value),required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"New password"}),g.jsx("input",{type:"password",value:C,onChange:G=>A(G.target.value),required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Confirm new password"}),g.jsx("input",{type:"password",value:R,onChange:G=>P(G.target.value),required:!0})]})]}),g.jsx("div",{className:"footer-actions",children:g.jsx("button",{className:"btn primary",disabled:N,children:"Update password"})})]})]})]})}function jt(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function bB({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:r}){const s=String(t||"").toLowerCase()==="female",[o,a]=M.useState(Ah()),[l,c]=M.useState(""),[h,d]=M.useState(""),[f,m]=M.useState(""),[v,x]=M.useState(""),[b,T]=M.useState(""),[E,S]=M.useState(""),[N,D]=M.useState(""),[O,w]=M.useState(""),[_,I]=M.useState(""),[C,A]=M.useState(""),[R,P]=M.useState(""),[Y,H]=M.useState(""),[ue,re]=M.useState(""),[B,q]=M.useState(""),[X,V]=M.useState(""),[L,W]=M.useState(""),[ee,ae]=M.useState(""),[ne,xe]=M.useState(""),[Ye,pn]=M.useState(""),[Be,et]=M.useState(""),[G,de]=M.useState(""),[Ke,st]=M.useState(""),tn=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],tt=M.useMemo(()=>{const Q=XS({protein:jt(h)||0,carbs:jt(f)||0,fats:jt(v)||0});return Number.isFinite(Q)?Math.round(Q):0},[h,f,v]),kn=M.useMemo(()=>Zr(jt(b),jt(E)),[b,E]),Wt=M.useMemo(()=>Zr(jt(N),jt(O)),[N,O]),xt=M.useMemo(()=>Zr(jt(_),jt(C)),[_,C]),nn=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f))&&Number.isFinite(Number(v));async function hi(Q){if(Q.preventDefault(),!nn())return;const Lt=Zr(jt(b),jt(E)),Cn=Zr(jt(N),jt(O)),Ve=Zr(jt(_),jt(C)),ve={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(f),fats:Number(v),benchLoad:b===""?null:Number(b),benchReps:E===""?null:Number(E),squatLoad:N===""?null:Number(N),squatReps:O===""?null:Number(O),deadliftLoad:_===""?null:Number(_),deadliftReps:C===""?null:Number(C),bench:Number.isFinite(Lt)?Math.round(Lt*10)/10:null,squat:Number.isFinite(Cn)?Math.round(Cn*10)/10:null,deadlift:Number.isFinite(Ve)?Math.round(Ve*10)/10:null};e?(ve.neck1=B===""?null:Number(B),ve.neck2=X===""?null:Number(X),ve.neck3=L===""?null:Number(L),ve.waist1=ee===""?null:Number(ee),ve.waist2=ne===""?null:Number(ne),ve.waist3=Ye===""?null:Number(Ye),ve.hip1=s?Be===""?null:Number(Be):null,ve.hip2=s?G===""?null:Number(G):null,ve.hip3=s?Ke===""?null:Number(Ke):null):(ve.neck=R===""?null:Number(R),ve.waist=Y===""?null:Number(Y),ve.hip=s?ue===""?null:Number(ue):null),await i(ve)}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"Daily Entry"}),g.jsxs("div",{className:"muted",children:["Calories preview: ",g.jsx("b",{children:tt})," kcal"]})]}),g.jsxs("form",{onSubmit:hi,style:{marginTop:12},children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Date"}),g.jsx("input",{type:"date",value:o,onChange:Q=>a(Q.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Weight (kg)"}),g.jsx("input",{inputMode:"decimal",value:l,onChange:Q=>c(Q.target.value),placeholder:"e.g. 85.2",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Protein (g)"}),g.jsx("input",{inputMode:"numeric",value:h,onChange:Q=>d(Q.target.value),placeholder:"e.g. 180"})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Carbs (g)"}),g.jsx("input",{inputMode:"numeric",value:f,onChange:Q=>m(Q.target.value),placeholder:"e.g. 220",required:!0})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Fats (g)"}),g.jsx("input",{inputMode:"numeric",value:v,onChange:Q=>x(Q.target.value),placeholder:"e.g. 70",required:!0})]})]}),g.jsx("hr",{className:"sep"}),g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsxs("label",{children:[tn[0]," ",g.jsx("span",{className:"muted",children:"(optional)"})]}),g.jsxs("div",{className:"inline2",children:[g.jsx("input",{inputMode:"decimal",value:b,onChange:Q=>T(Q.target.value),placeholder:"Load (kg)"}),g.jsx("input",{inputMode:"numeric",value:E,onChange:Q=>S(Q.target.value),placeholder:"Reps"})]}),g.jsxs("div",{className:"muted small",children:["Est. 1RM: ",g.jsx("b",{children:Number.isFinite(kn)?Math.round(kn*10)/10:""})," kg"]})]}),g.jsxs("div",{className:"field",children:[g.jsxs("label",{children:[tn[1]," ",g.jsx("span",{className:"muted",children:"(optional)"})]}),g.jsxs("div",{className:"inline2",children:[g.jsx("input",{inputMode:"decimal",value:N,onChange:Q=>D(Q.target.value),placeholder:"Load (kg)"}),g.jsx("input",{inputMode:"numeric",value:O,onChange:Q=>w(Q.target.value),placeholder:"Reps"})]}),g.jsxs("div",{className:"muted small",children:["Est. 1RM: ",g.jsx("b",{children:Number.isFinite(Wt)?Math.round(Wt*10)/10:""})," kg"]})]}),g.jsxs("div",{className:"field",children:[g.jsxs("label",{children:[tn[2]," ",g.jsx("span",{className:"muted",children:"(optional)"})]}),g.jsxs("div",{className:"inline2",children:[g.jsx("input",{inputMode:"decimal",value:_,onChange:Q=>I(Q.target.value),placeholder:"Load (kg)"}),g.jsx("input",{inputMode:"numeric",value:C,onChange:Q=>A(Q.target.value),placeholder:"Reps"})]}),g.jsxs("div",{className:"muted small",children:["Est. 1RM: ",g.jsx("b",{children:Number.isFinite(xt)?Math.round(xt*10)/10:""})," kg"]})]})]}),g.jsx("div",{className:"muted small",style:{marginTop:6},children:"Enter both load + reps to calculate 1RM. If left blank, strength trends will carry forward the last known value."}),g.jsx("hr",{className:"sep"}),g.jsxs("div",{className:"notice info",children:[g.jsx("b",{children:"Navy measurements (weekly)"}),g.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",s?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),g.jsx("div",{style:{height:10}}),e?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Neck 1 (cm)"}),g.jsx("input",{inputMode:"decimal",value:B,onChange:Q=>q(Q.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Neck 2 (cm)"}),g.jsx("input",{inputMode:"decimal",value:X,onChange:Q=>V(Q.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Neck 3 (cm)"}),g.jsx("input",{inputMode:"decimal",value:L,onChange:Q=>W(Q.target.value)})]})]}),g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Waist 1 (cm)"}),g.jsx("input",{inputMode:"decimal",value:ee,onChange:Q=>ae(Q.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Waist 2 (cm)"}),g.jsx("input",{inputMode:"decimal",value:ne,onChange:Q=>xe(Q.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Waist 3 (cm)"}),g.jsx("input",{inputMode:"decimal",value:Ye,onChange:Q=>pn(Q.target.value)})]})]}),s?g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Hip 1 (cm)"}),g.jsx("input",{inputMode:"decimal",value:Be,onChange:Q=>et(Q.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Hip 2 (cm)"}),g.jsx("input",{inputMode:"decimal",value:G,onChange:Q=>de(Q.target.value)})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Hip 3 (cm)"}),g.jsx("input",{inputMode:"decimal",value:Ke,onChange:Q=>st(Q.target.value)})]})]}):null]}):g.jsxs("div",{className:"row",children:[g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Neck (cm)"}),g.jsx("input",{inputMode:"decimal",value:R,onChange:Q=>P(Q.target.value),placeholder:"optional"})]}),g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Waist (cm)"}),g.jsx("input",{inputMode:"decimal",value:Y,onChange:Q=>H(Q.target.value),placeholder:"optional"})]}),s?g.jsxs("div",{className:"field",children:[g.jsx("label",{children:"Hip (cm)"}),g.jsx("input",{inputMode:"decimal",value:ue,onChange:Q=>re(Q.target.value),placeholder:"optional"})]}):null]}),g.jsx("div",{className:"footer-actions",children:g.jsx("button",{className:"btn primary",type:"submit",disabled:!nn()||r,children:r?"Saving":"Add / Update Entry"})})]})]})}function EB(t,e){const n=M.useContext(li),i=n==null?void 0:n.navigator;M.useEffect(()=>{if(!t||!i||typeof i.block!="function")return;const r=i.block(s=>{window.confirm(e)&&(r(),s.retry())});return r},[i,t,e]),M.useEffect(()=>{if(!t)return;const r=s=>(s.preventDefault(),s.returnValue=e,e);return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[t,e])}function TB(t){return t==null?"":String(t)}function xB(t){if(t===""||t===null||t===void 0)return null;const e=Number(t);return Number.isFinite(e)?e:null}function hu(t,e){return`${t}::${e}`}function IB({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:r}){const[s,o]=M.useState(!1),[a,l]=M.useState(null),[c,h]=M.useState(!1),[d,f]=M.useState({}),[m,v]=M.useState({}),[x,b]=M.useState([]),[T,E]=M.useState([]),S=M.useRef({}),N=String(t||"").toLowerCase()==="female",D=Array.isArray(r)&&r.length===3?r:["Bench Press","Squat","Deadlift"],O=M.useMemo(()=>{const V=new Map;for(const L of n||[])V.set(L.dateIso,L);return V},[n]);M.useEffect(()=>{const V=new Set((n||[]).map(L=>L.dateIso));f(L=>{const W={...L};let ee=!1;for(const ae of Object.keys(W)){const[ne]=ae.split("::");V.has(ne)||(delete W[ae],ee=!0)}return ee?W:L}),v(L=>{const W={...L};let ee=!1;for(const ae of Object.keys(W)){const[ne]=ae.split("::");V.has(ne)||(delete W[ae],ee=!0)}return ee?W:L})},[n]);const w=M.useMemo(()=>{const V=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"benchLoad",label:`${D[0]} Load`},{key:"benchReps",label:`${D[0]} Reps`},{key:"squatLoad",label:`${D[1]} Load`},{key:"squatReps",label:`${D[1]} Reps`},{key:"deadliftLoad",label:`${D[2]} Load`},{key:"deadliftReps",label:`${D[2]} Reps`}];return i?(V.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),N&&V.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):(V.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),N&&V.push({key:"hip",label:"Hip"})),V.push({key:"_actions",label:"Actions",readOnly:!0}),V},[i,N,D]);function _(V,L){const W=O.get(V);return TB(W==null?void 0:W[L])}function I(V,L){const W=hu(V,L);return Object.prototype.hasOwnProperty.call(d,W)?d[W]:_(V,L)}function C(V,L,W){if(!c)return;const ee=hu(V,L),ae=_(V,L);f(ne=>{const xe={...ne};return W===ae?Object.prototype.hasOwnProperty.call(xe,ee)&&delete xe[ee]:xe[ee]=W,xe}),v(ne=>{const xe={...ne};return W===ae?Object.prototype.hasOwnProperty.call(xe,ee)&&delete xe[ee]:xe[ee]=!0,xe})}function A(V,L){const W=hu(V,L);S.current[W]=I(V,L)}function R(V,L){const W=hu(V,L),ee=S.current[W];delete S.current[W];const ae=I(V,L);ee!==void 0&&ee!==ae&&(b(ne=>[...ne,{ck:W,dateIso:V,key:L,prev:ee,next:ae}]),E([]))}function P(V,L){C(V.dateIso,V.key,L)}function Y(){c&&(l(null),b(V=>{if(V.length===0)return V;const L=[...V],W=L.pop();return P(W,W.prev),E(ee=>[...ee,W]),L}))}function H(){c&&(l(null),E(V=>{if(V.length===0)return V;const L=[...V],W=L.pop();return P(W,W.next),b(ee=>[...ee,W]),L}))}function ue(V,L){const W=Zr(V,L);return Number.isFinite(W)?Math.round(W*10)/10:null}async function re(){const V=Object.keys(m||{});if(V.length!==0){l(null),o(!0);try{const L={};for(const ee of V){const[ae,ne]=ee.split("::"),xe=I(ae,ne),Ye=xB(xe);L[ae]||(L[ae]={}),L[ae][ne]=Ye}for(const ee of Object.keys(L)){const ae=O.get(ee)||{},ne=L[ee],xe=Object.prototype.hasOwnProperty.call(ne,"benchLoad")||Object.prototype.hasOwnProperty.call(ne,"benchReps"),Ye=Object.prototype.hasOwnProperty.call(ne,"squatLoad")||Object.prototype.hasOwnProperty.call(ne,"squatReps"),pn=Object.prototype.hasOwnProperty.call(ne,"deadliftLoad")||Object.prototype.hasOwnProperty.call(ne,"deadliftReps");if(xe){const Be=Object.prototype.hasOwnProperty.call(ne,"benchLoad")?ne.benchLoad:ae.benchLoad??null,et=Object.prototype.hasOwnProperty.call(ne,"benchReps")?ne.benchReps:ae.benchReps??null;ne.bench=ue(Be,et)}if(Ye){const Be=Object.prototype.hasOwnProperty.call(ne,"squatLoad")?ne.squatLoad:ae.squatLoad??null,et=Object.prototype.hasOwnProperty.call(ne,"squatReps")?ne.squatReps:ae.squatReps??null;ne.squat=ue(Be,et)}if(pn){const Be=Object.prototype.hasOwnProperty.call(ne,"deadliftLoad")?ne.deadliftLoad:ae.deadliftLoad??null,et=Object.prototype.hasOwnProperty.call(ne,"deadliftReps")?ne.deadliftReps:ae.deadliftReps??null;ne.deadlift=ue(Be,et)}}const W=Object.keys(L).map(ee=>({dateIso:ee,patch:L[ee]}));await kj(e,W),f({}),v({}),b([]),E([]),l({type:"success",text:"Saved changes."}),h(!1)}catch(L){l({type:"error",text:(L==null?void 0:L.message)||"Failed to save changes."})}finally{o(!1)}}}async function B(V){if(confirm(`Delete entry for ${V}?`)){l(null),o(!0);try{await Cj(e,V),f(L=>{const W={...L};for(const ee of Object.keys(W))ee.startsWith(`${V}::`)&&delete W[ee];return W}),v(L=>{const W={...L};for(const ee of Object.keys(W))ee.startsWith(`${V}::`)&&delete W[ee];return W}),l({type:"success",text:"Deleted."})}catch(L){l({type:"error",text:(L==null?void 0:L.message)||"Failed to delete."})}finally{o(!1)}}}const q=Object.keys(m||{}).length>0;EB(c&&q,"You have unsaved changes. Leave without saving?");function X(){h(!1),f({}),v({}),b([]),E([]),l(null)}return g.jsxs("div",{className:"panel",children:[g.jsxs("div",{className:"panel-header",children:[g.jsx("h2",{children:"All Entries"}),g.jsxs("div",{className:"table-actions",children:[g.jsx("button",{className:"btn icon small",onClick:Y,disabled:!c||x.length===0||s,title:"Undo","aria-label":"Undo",children:""}),g.jsx("button",{className:"btn icon small",onClick:H,disabled:!c||T.length===0||s,title:"Redo","aria-label":"Redo",children:""}),c?q?g.jsx("button",{className:"btn primary small",onClick:re,disabled:!q||s,children:s?"saving":"save"}):g.jsx("button",{className:"btn primary small",onClick:X,disabled:s,children:"cancel"}):g.jsx("button",{className:"btn primary small",onClick:()=>h(!0),disabled:s,children:"edit"})]})]}),a&&g.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:12},children:a.text}),g.jsx("div",{className:"table-wrap",style:{marginTop:12},children:g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsx("tr",{children:w.map(V=>g.jsx("th",{children:V.label},V.key))})}),g.jsx("tbody",{children:n.map(V=>g.jsx("tr",{children:w.map(L=>L.key==="_actions"?g.jsx("td",{children:g.jsx("button",{className:"btn danger",onClick:()=>B(V.dateIso),disabled:s,children:"Delete"})},L.key):L.readOnly?g.jsx("td",{children:V[L.key]},L.key):g.jsx("td",{children:c?g.jsx("input",{value:I(V.dateIso,L.key),onChange:W=>C(V.dateIso,L.key,W.target.value),onFocus:()=>A(V.dateIso,L.key),onBlur:()=>R(V.dateIso,L.key),inputMode:"decimal",disabled:s}):g.jsx("span",{children:I(V.dateIso,L.key)})},L.key))},V.dateIso))})]})})]})}function SB(){const{user:t}=ui(),{profile:e}=Id(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=M.useState([]),[s,o]=M.useState(!1),[a,l]=M.useState(null);M.useEffect(()=>{if(!t)return;const f=ky(t.uid,m=>r(m),m=>l({type:"error",text:(m==null?void 0:m.message)||"Failed to load entries."}));return()=>f()},[t]);const c=M.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function d(f){l(null),o(!0);try{await Sj(t.uid,f),l({type:"success",text:"Entry saved."})}catch(m){l({type:"error",text:(m==null?void 0:m.message)||"Failed to save entry."})}finally{o(!1)}}return g.jsxs(g.Fragment,{children:[a&&g.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),g.jsx(bB,{sex:h,tripleEnabled:c,liftNames:n,onSubmit:d,busy:s}),g.jsx(IB,{sex:h,userId:t.uid,entries:i,tripleEnabled:c,liftNames:n})]})}const kB=[{value:"user",label:"Standard"},{value:"admin",label:"Administrator"}];function CB(t){return(t==null?void 0:t.accountType)==="admin"||t!=null&&t.isAdmin?"admin":"user"}function AB(){const{user:t}=ui(),{profile:e}=Id(),[n,i]=M.useState([]),[r,s]=M.useState(!0),[o,a]=M.useState(null),[l,c]=M.useState(!1),[h,d]=M.useState({}),[f,m]=M.useState(null),[v,x]=M.useState(!1),[b,T]=M.useState(null),E=!!(e!=null&&e.isAdmin);M.useEffect(()=>{if(!t)return;s(!0),a(null);const A=WL(pS(en,"users"),HL("email","asc")),R=by(A,P=>{const Y=P.docs.map(H=>({id:H.id,...H.data()}));i(Y),s(!1)},P=>{a((P==null?void 0:P.message)||String(P)),s(!1)});return()=>R()},[t]);const S=M.useMemo(()=>{const A={};return n.forEach(R=>{A[R.id]=CB(R)}),A},[n]),N=M.useMemo(()=>{if(!l)return!1;for(const A of Object.keys(h))if(h[A]!==S[A])return!0;return!1},[h,S,l]);function D(){T(null),m(null),c(!0),d({...S})}function O(){c(!1),d({}),m(null),T(null)}async function w(){if(t){x(!0),m(null),T(null);try{const A=IS(en);let R=0;for(const P of Object.keys(h)){const Y=h[P],H=S[P];if(Y===H)continue;const ue=Cr(en,"users",P),re=Y==="admin";A.update(ue,{accountType:Y,isAdmin:re}),R+=1}R>0&&await A.commit(),T(new Date),c(!1),d({})}catch(A){m((A==null?void 0:A.message)||String(A))}finally{x(!1)}}}function _(){return l?N?w():O():D()}const I=M.useMemo(()=>l?N?v?"Saving":"Save":"Cancel":"Edit",[l,N,v]),C=M.useMemo(()=>!l||!N?!1:v,[l,N,v]);return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"panel",children:[g.jsx("h2",{style:{margin:0},children:"Administrator Panel"}),g.jsx("div",{className:"small",style:{marginTop:6},children:"Manage user account types. (Admin button is currently visible to everyone; permissions are enforced by Firestore rules.)"})]}),g.jsxs("div",{className:"card",children:[g.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[g.jsxs("div",{children:[g.jsx("div",{className:"small",children:"Signed in as"}),g.jsx("div",{style:{fontWeight:800,marginTop:2},children:(t==null?void 0:t.email)||""}),g.jsxs("div",{style:{marginTop:8},className:E?"notice success":"notice info",children:[g.jsx("b",{children:"Status:"})," ",E?"Administrator":"Standard user"]})]}),g.jsx("button",{className:"btn small",onClick:_,disabled:C,children:I})]}),o&&g.jsxs("div",{className:"notice danger",style:{marginTop:12},children:[g.jsx("b",{children:"Could not load users."}),g.jsx("div",{className:"small",style:{marginTop:6,opacity:.9},children:o}),g.jsxs("div",{className:"small",style:{marginTop:8,opacity:.9},children:["If you are the admin, set ",g.jsx("code",{children:"isAdmin"})," = ",g.jsx("code",{children:"true"})," in your own Firestore user document and make sure your Firestore rules allow admins to read ",g.jsx("code",{children:"/users"}),"."]})]}),f&&g.jsxs("div",{className:"notice danger",style:{marginTop:12},children:[g.jsx("b",{children:"Save failed."}),g.jsx("div",{className:"small",style:{marginTop:6,opacity:.9},children:f})]}),b&&g.jsxs("div",{className:"notice success",style:{marginTop:12},children:["Saved at ",b.toLocaleTimeString()]}),g.jsx("div",{style:{marginTop:14,overflowX:"auto"},children:g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Email"}),g.jsx("th",{style:{width:220},children:"Account type"})]})}),g.jsxs("tbody",{children:[r&&g.jsx("tr",{children:g.jsx("td",{colSpan:2,className:"small",children:"Loading"})}),!r&&n.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:2,className:"small",children:"No users found."})}),!r&&n.map(A=>{const R=S[A.id],P=l?h[A.id]??R:R;return g.jsxs("tr",{children:[g.jsxs("td",{children:[g.jsx("div",{style:{fontWeight:700},children:A.email||""}),g.jsx("div",{className:"small",style:{opacity:.8},children:A.id})]}),g.jsxs("td",{children:[!l&&g.jsx("span",{className:"pill",children:R==="admin"?"Administrator":"Standard"}),l&&g.jsx("select",{className:"input",value:P,onChange:Y=>d(H=>({...H,[A.id]:Y.target.value})),disabled:v,children:kB.map(Y=>g.jsx("option",{value:Y.value,children:Y.label},Y.value))})]})]},A.id)})]})]})})]})]})}function PB(){return g.jsxs(g.Fragment,{children:[g.jsx(wj,{}),g.jsx("div",{className:"app-shell",children:g.jsxs(NP,{children:[g.jsx(Nn,{path:"/",element:g.jsx(Bp,{to:"/dashboard",replace:!0})}),g.jsx(Nn,{path:"/dashboard",element:g.jsx(Vk,{})}),g.jsx(Nn,{path:"/insights",element:g.jsx(uB,{})}),g.jsx(Nn,{path:"/login",element:g.jsx(hB,{})}),g.jsx(Nn,{path:"/signup",element:g.jsx(dB,{})}),g.jsx(Nn,{path:"/reset-password",element:g.jsx(fB,{})}),g.jsx(Nn,{path:"/profile",element:g.jsx(Df,{children:g.jsx(wB,{})})}),g.jsx(Nn,{path:"/admin",element:g.jsx(Df,{children:g.jsx(AB,{})})}),g.jsx(Nn,{path:"/entry",element:g.jsx(Df,{children:g.jsx(SB,{})})}),g.jsx(Nn,{path:"*",element:g.jsx(Bp,{to:"/dashboard",replace:!0})})]})})]})}class RB extends Ag.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?g.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[g.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),g.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),g.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),g.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}qf.createRoot(document.getElementById("root")).render(g.jsx(Ag.StrictMode,{children:g.jsx(UP,{basename:"/Body-Recomp-Tracker/",children:g.jsx(vj,{children:g.jsx(Tj,{children:g.jsx(RB,{children:g.jsx(PB,{})})})})})}));
