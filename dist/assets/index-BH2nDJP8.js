var Dk=Object.defineProperty;var Mk=(t,e,n)=>e in t?Dk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>Mk(t,typeof e!="symbol"?e+"":e,n);function Ok(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Lk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rE={exports:{}},eh={},sE={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),Vk=Symbol.for("react.portal"),Fk=Symbol.for("react.fragment"),jk=Symbol.for("react.strict_mode"),Uk=Symbol.for("react.profiler"),Bk=Symbol.for("react.provider"),zk=Symbol.for("react.context"),$k=Symbol.for("react.forward_ref"),Wk=Symbol.for("react.suspense"),Hk=Symbol.for("react.memo"),qk=Symbol.for("react.lazy"),e_=Symbol.iterator;function Kk(t){return t===null||typeof t!="object"?null:(t=e_&&t[e_]||t["@@iterator"],typeof t=="function"?t:null)}var oE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aE=Object.assign,lE={};function uo(t,e,n){this.props=t,this.context=e,this.refs=lE,this.updater=n||oE}uo.prototype.isReactComponent={};uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uE(){}uE.prototype=uo.prototype;function qp(t,e,n){this.props=t,this.context=e,this.refs=lE,this.updater=n||oE}var Kp=qp.prototype=new uE;Kp.constructor=qp;aE(Kp,uo.prototype);Kp.isPureReactComponent=!0;var t_=Array.isArray,cE=Object.prototype.hasOwnProperty,Gp={current:null},hE={key:!0,ref:!0,__self:!0,__source:!0};function dE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)cE.call(e,i)&&!hE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:fl,type:t,key:s,ref:o,props:r,_owner:Gp.current}}function Gk(t,e){return{$$typeof:fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===fl}function Qk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var n_=/\/+/g;function dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qk(""+t.key):e.toString(36)}function Pu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fl:case Vk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+dd(o,0):i,t_(r)?(n="",t!=null&&(n=t.replace(n_,"$&/")+"/"),Pu(r,e,n,"",function(u){return u})):r!=null&&(Qp(r)&&(r=Gk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(n_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",t_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+dd(s,a);o+=Pu(s,e,n,l,r)}else if(l=Kk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+dd(s,a++),o+=Pu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gl(t,e,n){if(t==null)return t;var i=[],r=0;return Pu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Yk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},Ru={transition:null},Xk={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Ru,ReactCurrentOwner:Gp};function fE(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Gl,forEach:function(t,e,n){Gl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gl(t,function(){e++}),e},toArray:function(t){return Gl(t,function(e){return e})||[]},only:function(t){if(!Qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=uo;re.Fragment=Fk;re.Profiler=Uk;re.PureComponent=qp;re.StrictMode=jk;re.Suspense=Wk;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xk;re.act=fE;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=aE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cE.call(e,l)&&!hE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:fl,type:t.type,key:r,ref:s,props:i,_owner:o}};re.createContext=function(t){return t={$$typeof:zk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bk,_context:t},t.Consumer=t};re.createElement=dE;re.createFactory=function(t){var e=dE.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:$k,render:t}};re.isValidElement=Qp;re.lazy=function(t){return{$$typeof:qk,_payload:{_status:-1,_result:t},_init:Yk}};re.memo=function(t,e){return{$$typeof:Hk,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Ru.transition;Ru.transition={};try{t()}finally{Ru.transition=e}};re.unstable_act=fE;re.useCallback=function(t,e){return xt.current.useCallback(t,e)};re.useContext=function(t){return xt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};re.useEffect=function(t,e){return xt.current.useEffect(t,e)};re.useId=function(){return xt.current.useId()};re.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return xt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};re.useRef=function(t){return xt.current.useRef(t)};re.useState=function(t){return xt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return xt.current.useTransition()};re.version="18.3.1";sE.exports=re;var O=sE.exports;const Yp=Lk(O),Jk=Ok({__proto__:null,default:Yp},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk=O,eC=Symbol.for("react.element"),tC=Symbol.for("react.fragment"),nC=Object.prototype.hasOwnProperty,iC=Zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rC={key:!0,ref:!0,__self:!0,__source:!0};function pE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)nC.call(e,i)&&!rC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:eC,type:t,key:s,ref:o,props:r,_owner:iC.current}}eh.Fragment=tC;eh.jsx=pE;eh.jsxs=pE;rE.exports=eh;var _=rE.exports,df={},gE={exports:{}},qt={},mE={exports:{}},yE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,q){var K=B.length;B.push(q);e:for(;0<K;){var he=K-1>>>1,$=B[he];if(0<r($,q))B[he]=q,B[K]=$,K=he;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var q=B[0],K=B.pop();if(K!==q){B[0]=K;e:for(var he=0,$=B.length,J=$>>>1;he<J;){var ge=2*(he+1)-1,Pe=B[ge],Re=ge+1,Ft=B[Re];if(0>r(Pe,K))Re<$&&0>r(Ft,Pe)?(B[he]=Ft,B[Re]=K,he=Re):(B[he]=Pe,B[ge]=K,he=ge);else if(Re<$&&0>r(Ft,K))B[he]=Ft,B[Re]=K,he=Re;else break e}}return q}function r(B,q){var K=B.sortIndex-q.sortIndex;return K!==0?K:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,m=!1,y=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var q=n(u);q!==null;){if(q.callback===null)i(u);else if(q.startTime<=B)i(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(u)}}function R(B){if(v=!1,b(B),!y)if(n(l)!==null)y=!0,me(M);else{var q=n(u);q!==null&&Ee(R,q.startTime-B)}}function M(B,q){y=!1,v&&(v=!1,T(w),w=-1),m=!0;var K=f;try{for(b(q),d=n(l);d!==null&&(!(d.expirationTime>q)||B&&!P());){var he=d.callback;if(typeof he=="function"){d.callback=null,f=d.priorityLevel;var $=he(d.expirationTime<=q);q=t.unstable_now(),typeof $=="function"?d.callback=$:d===n(l)&&i(l),b(q)}else i(l);d=n(l)}if(d!==null)var J=!0;else{var ge=n(u);ge!==null&&Ee(R,ge.startTime-q),J=!1}return J}finally{d=null,f=K,m=!1}}var D=!1,I=null,w=-1,k=5,C=-1;function P(){return!(t.unstable_now()-C<k)}function N(){if(I!==null){var B=t.unstable_now();C=B;var q=!0;try{q=I(!0,B)}finally{q?A():(D=!1,I=null)}}else D=!1}var A;if(typeof S=="function")A=function(){S(N)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ue=ie.port2;ie.port1.onmessage=N,A=function(){ue.postMessage(null)}}else A=function(){E(N,0)};function me(B){I=B,D||(D=!0,A())}function Ee(B,q){w=E(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,me(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var K=f;f=q;try{return B()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=f;f=B;try{return q()}finally{f=K}},t.unstable_scheduleCallback=function(B,q,K){var he=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?he+K:he):K=he,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=K+$,B={id:h++,callback:q,priorityLevel:B,startTime:K,expirationTime:$,sortIndex:-1},K>he?(B.sortIndex=K,e(u,B),n(l)===null&&B===n(u)&&(v?(T(w),w=-1):v=!0,Ee(R,K-he))):(B.sortIndex=$,e(l,B),y||m||(y=!0,me(M))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var q=f;return function(){var K=f;f=q;try{return B.apply(this,arguments)}finally{f=K}}}})(yE);mE.exports=yE;var sC=mE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC=O,Ht=sC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _E=new Set,Na={};function Qr(t,e){zs(t,e),zs(t+"Capture",e)}function zs(t,e){for(Na[t]=e,t=0;t<e.length;t++)_E.add(e[t])}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ff=Object.prototype.hasOwnProperty,aC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i_={},r_={};function lC(t){return ff.call(r_,t)?!0:ff.call(i_,t)?!1:aC.test(t)?r_[t]=!0:(i_[t]=!0,!1)}function uC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cC(t,e,n,i){if(e===null||typeof e>"u"||uC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xp=/[\-:]([a-z])/g;function Jp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xp,Jp);ot[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xp,Jp);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xp,Jp);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zp(t,e,n,i){var r=ot.hasOwnProperty(e)?ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cC(e,n,r,i)&&(n=null),i||r===null?lC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ci=oC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),_s=Symbol.for("react.portal"),vs=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),pf=Symbol.for("react.profiler"),vE=Symbol.for("react.provider"),wE=Symbol.for("react.context"),tg=Symbol.for("react.forward_ref"),gf=Symbol.for("react.suspense"),mf=Symbol.for("react.suspense_list"),ng=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),EE=Symbol.for("react.offscreen"),s_=Symbol.iterator;function Mo(t){return t===null||typeof t!="object"?null:(t=s_&&t[s_]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,fd;function Yo(t){if(fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fd=e&&e[1]||""}return`
`+fd+t}var pd=!1;function gd(t,e){if(!t||pd)return"";pd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{pd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function hC(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=gd(t.type,!1),t;case 11:return t=gd(t.type.render,!1),t;case 1:return t=gd(t.type,!0),t;default:return""}}function yf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vs:return"Fragment";case _s:return"Portal";case pf:return"Profiler";case eg:return"StrictMode";case gf:return"Suspense";case mf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wE:return(t.displayName||"Context")+".Consumer";case vE:return(t._context.displayName||"Context")+".Provider";case tg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ng:return e=t.displayName||null,e!==null?e:yf(t.type)||"Memo";case Si:e=t._payload,t=t._init;try{return yf(t(e))}catch{}}return null}function dC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yf(e);case 8:return e===eg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fC(t){var e=TE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yl(t){t._valueTracker||(t._valueTracker=fC(t))}function SE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=TE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function tc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _f(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function o_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Xi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IE(t,e){e=e.checked,e!=null&&Zp(t,"checked",e,!1)}function vf(t,e){IE(t,e);var n=Xi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&wf(t,e.type,Xi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function a_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wf(t,e,n){(e!=="number"||tc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xo=Array.isArray;function Rs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Xi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ef(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function l_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Xo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xi(n)}}function xE(t,e){var n=Xi(e.value),i=Xi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function u_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xl,kE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xl=Xl||document.createElement("div"),Xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ha={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pC=["Webkit","ms","Moz","O"];Object.keys(ha).forEach(function(t){pC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ha[e]=ha[t]})});function CE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ha.hasOwnProperty(t)&&ha[t]?(""+e).trim():e+"px"}function AE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=CE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var gC=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sf(t,e){if(e){if(gC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function If(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=null;function ig(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bf=null,Ns=null,Ds=null;function c_(t){if(t=ml(t)){if(typeof bf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=sh(e),bf(t.stateNode,t.type,e))}}function PE(t){Ns?Ds?Ds.push(t):Ds=[t]:Ns=t}function RE(){if(Ns){var t=Ns,e=Ds;if(Ds=Ns=null,c_(t),e)for(t=0;t<e.length;t++)c_(e[t])}}function NE(t,e){return t(e)}function DE(){}var md=!1;function ME(t,e,n){if(md)return t(e,n);md=!0;try{return NE(t,e,n)}finally{md=!1,(Ns!==null||Ds!==null)&&(DE(),RE())}}function Ma(t,e){var n=t.stateNode;if(n===null)return null;var i=sh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var kf=!1;if(ni)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){kf=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{kf=!1}function mC(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var da=!1,nc=null,ic=!1,Cf=null,yC={onError:function(t){da=!0,nc=t}};function _C(t,e,n,i,r,s,o,a,l){da=!1,nc=null,mC.apply(yC,arguments)}function vC(t,e,n,i,r,s,o,a,l){if(_C.apply(this,arguments),da){if(da){var u=nc;da=!1,nc=null}else throw Error(U(198));ic||(ic=!0,Cf=u)}}function Yr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function h_(t){if(Yr(t)!==t)throw Error(U(188))}function wC(t){var e=t.alternate;if(!e){if(e=Yr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return h_(r),t;if(s===i)return h_(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function LE(t){return t=wC(t),t!==null?VE(t):null}function VE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VE(t);if(e!==null)return e;t=t.sibling}return null}var FE=Ht.unstable_scheduleCallback,d_=Ht.unstable_cancelCallback,EC=Ht.unstable_shouldYield,TC=Ht.unstable_requestPaint,Ue=Ht.unstable_now,SC=Ht.unstable_getCurrentPriorityLevel,rg=Ht.unstable_ImmediatePriority,jE=Ht.unstable_UserBlockingPriority,rc=Ht.unstable_NormalPriority,IC=Ht.unstable_LowPriority,UE=Ht.unstable_IdlePriority,th=null,Cn=null;function xC(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(th,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:CC,bC=Math.log,kC=Math.LN2;function CC(t){return t>>>=0,t===0?32:31-(bC(t)/kC|0)|0}var Jl=64,Zl=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Jo(a):(s&=o,s!==0&&(i=Jo(s)))}else o=n&~r,o!==0?i=Jo(o):s!==0&&(i=Jo(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-dn(e),r=1<<n,i|=t[n],e&=~r;return i}function AC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-dn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=AC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Af(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BE(){var t=Jl;return Jl<<=1,!(Jl&4194240)&&(Jl=64),t}function yd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function RC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-dn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function sg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-dn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var _e=0;function zE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $E,og,WE,HE,qE,Pf=!1,eu=[],Fi=null,ji=null,Ui=null,Oa=new Map,La=new Map,xi=[],NC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f_(t,e){switch(t){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(e.pointerId)}}function Lo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ml(e),e!==null&&og(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function DC(t,e,n,i,r){switch(e){case"focusin":return Fi=Lo(Fi,t,e,n,i,r),!0;case"dragenter":return ji=Lo(ji,t,e,n,i,r),!0;case"mouseover":return Ui=Lo(Ui,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Oa.set(s,Lo(Oa.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,La.set(s,Lo(La.get(s)||null,t,e,n,i,r)),!0}return!1}function KE(t){var e=Ir(t.target);if(e!==null){var n=Yr(e);if(n!==null){if(e=n.tag,e===13){if(e=OE(n),e!==null){t.blockedOn=e,qE(t.priority,function(){WE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);xf=i,n.target.dispatchEvent(i),xf=null}else return e=ml(n),e!==null&&og(e),t.blockedOn=n,!1;e.shift()}return!0}function p_(t,e,n){Nu(t)&&n.delete(e)}function MC(){Pf=!1,Fi!==null&&Nu(Fi)&&(Fi=null),ji!==null&&Nu(ji)&&(ji=null),Ui!==null&&Nu(Ui)&&(Ui=null),Oa.forEach(p_),La.forEach(p_)}function Vo(t,e){t.blockedOn===e&&(t.blockedOn=null,Pf||(Pf=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,MC)))}function Va(t){function e(r){return Vo(r,t)}if(0<eu.length){Vo(eu[0],t);for(var n=1;n<eu.length;n++){var i=eu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fi!==null&&Vo(Fi,t),ji!==null&&Vo(ji,t),Ui!==null&&Vo(Ui,t),Oa.forEach(e),La.forEach(e),n=0;n<xi.length;n++)i=xi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)KE(n),n.blockedOn===null&&xi.shift()}var Ms=ci.ReactCurrentBatchConfig,oc=!0;function OC(t,e,n,i){var r=_e,s=Ms.transition;Ms.transition=null;try{_e=1,ag(t,e,n,i)}finally{_e=r,Ms.transition=s}}function LC(t,e,n,i){var r=_e,s=Ms.transition;Ms.transition=null;try{_e=4,ag(t,e,n,i)}finally{_e=r,Ms.transition=s}}function ag(t,e,n,i){if(oc){var r=Rf(t,e,n,i);if(r===null)kd(t,e,i,ac,n),f_(t,i);else if(DC(r,t,e,n,i))i.stopPropagation();else if(f_(t,i),e&4&&-1<NC.indexOf(t)){for(;r!==null;){var s=ml(r);if(s!==null&&$E(s),s=Rf(t,e,n,i),s===null&&kd(t,e,i,ac,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else kd(t,e,i,null,n)}}var ac=null;function Rf(t,e,n,i){if(ac=null,t=ig(i),t=Ir(t),t!==null)if(e=Yr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ac=t,null}function GE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SC()){case rg:return 1;case jE:return 4;case rc:case IC:return 16;case UE:return 536870912;default:return 16}default:return 16}}var Ri=null,lg=null,Du=null;function QE(){if(Du)return Du;var t,e=lg,n=e.length,i,r="value"in Ri?Ri.value:Ri.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Du=r.slice(t,1<i?1-i:void 0)}function Mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tu(){return!0}function g_(){return!1}function Kt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tu:g_,this.isPropagationStopped=g_,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),e}var co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ug=Kt(co),gl=Oe({},co,{view:0,detail:0}),VC=Kt(gl),_d,vd,Fo,nh=Oe({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fo&&(Fo&&t.type==="mousemove"?(_d=t.screenX-Fo.screenX,vd=t.screenY-Fo.screenY):vd=_d=0,Fo=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:vd}}),m_=Kt(nh),FC=Oe({},nh,{dataTransfer:0}),jC=Kt(FC),UC=Oe({},gl,{relatedTarget:0}),wd=Kt(UC),BC=Oe({},co,{animationName:0,elapsedTime:0,pseudoElement:0}),zC=Kt(BC),$C=Oe({},co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WC=Kt($C),HC=Oe({},co,{data:0}),y_=Kt(HC),qC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GC[t])?!!e[t]:!1}function cg(){return QC}var YC=Oe({},gl,{key:function(t){if(t.key){var e=qC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(t){return t.type==="keypress"?Mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XC=Kt(YC),JC=Oe({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),__=Kt(JC),ZC=Oe({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),e1=Kt(ZC),t1=Oe({},co,{propertyName:0,elapsedTime:0,pseudoElement:0}),n1=Kt(t1),i1=Oe({},nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),r1=Kt(i1),s1=[9,13,27,32],hg=ni&&"CompositionEvent"in window,fa=null;ni&&"documentMode"in document&&(fa=document.documentMode);var o1=ni&&"TextEvent"in window&&!fa,YE=ni&&(!hg||fa&&8<fa&&11>=fa),v_=" ",w_=!1;function XE(t,e){switch(t){case"keyup":return s1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ws=!1;function a1(t,e){switch(t){case"compositionend":return JE(e);case"keypress":return e.which!==32?null:(w_=!0,v_);case"textInput":return t=e.data,t===v_&&w_?null:t;default:return null}}function l1(t,e){if(ws)return t==="compositionend"||!hg&&XE(t,e)?(t=QE(),Du=lg=Ri=null,ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YE&&e.locale!=="ko"?null:e.data;default:return null}}var u1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u1[t.type]:e==="textarea"}function ZE(t,e,n,i){PE(i),e=lc(e,"onChange"),0<e.length&&(n=new ug("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var pa=null,Fa=null;function c1(t){cT(t,0)}function ih(t){var e=Ss(t);if(SE(e))return t}function h1(t,e){if(t==="change")return e}var eT=!1;if(ni){var Ed;if(ni){var Td="oninput"in document;if(!Td){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),Td=typeof T_.oninput=="function"}Ed=Td}else Ed=!1;eT=Ed&&(!document.documentMode||9<document.documentMode)}function S_(){pa&&(pa.detachEvent("onpropertychange",tT),Fa=pa=null)}function tT(t){if(t.propertyName==="value"&&ih(Fa)){var e=[];ZE(e,Fa,t,ig(t)),ME(c1,e)}}function d1(t,e,n){t==="focusin"?(S_(),pa=e,Fa=n,pa.attachEvent("onpropertychange",tT)):t==="focusout"&&S_()}function f1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ih(Fa)}function p1(t,e){if(t==="click")return ih(e)}function g1(t,e){if(t==="input"||t==="change")return ih(e)}function m1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:m1;function ja(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ff.call(e,r)||!gn(t[r],e[r]))return!1}return!0}function I_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function x_(t,e){var n=I_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=I_(n)}}function nT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iT(){for(var t=window,e=tc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tc(t.document)}return e}function dg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function y1(t){var e=iT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nT(n.ownerDocument.documentElement,n)){if(i!==null&&dg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=x_(n,s);var o=x_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _1=ni&&"documentMode"in document&&11>=document.documentMode,Es=null,Nf=null,ga=null,Df=!1;function b_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Df||Es==null||Es!==tc(i)||(i=Es,"selectionStart"in i&&dg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ga&&ja(ga,i)||(ga=i,i=lc(Nf,"onSelect"),0<i.length&&(e=new ug("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Es)))}function nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ts={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionend:nu("Transition","TransitionEnd")},Sd={},rT={};ni&&(rT=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function rh(t){if(Sd[t])return Sd[t];if(!Ts[t])return t;var e=Ts[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rT)return Sd[t]=e[n];return t}var sT=rh("animationend"),oT=rh("animationiteration"),aT=rh("animationstart"),lT=rh("transitionend"),uT=new Map,k_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,e){uT.set(t,e),Qr(e,[t])}for(var Id=0;Id<k_.length;Id++){var xd=k_[Id],v1=xd.toLowerCase(),w1=xd[0].toUpperCase()+xd.slice(1);rr(v1,"on"+w1)}rr(sT,"onAnimationEnd");rr(oT,"onAnimationIteration");rr(aT,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(lT,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function C_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,vC(i,e,void 0,t),t.currentTarget=null}function cT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;C_(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;C_(r,a,u),s=l}}}if(ic)throw t=Cf,ic=!1,Cf=null,t}function xe(t,e){var n=e[Ff];n===void 0&&(n=e[Ff]=new Set);var i=t+"__bubble";n.has(i)||(hT(e,t,2,!1),n.add(i))}function bd(t,e,n){var i=0;e&&(i|=4),hT(n,t,i,e)}var iu="_reactListening"+Math.random().toString(36).slice(2);function Ua(t){if(!t[iu]){t[iu]=!0,_E.forEach(function(n){n!=="selectionchange"&&(E1.has(n)||bd(n,!1,t),bd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[iu]||(e[iu]=!0,bd("selectionchange",!1,e))}}function hT(t,e,n,i){switch(GE(e)){case 1:var r=OC;break;case 4:r=LC;break;default:r=ag}n=r.bind(null,e,n,t),r=void 0,!kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function kd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ir(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}ME(function(){var u=s,h=ig(n),d=[];e:{var f=uT.get(t);if(f!==void 0){var m=ug,y=t;switch(t){case"keypress":if(Mu(n)===0)break e;case"keydown":case"keyup":m=XC;break;case"focusin":y="focus",m=wd;break;case"focusout":y="blur",m=wd;break;case"beforeblur":case"afterblur":m=wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=m_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=e1;break;case sT:case oT:case aT:m=zC;break;case lT:m=n1;break;case"scroll":m=VC;break;case"wheel":m=r1;break;case"copy":case"cut":case"paste":m=WC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=__}var v=(e&4)!==0,E=!v&&t==="scroll",T=v?f!==null?f+"Capture":null:f;v=[];for(var S=u,b;S!==null;){b=S;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,T!==null&&(R=Ma(S,T),R!=null&&v.push(Ba(S,R,b)))),E)break;S=S.return}0<v.length&&(f=new m(f,y,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==xf&&(y=n.relatedTarget||n.fromElement)&&(Ir(y)||y[ii]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Ir(y):null,y!==null&&(E=Yr(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(v=m_,R="onMouseLeave",T="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(v=__,R="onPointerLeave",T="onPointerEnter",S="pointer"),E=m==null?f:Ss(m),b=y==null?f:Ss(y),f=new v(R,S+"leave",m,n,h),f.target=E,f.relatedTarget=b,R=null,Ir(h)===u&&(v=new v(T,S+"enter",y,n,h),v.target=b,v.relatedTarget=E,R=v),E=R,m&&y)t:{for(v=m,T=y,S=0,b=v;b;b=cs(b))S++;for(b=0,R=T;R;R=cs(R))b++;for(;0<S-b;)v=cs(v),S--;for(;0<b-S;)T=cs(T),b--;for(;S--;){if(v===T||T!==null&&v===T.alternate)break t;v=cs(v),T=cs(T)}v=null}else v=null;m!==null&&A_(d,f,m,v,!1),y!==null&&E!==null&&A_(d,E,y,v,!0)}}e:{if(f=u?Ss(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=h1;else if(E_(f))if(eT)M=g1;else{M=f1;var D=d1}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=p1);if(M&&(M=M(t,u))){ZE(d,M,n,h);break e}D&&D(t,f,u),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&wf(f,"number",f.value)}switch(D=u?Ss(u):window,t){case"focusin":(E_(D)||D.contentEditable==="true")&&(Es=D,Nf=u,ga=null);break;case"focusout":ga=Nf=Es=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,b_(d,n,h);break;case"selectionchange":if(_1)break;case"keydown":case"keyup":b_(d,n,h)}var I;if(hg)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ws?XE(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(YE&&n.locale!=="ko"&&(ws||w!=="onCompositionStart"?w==="onCompositionEnd"&&ws&&(I=QE()):(Ri=h,lg="value"in Ri?Ri.value:Ri.textContent,ws=!0)),D=lc(u,w),0<D.length&&(w=new y_(w,t,null,n,h),d.push({event:w,listeners:D}),I?w.data=I:(I=JE(n),I!==null&&(w.data=I)))),(I=o1?a1(t,n):l1(t,n))&&(u=lc(u,"onBeforeInput"),0<u.length&&(h=new y_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=I))}cT(d,e)})}function Ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ma(t,n),s!=null&&i.unshift(Ba(t,s,r)),s=Ma(t,e),s!=null&&i.push(Ba(t,s,r))),t=t.return}return i}function cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function A_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Ma(n,s),l!=null&&o.unshift(Ba(n,l,a))):r||(l=Ma(n,s),l!=null&&o.push(Ba(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var T1=/\r\n?/g,S1=/\u0000|\uFFFD/g;function P_(t){return(typeof t=="string"?t:""+t).replace(T1,`
`).replace(S1,"")}function ru(t,e,n){if(e=P_(e),P_(t)!==e&&n)throw Error(U(425))}function uc(){}var Mf=null,Of=null;function Lf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,I1=typeof clearTimeout=="function"?clearTimeout:void 0,R_=typeof Promise=="function"?Promise:void 0,x1=typeof queueMicrotask=="function"?queueMicrotask:typeof R_<"u"?function(t){return R_.resolve(null).then(t).catch(b1)}:Vf;function b1(t){setTimeout(function(){throw t})}function Cd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Va(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Va(e)}function Bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function N_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),bn="__reactFiber$"+ho,za="__reactProps$"+ho,ii="__reactContainer$"+ho,Ff="__reactEvents$"+ho,k1="__reactListeners$"+ho,C1="__reactHandles$"+ho;function Ir(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ii]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=N_(t);t!==null;){if(n=t[bn])return n;t=N_(t)}return e}t=n,n=t.parentNode}return null}function ml(t){return t=t[bn]||t[ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function sh(t){return t[za]||null}var jf=[],Is=-1;function sr(t){return{current:t}}function ke(t){0>Is||(t.current=jf[Is],jf[Is]=null,Is--)}function Te(t,e){Is++,jf[Is]=t.current,t.current=e}var Ji={},_t=sr(Ji),Dt=sr(!1),Lr=Ji;function $s(t,e){var n=t.type.contextTypes;if(!n)return Ji;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Mt(t){return t=t.childContextTypes,t!=null}function cc(){ke(Dt),ke(_t)}function D_(t,e,n){if(_t.current!==Ji)throw Error(U(168));Te(_t,e),Te(Dt,n)}function dT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,dC(t)||"Unknown",r));return Oe({},n,i)}function hc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,Lr=_t.current,Te(_t,t),Te(Dt,Dt.current),!0}function M_(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=dT(t,e,Lr),i.__reactInternalMemoizedMergedChildContext=t,ke(Dt),ke(_t),Te(_t,t)):ke(Dt),Te(Dt,n)}var qn=null,oh=!1,Ad=!1;function fT(t){qn===null?qn=[t]:qn.push(t)}function A1(t){oh=!0,fT(t)}function or(){if(!Ad&&qn!==null){Ad=!0;var t=0,e=_e;try{var n=qn;for(_e=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}qn=null,oh=!1}catch(r){throw qn!==null&&(qn=qn.slice(t+1)),FE(rg,or),r}finally{_e=e,Ad=!1}}return null}var xs=[],bs=0,dc=null,fc=0,Qt=[],Yt=0,Vr=null,Gn=1,Qn="";function vr(t,e){xs[bs++]=fc,xs[bs++]=dc,dc=t,fc=e}function pT(t,e,n){Qt[Yt++]=Gn,Qt[Yt++]=Qn,Qt[Yt++]=Vr,Vr=t;var i=Gn;t=Qn;var r=32-dn(i)-1;i&=~(1<<r),n+=1;var s=32-dn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Gn=1<<32-dn(e)+r|n<<r|i,Qn=s+t}else Gn=1<<s|n<<r|i,Qn=t}function fg(t){t.return!==null&&(vr(t,1),pT(t,1,0))}function pg(t){for(;t===dc;)dc=xs[--bs],xs[bs]=null,fc=xs[--bs],xs[bs]=null;for(;t===Vr;)Vr=Qt[--Yt],Qt[Yt]=null,Qn=Qt[--Yt],Qt[Yt]=null,Gn=Qt[--Yt],Qt[Yt]=null}var Wt=null,zt=null,Ce=!1,cn=null;function gT(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function O_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,zt=Bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vr!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,zt=null,!0):!1;default:return!1}}function Uf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bf(t){if(Ce){var e=zt;if(e){var n=e;if(!O_(t,e)){if(Uf(t))throw Error(U(418));e=Bi(n.nextSibling);var i=Wt;e&&O_(t,e)?gT(i,n):(t.flags=t.flags&-4097|2,Ce=!1,Wt=t)}}else{if(Uf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ce=!1,Wt=t}}}function L_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function su(t){if(t!==Wt)return!1;if(!Ce)return L_(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lf(t.type,t.memoizedProps)),e&&(e=zt)){if(Uf(t))throw mT(),Error(U(418));for(;e;)gT(t,e),e=Bi(e.nextSibling)}if(L_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=Bi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=Wt?Bi(t.stateNode.nextSibling):null;return!0}function mT(){for(var t=zt;t;)t=Bi(t.nextSibling)}function Ws(){zt=Wt=null,Ce=!1}function gg(t){cn===null?cn=[t]:cn.push(t)}var P1=ci.ReactCurrentBatchConfig;function jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function ou(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function V_(t){var e=t._init;return e(t._payload)}function yT(t){function e(T,S){if(t){var b=T.deletions;b===null?(T.deletions=[S],T.flags|=16):b.push(S)}}function n(T,S){if(!t)return null;for(;S!==null;)e(T,S),S=S.sibling;return null}function i(T,S){for(T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function r(T,S){return T=Hi(T,S),T.index=0,T.sibling=null,T}function s(T,S,b){return T.index=b,t?(b=T.alternate,b!==null?(b=b.index,b<S?(T.flags|=2,S):b):(T.flags|=2,S)):(T.flags|=1048576,S)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,S,b,R){return S===null||S.tag!==6?(S=Ld(b,T.mode,R),S.return=T,S):(S=r(S,b),S.return=T,S)}function l(T,S,b,R){var M=b.type;return M===vs?h(T,S,b.props.children,R,b.key):S!==null&&(S.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Si&&V_(M)===S.type)?(R=r(S,b.props),R.ref=jo(T,S,b),R.return=T,R):(R=Bu(b.type,b.key,b.props,null,T.mode,R),R.ref=jo(T,S,b),R.return=T,R)}function u(T,S,b,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=Vd(b,T.mode,R),S.return=T,S):(S=r(S,b.children||[]),S.return=T,S)}function h(T,S,b,R,M){return S===null||S.tag!==7?(S=Nr(b,T.mode,R,M),S.return=T,S):(S=r(S,b),S.return=T,S)}function d(T,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Ld(""+S,T.mode,b),S.return=T,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ql:return b=Bu(S.type,S.key,S.props,null,T.mode,b),b.ref=jo(T,null,S),b.return=T,b;case _s:return S=Vd(S,T.mode,b),S.return=T,S;case Si:var R=S._init;return d(T,R(S._payload),b)}if(Xo(S)||Mo(S))return S=Nr(S,T.mode,b,null),S.return=T,S;ou(T,S)}return null}function f(T,S,b,R){var M=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return M!==null?null:a(T,S,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ql:return b.key===M?l(T,S,b,R):null;case _s:return b.key===M?u(T,S,b,R):null;case Si:return M=b._init,f(T,S,M(b._payload),R)}if(Xo(b)||Mo(b))return M!==null?null:h(T,S,b,R,null);ou(T,b)}return null}function m(T,S,b,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return T=T.get(b)||null,a(S,T,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ql:return T=T.get(R.key===null?b:R.key)||null,l(S,T,R,M);case _s:return T=T.get(R.key===null?b:R.key)||null,u(S,T,R,M);case Si:var D=R._init;return m(T,S,b,D(R._payload),M)}if(Xo(R)||Mo(R))return T=T.get(b)||null,h(S,T,R,M,null);ou(S,R)}return null}function y(T,S,b,R){for(var M=null,D=null,I=S,w=S=0,k=null;I!==null&&w<b.length;w++){I.index>w?(k=I,I=null):k=I.sibling;var C=f(T,I,b[w],R);if(C===null){I===null&&(I=k);break}t&&I&&C.alternate===null&&e(T,I),S=s(C,S,w),D===null?M=C:D.sibling=C,D=C,I=k}if(w===b.length)return n(T,I),Ce&&vr(T,w),M;if(I===null){for(;w<b.length;w++)I=d(T,b[w],R),I!==null&&(S=s(I,S,w),D===null?M=I:D.sibling=I,D=I);return Ce&&vr(T,w),M}for(I=i(T,I);w<b.length;w++)k=m(I,T,w,b[w],R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?w:k.key),S=s(k,S,w),D===null?M=k:D.sibling=k,D=k);return t&&I.forEach(function(P){return e(T,P)}),Ce&&vr(T,w),M}function v(T,S,b,R){var M=Mo(b);if(typeof M!="function")throw Error(U(150));if(b=M.call(b),b==null)throw Error(U(151));for(var D=M=null,I=S,w=S=0,k=null,C=b.next();I!==null&&!C.done;w++,C=b.next()){I.index>w?(k=I,I=null):k=I.sibling;var P=f(T,I,C.value,R);if(P===null){I===null&&(I=k);break}t&&I&&P.alternate===null&&e(T,I),S=s(P,S,w),D===null?M=P:D.sibling=P,D=P,I=k}if(C.done)return n(T,I),Ce&&vr(T,w),M;if(I===null){for(;!C.done;w++,C=b.next())C=d(T,C.value,R),C!==null&&(S=s(C,S,w),D===null?M=C:D.sibling=C,D=C);return Ce&&vr(T,w),M}for(I=i(T,I);!C.done;w++,C=b.next())C=m(I,T,w,C.value,R),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?w:C.key),S=s(C,S,w),D===null?M=C:D.sibling=C,D=C);return t&&I.forEach(function(N){return e(T,N)}),Ce&&vr(T,w),M}function E(T,S,b,R){if(typeof b=="object"&&b!==null&&b.type===vs&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ql:e:{for(var M=b.key,D=S;D!==null;){if(D.key===M){if(M=b.type,M===vs){if(D.tag===7){n(T,D.sibling),S=r(D,b.props.children),S.return=T,T=S;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Si&&V_(M)===D.type){n(T,D.sibling),S=r(D,b.props),S.ref=jo(T,D,b),S.return=T,T=S;break e}n(T,D);break}else e(T,D);D=D.sibling}b.type===vs?(S=Nr(b.props.children,T.mode,R,b.key),S.return=T,T=S):(R=Bu(b.type,b.key,b.props,null,T.mode,R),R.ref=jo(T,S,b),R.return=T,T=R)}return o(T);case _s:e:{for(D=b.key;S!==null;){if(S.key===D)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){n(T,S.sibling),S=r(S,b.children||[]),S.return=T,T=S;break e}else{n(T,S);break}else e(T,S);S=S.sibling}S=Vd(b,T.mode,R),S.return=T,T=S}return o(T);case Si:return D=b._init,E(T,S,D(b._payload),R)}if(Xo(b))return y(T,S,b,R);if(Mo(b))return v(T,S,b,R);ou(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(n(T,S.sibling),S=r(S,b),S.return=T,T=S):(n(T,S),S=Ld(b,T.mode,R),S.return=T,T=S),o(T)):n(T,S)}return E}var Hs=yT(!0),_T=yT(!1),pc=sr(null),gc=null,ks=null,mg=null;function yg(){mg=ks=gc=null}function _g(t){var e=pc.current;ke(pc),t._currentValue=e}function zf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Os(t,e){gc=t,mg=ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(mg!==t)if(t={context:t,memoizedValue:e,next:null},ks===null){if(gc===null)throw Error(U(308));ks=t,gc.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return e}var xr=null;function vg(t){xr===null?xr=[t]:xr.push(t)}function vT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,vg(e)):(n.next=r.next,r.next=n),e.interleaved=n,ri(t,i)}function ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ii=!1;function wg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ce&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ri(t,n)}return r=i.interleaved,r===null?(e.next=e,vg(i)):(e.next=r.next,r.next=e),i.interleaved=e,ri(t,n)}function Ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,sg(t,n)}}function F_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mc(t,e,n,i){var r=t.updateQueue;Ii=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=Oe({},d,f);break e;case 2:Ii=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);jr|=o,t.lanes=o,t.memoizedState=d}}function j_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var yl={},An=sr(yl),$a=sr(yl),Wa=sr(yl);function br(t){if(t===yl)throw Error(U(174));return t}function Eg(t,e){switch(Te(Wa,e),Te($a,t),Te(An,yl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tf(e,t)}ke(An),Te(An,e)}function qs(){ke(An),ke($a),ke(Wa)}function ET(t){br(Wa.current);var e=br(An.current),n=Tf(e,t.type);e!==n&&(Te($a,t),Te(An,n))}function Tg(t){$a.current===t&&(ke(An),ke($a))}var Ne=sr(0);function yc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pd=[];function Sg(){for(var t=0;t<Pd.length;t++)Pd[t]._workInProgressVersionPrimary=null;Pd.length=0}var Lu=ci.ReactCurrentDispatcher,Rd=ci.ReactCurrentBatchConfig,Fr=0,De=null,He=null,Ye=null,_c=!1,ma=!1,Ha=0,R1=0;function ht(){throw Error(U(321))}function Ig(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function xg(t,e,n,i,r,s){if(Fr=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lu.current=t===null||t.memoizedState===null?O1:L1,t=n(i,r),ma){s=0;do{if(ma=!1,Ha=0,25<=s)throw Error(U(301));s+=1,Ye=He=null,e.updateQueue=null,Lu.current=V1,t=n(i,r)}while(ma)}if(Lu.current=vc,e=He!==null&&He.next!==null,Fr=0,Ye=He=De=null,_c=!1,e)throw Error(U(300));return t}function bg(){var t=Ha!==0;return Ha=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function rn(){if(He===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Ye===null?De.memoizedState:Ye.next;if(e!==null)Ye=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function qa(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=rn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=He,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Fr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,De.lanes|=h,jr|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,gn(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,De.lanes|=s,jr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dd(t){var e=rn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);gn(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function TT(){}function ST(t,e){var n=De,i=rn(),r=e(),s=!gn(i.memoizedState,r);if(s&&(i.memoizedState=r,Rt=!0),i=i.queue,kg(bT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Ka(9,xT.bind(null,n,i,r,e),void 0,null),Xe===null)throw Error(U(349));Fr&30||IT(n,e,r)}return r}function IT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xT(t,e,n,i){e.value=n,e.getSnapshot=i,kT(e)&&CT(t)}function bT(t,e,n){return n(function(){kT(e)&&CT(t)})}function kT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function CT(t){var e=ri(t,1);e!==null&&fn(e,t,1,-1)}function U_(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:t},e.queue=t,t=t.dispatch=M1.bind(null,De,t),[e.memoizedState,t]}function Ka(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function AT(){return rn().memoizedState}function Vu(t,e,n,i){var r=In();De.flags|=t,r.memoizedState=Ka(1|e,n,void 0,i===void 0?null:i)}function ah(t,e,n,i){var r=rn();i=i===void 0?null:i;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,i!==null&&Ig(i,o.deps)){r.memoizedState=Ka(e,n,s,i);return}}De.flags|=t,r.memoizedState=Ka(1|e,n,s,i)}function B_(t,e){return Vu(8390656,8,t,e)}function kg(t,e){return ah(2048,8,t,e)}function PT(t,e){return ah(4,2,t,e)}function RT(t,e){return ah(4,4,t,e)}function NT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DT(t,e,n){return n=n!=null?n.concat([t]):null,ah(4,4,NT.bind(null,e,t),n)}function Cg(){}function MT(t,e){var n=rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ig(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function OT(t,e){var n=rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ig(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function LT(t,e,n){return Fr&21?(gn(n,e)||(n=BE(),De.lanes|=n,jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function N1(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var i=Rd.transition;Rd.transition={};try{t(!1),e()}finally{_e=n,Rd.transition=i}}function VT(){return rn().memoizedState}function D1(t,e,n){var i=Wi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},FT(t))jT(e,n);else if(n=vT(t,e,n,i),n!==null){var r=It();fn(n,t,i,r),UT(n,e,i)}}function M1(t,e,n){var i=Wi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(FT(t))jT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,gn(a,o)){var l=e.interleaved;l===null?(r.next=r,vg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=vT(t,e,r,i),n!==null&&(r=It(),fn(n,t,i,r),UT(n,e,i))}}function FT(t){var e=t.alternate;return t===De||e!==null&&e===De}function jT(t,e){ma=_c=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function UT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,sg(t,n)}}var vc={readContext:nn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},O1={readContext:nn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:B_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vu(4194308,4,NT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vu(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=In();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=D1.bind(null,De,t),[i.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:U_,useDebugValue:Cg,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=U_(!1),e=t[0];return t=N1.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=De,r=In();if(Ce){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Xe===null)throw Error(U(349));Fr&30||IT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,B_(bT.bind(null,i,s,t),[t]),i.flags|=2048,Ka(9,xT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=In(),e=Xe.identifierPrefix;if(Ce){var n=Qn,i=Gn;n=(i&~(1<<32-dn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=R1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},L1={readContext:nn,useCallback:MT,useContext:nn,useEffect:kg,useImperativeHandle:DT,useInsertionEffect:PT,useLayoutEffect:RT,useMemo:OT,useReducer:Nd,useRef:AT,useState:function(){return Nd(qa)},useDebugValue:Cg,useDeferredValue:function(t){var e=rn();return LT(e,He.memoizedState,t)},useTransition:function(){var t=Nd(qa)[0],e=rn().memoizedState;return[t,e]},useMutableSource:TT,useSyncExternalStore:ST,useId:VT,unstable_isNewReconciler:!1},V1={readContext:nn,useCallback:MT,useContext:nn,useEffect:kg,useImperativeHandle:DT,useInsertionEffect:PT,useLayoutEffect:RT,useMemo:OT,useReducer:Dd,useRef:AT,useState:function(){return Dd(qa)},useDebugValue:Cg,useDeferredValue:function(t){var e=rn();return He===null?e.memoizedState=t:LT(e,He.memoizedState,t)},useTransition:function(){var t=Dd(qa)[0],e=rn().memoizedState;return[t,e]},useMutableSource:TT,useSyncExternalStore:ST,useId:VT,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $f(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lh={isMounted:function(t){return(t=t._reactInternals)?Yr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=It(),r=Wi(t),s=Zn(i,r);s.payload=e,n!=null&&(s.callback=n),e=zi(t,s,r),e!==null&&(fn(e,t,r,i),Ou(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=It(),r=Wi(t),s=Zn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zi(t,s,r),e!==null&&(fn(e,t,r,i),Ou(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),i=Wi(t),r=Zn(n,i);r.tag=2,e!=null&&(r.callback=e),e=zi(t,r,i),e!==null&&(fn(e,t,i,n),Ou(e,t,i))}};function z_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ja(n,i)||!ja(r,s):!0}function BT(t,e,n){var i=!1,r=Ji,s=e.contextType;return typeof s=="object"&&s!==null?s=nn(s):(r=Mt(e)?Lr:_t.current,i=e.contextTypes,s=(i=i!=null)?$s(t,r):Ji),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function $_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&lh.enqueueReplaceState(e,e.state,null)}function Wf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},wg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=nn(s):(s=Mt(e)?Lr:_t.current,r.context=$s(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($f(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&lh.enqueueReplaceState(r,r.state,null),mc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ks(t,e){try{var n="",i=e;do n+=hC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Md(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F1=typeof WeakMap=="function"?WeakMap:Map;function zT(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Ec||(Ec=!0,tp=i),Hf(t,e)},n}function $T(t,e,n){n=Zn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Hf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hf(t,e),typeof i!="function"&&($i===null?$i=new Set([this]):$i.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function W_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new F1;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=J1.bind(null,t,e,n),e.then(t,t))}function H_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function q_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,zi(n,e,1))),n.lanes|=1),t)}var j1=ci.ReactCurrentOwner,Rt=!1;function St(t,e,n,i){e.child=t===null?_T(e,null,n,i):Hs(e,t.child,n,i)}function K_(t,e,n,i,r){n=n.render;var s=e.ref;return Os(e,r),i=xg(t,e,n,i,s,r),n=bg(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,si(t,e,r)):(Ce&&n&&fg(e),e.flags|=1,St(t,e,i,r),e.child)}function G_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Lg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,WT(t,e,s,i,r)):(t=Bu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ja,n(o,i)&&t.ref===e.ref)return si(t,e,r)}return e.flags|=1,t=Hi(s,i),t.ref=e.ref,t.return=e,e.child=t}function WT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ja(s,i)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,si(t,e,r)}return qf(t,e,n,i,r)}function HT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(As,Bt),Bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(As,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Te(As,Bt),Bt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Te(As,Bt),Bt|=i;return St(t,e,r,n),e.child}function qT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qf(t,e,n,i,r){var s=Mt(n)?Lr:_t.current;return s=$s(e,s),Os(e,r),n=xg(t,e,n,i,s,r),i=bg(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,si(t,e,r)):(Ce&&i&&fg(e),e.flags|=1,St(t,e,n,r),e.child)}function Q_(t,e,n,i,r){if(Mt(n)){var s=!0;hc(e)}else s=!1;if(Os(e,r),e.stateNode===null)Fu(t,e),BT(e,n,i),Wf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nn(u):(u=Mt(n)?Lr:_t.current,u=$s(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&$_(e,o,i,u),Ii=!1;var f=e.memoizedState;o.state=f,mc(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Dt.current||Ii?(typeof h=="function"&&($f(e,n,h,i),l=e.memoizedState),(a=Ii||z_(e,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,wT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ln(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nn(l):(l=Mt(n)?Lr:_t.current,l=$s(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&$_(e,o,i,l),Ii=!1,f=e.memoizedState,o.state=f,mc(e,i,o,r);var y=e.memoizedState;a!==d||f!==y||Dt.current||Ii?(typeof m=="function"&&($f(e,n,m,i),y=e.memoizedState),(u=Ii||z_(e,n,u,i,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Kf(t,e,n,i,s,r)}function Kf(t,e,n,i,r,s){qT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&M_(e,n,!1),si(t,e,s);i=e.stateNode,j1.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Hs(e,t.child,null,s),e.child=Hs(e,null,a,s)):St(t,e,a,s),e.memoizedState=i.state,r&&M_(e,n,!0),e.child}function KT(t){var e=t.stateNode;e.pendingContext?D_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D_(t,e.context,!1),Eg(t,e.containerInfo)}function Y_(t,e,n,i,r){return Ws(),gg(r),e.flags|=256,St(t,e,n,i),e.child}var Gf={dehydrated:null,treeContext:null,retryLane:0};function Qf(t){return{baseLanes:t,cachePool:null,transitions:null}}function GT(t,e,n){var i=e.pendingProps,r=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Te(Ne,r&1),t===null)return Bf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hh(o,i,0,null),t=Nr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qf(n),e.memoizedState=Gf,t):Ag(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return U1(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Hi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Hi(a,s):(s=Nr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Qf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gf,i}return s=t.child,t=s.sibling,i=Hi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ag(t,e){return e=hh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function au(t,e,n,i){return i!==null&&gg(i),Hs(e,t.child,null,n),t=Ag(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function U1(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Md(Error(U(422))),au(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=hh({mode:"visible",children:i.children},r,0,null),s=Nr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Hs(e,t.child,null,o),e.child.memoizedState=Qf(o),e.memoizedState=Gf,s);if(!(e.mode&1))return au(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=Md(s,i,void 0),au(t,e,o,i)}if(a=(o&t.childLanes)!==0,Rt||a){if(i=Xe,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ri(t,r),fn(i,t,r,-1))}return Og(),i=Md(Error(U(421))),au(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Z1.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,zt=Bi(r.nextSibling),Wt=e,Ce=!0,cn=null,t!==null&&(Qt[Yt++]=Gn,Qt[Yt++]=Qn,Qt[Yt++]=Vr,Gn=t.id,Qn=t.overflow,Vr=e),e=Ag(e,i.children),e.flags|=4096,e)}function X_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zf(t.return,e,n)}function Od(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function QT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(St(t,e,i.children,n),i=Ne.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&X_(t,n,e);else if(t.tag===19)X_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Te(Ne,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&yc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Od(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&yc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Od(e,!0,n,null,s);break;case"together":Od(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function B1(t,e,n){switch(e.tag){case 3:KT(e),Ws();break;case 5:ET(e);break;case 1:Mt(e.type)&&hc(e);break;case 4:Eg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Te(pc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Te(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?GT(t,e,n):(Te(Ne,Ne.current&1),t=si(t,e,n),t!==null?t.sibling:null);Te(Ne,Ne.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return QT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Te(Ne,Ne.current),i)break;return null;case 22:case 23:return e.lanes=0,HT(t,e,n)}return si(t,e,n)}var YT,Yf,XT,JT;YT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yf=function(){};XT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,br(An.current);var s=null;switch(n){case"input":r=_f(t,r),i=_f(t,i),s=[];break;case"select":r=Oe({},r,{value:void 0}),i=Oe({},i,{value:void 0}),s=[];break;case"textarea":r=Ef(t,r),i=Ef(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=uc)}Sf(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Na.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Na.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};JT=function(t,e,n,i){n!==i&&(e.flags|=4)};function Uo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function z1(t,e,n){var i=e.pendingProps;switch(pg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Mt(e.type)&&cc(),dt(e),null;case 3:return i=e.stateNode,qs(),ke(Dt),ke(_t),Sg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(su(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(rp(cn),cn=null))),Yf(t,e),dt(e),null;case 5:Tg(e);var r=br(Wa.current);if(n=e.type,t!==null&&e.stateNode!=null)XT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return dt(e),null}if(t=br(An.current),su(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[bn]=e,i[za]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(r=0;r<Zo.length;r++)xe(Zo[r],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":o_(i,s),xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},xe("invalid",i);break;case"textarea":l_(i,s),xe("invalid",i)}Sf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&ru(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ru(i.textContent,a,t),r=["children",""+a]):Na.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",i)}switch(n){case"input":Yl(i),a_(i,s,!0);break;case"textarea":Yl(i),u_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=uc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[bn]=e,t[za]=i,YT(t,e,!1,!1),e.stateNode=t;e:{switch(o=If(n,i),n){case"dialog":xe("cancel",t),xe("close",t),r=i;break;case"iframe":case"object":case"embed":xe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Zo.length;r++)xe(Zo[r],t);r=i;break;case"source":xe("error",t),r=i;break;case"img":case"image":case"link":xe("error",t),xe("load",t),r=i;break;case"details":xe("toggle",t),r=i;break;case"input":o_(t,i),r=_f(t,i),xe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Oe({},i,{value:void 0}),xe("invalid",t);break;case"textarea":l_(t,i),r=Ef(t,i),xe("invalid",t);break;default:r=i}Sf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?AE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Da(t,l):typeof l=="number"&&Da(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Na.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",t):l!=null&&Zp(t,s,l,o))}switch(n){case"input":Yl(t),a_(t,i,!1);break;case"textarea":Yl(t),u_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Xi(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Rs(t,!!i.multiple,s,!1):i.defaultValue!=null&&Rs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=uc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)JT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=br(Wa.current),br(An.current),su(e)){if(i=e.stateNode,n=e.memoizedProps,i[bn]=e,(s=i.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:ru(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ru(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[bn]=e,e.stateNode=i}return dt(e),null;case 13:if(ke(Ne),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&zt!==null&&e.mode&1&&!(e.flags&128))mT(),Ws(),e.flags|=98560,s=!1;else if(s=su(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[bn]=e}else Ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else cn!==null&&(rp(cn),cn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ke===0&&(Ke=3):Og())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return qs(),Yf(t,e),t===null&&Ua(e.stateNode.containerInfo),dt(e),null;case 10:return _g(e.type._context),dt(e),null;case 17:return Mt(e.type)&&cc(),dt(e),null;case 19:if(ke(Ne),s=e.memoizedState,s===null)return dt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Uo(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yc(t),o!==null){for(e.flags|=128,Uo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ue()>Gs&&(e.flags|=128,i=!0,Uo(s,!1),e.lanes=4194304)}else{if(!i)if(t=yc(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Uo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return dt(e),null}else 2*Ue()-s.renderingStartTime>Gs&&n!==1073741824&&(e.flags|=128,i=!0,Uo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ue(),e.sibling=null,n=Ne.current,Te(Ne,i?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Mg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Bt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function $1(t,e){switch(pg(e),e.tag){case 1:return Mt(e.type)&&cc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qs(),ke(Dt),ke(_t),Sg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tg(e),null;case 13:if(ke(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ne),null;case 4:return qs(),null;case 10:return _g(e.type._context),null;case 22:case 23:return Mg(),null;case 24:return null;default:return null}}var lu=!1,gt=!1,W1=typeof WeakSet=="function"?WeakSet:Set,W=null;function Cs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Fe(t,e,i)}else n.current=null}function Xf(t,e,n){try{n()}catch(i){Fe(t,e,i)}}var J_=!1;function H1(t,e){if(Mf=oc,t=iT(),dg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Of={focusedElem:t,selectionRange:n},oc=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,E=y.memoizedState,T=e.stateNode,S=T.getSnapshotBeforeUpdate(e.elementType===e.type?v:ln(e.type,v),E);T.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Fe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return y=J_,J_=!1,y}function ya(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Xf(e,n,s)}r=r.next}while(r!==i)}}function uh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Jf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZT(t){var e=t.alternate;e!==null&&(t.alternate=null,ZT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[za],delete e[Ff],delete e[k1],delete e[C1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eS(t){return t.tag===5||t.tag===3||t.tag===4}function Z_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uc));else if(i!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}function ep(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ep(t,e,n),t=t.sibling;t!==null;)ep(t,e,n),t=t.sibling}var et=null,un=!1;function _i(t,e,n){for(n=n.child;n!==null;)tS(t,e,n),n=n.sibling}function tS(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(th,n)}catch{}switch(n.tag){case 5:gt||Cs(n,e);case 6:var i=et,r=un;et=null,_i(t,e,n),et=i,un=r,et!==null&&(un?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(un?(t=et,n=n.stateNode,t.nodeType===8?Cd(t.parentNode,n):t.nodeType===1&&Cd(t,n),Va(t)):Cd(et,n.stateNode));break;case 4:i=et,r=un,et=n.stateNode.containerInfo,un=!0,_i(t,e,n),et=i,un=r;break;case 0:case 11:case 14:case 15:if(!gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xf(n,e,o),r=r.next}while(r!==i)}_i(t,e,n);break;case 1:if(!gt&&(Cs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Fe(n,e,a)}_i(t,e,n);break;case 21:_i(t,e,n);break;case 22:n.mode&1?(gt=(i=gt)||n.memoizedState!==null,_i(t,e,n),gt=i):_i(t,e,n);break;default:_i(t,e,n)}}function ev(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new W1),e.forEach(function(i){var r=eA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:et=a.stateNode,un=!1;break e;case 3:et=a.stateNode.containerInfo,un=!0;break e;case 4:et=a.stateNode.containerInfo,un=!0;break e}a=a.return}if(et===null)throw Error(U(160));tS(s,o,r),et=null,un=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Fe(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nS(e,t),e=e.sibling}function nS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),wn(t),i&4){try{ya(3,t,t.return),uh(3,t)}catch(v){Fe(t,t.return,v)}try{ya(5,t,t.return)}catch(v){Fe(t,t.return,v)}}break;case 1:an(e,t),wn(t),i&512&&n!==null&&Cs(n,n.return);break;case 5:if(an(e,t),wn(t),i&512&&n!==null&&Cs(n,n.return),t.flags&32){var r=t.stateNode;try{Da(r,"")}catch(v){Fe(t,t.return,v)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&IE(r,s),If(a,o);var u=If(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?AE(r,d):h==="dangerouslySetInnerHTML"?kE(r,d):h==="children"?Da(r,d):Zp(r,h,d,u)}switch(a){case"input":vf(r,s);break;case"textarea":xE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Rs(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Rs(r,!!s.multiple,s.defaultValue,!0):Rs(r,!!s.multiple,s.multiple?[]:"",!1))}r[za]=s}catch(v){Fe(t,t.return,v)}}break;case 6:if(an(e,t),wn(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(v){Fe(t,t.return,v)}}break;case 3:if(an(e,t),wn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Va(e.containerInfo)}catch(v){Fe(t,t.return,v)}break;case 4:an(e,t),wn(t);break;case 13:an(e,t),wn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ng=Ue())),i&4&&ev(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(u=gt)||h,an(e,t),gt=u):an(e,t),wn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(d=W=h;W!==null;){switch(f=W,m=f.child,f.tag){case 0:case 11:case 14:case 15:ya(4,f,f.return);break;case 1:Cs(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Fe(i,n,v)}}break;case 5:Cs(f,f.return);break;case 22:if(f.memoizedState!==null){nv(d);continue}}m!==null?(m.return=f,W=m):nv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=CE("display",o))}catch(v){Fe(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Fe(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:an(e,t),wn(t),i&4&&ev(t);break;case 21:break;default:an(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eS(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Da(r,""),i.flags&=-33);var s=Z_(t);ep(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Z_(t);Zf(t,a,o);break;default:throw Error(U(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function q1(t,e,n){W=t,iS(t)}function iS(t,e,n){for(var i=(t.mode&1)!==0;W!==null;){var r=W,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||lu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||gt;a=lu;var u=gt;if(lu=o,(gt=l)&&!u)for(W=r;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?iv(r):l!==null?(l.return=o,W=l):iv(r);for(;s!==null;)W=s,iS(s),s=s.sibling;W=r,lu=a,gt=u}tv(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,W=s):tv(t)}}function tv(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||uh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!gt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&j_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}j_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Va(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}gt||e.flags&512&&Jf(e)}catch(f){Fe(e,e.return,f)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function nv(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function iv(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uh(4,e)}catch(l){Fe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Fe(e,r,l)}}var s=e.return;try{Jf(e)}catch(l){Fe(e,s,l)}break;case 5:var o=e.return;try{Jf(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var K1=Math.ceil,wc=ci.ReactCurrentDispatcher,Pg=ci.ReactCurrentOwner,Zt=ci.ReactCurrentBatchConfig,ce=0,Xe=null,We=null,rt=0,Bt=0,As=sr(0),Ke=0,Ga=null,jr=0,ch=0,Rg=0,_a=null,Ct=null,Ng=0,Gs=1/0,Hn=null,Ec=!1,tp=null,$i=null,uu=!1,Ni=null,Tc=0,va=0,np=null,ju=-1,Uu=0;function It(){return ce&6?Ue():ju!==-1?ju:ju=Ue()}function Wi(t){return t.mode&1?ce&2&&rt!==0?rt&-rt:P1.transition!==null?(Uu===0&&(Uu=BE()),Uu):(t=_e,t!==0||(t=window.event,t=t===void 0?16:GE(t.type)),t):1}function fn(t,e,n,i){if(50<va)throw va=0,np=null,Error(U(185));pl(t,n,i),(!(ce&2)||t!==Xe)&&(t===Xe&&(!(ce&2)&&(ch|=n),Ke===4&&bi(t,rt)),Ot(t,i),n===1&&ce===0&&!(e.mode&1)&&(Gs=Ue()+500,oh&&or()))}function Ot(t,e){var n=t.callbackNode;PC(t,e);var i=sc(t,t===Xe?rt:0);if(i===0)n!==null&&d_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&d_(n),e===1)t.tag===0?A1(rv.bind(null,t)):fT(rv.bind(null,t)),x1(function(){!(ce&6)&&or()}),n=null;else{switch(zE(i)){case 1:n=rg;break;case 4:n=jE;break;case 16:n=rc;break;case 536870912:n=UE;break;default:n=rc}n=hS(n,rS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rS(t,e){if(ju=-1,Uu=0,ce&6)throw Error(U(327));var n=t.callbackNode;if(Ls()&&t.callbackNode!==n)return null;var i=sc(t,t===Xe?rt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Sc(t,i);else{e=i;var r=ce;ce|=2;var s=oS();(Xe!==t||rt!==e)&&(Hn=null,Gs=Ue()+500,Rr(t,e));do try{Y1();break}catch(a){sS(t,a)}while(!0);yg(),wc.current=s,ce=r,We!==null?e=0:(Xe=null,rt=0,e=Ke)}if(e!==0){if(e===2&&(r=Af(t),r!==0&&(i=r,e=ip(t,r))),e===1)throw n=Ga,Rr(t,0),bi(t,i),Ot(t,Ue()),n;if(e===6)bi(t,i);else{if(r=t.current.alternate,!(i&30)&&!G1(r)&&(e=Sc(t,i),e===2&&(s=Af(t),s!==0&&(i=s,e=ip(t,s))),e===1))throw n=Ga,Rr(t,0),bi(t,i),Ot(t,Ue()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:wr(t,Ct,Hn);break;case 3:if(bi(t,i),(i&130023424)===i&&(e=Ng+500-Ue(),10<e)){if(sc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){It(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Vf(wr.bind(null,t,Ct,Hn),e);break}wr(t,Ct,Hn);break;case 4:if(bi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-dn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*K1(i/1960))-i,10<i){t.timeoutHandle=Vf(wr.bind(null,t,Ct,Hn),i);break}wr(t,Ct,Hn);break;case 5:wr(t,Ct,Hn);break;default:throw Error(U(329))}}}return Ot(t,Ue()),t.callbackNode===n?rS.bind(null,t):null}function ip(t,e){var n=_a;return t.current.memoizedState.isDehydrated&&(Rr(t,e).flags|=256),t=Sc(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&rp(e)),t}function rp(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function G1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!gn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bi(t,e){for(e&=~Rg,e&=~ch,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),i=1<<n;t[n]=-1,e&=~i}}function rv(t){if(ce&6)throw Error(U(327));Ls();var e=sc(t,0);if(!(e&1))return Ot(t,Ue()),null;var n=Sc(t,e);if(t.tag!==0&&n===2){var i=Af(t);i!==0&&(e=i,n=ip(t,i))}if(n===1)throw n=Ga,Rr(t,0),bi(t,e),Ot(t,Ue()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wr(t,Ct,Hn),Ot(t,Ue()),null}function Dg(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Gs=Ue()+500,oh&&or())}}function Ur(t){Ni!==null&&Ni.tag===0&&!(ce&6)&&Ls();var e=ce;ce|=1;var n=Zt.transition,i=_e;try{if(Zt.transition=null,_e=1,t)return t()}finally{_e=i,Zt.transition=n,ce=e,!(ce&6)&&or()}}function Mg(){Bt=As.current,ke(As)}function Rr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,I1(n)),We!==null)for(n=We.return;n!==null;){var i=n;switch(pg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&cc();break;case 3:qs(),ke(Dt),ke(_t),Sg();break;case 5:Tg(i);break;case 4:qs();break;case 13:ke(Ne);break;case 19:ke(Ne);break;case 10:_g(i.type._context);break;case 22:case 23:Mg()}n=n.return}if(Xe=t,We=t=Hi(t.current,null),rt=Bt=e,Ke=0,Ga=null,Rg=ch=jr=0,Ct=_a=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}xr=null}return t}function sS(t,e){do{var n=We;try{if(yg(),Lu.current=vc,_c){for(var i=De.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_c=!1}if(Fr=0,Ye=He=De=null,ma=!1,Ha=0,Pg.current=null,n===null||n.return===null){Ke=1,Ga=e,We=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=H_(o);if(m!==null){m.flags&=-257,q_(m,o,a,s,e),m.mode&1&&W_(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){W_(s,u,e),Og();break e}l=Error(U(426))}}else if(Ce&&a.mode&1){var E=H_(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),q_(E,o,a,s,e),gg(Ks(l,a));break e}}s=l=Ks(l,a),Ke!==4&&(Ke=2),_a===null?_a=[s]:_a.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=zT(s,l,e);F_(s,T);break e;case 1:a=l;var S=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($i===null||!$i.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=$T(s,a,e);F_(s,R);break e}}s=s.return}while(s!==null)}lS(n)}catch(M){e=M,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function oS(){var t=wc.current;return wc.current=vc,t===null?vc:t}function Og(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Xe===null||!(jr&268435455)&&!(ch&268435455)||bi(Xe,rt)}function Sc(t,e){var n=ce;ce|=2;var i=oS();(Xe!==t||rt!==e)&&(Hn=null,Rr(t,e));do try{Q1();break}catch(r){sS(t,r)}while(!0);if(yg(),ce=n,wc.current=i,We!==null)throw Error(U(261));return Xe=null,rt=0,Ke}function Q1(){for(;We!==null;)aS(We)}function Y1(){for(;We!==null&&!EC();)aS(We)}function aS(t){var e=cS(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?lS(t):We=e,Pg.current=null}function lS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$1(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,We=null;return}}else if(n=z1(n,e,Bt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ke===0&&(Ke=5)}function wr(t,e,n){var i=_e,r=Zt.transition;try{Zt.transition=null,_e=1,X1(t,e,n,i)}finally{Zt.transition=r,_e=i}return null}function X1(t,e,n,i){do Ls();while(Ni!==null);if(ce&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(RC(t,s),t===Xe&&(We=Xe=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uu||(uu=!0,hS(rc,function(){return Ls(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var o=_e;_e=1;var a=ce;ce|=4,Pg.current=null,H1(t,n),nS(n,t),y1(Of),oc=!!Mf,Of=Mf=null,t.current=n,q1(n),TC(),ce=a,_e=o,Zt.transition=s}else t.current=n;if(uu&&(uu=!1,Ni=t,Tc=r),s=t.pendingLanes,s===0&&($i=null),xC(n.stateNode),Ot(t,Ue()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Ec)throw Ec=!1,t=tp,tp=null,t;return Tc&1&&t.tag!==0&&Ls(),s=t.pendingLanes,s&1?t===np?va++:(va=0,np=t):va=0,or(),null}function Ls(){if(Ni!==null){var t=zE(Tc),e=Zt.transition,n=_e;try{if(Zt.transition=null,_e=16>t?16:t,Ni===null)var i=!1;else{if(t=Ni,Ni=null,Tc=0,ce&6)throw Error(U(331));var r=ce;for(ce|=4,W=t.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(W=u;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:ya(8,h,s)}var d=h.child;if(d!==null)d.return=h,W=d;else for(;W!==null;){h=W;var f=h.sibling,m=h.return;if(ZT(h),h===u){W=null;break}if(f!==null){f.return=m,W=f;break}W=m}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ya(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,W=T;break e}W=s.return}}var S=t.current;for(W=S;W!==null;){o=W;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,W=b;else e:for(o=S;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:uh(9,a)}}catch(M){Fe(a,a.return,M)}if(a===o){W=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,W=R;break e}W=a.return}}if(ce=r,or(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(th,t)}catch{}i=!0}return i}finally{_e=n,Zt.transition=e}}return!1}function sv(t,e,n){e=Ks(n,e),e=zT(t,e,1),t=zi(t,e,1),e=It(),t!==null&&(pl(t,1,e),Ot(t,e))}function Fe(t,e,n){if(t.tag===3)sv(t,t,n);else for(;e!==null;){if(e.tag===3){sv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($i===null||!$i.has(i))){t=Ks(n,t),t=$T(e,t,1),e=zi(e,t,1),t=It(),e!==null&&(pl(e,1,t),Ot(e,t));break}}e=e.return}}function J1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(rt&n)===n&&(Ke===4||Ke===3&&(rt&130023424)===rt&&500>Ue()-Ng?Rr(t,0):Rg|=n),Ot(t,e)}function uS(t,e){e===0&&(t.mode&1?(e=Zl,Zl<<=1,!(Zl&130023424)&&(Zl=4194304)):e=1);var n=It();t=ri(t,e),t!==null&&(pl(t,e,n),Ot(t,n))}function Z1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uS(t,n)}function eA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),uS(t,n)}var cS;cS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,B1(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ce&&e.flags&1048576&&pT(e,fc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Fu(t,e),t=e.pendingProps;var r=$s(e,_t.current);Os(e,n),r=xg(null,e,i,t,r,n);var s=bg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(i)?(s=!0,hc(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,wg(e),r.updater=lh,e.stateNode=r,r._reactInternals=e,Wf(e,i,t,n),e=Kf(null,e,i,!0,s,n)):(e.tag=0,Ce&&s&&fg(e),St(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Fu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=nA(i),t=ln(i,t),r){case 0:e=qf(null,e,i,t,n);break e;case 1:e=Q_(null,e,i,t,n);break e;case 11:e=K_(null,e,i,t,n);break e;case 14:e=G_(null,e,i,ln(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),qf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),Q_(t,e,i,r,n);case 3:e:{if(KT(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,wT(t,e),mc(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ks(Error(U(423)),e),e=Y_(t,e,i,n,r);break e}else if(i!==r){r=Ks(Error(U(424)),e),e=Y_(t,e,i,n,r);break e}else for(zt=Bi(e.stateNode.containerInfo.firstChild),Wt=e,Ce=!0,cn=null,n=_T(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ws(),i===r){e=si(t,e,n);break e}St(t,e,i,n)}e=e.child}return e;case 5:return ET(e),t===null&&Bf(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Lf(i,r)?o=null:s!==null&&Lf(i,s)&&(e.flags|=32),qT(t,e),St(t,e,o,n),e.child;case 6:return t===null&&Bf(e),null;case 13:return GT(t,e,n);case 4:return Eg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Hs(e,null,i,n):St(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),K_(t,e,i,r,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Te(pc,i._currentValue),i._currentValue=o,s!==null)if(gn(s.value,o)){if(s.children===r.children&&!Dt.current){e=si(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Zn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}St(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Os(e,n),r=nn(r),i=i(r),e.flags|=1,St(t,e,i,n),e.child;case 14:return i=e.type,r=ln(i,e.pendingProps),r=ln(i.type,r),G_(t,e,i,r,n);case 15:return WT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),Fu(t,e),e.tag=1,Mt(i)?(t=!0,hc(e)):t=!1,Os(e,n),BT(e,i,r),Wf(e,i,r,n),Kf(null,e,i,!0,t,n);case 19:return QT(t,e,n);case 22:return HT(t,e,n)}throw Error(U(156,e.tag))};function hS(t,e){return FE(t,e)}function tA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,i){return new tA(t,e,n,i)}function Lg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nA(t){if(typeof t=="function")return Lg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tg)return 11;if(t===ng)return 14}return 2}function Hi(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Lg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vs:return Nr(n.children,r,s,e);case eg:o=8,r|=8;break;case pf:return t=Xt(12,n,e,r|2),t.elementType=pf,t.lanes=s,t;case gf:return t=Xt(13,n,e,r),t.elementType=gf,t.lanes=s,t;case mf:return t=Xt(19,n,e,r),t.elementType=mf,t.lanes=s,t;case EE:return hh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vE:o=10;break e;case wE:o=9;break e;case tg:o=11;break e;case ng:o=14;break e;case Si:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Nr(t,e,n,i){return t=Xt(7,t,i,e),t.lanes=n,t}function hh(t,e,n,i){return t=Xt(22,t,i,e),t.elementType=EE,t.lanes=n,t.stateNode={isHidden:!1},t}function Ld(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Vd(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yd(0),this.expirationTimes=yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vg(t,e,n,i,r,s,o,a,l){return t=new iA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wg(s),t}function rA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_s,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function dS(t){if(!t)return Ji;t=t._reactInternals;e:{if(Yr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Mt(n))return dT(t,n,e)}return e}function fS(t,e,n,i,r,s,o,a,l){return t=Vg(n,i,!0,t,r,s,o,a,l),t.context=dS(null),n=t.current,i=It(),r=Wi(n),s=Zn(i,r),s.callback=e??null,zi(n,s,r),t.current.lanes=r,pl(t,r,i),Ot(t,i),t}function dh(t,e,n,i){var r=e.current,s=It(),o=Wi(r);return n=dS(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=zi(r,e,o),t!==null&&(fn(t,r,o,s),Ou(t,r,o)),o}function Ic(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ov(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fg(t,e){ov(t,e),(t=t.alternate)&&ov(t,e)}function sA(){return null}var pS=typeof reportError=="function"?reportError:function(t){console.error(t)};function jg(t){this._internalRoot=t}fh.prototype.render=jg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));dh(t,e,null,null)};fh.prototype.unmount=jg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ur(function(){dh(null,t,null,null)}),e[ii]=null}};function fh(t){this._internalRoot=t}fh.prototype.unstable_scheduleHydration=function(t){if(t){var e=HE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xi.length&&e!==0&&e<xi[n].priority;n++);xi.splice(n,0,t),n===0&&KE(t)}};function Ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function av(){}function oA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Ic(o);s.call(u)}}var o=fS(e,i,t,0,null,!1,!1,"",av);return t._reactRootContainer=o,t[ii]=o.current,Ua(t.nodeType===8?t.parentNode:t),Ur(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Ic(l);a.call(u)}}var l=Vg(t,0,!1,null,null,!1,!1,"",av);return t._reactRootContainer=l,t[ii]=l.current,Ua(t.nodeType===8?t.parentNode:t),Ur(function(){dh(e,l,n,i)}),l}function gh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Ic(o);a.call(l)}}dh(e,o,t,r)}else o=oA(n,e,t,r,i);return Ic(o)}$E=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jo(e.pendingLanes);n!==0&&(sg(e,n|1),Ot(e,Ue()),!(ce&6)&&(Gs=Ue()+500,or()))}break;case 13:Ur(function(){var i=ri(t,1);if(i!==null){var r=It();fn(i,t,1,r)}}),Fg(t,1)}};og=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var n=It();fn(e,t,134217728,n)}Fg(t,134217728)}};WE=function(t){if(t.tag===13){var e=Wi(t),n=ri(t,e);if(n!==null){var i=It();fn(n,t,e,i)}Fg(t,e)}};HE=function(){return _e};qE=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};bf=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=sh(i);if(!r)throw Error(U(90));SE(i),vf(i,r)}}}break;case"textarea":xE(t,n);break;case"select":e=n.value,e!=null&&Rs(t,!!n.multiple,e,!1)}};NE=Dg;DE=Ur;var aA={usingClientEntryPoint:!1,Events:[ml,Ss,sh,PE,RE,Dg]},Bo={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lA={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LE(t),t===null?null:t.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance||sA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{th=cu.inject(lA),Cn=cu}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aA;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ug(e))throw Error(U(200));return rA(t,e,null,n)};qt.createRoot=function(t,e){if(!Ug(t))throw Error(U(299));var n=!1,i="",r=pS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Vg(t,1,!1,null,null,n,!1,i,r),t[ii]=e.current,Ua(t.nodeType===8?t.parentNode:t),new jg(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=LE(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return Ur(t)};qt.hydrate=function(t,e,n){if(!ph(e))throw Error(U(200));return gh(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!Ug(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=pS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fS(e,null,t,1,n??null,r,!1,s,o),t[ii]=e.current,Ua(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new fh(e)};qt.render=function(t,e,n){if(!ph(e))throw Error(U(200));return gh(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!ph(t))throw Error(U(40));return t._reactRootContainer?(Ur(function(){gh(null,null,t,!1,function(){t._reactRootContainer=null,t[ii]=null})}),!0):!1};qt.unstable_batchedUpdates=Dg;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ph(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return gh(t,e,n,!1,i)};qt.version="18.3.1-next-f1338f8080-20240426";function gS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gS)}catch(t){console.error(t)}}gS(),gE.exports=qt;var uA=gE.exports,lv=uA;df.createRoot=lv.createRoot,df.hydrateRoot=lv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qa.apply(this,arguments)}var Di;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Di||(Di={}));const uv="popstate";function cA(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return sp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:xc(r)}return dA(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hA(){return Math.random().toString(36).substr(2,8)}function cv(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,n,i){return n===void 0&&(n=null),Qa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fo(e):e,{state:n,key:e&&e.key||i||hA()})}function xc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function dA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Di.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Qa({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Di.Pop;let E=h(),T=E==null?null:E-u;u=E,l&&l({action:a,location:v.location,delta:T})}function f(E,T){a=Di.Push;let S=sp(v.location,E,T);u=h()+1;let b=cv(S,u),R=v.createHref(S);try{o.pushState(b,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(R)}s&&l&&l({action:a,location:v.location,delta:1})}function m(E,T){a=Di.Replace;let S=sp(v.location,E,T);u=h();let b=cv(S,u),R=v.createHref(S);o.replaceState(b,"",R),s&&l&&l({action:a,location:v.location,delta:0})}function y(E){let T=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof E=="string"?E:xc(E);return S=S.replace(/ $/,"%20"),Me(T,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,T)}let v={get action(){return a},get location(){return t(r,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(uv,d),l=E,()=>{r.removeEventListener(uv,d),l=null}},createHref(E){return e(r,E)},createURL:y,encodeLocation(E){let T=y(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:m,go(E){return o.go(E)}};return v}var hv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hv||(hv={}));function fA(t,e,n){return n===void 0&&(n="/"),pA(t,e,n)}function pA(t,e,n,i){let r=typeof e=="string"?fo(e):e,s=Qs(r.pathname||"/",n);if(s==null)return null;let o=mS(t);gA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=bA(s);a=IA(o[l],u)}return a}function mS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=qi([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),mS(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:TA(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of yS(s.path))r(s,o,l)}),e}function yS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=yS(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function gA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:SA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const mA=/^:[\w-]+$/,yA=3,_A=2,vA=1,wA=10,EA=-2,dv=t=>t==="*";function TA(t,e){let n=t.split("/"),i=n.length;return n.some(dv)&&(i+=EA),e&&(i+=_A),n.filter(r=>!dv(r)).reduce((r,s)=>r+(mA.test(s)?yA:s===""?vA:wA),i)}function SA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function IA(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=op({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:qi([s,d.pathname]),pathnameBase:RA(qi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=qi([s,d.pathnameBase]))}return o}function op(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=xA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[d];return m&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function xA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Bg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function bA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const kA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CA=t=>kA.test(t);function AA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?fo(t):t,s;if(n)if(CA(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Bg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=fv(n.substring(1),"/"):s=fv(n,e)}else s=e;return{pathname:s,search:NA(i),hash:DA(r)}}function fv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Fd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zg(t,e){let n=PA(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function $g(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=fo(t):(r=Qa({},t),Me(!r.pathname||!r.pathname.includes("?"),Fd("?","pathname","search",r)),Me(!r.pathname||!r.pathname.includes("#"),Fd("#","pathname","hash",r)),Me(!r.search||!r.search.includes("#"),Fd("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=AA(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const qi=t=>t.join("/").replace(/\/\/+/g,"/"),RA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _S=["post","put","patch","delete"];new Set(_S);const OA=["get",..._S];new Set(OA);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ya.apply(this,arguments)}const mh=O.createContext(null),vS=O.createContext(null),hi=O.createContext(null),yh=O.createContext(null),ar=O.createContext({outlet:null,matches:[],isDataRoute:!1}),wS=O.createContext(null);function LA(t,e){let{relative:n}=e===void 0?{}:e;po()||Me(!1);let{basename:i,navigator:r}=O.useContext(hi),{hash:s,pathname:o,search:a}=_h(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:qi([i,o])),r.createHref({pathname:l,search:a,hash:s})}function po(){return O.useContext(yh)!=null}function Xr(){return po()||Me(!1),O.useContext(yh).location}function ES(t){O.useContext(hi).static||O.useLayoutEffect(t)}function _l(){let{isDataRoute:t}=O.useContext(ar);return t?QA():VA()}function VA(){po()||Me(!1);let t=O.useContext(mh),{basename:e,future:n,navigator:i}=O.useContext(hi),{matches:r}=O.useContext(ar),{pathname:s}=Xr(),o=JSON.stringify(zg(r,n.v7_relativeSplatPath)),a=O.useRef(!1);return ES(()=>{a.current=!0}),O.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=$g(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:qi([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function _h(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(hi),{matches:r}=O.useContext(ar),{pathname:s}=Xr(),o=JSON.stringify(zg(r,i.v7_relativeSplatPath));return O.useMemo(()=>$g(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function FA(t,e){return jA(t,e)}function jA(t,e,n,i){po()||Me(!1);let{navigator:r}=O.useContext(hi),{matches:s}=O.useContext(ar),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Xr(),h;if(e){var d;let E=typeof e=="string"?fo(e):e;l==="/"||(d=E.pathname)!=null&&d.startsWith(l)||Me(!1),h=E}else h=u;let f=h.pathname||"/",m=f;if(l!=="/"){let E=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=fA(t,{pathname:m}),v=WA(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:qi([l,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:qi([l,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,i);return e&&v?O.createElement(yh.Provider,{value:{location:Ya({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Di.Pop}},v):v}function UA(){let t=GA(),e=MA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const BA=O.createElement(UA,null);class zA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ar.Provider,{value:this.props.routeContext},O.createElement(wS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $A(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(mh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ar.Provider,{value:e},i)}function WA(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,y=!1,v=null,E=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||BA,l&&(u<0&&f===0?(YA("route-fallback"),y=!0,E=null):u===f&&(y=!0,E=d.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,f+1)),S=()=>{let b;return m?b=v:y?b=E:d.route.Component?b=O.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,O.createElement($A,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(zA,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}var TS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(TS||{}),SS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(SS||{});function HA(t){let e=O.useContext(mh);return e||Me(!1),e}function qA(t){let e=O.useContext(vS);return e||Me(!1),e}function KA(t){let e=O.useContext(ar);return e||Me(!1),e}function IS(t){let e=KA(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function GA(){var t;let e=O.useContext(wS),n=qA(),i=IS();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function QA(){let{router:t}=HA(TS.UseNavigateStable),e=IS(SS.UseNavigateStable),n=O.useRef(!1);return ES(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ya({fromRouteId:e},s)))},[t,e])}const pv={};function YA(t,e,n){pv[t]||(pv[t]=!0)}function XA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ap(t){let{to:e,replace:n,state:i,relative:r}=t;po()||Me(!1);let{future:s,static:o}=O.useContext(hi),{matches:a}=O.useContext(ar),{pathname:l}=Xr(),u=_l(),h=$g(e,zg(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return O.useEffect(()=>u(JSON.parse(d),{replace:n,state:i,relative:r}),[u,d,r,n,i]),null}function Tn(t){Me(!1)}function JA(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Di.Pop,navigator:s,static:o=!1,future:a}=t;po()&&Me(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:o,future:Ya({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=fo(i));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:y="default"}=i,v=O.useMemo(()=>{let E=Qs(h,l);return E==null?null:{location:{pathname:E,search:d,hash:f,state:m,key:y},navigationType:r}},[l,h,d,f,m,y,r]);return v==null?null:O.createElement(hi.Provider,{value:u},O.createElement(yh.Provider,{children:n,value:v}))}function ZA(t){let{children:e,location:n}=t;return FA(lp(e),n)}new Promise(()=>{});function lp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,lp(i.props.children,s));return}i.type!==Tn&&Me(!1),!i.props.index||!i.props.children||Me(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=lp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bc.apply(this,arguments)}function xS(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function eP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tP(t,e){return t.button===0&&(!e||e==="_self")&&!eP(t)}const nP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],rP="6";try{window.__reactRouterVersion=rP}catch{}const sP=O.createContext({isTransitioning:!1}),oP="startTransition",gv=Jk[oP];function aP(t){let{basename:e,children:n,future:i,window:r}=t,s=O.useRef();s.current==null&&(s.current=cA({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=O.useCallback(d=>{u&&gv?gv(()=>l(d)):l(d)},[l,u]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>XA(i),[i]),O.createElement(JA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const lP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xa=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d}=e,f=xS(e,nP),{basename:m}=O.useContext(hi),y,v=!1;if(typeof u=="string"&&uP.test(u)&&(y=u,lP))try{let b=new URL(window.location.href),R=u.startsWith("//")?new URL(b.protocol+u):new URL(u),M=Qs(R.pathname,m);R.origin===b.origin&&M!=null?u=M+R.search+R.hash:v=!0}catch{}let E=LA(u,{relative:r}),T=hP(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function S(b){i&&i(b),b.defaultPrevented||T(b)}return O.createElement("a",bc({},f,{href:y||E,onClick:v||s?i:S,ref:n,target:l}))}),hs=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,d=xS(e,iP),f=_h(l,{relative:d.relative}),m=Xr(),y=O.useContext(vS),{navigator:v,basename:E}=O.useContext(hi),T=y!=null&&dP(f)&&u===!0,S=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=m.pathname,R=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(b=b.toLowerCase(),R=R?R.toLowerCase():null,S=S.toLowerCase()),R&&E&&(R=Qs(R,E)||R);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=b===S||!o&&b.startsWith(S)&&b.charAt(M)==="/",I=R!=null&&(R===S||!o&&R.startsWith(S)&&R.charAt(S.length)==="/"),w={isActive:D,isPending:I,isTransitioning:T},k=D?i:void 0,C;typeof s=="function"?C=s(w):C=[s,D?"active":null,I?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(w):a;return O.createElement(Xa,bc({},d,{"aria-current":k,className:C,ref:n,style:P,to:l,viewTransition:u}),typeof h=="function"?h(w):h)});var up;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(up||(up={}));var mv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mv||(mv={}));function cP(t){let e=O.useContext(mh);return e||Me(!1),e}function hP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=_l(),u=Xr(),h=_h(t,{relative:o});return O.useCallback(d=>{if(tP(d,n)){d.preventDefault();let f=i!==void 0?i:xc(u)===xc(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,n,t,s,o,a])}function dP(t,e){e===void 0&&(e={});let n=O.useContext(sP);n==null&&Me(!1);let{basename:i}=cP(up.useViewTransitionState),r=_h(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Qs(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Qs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return op(r.pathname,o)!=null||op(r.pathname,s)!=null}var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},fP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||d==null)throw new pP;const f=s<<2|a>>4;if(i.push(f),u!==64){const m=a<<4&240|u>>2;if(i.push(m),d!==64){const y=u<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gP=function(t){const e=bS(t);return kS.encodeByteArray(e,!0)},kc=function(t){return gP(t).replace(/\./g,"")},CS=function(t){try{return kS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=()=>mP().__FIREBASE_DEFAULTS__,_P=()=>{if(typeof process>"u"||typeof yv>"u")return;const t=yv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CS(t[1]);return e&&JSON.parse(e)},vh=()=>{try{return yP()||_P()||vP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AS=t=>{var e,n;return(n=(e=vh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wP=t=>{const e=AS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},PS=()=>{var t;return(t=vh())===null||t===void 0?void 0:t.config},RS=t=>{var e;return(e=vh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kc(JSON.stringify(n)),kc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function IP(){var t;const e=(t=vh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kP(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CP(){return!IP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DS(){try{return typeof indexedDB=="object"}catch{return!1}}function MS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function AP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="FirebaseError";class vn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=PP,Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jr.prototype.create)}}class Jr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?RP(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new vn(r,a,i)}}function RP(t,e){return t.replace(NP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const NP=/\{\$([^}]+)}/g;function DP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(_v(s)&&_v(o)){if(!Cc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function _v(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ea(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ta(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MP(t,e){const n=new OP(t,e);return n.subscribe.bind(n)}class OP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");LP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=jd),r.error===void 0&&(r.error=jd),r.complete===void 0&&(r.complete=jd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=1e3,FP=2,jP=4*60*60*1e3,UP=.5;function vv(t,e=VP,n=FP){const i=e*Math.pow(n,t),r=Math.round(UP*i*(Math.random()-.5)*2);return Math.min(jP,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class mn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new EP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($P(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zP(t){return t===Er?void 0:t}function $P(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const HP={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},qP=oe.INFO,KP={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},GP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=KP[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wh{constructor(e){this.name=e,this._logLevel=qP,this._logHandler=GP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const QP=(t,e)=>e.some(n=>t instanceof n);let wv,Ev;function YP(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XP(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OS=new WeakMap,cp=new WeakMap,LS=new WeakMap,Ud=new WeakMap,Wg=new WeakMap;function JP(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ki(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&OS.set(n,t)}).catch(()=>{}),Wg.set(e,t),e}function ZP(t){if(cp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cp.set(t,e)}let hp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eR(t){hp=t(hp)}function tR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Bd(this),e,...n);return LS.set(i,e.sort?e.sort():[e]),Ki(i)}:XP().includes(t)?function(...e){return t.apply(Bd(this),e),Ki(OS.get(this))}:function(...e){return Ki(t.apply(Bd(this),e))}}function nR(t){return typeof t=="function"?tR(t):(t instanceof IDBTransaction&&ZP(t),QP(t,YP())?new Proxy(t,hp):t)}function Ki(t){if(t instanceof IDBRequest)return JP(t);if(Ud.has(t))return Ud.get(t);const e=nR(t);return e!==t&&(Ud.set(t,e),Wg.set(e,t)),e}const Bd=t=>Wg.get(t);function VS(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Ki(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Ki(o.result),l.oldVersion,l.newVersion,Ki(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const iR=["get","getKey","getAll","getAllKeys","count"],rR=["put","add","delete","clear"],zd=new Map;function Tv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=rR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||iR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return zd.set(e,s),s}eR(t=>({...t,get:(e,n,i)=>Tv(e,n)||t.get(e,n,i),has:(e,n)=>!!Tv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function oR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dp="@firebase/app",Sv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new wh("@firebase/app"),aR="@firebase/app-compat",lR="@firebase/analytics-compat",uR="@firebase/analytics",cR="@firebase/app-check-compat",hR="@firebase/app-check",dR="@firebase/auth",fR="@firebase/auth-compat",pR="@firebase/database",gR="@firebase/data-connect",mR="@firebase/database-compat",yR="@firebase/functions",_R="@firebase/functions-compat",vR="@firebase/installations",wR="@firebase/installations-compat",ER="@firebase/messaging",TR="@firebase/messaging-compat",SR="@firebase/performance",IR="@firebase/performance-compat",xR="@firebase/remote-config",bR="@firebase/remote-config-compat",kR="@firebase/storage",CR="@firebase/storage-compat",AR="@firebase/firestore",PR="@firebase/vertexai-preview",RR="@firebase/firestore-compat",NR="firebase",DR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",MR={[dp]:"fire-core",[aR]:"fire-core-compat",[uR]:"fire-analytics",[lR]:"fire-analytics-compat",[hR]:"fire-app-check",[cR]:"fire-app-check-compat",[dR]:"fire-auth",[fR]:"fire-auth-compat",[pR]:"fire-rtdb",[gR]:"fire-data-connect",[mR]:"fire-rtdb-compat",[yR]:"fire-fn",[_R]:"fire-fn-compat",[vR]:"fire-iid",[wR]:"fire-iid-compat",[ER]:"fire-fcm",[TR]:"fire-fcm-compat",[SR]:"fire-perf",[IR]:"fire-perf-compat",[xR]:"fire-rc",[bR]:"fire-rc-compat",[kR]:"fire-gcs",[CR]:"fire-gcs-compat",[AR]:"fire-fst",[RR]:"fire-fst-compat",[PR]:"fire-vertex","fire-js":"fire-js",[NR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Map,OR=new Map,pp=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function On(t){const e=t.name;if(pp.has(e))return oi.debug(`There were multiple attempts to register component ${e}.`),!1;pp.set(e,t);for(const n of Ac.values())Iv(n,t);for(const n of OR.values())Iv(n,t);return!0}function wl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new Jr("app","Firebase",LR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=DR;function FS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:fp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Gi.create("bad-app-name",{appName:String(r)});if(n||(n=PS()),!n)throw Gi.create("no-options");const s=Ac.get(r);if(s){if(Cc(n,s.options)&&Cc(i,s.config))return s;throw Gi.create("duplicate-app",{appName:r})}const o=new WP(r);for(const l of pp.values())o.addComponent(l);const a=new VR(n,i,o);return Ac.set(r,a),a}function jS(t=fp){const e=Ac.get(t);if(!e&&t===fp&&PS())return FS();if(!e)throw Gi.create("no-app",{appName:t});return e}function en(t,e,n){var i;let r=(i=MR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oi.warn(a.join(" "));return}On(new mn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="firebase-heartbeat-database",jR=1,Ja="firebase-heartbeat-store";let $d=null;function US(){return $d||($d=VS(FR,jR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ja)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gi.create("idb-open",{originalErrorMessage:t.message})})),$d}async function UR(t){try{const n=(await US()).transaction(Ja),i=await n.objectStore(Ja).get(BS(t));return await n.done,i}catch(e){if(e instanceof vn)oi.warn(e.message);else{const n=Gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oi.warn(n.message)}}}async function xv(t,e){try{const i=(await US()).transaction(Ja,"readwrite");await i.objectStore(Ja).put(e,BS(t)),await i.done}catch(n){if(n instanceof vn)oi.warn(n.message);else{const i=Gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});oi.warn(i.message)}}}function BS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=1024,zR=30*24*60*60*1e3;class $R{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=zR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){oi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bv(),{heartbeatsToSend:i,unsentEntries:r}=WR(this._heartbeatsCache.heartbeats),s=kc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return oi.warn(n),""}}}function bv(){return new Date().toISOString().substring(0,10)}function WR(t,e=BR){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),kv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),kv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class HR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DS()?MS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function kv(t){return kc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t){On(new mn("platform-logger",e=>new sR(e),"PRIVATE")),On(new mn("heartbeat",e=>new $R(e),"PRIVATE")),en(dp,Sv,t),en(dp,Sv,"esm2017"),en("fire-js","")}qR("");function Hg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function zS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KR=zS,$S=new Jr("auth","Firebase",zS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new wh("@firebase/auth");function GR(t,...e){Pc.logLevel<=oe.WARN&&Pc.warn(`Auth (${go}): ${t}`,...e)}function zu(t,...e){Pc.logLevel<=oe.ERROR&&Pc.error(`Auth (${go}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw qg(t,...e)}function Pn(t,...e){return qg(t,...e)}function WS(t,e,n){const i=Object.assign(Object.assign({},KR()),{[e]:n});return new Jr("auth","Firebase",i).create(e,{appName:t.name})}function ei(t){return WS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return $S.create(t,...e)}function X(t,e,...n){if(!t)throw qg(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zu(e),new Error(e)}function ai(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QR(){return Cv()==="http:"||Cv()==="https:"}function Cv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QR()||NS()||"connection"in navigator)?navigator.onLine:!0}function XR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.shortDelay=e,this.longDelay=n,ai(n>e,"Short delay should be less than long delay!"),this.isMobile=SP()||bP()}get(){return YR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){ai(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new El(3e4,6e4);function di(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fn(t,e,n,i,r={}){return qS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=vl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return xP()||(u.referrerPolicy="no-referrer"),HS.fetch()(KS(t,t.config.apiHost,n,a),u)})}async function qS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},JR),e);try{const r=new tN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw hu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw hu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw hu(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw WS(t,h,u);yn(t,h)}}catch(r){if(r instanceof vn)throw r;yn(t,"network-request-failed",{message:String(r)})}}async function Tl(t,e,n,i,r={}){const s=await Fn(t,e,n,i,r);return"mfaPendingCredential"in s&&yn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function KS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Kg(t.config,r):`${t.config.apiScheme}://${r}`}function eN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Pn(this.auth,"network-request-failed")),ZR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Pn(t,e,i);return r.customData._tokenResponse=n,r}function Av(t){return t!==void 0&&t.enterprise!==void 0}class nN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function iN(t,e){return Fn(t,"GET","/v2/recaptchaConfig",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e){return Fn(t,"POST","/v1/accounts:delete",e)}async function GS(t,e){return Fn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sN(t,e=!1){const n=ze(t),i=await n.getIdToken(e),r=Gg(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:wa(Wd(r.auth_time)),issuedAtTime:wa(Wd(r.iat)),expirationTime:wa(Wd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wd(t){return Number(t)*1e3}function Gg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{const r=CS(n);return r?JSON.parse(r):(zu("Failed to decode base64 JWT payload"),null)}catch(r){return zu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Pv(t){const e=Gg(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof vn&&oN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function oN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wa(this.lastLoginAt),this.creationTime=wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ys(t,GS(n,{idToken:i}));X(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?QS(s.providerUserInfo):[],a=uN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function lN(t){const e=ze(t);await Rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function QS(t){return t.map(e=>{var{providerId:n}=e,i=Hg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e){const n=await qS(t,{},async()=>{const i=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=KS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HS.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hN(t,e){return Fn(t,"POST","/v2/accounts:revokeToken",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=Pv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await cN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Vs;return i&&(X(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vs,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ys(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sN(this,e)}reload(){return lN(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Rc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(ei(this.auth));const e=await this.getIdToken();return await Ys(this,rN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(u=n.createdAt)!==null&&u!==void 0?u:void 0,S=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:R,isAnonymous:M,providerData:D,stsTokenManager:I}=n;X(b&&I,e,"internal-error");const w=Vs.fromJSON(this.name,I);X(typeof b=="string",e,"internal-error"),vi(d,e.name),vi(f,e.name),X(typeof R=="boolean",e,"internal-error"),X(typeof M=="boolean",e,"internal-error"),vi(m,e.name),vi(y,e.name),vi(v,e.name),vi(E,e.name),vi(T,e.name),vi(S,e.name);const k=new Xn({uid:b,auth:e,email:f,emailVerified:R,displayName:d,isAnonymous:M,photoURL:y,phoneNumber:m,tenantId:v,stsTokenManager:w,createdAt:T,lastLoginAt:S});return D&&Array.isArray(D)&&(k.providerData=D.map(C=>Object.assign({},C))),E&&(k._redirectEventId=E),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new Vs;r.updateFromServerResponse(n);const s=new Xn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Rc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?QS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Vs;a.updateFromIdToken(i);const l=new Xn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new mp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Map;function Jn(t){ai(t instanceof Function,"Expected a class definition");let e=Rv.get(t);return e?(ai(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YS.type="NONE";const Nv=YS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t,e,n){return`firebase:${t}:${e}:${n}`}class Fs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=$u(this.userKey,r.apiKey,s),this.fullPersistenceKey=$u("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Fs(Jn(Nv),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||Jn(Nv);const o=$u(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=Xn._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Fs(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Fs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nI(e))return"Blackberry";if(iI(e))return"Webos";if(JS(e))return"Safari";if((e.includes("chrome/")||ZS(e))&&!e.includes("edge/"))return"Chrome";if(tI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function XS(t=vt()){return/firefox\//i.test(t)}function JS(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZS(t=vt()){return/crios\//i.test(t)}function eI(t=vt()){return/iemobile/i.test(t)}function tI(t=vt()){return/android/i.test(t)}function nI(t=vt()){return/blackberry/i.test(t)}function iI(t=vt()){return/webos/i.test(t)}function Qg(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dN(t=vt()){var e;return Qg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fN(){return kP()&&document.documentMode===10}function rI(t=vt()){return Qg(t)||tI(t)||iI(t)||nI(t)||/windows phone/i.test(t)||eI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e=[]){let n;switch(t){case"Browser":n=Dv(vt());break;case"Worker":n=`${Dv(vt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${go}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(t,e={}){return Fn(t,"GET","/v2/passwordPolicy",di(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=6;class yN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:mN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mv(this),this.idTokenSubscription=new Mv(this),this.beforeStateQueue=new pN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$S,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Fs.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await GS(this,{idToken:e}),i=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(ei(this));const n=e?ze(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gN(this),n=new yN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await hN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Fs.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function lr(t){return ze(t)}class Mv{constructor(e){this.auth=e,this.observer=null,this.addObserver=MP(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vN(t){Eh=t}function oI(t){return Eh.loadJS(t)}function wN(){return Eh.recaptchaEnterpriseScript}function EN(){return Eh.gapiScript}function TN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const SN="recaptcha-enterprise",IN="NO_RECAPTCHA";class xN{constructor(e){this.type=SN,this.auth=lr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{iN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new nN(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;Av(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(IN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&Av(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=wN();l.length!==0&&(l+=a),oI(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Ov(t,e,n,i=!1){const r=new xN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nc(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ov(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ov(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e){const n=wl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Cc(s,e??{}))return r;yn(r,"already-initialized")}return n.initialize({options:e})}function kN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function CN(t,e,n){const i=lr(t);X(i._canInitEmulator,i,"emulator-config-failed"),X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=aI(e),{host:o,port:a}=AN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),PN()}function aI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function AN(t){const e=aI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Lv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Lv(o)}}}function Lv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function RN(t,e){return Fn(t,"POST","/v1/accounts:update",e)}async function NN(t,e){return Fn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e){return Tl(t,"POST","/v1/accounts:signInWithPassword",di(t,e))}async function MN(t,e){return Fn(t,"POST","/v1/accounts:sendOobCode",di(t,e))}async function ON(t,e){return MN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(t,e){return Tl(t,"POST","/v1/accounts:signInWithEmailLink",di(t,e))}async function VN(t,e){return Tl(t,"POST","/v1/accounts:signInWithEmailLink",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends Yg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Za(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Za(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nc(e,n,"signInWithPassword",DN);case"emailLink":return LN(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nc(e,i,"signUpPassword",NN);case"emailLink":return VN(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e){return Tl(t,"POST","/v1/accounts:signInWithIdp",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="http://localhost";class Br extends Yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Hg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Br(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return js(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,js(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,js(e,n)}buildRequest(){const e={requestUri:FN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UN(t){const e=ea(ta(t)).link,n=e?ea(ta(e)).deep_link_id:null,i=ea(ta(t)).deep_link_id;return(i?ea(ta(i)).link:null)||i||n||e||t}class Xg{constructor(e){var n,i,r,s,o,a;const l=ea(ta(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=jN((r=l.mode)!==null&&r!==void 0?r:null);X(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=UN(e);try{return new Xg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.providerId=Zr.PROVIDER_ID}static credential(e,n){return Za._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Xg.parseLink(n);return X(i,"argument-error"),Za._fromEmailAndCode(e,i.code,i.tenantId)}}Zr.PROVIDER_ID="password";Zr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends lI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Sl{constructor(){super("facebook.com")}static credential(e){return Br._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Br._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Sl{constructor(){super("github.com")}static credential(e){return Br._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Sl{constructor(){super("twitter.com")}static credential(e,n){return Br._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(t,e){return Tl(t,"POST","/v1/accounts:signUp",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Xn._fromIdTokenResponse(e,i,r),o=Vv(i);return new zr({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Vv(i);return new zr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Vv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends vn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Dc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Dc(e,n,i,r)}}function uI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dc._fromErrorAndOperation(t,s,e,i):s})}async function zN(t,e,n=!1){const i=await Ys(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(t,e,n=!1){const{auth:i}=t;if(kn(i.app))return Promise.reject(ei(i));const r="reauthenticate";try{const s=await Ys(t,uI(i,r,e,t),n);X(s.idToken,i,"internal-error");const o=Gg(s.idToken);X(o,i,"internal-error");const{sub:a}=o;return X(t.uid===a,i,"user-mismatch"),zr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(t,e,n=!1){if(kn(t.app))return Promise.reject(ei(t));const i="signIn",r=await uI(t,i,e),s=await zr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function $N(t,e){return hI(lr(t),e)}async function WN(t,e){return cI(ze(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(t){const e=lr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HN(t,e,n){const i=lr(t);await Nc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ON)}async function qN(t,e,n){if(kn(t.app))return Promise.reject(ei(t));const i=lr(t),o=await Nc(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&dI(t),l}),a=await zr._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function KN(t,e,n){return kn(t.app)?Promise.reject(ei(t)):$N(ze(t),Zr.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dI(t),i})}function GN(t,e){return QN(ze(t),null,e)}async function QN(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Ys(t,RN(i,s));await t._updateTokensIfNecessary(o,!0)}function YN(t,e,n,i){return ze(t).onIdTokenChanged(e,n,i)}function XN(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function JN(t,e,n,i){return ze(t).onAuthStateChanged(e,n,i)}function ZN(t){return ze(t).signOut()}const Mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mc,"1"),this.storage.removeItem(Mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=1e3,tD=10;class pI extends fI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);fN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,tD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},eD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pI.type="LOCAL";const nD=pI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI extends fI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gI.type="SESSION";const mI=gI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Th(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await iD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Jg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function sD(t){Rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function oD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lD(){return yI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firebaseLocalStorageDb",uD=1,Oc="firebaseLocalStorage",vI="fbase_key";class Il{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sh(t,e){return t.transaction([Oc],e?"readwrite":"readonly").objectStore(Oc)}function cD(){const t=indexedDB.deleteDatabase(_I);return new Il(t).toPromise()}function yp(){const t=indexedDB.open(_I,uD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Oc,{keyPath:vI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Oc)?e(i):(i.close(),await cD(),e(await yp()))})})}async function Fv(t,e,n){const i=Sh(t,!0).put({[vI]:e,value:n});return new Il(i).toPromise()}async function hD(t,e){const n=Sh(t,!1).get(e),i=await new Il(n).toPromise();return i===void 0?null:i.value}function jv(t,e){const n=Sh(t,!0).delete(e);return new Il(n).toPromise()}const dD=800,fD=3;class wI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>fD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance(lD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await oD(),!this.activeServiceWorker)return;this.sender=new rD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yp();return await Fv(e,Mc,"1"),await jv(e,Mc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Fv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>hD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Sh(r,!1).getAll();return new Il(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wI.type="LOCAL";const pD=wI;new El(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t,e){return e?Jn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends Yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mD(t){return hI(t.auth,new Zg(t),t.bypassAuthState)}function yD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),cI(n,new Zg(t),t.bypassAuthState)}async function _D(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),zN(n,new Zg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mD;case"linkViaPopup":case"linkViaRedirect":return _D;case"reauthViaPopup":case"reauthViaRedirect":return yD;default:yn(this.auth,"internal-error")}}resolve(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new El(2e3,1e4);class Ps extends EI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ps.currentPopupAction&&Ps.currentPopupAction.cancel(),Ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const e=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vD.get())};e()}}Ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="pendingRedirect",Wu=new Map;class ED extends EI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Wu.get(this.auth._key());if(!e){try{const i=await TD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Wu.set(this.auth._key(),e)}return this.bypassAuthState||Wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TD(t,e){const n=xD(e),i=ID(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function SD(t,e){Wu.set(t._key(),e)}function ID(t){return Jn(t._redirectPersistence)}function xD(t){return $u(wD,t.config.apiKey,t.name)}async function bD(t,e,n=!1){if(kn(t.app))return Promise.reject(ei(t));const i=lr(t),r=gD(i,e),o=await new ED(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=10*60*1e3;class CD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!TI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uv(e))}saveEventToCache(e){this.cachedEventUids.add(Uv(e)),this.lastProcessedEventTime=Date.now()}}function Uv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(t,e={}){return Fn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ND=/^https?/;async function DD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PD(t);for(const n of e)try{if(MD(n))return}catch{}yn(t,"unauthorized-domain")}function MD(t){const e=gp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!ND.test(n))return!1;if(RD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new El(3e4,6e4);function Bv(){const t=Rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LD(t){return new Promise((e,n)=>{var i,r,s;function o(){Bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bv(),n(Pn(t,"network-request-failed"))},timeout:OD.get()})}if(!((r=(i=Rn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Rn().gapi)===null||s===void 0)&&s.load)o();else{const a=TN("iframefcb");return Rn()[a]=()=>{gapi.load?o():n(Pn(t,"network-request-failed"))},oI(`${EN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Hu=null,e})}let Hu=null;function VD(t){return Hu=Hu||LD(t),Hu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new El(5e3,15e3),jD="__/auth/iframe",UD="emulator/auth/iframe",BD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $D(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kg(e,UD):`https://${t.config.authDomain}/${jD}`,i={apiKey:e.apiKey,appName:t.name,v:go},r=zD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${vl(i).slice(1)}`}async function WD(t){const e=await VD(t),n=Rn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:$D(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Pn(t,"network-request-failed"),a=Rn().setTimeout(()=>{s(o)},FD.get());function l(){Rn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qD=500,KD=600,GD="_blank",QD="http://localhost";class zv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YD(t,e,n,i=qD,r=KD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},HD),{width:i.toString(),height:r.toString(),top:s,left:o}),u=vt().toLowerCase();n&&(a=ZS(u)?GD:n),XS(u)&&(e=e||QD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,y])=>`${f}${m}=${y},`,"");if(dN(u)&&a!=="_self")return XD(e||"",a),new zv(null);const d=window.open(e||"",a,h);X(d,t,"popup-blocked");try{d.focus()}catch{}return new zv(d)}function XD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="__/auth/handler",ZD="emulator/auth/handler",eM=encodeURIComponent("fac");async function $v(t,e,n,i,r,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:go,eventId:r};if(e instanceof lI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Sl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${eM}=${encodeURIComponent(l)}`:"";return`${tM(t)}?${vl(a).slice(1)}${u}`}function tM({config:t}){return t.emulator?Kg(t,ZD):`https://${t.authDomain}/${JD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class nM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mI,this._completeRedirectFn=bD,this._overrideRedirectResult=SD}async _openPopup(e,n,i,r){var s;ai((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await $v(e,n,i,gp(),r);return YD(e,o,Jg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await $v(e,n,i,gp(),r);return sD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ai(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await WD(e),i=new CD(e);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hd,{type:Hd},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Hd];o!==void 0&&n(!!o),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rI()||JS()||Qg()}}const iM=nM;var Wv="@firebase/auth",Hv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oM(t){On(new mn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sI(t)},u=new _N(i,r,s,l);return kN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),On(new mn("auth-internal",e=>{const n=lr(e.getProvider("auth").getImmediate());return(i=>new rM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),en(Wv,Hv,sM(t)),en(Wv,Hv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=5*60,lM=RS("authIdTokenMaxAge")||aM;let qv=null;const uM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>lM)return;const r=n==null?void 0:n.token;qv!==r&&(qv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function cM(t=jS()){const e=wl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bN(t,{popupRedirectResolver:iM,persistence:[pD,nD,mI]}),i=RS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=uM(s.toString());XN(n,o,()=>o(n.currentUser)),YN(n,a=>o(a))}}const r=AS("auth");return r&&CN(n,`http://${r}`),n}function hM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Pn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",hM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oM("Browser");var dM="firebase",fM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(dM,fM,"app");var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,SI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function k(){}k.prototype=w.prototype,I.D=w.prototype,I.prototype=new k,I.prototype.constructor=I,I.C=function(C,P,N){for(var A=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)A[ie-2]=arguments[ie];return w.prototype[P].apply(C,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,w,k){k||(k=0);var C=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)C[P]=w.charCodeAt(k++)|w.charCodeAt(k++)<<8|w.charCodeAt(k++)<<16|w.charCodeAt(k++)<<24;else for(P=0;16>P;++P)C[P]=w[k++]|w[k++]<<8|w[k++]<<16|w[k++]<<24;w=I.g[0],k=I.g[1],P=I.g[2];var N=I.g[3],A=w+(N^k&(P^N))+C[0]+3614090360&4294967295;w=k+(A<<7&4294967295|A>>>25),A=N+(P^w&(k^P))+C[1]+3905402710&4294967295,N=w+(A<<12&4294967295|A>>>20),A=P+(k^N&(w^k))+C[2]+606105819&4294967295,P=N+(A<<17&4294967295|A>>>15),A=k+(w^P&(N^w))+C[3]+3250441966&4294967295,k=P+(A<<22&4294967295|A>>>10),A=w+(N^k&(P^N))+C[4]+4118548399&4294967295,w=k+(A<<7&4294967295|A>>>25),A=N+(P^w&(k^P))+C[5]+1200080426&4294967295,N=w+(A<<12&4294967295|A>>>20),A=P+(k^N&(w^k))+C[6]+2821735955&4294967295,P=N+(A<<17&4294967295|A>>>15),A=k+(w^P&(N^w))+C[7]+4249261313&4294967295,k=P+(A<<22&4294967295|A>>>10),A=w+(N^k&(P^N))+C[8]+1770035416&4294967295,w=k+(A<<7&4294967295|A>>>25),A=N+(P^w&(k^P))+C[9]+2336552879&4294967295,N=w+(A<<12&4294967295|A>>>20),A=P+(k^N&(w^k))+C[10]+4294925233&4294967295,P=N+(A<<17&4294967295|A>>>15),A=k+(w^P&(N^w))+C[11]+2304563134&4294967295,k=P+(A<<22&4294967295|A>>>10),A=w+(N^k&(P^N))+C[12]+1804603682&4294967295,w=k+(A<<7&4294967295|A>>>25),A=N+(P^w&(k^P))+C[13]+4254626195&4294967295,N=w+(A<<12&4294967295|A>>>20),A=P+(k^N&(w^k))+C[14]+2792965006&4294967295,P=N+(A<<17&4294967295|A>>>15),A=k+(w^P&(N^w))+C[15]+1236535329&4294967295,k=P+(A<<22&4294967295|A>>>10),A=w+(P^N&(k^P))+C[1]+4129170786&4294967295,w=k+(A<<5&4294967295|A>>>27),A=N+(k^P&(w^k))+C[6]+3225465664&4294967295,N=w+(A<<9&4294967295|A>>>23),A=P+(w^k&(N^w))+C[11]+643717713&4294967295,P=N+(A<<14&4294967295|A>>>18),A=k+(N^w&(P^N))+C[0]+3921069994&4294967295,k=P+(A<<20&4294967295|A>>>12),A=w+(P^N&(k^P))+C[5]+3593408605&4294967295,w=k+(A<<5&4294967295|A>>>27),A=N+(k^P&(w^k))+C[10]+38016083&4294967295,N=w+(A<<9&4294967295|A>>>23),A=P+(w^k&(N^w))+C[15]+3634488961&4294967295,P=N+(A<<14&4294967295|A>>>18),A=k+(N^w&(P^N))+C[4]+3889429448&4294967295,k=P+(A<<20&4294967295|A>>>12),A=w+(P^N&(k^P))+C[9]+568446438&4294967295,w=k+(A<<5&4294967295|A>>>27),A=N+(k^P&(w^k))+C[14]+3275163606&4294967295,N=w+(A<<9&4294967295|A>>>23),A=P+(w^k&(N^w))+C[3]+4107603335&4294967295,P=N+(A<<14&4294967295|A>>>18),A=k+(N^w&(P^N))+C[8]+1163531501&4294967295,k=P+(A<<20&4294967295|A>>>12),A=w+(P^N&(k^P))+C[13]+2850285829&4294967295,w=k+(A<<5&4294967295|A>>>27),A=N+(k^P&(w^k))+C[2]+4243563512&4294967295,N=w+(A<<9&4294967295|A>>>23),A=P+(w^k&(N^w))+C[7]+1735328473&4294967295,P=N+(A<<14&4294967295|A>>>18),A=k+(N^w&(P^N))+C[12]+2368359562&4294967295,k=P+(A<<20&4294967295|A>>>12),A=w+(k^P^N)+C[5]+4294588738&4294967295,w=k+(A<<4&4294967295|A>>>28),A=N+(w^k^P)+C[8]+2272392833&4294967295,N=w+(A<<11&4294967295|A>>>21),A=P+(N^w^k)+C[11]+1839030562&4294967295,P=N+(A<<16&4294967295|A>>>16),A=k+(P^N^w)+C[14]+4259657740&4294967295,k=P+(A<<23&4294967295|A>>>9),A=w+(k^P^N)+C[1]+2763975236&4294967295,w=k+(A<<4&4294967295|A>>>28),A=N+(w^k^P)+C[4]+1272893353&4294967295,N=w+(A<<11&4294967295|A>>>21),A=P+(N^w^k)+C[7]+4139469664&4294967295,P=N+(A<<16&4294967295|A>>>16),A=k+(P^N^w)+C[10]+3200236656&4294967295,k=P+(A<<23&4294967295|A>>>9),A=w+(k^P^N)+C[13]+681279174&4294967295,w=k+(A<<4&4294967295|A>>>28),A=N+(w^k^P)+C[0]+3936430074&4294967295,N=w+(A<<11&4294967295|A>>>21),A=P+(N^w^k)+C[3]+3572445317&4294967295,P=N+(A<<16&4294967295|A>>>16),A=k+(P^N^w)+C[6]+76029189&4294967295,k=P+(A<<23&4294967295|A>>>9),A=w+(k^P^N)+C[9]+3654602809&4294967295,w=k+(A<<4&4294967295|A>>>28),A=N+(w^k^P)+C[12]+3873151461&4294967295,N=w+(A<<11&4294967295|A>>>21),A=P+(N^w^k)+C[15]+530742520&4294967295,P=N+(A<<16&4294967295|A>>>16),A=k+(P^N^w)+C[2]+3299628645&4294967295,k=P+(A<<23&4294967295|A>>>9),A=w+(P^(k|~N))+C[0]+4096336452&4294967295,w=k+(A<<6&4294967295|A>>>26),A=N+(k^(w|~P))+C[7]+1126891415&4294967295,N=w+(A<<10&4294967295|A>>>22),A=P+(w^(N|~k))+C[14]+2878612391&4294967295,P=N+(A<<15&4294967295|A>>>17),A=k+(N^(P|~w))+C[5]+4237533241&4294967295,k=P+(A<<21&4294967295|A>>>11),A=w+(P^(k|~N))+C[12]+1700485571&4294967295,w=k+(A<<6&4294967295|A>>>26),A=N+(k^(w|~P))+C[3]+2399980690&4294967295,N=w+(A<<10&4294967295|A>>>22),A=P+(w^(N|~k))+C[10]+4293915773&4294967295,P=N+(A<<15&4294967295|A>>>17),A=k+(N^(P|~w))+C[1]+2240044497&4294967295,k=P+(A<<21&4294967295|A>>>11),A=w+(P^(k|~N))+C[8]+1873313359&4294967295,w=k+(A<<6&4294967295|A>>>26),A=N+(k^(w|~P))+C[15]+4264355552&4294967295,N=w+(A<<10&4294967295|A>>>22),A=P+(w^(N|~k))+C[6]+2734768916&4294967295,P=N+(A<<15&4294967295|A>>>17),A=k+(N^(P|~w))+C[13]+1309151649&4294967295,k=P+(A<<21&4294967295|A>>>11),A=w+(P^(k|~N))+C[4]+4149444226&4294967295,w=k+(A<<6&4294967295|A>>>26),A=N+(k^(w|~P))+C[11]+3174756917&4294967295,N=w+(A<<10&4294967295|A>>>22),A=P+(w^(N|~k))+C[2]+718787259&4294967295,P=N+(A<<15&4294967295|A>>>17),A=k+(N^(P|~w))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+N&4294967295}i.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var k=w-this.blockSize,C=this.B,P=this.h,N=0;N<w;){if(P==0)for(;N<=k;)r(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<w;)if(C[P++]=I.charCodeAt(N++),P==this.blockSize){r(this,C),P=0;break}}else for(;N<w;)if(C[P++]=I[N++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=w},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var k=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=k&255,k/=256;for(this.u(I),I=Array(16),w=k=0;4>w;++w)for(var C=0;32>C;C+=8)I[k++]=this.g[w]>>>C&255;return I};function s(I,w){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=w(I)}function o(I,w){this.h=w;for(var k=[],C=!0,P=I.length-1;0<=P;P--){var N=I[P]|0;C&&N==w||(k[P]=N,C=!1)}this.g=k}var a={};function l(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return E(u(-I));for(var w=[],k=1,C=0;I>=k;C++)w[C]=I/k|0,k*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return E(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(w,8)),C=d,P=0;P<I.length;P+=8){var N=Math.min(8,I.length-P),A=parseInt(I.substring(P,P+N),w);8>N?(N=u(Math.pow(w,N)),C=C.j(N).add(u(A))):(C=C.j(k),C=C.add(u(A)))}return C}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-E(this).m();for(var I=0,w=1,k=0;k<this.g.length;k++){var C=this.i(k);I+=(0<=C?C:4294967296+C)*w,w*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(v(this))return"-"+E(this).toString(I);for(var w=u(Math.pow(I,6)),k=this,C="";;){var P=R(k,w).g;k=T(k,P.j(w));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(I);if(k=P,y(k))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=T(this,I),v(I)?-1:y(I)?0:1};function E(I){for(var w=I.g.length,k=[],C=0;C<w;C++)k[C]=~I.g[C];return new o(k,~I.h).add(f)}t.abs=function(){return v(this)?E(this):this},t.add=function(I){for(var w=Math.max(this.g.length,I.g.length),k=[],C=0,P=0;P<=w;P++){var N=C+(this.i(P)&65535)+(I.i(P)&65535),A=(N>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);C=A>>>16,N&=65535,A&=65535,k[P]=A<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(I,w){return I.add(E(w))}t.j=function(I){if(y(this)||y(I))return d;if(v(this))return v(I)?E(this).j(E(I)):E(E(this).j(I));if(v(I))return E(this.j(E(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var w=this.g.length+I.g.length,k=[],C=0;C<2*w;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<I.g.length;P++){var N=this.i(C)>>>16,A=this.i(C)&65535,ie=I.i(P)>>>16,ue=I.i(P)&65535;k[2*C+2*P]+=A*ue,S(k,2*C+2*P),k[2*C+2*P+1]+=N*ue,S(k,2*C+2*P+1),k[2*C+2*P+1]+=A*ie,S(k,2*C+2*P+1),k[2*C+2*P+2]+=N*ie,S(k,2*C+2*P+2)}for(C=0;C<w;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=w;C<2*w;C++)k[C]=0;return new o(k,0)};function S(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function b(I,w){this.g=I,this.h=w}function R(I,w){if(y(w))throw Error("division by zero");if(y(I))return new b(d,d);if(v(I))return w=R(E(I),w),new b(E(w.g),E(w.h));if(v(w))return w=R(I,E(w)),new b(E(w.g),w.h);if(30<I.g.length){if(v(I)||v(w))throw Error("slowDivide_ only works with positive integers.");for(var k=f,C=w;0>=C.l(I);)k=M(k),C=M(C);var P=D(k,1),N=D(C,1);for(C=D(C,2),k=D(k,2);!y(C);){var A=N.add(C);0>=A.l(I)&&(P=P.add(k),N=A),C=D(C,1),k=D(k,1)}return w=T(I,P.j(w)),new b(P,w)}for(P=d;0<=I.l(w);){for(k=Math.max(1,Math.floor(I.m()/w.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=u(k),A=N.j(w);v(A)||0<A.l(I);)k-=C,N=u(k),A=N.j(w);y(N)&&(N=f),P=P.add(N),I=T(I,A)}return new b(P,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var w=Math.max(this.g.length,I.g.length),k=[],C=0;C<w;C++)k[C]=this.i(C)&I.i(C);return new o(k,this.h&I.h)},t.or=function(I){for(var w=Math.max(this.g.length,I.g.length),k=[],C=0;C<w;C++)k[C]=this.i(C)|I.i(C);return new o(k,this.h|I.h)},t.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),k=[],C=0;C<w;C++)k[C]=this.i(C)^I.i(C);return new o(k,this.h^I.h)};function M(I){for(var w=I.g.length+1,k=[],C=0;C<w;C++)k[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(k,I.h)}function D(I,w){var k=w>>5;w%=32;for(var C=I.g.length-k,P=[],N=0;N<C;N++)P[N]=0<w?I.i(N+k)>>>w|I.i(N+k+1)<<32-w:I.i(N+k);return new o(P,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,SI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Dr=o}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});var du=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var II,na,xI,qu,_p,bI,kI,CI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,g){return c==Array.prototype||c==Object.prototype||(c[p]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof du=="object"&&du];for(var p=0;p<c.length;++p){var g=c[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(c,p){if(p)e:{var g=i;c=c.split(".");for(var x=0;x<c.length-1;x++){var L=c[x];if(!(L in g))break e;g=g[L]}c=c[c.length-1],x=g[c],p=p(x),p!=x&&p!=null&&e(g,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var g=0,x=!1,L={next:function(){if(!x&&g<c.length){var V=g++;return{value:p(V,c[V]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(c){return c||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,g){return c.call.apply(c.bind,arguments)}function d(c,p,g){if(!c)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function f(c,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(c,p){var g=Array.prototype.slice.call(arguments,1);return function(){var x=g.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function y(c,p){function g(){}g.prototype=p.prototype,c.aa=p.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(x,L,V){for(var z=Array(arguments.length-2),we=2;we<arguments.length;we++)z[we-2]=arguments[we];return p.prototype[L].apply(x,z)}}function v(c){const p=c.length;if(0<p){const g=Array(p);for(let x=0;x<p;x++)g[x]=c[x];return g}return[]}function E(c,p){for(let g=1;g<arguments.length;g++){const x=arguments[g];if(l(x)){const L=c.length||0,V=x.length||0;c.length=L+V;for(let z=0;z<V;z++)c[L+z]=x[z]}else c.push(x)}}class T{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function S(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var M=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function D(c,p,g){for(const x in c)p.call(g,c[x],x,c)}function I(c,p){for(const g in c)p.call(void 0,c[g],g,c)}function w(c){const p={};for(const g in c)p[g]=c[g];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,p){let g,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(g in x)c[g]=x[g];for(let V=0;V<k.length;V++)g=k[V],Object.prototype.hasOwnProperty.call(x,g)&&(c[g]=x[g])}}function P(c){var p=1;c=c.split(":");const g=[];for(;0<p&&c.length;)g.push(c.shift()),p--;return c.length&&g.push(c.join(":")),g}function N(c){a.setTimeout(()=>{throw c},0)}function A(){var c=q;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ie{constructor(){this.h=this.g=null}add(p,g){const x=ue.get();x.set(p,g),this.h?this.h.next=x:this.g=x,this.h=x}}var ue=new T(()=>new me,c=>c.reset());class me{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,B=!1,q=new ie,K=()=>{const c=a.Promise.resolve(void 0);Ee=()=>{c.then(he)}};var he=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(g){N(g)}var p=ue;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}B=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return c}();function Pe(c,p){if(J.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(M){e:{try{R(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=c.fromElement:g=="mouseout"&&(p=c.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Re[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}y(Pe,J);var Re={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ft="closure_listenable_"+(1e6*Math.random()|0),is=0;function qh(c,p,g,x,L){this.listener=c,this.proxy=null,this.src=p,this.type=g,this.capture=!!x,this.ha=L,this.key=++is,this.da=this.fa=!1}function pi(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function rs(c){this.src=c,this.g={},this.h=0}rs.prototype.add=function(c,p,g,x,L){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var z=wo(c,p,x,L);return-1<z?(p=c[z],g||(p.fa=!1)):(p=new qh(p,this.src,V,!!x,L),p.fa=g,c.push(p)),p};function ss(c,p){var g=p.type;if(g in c.g){var x=c.g[g],L=Array.prototype.indexOf.call(x,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(x,L,1),V&&(pi(p),c.g[g].length==0&&(delete c.g[g],c.h--))}}function wo(c,p,g,x){for(var L=0;L<c.length;++L){var V=c[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==x)return L}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),Je={};function ty(c,p,g,x,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)ty(c,p[V],g,x,L);return null}return g=ry(g),c&&c[Ft]?c.K(p,g,u(x)?!!x.capture:!1,L):rk(c,p,g,!1,x,L)}function rk(c,p,g,x,L,V){if(!p)throw Error("Invalid event type");var z=u(L)?!!L.capture:!!L,we=Gh(c);if(we||(c[Y]=we=new rs(c)),g=we.add(p,g,x,z,V),g.proxy)return g;if(x=sk(),g.proxy=x,x.src=c,x.listener=g,c.addEventListener)ge||(L=z),L===void 0&&(L=!1),c.addEventListener(p.toString(),x,L);else if(c.attachEvent)c.attachEvent(iy(p.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return g}function sk(){function c(g){return p.call(c.src,c.listener,g)}const p=ok;return c}function ny(c,p,g,x,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)ny(c,p[V],g,x,L);else x=u(x)?!!x.capture:!!x,g=ry(g),c&&c[Ft]?(c=c.i,p=String(p).toString(),p in c.g&&(V=c.g[p],g=wo(V,g,x,L),-1<g&&(pi(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete c.g[p],c.h--)))):c&&(c=Gh(c))&&(p=c.g[p.toString()],c=-1,p&&(c=wo(p,g,x,L)),(g=-1<c?p[c]:null)&&Kh(g))}function Kh(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Ft])ss(p.i,c);else{var g=c.type,x=c.proxy;p.removeEventListener?p.removeEventListener(g,x,c.capture):p.detachEvent?p.detachEvent(iy(g),x):p.addListener&&p.removeListener&&p.removeListener(x),(g=Gh(p))?(ss(g,c),g.h==0&&(g.src=null,p[Y]=null)):pi(c)}}}function iy(c){return c in Je?Je[c]:Je[c]="on"+c}function ok(c,p){if(c.da)c=!0;else{p=new Pe(p,this);var g=c.listener,x=c.ha||c.src;c.fa&&Kh(c),c=g.call(x,p)}return c}function Gh(c){return c=c[Y],c instanceof rs?c:null}var Qh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ry(c){return typeof c=="function"?c:(c[Qh]||(c[Qh]=function(p){return c.handleEvent(p)}),c[Qh])}function lt(){$.call(this),this.i=new rs(this),this.M=this,this.F=null}y(lt,$),lt.prototype[Ft]=!0,lt.prototype.removeEventListener=function(c,p,g,x){ny(this,c,p,g,x)};function wt(c,p){var g,x=c.F;if(x)for(g=[];x;x=x.F)g.push(x);if(c=c.M,x=p.type||p,typeof p=="string")p=new J(p,c);else if(p instanceof J)p.target=p.target||c;else{var L=p;p=new J(x,c),C(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var z=p.g=g[V];L=Nl(z,x,!0,p)&&L}if(z=p.g=c,L=Nl(z,x,!0,p)&&L,L=Nl(z,x,!1,p)&&L,g)for(V=0;V<g.length;V++)z=p.g=g[V],L=Nl(z,x,!1,p)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var g=c.g[p],x=0;x<g.length;x++)pi(g[x]);delete c.g[p],c.h--}}this.F=null},lt.prototype.K=function(c,p,g,x){return this.i.add(String(c),p,!1,g,x)},lt.prototype.L=function(c,p,g,x){return this.i.add(String(c),p,!0,g,x)};function Nl(c,p,g,x){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var z=p[V];if(z&&!z.da&&z.capture==g){var we=z.listener,Ze=z.ha||z.src;z.fa&&ss(c.i,z),L=we.call(Ze,x)!==!1&&L}}return L&&!x.defaultPrevented}function sy(c,p,g){if(typeof c=="function")g&&(c=f(c,g));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function oy(c){c.g=sy(()=>{c.g=null,c.i&&(c.i=!1,oy(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ak extends ${constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:oy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eo(c){$.call(this),this.h=c,this.g={}}y(Eo,$);var ay=[];function ly(c){D(c.g,function(p,g){this.g.hasOwnProperty(g)&&Kh(p)},c),c.g={}}Eo.prototype.N=function(){Eo.aa.N.call(this),ly(this)},Eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yh=a.JSON.stringify,lk=a.JSON.parse,uk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xh(){}Xh.prototype.h=null;function uy(c){return c.h||(c.h=c.i())}function cy(){}var To={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jh(){J.call(this,"d")}y(Jh,J);function Zh(){J.call(this,"c")}y(Zh,J);var cr={},hy=null;function Dl(){return hy=hy||new lt}cr.La="serverreachability";function dy(c){J.call(this,cr.La,c)}y(dy,J);function So(c){const p=Dl();wt(p,new dy(p))}cr.STAT_EVENT="statevent";function fy(c,p){J.call(this,cr.STAT_EVENT,c),this.stat=p}y(fy,J);function Et(c){const p=Dl();wt(p,new fy(p,c))}cr.Ma="timingevent";function py(c,p){J.call(this,cr.Ma,c),this.size=p}y(py,J);function Io(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function xo(){this.g=!0}xo.prototype.xa=function(){this.g=!1};function ck(c,p,g,x,L,V){c.info(function(){if(c.g)if(V)for(var z="",we=V.split("&"),Ze=0;Ze<we.length;Ze++){var de=we[Ze].split("=");if(1<de.length){var ut=de[0];de=de[1];var ct=ut.split("_");z=2<=ct.length&&ct[1]=="type"?z+(ut+"="+de+"&"):z+(ut+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+p+`
`+g+`
`+z})}function hk(c,p,g,x,L,V,z){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+z})}function os(c,p,g,x){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+fk(c,g)+(x?" "+x:"")})}function dk(c,p){c.info(function(){return"TIMEOUT: "+p})}xo.prototype.info=function(){};function fk(c,p){if(!c.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var x=g[c];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return Yh(g)}catch{return p}}var Ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ed;function Ol(){}y(Ol,Xh),Ol.prototype.g=function(){return new XMLHttpRequest},Ol.prototype.i=function(){return{}},ed=new Ol;function gi(c,p,g,x){this.j=c,this.i=p,this.l=g,this.R=x||1,this.U=new Eo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new my}function my(){this.i=null,this.g="",this.h=!1}var yy={},td={};function nd(c,p,g){c.L=1,c.v=jl(jn(p)),c.m=g,c.P=!0,_y(c,null)}function _y(c,p){c.F=Date.now(),Ll(c),c.A=jn(c.v);var g=c.A,x=c.R;Array.isArray(x)||(x=[String(x)]),Ny(g.i,"t",x),c.C=0,g=c.j.J,c.h=new my,c.g=Yy(c.j,g?p:null,!c.m),0<c.O&&(c.M=new ak(f(c.Y,c,c.g),c.O)),p=c.U,g=c.g,x=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(ay[0]=L.toString()),L=ay);for(var V=0;V<L.length;V++){var z=ty(g,L[V],x||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),So(),ck(c.i,c.u,c.A,c.l,c.R,c.m)}gi.prototype.ca=function(c){c=c.target;const p=this.M;p&&Un(c)==3?p.j():this.Y(c)},gi.prototype.Y=function(c){try{if(c==this.g)e:{const ct=Un(this.g);var p=this.g.Ba();const us=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||jy(this.g)))){this.J||ct!=4||p==7||(p==8||0>=us?So(3):So(2)),id(this);var g=this.g.Z();this.X=g;t:if(vy(this)){var x=jy(this.g);c="";var L=x.length,V=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),bo(this);var z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(x[p],{stream:!(V&&p==L-1)});x.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,hk(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Ze=this.g;if((we=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(we)){var de=we;break t}}de=null}if(g=de)os(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rd(this,g);else{this.o=!1,this.s=3,Et(12),hr(this),bo(this);break e}}if(this.P){g=!0;let on;for(;!this.J&&this.C<z.length;)if(on=pk(this,z),on==td){ct==4&&(this.s=4,Et(14),g=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(on==yy){this.s=4,Et(15),os(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else os(this.i,this.l,on,null),rd(this,on);if(vy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||z.length!=0||this.h.h||(this.s=1,Et(16),g=!1),this.o=this.o&&g,!g)os(this.i,this.l,z,"[Invalid Chunked Response]"),hr(this),bo(this);else if(0<z.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),cd(ut),ut.M=!0,Et(11))}}else os(this.i,this.l,z,null),rd(this,z);ct==4&&hr(this),this.o&&!this.J&&(ct==4?qy(this.j,this):(this.o=!1,Ll(this)))}else Rk(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),hr(this),bo(this)}}}catch{}finally{}};function vy(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function pk(c,p){var g=c.C,x=p.indexOf(`
`,g);return x==-1?td:(g=Number(p.substring(g,x)),isNaN(g)?yy:(x+=1,x+g>p.length?td:(p=p.slice(x,x+g),c.C=x+g,p)))}gi.prototype.cancel=function(){this.J=!0,hr(this)};function Ll(c){c.S=Date.now()+c.I,wy(c,c.I)}function wy(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Io(f(c.ba,c),p)}function id(c){c.B&&(a.clearTimeout(c.B),c.B=null)}gi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(dk(this.i,this.A),this.L!=2&&(So(),Et(17)),hr(this),this.s=2,bo(this)):wy(this,this.S-c)};function bo(c){c.j.G==0||c.J||qy(c.j,c)}function hr(c){id(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,ly(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function rd(c,p){try{var g=c.j;if(g.G!=0&&(g.g==c||sd(g.h,c))){if(!c.K&&sd(g.h,c)&&g.G==3){try{var x=g.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Hl(g),$l(g);else break e;ud(g),Et(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Io(f(g.Za,g),6e3));if(1>=Sy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else fr(g,11)}else if((c.K||g.g==c)&&Hl(g),!S(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let de=L[p];if(g.T=de[0],de=de[1],g.G==2)if(de[0]=="c"){g.K=de[1],g.ia=de[2];const ut=de[3];ut!=null&&(g.la=ut,g.j.info("VER="+g.la));const ct=de[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const us=de[5];us!=null&&typeof us=="number"&&0<us&&(x=1.5*us,g.L=x,g.j.info("backChannelRequestTimeoutMs_="+x)),x=g;const on=c.g;if(on){const Kl=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kl){var V=x.h;V.g||Kl.indexOf("spdy")==-1&&Kl.indexOf("quic")==-1&&Kl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(od(V,V.h),V.h=null))}if(x.D){const hd=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;hd&&(x.ya=hd,Ie(x.I,x.D,hd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),x=g;var z=c;if(x.qa=Qy(x,x.J?x.ia:null,x.W),z.K){Iy(x.h,z);var we=z,Ze=x.L;Ze&&(we.I=Ze),we.B&&(id(we),Ll(we)),x.g=z}else Wy(x);0<g.i.length&&Wl(g)}else de[0]!="stop"&&de[0]!="close"||fr(g,7);else g.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?fr(g,7):ld(g):de[0]!="noop"&&g.l&&g.l.ta(de),g.v=0)}}So(4)}catch{}}var gk=class{constructor(c,p){this.g=c,this.map=p}};function Ey(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ty(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Sy(c){return c.h?1:c.g?c.g.size:0}function sd(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function od(c,p){c.g?c.g.add(p):c.h=p}function Iy(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Ey.prototype.cancel=function(){if(this.i=xy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function xy(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const g of c.g.values())p=p.concat(g.D);return p}return v(c.i)}function mk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],g=c.length,x=0;x<g;x++)p.push(c[x]);return p}p=[],g=0;for(x in c)p[g++]=c[x];return p}function yk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var g=0;g<c;g++)p.push(g);return p}p=[],g=0;for(const x in c)p[g++]=x;return p}}}function by(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var g=yk(c),x=mk(c),L=x.length,V=0;V<L;V++)p.call(void 0,x[V],g&&g[V],c)}var ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _k(c,p){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var x=c[g].indexOf("="),L=null;if(0<=x){var V=c[g].substring(0,x);L=c[g].substring(x+1)}else V=c[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function dr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof dr){this.h=c.h,Vl(this,c.j),this.o=c.o,this.g=c.g,Fl(this,c.s),this.l=c.l;var p=c.i,g=new Ao;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Cy(this,g),this.m=c.m}else c&&(p=String(c).match(ky))?(this.h=!1,Vl(this,p[1]||"",!0),this.o=ko(p[2]||""),this.g=ko(p[3]||"",!0),Fl(this,p[4]),this.l=ko(p[5]||"",!0),Cy(this,p[6]||"",!0),this.m=ko(p[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}dr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Co(p,Ay,!0),":");var g=this.g;return(g||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Co(p,Ay,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Co(g,g.charAt(0)=="/"?Ek:wk,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Co(g,Sk)),c.join("")};function jn(c){return new dr(c)}function Vl(c,p,g){c.j=g?ko(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Fl(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Cy(c,p,g){p instanceof Ao?(c.i=p,Ik(c.i,c.h)):(g||(p=Co(p,Tk)),c.i=new Ao(p,c.h))}function Ie(c,p,g){c.i.set(p,g)}function jl(c){return Ie(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ko(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Co(c,p,g){return typeof c=="string"?(c=encodeURI(c).replace(p,vk),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ay=/[#\/\?@]/g,wk=/[#\?:]/g,Ek=/[#\?]/g,Tk=/[#\?@]/g,Sk=/#/g;function Ao(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function mi(c){c.g||(c.g=new Map,c.h=0,c.i&&_k(c.i,function(p,g){c.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Ao.prototype,t.add=function(c,p){mi(this),this.i=null,c=as(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(p),this.h+=1,this};function Py(c,p){mi(c),p=as(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Ry(c,p){return mi(c),p=as(c,p),c.g.has(p)}t.forEach=function(c,p){mi(this),this.g.forEach(function(g,x){g.forEach(function(L){c.call(p,L,x,this)},this)},this)},t.na=function(){mi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let x=0;x<p.length;x++){const L=c[x];for(let V=0;V<L.length;V++)g.push(p[x])}return g},t.V=function(c){mi(this);let p=[];if(typeof c=="string")Ry(this,c)&&(p=p.concat(this.g.get(as(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)p=p.concat(c[g])}return p},t.set=function(c,p){return mi(this),this.i=null,c=as(this,c),Ry(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Ny(c,p,g){Py(c,p),0<g.length&&(c.i=null,c.g.set(as(c,p),v(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var x=p[g];const V=encodeURIComponent(String(x)),z=this.V(x);for(x=0;x<z.length;x++){var L=V;z[x]!==""&&(L+="="+encodeURIComponent(String(z[x]))),c.push(L)}}return this.i=c.join("&")};function as(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Ik(c,p){p&&!c.j&&(mi(c),c.i=null,c.g.forEach(function(g,x){var L=x.toLowerCase();x!=L&&(Py(this,x),Ny(this,L,g))},c)),c.j=p}function xk(c,p){const g=new xo;if(a.Image){const x=new Image;x.onload=m(yi,g,"TestLoadImage: loaded",!0,p,x),x.onerror=m(yi,g,"TestLoadImage: error",!1,p,x),x.onabort=m(yi,g,"TestLoadImage: abort",!1,p,x),x.ontimeout=m(yi,g,"TestLoadImage: timeout",!1,p,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else p(!1)}function bk(c,p){const g=new xo,x=new AbortController,L=setTimeout(()=>{x.abort(),yi(g,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:x.signal}).then(V=>{clearTimeout(L),V.ok?yi(g,"TestPingServer: ok",!0,p):yi(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),yi(g,"TestPingServer: error",!1,p)})}function yi(c,p,g,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(g)}catch{}}function kk(){this.g=new uk}function Ck(c,p,g){const x=g||"";try{by(c,function(L,V){let z=L;u(L)&&(z=Yh(L)),p.push(x+V+"="+encodeURIComponent(z))})}catch(L){throw p.push(x+"type="+encodeURIComponent("_badmap")),L}}function Ul(c){this.l=c.Ub||null,this.j=c.eb||!1}y(Ul,Xh),Ul.prototype.g=function(){return new Bl(this.l,this.j)},Ul.prototype.i=function(c){return function(){return c}}({});function Bl(c,p){lt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Bl,lt),t=Bl.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ro(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dy(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dy(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Po(this):Ro(this),this.readyState==3&&Dy(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Po(this))},t.Qa=function(c){this.g&&(this.response=c,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ro(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=p.next();return c.join(`\r
`)};function Ro(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function My(c){let p="";return D(c,function(g,x){p+=x,p+=":",p+=g,p+=`\r
`}),p}function ad(c,p,g){e:{for(x in g){var x=!1;break e}x=!0}x||(g=My(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Ie(c,p,g))}function Ve(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ve,lt);var Ak=/^https?$/i,Pk=["POST","PUT"];t=Ve.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,g,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ed.g(),this.v=this.o?uy(this.o):uy(ed),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(V){Oy(this,V);return}if(c=g||"",g=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)g.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const V of x.keys())g.set(V,x.get(V));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Pk,p,void 0))||x||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of g)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fy(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){Oy(this,V)}};function Oy(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Ly(c),zl(c)}function Ly(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),zl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zl(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vy(this):this.bb())},t.bb=function(){Vy(this)};function Vy(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Un(c)!=4||c.Z()!=2)){if(c.u&&Un(c)==4)sy(c.Ea,0,c);else if(wt(c,"readystatechange"),Un(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var x;if(x=z===0){var L=String(c.D).match(ky)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),x=!Ak.test(L?L.toLowerCase():"")}g=x}if(g)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var V=2<Un(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",Ly(c)}}finally{zl(c)}}}}function zl(c,p){if(c.g){Fy(c);const g=c.g,x=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||wt(c,"ready");try{g.onreadystatechange=x}catch{}}}function Fy(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),lk(p)}};function jy(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Rk(c){const p={};c=(c.g&&2<=Un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(S(c[x]))continue;var g=P(c[x]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}I(p,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(c,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||p}function Uy(c){this.Aa=0,this.i=[],this.j=new xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=No("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=No("baseRetryDelayMs",5e3,c),this.cb=No("retryDelaySeedMs",1e4,c),this.Wa=No("forwardChannelMaxRetries",2,c),this.wa=No("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ey(c&&c.concurrentRequestLimit),this.Da=new kk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Uy.prototype,t.la=8,t.G=1,t.connect=function(c,p,g,x){Et(0),this.W=c,this.H=p||{},g&&x!==void 0&&(this.H.OSID=g,this.H.OAID=x),this.F=this.X,this.I=Qy(this,null,this.W),Wl(this)};function ld(c){if(By(c),c.G==3){var p=c.U++,g=jn(c.I);if(Ie(g,"SID",c.K),Ie(g,"RID",p),Ie(g,"TYPE","terminate"),Do(c,g),p=new gi(c,c.j,p),p.L=2,p.v=jl(jn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Yy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ll(p)}Gy(c)}function $l(c){c.g&&(cd(c),c.g.cancel(),c.g=null)}function By(c){$l(c),c.u&&(a.clearTimeout(c.u),c.u=null),Hl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Wl(c){if(!Ty(c.h)&&!c.s){c.s=!0;var p=c.Ga;Ee||K(),B||(Ee(),B=!0),q.add(p,c),c.B=0}}function Nk(c,p){return Sy(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Io(f(c.Ga,c,p),Ky(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new gi(this,this.j,c);let V=this.o;if(this.S&&(V?(V=w(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var x=this.i[g];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=$y(this,L,p),g=jn(this.I),Ie(g,"RID",c),Ie(g,"CVER",22),this.D&&Ie(g,"X-HTTP-Session-Id",this.D),Do(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(My(V)))+"&"+p:this.m&&ad(g,this.m,V)),od(this.h,L),this.Ua&&Ie(g,"TYPE","init"),this.P?(Ie(g,"$req",p),Ie(g,"SID","null"),L.T=!0,nd(L,g,null)):nd(L,g,p),this.G=2}}else this.G==3&&(c?zy(this,c):this.i.length==0||Ty(this.h)||zy(this))};function zy(c,p){var g;p?g=p.l:g=c.U++;const x=jn(c.I);Ie(x,"SID",c.K),Ie(x,"RID",g),Ie(x,"AID",c.T),Do(c,x),c.m&&c.o&&ad(x,c.m,c.o),g=new gi(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),p&&(c.i=p.D.concat(c.i)),p=$y(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),od(c.h,g),nd(g,x,p)}function Do(c,p){c.H&&D(c.H,function(g,x){Ie(p,x,g)}),c.l&&by({},function(g,x){Ie(p,x,g)})}function $y(c,p,g){g=Math.min(c.i.length,g);var x=c.l?f(c.l.Na,c.l,c):null;e:{var L=c.i;let V=-1;for(;;){const z=["count="+g];V==-1?0<g?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let we=!0;for(let Ze=0;Ze<g;Ze++){let de=L[Ze].g;const ut=L[Ze].map;if(de-=V,0>de)V=Math.max(0,L[Ze].g-100),we=!1;else try{Ck(ut,z,"req"+de+"_")}catch{x&&x(ut)}}if(we){x=z.join("&");break e}}}return c=c.i.splice(0,g),p.D=c,x}function Wy(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Ee||K(),B||(Ee(),B=!0),q.add(p,c),c.v=0}}function ud(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Io(f(c.Fa,c),Ky(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Hy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Io(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),$l(this),Hy(this))};function cd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Hy(c){c.g=new gi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=jn(c.qa);Ie(p,"RID","rpc"),Ie(p,"SID",c.K),Ie(p,"AID",c.T),Ie(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ie(p,"TO",c.ja),Ie(p,"TYPE","xmlhttp"),Do(c,p),c.m&&c.o&&ad(p,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=jl(jn(p)),g.m=null,g.P=!0,_y(g,c)}t.Za=function(){this.C!=null&&(this.C=null,$l(this),ud(this),Et(19))};function Hl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function qy(c,p){var g=null;if(c.g==p){Hl(c),cd(c),c.g=null;var x=2}else if(sd(c.h,p))g=p.D,Iy(c.h,p),x=1;else return;if(c.G!=0){if(p.o)if(x==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;x=Dl(),wt(x,new py(x,g)),Wl(c)}else Wy(c);else if(L=p.s,L==3||L==0&&0<p.X||!(x==1&&Nk(c,p)||x==2&&ud(c)))switch(g&&0<g.length&&(p=c.h,p.i=p.i.concat(g)),L){case 1:fr(c,5);break;case 4:fr(c,10);break;case 3:fr(c,6);break;default:fr(c,2)}}}function Ky(c,p){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*p}function fr(c,p){if(c.j.info("Error code "+p),p==2){var g=f(c.fb,c),x=c.Xa;const L=!x;x=new dr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vl(x,"https"),jl(x),L?xk(x.toString(),g):bk(x.toString(),g)}else Et(2);c.G=0,c.l&&c.l.sa(p),Gy(c),By(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Gy(c){if(c.G=0,c.ka=[],c.l){const p=xy(c.h);(p.length!=0||c.i.length!=0)&&(E(c.ka,p),E(c.ka,c.i),c.h.i.length=0,v(c.i),c.i.length=0),c.l.ra()}}function Qy(c,p,g){var x=g instanceof dr?jn(g):new dr(g);if(x.g!="")p&&(x.g=p+"."+x.g),Fl(x,x.s);else{var L=a.location;x=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new dr(null);x&&Vl(V,x),p&&(V.g=p),L&&Fl(V,L),g&&(V.l=g),x=V}return g=c.D,p=c.ya,g&&p&&Ie(x,g,p),Ie(x,"VER",c.la),Do(c,x),x}function Yy(c,p,g){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ve(new Ul({eb:g})):new Ve(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xy(){}t=Xy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ql(){}ql.prototype.g=function(c,p){return new jt(c,p)};function jt(c,p){lt.call(this),this.g=new Uy(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!S(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ls(this)}y(jt,lt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){ld(this.g)},jt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Yh(c),c=g);p.i.push(new gk(p.Ya++,c)),p.G==3&&Wl(p)},jt.prototype.N=function(){this.g.l=null,delete this.j,ld(this.g),delete this.g,jt.aa.N.call(this)};function Jy(c){Jh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const g in p){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}y(Jy,Jh);function Zy(){Zh.call(this),this.status=1}y(Zy,Zh);function ls(c){this.g=c}y(ls,Xy),ls.prototype.ua=function(){wt(this.g,"a")},ls.prototype.ta=function(c){wt(this.g,new Jy(c))},ls.prototype.sa=function(c){wt(this.g,new Zy)},ls.prototype.ra=function(){wt(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,CI=function(){return new ql},kI=function(){return Dl()},bI=cr,_p={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ml.NO_ERROR=0,Ml.TIMEOUT=8,Ml.HTTP_ERROR=6,qu=Ml,gy.COMPLETE="complete",xI=gy,cy.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",lt.prototype.listen=lt.prototype.K,na=cy,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,II=Ve}).apply(typeof du<"u"?du:typeof self<"u"?self:typeof window<"u"?window:{});const Gv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new wh("@firebase/firestore");function zo(){return $r.logLevel}function H(t,...e){if($r.logLevel<=oe.DEBUG){const n=e.map(em);$r.debug(`Firestore (${mo}): ${t}`,...n)}}function li(t,...e){if($r.logLevel<=oe.ERROR){const n=e.map(em);$r.error(`Firestore (${mo}): ${t}`,...n)}}function Xs(t,...e){if($r.logLevel<=oe.WARN){const n=e.map(em);$r.warn(`Firestore (${mo}): ${t}`,...n)}}function em(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: `+t;throw li(e),new Error(e)}function ve(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class gM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mM{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string"),new AI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new pt(e)}}class yM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _M{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new yM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new vM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=EM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function fe(t,e){return t<e?-1:t>e?1:0}function Js(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ge(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ge(0,0))}static max(){return new ee(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,i){n===void 0?n=0:n>e.length&&Z(),i===void 0?i=e.length-n:i>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return el.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof el?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends el{construct(e,n,i){return new Ae(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const TM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends el{construct(e,n,i){return new nt(e,n,i)}static isValidIdentifier(e){return TM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ae.fromString(e))}static fromName(e){return new Q(Ae.fromString(e).popFirst(5))}static empty(){return new Q(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ae(e.slice()))}}function SM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ee.fromTimestamp(i===1e9?new Ge(n+1,0):new Ge(n,i));return new Zi(r,Q.empty(),e)}function IM(t){return new Zi(t.readTime,t.key,-1)}class Zi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zi(ee.min(),Q.empty(),-1)}static max(){return new Zi(ee.max(),Q.empty(),-1)}}function xM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==bM)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,i)=>{n(e)})}static reject(e){return new F((n,i)=>{i(e)})}static waitFor(e){return new F((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=F.resolve(!1);for(const i of e)n=n.next(r=>r?F.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new F((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new F((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function CM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tm.oe=-1;function Ih(t){return t==null}function Lc(t){return t===0&&1/t==-1/0}function AM(t){return typeof t=="number"&&Number.isInteger(t)&&!Lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}}class fu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??tt.RED,this.left=r??tt.EMPTY,this.right=s??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new tt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return tt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,i,r,s){return this}insert(e,n,i){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new $t([])}unionWith(e){let n=new st(nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new NI("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const PM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(t){if(ve(!!t),typeof t=="string"){let e=0;const n=PM.exec(t);if(ve(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function im(t){const e=t.mapValue.fields.__previous_value__;return nm(e)?im(e):e}function tl(t){const e=er(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class nl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={mapValue:{}};function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nm(t)?4:DM(t)?9007199254740991:NM(t)?10:11:Z()}function Ln(t,e){if(t===e)return!0;const n=Hr(t);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tl(t).isEqual(tl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=er(r.timestampValue),a=er(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Wr(r.bytesValue).isEqual(Wr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return je(r.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(r.geoPointValue.longitude)===je(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return je(r.integerValue)===je(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=je(r.doubleValue),a=je(s.doubleValue);return o===a?Lc(o)===Lc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Js(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Qv(o)!==Qv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ln(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function il(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function Zs(t,e){if(t===e)return 0;const n=Hr(t),i=Hr(e);if(n!==i)return fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=je(s.integerValue||s.doubleValue),l=je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Xv(t.timestampValue,e.timestampValue);case 4:return Xv(tl(t),tl(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Wr(s),l=Wr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=fe(a[u],l[u]);if(h!==0)return h}return fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=fe(je(s.latitude),je(o.latitude));return a!==0?a:fe(je(s.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=fe(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:Jv(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===pu.mapValue&&o===pu.mapValue)return 0;if(s===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=fe(l[d],h[d]);if(f!==0)return f;const m=Zs(a[l[d]],u[h[d]]);if(m!==0)return m}return fe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function Xv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=er(t),i=er(e),r=fe(n.seconds,i.seconds);return r!==0?r:fe(n.nanos,i.nanos)}function Jv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Zs(n[r],i[r]);if(s)return s}return fe(n.length,i.length)}function eo(t){return vp(t)}function vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=er(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=vp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${vp(n.fields[o])}`;return r+"}"}(t.mapValue):Z()}function wp(t){return!!t&&"integerValue"in t}function rm(t){return!!t&&"arrayValue"in t}function Zv(t){return!!t&&"nullValue"in t}function e0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ku(t){return!!t&&"mapValue"in t}function NM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ea(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return es(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ea(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ea(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ea(n)}setAll(e){let n=nt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Ea(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Ku(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){es(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new At(Ea(this.value))}}function DI(t){const e=[];return es(t.fields,(n,i)=>{const r=new nt([n]);if(Ku(i)){const s=DI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,ee.min(),ee.min(),ee.min(),At.empty(),0)}static newFoundDocument(e,n,i,r){return new mt(e,1,n,ee.min(),i,r,0)}static newNoDocument(e,n){return new mt(e,2,n,ee.min(),ee.min(),At.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ee.min(),ee.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.position=e,this.inclusive=n}}function t0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(o.referenceValue),n.key):i=Zs(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function n0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n="asc"){this.field=e,this.dir=n}}function MM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{}class qe extends MI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new LM(e,n,i):n==="array-contains"?new jM(e,i):n==="in"?new UM(e,i):n==="not-in"?new BM(e,i):n==="array-contains-any"?new zM(e,i):new qe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new VM(e,i):new FM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zs(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends MI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vn(e,n)}matches(e){return OI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function OI(t){return t.op==="and"}function LI(t){return OM(t)&&OI(t)}function OM(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Ep(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(LI(t))return t.filters.map(e=>Ep(e)).join(",");{const e=t.filters.map(n=>Ep(n)).join(",");return`${t.op}(${e})`}}function VI(t,e){return t instanceof qe?function(i,r){return r instanceof qe&&i.op===r.op&&i.field.isEqual(r.field)&&Ln(i.value,r.value)}(t,e):t instanceof Vn?function(i,r){return r instanceof Vn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&VI(o,r.filters[a]),!0):!1}(t,e):void Z()}function FI(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(FI).join(" ,")+"}"}(t):"Filter"}class LM extends qe{constructor(e,n,i){super(e,n,i),this.key=Q.fromName(i.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class VM extends qe{constructor(e,n){super(e,"in",n),this.keys=jI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FM extends qe{constructor(e,n){super(e,"not-in",n),this.keys=jI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class jM extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rm(n)&&il(n.arrayValue,this.value)}}class UM extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&il(this.value.arrayValue,n)}}class BM extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!il(this.value.arrayValue,n)}}class zM extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>il(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function i0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new $M(t,e,n,i,r,s,o)}function sm(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ep(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>eo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>eo(i)).join(",")),e.ue=n}return e.ue}function om(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!n0(t.startAt,e.startAt)&&n0(t.endAt,e.endAt)}function Tp(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WM(t,e,n,i,r,s,o,a){return new xh(t,e,n,i,r,s,o,a)}function am(t){return new xh(t)}function r0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HM(t){return t.collectionGroup!==null}function Ta(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new st(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Fc(s,i))}),n.has(nt.keyField().canonicalString())||e.ce.push(new Fc(nt.keyField(),i))}return e.ce}function Nn(t){const e=te(t);return e.le||(e.le=qM(e,Ta(t))),e.le}function qM(t,e){if(t.limitType==="F")return i0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Fc(r.field,s)});const n=t.endAt?new Vc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Vc(t.startAt.position,t.startAt.inclusive):null;return i0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Sp(t,e,n){return new xh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bh(t,e){return om(Nn(t),Nn(e))&&t.limitType===e.limitType}function UI(t){return`${sm(Nn(t))}|lt:${t.limitType}`}function gs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>FI(r)).join(", ")}]`),Ih(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>eo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>eo(r)).join(",")),`Target(${i})`}(Nn(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Ta(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=t0(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,Ta(i),r)||i.endAt&&!function(o,a,l){const u=t0(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,Ta(i),r))}(t,e)}function KM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BI(t){return(e,n)=>{let i=!1;for(const r of Ta(t)){const s=GM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function GM(t,e,n){const i=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Zs(l,u):Z()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return RI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new Le(Q.comparator);function ui(){return QM}const zI=new Le(Q.comparator);function ia(...t){let e=zI;for(const n of t)e=e.insert(n.key,n);return e}function $I(t){let e=zI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function kr(){return Sa()}function WI(){return Sa()}function Sa(){return new yo(t=>t.toString(),(t,e)=>t.isEqual(e))}const YM=new Le(Q.comparator),XM=new st(Q.comparator);function se(...t){let e=XM;for(const n of t)e=e.add(n);return e}const JM=new st(fe);function ZM(){return JM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function HI(t){return{integerValue:""+t}}function e2(t,e){return AM(e)?HI(e):lm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this._=void 0}}function t2(t,e,n){return t instanceof rl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&nm(s)&&(s=im(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof sl?KI(t,e):t instanceof ol?GI(t,e):function(r,s){const o=qI(r,s),a=s0(o)+s0(r.Pe);return wp(o)&&wp(r.Pe)?HI(a):lm(r.serializer,a)}(t,e)}function n2(t,e,n){return t instanceof sl?KI(t,e):t instanceof ol?GI(t,e):n}function qI(t,e){return t instanceof jc?function(i){return wp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class rl extends Ch{}class sl extends Ch{constructor(e){super(),this.elements=e}}function KI(t,e){const n=QI(e);for(const i of t.elements)n.some(r=>Ln(r,i))||n.push(i);return{arrayValue:{values:n}}}class ol extends Ch{constructor(e){super(),this.elements=e}}function GI(t,e){let n=QI(e);for(const i of t.elements)n=n.filter(r=>!Ln(r,i));return{arrayValue:{values:n}}}class jc extends Ch{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function s0(t){return je(t.integerValue||t.doubleValue)}function QI(t){return rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this.field=e,this.transform=n}}function r2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof sl&&r instanceof sl||i instanceof ol&&r instanceof ol?Js(i.elements,r.elements,Ln):i instanceof jc&&r instanceof jc?Ln(i.Pe,r.Pe):i instanceof rl&&r instanceof rl}(t.transform,e.transform)}class s2{constructor(e,n){this.version=e,this.transformResults=n}}class pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ah{}function YI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new um(t.key,pn.none()):new kl(t.key,t.data,pn.none());{const n=t.data,i=At.empty();let r=new st(nt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ur(t.key,i,new $t(r.toArray()),pn.none())}}function o2(t,e,n){t instanceof kl?function(r,s,o){const a=r.value.clone(),l=a0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ur?function(r,s,o){if(!Gu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=a0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(XI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ia(t,e,n,i){return t instanceof kl?function(s,o,a,l){if(!Gu(s.precondition,o))return a;const u=s.value.clone(),h=l0(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof ur?function(s,o,a,l){if(!Gu(s.precondition,o))return a;const u=l0(s.fieldTransforms,l,o),h=o.data;return h.setAll(XI(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Gu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function a2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=qI(i.transform,r||null);s!=null&&(n===null&&(n=At.empty()),n.set(i.field,s))}return n||null}function o0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Js(i,r,(s,o)=>r2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kl extends Ah{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ur extends Ah{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function a0(t,e,n){const i=new Map;ve(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,n2(o,a,n[r]))}return i}function l0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,t2(s,o,e))}return i}class um extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l2 extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&o2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ia(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ia(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=WI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=YI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(n,i)=>o0(n,i))&&Js(this.baseMutations,e.baseMutations,(n,i)=>o0(n,i))}}class cm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ve(e.mutations.length===i.length);let r=function(){return YM}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new cm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ae;function d2(t){switch(t){default:return Z();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function JI(t){if(t===void 0)return li("GRPC error has no .code"),j.UNKNOWN;switch(t){case $e.OK:return j.OK;case $e.CANCELLED:return j.CANCELLED;case $e.UNKNOWN:return j.UNKNOWN;case $e.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case $e.INTERNAL:return j.INTERNAL;case $e.UNAVAILABLE:return j.UNAVAILABLE;case $e.UNAUTHENTICATED:return j.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case $e.NOT_FOUND:return j.NOT_FOUND;case $e.ALREADY_EXISTS:return j.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return j.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case $e.ABORTED:return j.ABORTED;case $e.OUT_OF_RANGE:return j.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return j.UNIMPLEMENTED;case $e.DATA_LOSS:return j.DATA_LOSS;default:return Z()}}(ae=$e||($e={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new Dr([4294967295,4294967295],0);function u0(t){const e=f2().encode(t),n=new SI;return n.update(e),new Uint8Array(n.digest())}function c0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dr([n,i],0),new Dr([r,s],0)]}class hm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(i<0)throw new ra(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Dr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Dr.fromNumber(i)));return r.compare(p2)===1&&(r=new Dr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=u0(e),[i,r]=c0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hm(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=u0(e),[i,r]=c0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ph(ee.min(),r,new Le(fe),ui(),se())}}class Cl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Cl(i,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class ZI{constructor(e,n){this.targetId=e,this.me=n}}class ex{constructor(e,n,i=at.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class h0{constructor(){this.fe=0,this.ge=f0(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),i=se();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Z()}}),new Cl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=f0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class g2{constructor(e){this.Le=e,this.Be=new Map,this.ke=ui(),this.qe=d0(),this.Qe=new Le(fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(Tp(s))if(i===0){const o=new Q(s.path);this.Ue(n,o,mt.newNoDocument(o,ee.min()))}else ve(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Wr(i).toUint8Array()}catch(l){if(l instanceof NI)return Xs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hm(o,r,s)}catch(l){return Xs(l instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Tp(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Ph(e,n,this.Qe,this.ke,i);return this.ke=ui(),this.qe=d0(),this.Qe=new Le(fe),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new h0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new st(fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new h0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function d0(){return new Le(Q.comparator)}function f0(){return new Le(Q.comparator)}const m2={asc:"ASCENDING",desc:"DESCENDING"},y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_2={and:"AND",or:"OR"};class v2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ip(t,e){return t.useProto3Json||Ih(e)?e:{value:e}}function Uc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w2(t,e){return Uc(t,e.toTimestamp())}function Dn(t){return ve(!!t),ee.fromTimestamp(function(n){const i=er(n);return new Ge(i.seconds,i.nanos)}(t))}function dm(t,e){return xp(t,e).canonicalString()}function xp(t,e){const n=function(r){return new Ae(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nx(t){const e=Ae.fromString(t);return ve(ax(e)),e}function bp(t,e){return dm(t.databaseId,e.path)}function qd(t,e){const n=nx(e);if(n.get(1)!==t.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(rx(n))}function ix(t,e){return dm(t.databaseId,e)}function E2(t){const e=nx(t);return e.length===4?Ae.emptyPath():rx(e)}function kp(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rx(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function p0(t,e,n){return{name:bp(t,e),fields:n.value.mapValue.fields}}function T2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(ve(h===void 0||typeof h=="string"),at.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?j.UNKNOWN:JI(u.code);return new G(h,u.message||"")}(o);n=new ex(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qd(t,i.document.name),s=Dn(i.document.updateTime),o=i.document.createTime?Dn(i.document.createTime):ee.min(),a=new At({mapValue:{fields:i.document.fields}}),l=mt.newFoundDocument(r,s,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new Qu(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qd(t,i.document),s=i.readTime?Dn(i.readTime):ee.min(),o=mt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Qu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qd(t,i.document),s=i.removedTargetIds||[];n=new Qu([],s,r,null)}else{if(!("filter"in e))return Z();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new h2(r,s),a=i.targetId;n=new ZI(a,o)}}return n}function S2(t,e){let n;if(e instanceof kl)n={update:p0(t,e.key,e.value)};else if(e instanceof um)n={delete:bp(t,e.key)};else if(e instanceof ur)n={update:p0(t,e.key,e.data),updateMask:N2(e.fieldMask)};else{if(!(e instanceof l2))return Z();n={verify:bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof rl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ol)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:w2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function I2(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Dn(r.updateTime):Dn(s);return o.isEqual(ee.min())&&(o=Dn(s)),new s2(o,r.transformResults||[])}(n,e))):[]}function x2(t,e){return{documents:[ix(t,e.path)]}}function b2(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ix(t,r);const s=function(u){if(u.length!==0)return ox(Vn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:ms(f.field),direction:A2(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ip(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function k2(t){let e=E2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ve(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=sx(d);return f instanceof Vn&&LI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Fc(ys(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Ih(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Vc(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new Vc(m,f)}(n.endAt)),WM(e,r,o,s,a,"F",l,u)}function C2(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ys(n.unaryFilter.field);return qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ys(n.unaryFilter.field);return qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ys(n.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ys(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(ys(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(i=>sx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function A2(t){return m2[t]}function P2(t){return y2[t]}function R2(t){return _2[t]}function ms(t){return{fieldPath:t.canonicalString()}}function ys(t){return nt.fromServerFormat(t.fieldPath)}function ox(t){return t instanceof qe?function(n){if(n.op==="=="){if(e0(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NAN"}};if(Zv(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e0(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NAN"}};if(Zv(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(n.field),op:P2(n.op),value:n.value}}}(t):t instanceof Vn?function(n){const i=n.getFilters().map(r=>ox(r));return i.length===1?i[0]:{compositeFilter:{op:R2(n.op),filters:i}}}(t):Z()}function N2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ax(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,i,r,s=ee.min(),o=ee.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.ct=e}}function M2(t){const e=k2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.un=new L2}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Zi.min())}updateCollectionGroup(e,n,i){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class L2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new st(Ae.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new st(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new to(0)}static kn(){return new to(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.changes=new yo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ia(i.mutation,r,$t.empty(),Ge.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,se()).next(()=>i))}getLocalViewOfDocuments(e,n,i=se()){const r=kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=ia();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=kr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,se()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ui();const o=Sa(),a=function(){return Sa()}();return n.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof ur)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ia(h.mutation,u,h.mutation.getFieldMask(),Ge.now())):o.set(u.key,$t.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new F2(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Sa();let r=new Le((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=i.get(l)||$t.empty();h=a.applyToLocalView(u,h),i.set(l,h);const d=(r.get(a.batchId)||se()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=WI();h.forEach(f=>{if(!s.has(f)){const m=YI(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):F.resolve(kr());let a=-1,l=s;return o.next(u=>F.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,se())).next(h=>({batchId:a,changes:$I(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(i=>{let r=ia();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=ia();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const u=function(d,f){return new xh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,mt.newInvalidDocument(h)))});let a=ia();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Ia(h.mutation,u,$t.empty(),Ge.now()),kh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Dn(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:M2(r.bundledQuery),readTime:Dn(r.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.overlays=new Le(Q.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const i=kr();return F.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),F.resolve()}getOverlaysForCollection(e,n,i){const r=kr(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Le((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=kr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=kr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return F.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new c2(n,i));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.Tr=new st(Qe.Er),this.dr=new st(Qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Qe(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Qe(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Q(new Ae([])),i=new Qe(n,e),r=new Qe(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Ae([])),i=new Qe(n,e),r=new Qe(n,e+1);let s=se();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Qe(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new st(Qe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u2(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qe(n,0),r=new Qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new st(fe);return n.forEach(r=>{const s=new Qe(r,0),o=new Qe(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),F.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const o=new Qe(new Q(s),0);let a=new st(fe);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return F.forEach(n.mutations,r=>{const s=new Qe(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Qe(n,0),r=this.br.firstAfterOrEqual(i);return F.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.Mr=e,this.docs=function(){return new Le(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let i=ui();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():mt.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ui();const o=n.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||xM(IM(h),i)<=0||(r.has(h.key)||kh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Z()}Or(e,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new H2(this)}getSize(e){return F.resolve(this.size)}}class H2 extends V2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.persistence=e,this.Nr=new yo(n=>sm(n),om),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fm,this.targetCount=0,this.kr=to.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new to(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return F.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),F.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return F.resolve(i)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tm(0),this.Kr=!1,this.Kr=!0,this.$r=new z2,this.referenceDelegate=e(this),this.Ur=new q2(this),this.indexManager=new O2,this.remoteDocumentCache=function(r){return new W2(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new D2(n),this.Gr=new U2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new $2(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);const r=new G2(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class G2 extends kM{constructor(e){super(),this.currentSequenceNumber=e}}class pm{constructor(e){this.persistence=e,this.Jr=new fm,this.Yr=null}static Zr(e){return new pm(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),F.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,i=>{const r=Q.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=se(),r=se();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new gm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return CP()?8:CM(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Q2;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(zo()<=oe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(zo()<=oe.DEBUG&&H("QueryEngine","Query:",gs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(zo()<=oe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):F.resolve())}Yi(e,n){if(r0(n))return F.resolve(null);let i=Nn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Sp(n,null,"F"),i=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Sp(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return r0(n)||r.isEqual(ee.min())?F.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?F.resolve(null):(zo()<=oe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gs(n)),this.rs(e,o,n,SM(r,-1)).next(a=>a))})}ts(e,n){let i=new st(BI(e));return n.forEach((r,s)=>{kh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return zo()<=oe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",gs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Zi.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Le(fe),this._s=new yo(s=>sm(s),om),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function J2(t,e,n,i){return new X2(t,e,n,i)}async function lx(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=se();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function Z2(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let m=F.resolve();return f.forEach(y=>{m=m.next(()=>h.getEntry(l,y)).next(v=>{const E=u.docVersions.get(y);ve(E!==null),v.version.compareTo(E)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=se();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function ux(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function eO(t,e){const n=te(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(at.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(v,E,T){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=ui(),u=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(tO(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!i.isEqual(ee.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function tO(t,e,n){let i=se(),r=se();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ui();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function nO(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function iO(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Mi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Cp(t,e,n){const i=te(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!bl(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function g0(t,e,n){const i=te(t);let r=ee.min(),s=se();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=te(l),f=d._s.get(h);return f!==void 0?F.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(i,o,Nn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:ee.min(),n?s:se())).next(a=>(rO(i,KM(e),a),{documents:a,Ts:s})))}function rO(t,e,n){let i=t.us.get(e)||ee.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class m0{constructor(){this.activeTargetIds=ZM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sO{constructor(){this.so=new m0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new m0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu=null;function Kd(){return gu===null?gu=function(){return 268435456+Math.round(2147483648*Math.random())}():gu++,"0x"+gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class uO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Kd(),l=this.xo(n,i.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Xs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=aO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Kd();return new Promise((o,a)=>{const l=new II;l.setWithCredentials(!0),l.listenOnce(xI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qu.NO_ERROR:const h=l.getResponseJson();H(ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case qu.TIMEOUT:H(ft,`RPC '${e}' ${s} timed out`),a(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const d=l.getStatus();if(H(ft,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const y=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(T)>=0?T:j.UNKNOWN}(m.status);a(new G(y,m.message))}else a(new G(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(j.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{H(ft,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);H(ft,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=Kd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CI(),a=kI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");H(ft,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const y=new lO({Io:E=>{m?H(ft,`Not sending because RPC '${e}' stream ${r} is closed:`,E):(f||(H(ft,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),H(ft,`RPC '${e}' stream ${r} sending:`,E),d.send(E))},To:()=>d.close()}),v=(E,T,S)=>{E.listen(T,b=>{try{S(b)}catch(R){setTimeout(()=>{throw R},0)}})};return v(d,na.EventType.OPEN,()=>{m||(H(ft,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),v(d,na.EventType.CLOSE,()=>{m||(m=!0,H(ft,`RPC '${e}' stream ${r} transport closed`),y.So())}),v(d,na.EventType.ERROR,E=>{m||(m=!0,Xs(ft,`RPC '${e}' stream ${r} transport errored:`,E),y.So(new G(j.UNAVAILABLE,"The operation could not be completed")))}),v(d,na.EventType.MESSAGE,E=>{var T;if(!m){const S=E.data[0];ve(!!S);const b=S,R=b.error||((T=b[0])===null||T===void 0?void 0:T.error);if(R){H(ft,`RPC '${e}' stream ${r} received error:`,R);const M=R.status;let D=function(k){const C=$e[k];if(C!==void 0)return JI(C)}(M),I=R.message;D===void 0&&(D=j.INTERNAL,I="Unknown error status: "+M+" with message "+R.message),m=!0,y.So(new G(D,I)),d.close()}else H(ft,`RPC '${e}' stream ${r} received:`,S),y.bo(S)}}),v(a,bI.STAT_EVENT,E=>{E.stat===_p.PROXY?H(ft,`RPC '${e}' stream ${r} detected buffering proxy`):E.stat===_p.NOPROXY&&H(ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return new v2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new G(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cO extends hx{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=T2(this.serializer,e),i=function(s){if(!("targetChange"in s))return ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Dn(o.readTime):ee.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=kp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Tp(l)?{documents:x2(s,l)}:{query:b2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tx(s,o.resumeToken);const u=Ip(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=Uc(s,o.snapshotVersion.toTimestamp());const u=Ip(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=C2(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=kp(this.serializer),n.removeTarget=e,this.a_(n)}}class hO extends hx{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=I2(e.writeResults,e.commitTime),i=Dn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=kp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>S2(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,xp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,xp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(li(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{ts(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=te(l);u.L_.add(4),await Al(u),u.q_.set("Unknown"),u.L_.delete(4),await Nh(u)}(this))})}),this.q_=new fO(i,r)}}async function Nh(t){if(ts(t))for(const e of t.B_)await e(!0)}async function Al(t){for(const e of t.B_)await e(!1)}function dx(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vm(n)?_m(n):_o(n).r_()&&ym(n,e))}function mm(t,e){const n=te(t),i=_o(n);n.N_.delete(e),i.r_()&&fx(n,e),n.N_.size===0&&(i.r_()?i.o_():ts(n)&&n.q_.set("Unknown"))}function ym(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_o(t).A_(e)}function fx(t,e){t.Q_.xe(e),_o(t).R_(e)}function _m(t){t.Q_=new g2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_o(t).start(),t.q_.v_()}function vm(t){return ts(t)&&!_o(t).n_()&&t.N_.size>0}function ts(t){return te(t).L_.size===0}function px(t){t.Q_=void 0}async function gO(t){t.q_.set("Online")}async function mO(t){t.N_.forEach((e,n)=>{ym(t,e)})}async function yO(t,e){px(t),vm(t)?(t.q_.M_(e),_m(t)):t.q_.set("Unknown")}async function _O(t,e,n){if(t.q_.set("Online"),e instanceof ex&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bc(t,i)}else if(e instanceof Qu?t.Q_.Ke(e):e instanceof ZI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const i=await ux(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),fx(s,l);const d=new Mi(h.target,l,u,h.sequenceNumber);ym(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){H("RemoteStore","Failed to raise snapshot:",i),await Bc(t,i)}}async function Bc(t,e,n){if(!bl(e))throw e;t.L_.add(1),await Al(t),t.q_.set("Offline"),n||(n=()=>ux(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Nh(t)})}function gx(t,e){return e().catch(n=>Bc(t,n,e))}async function Dh(t){const e=te(t),n=tr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vO(e);)try{const r=await nO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,wO(e,r)}catch(r){await Bc(e,r)}mx(e)&&yx(e)}function vO(t){return ts(t)&&t.O_.length<10}function wO(t,e){t.O_.push(e);const n=tr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mx(t){return ts(t)&&!tr(t).n_()&&t.O_.length>0}function yx(t){tr(t).start()}async function EO(t){tr(t).p_()}async function TO(t){const e=tr(t);for(const n of t.O_)e.m_(n.mutations)}async function SO(t,e,n){const i=t.O_.shift(),r=cm.from(i,e,n);await gx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Dh(t)}async function IO(t,e){e&&tr(t).V_&&await async function(i,r){if(function(o){return d2(o)&&o!==j.ABORTED}(r.code)){const s=i.O_.shift();tr(i).s_(),await gx(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Dh(i)}}(t,e),mx(t)&&yx(t)}async function _0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const i=ts(n);n.L_.add(3),await Al(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Nh(n)}async function xO(t,e){const n=te(t);e?(n.L_.delete(2),await Nh(n)):e||(n.L_.add(2),await Al(n),n.q_.set("Unknown"))}function _o(t){return t.K_||(t.K_=function(n,i,r){const s=te(n);return s.w_(),new cO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:gO.bind(null,t),Ro:mO.bind(null,t),mo:yO.bind(null,t),d_:_O.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vm(t)?_m(t):t.q_.set("Unknown")):(await t.K_.stop(),px(t))})),t.K_}function tr(t){return t.U_||(t.U_=function(n,i,r){const s=te(n);return s.w_(),new hO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:EO.bind(null,t),mo:IO.bind(null,t),f_:TO.bind(null,t),g_:SO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Dh(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new wm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Em(t,e){if(li("AsyncQueue",`${e}: ${t}`),bl(t))return new G(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=ia(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Us(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Us)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Us;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.W_=new Le(Q.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class no{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new no(e,n,Us.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kO{constructor(){this.queries=w0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=te(n),s=r.queries;r.queries=w0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new G(j.ABORTED,"Firestore shutting down"))}}function w0(){return new yo(t=>UI(t),bh)}async function CO(t,e){const n=te(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new bO,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Em(o,`Initialization of query '${gs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Tm(n)}async function AO(t,e){const n=te(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function PO(t,e){const n=te(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Tm(n)}function RO(t,e,n){const i=te(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Tm(t){t.Y_.forEach(e=>{e.next()})}var Ap,E0;(E0=Ap||(Ap={})).ea="default",E0.Cache="cache";class NO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new no(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=no.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.key=e}}class vx{constructor(e){this.key=e}}class DO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=BI(e),this.Ra=new Us(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new v0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=kh(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?y!==v&&(i.track({type:3,doc:m}),E=!0):this.ga(f,m)||(i.track({type:2,doc:m}),E=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),E=!0):f&&!m&&(i.track({type:1,doc:f}),E=!0,(l||u)&&(a=!0)),E&&(m?(o=o.add(m),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,y){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return v(m)-v(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new no(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new v0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new vx(i))}),this.da.forEach(i=>{e.has(i)||n.push(new _x(i))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return no.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class MO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class OO{constructor(e){this.key=e,this.va=!1}}class LO{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new yo(a=>UI(a),bh),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(Q.comparator),this.Na=new Map,this.La=new fm,this.Ba={},this.ka=new Map,this.qa=to.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function VO(t,e,n=!0){const i=xx(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await wx(i,e,n,!0),r}async function FO(t,e){const n=xx(t);await wx(n,e,!0,!1)}async function wx(t,e,n,i){const r=await iO(t.localStore,Nn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await jO(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&dx(t.remoteStore,r),a}async function jO(t,e,n,i,r){t.Ka=(d,f,m)=>async function(v,E,T,S){let b=E.view.ma(T);b.ns&&(b=await g0(v.localStore,E.query,!1).then(({documents:I})=>E.view.ma(I,b)));const R=S&&S.targetChanges.get(E.targetId),M=S&&S.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(b,v.isPrimaryClient,R,M);return S0(v,E.targetId,D.wa),D.snapshot}(t,d,f,m);const s=await g0(t.localStore,e,!0),o=new DO(e,s.Ts),a=o.ma(s.documents),l=Cl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);S0(t,n,u.wa);const h=new MO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function UO(t,e,n){const i=te(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!bh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Cp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&mm(i.remoteStore,r.targetId),Pp(i,r.targetId)}).catch(xl)):(Pp(i,r.targetId),await Cp(i.localStore,r.targetId,!0))}async function BO(t,e){const n=te(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),mm(n.remoteStore,i.targetId))}async function zO(t,e,n){const i=QO(t);try{const r=await function(o,a){const l=te(o),u=Ge.now(),h=a.reduce((m,y)=>m.add(y.key),se());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=ui(),v=se();return l.cs.getEntries(m,h).next(E=>{y=E,y.forEach((T,S)=>{S.isValidDocument()||(v=v.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(E=>{d=E;const T=[];for(const S of a){const b=a2(S,d.get(S.key).overlayedDocument);b!=null&&T.push(new ur(S.key,b,DI(b.value.mapValue),pn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,T,a)}).next(E=>{f=E;const T=E.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(m,E.batchId,T)})}).then(()=>({batchId:f.batchId,changes:$I(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Le(fe)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await Pl(i,r.changes),await Dh(i.remoteStore)}catch(r){const s=Em(r,"Failed to persist write");n.reject(s)}}async function Ex(t,e){const n=te(t);try{const i=await eO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?ve(o.va):r.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await Pl(n,i,e)}catch(i){await xl(i)}}function T0(t,e,n){const i=te(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=te(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&Tm(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function $O(t,e,n){const i=te(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Le(Q.comparator);o=o.insert(s,mt.newNoDocument(s,ee.min()));const a=se().add(s),l=new Ph(ee.min(),new Map,new Le(fe),o,a);await Ex(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Sm(i)}else await Cp(i.localStore,e,!1).then(()=>Pp(i,e,n)).catch(xl)}async function WO(t,e){const n=te(t),i=e.batch.batchId;try{const r=await Z2(n.localStore,e);Sx(n,i,null),Tx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(n,r)}catch(r){await xl(r)}}async function HO(t,e,n){const i=te(t);try{const r=await function(o,a){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(ve(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);Sx(i,e,n),Tx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Pl(i,r)}catch(r){await xl(r)}}function Tx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Sx(t,e,n){const i=te(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Pp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||Ix(t,i)})}function Ix(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Sm(t))}function S0(t,e,n){for(const i of n)i instanceof _x?(t.La.addReference(i.key,e),qO(t,i)):i instanceof vx?(H("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Ix(t,i.key)):Z()}function qO(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(i),Sm(t))}function Sm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Ae.fromString(e)),i=t.qa.next();t.Na.set(i,new OO(n)),t.Oa=t.Oa.insert(n,i),dx(t.remoteStore,new Mi(Nn(am(n.path)),i,"TargetPurposeLimboResolution",tm.oe))}}async function Pl(t,e,n){const i=te(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){r.push(u);const d=gm.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const h=te(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(u,f=>F.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>F.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!bl(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(f,v)}}}(i.localStore,s))}async function KO(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const i=await lx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(n,i.hs)}}function GO(t,e){const n=te(t),i=n.Na.get(e);if(i&&i.va)return se().add(i.key);{let r=se();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function xx(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$O.bind(null,e),e.Ca.d_=PO.bind(null,e.eventManager),e.Ca.$a=RO.bind(null,e.eventManager),e}function QO(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HO.bind(null,e),e}class zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return J2(this.persistence,new Y2,e.initialUser,this.serializer)}Ga(e){return new K2(pm.Zr,this.serializer)}Wa(e){return new sO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zc.provider={build:()=>new zc};class Rp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>T0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KO.bind(null,this.syncEngine),await xO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kO}()}createDatastore(e){const n=Rh(e.databaseInfo.databaseId),i=function(s){return new uO(s)}(e.databaseInfo);return function(s,o,a,l){return new dO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new pO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>T0(this.syncEngine,n,0),function(){return y0.D()?new y0:new oO}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,h){const d=new LO(r,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=te(r);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Al(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Rp.provider={build:()=>new Rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=pt.UNAUTHENTICATED,this.clientId=PI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Em(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await lx(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function I0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JO(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>_0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>_0(e.remoteStore,r)),t._onlineComponents=e}async function JO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Xs("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new zc)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Qd(t,new zc);return t._offlineComponents}async function bx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await I0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await I0(t,new Rp))),t._onlineComponents}function ZO(t){return bx(t).then(e=>e.syncEngine)}async function x0(t){const e=await bx(t),n=e.eventManager;return n.onListen=VO.bind(null,e.syncEngine),n.onUnlisten=UO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BO.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e,n){if(!n)throw new G(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eL(t,e,n,i){if(e===!0&&i===!0)throw new G(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function k0(t){if(!Q.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function C0(t){if(Q.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Im(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function ti(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Im(t);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new pM;switch(i.type){case"firstParty":return new _M(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=b0.get(n);i&&(H("ComponentProvider","Removing Datastore"),b0.delete(n),i.terminate())}(this),Promise.resolve()}}function tL(t,e,n,i={}){var r;const s=(t=ti(t,Mh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=pt.MOCK_USER;else{a=TP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(u)}t._authCredentials=new gM(new AI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Oh(this.firestore,e,this._query)}}class Lt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}}class Qi extends Oh{constructor(e,n,i){super(e,n,am(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Q(e))}withConverter(e){return new Qi(this.firestore,e,this._path)}}function nL(t,e,...n){if(t=ze(t),Cx("collection","path",e),t instanceof Mh){const i=Ae.fromString(e,...n);return C0(i),new Qi(t,null,i)}{if(!(t instanceof Lt||t instanceof Qi))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return C0(i),new Qi(t.firestore,null,i)}}function al(t,e,...n){if(t=ze(t),arguments.length===1&&(e=PI.newId()),Cx("doc","path",e),t instanceof Mh){const i=Ae.fromString(e,...n);return k0(i),new Lt(t,null,new Q(i))}{if(!(t instanceof Lt||t instanceof Qi))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return k0(i),new Lt(t.firestore,t instanceof Qi?t.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cx(this,"async_queue_retry"),this.Vu=()=>{const i=Gd();i&&H("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Gd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bl(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw li("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=wm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function R0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class io extends Mh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new P0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P0(e),this._firestoreClient=void 0,await e}}}function iL(t,e){const n=typeof t=="object"?t:jS(),i=typeof t=="string"?t:"(default)",r=wl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=wP("firestore");s&&tL(r,...s)}return r}function Ax(t){if(t._terminated)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rL(t),t._firestoreClient}function rL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,h){return new RM(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new XO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ro(at.fromBase64String(e))}catch(n){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ro(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=/^__.*__$/;class oL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new kl(e,this.data,n,this.fieldTransforms)}}class Px{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class km{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new km(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $c(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Rx(this.Cu)&&sL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class aL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Rh(e)}Qu(e,n,i,r=!1){return new km({Cu:e,methodName:n,qu:i,path:nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nx(t){const e=t._freezeSettings(),n=Rh(t._databaseId);return new aL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lL(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Am("Data must be an object, but it was:",o,i);const a=Dx(i,o);let l,u;if(s.merge)l=new $t(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Np(e,d,n);if(!o.contains(f))throw new G(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Ox(h,f)||h.push(f)}l=new $t(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new oL(new At(a),l,u)}class Fh extends Vh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fh}}class Cm extends Vh{_toFieldTransform(e){return new i2(e.path,new rl)}isEqual(e){return e instanceof Cm}}function uL(t,e,n,i){const r=t.Qu(1,e,n);Am("Data must be an object, but it was:",r,i);const s=[],o=At.empty();es(i,(l,u)=>{const h=Pm(e,l,n);u=ze(u);const d=r.Nu(h);if(u instanceof Fh)s.push(h);else{const f=jh(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new $t(s);return new Px(o,a,r.fieldTransforms)}function cL(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Np(e,i,n)],l=[r];if(s.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Np(e,s[f])),l.push(s[f+1]);const u=[],h=At.empty();for(let f=a.length-1;f>=0;--f)if(!Ox(u,a[f])){const m=a[f];let y=l[f];y=ze(y);const v=o.Nu(m);if(y instanceof Fh)u.push(m);else{const E=jh(y,v);E!=null&&(u.push(m),h.set(m,E))}}const d=new $t(u);return new Px(h,d,o.fieldTransforms)}function jh(t,e){if(Mx(t=ze(t)))return Am("Unsupported field value:",e,t),Dx(t,e);if(t instanceof Vh)return function(i,r){if(!Rx(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=jh(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return e2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ge.fromDate(i);return{timestampValue:Uc(r.serializer,s)}}if(i instanceof Ge){const s=new Ge(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Uc(r.serializer,s)}}if(i instanceof xm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ro)return{bytesValue:tx(r.serializer,i._byteString)};if(i instanceof Lt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof bm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return lm(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Im(i)}`)}(t,e)}function Dx(t,e){const n={};return RI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(t,(i,r)=>{const s=jh(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Mx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof xm||t instanceof ro||t instanceof Lt||t instanceof Vh||t instanceof bm)}function Am(t,e,n){if(!Mx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Im(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Np(t,e,n){if((e=ze(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return Pm(t,e);throw $c("Field path arguments must be of type string or ",t,!1,void 0,n)}const hL=new RegExp("[~\\*/\\[\\]]");function Pm(t,e,n){if(e.search(hL)>=0)throw $c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lh(...e.split("."))._internalPath}catch{throw $c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $c(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new G(j.INVALID_ARGUMENT,a+t+l)}function Ox(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dL extends Lx{data(){return super.data()}}function Vx(t,e){return typeof e=="string"?Pm(t,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pL{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return es(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>je(o.doubleValue));return new bm(s)}convertGeoPoint(e){return new xm(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=im(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const n=er(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ae.fromString(e);ve(ax(i));const r=new nl(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||li(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fx extends Lx{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Vx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Yu extends Fx{data(e={}){return super.data(e)}}class mL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new sa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Yu(this._firestore,this._userDataWriter,i.key,i,new sa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Yu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Yu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:yL(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class jx extends pL{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function Ux(t,e,n){t=ti(t,Lt);const i=ti(t.firestore,io),r=gL(t.converter,e,n);return Rm(i,[lL(Nx(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,pn.none())])}function Bx(t,e,n,...i){t=ti(t,Lt);const r=ti(t.firestore,io),s=Nx(r);let o;return o=typeof(e=ze(e))=="string"||e instanceof Lh?cL(s,"updateDoc",t._key,e,n,i):uL(s,"updateDoc",t._key,e),Rm(r,[o.toMutation(t._key,pn.exists(!0))])}function _L(t){return Rm(ti(t.firestore,io),[new um(t._key,pn.none())])}function zx(t,...e){var n,i,r;t=ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||R0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(R0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,u,h;if(t instanceof Lt)u=ti(t.firestore,io),h=am(t._key.path),l={next:d=>{e[o]&&e[o](vL(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ti(t,Oh);u=ti(d.firestore,io),h=d._query;const f=new jx(u);l={next:m=>{e[o]&&e[o](new mL(u,f,d,m))},error:e[o+1],complete:e[o+2]},fL(t._query)}return function(f,m,y,v){const E=new YO(v),T=new NO(m,E,y);return f.asyncQueue.enqueueAndForget(async()=>CO(await x0(f),T)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>AO(await x0(f),T))}}(Ax(u),h,a,l)}function Rm(t,e){return function(i,r){const s=new Mr;return i.asyncQueue.enqueueAndForget(async()=>zO(await ZO(i),r,s)),s.promise}(Ax(t),e)}function vL(t,e,n){const i=n.docs.get(e._key),r=new jx(t);return new Fx(t,r,e._key,i,new sa(n.hasPendingWrites,n.fromCache),e.converter)}function Nm(){return new Cm("serverTimestamp")}(function(e,n=!0){(function(r){mo=r})(go),On(new mn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new io(new mM(i.getProvider("auth-internal")),new wM(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),en(Gv,"4.7.3",e),en(Gv,"4.7.3","esm2017")})();const $x="@firebase/installations",Dm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=1e4,Hx=`w:${Dm}`,qx="FIS_v2",wL="https://firebaseinstallations.googleapis.com/v1",EL=60*60*1e3,TL="installations",SL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qr=new Jr(TL,SL,IL);function Kx(t){return t instanceof vn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx({projectId:t}){return`${wL}/projects/${t}/installations`}function Qx(t){return{token:t.token,requestStatus:2,expiresIn:bL(t.expiresIn),creationTime:Date.now()}}async function Yx(t,e){const i=(await e.json()).error;return qr.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Xx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xL(t,{refreshToken:e}){const n=Xx(t);return n.append("Authorization",kL(e)),n}async function Jx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function bL(t){return Number(t.replace("s","000"))}function kL(t){return`${qx} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Gx(t),r=Xx(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:qx,appId:t.appId,sdkVersion:Hx},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await Jx(()=>fetch(i,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Qx(u.authToken)}}else throw await Yx("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=/^[cdef][\w-]{21}$/,Dp="";function RL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=NL(t);return PL.test(n)?n:Dp}catch{return Dp}}function NL(t){return AL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new Map;function tb(t,e){const n=Uh(t);nb(n,e),DL(n,e)}function nb(t,e){const n=eb.get(t);if(n)for(const i of n)i(e)}function DL(t,e){const n=ML();n&&n.postMessage({key:t,fid:e}),OL()}let Cr=null;function ML(){return!Cr&&"BroadcastChannel"in self&&(Cr=new BroadcastChannel("[Firebase] FID Change"),Cr.onmessage=t=>{nb(t.data.key,t.data.fid)}),Cr}function OL(){eb.size===0&&Cr&&(Cr.close(),Cr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="firebase-installations-database",VL=1,Kr="firebase-installations-store";let Yd=null;function Mm(){return Yd||(Yd=VS(LL,VL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Kr)}}})),Yd}async function Wc(t,e){const n=Uh(t),r=(await Mm()).transaction(Kr,"readwrite"),s=r.objectStore(Kr),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&tb(t,e.fid),e}async function ib(t){const e=Uh(t),i=(await Mm()).transaction(Kr,"readwrite");await i.objectStore(Kr).delete(e),await i.done}async function Bh(t,e){const n=Uh(t),r=(await Mm()).transaction(Kr,"readwrite"),s=r.objectStore(Kr),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&tb(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(t){let e;const n=await Bh(t.appConfig,i=>{const r=FL(i),s=jL(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Dp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function FL(t){const e=t||{fid:RL(),registrationStatus:0};return rb(e)}function jL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(qr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=UL(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:BL(t)}:{installationEntry:e}}async function UL(t,e){try{const n=await CL(t,e);return Wc(t.appConfig,n)}catch(n){throw Kx(n)&&n.customData.serverCode===409?await ib(t.appConfig):await Wc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function BL(t){let e=await N0(t.appConfig);for(;e.registrationStatus===1;)await Zx(100),e=await N0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Om(t);return i||n}return e}function N0(t){return Bh(t,e=>{if(!e)throw qr.create("installation-not-found");return rb(e)})}function rb(t){return zL(t)?{fid:t.fid,registrationStatus:0}:t}function zL(t){return t.registrationStatus===1&&t.registrationTime+Wx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L({appConfig:t,heartbeatServiceProvider:e},n){const i=WL(t,n),r=xL(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:Hx,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await Jx(()=>fetch(i,a));if(l.ok){const u=await l.json();return Qx(u)}else throw await Yx("Generate Auth Token",l)}function WL(t,{fid:e}){return`${Gx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(t,e=!1){let n;const i=await Bh(t.appConfig,s=>{if(!sb(s))throw qr.create("not-registered");const o=s.authToken;if(!e&&KL(o))return s;if(o.requestStatus===1)return n=HL(t,e),s;{if(!navigator.onLine)throw qr.create("app-offline");const a=QL(s);return n=qL(t,a),a}});return n?await n:i.authToken}async function HL(t,e){let n=await D0(t.appConfig);for(;n.authToken.requestStatus===1;)await Zx(100),n=await D0(t.appConfig);const i=n.authToken;return i.requestStatus===0?Lm(t,e):i}function D0(t){return Bh(t,e=>{if(!sb(e))throw qr.create("not-registered");const n=e.authToken;return YL(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function qL(t,e){try{const n=await $L(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Wc(t.appConfig,i),n}catch(n){if(Kx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ib(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Wc(t.appConfig,i)}throw n}}function sb(t){return t!==void 0&&t.registrationStatus===2}function KL(t){return t.requestStatus===2&&!GL(t)}function GL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+EL}function QL(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function YL(t){return t.requestStatus===1&&t.requestTime+Wx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t){const e=t,{installationEntry:n,registrationPromise:i}=await Om(e);return i?i.catch(console.error):Lm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(t,e=!1){const n=t;return await ZL(n),(await Lm(n,e)).token}async function ZL(t){const{registrationPromise:e}=await Om(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t){if(!t||!t.options)throw Xd("App Configuration");if(!t.name)throw Xd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Xd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xd(t){return qr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="installations",tV="installations-internal",nV=t=>{const e=t.getProvider("app").getImmediate(),n=eV(e),i=wl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},iV=t=>{const e=t.getProvider("app").getImmediate(),n=wl(e,ob).getImmediate();return{getId:()=>XL(n),getToken:r=>JL(n,r)}};function rV(){On(new mn(ob,nV,"PUBLIC")),On(new mn(tV,iV,"PRIVATE"))}rV();en($x,Dm);en($x,Dm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="analytics",sV="firebase_id",oV="origin",aV=60*1e3,lV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt=new wh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},tn=new Jr("analytics","Analytics",uV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t){if(!t.startsWith(Vm)){const e=tn.create("invalid-gtag-resource",{gtagURL:t});return Vt.warn(e.message),""}return t}function ab(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function hV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function dV(t,e){const n=hV("firebase-js-sdk-policy",{createScriptURL:cV}),i=document.createElement("script"),r=`${Vm}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function fV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function pV(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await ab(n)).find(u=>u.measurementId===r);l&&await e[l.appId]}}catch(a){Vt.error(a)}t("config",r,s)}async function gV(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await ab(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Vt.error(s)}}function mV(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await gV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await pV(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Vt.error(a)}}return r}function yV(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=mV(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function _V(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Vm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=30,wV=1e3;class EV{constructor(e={},n=wV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lb=new EV;function TV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function SV(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:TV(i)},s=lV.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw tn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function IV(t,e=lb,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw tn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw tn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new kV;return setTimeout(async()=>{a.abort()},aV),ub({appId:i,apiKey:r,measurementId:s},o,a,e)}async function ub(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=lb){var s;const{appId:o,measurementId:a}=t;try{await xV(i,e)}catch(l){if(a)return Vt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await SV(t);return r.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!bV(u)){if(r.deleteThrottleMetadata(o),a)return Vt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?vv(n,r.intervalMillis,vV):vv(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Vt.debug(`Calling attemptFetch again in ${h} millis`),ub(t,d,i,r)}}function xV(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(tn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function bV(t){if(!(t instanceof vn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class kV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function CV(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(){if(DS())try{await MS()}catch(t){return Vt.warn(tn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Vt.warn(tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function PV(t,e,n,i,r,s,o){var a;const l=IV(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Vt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Vt.error(m)),e.push(l);const u=AV().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,u]);_V(s)||dV(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[oV]="firebase",f.update=!0,d!=null&&(f[sV]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.app=e}_delete(){return delete xa[this.app.options.appId],Promise.resolve()}}let xa={},O0=[];const L0={};let Jd="dataLayer",NV="gtag",V0,cb,F0=!1;function DV(){const t=[];if(NS()&&t.push("This is a browser extension environment."),AP()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=tn.create("invalid-analytics-context",{errorInfo:e});Vt.warn(n.message)}}function MV(t,e,n){DV();const i=t.options.appId;if(!i)throw tn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Vt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw tn.create("no-api-key");if(xa[i]!=null)throw tn.create("already-exists",{id:i});if(!F0){fV(Jd);const{wrappedGtag:s,gtagCore:o}=yV(xa,O0,L0,Jd,NV);cb=s,V0=o,F0=!0}return xa[i]=PV(t,O0,L0,e,V0,Jd,n),new RV(t)}function OV(t,e,n,i){t=ze(t),CV(cb,xa[t.app.options.appId],e,n,i).catch(r=>Vt.error(r))}const j0="@firebase/analytics",U0="0.10.8";function LV(){On(new mn(M0,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return MV(i,r,n)},"PUBLIC")),On(new mn("analytics-internal",t,"PRIVATE")),en(j0,U0),en(j0,U0,"esm2017");function t(e){try{const n=e.getProvider(M0).getImmediate();return{logEvent:(i,r,s)=>OV(n,i,r,s)}}catch(n){throw tn.create("interop-component-reg-failed",{reason:n})}}}LV();const VV={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},hb=FS(VV),$o=cM(hb),so=iL(hb),db=O.createContext(null);function FV({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{const l=JN($o,u=>{n(u),r(!1)});return()=>l()},[]);const a=O.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,u){o(null);try{return(await qN($o,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,u){o(null);try{return(await KN($o,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await ZN($o)},async resetPassword(l){o(null);try{await HN($o,l)}catch(u){throw o((u==null?void 0:u.message)||"Failed to send reset email."),u}}}),[e,i,s]);return _.jsx(db.Provider,{value:a,children:t})}function fi(){return O.useContext(db)}function jV(){const{user:t,logout:e}=fi(),n=_l();async function i(){await e(),n("/dashboard")}return _.jsx("div",{className:"nav",children:_.jsxs("div",{className:"nav-inner",children:[_.jsxs("div",{className:"brand",children:[_.jsx("div",{className:"badge"}),_.jsxs("div",{children:[_.jsx("h1",{children:"Body Recomposition Tracker"}),_.jsx("div",{className:"small",children:"Trend-first logging: weight , strength /"})]})]}),_.jsxs("div",{className:"nav-links",children:[_.jsxs("div",{className:"nav-tabs",children:[_.jsx(hs,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),_.jsx(hs,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&_.jsx(hs,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&_.jsx(hs,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),_.jsx("div",{className:"nav-actions",children:t?_.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):_.jsxs(_.Fragment,{children:[_.jsx(hs,{to:"/login",className:"btn",children:"Log in"}),_.jsx(hs,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function B0({children:t}){const{user:e,initializing:n}=fi();return n?_.jsx("div",{className:"panel",children:_.jsx("div",{className:"muted",children:"Loading"})}):e?t:_.jsx(ap,{to:"/login",replace:!0})}const fb=O.createContext(null),z0={email:"",sex:"",height:"",targetWeight:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],createdAt:null};function UV({children:t}){const{user:e}=fi(),[n,i]=O.useState(z0),[r,s]=O.useState(!1),[o,a]=O.useState(null);O.useEffect(()=>{if(i(z0),a(null),!e)return;const u=al(so,"users",e.uid);s(!0);const h=zx(u,async d=>{if(!d.exists()){await Ux(u,{email:e.email||"",sex:"",height:"",targetWeight:null,triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],createdAt:Nm()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",targetWeight:f.targetWeight??"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=O.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(u){if(!e)throw new Error("Not authenticated");a(null);const h=al(so,"users",e.uid);await Bx(h,u)}}),[n,r,o,e]);return _.jsx(fb.Provider,{value:l,children:t})}function Fm(){return O.useContext(fb)}function pb(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function Mp(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function BV(){return pb(new Date)}function zV(t,e){return t.dateIso.localeCompare(e.dateIso)}function jm(t,e,n){const i=nL(so,"users",t,"entries");return zx(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(zV);e(o)},n)}async function $V(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=al(so,"users",t,"entries",n),r=Mp(n),s={...e,dateIso:n,date:e.date||r,updatedAt:Nm()};await Ux(i,s,{merge:!0})}async function WV(t,e,n){const i=al(so,"users",t,"entries",e);await Bx(i,{...n,updatedAt:Nm()})}async function HV(t,e){const n=al(so,"users",t,"entries",e);await _L(n)}const qV=2/8;function gb({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function KV({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function ds(t,e=qV){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function GV(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function Zd(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=GV(i,r,s);return Number.isFinite(o)?o:null}function QV({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=Zd(n,"neck",i),a=Zd(n,"waist",i),l=Zd(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const u=a-o;if(!(u>0))return null;const h=495/(1.0324-.19077*Math.log10(u)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const u=a+l-o;if(!(u>0))return null;const h=495/(1.29579-.35004*Math.log10(u)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function YV({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function mb(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(a=>({dateIso:a.dateIso,weight:pr(a.weight),protein:pr(a.protein),carbs:pr(a.carbs),fats:pr(a.fats),bench:pr(a.bench),squat:pr(a.squat),deadlift:pr(a.deadlift),calories:gb(a),avgStrength:KV(a),bfPct:QV({sex:i,heightCm:r,entry:a,tripleEnabled:n})}));s.forEach(a=>{a.lbm=YV({weightKg:a.weight,bfPct:a.bfPct})});const o={weight:ds(s.map(a=>a.weight)),bench:ds(s.map(a=>a.bench)),squat:ds(s.map(a=>a.squat)),deadlift:ds(s.map(a=>a.deadlift)),calories:ds(s.map(a=>a.calories)),avgStrength:ds(s.map(a=>a.avgStrength))};return s.map((a,l)=>({...a,wma:{weight:o.weight[l],bench:o.bench[l],squat:o.squat[l],deadlift:o.deadlift[l],calories:o.calories[l],avgStrength:o.avgStrength[l]}}))}function XV(t){var f,m,y,v;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=E=>E*7-1;function s(E){var T;for(let S=E;S>=0;S--){const b=(T=t[S])==null?void 0:T.lbm;if(Number.isFinite(b))return b}return null}for(let E=1;E<=i;E++){const T=(E-1)*7,S=r(E),b=t.slice(T,S+1),R=Wo(b.map(A=>A.calories)),M=Wo(b.map(A=>{var ie;return(ie=A==null?void 0:A.wma)==null?void 0:ie.avgStrength})),D=(m=(f=b[0])==null?void 0:f.wma)==null?void 0:m.weight,I=(v=(y=b[b.length-1])==null?void 0:y.wma)==null?void 0:v.weight,w=Number.isFinite(D)&&Number.isFinite(I)?I-D:null;let k=null;if(Number.isFinite(R)&&Number.isFinite(w)){const ie=-w*7700/7;k=R+ie}const C=s(S);let P=null,N="";Number.isFinite(C)&&Number.isFinite(w)&&(P=Math.max(0,-w)/C*100,P<.5?N="Conservative":P<=1?N="Optimal":N="Aggressive"),e.push({week:E,avgCalories:R,weightChange:w,tdee:k,avgStrengthWma:M,lbm:C,lossRatePct:P,lossRateStatus:N,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(E=>E.tdee).filter(Number.isFinite),a=o.length?Wo(o):null,l=e.slice(0,2).map(E=>E.avgStrengthWma).filter(Number.isFinite),u=l.length?Wo(l):null,h=e.slice(0,2).map(E=>Number.isFinite(E.weightChange)?Math.max(0,-E.weightChange):null).filter(Number.isFinite),d=h.length?Wo(h):null;if(Number.isFinite(a))for(const E of e)Number.isFinite(E.tdee)&&(E.tdeeChangeFromBaseline=E.tdee-a,E.adaptationPct=E.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:u,baselineWeeklyLoss:d}}function pr(t){const e=Number(t);return Number.isFinite(e)?e:null}function Wo(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function Bn(){let t=0,e=0;for(;t===0;)t=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}function $0(t,e,n){return Math.max(e,Math.min(n,t))}function JV(){return{email:"sample@demo.local",sex:"male",height:175,targetWeight:82,triplemeasurements:!1,createdAt:null}}function ZV(t=60){const e=new Date;e.setDate(e.getDate()-(t-1));const n=[];let i=90,r=100,s=140,o=180;for(let a=0;a<t;a++){const l=new Date(e);l.setDate(e.getDate()+a);const u=pb(l),d=2400-Math.floor(a/14)*125;i-=5.5/(t-1),r+=4/(t-1),s+=4/(t-1),o+=5/(t-1);const f=i+Bn()*.8,m=r+Bn()*2,y=s+Bn()*2.5,v=o+Bn()*2.8,E=180+Bn()*10,T=70+Bn()*6,S=(d-4*E-9*T)/4+Bn()*10,b={id:u,dateIso:u,date:null,weight:mu(f),protein:ef(E),carbs:ef($0(S,100,320)),fats:ef($0(T,45,95)),bench:mu(m),squat:mu(y),deadlift:mu(v),neck:null,waist:null,hip:null};if(a%7===0){const D=96+-7*(a/(t-1));b.neck=40+Bn()*.3,b.waist=D+Bn()*.6}n.push(b)}return n}function ef(t){return Number.isFinite(t)?Math.round(t):null}function mu(t){return Number.isFinite(t)?Math.round(t*10)/10:null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Rl(t){return t+.5|0}const Oi=(t,e,n)=>Math.max(Math.min(t,n),e);function oa(t){return Oi(Rl(t*2.55),0,255)}function Yi(t){return Oi(Rl(t*255),0,255)}function Kn(t){return Oi(Rl(t/2.55)/100,0,1)}function W0(t){return Oi(Rl(t*100),0,100)}const Gt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Op=[..."0123456789ABCDEF"],eF=t=>Op[t&15],tF=t=>Op[(t&240)>>4]+Op[t&15],yu=t=>(t&240)>>4===(t&15),nF=t=>yu(t.r)&&yu(t.g)&&yu(t.b)&&yu(t.a);function iF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Gt[t[1]]*17,g:255&Gt[t[2]]*17,b:255&Gt[t[3]]*17,a:e===5?Gt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Gt[t[1]]<<4|Gt[t[2]],g:Gt[t[3]]<<4|Gt[t[4]],b:Gt[t[5]]<<4|Gt[t[6]],a:e===9?Gt[t[7]]<<4|Gt[t[8]]:255})),n}const rF=(t,e)=>t<255?e(t):"";function sF(t){var e=nF(t)?eF:tF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+rF(t.a,e):void 0}const oF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yb(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function aF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function lF(t,e,n){const i=yb(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function uF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Um(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=uF(n,i,r,h,s),l=l*60+.5),[l|0,u||0,a]}function Bm(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Yi)}function zm(t,e,n){return Bm(yb,t,e,n)}function cF(t,e,n){return Bm(lF,t,e,n)}function hF(t,e,n){return Bm(aF,t,e,n)}function _b(t){return(t%360+360)%360}function dF(t){const e=oF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?oa(+e[5]):Yi(+e[5]));const r=_b(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=cF(r,s,o):e[1]==="hsv"?i=hF(r,s,o):i=zm(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function fF(t,e){var n=Um(t);n[0]=_b(n[0]+e),n=zm(n),t.r=n[0],t.g=n[1],t.b=n[2]}function pF(t){if(!t)return;const e=Um(t),n=e[0],i=W0(e[1]),r=W0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Kn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const H0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},q0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function gF(){const t={},e=Object.keys(q0),n=Object.keys(H0);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,H0[s]);s=parseInt(q0[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let _u;function mF(t){_u||(_u=gF(),_u.transparent=[0,0,0,0]);const e=_u[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const yF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function _F(t){const e=yF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?oa(o):Oi(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?oa(i):Oi(i,0,255)),r=255&(e[4]?oa(r):Oi(r,0,255)),s=255&(e[6]?oa(s):Oi(s,0,255)),{r:i,g:r,b:s,a:n}}}function vF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Kn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const tf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,fs=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function wF(t,e,n){const i=fs(Kn(t.r)),r=fs(Kn(t.g)),s=fs(Kn(t.b));return{r:Yi(tf(i+n*(fs(Kn(e.r))-i))),g:Yi(tf(r+n*(fs(Kn(e.g))-r))),b:Yi(tf(s+n*(fs(Kn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function vu(t,e,n){if(t){let i=Um(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=zm(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function vb(t,e){return t&&Object.assign(e||{},t)}function K0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Yi(t[3]))):(e=vb(t,{r:0,g:0,b:0,a:1}),e.a=Yi(e.a)),e}function EF(t){return t.charAt(0)==="r"?_F(t):dF(t)}class ll{constructor(e){if(e instanceof ll)return e;const n=typeof e;let i;n==="object"?i=K0(e):n==="string"&&(i=iF(e)||mF(e)||EF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=vb(this._rgb);return e&&(e.a=Kn(e.a)),e}set rgb(e){this._rgb=K0(e)}rgbString(){return this._valid?vF(this._rgb):void 0}hexString(){return this._valid?sF(this._rgb):void 0}hslString(){return this._valid?pF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=wF(this._rgb,e._rgb,n)),this}clone(){return new ll(this.rgb)}alpha(e){return this._rgb.a=Yi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Rl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return vu(this._rgb,2,e),this}darken(e){return vu(this._rgb,2,-e),this}saturate(e){return vu(this._rgb,1,e),this}desaturate(e){return vu(this._rgb,1,-e),this}rotate(e){return fF(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function zn(){}const TF=(()=>{let t=0;return()=>t++})();function Se(t){return t==null}function it(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function pe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function sn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function En(t,e){return sn(t)?t:e}function le(t,e){return typeof t>"u"?e:t}const SF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function be(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ye(t,e,n,i){let r,s,o;if(it(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(pe(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Hc(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function qc(t){if(it(t))return t.map(qc);if(pe(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=qc(t[n[r]]);return e}return t}function wb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function IF(t,e,n,i){if(!wb(t))return;const r=e[t],s=n[t];pe(r)&&pe(s)?ul(r,s,i):e[t]=qc(s)}function ul(t,e,n){const i=it(e)?e:[e],r=i.length;if(!pe(t))return t;n=n||{};const s=n.merger||IF;let o;for(let a=0;a<r;++a){if(o=i[a],!pe(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],t,o,n)}return t}function ba(t,e){return ul(t,e,{merger:xF})}function xF(t,e,n){if(!wb(t))return;const i=e[t],r=n[t];pe(i)&&pe(r)?ba(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=qc(r))}const G0={"":t=>t,x:t=>t.x,y:t=>t.y};function bF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function kF(t){const e=bF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Kc(t,e){return(G0[e]||(G0[e]=kF(e)))(t)}function $m(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Gc=t=>typeof t<"u",nr=t=>typeof t=="function",Q0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function CF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const yt=Math.PI,Mn=2*yt,AF=Mn+yt,Qc=Number.POSITIVE_INFINITY,PF=yt/180,hn=yt/2,gr=yt/4,Y0=yt*2/3,Eb=Math.log10,oo=Math.sign;function ka(t,e,n){return Math.abs(t-e)<n}function X0(t){const e=Math.round(t);t=ka(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Eb(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function RF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function NF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function cl(t){return!NF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function DF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function MF(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ar(t){return t*(yt/180)}function OF(t){return t*(180/yt)}function J0(t){if(!sn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function LF(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*yt&&(s+=Mn),{angle:s,distance:r}}function Lp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function VF(t,e){return(t-e+AF)%Mn-yt}function Ti(t){return(t%Mn+Mn)%Mn}function Tb(t,e,n,i){const r=Ti(t),s=Ti(e),o=Ti(n),a=Ti(s-r),l=Ti(o-r),u=Ti(r-s),h=Ti(r-o);return r===s||r===o||i&&s===o||a>l&&u<h}function Jt(t,e,n){return Math.max(e,Math.min(n,t))}function FF(t){return Jt(t,-32768,32767)}function aa(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Wm(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Pr=(t,e,n,i)=>Wm(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),jF=(t,e,n)=>Wm(t,n,i=>t[i][e]>=n);function UF(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Sb=["push","pop","shift","splice","unshift"];function BF(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Sb.forEach(n=>{const i="_onData"+$m(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Z0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Sb.forEach(s=>{delete t[s]}),delete t._chartjs)}function zF(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ib=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function xb(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Ib.call(window,()=>{i=!1,t.apply(e,n)}))}}function $F(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const bb=t=>t==="start"?"left":t==="end"?"right":"center",Ut=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,WF=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function HF(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(r=Math.min(Pr(l,h,d).lo,n?i:Pr(e,h,o.getPixelForValue(d)).lo),u){const v=l.slice(0,r+1).reverse().findIndex(E=>!Se(E[a.axis]));r-=Math.max(0,v)}r=Jt(r,0,i-1)}if(y){let v=Math.max(Pr(l,o.axis,f,!0).hi+1,n?0:Pr(e,h,o.getPixelForValue(f),!0).hi+1);if(u){const E=l.slice(v-1).findIndex(T=>!Se(T[a.axis]));v+=Math.max(0,E)}s=Jt(v,r,i)-r}else s=i-r}return{start:r,count:s}}function qF(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const wu=t=>t===0||t===1,ew=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Mn/n)),tw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Mn/n)+1,Ca={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*hn)+1,easeOutSine:t=>Math.sin(t*hn),easeInOutSine:t=>-.5*(Math.cos(yt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>wu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>wu(t)?t:ew(t,.075,.3),easeOutElastic:t=>wu(t)?t:tw(t,.075,.3),easeInOutElastic(t){return wu(t)?t:t<.5?.5*ew(t*2,.1125,.45):.5+.5*tw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ca.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ca.easeInBounce(t*2)*.5:Ca.easeOutBounce(t*2-1)*.5+.5};function Hm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function nw(t){return Hm(t)?t:new ll(t)}function nf(t){return Hm(t)?t:new ll(t).saturate(.5).darken(.1).hexString()}const KF=["x","y","borderWidth","radius","tension"],GF=["color","borderColor","backgroundColor"];function QF(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:GF},numbers:{type:"number",properties:KF}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function YF(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const iw=new Map;function XF(t,e){e=e||{};const n=t+JSON.stringify(e);let i=iw.get(n);return i||(i=new Intl.NumberFormat(t,e),iw.set(n,i)),i}function kb(t,e,n){return XF(e,n).format(t)}const JF={values(t){return it(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=ZF(t,n)}const o=Eb(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),kb(t,i,l)}};function ZF(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Cb={formatters:JF};function ej(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Cb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Gr=Object.create(null),Vp=Object.create(null);function Aa(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function rf(t,e,n){return typeof e=="string"?ul(Aa(t,e),n):ul(Aa(t,""),e)}class tj{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>nf(r.backgroundColor),this.hoverBorderColor=(i,r)=>nf(r.borderColor),this.hoverColor=(i,r)=>nf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return rf(this,e,n)}get(e){return Aa(this,e)}describe(e,n){return rf(Vp,e,n)}override(e,n){return rf(Gr,e,n)}route(e,n,i,r){const s=Aa(this,e),o=Aa(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return pe(l)?Object.assign({},u,l):le(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Be=new tj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[QF,YF,ej]);function nj(t){return!t||Se(t.size)||Se(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function rw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function mr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function sw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Fp(t,e,n,i){Ab(t,e,n,i,null)}function Ab(t,e,n,i,r){let s,o,a,l,u,h,d,f;const m=e.pointStyle,y=e.rotation,v=e.radius;let E=(y||0)*PF;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(E),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,v,0,0,Mn):t.arc(n,i,v,0,Mn),t.closePath();break;case"triangle":h=r?r/2:v,t.moveTo(n+Math.sin(E)*h,i-Math.cos(E)*v),E+=Y0,t.lineTo(n+Math.sin(E)*h,i-Math.cos(E)*v),E+=Y0,t.lineTo(n+Math.sin(E)*h,i-Math.cos(E)*v),t.closePath();break;case"rectRounded":u=v*.516,l=v-u,o=Math.cos(E+gr)*l,d=Math.cos(E+gr)*(r?r/2-u:l),a=Math.sin(E+gr)*l,f=Math.sin(E+gr)*(r?r/2-u:l),t.arc(n-d,i-a,u,E-yt,E-hn),t.arc(n+f,i-o,u,E-hn,E),t.arc(n+d,i+a,u,E,E+hn),t.arc(n-f,i+o,u,E+hn,E+yt),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}E+=gr;case"rectRot":d=Math.cos(E)*(r?r/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,f=Math.sin(E)*(r?r/2:v),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":E+=gr;case"cross":d=Math.cos(E)*(r?r/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,f=Math.sin(E)*(r?r/2:v),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(E)*(r?r/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,f=Math.sin(E)*(r?r/2:v),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),E+=gr,d=Math.cos(E)*(r?r/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,f=Math.sin(E)*(r?r/2:v),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(E)*v,a=Math.sin(E)*v,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(E)*(r?r/2:v),i+Math.sin(E)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function hl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function qm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Km(t){t.restore()}function ij(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function rj(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function sj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Se(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function oj(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function aj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Yc(t,e,n,i,r,s={}){const o=it(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,sj(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&aj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Se(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,i,s.maxWidth)),t.fillText(u,n,i,s.maxWidth),oj(t,n,i,u,s),i+=Number(r.lineHeight);t.restore()}function jp(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*yt,yt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,yt,hn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,hn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-hn,!0),t.lineTo(n+o.topLeft,i)}const lj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function cj(t,e){const n=(""+t).match(lj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const hj=t=>+t||0;function Pb(t,e){const n={},i=pe(e),r=i?Object.keys(e):e,s=pe(t)?i?o=>le(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=hj(s(o));return n}function dj(t){return Pb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Pa(t){return Pb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function _n(t){const e=dj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Nt(t,e){t=t||{},e=e||Be.font;let n=le(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=le(t.style,e.style);i&&!(""+i).match(uj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:le(t.family,e.family),lineHeight:cj(le(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:le(t.weight,e.weight),string:""};return r.string=nj(r),r}function Eu(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function fj(t,e,n){const{min:i,max:r}=t,s=SF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ns(t,e){return Object.assign(Object.create(t),e)}function Gm(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Mb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Gm([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Nb(a,l,()=>Ej(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return aw(a).includes(l)},ownKeys(a){return aw(a)},set(a,l,u){const h=a._storage||(a._storage=r());return a[l]=h[l]=u,delete a._keys,!0}})}function ao(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Rb(t,i),setContext:s=>ao(t,s,n,i),override:s=>ao(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return Nb(s,o,()=>gj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function Rb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:nr(n)?n:()=>n,isIndexable:nr(i)?i:()=>i}}const pj=(t,e)=>t?t+$m(e):e,Qm=(t,e)=>pe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Nb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function gj(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return nr(a)&&o.isScriptable(e)&&(a=mj(e,a,t,n)),it(a)&&a.length&&(a=yj(e,a,t,o.isIndexable)),Qm(e,a)&&(a=ao(a,r,s&&s[e],o)),a}function mj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),Qm(t,l)&&(l=Ym(r._scopes,r,t,l)),l}function yj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(pe(e[0])){const l=e,u=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Ym(u,r,t,h);e.push(ao(d,s,o&&o[t],a))}}return e}function Db(t,e,n){return nr(t)?t(e,n):t}const _j=(t,e)=>t===!0?e:typeof t=="string"?Kc(e,t):void 0;function vj(t,e,n,i,r){for(const s of e){const o=_j(n,s);if(o){t.add(o);const a=Db(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Ym(t,e,n,i){const r=e._rootScopes,s=Db(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=ow(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=ow(a,o,s,l,i),l===null)?!1:Gm(Array.from(a),[""],r,s,()=>wj(e,n,i))}function ow(t,e,n,i,r){for(;n;)n=vj(t,e,n,i,r);return n}function wj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return it(r)&&pe(n)?n:r||{}}function Ej(t,e,n,i){let r;for(const s of e)if(r=Mb(pj(s,t),n),typeof r<"u")return Qm(t,r)?Ym(n,i,t,r):r}function Mb(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function aw(t){let e=t._keys;return e||(e=t._keys=Tj(t._scopes)),e}function Tj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const Sj=Number.EPSILON||1e-14,lo=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ob=t=>t==="x"?"y":"x";function Ij(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Lp(s,r),l=Lp(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function xj(t,e,n){const i=t.length;let r,s,o,a,l,u=lo(t,0);for(let h=0;h<i-1;++h)if(l=u,u=lo(t,h+1),!(!l||!u)){if(ka(e[h],0,Sj)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function bj(t,e,n="x"){const i=Ob(n),r=t.length;let s,o,a,l=lo(t,0);for(let u=0;u<r;++u){if(o=a,a=l,l=lo(t,u+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[u]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[u])}}function kj(t,e="x"){const n=Ob(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,u=lo(t,0);for(o=0;o<i;++o)if(a=l,l=u,u=lo(t,o+1),!!l){if(u){const h=u[e]-l[e];r[o]=h!==0?(u[n]-l[n])/h:0}s[o]=a?u?oo(r[o-1])!==oo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}xj(t,r,s),bj(t,s,e)}function Tu(t,e,n){return Math.max(Math.min(t,n),e)}function Cj(t,e){let n,i,r,s,o,a=hl(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&hl(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Tu(r.cp1x,e.left,e.right),r.cp1y=Tu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Tu(r.cp2x,e.left,e.right),r.cp2y=Tu(r.cp2y,e.top,e.bottom)))}function Aj(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")kj(t,r);else{let u=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Ij(u,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&Cj(t,n)}function Xm(){return typeof window<"u"&&typeof document<"u"}function Jm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Xc(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const zh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Pj(t,e){return zh(t).getPropertyValue(e)}const Rj=["top","right","bottom","left"];function Or(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Rj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Nj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Dj(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Nj(r,s,t.target))a=r,l=s;else{const u=e.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Tr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=zh(n),s=r.boxSizing==="border-box",o=Or(r,"padding"),a=Or(r,"border","width"),{x:l,y:u,box:h}=Dj(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((u-f)/y*n.height/i)}}function Mj(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Jm(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=zh(s),l=Or(a,"border","width"),u=Or(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,i=Xc(a.maxWidth,s,"clientWidth"),r=Xc(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Qc,maxHeight:r||Qc}}const Li=t=>Math.round(t*10)/10;function Oj(t,e,n,i){const r=zh(t),s=Or(r,"margin"),o=Xc(r.maxWidth,t,"clientWidth")||Qc,a=Xc(r.maxHeight,t,"clientHeight")||Qc,l=Mj(t,e,n);let{width:u,height:h}=l;if(r.boxSizing==="content-box"){const f=Or(r,"border","width"),m=Or(r,"padding");u-=m.width+f.width,h-=m.height+f.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=Li(Math.min(u,o,l.maxWidth)),h=Li(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Li(u/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,u=Li(Math.floor(h*i))),{width:u,height:h}}function lw(t,e,n){const i=e||1,r=Li(t.height*i),s=Li(t.width*i);t.height=Li(t.height),t.width=Li(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Lj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Xm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function uw(t,e){const n=Pj(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Sr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Vj(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Fj(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Sr(t,r,n),a=Sr(r,s,n),l=Sr(s,e,n),u=Sr(o,a,n),h=Sr(a,l,n);return Sr(u,h,n)}const jj=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Uj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Bs(t,e,n){return t?jj(e,n):Uj()}function Lb(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Vb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Fb(t){return t==="angle"?{between:Tb,compare:VF,normalize:Ti}:{between:aa,compare:(e,n)=>e-n,normalize:e=>e}}function cw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function Bj(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=Fb(i),l=e.length;let{start:u,end:h,loop:d}=t,f,m;if(d){for(u+=l,h+=l,f=0,m=l;f<m&&o(a(e[u%l][i]),r,s);++f)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:d,style:t.style}}function zj(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=Fb(i),{start:h,end:d,loop:f,style:m}=Bj(t,e,n),y=[];let v=!1,E=null,T,S,b;const R=()=>l(r,b,T)&&a(r,b)!==0,M=()=>a(s,T)===0||l(s,b,T),D=()=>v||R(),I=()=>!v||M();for(let w=h,k=h;w<=d;++w)S=e[w%o],!S.skip&&(T=u(S[i]),T!==b&&(v=l(T,r,s),E===null&&D()&&(E=a(T,r)===0?w:k),E!==null&&I()&&(y.push(cw({start:E,end:w,loop:f,count:o,style:m})),E=null),k=w,b=T));return E!==null&&y.push(cw({start:E,end:d,loop:f,count:o,style:m})),y}function $j(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=zj(i[r],t.points,e);s.length&&n.push(...s)}return n}function Wj(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Hj(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function qj(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=Wj(n,r,s,i);if(i===!0)return hw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,u=!!t._fullLoop&&o===0&&a===r-1;return hw(t,Hj(n,o,l,u),n,e)}function hw(t,e,n,i){return!i||!i.setContext||!n?e:Kj(t,e,n,i)}function Kj(t,e,n,i){const r=t._chart.getContext(),s=dw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=s,d=e[0].start,f=d;function m(y,v,E,T){const S=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=S;for(;n[v%l].skip;)v+=S;y%l!==v%l&&(u.push({start:y%l,end:v%l,loop:E,style:T}),h=T,d=v%l)}}for(const y of e){d=a?d:y.start;let v=n[d%l],E;for(f=d+1;f<=y.end;f++){const T=n[f%l];E=dw(i.setContext(ns(r,{type:"segment",p0:v,p1:T,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),Gj(E,h)&&m(d,f-1,y.loop,h),v=T,h=E}d<f-1&&m(d,f-1,y.loop,h)}return u}function dw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Gj(t,e){if(!e)return!1;const n=[],i=function(r,s){return Hm(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Su(t,e,n){return t.options.clip?t[n]:e[n]}function Qj(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Su(n,e,"left"),right:Su(n,e,"right"),top:Su(i,e,"top"),bottom:Su(i,e,"bottom")}:e}function Yj(t,e){const n=e._clip;if(n.disabled)return!1;const i=Qj(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Xj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ib.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var $n=new Xj;const fw="transparent",Jj={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=nw(t||fw),r=i.valid&&nw(e||fw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Zj{constructor(e,n,i,r){const s=n[i];r=Eu([e.to,r,s,e.from]);const o=Eu([e.from,s,r]);this._active=!0,this._fn=e.fn||Jj[e.type||typeof o],this._easing=Ca[e.easing]||Ca.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Eu([e.to,n,r,e.from]),this._from=Eu([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class jb{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!pe(e))return;const n=Object.keys(Be.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!pe(s))return;const o={};for(const a of n)o[a]=s[a];(it(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=t4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&e4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[u];let d=s[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}s[u]=d=new Zj(f,e,u,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return $n.add(this._chart,i),!0}}function e4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function t4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function pw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function n4(t,e,n){if(n===!1)return!1;const i=pw(t,n),r=pw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function i4(t){let e,n,i,r;return pe(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function Ub(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function gw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}u=t.values[l],sn(u)&&(s||e===0||oo(e)===oo(u))&&(e+=u)}return!h&&!i.all?0:e}function r4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function sf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function s4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function o4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function a4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function mw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function yw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,u=o.axis,h=s4(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const y=e[m],{[l]:v,[u]:E}=y,T=y._stacks||(y._stacks={});f=T[u]=a4(r,h,v),f[a]=E,f._top=mw(f,o,!0,i.type),f._bottom=mw(f,o,!1,i.type);const S=f._visualValues||(f._visualValues={});S[a]=E}}function of(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function l4(t,e){return ns(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function u4(t,e,n){return ns(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ho(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const af=t=>t==="reset"||t==="none",_w=(t,e)=>e?t:Object.assign({},t),c4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ub(n,!0),values:null};class Ra{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=sf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ho(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,y)=>d==="x"?f:d==="r"?y:m,s=n.xAxisID=le(i.xAxisID,of(e,"x")),o=n.yAxisID=le(i.yAxisID,of(e,"y")),a=n.rAxisID=le(i.rAxisID,of(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Z0(this._data,this),e._stacked&&Ho(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(pe(n)){const r=this._cachedMeta;this._data=r4(n,r)}else if(i!==n){if(i){Z0(i,this);const r=this._cachedMeta;Ho(r),r._parsed=[]}n&&Object.isExtensible(n)&&BF(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=sf(n.vScale,n),n.stack!==i.stack&&(r=!0,Ho(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(yw(this,n._parsed),n._stacked=sf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{it(r[e])?f=this.parseArrayData(i,r,e,n):pe(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),u=d);i._sorted=l}o&&yw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,d=new Array(r);let f,m,y;for(f=0,m=r;f<m;++f)y=f+i,d[f]={[a]:h||s.parse(u[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],u[h]={x:s.parse(Kc(m,a),f),y:o.parse(Kc(m,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:Ub(r,!0),values:n._stacks[e.axis]._visualValues};return gw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=gw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=c4(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=o4(a);let f,m;function y(){m=r[f];const v=m[a.axis];return!sn(m[e.axis])||h>v||d<v}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(u,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(u,e,m,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],sn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=i4(le(this.options.clip,n4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&u?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=u4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=l4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Gc(i);if(a)return _w(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),m=Object.keys(Be.elements[e]),y=()=>this.getContext(i,r,n),v=u.resolveNamedOptions(f,m,y,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(_w(v,l))),v}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const u=new jb(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||af(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){af(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!af(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Ho(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ne(Ra,"defaults",{}),ne(Ra,"datasetElementType",null),ne(Ra,"dataElementType",null);class Xu extends Ra{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=HF(n,r,o);this._drawStart=a,this._drawCount=l,qF(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,m=a.axis,{spanGaps:y,segment:v}=this.options,E=cl(y)?y:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||r==="none",S=n+i,b=e.length;let R=n>0&&this.getParsed(n-1);for(let M=0;M<b;++M){const D=e[M],I=T?D:{};if(M<n||M>=S){I.skip=!0;continue}const w=this.getParsed(M),k=Se(w[m]),C=I[f]=o.getPixelForValue(w[f],M),P=I[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[m],M);I.skip=isNaN(C)||isNaN(P)||k,I.stop=M>0&&Math.abs(w[f]-R[f])>E,v&&(I.parsed=w,I.raw=u.data[M]),d&&(I.options=h||this.resolveDataElementOptions(M,D.active?"active":r)),T||this.updateElement(D,M,I,r),R=w}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ne(Xu,"id","line"),ne(Xu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ne(Xu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function yr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Zm{constructor(e){ne(this,"options");this.options=e||{}}static override(e){Object.assign(Zm.prototype,e)}init(){}formats(){return yr()}parse(){return yr()}format(){return yr()}add(){return yr()}diff(){return yr()}startOf(){return yr()}endOf(){return yr()}}var h4={_date:Zm};function d4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?jF:Pr;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(s,e,n-d),m=u(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=u(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(v=>!Se(v[d.axis]));h.lo-=Math.max(0,m);const y=f.slice(h.hi).findIndex(v=>!Se(v[d.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function $h(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:d,hi:f}=d4(s[a],e,o,r);for(let m=d;m<=f;++m){const y=h[m];y.skip||i(y,u,m)}}}function f4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function lf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||$h(t,n,e,function(a,l,u){!r&&!hl(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function p4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=LF(o,{x:e.x,y:e.y});Tb(d,u,h)&&r.push({element:o,datasetIndex:a,index:l})}return $h(t,n,e,s),r}function g4(t,e,n,i,r,s){let o=[];const a=f4(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const y=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(y))&&!m)return;const E=a(e,y);E<l?(o=[{element:h,datasetIndex:d,index:f}],l=E):E===l&&o.push({element:h,datasetIndex:d,index:f})}return $h(t,n,e,u),o}function uf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?p4(t,e,n,r):g4(t,e,n,i,r,s)}function vw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return $h(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var m4={modes:{index(t,e,n,i){const r=Tr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?lf(t,r,s,i,o):uf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Tr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?lf(t,r,s,i,o):uf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Tr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return lf(t,r,s,i,o)},nearest(t,e,n,i){const r=Tr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return uf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Tr(e,t);return vw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Tr(e,t);return vw(t,r,"y",n.intersect,i)}}};const Bb=["left","top","right","bottom"];function qo(t,e){return t.filter(n=>n.pos===e)}function ww(t,e){return t.filter(n=>Bb.indexOf(n.pos)===-1&&n.box.axis===e)}function Ko(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function y4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function _4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!Bb.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function v4(t,e){const n=_4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function w4(t){const e=y4(t),n=Ko(e.filter(u=>u.box.fullSize),!0),i=Ko(qo(e,"left"),!0),r=Ko(qo(e,"right")),s=Ko(qo(e,"top"),!0),o=Ko(qo(e,"bottom")),a=ww(e,"x"),l=ww(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:qo(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Ew(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function zb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function E4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!pe(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&zb(o,s.getPadding());const a=Math.max(0,e.outerWidth-Ew(o,t,"left","right")),l=Math.max(0,e.outerHeight-Ew(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function T4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function S4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function la(t,e,n,i){const r=[];let s,o,a,l,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,S4(a.horizontal,e));const{same:d,other:f}=E4(e,n,a,i);u|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return u&&la(r,e,n,i)||h}function Iu(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Tw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=e.w*h,f=u.size||l.height;Gc(u.start)&&(o=u.start),l.fullSize?Iu(l,r.left,o,n.outerWidth-r.right-r.left,f):Iu(l,e.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=e.h*h,f=u.size||l.width;Gc(u.start)&&(s=u.start),l.fullSize?Iu(l,s,r.top,f,n.outerHeight-r.bottom-r.top):Iu(l,s,e.top+u.placed,f,d),u.start=s,u.placed+=d,s=l.right}}e.x=s,e.y=o}var Vi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=_n(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=w4(t.boxes),l=a.vertical,u=a.horizontal;ye(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const h=l.reduce((v,E)=>E.box.options&&E.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);zb(f,_n(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),y=v4(l.concat(u),d);la(a.fullSize,m,d,y),la(l,m,d,y),la(u,m,d,y)&&la(l,m,d,y),T4(m),Tw(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,Tw(a.rightAndBottom,m,d,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ye(a.chartArea,v=>{const E=v.box;Object.assign(E,t.chartArea),E.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class $b{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class I4 extends $b{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ju="$chartjs",x4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Sw=t=>t===null||t==="";function b4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Ju]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Sw(r)){const s=uw(t,"width");s!==void 0&&(t.width=s)}if(Sw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=uw(t,"height");s!==void 0&&(t.height=s)}return t}const Wb=Lj?{passive:!0}:!1;function k4(t,e,n){t&&t.addEventListener(e,n,Wb)}function C4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Wb)}function A4(t,e){const n=x4[t.type]||t.type,{x:i,y:r}=Tr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Jc(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function P4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Jc(a.addedNodes,i),o=o&&!Jc(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function R4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Jc(a.removedNodes,i),o=o&&!Jc(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const dl=new Map;let Iw=0;function Hb(){const t=window.devicePixelRatio;t!==Iw&&(Iw=t,dl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function N4(t,e){dl.size||window.addEventListener("resize",Hb),dl.set(t,e)}function D4(t){dl.delete(t),dl.size||window.removeEventListener("resize",Hb)}function M4(t,e,n){const i=t.canvas,r=i&&Jm(i);if(!r)return;const s=xb((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),N4(t,s),o}function cf(t,e,n){n&&n.disconnect(),e==="resize"&&D4(t)}function O4(t,e,n){const i=t.canvas,r=xb(s=>{t.ctx!==null&&n(A4(s,t))},t);return k4(i,e,r),r}class L4 extends $b{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(b4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Ju])return!1;const i=n[Ju].initial;["height","width"].forEach(s=>{const o=i[s];Se(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Ju],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:P4,detach:R4,resize:M4}[n]||O4;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:cf,detach:cf,resize:cf}[n]||C4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return Oj(e,n,i,r)}isAttached(e){const n=e&&Jm(e);return!!(n&&n.isConnected)}}function V4(t){return!Xm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?I4:L4}class ir{constructor(){ne(this,"x");ne(this,"y");ne(this,"active",!1);ne(this,"options");ne(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return cl(this.x)&&cl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}ne(ir,"defaults",{}),ne(ir,"defaultRoutes");function F4(t,e){const n=t.options.ticks,i=j4(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?B4(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return z4(e,u,s,o/r),u;const h=U4(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(xu(e,u,h,Se(m)?0:a-m,a),d=0,f=o-1;d<f;d++)xu(e,u,h,s[d],s[d+1]);return xu(e,u,h,l,Se(m)?e.length:l+m),u}return xu(e,u,h),u}function j4(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function U4(t,e,n){const i=$4(t),r=e.length/n;if(!i)return Math.max(r,1);const s=RF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function B4(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function z4(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function xu(t,e,n,i,r){const s=le(i,0),o=Math.min(le(r,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function $4(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const W4=t=>t==="left"?"right":t==="right"?"left":t,xw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,bw=(t,e)=>Math.min(e||t,t);function kw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function H4(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(i===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<s-a||l>o+a)))return l}function q4(t,e){ye(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Go(t){return t.drawTicks?t.tickLength:0}function Cw(t,e){if(!t.display)return 0;const n=Nt(t.font,e),i=_n(t.padding);return(it(t.text)?t.text.length:1)*n.lineHeight+i.height}function K4(t,e){return ns(t,{scale:e,type:"scale"})}function G4(t,e,n){return ns(t,{tick:n,index:e,type:"tick"})}function Q4(t,e,n){let i=bb(t);return(n&&e!=="right"||!n&&e==="right")&&(i=W4(i)),i}function Y4(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let d=0,f,m,y;const v=o-r,E=a-s;if(t.isHorizontal()){if(m=Ut(i,s,a),pe(n)){const T=Object.keys(n)[0],S=n[T];y=h[T].getPixelForValue(S)+v-e}else n==="center"?y=(u.bottom+u.top)/2+v-e:y=xw(t,n,e);f=a-s}else{if(pe(n)){const T=Object.keys(n)[0],S=n[T];m=h[T].getPixelForValue(S)-E+e}else n==="center"?m=(u.left+u.right)/2-E+e:m=xw(t,n,e);y=Ut(i,o,r),d=n==="left"?-hn:hn}return{titleX:m,titleY:y,maxWidth:f,rotation:d}}class vo extends ir{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=En(e,Number.POSITIVE_INFINITY),n=En(n,Number.NEGATIVE_INFINITY),i=En(i,Number.POSITIVE_INFINITY),r=En(r,Number.NEGATIVE_INFINITY),{min:En(e,i),max:En(n,r),minDefined:sn(e),maxDefined:sn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:En(n,En(i,n)),max:En(i,En(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){be(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=fj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?kw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=F4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){be(this.options.afterUpdate,[this])}beforeSetDimensions(){be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){be(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),be(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=be(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=bw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=Jt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-Go(e.grid)-n.padding-Cw(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=OF(Math.min(Math.asin(Jt((h.highest.height+6)/a,-1,1)),Math.asin(Jt(l/u,-1,1))-Math.asin(Jt(f/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){be(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Cw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Go(s)+l):(e.height=this.maxHeight,e.width=Go(s)+l),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,y=Ar(this.labelRotation),v=Math.cos(y),E=Math.sin(y);if(a){const T=i.mirror?0:E*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+T+m)}else{const T=i.mirror?0:v*d.width+E*f.height;e.width=Math.min(this.maxWidth,e.width+T+m)}this._calculatePadding(u,h,E,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?u?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){be(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Se(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=kw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/bw(n,i));let u=0,h=0,d,f,m,y,v,E,T,S,b,R,M;for(d=0;d<n;d+=l){if(y=e[d].label,v=this._resolveTickFontOptions(d),r.font=E=v.string,T=s[E]=s[E]||{data:{},gc:[]},S=v.lineHeight,b=R=0,!Se(y)&&!it(y))b=rw(r,T.data,T.gc,b,y),R=S;else if(it(y))for(f=0,m=y.length;f<m;++f)M=y[f],!Se(M)&&!it(M)&&(b=rw(r,T.data,T.gc,b,M),R+=S);o.push(b),a.push(R),u=Math.max(b,u),h=Math.max(R,h)}q4(s,n);const D=o.indexOf(u),I=a.indexOf(h),w=k=>({width:o[k]||0,height:a[k]||0});return{first:w(0),last:w(n-1),widest:w(D),highest:w(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return FF(this._alignToPixels?mr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=G4(this.getContext(),e,i))}return this.$context||(this.$context=K4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ar(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Go(s),m=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,E=v/2,T=function(me){return mr(i,me,v)};let S,b,R,M,D,I,w,k,C,P,N,A;if(o==="top")S=T(this.bottom),I=this.bottom-f,k=S-E,P=T(e.top)+E,A=e.bottom;else if(o==="bottom")S=T(this.top),P=e.top,A=T(e.bottom)-E,I=S+E,k=this.top+f;else if(o==="left")S=T(this.right),D=this.right-f,w=S-E,C=T(e.left)+E,N=e.right;else if(o==="right")S=T(this.left),C=e.left,N=T(e.right)-E,D=S+E,w=this.left+f;else if(n==="x"){if(o==="center")S=T((e.top+e.bottom)/2+.5);else if(pe(o)){const me=Object.keys(o)[0],Ee=o[me];S=T(this.chart.scales[me].getPixelForValue(Ee))}P=e.top,A=e.bottom,I=S+E,k=I+f}else if(n==="y"){if(o==="center")S=T((e.left+e.right)/2);else if(pe(o)){const me=Object.keys(o)[0],Ee=o[me];S=T(this.chart.scales[me].getPixelForValue(Ee))}D=S-E,w=D-f,C=e.left,N=e.right}const ie=le(r.ticks.maxTicksLimit,d),ue=Math.max(1,Math.ceil(d/ie));for(b=0;b<d;b+=ue){const me=this.getContext(b),Ee=s.setContext(me),B=a.setContext(me),q=Ee.lineWidth,K=Ee.color,he=B.dash||[],$=B.dashOffset,J=Ee.tickWidth,ge=Ee.tickColor,Pe=Ee.tickBorderDash||[],Re=Ee.tickBorderDashOffset;R=H4(this,b,l),R!==void 0&&(M=mr(i,R,q),u?D=w=C=N=M:I=k=P=A=M,m.push({tx1:D,ty1:I,tx2:w,ty2:k,x1:C,y1:P,x2:N,y2:A,width:q,color:K,borderDash:he,borderDashOffset:$,tickWidth:J,tickColor:ge,tickBorderDash:Pe,tickBorderDashOffset:Re}))}return this._ticksLength=d,this._borderValue=S,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=s,f=Go(i.grid),m=f+h,y=d?-h:m,v=-Ar(this.labelRotation),E=[];let T,S,b,R,M,D,I,w,k,C,P,N,A="middle";if(r==="top")D=this.bottom-y,I=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+y,I=this._getXAxisLabelAlignment();else if(r==="left"){const ue=this._getYAxisLabelAlignment(f);I=ue.textAlign,M=ue.x}else if(r==="right"){const ue=this._getYAxisLabelAlignment(f);I=ue.textAlign,M=ue.x}else if(n==="x"){if(r==="center")D=(e.top+e.bottom)/2+m;else if(pe(r)){const ue=Object.keys(r)[0],me=r[ue];D=this.chart.scales[ue].getPixelForValue(me)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-m;else if(pe(r)){const ue=Object.keys(r)[0],me=r[ue];M=this.chart.scales[ue].getPixelForValue(me)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const ie=this._getLabelSizes();for(T=0,S=a.length;T<S;++T){b=a[T],R=b.label;const ue=s.setContext(this.getContext(T));w=this.getPixelForTick(T)+s.labelOffset,k=this._resolveTickFontOptions(T),C=k.lineHeight,P=it(R)?R.length:1;const me=P/2,Ee=ue.color,B=ue.textStrokeColor,q=ue.textStrokeWidth;let K=I;o?(M=w,I==="inner"&&(T===S-1?K=this.options.reverse?"left":"right":T===0?K=this.options.reverse?"right":"left":K="center"),r==="top"?u==="near"||v!==0?N=-P*C+C/2:u==="center"?N=-ie.highest.height/2-me*C+C:N=-ie.highest.height+C/2:u==="near"||v!==0?N=C/2:u==="center"?N=ie.highest.height/2-me*C:N=ie.highest.height-P*C,d&&(N*=-1),v!==0&&!ue.showLabelBackdrop&&(M+=C/2*Math.sin(v))):(D=w,N=(1-P)*C/2);let he;if(ue.showLabelBackdrop){const $=_n(ue.backdropPadding),J=ie.heights[T],ge=ie.widths[T];let Pe=N-$.top,Re=0-$.left;switch(A){case"middle":Pe-=J/2;break;case"bottom":Pe-=J;break}switch(I){case"center":Re-=ge/2;break;case"right":Re-=ge;break;case"inner":T===S-1?Re-=ge:T>0&&(Re-=ge/2);break}he={left:Re,top:Pe,width:ge+$.width,height:J+$.height,color:ue.backdropColor}}E.push({label:R,font:k,textOffset:N,options:{rotation:v,color:Ee,strokeColor:B,strokeWidth:q,textAlign:K,textBaseline:A,translation:[M,D],backdrop:he}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ar(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return n==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=mr(e,this.left,o)-o/2,h=mr(e,this.right,a)+a/2,d=f=l):(d=mr(e,this.top,o)-o/2,f=mr(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&qm(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;Yc(i,u,0,h,l,a)}r&&Km(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Nt(i.font),o=_n(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||pe(n)?(l+=o.bottom,it(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=Y4(this,l,n,a);Yc(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:Q4(a,n,r),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=le(e.grid&&e.grid.z,-1),r=le(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==vo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Nt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class bu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;Z4(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,X4(e,o,i),this.override&&Be.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Be[r]&&(delete Be[r][i],this.override&&delete Gr[i])}}function X4(t,e,n){const i=ul(Object.create(null),[n?Be.get(n):{},Be.get(e),t.defaults]);Be.set(e,i),t.defaultRoutes&&J4(e,t.defaultRoutes),t.descriptors&&Be.describe(e,t.descriptors)}function J4(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Be.route(s,r,l,a)})}function Z4(t){return"id"in t&&"defaults"in t}class eU{constructor(){this.controllers=new bu(Ra,"datasets",!0),this.elements=new bu(ir,"elements"),this.plugins=new bu(Object,"plugins"),this.scales=new bu(vo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):ye(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=$m(e);be(i["before"+r],[],i),n[e](i),be(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var xn=new eU;class tU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(be(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=le(i.options&&i.options.plugins,{}),s=nU(i);return r===!1&&!n?[]:rU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function nU(t){const e={},n=[],i=Object.keys(xn.plugins.items);for(let s=0;s<i.length;s++)n.push(xn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function iU(t,e){return!e&&t===!1?null:t===!0?{}:t}function rU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=iU(i[l],r);u!==null&&s.push({plugin:a,options:sU(t.config,{plugin:a,local:n[l]},u,o)})}return s}function sU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Up(t,e){const n=Be.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function oU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function aU(t,e){return t===e?"_index_":"_value_"}function Aw(t){if(t==="x"||t==="y"||t==="r")return t}function lU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Bp(t,...e){if(Aw(t))return t;for(const n of e){const i=n.axis||lU(n.position)||t.length>1&&Aw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Pw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function uU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Pw(t,"x",n[0])||Pw(t,"y",n[0])}return{}}function cU(t,e){const n=Gr[t.type]||{scales:{}},i=e.scales||{},r=Up(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!pe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Bp(o,a,uU(o,t),Be.scales[a.type]),u=aU(l,r),h=n.scales||{};s[o]=ba(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Up(a,e),h=(Gr[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=oU(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),ba(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];ba(a,[Be.scales[a.type],Be.scale])}),s}function qb(t){const e=t.options||(t.options={});e.plugins=le(e.plugins,{}),e.scales=cU(t,e)}function Kb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function hU(t){return t=t||{},t.data=Kb(t.data),qb(t),t}const Rw=new Map,Gb=new Set;function ku(t,e){let n=Rw.get(t);return n||(n=e(),Rw.set(t,n),Gb.add(n)),n}const Qo=(t,e,n)=>{const i=Kc(e,n);i!==void 0&&t.add(i)};class dU{constructor(e){this._config=hU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Kb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),qb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ku(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return ku(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return ku(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return ku(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Qo(l,e,d))),h.forEach(d=>Qo(l,r,d)),h.forEach(d=>Qo(l,Gr[s]||{},d)),h.forEach(d=>Qo(l,Be,d)),h.forEach(d=>Qo(l,Vp,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),Gb.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Gr[n]||{},Be.datasets[n]||{},{type:n},Be,Vp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Nw(this._resolverCache,e,r);let l=o;if(pU(o,n)){s.$shared=!1,i=nr(i)?i():i;const u=this.createResolver(e,i,a);l=ao(o,i,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Nw(this._resolverCache,e,i);return pe(n)?ao(s,n,void 0,r):s}}function Nw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Gm(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const fU=t=>pe(t)&&Object.getOwnPropertyNames(t).some(e=>nr(t[e]));function pU(t,e){const{isScriptable:n,isIndexable:i}=Rb(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(nr(a)||fU(a))||o&&it(a))return!0}return!1}var gU="4.5.1";const mU=["top","bottom","left","right","chartArea"];function Dw(t,e){return t==="top"||t==="bottom"||mU.indexOf(t)===-1&&e==="x"}function Mw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Ow(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),be(n&&n.onComplete,[t],e)}function yU(t){const e=t.chart,n=e.options.animation;be(n&&n.onProgress,[t],e)}function Qb(t){return Xm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Zu={},Lw=t=>{const e=Qb(t);return Object.values(Zu).filter(n=>n.canvas===e).pop()};function _U(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function vU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var Ei;let Wh=(Ei=class{static register(...e){xn.add(...e),Vw()}static unregister(...e){xn.remove(...e),Vw()}constructor(e,n){const i=this.config=new dU(n),r=Qb(e),s=Lw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||V4(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=TF(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new tU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=$F(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Zu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}$n.listen(this,"complete",Ow),$n.listen(this,"progress",yU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Se(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return xn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sw(this.canvas,this.ctx),this}stop(){return $n.stop(this),this}resize(e,n){$n.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,lw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),be(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ye(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Bp(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),ye(s,o=>{const a=o.options,l=a.id,u=Bp(l,a),h=le(a.type,o.dtype);(a.position===void 0||Dw(a.position,u)!==Dw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=xn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),ye(r,(o,a)=>{o||delete i[a]}),ye(i,o=>{Vi.configure(this,o,o.options),Vi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Mw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Up(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=xn.getController(a),{datasetElementType:u,dataElementType:h}=Be.datasets[a];Object.assign(l,{dataElementType:xn.getElement(h),datasetElementType:u&&xn.getElement(u)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ye(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||ye(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Mw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ye(this.scales,e=>{Vi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Q0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;_U(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Q0(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vi.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ye(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,nr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($n.has(this)?this.attached&&!$n.running(this)&&$n.start(this):(this.draw(),Ow({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=Yj(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&qm(n,r),e.controller.draw(),r&&Km(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return hl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=m4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ns(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Gc(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),$n.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),sw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Zu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ye(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ye(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ye(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Hc(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=CF(e),u=vU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,be(s.onHover,[e,a,this],this),l&&be(s.onClick,[e,a,this],this));const h=!Hc(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},ne(Ei,"defaults",Be),ne(Ei,"instances",Zu),ne(Ei,"overrides",Gr),ne(Ei,"registry",xn),ne(Ei,"version",gU),ne(Ei,"getChart",Lw),Ei);function Vw(){return ye(Wh.instances,t=>t._plugins.invalidate())}function Yb(t,e,n=e){t.lineCap=le(n.borderCapStyle,e.borderCapStyle),t.setLineDash(le(n.borderDash,e.borderDash)),t.lineDashOffset=le(n.borderDashOffset,e.borderDashOffset),t.lineJoin=le(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=le(n.borderWidth,e.borderWidth),t.strokeStyle=le(n.borderColor,e.borderColor)}function wU(t,e,n){t.lineTo(n.x,n.y)}function EU(t){return t.stepped?ij:t.tension||t.cubicInterpolationMode==="monotone"?rj:wU}function Xb(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:u<l&&!h?i+u-l:u-l}}function TU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:u}=Xb(r,n,i),h=EU(s);let{move:d=!0,reverse:f}=i||{},m,y,v;for(m=0;m<=u;++m)y=r[(a+(f?u-m:m))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,v,y,f,s.stepped),v=y);return l&&(y=r[(a+(f?u:0))%o],h(t,v,y,f,s.stepped)),!!l}function SU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Xb(r,n,i),{move:l=!0,reverse:u}=i||{};let h=0,d=0,f,m,y,v,E,T;const S=R=>(o+(u?a-R:R))%s,b=()=>{v!==E&&(t.lineTo(h,E),t.lineTo(h,v),t.lineTo(h,T))};for(l&&(m=r[S(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=r[S(f)],m.skip)continue;const R=m.x,M=m.y,D=R|0;D===y?(M<v?v=M:M>E&&(E=M),h=(d*h+R)/++d):(b(),t.lineTo(R,M),y=D,d=0,v=E=M),T=M}b()}function zp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?SU:TU}function IU(t){return t.stepped?Vj:t.tension||t.cubicInterpolationMode==="monotone"?Fj:Sr}function xU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Yb(t,e.options),t.stroke(r)}function bU(t,e,n,i){const{segments:r,options:s}=e,o=zp(e);for(const a of r)Yb(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const kU=typeof Path2D=="function";function CU(t,e,n,i){kU&&!e.options.segment?xU(t,e,n,i):bU(t,e,n,i)}class ua extends ir{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Aj(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=qj(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=$j(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=IU(i);let u,h;for(u=0,h=o.length;u<h;++u){const{start:d,end:f}=o[u],m=s[d],y=s[f];if(m===y){a.push(m);continue}const v=Math.abs((r-m[n])/(y[n]-m[n])),E=l(m,y,v,i.stepped);E[n]=e[n],a.push(E)}return a.length===1?a[0]:a}pathSegment(e,n,i){return zp(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=zp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),CU(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ne(ua,"id","line"),ne(ua,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ne(ua,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ne(ua,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Fw(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class ec extends ir{constructor(n){super();ne(this,"parsed");ne(this,"skip");ne(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Fw(this,n,"x",i)}inYRange(n,i){return Fw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!hl(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Fp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ne(ec,"id","point"),ne(ec,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ne(ec,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const jw=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},AU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Uw extends ir{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=be(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Nt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=jw(i,s);let u,h;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((y,v)=>{const E=i+n/2+s.measureText(y.text).width;(v===0||u[u.length-1]+E+2*a>o)&&(d+=h,u[u.length-(v>0?0:1)]=0,m+=h,f++),l[v]={left:0,top:m,row:f,width:E,height:r},u[u.length-1]+=E+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,y=0,v=0;return this.legendItems.forEach((E,T)=>{const{itemWidth:S,itemHeight:b}=PU(i,n,s,E,r);T>0&&m+b+2*a>h&&(d+=f+a,u.push({width:f,height:m}),y+=f+a,v++,f=m=0),l[T]={left:y,top:m,col:v,width:S,height:b},f=Math.max(f,S),m+=b+a}),d+=f,u.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Bs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ut(i,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Ut(i,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=Ut(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Ut(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;qm(e,this),this._draw(),Km(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Be.color,l=Bs(e.rtl,this.left,this.width),u=Nt(o.font),{padding:h}=o,d=u.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:y,boxHeight:v,itemHeight:E}=jw(o,d),T=function(D,I,w){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;r.save();const k=le(w.lineWidth,1);if(r.fillStyle=le(w.fillStyle,a),r.lineCap=le(w.lineCap,"butt"),r.lineDashOffset=le(w.lineDashOffset,0),r.lineJoin=le(w.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=le(w.strokeStyle,a),r.setLineDash(le(w.lineDash,[])),o.usePointStyle){const C={radius:v*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:k},P=l.xPlus(D,y/2),N=I+f;Ab(r,C,P,N,o.pointStyleWidth&&y)}else{const C=I+Math.max((d-v)/2,0),P=l.leftForLtr(D,y),N=Pa(w.borderRadius);r.beginPath(),Object.values(N).some(A=>A!==0)?jp(r,{x:P,y:C,w:y,h:v,radius:N}):r.rect(P,C,y,v),r.fill(),k!==0&&r.stroke()}r.restore()},S=function(D,I,w){Yc(r,w.text,D,I+E/2,u,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?m={x:Ut(s,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:Ut(s,this.top+R+h,this.bottom-n[0].height),line:0},Lb(this.ctx,e.textDirection);const M=E+h;this.legendItems.forEach((D,I)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;const w=r.measureText(D.text).width,k=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),C=y+f+w;let P=m.x,N=m.y;l.setWidth(this.width),b?I>0&&P+C+h>this.right&&(N=m.y+=M,m.line++,P=m.x=Ut(s,this.left+h,this.right-i[m.line])):I>0&&N+M>this.bottom&&(P=m.x=P+n[m.line].width+h,m.line++,N=m.y=Ut(s,this.top+R+h,this.bottom-n[m.line].height));const A=l.x(P);if(T(A,N,D),P=WF(k,P+y+f,b?P+C:this.right,e.rtl),S(l.x(P),N,D),b)m.x+=C+h;else if(typeof D.text!="string"){const ie=u.lineHeight;m.y+=Jb(D,ie)+h}else m.y+=M}),Vb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Nt(n.font),r=_n(n.padding);if(!n.display)return;const s=Bs(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,u=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=Ut(e.align,d,this.right-f);else{const y=this.columnSizes.reduce((v,E)=>Math.max(v,E.height),0);h=u+Ut(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=Ut(a,d,d+f);o.textAlign=s.textAlign(bb(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Yc(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Nt(e.font),i=_n(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(aa(e,this.left,this.right)&&aa(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],aa(e,r.left,r.left+r.width)&&aa(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!DU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=AU(r,i);r&&!s&&be(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&be(n.onHover,[e,i,this],this)}else i&&be(n.onClick,[e,i,this],this)}}function PU(t,e,n,i,r){const s=RU(i,t,e,n),o=NU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function RU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function NU(t,e,n){let i=t;return typeof e.text!="string"&&(i=Jb(e,n)),i}function Jb(t,e){const n=t.text?t.text.length:0;return e*n}function DU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var MU={id:"legend",_element:Uw,start(t,e,n){const i=t.legend=new Uw({ctx:t.ctx,options:n,chart:t});Vi.configure(t,i,n),Vi.addBox(t,i)},stop(t){Vi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Vi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=_n(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const ca={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Lp(e,u);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Sn(t,e){return e&&(it(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function OU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Bw(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Nt(e.bodyFont),u=Nt(e.titleFont),h=Nt(e.footerFont),d=s.length,f=r.length,m=i.length,y=_n(e.padding);let v=y.height,E=0,T=i.reduce((R,M)=>R+M.before.length+M.lines.length+M.after.length,0);if(T+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),T){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=m*R+(T-m)*l.lineHeight+(T-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let S=0;const b=function(R){E=Math.max(E,n.measureText(R).width+S)};return n.save(),n.font=u.string,ye(t.title,b),n.font=l.string,ye(t.beforeBody.concat(t.afterBody),b),S=e.displayColors?o+2+e.boxPadding:0,ye(i,R=>{ye(R.before,b),ye(R.lines,b),ye(R.after,b)}),S=0,n.font=h.string,ye(t.footer,b),n.restore(),E+=y.width,{width:E,height:v}}function LU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function VU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function FU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return i==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),VU(u,t,e,n)&&(u="center"),u}function zw(t,e,n){const i=n.yAlign||e.yAlign||LU(t,n);return{xAlign:n.xAlign||e.xAlign||FU(t,e,n,i),yAlign:i}}function jU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function UU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function $w(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=Pa(o);let y=jU(e,a);const v=UU(e,l,u);return l==="center"?a==="left"?y+=u:a==="right"&&(y-=u):a==="left"?y-=Math.max(h,f)+r:a==="right"&&(y+=Math.max(d,m)+r),{x:Jt(y,0,i.width-e.width),y:Jt(v,0,i.height-e.height)}}function Cu(t,e,n){const i=_n(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Ww(t){return Sn([],Wn(t))}function BU(t,e,n){return ns(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Hw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Zb={beforeTitle:zn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:zn,beforeBody:zn,beforeLabel:zn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Se(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:zn,afterBody:zn,beforeFooter:zn,footer:zn,afterFooter:zn};function kt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?Zb[e].call(n,i):r}class $p extends ir{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new jb(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=BU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=kt(i,"beforeTitle",this,e),s=kt(i,"title",this,e),o=kt(i,"afterTitle",this,e);let a=[];return a=Sn(a,Wn(r)),a=Sn(a,Wn(s)),a=Sn(a,Wn(o)),a}getBeforeBody(e,n){return Ww(kt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return ye(e,s=>{const o={before:[],lines:[],after:[]},a=Hw(i,s);Sn(o.before,Wn(kt(a,"beforeLabel",this,s))),Sn(o.lines,kt(a,"label",this,s)),Sn(o.after,Wn(kt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return Ww(kt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=kt(i,"beforeFooter",this,e),s=kt(i,"footer",this,e),o=kt(i,"afterFooter",this,e);let a=[];return a=Sn(a,Wn(r)),a=Sn(a,Wn(s)),a=Sn(a,Wn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(OU(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),ye(a,h=>{const d=Hw(e.callbacks,h);r.push(kt(d,"labelColor",this,h)),s.push(kt(d,"labelPointStyle",this,h)),o.push(kt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=ca[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Bw(this,i),u=Object.assign({},a,l),h=zw(this.chart,i,u),d=$w(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=Pa(a),{x:f,y:m}=e,{width:y,height:v}=n;let E,T,S,b,R,M;return s==="center"?(R=m+v/2,r==="left"?(E=f,T=E-o,b=R+o,M=R-o):(E=f+y,T=E+o,b=R-o,M=R+o),S=E):(r==="left"?T=f+Math.max(l,h)+o:r==="right"?T=f+y-Math.max(u,d)-o:T=this.caretX,s==="top"?(b=m,R=b-o,E=T-o,S=T+o):(b=m+v,R=b+o,E=T+o,S=T-o),M=b),{x1:E,x2:T,x3:S,y1:b,y2:R,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const u=Bs(i.rtl,this.x,this.width);for(e.x=Cu(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",o=Nt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=Nt(s.bodyFont),d=Cu(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const v={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},E=r.leftForLtr(f,u)+u/2,T=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Fp(e,v,E,T),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Fp(e,v,E,T)}else{e.lineWidth=pe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=r.leftForLtr(f,u),E=r.leftForLtr(r.xPlus(f,1),u-2),T=Pa(o.borderRadius);Object.values(T).some(S=>S!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,jp(e,{x:v,y,w:u,h:l,radius:T}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),jp(e,{x:E,y:y+1,w:u-2,h:l-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,u,l),e.strokeRect(v,y,u,l),e.fillStyle=o.backgroundColor,e.fillRect(E,y+1,u-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=i,d=Nt(i.bodyFont);let f=d.lineHeight,m=0;const y=Bs(i.rtl,this.x,this.width),v=function(w){n.fillText(w,y.x(e.x+m),e.y+f/2),e.y+=f+s},E=y.textAlign(o);let T,S,b,R,M,D,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Cu(this,E,i),n.fillStyle=i.bodyColor,ye(this.beforeBody,v),m=a&&E!=="right"?o==="center"?u/2+h:u+2+h:0,R=0,D=r.length;R<D;++R){for(T=r[R],S=this.labelTextColors[R],n.fillStyle=S,ye(T.before,v),b=T.lines,a&&b.length&&(this._drawColorBox(n,e,R,y,i),f=Math.max(d.lineHeight,l)),M=0,I=b.length;M<I;++M)v(b[M]),f=d.lineHeight;ye(T.after,v)}m=0,f=d.lineHeight,ye(this.afterBody,v),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Bs(i.rtl,this.x,this.width);for(e.x=Cu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Nt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:y}=Pa(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+u,l+h-y),n.quadraticCurveTo(a+u,l+h,a+u-y,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=ca[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Bw(this,e),l=Object.assign({},o,this._size),u=zw(n,e,l),h=$w(e,l,u,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=_n(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),Lb(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),Vb(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!Hc(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Hc(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=ca[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}ne($p,"positioners",ca);var zU={id:"tooltip",_element:$p,positioners:ca,afterInit(t,e,n){n&&(t.tooltip=new $p({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Zb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const $U=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function WU(t,e,n,i){const r=t.indexOf(e);if(r===-1)return $U(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const HU=(t,e)=>t===null?null:Jt(Math.round(t),0,e);function qw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Wp extends vo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Se(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:WU(i,e,le(n,e),this._addedLabels),HU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return qw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ne(Wp,"id","category"),ne(Wp,"defaults",{ticks:{callback:qw}});function qU(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,y=h-1,{min:v,max:E}=e,T=!Se(o),S=!Se(a),b=!Se(u),R=(E-v)/(d+1);let M=X0((E-v)/y/m)*m,D,I,w,k;if(M<1e-14&&!T&&!S)return[{value:v},{value:E}];k=Math.ceil(E/M)-Math.floor(v/M),k>y&&(M=X0(k*M/y/m)*m),Se(l)||(D=Math.pow(10,l),M=Math.ceil(M*D)/D),r==="ticks"?(I=Math.floor(v/M)*M,w=Math.ceil(E/M)*M):(I=v,w=E),T&&S&&s&&DF((a-o)/s,M/1e3)?(k=Math.round(Math.min((a-o)/M,h)),M=(a-o)/k,I=o,w=a):b?(I=T?o:I,w=S?a:w,k=u-1,M=(w-I)/k):(k=(w-I)/M,ka(k,Math.round(k),M/1e3)?k=Math.round(k):k=Math.ceil(k));const C=Math.max(J0(M),J0(I));D=Math.pow(10,Se(l)?C:l),I=Math.round(I*D)/D,w=Math.round(w*D)/D;let P=0;for(T&&(f&&I!==o?(n.push({value:o}),I<o&&P++,ka(Math.round((I+P*M)*D)/D,o,Kw(o,R,t))&&P++):I<o&&P++);P<k;++P){const N=Math.round((I+P*M)*D)/D;if(S&&N>a)break;n.push({value:N})}return S&&f&&w!==a?n.length&&ka(n[n.length-1].value,a,Kw(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!S||w===a)&&n.push({value:w}),n}function Kw(t,e,{horizontal:n,minRotation:i}){const r=Ar(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class KU extends vo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=oo(r),u=oo(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=qU(r,s);return e.bounds==="ticks"&&MF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return kb(e,this.chart.options.locale,this.options.ticks.format)}}class Hp extends KU{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=sn(e)?e:0,this.max=sn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Ar(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ne(Hp,"id","linear"),ne(Hp,"defaults",{ticks:{callback:Cb.formatters.numeric}});const Hh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pt=Object.keys(Hh);function Gw(t,e){return t-e}function Qw(t,e){if(Se(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),sn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(cl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Yw(t,e,n,i){const r=Pt.length;for(let s=Pt.indexOf(t);s<r-1;++s){const o=Hh[Pt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Pt[s]}return Pt[r-1]}function GU(t,e,n,i,r){for(let s=Pt.length-1;s>=Pt.indexOf(n);s--){const o=Pt[s];if(Hh[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Pt[n?Pt.indexOf(n):0]}function QU(t){for(let e=Pt.indexOf(t)+1,n=Pt.length;e<n;++e)if(Hh[Pt[e]].common)return Pt[e]}function Xw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Wm(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function YU(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Jw(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:YU(t,i,r,n)}class Zc extends vo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new h4._date(e.adapters.date);r.init(n),ba(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Qw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=sn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=sn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=UF(r,s,o);return this._unit=n.unit||(i.autoSkip?Yw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):GU(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:QU(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Jw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Jt(n,0,o),i=Jt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Yw(s.minUnit,n,i,this._getLabelCapacity(n)),a=le(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=cl(l)||l===!0,h={};let d=n,f,m;if(u&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,u?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)Xw(h,f,y);return(f===i||r.bounds==="ticks"||m===1)&&Xw(h,f,y),Object.keys(h).sort(Gw).map(v=>+v)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return be(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=i[n],m=u&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Ar(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Jw(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(Qw(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return zF(e.sort(Gw))}}ne(Zc,"id","time"),ne(Zc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Au(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Pr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Pr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class Zw extends Zc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Au(n,this.min),this._tableRange=Au(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=i&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],u=r[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Au(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Au(this._table,i*this._tableRange+this._minPos,!0)}}ne(Zw,"id","timeseries"),ne(Zw,"defaults",Zc.defaults);Wh.register(ua,ec,Hp,Wp,zU,MU);const ek="label";function eE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function XU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function tk(t,e){t.labels=e}function nk(t,e,n=ek){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function JU(t,e=ek){const n={labels:[],datasets:[]};return tk(n,t.labels),nk(n,t.datasets,e),n}function ZU(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:d,...f}=t,m=O.useRef(null),y=O.useRef(null),v=()=>{m.current&&(y.current=new Wh(m.current,{type:o,data:JU(a,s),options:l&&{...l},plugins:u}),eE(e,y.current))},E=()=>{eE(e,null),y.current&&(y.current.destroy(),y.current=null)};return O.useEffect(()=>{!r&&y.current&&l&&XU(y.current,l)},[r,l]),O.useEffect(()=>{!r&&y.current&&tk(y.current.config.data,a.labels)},[r,a.labels]),O.useEffect(()=>{!r&&y.current&&a.datasets&&nk(y.current.config.data,a.datasets,s)},[r,a.datasets]),O.useEffect(()=>{y.current&&(r?(E(),setTimeout(v)):y.current.update(d))},[r,l,a.labels,a.datasets,d]),O.useEffect(()=>{y.current&&(E(),setTimeout(v))},[o]),O.useEffect(()=>(v(),()=>E()),[]),_.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const e5=O.forwardRef(ZU);function t5(t,e){return Wh.register(e),O.forwardRef((n,i)=>_.jsx(e5,{...n,ref:i,type:t}))}const ey=t5("line",Xu);function n5({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return _.jsxs("div",{className:"chart card",children:[_.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),_.jsx("div",{className:"chart-inner",children:_.jsx(ey,{data:r,options:s})})]})}function i5({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],i=t.map(u=>u.dateIso),r=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.bench}),s=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.squat}),o=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.deadlift}),a={labels:i,datasets:[{label:`${n[0]} (7-day WMA)`,data:r,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[1]} (7-day WMA)`,data:s,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[2]} (7-day WMA)`,data:o,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:u=>{var h,d;return`${u.dataset.label}: ${(d=(h=u.parsed.y)==null?void 0:h.toFixed)==null?void 0:d.call(h,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return _.jsxs("div",{className:"chart card",children:[_.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),_.jsx("div",{className:"chart-inner",children:_.jsx(ey,{data:a,options:l})})]})}function r5({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.calories}),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (WMA)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return _.jsxs("div",{className:"chart card",children:[_.jsx("div",{className:"card-title",children:"Weight + Strength vs Calories (Smoothed)"}),_.jsx("div",{className:"chart-inner",children:_.jsx(ey,{data:s,options:o})})]})}function _r(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function s5(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function o5(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function a5({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?_.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Weekly Analysis"}),_.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),_.jsx("div",{className:"table-wrap",style:{marginTop:12},children:_.jsxs("table",{className:"table",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:"Week #"}),_.jsx("th",{children:"Avg Calories"}),_.jsx("th",{children:"Weight Change (kg)"}),_.jsx("th",{children:"Calculated TDEE"}),_.jsx("th",{children:"TDEE "}),_.jsx("th",{children:"Adaptation %"}),_.jsx("th",{children:"LBM (kg)"}),_.jsx("th",{children:"Loss Rate vs LBM %"}),_.jsx("th",{children:"Status"})]})}),_.jsx("tbody",{children:t.weeks.map(n=>_.jsxs("tr",{children:[_.jsx("td",{children:n.week}),_.jsx("td",{children:_r(n.avgCalories,0)}),_.jsx("td",{children:_r(n.weightChange,2)}),_.jsx("td",{children:_r(n.tdee,0)}),_.jsx("td",{children:_r(n.tdeeChangeFromBaseline,0)}),_.jsx("td",{className:s5(n.adaptationPct),children:_r(n.adaptationPct,1)}),_.jsx("td",{children:_r(n.lbm,1)}),_.jsx("td",{children:_r(n.lossRatePct,2)}),_.jsx("td",{className:o5(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),_.jsxs("div",{className:"notice info",style:{marginTop:12},children:[_.jsx("div",{children:_.jsx("b",{children:"How to read this:"})}),_.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[_.jsxs("div",{children:[_.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),_.jsxs("div",{children:[_.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),_.jsxs("div",{children:[_.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",_.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function Tt(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function tE(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function nE(t,e){const n=Mp(t).getTime(),i=Mp(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function iE(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function l5(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function u5({derived:t,weekly:e,profile:n}){const i=O.useMemo(()=>{var S,b,R,M;if(!(t!=null&&t.length))return[];const r=t[t.length-1],s=r.dateIso,o=(S=e==null?void 0:e.weeks)!=null&&S.length?e.weeks[e.weeks.length-1]:null,a=e==null?void 0:e.baselineTdee,l=e==null?void 0:e.baselineStrength,u=e==null?void 0:e.baselineWeeklyLoss,h=t.filter(D=>{const I=nE(s,D.dateIso);return I>=0&&I<=6}),d=h.length,f=iE(h.map(D=>D.protein)),m=iE(h.map(D=>D.calories)),y=Number.isFinite((b=r==null?void 0:r.wma)==null?void 0:b.weight)?r.wma.weight:r.weight,v=[];if(o&&Number.isFinite(a)&&Number.isFinite(o.tdee)&&Number.isFinite(o.adaptationPct)){const D=Math.max(0,-o.adaptationPct);let I="good";D>=10?I="bad":D>=5&&(I="warn");const w=o.adaptationPct<0?"dropped":"increased",k=`${Tt(Math.abs(o.adaptationPct),0)}%`;v.push({key:"adaptation",level:I,title:"Metabolic adaptation",message:`Your TDEE has ${w} ${k} from baseline (${Tt(a,0)}  ${Tt(o.tdee,0)} kcal).`,action:I!=="good"?"Consider a refeed day or reducing training volume.":null})}if(o&&Number.isFinite(o.lossRatePct)){const D=String(o.lossRateStatus||"").toUpperCase();let I="info";o.lossRateStatus==="Optimal"&&(I="good"),o.lossRateStatus==="Aggressive"&&(I="bad");const w=o.lossRateStatus==="Aggressive"?"Risk of muscle loss.":o.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";v.push({key:"lossrate",level:I,title:"Loss rate vs LBM",message:`This week: ${Tt(o.lossRatePct,1)}% of LBM lost  ${D}. ${w}`,action:null})}if(o&&Number.isFinite(l)&&Number.isFinite(o.avgStrengthWma)){const D=(o.avgStrengthWma-l)/l*100;let I="good",w="",k="Strength maintained/increasing.",C=null;D<-7.5?(I="bad",w="",k="Strength declining significantly.",C="Consider eating more or reducing cardio."):D<-5&&(I="warn",w="",k="Strength declining.",C="Consider eating more or reducing cardio."),v.push({key:"strength",level:I,title:"Strength trend",message:`${k} ${w} (${Tt(D,1)}% vs baseline)`,action:C})}if(o&&Number.isFinite(o.tdee)&&Number.isFinite(o.lbm)){const D=o.lbm,I=.005*D,w=.01*D,k=I*7700/7,C=w*7700/7,P=o.tdee-k,N=o.tdee-C,A=tE(Math.min(N,P),50),ie=tE(Math.max(N,P),50);v.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${A}-${ie} kcal/day this week.`,action:null})}d<6&&v.push({key:"completeness",level:"warn",title:"Data completeness",message:`${d}/7 days logged this week  missing data may affect accuracy.`,action:null});let E=null;for(let D=t.length-1;D>=0;D--)if(Number.isFinite((R=t[D])==null?void 0:R.bfPct)){E=t[D].dateIso;break}if(!E)v.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const D=nE(s,E);D>=7?v.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):v.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-D} day(s).`,action:null})}if(Number.isFinite(f)&&Number.isFinite(y)){const D=1.6*y,I=2.2*y;if(f<D){const w=(D-f)/D*100;v.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${Tt(w,0)}% below the muscle-retention range (${Tt(f,0)}g/day vs ${Tt(D,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else f>I?v.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${Tt(f,0)}g/day).`,action:null}):v.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${Tt(f,0)}g/day).`,action:null})}if(o&&Number.isFinite(u)&&Number.isFinite(o.weightChange)){const D=Math.max(0,-o.weightChange),I=u;(D<.2||I>.2&&D<I*.35)&&v.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${Tt(D,1)}kg this week vs ${Tt(I,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const T=Number(n==null?void 0:n.targetWeight);if(Number.isFinite(T)&&Number.isFinite((M=t[0])==null?void 0:M.weight)&&Number.isFinite(y)){const D=t[0].weight;if(D>T){const I=D-y,w=D-T,k=Math.max(0,Math.min(1,I/w))*100,C=Math.floor(I/5)*5;C>=5&&v.push({key:"milestone",level:"good",title:"Progress milestone",message:`${Tt(C,0)}kg down! Youre ${Tt(k,0)}% to your goal.`,action:null})}}return o||(v.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(m)&&v.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${Tt(m,0)} kcal/day.`,action:null})),v},[t,e,n]);return i.length?_.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Insights"}),_.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),_.jsx("div",{className:"grid",style:{marginTop:12},children:i.map(r=>_.jsxs("div",{className:`card insight-card ${l5(r.level)}`,style:{gridColumn:"span 6"},children:[_.jsx("div",{className:"insight-title",children:r.title}),_.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:r.message}),r.action&&_.jsx("div",{className:"small",style:{marginTop:8},children:r.action})]},r.key))})]}):null}function wi(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function ik({view:t="dashboard"}){const{user:e}=fi(),{profile:n}=Fm(),i=Array.isArray(n==null?void 0:n.liftNames)&&n.liftNames.length===3?n.liftNames:["Bench Press","Squat","Deadlift"],[r,s]=O.useState([]),[o,a]=O.useState(null);O.useEffect(()=>{if(a(null),!e)return;const v=jm(e.uid,E=>s(E),E=>a((E==null?void 0:E.message)||"Failed to load entries."));return()=>v()},[e]);const l=O.useMemo(()=>JV(),[]),u=O.useMemo(()=>ZV(60),[]),h=e?n:l,d=e?r:u,f=O.useMemo(()=>mb(d,h||{}),[d,h]),m=O.useMemo(()=>XV(f),[f]),y=O.useMemo(()=>{var C;if(!f.length)return null;const v=f[0],E=f[f.length-1],T=(C=E==null?void 0:E.wma)==null?void 0:C.weight,S=Number.isFinite(v.weight)&&Number.isFinite(E.weight)?E.weight-v.weight:null,b=E.calories,R=v.calories,M=Number.isFinite(b)&&Number.isFinite(R)?b-R:null,D=E.avgStrength,I=v.avgStrength,w=Number.isFinite(D)&&Number.isFinite(I)?D-I:null;let k=null;for(let P=f.length-1;P>=0;P--)if(Number.isFinite(f[P].bfPct)){k=f[P].bfPct;break}return{weightTrend:T,totalLost:S,calNow:b,calDelta:M,strengthNow:D,strengthDelta:w,bf:k}},[f]);return _.jsxs(_.Fragment,{children:[!e&&_.jsxs("div",{className:"notice info",style:{marginTop:14},children:[_.jsx("b",{children:"Demo mode:"})," This dashboard is showing 60 days of realistic sample data. Log in to start tracking your own."]}),e&&(!(h!=null&&h.sex)||!(h!=null&&h.height))&&_.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",_.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),o&&_.jsx("div",{className:"notice error",style:{marginTop:14},children:o}),t==="insights"&&_.jsx(u5,{derived:f,weekly:m,profile:h||{}}),_.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Summary"}),_.jsx("div",{className:"muted",children:"Trend over noise. Weekly reality checks. No guesswork."})]}),!y||!f.length?_.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",_.jsx("b",{children:"Entry"}),"."]}):_.jsxs("div",{className:"grid",style:{marginTop:12},children:[_.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[_.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),_.jsxs("div",{className:"big",children:[wi(y.weightTrend,1)," kg"]}),_.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),_.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[_.jsx("div",{className:"card-title",children:"Total weight change"}),_.jsxs("div",{className:"big",children:[wi(y.totalLost,1)," kg"]}),_.jsx("div",{className:"small",children:"Negative = loss"})]}),_.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[_.jsx("div",{className:"card-title",children:"Calories now / change from start"}),_.jsxs("div",{className:"big",children:[wi(y.calNow,0)," kcal"]}),_.jsxs("div",{className:"small",children:[" ",wi(y.calDelta,0)," kcal"]})]}),_.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[_.jsx("div",{className:"card-title",children:"Average strength now"}),_.jsxs("div",{className:"big",children:[wi(y.strengthNow,1)," kg"]}),_.jsxs("div",{className:"small",children:[" ",wi(y.strengthDelta,1)," kg"]})]}),_.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[_.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),_.jsx("div",{className:"big",children:y.bf===null?"":`${wi(y.bf,1)}%`}),_.jsx("div",{className:"small",children:"Most recent measurement day"})]}),_.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[_.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),_.jsx("div",{className:"big",children:Number.isFinite(m.baselineTdee)?`${wi(m.baselineTdee,0)} kcal`:""}),_.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),f.length>0&&_.jsxs("div",{className:"grid",style:{marginTop:14},children:[_.jsx("div",{style:{gridColumn:"span 12"},children:_.jsx(n5,{derived:f})}),_.jsx("div",{style:{gridColumn:"span 12"},children:_.jsx(i5,{derived:f,liftNames:i})}),_.jsx("div",{style:{gridColumn:"span 12"},children:_.jsx(r5,{derived:f})})]}),f.length>=14&&_.jsx(a5,{weekly:m})]})}function c5(){return _.jsx(ik,{view:"insights"})}function h5(){const{user:t,login:e,authError:n,clearAuthError:i}=fi(),r=_l(),s=Xr(),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,m]=O.useState(null);O.useEffect(()=>{i==null||i()},[]),O.useEffect(()=>{t&&r("/dashboard")},[t]);async function y(v){var E;v.preventDefault(),m(null),d(!0);try{await e(o.trim(),l);const T=((E=s.state)==null?void 0:E.from)||"/dashboard";r(T)}catch{}finally{d(!1)}}return _.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Log in"}),_.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&_.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&_.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),_.jsxs("form",{onSubmit:y,style:{marginTop:12},children:[_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Email"}),_.jsx("input",{value:o,onChange:v=>a(v.target.value),type:"email",required:!0})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Password"}),_.jsx("input",{value:l,onChange:v=>u(v.target.value),type:"password",required:!0})]})]}),_.jsxs("div",{className:"footer-actions",children:[_.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),_.jsx(Xa,{className:"btn",to:"/reset-password",children:"Forgot password"}),_.jsx(Xa,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function d5(){const{signup:t,authError:e,clearAuthError:n}=fi(),i=_l(),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,m]=O.useState(null);O.useEffect(()=>{n==null||n()},[]);async function y(v){if(v.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return _.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Create account"}),_.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&_.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&_.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),_.jsxs("form",{onSubmit:y,style:{marginTop:12},children:[_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Email"}),_.jsx("input",{value:r,onChange:v=>s(v.target.value),type:"email",required:!0})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Password"}),_.jsx("input",{value:o,onChange:v=>a(v.target.value),type:"password",required:!0})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Confirm password"}),_.jsx("input",{value:l,onChange:v=>u(v.target.value),type:"password",required:!0})]})]}),_.jsxs("div",{className:"footer-actions",children:[_.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),_.jsx(Xa,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function f5(){const{resetPassword:t,authError:e,clearAuthError:n}=fi(),[i,r]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(!1);O.useEffect(()=>{n==null||n()},[]);async function u(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return _.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Reset password"}),_.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&_.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&_.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),_.jsxs("form",{onSubmit:u,style:{marginTop:12},children:[_.jsx("div",{className:"row",children:_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Email"}),_.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),_.jsxs("div",{className:"footer-actions",children:[_.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),_.jsx(Xa,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function p5(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function g5(t,e){const n=e.map(o=>o.map(p5).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function m5({entries:t,derived:e}){var s,o,a,l,u,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchKg","squatKg","deadliftKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.bench,d.squat,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(u=f==null?void 0:f.wma)==null?void 0:u.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}const ps=["Bench Press","Squat","Deadlift"];function y5(){const{user:t}=fi(),{profile:e,updateProfile:n,loading:i,profileError:r}=Fm(),[s,o]=O.useState(e.sex||""),[a,l]=O.useState(e.height||""),[u,h]=O.useState(e.targetWeight??""),[d,f]=O.useState(!!e.triplemeasurements),m=Array.isArray(e.liftNames)&&e.liftNames.length===3?e.liftNames:ps,[y,v]=O.useState(m[0]),[E,T]=O.useState(m[1]),[S,b]=O.useState(m[2]),[R,M]=O.useState(!1),[D,I]=O.useState(null),[w,k]=O.useState(""),[C,P]=O.useState(""),[N,A]=O.useState(""),[ie,ue]=O.useState([]),[me,Ee]=O.useState(!1);O.useEffect(()=>{o(e.sex||""),l(e.height||""),h(e.targetWeight??""),f(!!e.triplemeasurements);const $=Array.isArray(e.liftNames)&&e.liftNames.length===3?e.liftNames:ps;v($[0]),T($[1]),b($[2])},[e.sex,e.height,e.targetWeight,e.triplemeasurements,e.liftNames]);async function B($){$.preventDefault(),I(null),M(!0);try{const J=Number(a);if(!s)throw new Error("Sex is required.");if(!Number.isFinite(J)||J<=0)throw new Error("Height must be a positive number (cm).");let ge=null;if(String(u).trim()!==""&&(ge=Number(u),!Number.isFinite(ge)||ge<=0))throw new Error("Target weight must be a positive number (kg).");const Pe=[y,E,S].map((Re,Ft)=>String(Re??"").trim()||ps[Ft]);await n({sex:s,height:J,targetWeight:ge,triplemeasurements:!!d,liftNames:Pe}),I({type:"success",text:"Profile saved."})}catch(J){I({type:"error",text:(J==null?void 0:J.message)||"Failed to save profile."})}finally{M(!1)}}async function q($){if($.preventDefault(),I(null),!!(t!=null&&t.email)){if(C!==N){I({type:"error",text:"New passwords do not match."});return}M(!0);try{const J=Zr.credential(t.email,w);await WN(t,J),await GN(t,C),k(""),P(""),A(""),I({type:"success",text:"Password updated."})}catch(J){I({type:"error",text:(J==null?void 0:J.message)||"Failed to update password."})}finally{M(!1)}}}async function K(){if(!me)return new Promise(($,J)=>{const ge=jm(t.uid,Pe=>{ue(Pe),Ee(!0),ge(),$()},Pe=>{J(Pe)})})}async function he(){I(null),M(!0);try{await K();const $=mb(ie,{...e,sex:s,height:Number(a),triplemeasurements:!!d}),J=m5({entries:ie,derived:$}),ge=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;g5(ge,J),I({type:"success",text:"CSV downloaded."})}catch($){I({type:"error",text:($==null?void 0:$.message)||"Failed to export CSV."})}finally{M(!1)}}return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Profile & Settings"}),_.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),r&&_.jsx("div",{className:"notice error",style:{marginTop:12},children:r}),D&&_.jsx("div",{className:`notice ${D.type==="error"?"error":"success"}`,style:{marginTop:12},children:D.text}),_.jsxs("form",{onSubmit:B,style:{marginTop:12},children:[_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Sex (required for Navy BF%)"}),_.jsxs("select",{value:s,onChange:$=>o($.target.value),required:!0,children:[_.jsx("option",{value:"",children:"Select"}),_.jsx("option",{value:"male",children:"Male"}),_.jsx("option",{value:"female",children:"Female"})]})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Height (cm)"}),_.jsx("input",{inputMode:"numeric",value:a,onChange:$=>l($.target.value),placeholder:"e.g. 175",required:!0})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Target weight (kg) (optional)"}),_.jsx("input",{inputMode:"numeric",value:u,onChange:$=>h($.target.value),placeholder:"e.g. 82"})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Triple measurements mode"}),_.jsxs("select",{value:d?"1":"0",onChange:$=>f($.target.value==="1"),children:[_.jsx("option",{value:"0",children:"Off (single value per site)"}),_.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),_.jsxs("div",{className:"grid",style:{marginTop:12},children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Lift 1 name"}),_.jsx("input",{value:y,onChange:$=>v($.target.value),placeholder:ps[0]})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Lift 2 name"}),_.jsx("input",{value:E,onChange:$=>T($.target.value),placeholder:ps[1]})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Lift 3 name"}),_.jsx("input",{value:S,onChange:$=>b($.target.value),placeholder:ps[2]})]})]}),_.jsxs("div",{className:"footer-actions",children:[_.jsx("button",{className:"btn primary",disabled:R||i,children:R?"Saving":"Save profile"}),_.jsx("button",{className:"btn",type:"button",onClick:he,disabled:R,children:"Export CSV"})]})]})]}),_.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Change Password"}),_.jsx("div",{className:"muted",children:"Re-auth required."})]}),_.jsxs("form",{onSubmit:q,style:{marginTop:12},children:[_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Current password"}),_.jsx("input",{type:"password",value:w,onChange:$=>k($.target.value),required:!0})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"New password"}),_.jsx("input",{type:"password",value:C,onChange:$=>P($.target.value),required:!0})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Confirm new password"}),_.jsx("input",{type:"password",value:N,onChange:$=>A($.target.value),required:!0})]})]}),_.jsx("div",{className:"footer-actions",children:_.jsx("button",{className:"btn primary",disabled:R,children:"Update password"})})]})]})]})}function hf(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function _5({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:r}){const s=String(t||"").toLowerCase()==="female",[o,a]=O.useState(BV()),[l,u]=O.useState(""),[h,d]=O.useState(""),[f,m]=O.useState(""),[y,v]=O.useState(""),[E,T]=O.useState(""),[S,b]=O.useState(""),[R,M]=O.useState(""),[D,I]=O.useState(""),[w,k]=O.useState(""),[C,P]=O.useState(""),[N,A]=O.useState(""),[ie,ue]=O.useState(""),[me,Ee]=O.useState(""),[B,q]=O.useState(""),[K,he]=O.useState(""),[$,J]=O.useState(""),[ge,Pe]=O.useState(""),[Re,Ft]=O.useState(""),[is,qh]=O.useState(""),pi=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],rs=O.useMemo(()=>{const Y=gb({protein:hf(h)||0,carbs:hf(f)||0,fats:hf(y)||0});return Number.isFinite(Y)?Math.round(Y):0},[h,f,y]),ss=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f))&&Number.isFinite(Number(y));async function wo(Y){if(Y.preventDefault(),!ss())return;const Je={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(f),fats:Number(y),bench:E===""?null:Number(E),squat:S===""?null:Number(S),deadlift:R===""?null:Number(R)};e?(Je.neck1=N===""?null:Number(N),Je.neck2=ie===""?null:Number(ie),Je.neck3=me===""?null:Number(me),Je.waist1=B===""?null:Number(B),Je.waist2=K===""?null:Number(K),Je.waist3=$===""?null:Number($),Je.hip1=s?ge===""?null:Number(ge):null,Je.hip2=s?Re===""?null:Number(Re):null,Je.hip3=s?is===""?null:Number(is):null):(Je.neck=D===""?null:Number(D),Je.waist=w===""?null:Number(w),Je.hip=s?C===""?null:Number(C):null),await i(Je)}return _.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"Daily Entry"}),_.jsxs("div",{className:"muted",children:["Calories preview: ",_.jsx("b",{children:rs})," kcal"]})]}),_.jsxs("form",{onSubmit:wo,style:{marginTop:12},children:[_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Date"}),_.jsx("input",{type:"date",value:o,onChange:Y=>a(Y.target.value)})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Weight (kg)"}),_.jsx("input",{inputMode:"decimal",value:l,onChange:Y=>u(Y.target.value),placeholder:"e.g. 85.2",required:!0})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Protein (g)"}),_.jsx("input",{inputMode:"numeric",value:h,onChange:Y=>d(Y.target.value),placeholder:"e.g. 180"})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Carbs (g)"}),_.jsx("input",{inputMode:"numeric",value:f,onChange:Y=>m(Y.target.value),placeholder:"e.g. 220",required:!0})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Fats (g)"}),_.jsx("input",{inputMode:"numeric",value:y,onChange:Y=>v(Y.target.value),placeholder:"e.g. 70",required:!0})]})]}),_.jsx("hr",{className:"sep"}),_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsxs("label",{children:[pi[0]," (kg) ",_.jsx("span",{className:"muted",children:"(optional)"})]}),_.jsx("input",{inputMode:"decimal",value:E,onChange:Y=>T(Y.target.value),placeholder:"e.g. 100"})]}),_.jsxs("div",{className:"field",children:[_.jsxs("label",{children:[pi[1]," (kg) ",_.jsx("span",{className:"muted",children:"(optional)"})]}),_.jsx("input",{inputMode:"decimal",value:S,onChange:Y=>b(Y.target.value),placeholder:"e.g. 140"})]}),_.jsxs("div",{className:"field",children:[_.jsxs("label",{children:[pi[2]," (kg) ",_.jsx("span",{className:"muted",children:"(optional)"})]}),_.jsx("input",{inputMode:"decimal",value:R,onChange:Y=>M(Y.target.value),placeholder:"e.g. 180"})]})]}),_.jsx("hr",{className:"sep"}),_.jsxs("div",{className:"notice info",children:[_.jsx("b",{children:"Navy measurements (weekly)"}),_.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",s?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),_.jsx("div",{style:{height:10}}),e?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Neck 1 (cm)"}),_.jsx("input",{inputMode:"decimal",value:N,onChange:Y=>A(Y.target.value)})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Neck 2 (cm)"}),_.jsx("input",{inputMode:"decimal",value:ie,onChange:Y=>ue(Y.target.value)})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Neck 3 (cm)"}),_.jsx("input",{inputMode:"decimal",value:me,onChange:Y=>Ee(Y.target.value)})]})]}),_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Waist 1 (cm)"}),_.jsx("input",{inputMode:"decimal",value:B,onChange:Y=>q(Y.target.value)})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Waist 2 (cm)"}),_.jsx("input",{inputMode:"decimal",value:K,onChange:Y=>he(Y.target.value)})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Waist 3 (cm)"}),_.jsx("input",{inputMode:"decimal",value:$,onChange:Y=>J(Y.target.value)})]})]}),s?_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Hip 1 (cm)"}),_.jsx("input",{inputMode:"decimal",value:ge,onChange:Y=>Pe(Y.target.value)})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Hip 2 (cm)"}),_.jsx("input",{inputMode:"decimal",value:Re,onChange:Y=>Ft(Y.target.value)})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Hip 3 (cm)"}),_.jsx("input",{inputMode:"decimal",value:is,onChange:Y=>qh(Y.target.value)})]})]}):null]}):_.jsxs("div",{className:"row",children:[_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Neck (cm)"}),_.jsx("input",{inputMode:"decimal",value:D,onChange:Y=>I(Y.target.value),placeholder:"optional"})]}),_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Waist (cm)"}),_.jsx("input",{inputMode:"decimal",value:w,onChange:Y=>k(Y.target.value),placeholder:"optional"})]}),s?_.jsxs("div",{className:"field",children:[_.jsx("label",{children:"Hip (cm)"}),_.jsx("input",{inputMode:"decimal",value:C,onChange:Y=>P(Y.target.value),placeholder:"optional"})]}):null]}),_.jsx("div",{className:"footer-actions",children:_.jsx("button",{className:"btn primary",type:"submit",disabled:!ss()||r,children:r?"Saving":"Add / Update Entry"})})]})]})}function v5(t){return t==null?"":String(t)}function w5(t){if(t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function E5({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:r}){const[s,o]=O.useState(!1),a=String(t||"").toLowerCase()==="female",l=Array.isArray(r)&&r.length===3?r:["Bench Press","Squat","Deadlift"],[u,h]=O.useState(null),d=O.useMemo(()=>{const y=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"bench",label:l[0]},{key:"squat",label:l[1]},{key:"deadlift",label:l[2]}];return i?(y.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),a&&y.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):(y.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),a&&y.push({key:"hip",label:"Hip"})),y.push({key:"_actions",label:"Actions",readOnly:!0}),y},[i,r,t]);async function f(y,v,E){if(!(v==="dateIso"||v==="_actions")){h(null),o(!0);try{await WV(e,y,{[v]:w5(E)}),h({type:"success",text:"Saved."})}catch(T){h({type:"error",text:(T==null?void 0:T.message)||"Failed to save."})}finally{o(!1)}}}async function m(y){if(confirm(`Delete entry for ${y}?`)){h(null),o(!0);try{await HV(e,y),h({type:"success",text:"Deleted."})}catch(v){h({type:"error",text:(v==null?void 0:v.message)||"Failed to delete."})}finally{o(!1)}}}return _.jsxs("div",{className:"panel",children:[_.jsxs("div",{className:"panel-header",children:[_.jsx("h2",{children:"All Entries"}),_.jsxs("div",{className:"muted",children:["Inline edit  blur to save. ",s?"Saving":""]})]}),u&&_.jsx("div",{className:`notice ${u.type==="error"?"error":"success"}`,style:{marginTop:12},children:u.text}),_.jsx("div",{className:"table-wrap",style:{marginTop:12},children:_.jsxs("table",{className:"table",children:[_.jsx("thead",{children:_.jsx("tr",{children:d.map(y=>_.jsx("th",{children:y.label},y.key))})}),_.jsx("tbody",{children:n.map(y=>_.jsx("tr",{children:d.map(v=>v.key==="_actions"?_.jsx("td",{children:_.jsx("button",{className:"btn danger",onClick:()=>m(y.dateIso),children:"Delete"})},v.key):v.readOnly?_.jsx("td",{children:y[v.key]},v.key):_.jsx("td",{children:_.jsx("input",{defaultValue:v5(y[v.key]),onBlur:E=>f(y.dateIso,v.key,E.target.value),inputMode:"decimal"})},v.key))},y.dateIso))})]})})]})}function T5(){const{user:t}=fi(),{profile:e}=Fm(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=O.useState([]),[s,o]=O.useState(!1),[a,l]=O.useState(null);O.useEffect(()=>{if(!t)return;const f=jm(t.uid,m=>r(m),m=>l({type:"error",text:(m==null?void 0:m.message)||"Failed to load entries."}));return()=>f()},[t]);const u=O.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function d(f){l(null),o(!0);try{await $V(t.uid,f),l({type:"success",text:"Entry saved."})}catch(m){l({type:"error",text:(m==null?void 0:m.message)||"Failed to save entry."})}finally{o(!1)}}return _.jsxs(_.Fragment,{children:[a&&_.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),_.jsx(_5,{sex:h,tripleEnabled:u,liftNames:n,onSubmit:d,busy:s}),_.jsx(E5,{sex:h,userId:t.uid,entries:i,tripleEnabled:u,liftNames:n})]})}function S5(){return _.jsxs(_.Fragment,{children:[_.jsx(jV,{}),_.jsx("div",{className:"app-shell",children:_.jsxs(ZA,{children:[_.jsx(Tn,{path:"/",element:_.jsx(ap,{to:"/dashboard",replace:!0})}),_.jsx(Tn,{path:"/dashboard",element:_.jsx(ik,{})}),_.jsx(Tn,{path:"/insights",element:_.jsx(c5,{})}),_.jsx(Tn,{path:"/login",element:_.jsx(h5,{})}),_.jsx(Tn,{path:"/signup",element:_.jsx(d5,{})}),_.jsx(Tn,{path:"/reset-password",element:_.jsx(f5,{})}),_.jsx(Tn,{path:"/profile",element:_.jsx(B0,{children:_.jsx(y5,{})})}),_.jsx(Tn,{path:"/entry",element:_.jsx(B0,{children:_.jsx(T5,{})})}),_.jsx(Tn,{path:"*",element:_.jsx(ap,{to:"/dashboard",replace:!0})})]})})]})}class I5 extends Yp.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?_.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[_.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),_.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),_.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),_.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}df.createRoot(document.getElementById("root")).render(_.jsx(Yp.StrictMode,{children:_.jsx(aP,{basename:"/Body-Recomp-Tracker/",children:_.jsx(FV,{children:_.jsx(UV,{children:_.jsx(I5,{children:_.jsx(S5,{})})})})})}));
