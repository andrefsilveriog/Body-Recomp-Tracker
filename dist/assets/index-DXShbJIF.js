var Qk=Object.defineProperty;var Yk=(t,e,n)=>e in t?Qk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ue=(t,e,n)=>Yk(t,typeof e!="symbol"?e+"":e,n);function Xk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Jk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var IE={exports:{}},bh={},SE={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl=Symbol.for("react.element"),Zk=Symbol.for("react.portal"),eC=Symbol.for("react.fragment"),tC=Symbol.for("react.strict_mode"),nC=Symbol.for("react.profiler"),iC=Symbol.for("react.provider"),rC=Symbol.for("react.context"),sC=Symbol.for("react.forward_ref"),oC=Symbol.for("react.suspense"),aC=Symbol.for("react.memo"),lC=Symbol.for("react.lazy"),w_=Symbol.iterator;function uC(t){return t===null||typeof t!="object"?null:(t=w_&&t[w_]||t["@@iterator"],typeof t=="function"?t:null)}var xE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kE=Object.assign,CE={};function To(t,e,n){this.props=t,this.context=e,this.refs=CE,this.updater=n||xE}To.prototype.isReactComponent={};To.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};To.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function AE(){}AE.prototype=To.prototype;function cm(t,e,n){this.props=t,this.context=e,this.refs=CE,this.updater=n||xE}var hm=cm.prototype=new AE;hm.constructor=cm;kE(hm,To.prototype);hm.isPureReactComponent=!0;var E_=Array.isArray,PE=Object.prototype.hasOwnProperty,dm={current:null},RE={key:!0,ref:!0,__self:!0,__source:!0};function NE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)PE.call(e,i)&&!RE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Cl,type:t,key:s,ref:o,props:r,_owner:dm.current}}function cC(t,e){return{$$typeof:Cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cl}function hC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var T_=/\/+/g;function Dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hC(""+t.key):e.toString(36)}function Qu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cl:case Zk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Dd(o,0):i,E_(r)?(n="",t!=null&&(n=t.replace(T_,"$&/")+"/"),Qu(r,e,n,"",function(u){return u})):r!=null&&(fm(r)&&(r=cC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(T_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",E_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Dd(s,a);o+=Qu(s,e,n,l,r)}else if(l=uC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Dd(s,a++),o+=Qu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function du(t,e,n){if(t==null)return t;var i=[],r=0;return Qu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function dC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},Yu={transition:null},fC={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Yu,ReactCurrentOwner:dm};function DE(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:du,forEach:function(t,e,n){du(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return du(t,function(){e++}),e},toArray:function(t){return du(t,function(e){return e})||[]},only:function(t){if(!fm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=To;he.Fragment=eC;he.Profiler=nC;he.PureComponent=cm;he.StrictMode=tC;he.Suspense=oC;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fC;he.act=DE;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=kE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)PE.call(e,l)&&!RE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Cl,type:t.type,key:r,ref:s,props:i,_owner:o}};he.createContext=function(t){return t={$$typeof:rC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iC,_context:t},t.Consumer=t};he.createElement=NE;he.createFactory=function(t){var e=NE.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:sC,render:t}};he.isValidElement=fm;he.lazy=function(t){return{$$typeof:lC,_payload:{_status:-1,_result:t},_init:dC}};he.memo=function(t,e){return{$$typeof:aC,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Yu.transition;Yu.transition={};try{t()}finally{Yu.transition=e}};he.unstable_act=DE;he.useCallback=function(t,e){return Dt.current.useCallback(t,e)};he.useContext=function(t){return Dt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Dt.current.useEffect(t,e)};he.useId=function(){return Dt.current.useId()};he.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Dt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};he.useRef=function(t){return Dt.current.useRef(t)};he.useState=function(t){return Dt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Dt.current.useTransition()};he.version="18.3.1";SE.exports=he;var M=SE.exports;const pm=Jk(M),pC=Xk({__proto__:null,default:pm},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=M,gC=Symbol.for("react.element"),yC=Symbol.for("react.fragment"),_C=Object.prototype.hasOwnProperty,vC=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wC={key:!0,ref:!0,__self:!0,__source:!0};function ME(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)_C.call(e,i)&&!wC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:gC,type:t,key:s,ref:o,props:r,_owner:vC.current}}bh.Fragment=yC;bh.jsx=ME;bh.jsxs=ME;IE.exports=bh;var y=IE.exports,Nf={},OE={exports:{}},en={},LE={exports:{}},VE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var X=$.length;$.push(Q);e:for(;0<X;){var U=X-1>>>1,F=$[U];if(0<r(F,Q))$[U]=Q,$[X]=F,X=U;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var Q=$[0],X=$.pop();if(X!==Q){$[0]=X;e:for(var U=0,F=$.length,H=F>>>1;U<H;){var J=2*(U+1)-1,le=$[J],Z=J+1,xe=$[Z];if(0>r(le,X))Z<F&&0>r(xe,le)?($[U]=xe,$[Z]=X,U=Z):($[U]=le,$[J]=X,U=J);else if(Z<F&&0>r(xe,X))$[U]=xe,$[Z]=X,U=Z;else break e}}return Q}function r($,Q){var X=$.sortIndex-Q.sortIndex;return X!==0?X:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,m=!1,E=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k($){for(var Q=n(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=$)i(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function R($){if(b=!1,k($),!E)if(n(l)!==null)E=!0,de(D);else{var Q=n(u);Q!==null&&pe(R,Q.startTime-$)}}function D($,Q){E=!1,b&&(b=!1,I(_),_=-1),m=!0;var X=f;try{for(k(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||$&&!P());){var U=d.callback;if(typeof U=="function"){d.callback=null,f=d.priorityLevel;var F=U(d.expirationTime<=Q);Q=t.unstable_now(),typeof F=="function"?d.callback=F:d===n(l)&&i(l),k(Q)}else i(l);d=n(l)}if(d!==null)var H=!0;else{var J=n(u);J!==null&&pe(R,J.startTime-Q),H=!1}return H}finally{d=null,f=X,m=!1}}var O=!1,T=null,_=-1,x=5,C=-1;function P(){return!(t.unstable_now()-C<x)}function N(){if(T!==null){var $=t.unstable_now();C=$;var Q=!0;try{Q=T(!0,$)}finally{Q?A():(O=!1,T=null)}}else O=!1}var A;if(typeof v=="function")A=function(){v(N)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,te=ae.port2;ae.port1.onmessage=N,A=function(){te.postMessage(null)}}else A=function(){w(N,0)};function de($){T=$,O||(O=!0,A())}function pe($,Q){_=w(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,de(D))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var X=f;f=Q;try{return $()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=f;f=$;try{return Q()}finally{f=X}},t.unstable_scheduleCallback=function($,Q,X){var U=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?U+X:U):X=U,$){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=X+F,$={id:h++,callback:Q,priorityLevel:$,startTime:X,expirationTime:F,sortIndex:-1},X>U?($.sortIndex=X,e(u,$),n(l)===null&&$===n(u)&&(b?(I(_),_=-1):b=!0,pe(R,X-U))):($.sortIndex=F,e(l,$),E||m||(E=!0,de(D))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var Q=f;return function(){var X=f;f=Q;try{return $.apply(this,arguments)}finally{f=X}}}})(VE);LE.exports=VE;var EC=LE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC=M,Zt=EC;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FE=new Set,Ga={};function hs(t,e){io(t,e),io(t+"Capture",e)}function io(t,e){for(Ga[t]=e,t=0;t<e.length;t++)FE.add(e[t])}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=Object.prototype.hasOwnProperty,bC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b_={},I_={};function IC(t){return Df.call(I_,t)?!0:Df.call(b_,t)?!1:bC.test(t)?I_[t]=!0:(b_[t]=!0,!1)}function SC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xC(t,e,n,i){if(e===null||typeof e>"u"||SC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var mm=/[\-:]([a-z])/g;function gm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mm,gm);mt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mm,gm);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mm,gm);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ym(t,e,n,i){var r=mt.hasOwnProperty(e)?mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xC(e,n,r,i)&&(n=null),i||r===null?IC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var wi=TC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fu=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),Ds=Symbol.for("react.fragment"),_m=Symbol.for("react.strict_mode"),Mf=Symbol.for("react.profiler"),jE=Symbol.for("react.provider"),UE=Symbol.for("react.context"),vm=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),Lf=Symbol.for("react.suspense_list"),wm=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),BE=Symbol.for("react.offscreen"),S_=Symbol.iterator;function Yo(t){return t===null||typeof t!="object"?null:(t=S_&&t[S_]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Md;function da(t){if(Md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Md=e&&e[1]||""}return`
`+Md+t}var Od=!1;function Ld(t,e){if(!t||Od)return"";Od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?da(t):""}function kC(t){switch(t.tag){case 5:return da(t.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return t=Ld(t.type,!1),t;case 11:return t=Ld(t.type.render,!1),t;case 1:return t=Ld(t.type,!0),t;default:return""}}function Vf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ds:return"Fragment";case Ns:return"Portal";case Mf:return"Profiler";case _m:return"StrictMode";case Of:return"Suspense";case Lf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case UE:return(t.displayName||"Context")+".Consumer";case jE:return(t._context.displayName||"Context")+".Provider";case vm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wm:return e=t.displayName||null,e!==null?e:Vf(t.type)||"Memo";case Ni:e=t._payload,t=t._init;try{return Vf(t(e))}catch{}}return null}function CC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vf(e);case 8:return e===_m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AC(t){var e=zE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pu(t){t._valueTracker||(t._valueTracker=AC(t))}function $E(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=zE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ff(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function x_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WE(t,e){e=e.checked,e!=null&&ym(t,"checked",e,!1)}function jf(t,e){WE(t,e);var n=lr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uf(t,e.type,lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function k_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uf(t,e,n){(e!=="number"||wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fa=Array.isArray;function qs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+lr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Bf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function C_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(fa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lr(n)}}function HE(t,e){var n=lr(e.value),i=lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function A_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mu,KE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mu=mu||document.createElement("div"),mu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PC=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(t){PC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xa[e]=xa[t]})});function GE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xa.hasOwnProperty(t)&&xa[t]?(""+e).trim():e+"px"}function QE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=GE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var RC=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $f(t,e){if(e){if(RC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Wf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hf=null;function Em(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qf=null,Ks=null,Gs=null;function P_(t){if(t=Rl(t)){if(typeof qf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ch(e),qf(t.stateNode,t.type,e))}}function YE(t){Ks?Gs?Gs.push(t):Gs=[t]:Ks=t}function XE(){if(Ks){var t=Ks,e=Gs;if(Gs=Ks=null,P_(t),e)for(t=0;t<e.length;t++)P_(e[t])}}function JE(t,e){return t(e)}function ZE(){}var Vd=!1;function eT(t,e,n){if(Vd)return t(e,n);Vd=!0;try{return JE(t,e,n)}finally{Vd=!1,(Ks!==null||Gs!==null)&&(ZE(),XE())}}function Ya(t,e){var n=t.stateNode;if(n===null)return null;var i=Ch(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Kf=!1;if(di)try{var Xo={};Object.defineProperty(Xo,"passive",{get:function(){Kf=!0}}),window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{Kf=!1}function NC(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ka=!1,Ec=null,Tc=!1,Gf=null,DC={onError:function(t){ka=!0,Ec=t}};function MC(t,e,n,i,r,s,o,a,l){ka=!1,Ec=null,NC.apply(DC,arguments)}function OC(t,e,n,i,r,s,o,a,l){if(MC.apply(this,arguments),ka){if(ka){var u=Ec;ka=!1,Ec=null}else throw Error(z(198));Tc||(Tc=!0,Gf=u)}}function ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function R_(t){if(ds(t)!==t)throw Error(z(188))}function LC(t){var e=t.alternate;if(!e){if(e=ds(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return R_(r),t;if(s===i)return R_(r),e;s=s.sibling}throw Error(z(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==i)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function nT(t){return t=LC(t),t!==null?iT(t):null}function iT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iT(t);if(e!==null)return e;t=t.sibling}return null}var rT=Zt.unstable_scheduleCallback,N_=Zt.unstable_cancelCallback,VC=Zt.unstable_shouldYield,FC=Zt.unstable_requestPaint,He=Zt.unstable_now,jC=Zt.unstable_getCurrentPriorityLevel,Tm=Zt.unstable_ImmediatePriority,sT=Zt.unstable_UserBlockingPriority,bc=Zt.unstable_NormalPriority,UC=Zt.unstable_LowPriority,oT=Zt.unstable_IdlePriority,Ih=null,jn=null;function BC(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Ih,t,void 0,(t.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:WC,zC=Math.log,$C=Math.LN2;function WC(t){return t>>>=0,t===0?32:31-(zC(t)/$C|0)|0}var gu=64,yu=4194304;function pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ic(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=pa(a):(s&=o,s!==0&&(i=pa(s)))}else o=n&~r,o!==0?i=pa(o):s!==0&&(i=pa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Tn(e),r=1<<n,i|=t[n],e&=~r;return i}function HC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Tn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=HC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Qf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aT(){var t=gu;return gu<<=1,!(gu&4194240)&&(gu=64),t}function Fd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tn(e),t[e]=n}function KC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Tn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function bm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Tn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Se=0;function lT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uT,Im,cT,hT,dT,Yf=!1,_u=[],Gi=null,Qi=null,Yi=null,Xa=new Map,Ja=new Map,Mi=[],GC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D_(t,e){switch(t){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":Xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(e.pointerId)}}function Jo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Rl(e),e!==null&&Im(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function QC(t,e,n,i,r){switch(e){case"focusin":return Gi=Jo(Gi,t,e,n,i,r),!0;case"dragenter":return Qi=Jo(Qi,t,e,n,i,r),!0;case"mouseover":return Yi=Jo(Yi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Xa.set(s,Jo(Xa.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ja.set(s,Jo(Ja.get(s)||null,t,e,n,i,r)),!0}return!1}function fT(t){var e=jr(t.target);if(e!==null){var n=ds(e);if(n!==null){if(e=n.tag,e===13){if(e=tT(n),e!==null){t.blockedOn=e,dT(t.priority,function(){cT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Hf=i,n.target.dispatchEvent(i),Hf=null}else return e=Rl(n),e!==null&&Im(e),t.blockedOn=n,!1;e.shift()}return!0}function M_(t,e,n){Xu(t)&&n.delete(e)}function YC(){Yf=!1,Gi!==null&&Xu(Gi)&&(Gi=null),Qi!==null&&Xu(Qi)&&(Qi=null),Yi!==null&&Xu(Yi)&&(Yi=null),Xa.forEach(M_),Ja.forEach(M_)}function Zo(t,e){t.blockedOn===e&&(t.blockedOn=null,Yf||(Yf=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,YC)))}function Za(t){function e(r){return Zo(r,t)}if(0<_u.length){Zo(_u[0],t);for(var n=1;n<_u.length;n++){var i=_u[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Gi!==null&&Zo(Gi,t),Qi!==null&&Zo(Qi,t),Yi!==null&&Zo(Yi,t),Xa.forEach(e),Ja.forEach(e),n=0;n<Mi.length;n++)i=Mi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Mi.length&&(n=Mi[0],n.blockedOn===null);)fT(n),n.blockedOn===null&&Mi.shift()}var Qs=wi.ReactCurrentBatchConfig,Sc=!0;function XC(t,e,n,i){var r=Se,s=Qs.transition;Qs.transition=null;try{Se=1,Sm(t,e,n,i)}finally{Se=r,Qs.transition=s}}function JC(t,e,n,i){var r=Se,s=Qs.transition;Qs.transition=null;try{Se=4,Sm(t,e,n,i)}finally{Se=r,Qs.transition=s}}function Sm(t,e,n,i){if(Sc){var r=Xf(t,e,n,i);if(r===null)Gd(t,e,i,xc,n),D_(t,i);else if(QC(r,t,e,n,i))i.stopPropagation();else if(D_(t,i),e&4&&-1<GC.indexOf(t)){for(;r!==null;){var s=Rl(r);if(s!==null&&uT(s),s=Xf(t,e,n,i),s===null&&Gd(t,e,i,xc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Gd(t,e,i,null,n)}}var xc=null;function Xf(t,e,n,i){if(xc=null,t=Em(i),t=jr(t),t!==null)if(e=ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xc=t,null}function pT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jC()){case Tm:return 1;case sT:return 4;case bc:case UC:return 16;case oT:return 536870912;default:return 16}default:return 16}}var Bi=null,xm=null,Ju=null;function mT(){if(Ju)return Ju;var t,e=xm,n=e.length,i,r="value"in Bi?Bi.value:Bi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Ju=r.slice(t,1<i?1-i:void 0)}function Zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vu(){return!0}function O_(){return!1}function tn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vu:O_,this.isPropagationStopped=O_,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vu)},persist:function(){},isPersistent:vu}),e}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},km=tn(bo),Pl=Ue({},bo,{view:0,detail:0}),ZC=tn(Pl),jd,Ud,ea,Sh=Ue({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ea&&(ea&&t.type==="mousemove"?(jd=t.screenX-ea.screenX,Ud=t.screenY-ea.screenY):Ud=jd=0,ea=t),jd)},movementY:function(t){return"movementY"in t?t.movementY:Ud}}),L_=tn(Sh),e1=Ue({},Sh,{dataTransfer:0}),t1=tn(e1),n1=Ue({},Pl,{relatedTarget:0}),Bd=tn(n1),i1=Ue({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),r1=tn(i1),s1=Ue({},bo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),o1=tn(s1),a1=Ue({},bo,{data:0}),V_=tn(a1),l1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=c1[t])?!!e[t]:!1}function Cm(){return h1}var d1=Ue({},Pl,{key:function(t){if(t.key){var e=l1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?u1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cm,charCode:function(t){return t.type==="keypress"?Zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f1=tn(d1),p1=Ue({},Sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F_=tn(p1),m1=Ue({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cm}),g1=tn(m1),y1=Ue({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_1=tn(y1),v1=Ue({},Sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w1=tn(v1),E1=[9,13,27,32],Am=di&&"CompositionEvent"in window,Ca=null;di&&"documentMode"in document&&(Ca=document.documentMode);var T1=di&&"TextEvent"in window&&!Ca,gT=di&&(!Am||Ca&&8<Ca&&11>=Ca),j_=" ",U_=!1;function yT(t,e){switch(t){case"keyup":return E1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _T(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ms=!1;function b1(t,e){switch(t){case"compositionend":return _T(e);case"keypress":return e.which!==32?null:(U_=!0,j_);case"textInput":return t=e.data,t===j_&&U_?null:t;default:return null}}function I1(t,e){if(Ms)return t==="compositionend"||!Am&&yT(t,e)?(t=mT(),Ju=xm=Bi=null,Ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gT&&e.locale!=="ko"?null:e.data;default:return null}}var S1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!S1[t.type]:e==="textarea"}function vT(t,e,n,i){YE(i),e=kc(e,"onChange"),0<e.length&&(n=new km("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Aa=null,el=null;function x1(t){PT(t,0)}function xh(t){var e=Vs(t);if($E(e))return t}function k1(t,e){if(t==="change")return e}var wT=!1;if(di){var zd;if(di){var $d="oninput"in document;if(!$d){var z_=document.createElement("div");z_.setAttribute("oninput","return;"),$d=typeof z_.oninput=="function"}zd=$d}else zd=!1;wT=zd&&(!document.documentMode||9<document.documentMode)}function $_(){Aa&&(Aa.detachEvent("onpropertychange",ET),el=Aa=null)}function ET(t){if(t.propertyName==="value"&&xh(el)){var e=[];vT(e,el,t,Em(t)),eT(x1,e)}}function C1(t,e,n){t==="focusin"?($_(),Aa=e,el=n,Aa.attachEvent("onpropertychange",ET)):t==="focusout"&&$_()}function A1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xh(el)}function P1(t,e){if(t==="click")return xh(e)}function R1(t,e){if(t==="input"||t==="change")return xh(e)}function N1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:N1;function tl(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Df.call(e,r)||!Sn(t[r],e[r]))return!1}return!0}function W_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function H_(t,e){var n=W_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W_(n)}}function TT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bT(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function Pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function D1(t){var e=bT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&TT(n.ownerDocument.documentElement,n)){if(i!==null&&Pm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=H_(n,s);var o=H_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var M1=di&&"documentMode"in document&&11>=document.documentMode,Os=null,Jf=null,Pa=null,Zf=!1;function q_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zf||Os==null||Os!==wc(i)||(i=Os,"selectionStart"in i&&Pm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Pa&&tl(Pa,i)||(Pa=i,i=kc(Jf,"onSelect"),0<i.length&&(e=new km("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Os)))}function wu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ls={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},Wd={},IT={};di&&(IT=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function kh(t){if(Wd[t])return Wd[t];if(!Ls[t])return t;var e=Ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IT)return Wd[t]=e[n];return t}var ST=kh("animationend"),xT=kh("animationiteration"),kT=kh("animationstart"),CT=kh("transitionend"),AT=new Map,K_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){AT.set(t,e),hs(e,[t])}for(var Hd=0;Hd<K_.length;Hd++){var qd=K_[Hd],O1=qd.toLowerCase(),L1=qd[0].toUpperCase()+qd.slice(1);gr(O1,"on"+L1)}gr(ST,"onAnimationEnd");gr(xT,"onAnimationIteration");gr(kT,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(CT,"onTransitionEnd");io("onMouseEnter",["mouseout","mouseover"]);io("onMouseLeave",["mouseout","mouseover"]);io("onPointerEnter",["pointerout","pointerover"]);io("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function G_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,OC(i,e,void 0,t),t.currentTarget=null}function PT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;G_(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;G_(r,a,u),s=l}}}if(Tc)throw t=Gf,Tc=!1,Gf=null,t}function Ne(t,e){var n=e[rp];n===void 0&&(n=e[rp]=new Set);var i=t+"__bubble";n.has(i)||(RT(e,t,2,!1),n.add(i))}function Kd(t,e,n){var i=0;e&&(i|=4),RT(n,t,i,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function nl(t){if(!t[Eu]){t[Eu]=!0,FE.forEach(function(n){n!=="selectionchange"&&(V1.has(n)||Kd(n,!1,t),Kd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,Kd("selectionchange",!1,e))}}function RT(t,e,n,i){switch(pT(e)){case 1:var r=XC;break;case 4:r=JC;break;default:r=Sm}n=r.bind(null,e,n,t),r=void 0,!Kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Gd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=jr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}eT(function(){var u=s,h=Em(n),d=[];e:{var f=AT.get(t);if(f!==void 0){var m=km,E=t;switch(t){case"keypress":if(Zu(n)===0)break e;case"keydown":case"keyup":m=f1;break;case"focusin":E="focus",m=Bd;break;case"focusout":E="blur",m=Bd;break;case"beforeblur":case"afterblur":m=Bd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=L_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=t1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=g1;break;case ST:case xT:case kT:m=r1;break;case CT:m=_1;break;case"scroll":m=ZC;break;case"wheel":m=w1;break;case"copy":case"cut":case"paste":m=o1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=F_}var b=(e&4)!==0,w=!b&&t==="scroll",I=b?f!==null?f+"Capture":null:f;b=[];for(var v=u,k;v!==null;){k=v;var R=k.stateNode;if(k.tag===5&&R!==null&&(k=R,I!==null&&(R=Ya(v,I),R!=null&&b.push(il(v,R,k)))),w)break;v=v.return}0<b.length&&(f=new m(f,E,null,n,h),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Hf&&(E=n.relatedTarget||n.fromElement)&&(jr(E)||E[fi]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=u,E=E?jr(E):null,E!==null&&(w=ds(E),E!==w||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=u),m!==E)){if(b=L_,R="onMouseLeave",I="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=F_,R="onPointerLeave",I="onPointerEnter",v="pointer"),w=m==null?f:Vs(m),k=E==null?f:Vs(E),f=new b(R,v+"leave",m,n,h),f.target=w,f.relatedTarget=k,R=null,jr(h)===u&&(b=new b(I,v+"enter",E,n,h),b.target=k,b.relatedTarget=w,R=b),w=R,m&&E)t:{for(b=m,I=E,v=0,k=b;k;k=Is(k))v++;for(k=0,R=I;R;R=Is(R))k++;for(;0<v-k;)b=Is(b),v--;for(;0<k-v;)I=Is(I),k--;for(;v--;){if(b===I||I!==null&&b===I.alternate)break t;b=Is(b),I=Is(I)}b=null}else b=null;m!==null&&Q_(d,f,m,b,!1),E!==null&&w!==null&&Q_(d,w,E,b,!0)}}e:{if(f=u?Vs(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=k1;else if(B_(f))if(wT)D=R1;else{D=A1;var O=C1}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=P1);if(D&&(D=D(t,u))){vT(d,D,n,h);break e}O&&O(t,f,u),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Uf(f,"number",f.value)}switch(O=u?Vs(u):window,t){case"focusin":(B_(O)||O.contentEditable==="true")&&(Os=O,Jf=u,Pa=null);break;case"focusout":Pa=Jf=Os=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,q_(d,n,h);break;case"selectionchange":if(M1)break;case"keydown":case"keyup":q_(d,n,h)}var T;if(Am)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ms?yT(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(gT&&n.locale!=="ko"&&(Ms||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ms&&(T=mT()):(Bi=h,xm="value"in Bi?Bi.value:Bi.textContent,Ms=!0)),O=kc(u,_),0<O.length&&(_=new V_(_,t,null,n,h),d.push({event:_,listeners:O}),T?_.data=T:(T=_T(n),T!==null&&(_.data=T)))),(T=T1?b1(t,n):I1(t,n))&&(u=kc(u,"onBeforeInput"),0<u.length&&(h=new V_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=T))}PT(d,e)})}function il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ya(t,n),s!=null&&i.unshift(il(t,s,r)),s=Ya(t,e),s!=null&&i.push(il(t,s,r))),t=t.return}return i}function Is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Q_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Ya(n,s),l!=null&&o.unshift(il(n,l,a))):r||(l=Ya(n,s),l!=null&&o.push(il(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var F1=/\r\n?/g,j1=/\u0000|\uFFFD/g;function Y_(t){return(typeof t=="string"?t:""+t).replace(F1,`
`).replace(j1,"")}function Tu(t,e,n){if(e=Y_(e),Y_(t)!==e&&n)throw Error(z(425))}function Cc(){}var ep=null,tp=null;function np(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ip=typeof setTimeout=="function"?setTimeout:void 0,U1=typeof clearTimeout=="function"?clearTimeout:void 0,X_=typeof Promise=="function"?Promise:void 0,B1=typeof queueMicrotask=="function"?queueMicrotask:typeof X_<"u"?function(t){return X_.resolve(null).then(t).catch(z1)}:ip;function z1(t){setTimeout(function(){throw t})}function Qd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Za(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Za(e)}function Xi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function J_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Io=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Io,rl="__reactProps$"+Io,fi="__reactContainer$"+Io,rp="__reactEvents$"+Io,$1="__reactListeners$"+Io,W1="__reactHandles$"+Io;function jr(t){var e=t[Vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[Vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=J_(t);t!==null;){if(n=t[Vn])return n;t=J_(t)}return e}t=n,n=t.parentNode}return null}function Rl(t){return t=t[Vn]||t[fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ch(t){return t[rl]||null}var sp=[],Fs=-1;function yr(t){return{current:t}}function Me(t){0>Fs||(t.current=sp[Fs],sp[Fs]=null,Fs--)}function Ae(t,e){Fs++,sp[Fs]=t.current,t.current=e}var ur={},St=yr(ur),zt=yr(!1),Yr=ur;function ro(t,e){var n=t.type.contextTypes;if(!n)return ur;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function $t(t){return t=t.childContextTypes,t!=null}function Ac(){Me(zt),Me(St)}function Z_(t,e,n){if(St.current!==ur)throw Error(z(168));Ae(St,e),Ae(zt,n)}function NT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(z(108,CC(t)||"Unknown",r));return Ue({},n,i)}function Pc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ur,Yr=St.current,Ae(St,t),Ae(zt,zt.current),!0}function ev(t,e,n){var i=t.stateNode;if(!i)throw Error(z(169));n?(t=NT(t,e,Yr),i.__reactInternalMemoizedMergedChildContext=t,Me(zt),Me(St),Ae(St,t)):Me(zt),Ae(zt,n)}var ii=null,Ah=!1,Yd=!1;function DT(t){ii===null?ii=[t]:ii.push(t)}function H1(t){Ah=!0,DT(t)}function _r(){if(!Yd&&ii!==null){Yd=!0;var t=0,e=Se;try{var n=ii;for(Se=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ii=null,Ah=!1}catch(r){throw ii!==null&&(ii=ii.slice(t+1)),rT(Tm,_r),r}finally{Se=e,Yd=!1}}return null}var js=[],Us=0,Rc=null,Nc=0,on=[],an=0,Xr=null,si=1,oi="";function Dr(t,e){js[Us++]=Nc,js[Us++]=Rc,Rc=t,Nc=e}function MT(t,e,n){on[an++]=si,on[an++]=oi,on[an++]=Xr,Xr=t;var i=si;t=oi;var r=32-Tn(i)-1;i&=~(1<<r),n+=1;var s=32-Tn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,si=1<<32-Tn(e)+r|n<<r|i,oi=s+t}else si=1<<s|n<<r|i,oi=t}function Rm(t){t.return!==null&&(Dr(t,1),MT(t,1,0))}function Nm(t){for(;t===Rc;)Rc=js[--Us],js[Us]=null,Nc=js[--Us],js[Us]=null;for(;t===Xr;)Xr=on[--an],on[an]=null,oi=on[--an],on[an]=null,si=on[--an],on[an]=null}var Xt=null,Qt=null,Oe=!1,wn=null;function OT(t,e){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=Xi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xr!==null?{id:si,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Qt=null,!0):!1;default:return!1}}function op(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ap(t){if(Oe){var e=Qt;if(e){var n=e;if(!tv(t,e)){if(op(t))throw Error(z(418));e=Xi(n.nextSibling);var i=Xt;e&&tv(t,e)?OT(i,n):(t.flags=t.flags&-4097|2,Oe=!1,Xt=t)}}else{if(op(t))throw Error(z(418));t.flags=t.flags&-4097|2,Oe=!1,Xt=t}}}function nv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function bu(t){if(t!==Xt)return!1;if(!Oe)return nv(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!np(t.type,t.memoizedProps)),e&&(e=Qt)){if(op(t))throw LT(),Error(z(418));for(;e;)OT(t,e),e=Xi(e.nextSibling)}if(nv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=Xi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Xt?Xi(t.stateNode.nextSibling):null;return!0}function LT(){for(var t=Qt;t;)t=Xi(t.nextSibling)}function so(){Qt=Xt=null,Oe=!1}function Dm(t){wn===null?wn=[t]:wn.push(t)}var q1=wi.ReactCurrentBatchConfig;function ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var i=n.stateNode}if(!i)throw Error(z(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Iu(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iv(t){var e=t._init;return e(t._payload)}function VT(t){function e(I,v){if(t){var k=I.deletions;k===null?(I.deletions=[v],I.flags|=16):k.push(v)}}function n(I,v){if(!t)return null;for(;v!==null;)e(I,v),v=v.sibling;return null}function i(I,v){for(I=new Map;v!==null;)v.key!==null?I.set(v.key,v):I.set(v.index,v),v=v.sibling;return I}function r(I,v){return I=tr(I,v),I.index=0,I.sibling=null,I}function s(I,v,k){return I.index=k,t?(k=I.alternate,k!==null?(k=k.index,k<v?(I.flags|=2,v):k):(I.flags|=2,v)):(I.flags|=1048576,v)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,v,k,R){return v===null||v.tag!==6?(v=rf(k,I.mode,R),v.return=I,v):(v=r(v,k),v.return=I,v)}function l(I,v,k,R){var D=k.type;return D===Ds?h(I,v,k.props.children,R,k.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ni&&iv(D)===v.type)?(R=r(v,k.props),R.ref=ta(I,v,k),R.return=I,R):(R=oc(k.type,k.key,k.props,null,I.mode,R),R.ref=ta(I,v,k),R.return=I,R)}function u(I,v,k,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==k.containerInfo||v.stateNode.implementation!==k.implementation?(v=sf(k,I.mode,R),v.return=I,v):(v=r(v,k.children||[]),v.return=I,v)}function h(I,v,k,R,D){return v===null||v.tag!==7?(v=Kr(k,I.mode,R,D),v.return=I,v):(v=r(v,k),v.return=I,v)}function d(I,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return v=rf(""+v,I.mode,k),v.return=I,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fu:return k=oc(v.type,v.key,v.props,null,I.mode,k),k.ref=ta(I,null,v),k.return=I,k;case Ns:return v=sf(v,I.mode,k),v.return=I,v;case Ni:var R=v._init;return d(I,R(v._payload),k)}if(fa(v)||Yo(v))return v=Kr(v,I.mode,k,null),v.return=I,v;Iu(I,v)}return null}function f(I,v,k,R){var D=v!==null?v.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return D!==null?null:a(I,v,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case fu:return k.key===D?l(I,v,k,R):null;case Ns:return k.key===D?u(I,v,k,R):null;case Ni:return D=k._init,f(I,v,D(k._payload),R)}if(fa(k)||Yo(k))return D!==null?null:h(I,v,k,R,null);Iu(I,k)}return null}function m(I,v,k,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return I=I.get(k)||null,a(v,I,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case fu:return I=I.get(R.key===null?k:R.key)||null,l(v,I,R,D);case Ns:return I=I.get(R.key===null?k:R.key)||null,u(v,I,R,D);case Ni:var O=R._init;return m(I,v,k,O(R._payload),D)}if(fa(R)||Yo(R))return I=I.get(k)||null,h(v,I,R,D,null);Iu(v,R)}return null}function E(I,v,k,R){for(var D=null,O=null,T=v,_=v=0,x=null;T!==null&&_<k.length;_++){T.index>_?(x=T,T=null):x=T.sibling;var C=f(I,T,k[_],R);if(C===null){T===null&&(T=x);break}t&&T&&C.alternate===null&&e(I,T),v=s(C,v,_),O===null?D=C:O.sibling=C,O=C,T=x}if(_===k.length)return n(I,T),Oe&&Dr(I,_),D;if(T===null){for(;_<k.length;_++)T=d(I,k[_],R),T!==null&&(v=s(T,v,_),O===null?D=T:O.sibling=T,O=T);return Oe&&Dr(I,_),D}for(T=i(I,T);_<k.length;_++)x=m(T,I,_,k[_],R),x!==null&&(t&&x.alternate!==null&&T.delete(x.key===null?_:x.key),v=s(x,v,_),O===null?D=x:O.sibling=x,O=x);return t&&T.forEach(function(P){return e(I,P)}),Oe&&Dr(I,_),D}function b(I,v,k,R){var D=Yo(k);if(typeof D!="function")throw Error(z(150));if(k=D.call(k),k==null)throw Error(z(151));for(var O=D=null,T=v,_=v=0,x=null,C=k.next();T!==null&&!C.done;_++,C=k.next()){T.index>_?(x=T,T=null):x=T.sibling;var P=f(I,T,C.value,R);if(P===null){T===null&&(T=x);break}t&&T&&P.alternate===null&&e(I,T),v=s(P,v,_),O===null?D=P:O.sibling=P,O=P,T=x}if(C.done)return n(I,T),Oe&&Dr(I,_),D;if(T===null){for(;!C.done;_++,C=k.next())C=d(I,C.value,R),C!==null&&(v=s(C,v,_),O===null?D=C:O.sibling=C,O=C);return Oe&&Dr(I,_),D}for(T=i(I,T);!C.done;_++,C=k.next())C=m(T,I,_,C.value,R),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?_:C.key),v=s(C,v,_),O===null?D=C:O.sibling=C,O=C);return t&&T.forEach(function(N){return e(I,N)}),Oe&&Dr(I,_),D}function w(I,v,k,R){if(typeof k=="object"&&k!==null&&k.type===Ds&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case fu:e:{for(var D=k.key,O=v;O!==null;){if(O.key===D){if(D=k.type,D===Ds){if(O.tag===7){n(I,O.sibling),v=r(O,k.props.children),v.return=I,I=v;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ni&&iv(D)===O.type){n(I,O.sibling),v=r(O,k.props),v.ref=ta(I,O,k),v.return=I,I=v;break e}n(I,O);break}else e(I,O);O=O.sibling}k.type===Ds?(v=Kr(k.props.children,I.mode,R,k.key),v.return=I,I=v):(R=oc(k.type,k.key,k.props,null,I.mode,R),R.ref=ta(I,v,k),R.return=I,I=R)}return o(I);case Ns:e:{for(O=k.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===k.containerInfo&&v.stateNode.implementation===k.implementation){n(I,v.sibling),v=r(v,k.children||[]),v.return=I,I=v;break e}else{n(I,v);break}else e(I,v);v=v.sibling}v=sf(k,I.mode,R),v.return=I,I=v}return o(I);case Ni:return O=k._init,w(I,v,O(k._payload),R)}if(fa(k))return E(I,v,k,R);if(Yo(k))return b(I,v,k,R);Iu(I,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,v!==null&&v.tag===6?(n(I,v.sibling),v=r(v,k),v.return=I,I=v):(n(I,v),v=rf(k,I.mode,R),v.return=I,I=v),o(I)):n(I,v)}return w}var oo=VT(!0),FT=VT(!1),Dc=yr(null),Mc=null,Bs=null,Mm=null;function Om(){Mm=Bs=Mc=null}function Lm(t){var e=Dc.current;Me(Dc),t._currentValue=e}function lp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ys(t,e){Mc=t,Mm=Bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(Mm!==t)if(t={context:t,memoizedValue:e,next:null},Bs===null){if(Mc===null)throw Error(z(308));Bs=t,Mc.dependencies={lanes:0,firstContext:t}}else Bs=Bs.next=t;return e}var Ur=null;function Vm(t){Ur===null?Ur=[t]:Ur.push(t)}function jT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Vm(e)):(n.next=r.next,r.next=n),e.interleaved=n,pi(t,i)}function pi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Di=!1;function Fm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ji(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,_e&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,pi(t,n)}return r=i.interleaved,r===null?(e.next=e,Vm(i)):(e.next=r.next,r.next=e),i.interleaved=e,pi(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,bm(t,n)}}function rv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,i){var r=t.updateQueue;Di=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,b=a;switch(f=e,m=n,b.tag){case 1:if(E=b.payload,typeof E=="function"){d=E.call(m,d,f);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=b.payload,f=typeof E=="function"?E.call(m,d,f):E,f==null)break e;d=Ue({},d,f);break e;case 2:Di=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Zr|=o,t.lanes=o,t.memoizedState=d}}function sv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(z(191,r));r.call(i)}}}var Nl={},Un=yr(Nl),sl=yr(Nl),ol=yr(Nl);function Br(t){if(t===Nl)throw Error(z(174));return t}function jm(t,e){switch(Ae(ol,e),Ae(sl,t),Ae(Un,Nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zf(e,t)}Me(Un),Ae(Un,e)}function ao(){Me(Un),Me(sl),Me(ol)}function BT(t){Br(ol.current);var e=Br(Un.current),n=zf(e,t.type);e!==n&&(Ae(sl,t),Ae(Un,n))}function Um(t){sl.current===t&&(Me(Un),Me(sl))}var Ve=yr(0);function Lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xd=[];function Bm(){for(var t=0;t<Xd.length;t++)Xd[t]._workInProgressVersionPrimary=null;Xd.length=0}var tc=wi.ReactCurrentDispatcher,Jd=wi.ReactCurrentBatchConfig,Jr=0,Fe=null,Ye=null,it=null,Vc=!1,Ra=!1,al=0,K1=0;function vt(){throw Error(z(321))}function zm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function $m(t,e,n,i,r,s){if(Jr=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?X1:J1,t=n(i,r),Ra){s=0;do{if(Ra=!1,al=0,25<=s)throw Error(z(301));s+=1,it=Ye=null,e.updateQueue=null,tc.current=Z1,t=n(i,r)}while(Ra)}if(tc.current=Fc,e=Ye!==null&&Ye.next!==null,Jr=0,it=Ye=Fe=null,Vc=!1,e)throw Error(z(300));return t}function Wm(){var t=al!==0;return al=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Fe.memoizedState=it=t:it=it.next=t,it}function pn(){if(Ye===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=it===null?Fe.memoizedState:it.next;if(e!==null)it=e,Ye=t;else{if(t===null)throw Error(z(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},it===null?Fe.memoizedState=it=t:it=it.next=t}return it}function ll(t,e){return typeof e=="function"?e(t):e}function Zd(t){var e=pn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var i=Ye,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Jr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Fe.lanes|=h,Zr|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Sn(i,e.memoizedState)||(Ut=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Fe.lanes|=s,Zr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ef(t){var e=pn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Sn(s,e.memoizedState)||(Ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function zT(){}function $T(t,e){var n=Fe,i=pn(),r=e(),s=!Sn(i.memoizedState,r);if(s&&(i.memoizedState=r,Ut=!0),i=i.queue,Hm(qT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,ul(9,HT.bind(null,n,i,r,e),void 0,null),st===null)throw Error(z(349));Jr&30||WT(n,e,r)}return r}function WT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HT(t,e,n,i){e.value=n,e.getSnapshot=i,KT(e)&&GT(t)}function qT(t,e,n){return n(function(){KT(e)&&GT(t)})}function KT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function GT(t){var e=pi(t,1);e!==null&&bn(e,t,1,-1)}function ov(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:t},e.queue=t,t=t.dispatch=Y1.bind(null,Fe,t),[e.memoizedState,t]}function ul(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function QT(){return pn().memoizedState}function nc(t,e,n,i){var r=On();Fe.flags|=t,r.memoizedState=ul(1|e,n,void 0,i===void 0?null:i)}function Ph(t,e,n,i){var r=pn();i=i===void 0?null:i;var s=void 0;if(Ye!==null){var o=Ye.memoizedState;if(s=o.destroy,i!==null&&zm(i,o.deps)){r.memoizedState=ul(e,n,s,i);return}}Fe.flags|=t,r.memoizedState=ul(1|e,n,s,i)}function av(t,e){return nc(8390656,8,t,e)}function Hm(t,e){return Ph(2048,8,t,e)}function YT(t,e){return Ph(4,2,t,e)}function XT(t,e){return Ph(4,4,t,e)}function JT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZT(t,e,n){return n=n!=null?n.concat([t]):null,Ph(4,4,JT.bind(null,e,t),n)}function qm(){}function eb(t,e){var n=pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&zm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function tb(t,e){var n=pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&zm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function nb(t,e,n){return Jr&21?(Sn(n,e)||(n=aT(),Fe.lanes|=n,Zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function G1(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var i=Jd.transition;Jd.transition={};try{t(!1),e()}finally{Se=n,Jd.transition=i}}function ib(){return pn().memoizedState}function Q1(t,e,n){var i=er(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},rb(t))sb(e,n);else if(n=jT(t,e,n,i),n!==null){var r=Rt();bn(n,t,i,r),ob(n,e,i)}}function Y1(t,e,n){var i=er(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(rb(t))sb(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Sn(a,o)){var l=e.interleaved;l===null?(r.next=r,Vm(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=jT(t,e,r,i),n!==null&&(r=Rt(),bn(n,t,i,r),ob(n,e,i))}}function rb(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function sb(t,e){Ra=Vc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ob(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,bm(t,n)}}var Fc={readContext:fn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},X1={readContext:fn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:av,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,JT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=On();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Q1.bind(null,Fe,t),[i.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:ov,useDebugValue:qm,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=ov(!1),e=t[0];return t=G1.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Fe,r=On();if(Oe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),st===null)throw Error(z(349));Jr&30||WT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,av(qT.bind(null,i,s,t),[t]),i.flags|=2048,ul(9,HT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=On(),e=st.identifierPrefix;if(Oe){var n=oi,i=si;n=(i&~(1<<32-Tn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=al++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=K1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},J1={readContext:fn,useCallback:eb,useContext:fn,useEffect:Hm,useImperativeHandle:ZT,useInsertionEffect:YT,useLayoutEffect:XT,useMemo:tb,useReducer:Zd,useRef:QT,useState:function(){return Zd(ll)},useDebugValue:qm,useDeferredValue:function(t){var e=pn();return nb(e,Ye.memoizedState,t)},useTransition:function(){var t=Zd(ll)[0],e=pn().memoizedState;return[t,e]},useMutableSource:zT,useSyncExternalStore:$T,useId:ib,unstable_isNewReconciler:!1},Z1={readContext:fn,useCallback:eb,useContext:fn,useEffect:Hm,useImperativeHandle:ZT,useInsertionEffect:YT,useLayoutEffect:XT,useMemo:tb,useReducer:ef,useRef:QT,useState:function(){return ef(ll)},useDebugValue:qm,useDeferredValue:function(t){var e=pn();return Ye===null?e.memoizedState=t:nb(e,Ye.memoizedState,t)},useTransition:function(){var t=ef(ll)[0],e=pn().memoizedState;return[t,e]},useMutableSource:zT,useSyncExternalStore:$T,useId:ib,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function up(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rh={isMounted:function(t){return(t=t._reactInternals)?ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Rt(),r=er(t),s=ci(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ji(t,s,r),e!==null&&(bn(e,t,r,i),ec(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Rt(),r=er(t),s=ci(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ji(t,s,r),e!==null&&(bn(e,t,r,i),ec(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),i=er(t),r=ci(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ji(t,r,i),e!==null&&(bn(e,t,i,n),ec(e,t,i))}};function lv(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!tl(n,i)||!tl(r,s):!0}function ab(t,e,n){var i=!1,r=ur,s=e.contextType;return typeof s=="object"&&s!==null?s=fn(s):(r=$t(e)?Yr:St.current,i=e.contextTypes,s=(i=i!=null)?ro(t,r):ur),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function uv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Rh.enqueueReplaceState(e,e.state,null)}function cp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Fm(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=fn(s):(s=$t(e)?Yr:St.current,r.context=ro(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(up(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Rh.enqueueReplaceState(r,r.state,null),Oc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function lo(t,e){try{var n="",i=e;do n+=kC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eA=typeof WeakMap=="function"?WeakMap:Map;function lb(t,e,n){n=ci(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Uc||(Uc=!0,Ep=i),hp(t,e)},n}function ub(t,e,n){n=ci(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){hp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){hp(t,e),typeof i!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function cv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new eA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=pA.bind(null,t,e,n),e.then(t,t))}function hv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ci(-1,1),e.tag=2,Ji(n,e,1))),n.lanes|=1),t)}var tA=wi.ReactCurrentOwner,Ut=!1;function At(t,e,n,i){e.child=t===null?FT(e,null,n,i):oo(e,t.child,n,i)}function fv(t,e,n,i,r){n=n.render;var s=e.ref;return Ys(e,r),i=$m(t,e,n,i,s,r),n=Wm(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,mi(t,e,r)):(Oe&&n&&Rm(e),e.flags|=1,At(t,e,i,r),e.child)}function pv(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!eg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,cb(t,e,s,i,r)):(t=oc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:tl,n(o,i)&&t.ref===e.ref)return mi(t,e,r)}return e.flags|=1,t=tr(s,i),t.ref=e.ref,t.return=e,e.child=t}function cb(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(tl(s,i)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,mi(t,e,r)}return dp(t,e,n,i,r)}function hb(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae($s,Gt),Gt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae($s,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ae($s,Gt),Gt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ae($s,Gt),Gt|=i;return At(t,e,r,n),e.child}function db(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dp(t,e,n,i,r){var s=$t(n)?Yr:St.current;return s=ro(e,s),Ys(e,r),n=$m(t,e,n,i,s,r),i=Wm(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,mi(t,e,r)):(Oe&&i&&Rm(e),e.flags|=1,At(t,e,n,r),e.child)}function mv(t,e,n,i,r){if($t(n)){var s=!0;Pc(e)}else s=!1;if(Ys(e,r),e.stateNode===null)ic(t,e),ab(e,n,i),cp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=fn(u):(u=$t(n)?Yr:St.current,u=ro(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&uv(e,o,i,u),Di=!1;var f=e.memoizedState;o.state=f,Oc(e,i,o,r),l=e.memoizedState,a!==i||f!==l||zt.current||Di?(typeof h=="function"&&(up(e,n,h,i),l=e.memoizedState),(a=Di||lv(e,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,UT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:_n(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fn(l):(l=$t(n)?Yr:St.current,l=ro(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&uv(e,o,i,l),Di=!1,f=e.memoizedState,o.state=f,Oc(e,i,o,r);var E=e.memoizedState;a!==d||f!==E||zt.current||Di?(typeof m=="function"&&(up(e,n,m,i),E=e.memoizedState),(u=Di||lv(e,n,u,i,f,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=E),o.props=i,o.state=E,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return fp(t,e,n,i,s,r)}function fp(t,e,n,i,r,s){db(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&ev(e,n,!1),mi(t,e,s);i=e.stateNode,tA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=oo(e,t.child,null,s),e.child=oo(e,null,a,s)):At(t,e,a,s),e.memoizedState=i.state,r&&ev(e,n,!0),e.child}function fb(t){var e=t.stateNode;e.pendingContext?Z_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Z_(t,e.context,!1),jm(t,e.containerInfo)}function gv(t,e,n,i,r){return so(),Dm(r),e.flags|=256,At(t,e,n,i),e.child}var pp={dehydrated:null,treeContext:null,retryLane:0};function mp(t){return{baseLanes:t,cachePool:null,transitions:null}}function pb(t,e,n){var i=e.pendingProps,r=Ve.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ae(Ve,r&1),t===null)return ap(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Mh(o,i,0,null),t=Kr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mp(n),e.memoizedState=pp,t):Km(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return nA(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=tr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=tr(a,s):(s=Kr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?mp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=pp,i}return s=t.child,t=s.sibling,i=tr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Km(t,e){return e=Mh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Su(t,e,n,i){return i!==null&&Dm(i),oo(e,t.child,null,n),t=Km(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nA(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=tf(Error(z(422))),Su(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Mh({mode:"visible",children:i.children},r,0,null),s=Kr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&oo(e,t.child,null,o),e.child.memoizedState=mp(o),e.memoizedState=pp,s);if(!(e.mode&1))return Su(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(z(419)),i=tf(s,i,void 0),Su(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ut||a){if(i=st,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,pi(t,r),bn(i,t,r,-1))}return Zm(),i=tf(Error(z(421))),Su(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=mA.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Qt=Xi(r.nextSibling),Xt=e,Oe=!0,wn=null,t!==null&&(on[an++]=si,on[an++]=oi,on[an++]=Xr,si=t.id,oi=t.overflow,Xr=e),e=Km(e,i.children),e.flags|=4096,e)}function yv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),lp(t.return,e,n)}function nf(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function mb(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(At(t,e,i.children,n),i=Ve.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yv(t,n,e);else if(t.tag===19)yv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ae(Ve,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Lc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),nf(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Lc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}nf(e,!0,n,null,s);break;case"together":nf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iA(t,e,n){switch(e.tag){case 3:fb(e),so();break;case 5:BT(e);break;case 1:$t(e.type)&&Pc(e);break;case 4:jm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ae(Dc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ae(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?pb(t,e,n):(Ae(Ve,Ve.current&1),t=mi(t,e,n),t!==null?t.sibling:null);Ae(Ve,Ve.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return mb(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ae(Ve,Ve.current),i)break;return null;case 22:case 23:return e.lanes=0,hb(t,e,n)}return mi(t,e,n)}var gb,gp,yb,_b;gb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gp=function(){};yb=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Br(Un.current);var s=null;switch(n){case"input":r=Ff(t,r),i=Ff(t,i),s=[];break;case"select":r=Ue({},r,{value:void 0}),i=Ue({},i,{value:void 0}),s=[];break;case"textarea":r=Bf(t,r),i=Bf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Cc)}$f(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ga.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ga.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};_b=function(t,e,n,i){n!==i&&(e.flags|=4)};function na(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function rA(t,e,n){var i=e.pendingProps;switch(Nm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return $t(e.type)&&Ac(),wt(e),null;case 3:return i=e.stateNode,ao(),Me(zt),Me(St),Bm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(bu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(Ip(wn),wn=null))),gp(t,e),wt(e),null;case 5:Um(e);var r=Br(ol.current);if(n=e.type,t!==null&&e.stateNode!=null)yb(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(z(166));return wt(e),null}if(t=Br(Un.current),bu(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Vn]=e,i[rl]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",i),Ne("close",i);break;case"iframe":case"object":case"embed":Ne("load",i);break;case"video":case"audio":for(r=0;r<ma.length;r++)Ne(ma[r],i);break;case"source":Ne("error",i);break;case"img":case"image":case"link":Ne("error",i),Ne("load",i);break;case"details":Ne("toggle",i);break;case"input":x_(i,s),Ne("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",i);break;case"textarea":C_(i,s),Ne("invalid",i)}$f(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Tu(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Tu(i.textContent,a,t),r=["children",""+a]):Ga.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",i)}switch(n){case"input":pu(i),k_(i,s,!0);break;case"textarea":pu(i),A_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Cc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Vn]=e,t[rl]=i,gb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wf(n,i),n){case"dialog":Ne("cancel",t),Ne("close",t),r=i;break;case"iframe":case"object":case"embed":Ne("load",t),r=i;break;case"video":case"audio":for(r=0;r<ma.length;r++)Ne(ma[r],t);r=i;break;case"source":Ne("error",t),r=i;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),r=i;break;case"details":Ne("toggle",t),r=i;break;case"input":x_(t,i),r=Ff(t,i),Ne("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ue({},i,{value:void 0}),Ne("invalid",t);break;case"textarea":C_(t,i),r=Bf(t,i),Ne("invalid",t);break;default:r=i}$f(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?QE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qa(t,l):typeof l=="number"&&Qa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ga.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ne("scroll",t):l!=null&&ym(t,s,l,o))}switch(n){case"input":pu(t),k_(t,i,!1);break;case"textarea":pu(t),A_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+lr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?qs(t,!!i.multiple,s,!1):i.defaultValue!=null&&qs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Cc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)_b(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(z(166));if(n=Br(ol.current),Br(Un.current),bu(e)){if(i=e.stateNode,n=e.memoizedProps,i[Vn]=e,(s=i.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Tu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tu(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Vn]=e,e.stateNode=i}return wt(e),null;case 13:if(Me(Ve),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Qt!==null&&e.mode&1&&!(e.flags&128))LT(),so(),e.flags|=98560,s=!1;else if(s=bu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Vn]=e}else so(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),s=!1}else wn!==null&&(Ip(wn),wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?Ze===0&&(Ze=3):Zm())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return ao(),gp(t,e),t===null&&nl(e.stateNode.containerInfo),wt(e),null;case 10:return Lm(e.type._context),wt(e),null;case 17:return $t(e.type)&&Ac(),wt(e),null;case 19:if(Me(Ve),s=e.memoizedState,s===null)return wt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)na(s,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lc(t),o!==null){for(e.flags|=128,na(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Ve,Ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&He()>uo&&(e.flags|=128,i=!0,na(s,!1),e.lanes=4194304)}else{if(!i)if(t=Lc(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),na(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oe)return wt(e),null}else 2*He()-s.renderingStartTime>uo&&n!==1073741824&&(e.flags|=128,i=!0,na(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=He(),e.sibling=null,n=Ve.current,Ae(Ve,i?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return Jm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Gt&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function sA(t,e){switch(Nm(e),e.tag){case 1:return $t(e.type)&&Ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ao(),Me(zt),Me(St),Bm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Um(e),null;case 13:if(Me(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));so()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Ve),null;case 4:return ao(),null;case 10:return Lm(e.type._context),null;case 22:case 23:return Jm(),null;case 24:return null;default:return null}}var xu=!1,bt=!1,oA=typeof WeakSet=="function"?WeakSet:Set,K=null;function zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){$e(t,e,i)}else n.current=null}function yp(t,e,n){try{n()}catch(i){$e(t,e,i)}}var _v=!1;function aA(t,e){if(ep=Sc,t=bT(),Pm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tp={focusedElem:t,selectionRange:n},Sc=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var b=E.memoizedProps,w=E.memoizedState,I=e.stateNode,v=I.getSnapshotBeforeUpdate(e.elementType===e.type?b:_n(e.type,b),w);I.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){$e(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return E=_v,_v=!1,E}function Na(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&yp(e,n,s)}r=r.next}while(r!==i)}}function Nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function _p(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vb(t){var e=t.alternate;e!==null&&(t.alternate=null,vb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vn],delete e[rl],delete e[rp],delete e[$1],delete e[W1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wb(t){return t.tag===5||t.tag===3||t.tag===4}function vv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cc));else if(i!==4&&(t=t.child,t!==null))for(vp(t,e,n),t=t.sibling;t!==null;)vp(t,e,n),t=t.sibling}function wp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(wp(t,e,n),t=t.sibling;t!==null;)wp(t,e,n),t=t.sibling}var ut=null,vn=!1;function ki(t,e,n){for(n=n.child;n!==null;)Eb(t,e,n),n=n.sibling}function Eb(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Ih,n)}catch{}switch(n.tag){case 5:bt||zs(n,e);case 6:var i=ut,r=vn;ut=null,ki(t,e,n),ut=i,vn=r,ut!==null&&(vn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(vn?(t=ut,n=n.stateNode,t.nodeType===8?Qd(t.parentNode,n):t.nodeType===1&&Qd(t,n),Za(t)):Qd(ut,n.stateNode));break;case 4:i=ut,r=vn,ut=n.stateNode.containerInfo,vn=!0,ki(t,e,n),ut=i,vn=r;break;case 0:case 11:case 14:case 15:if(!bt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yp(n,e,o),r=r.next}while(r!==i)}ki(t,e,n);break;case 1:if(!bt&&(zs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){$e(n,e,a)}ki(t,e,n);break;case 21:ki(t,e,n);break;case 22:n.mode&1?(bt=(i=bt)||n.memoizedState!==null,ki(t,e,n),bt=i):ki(t,e,n);break;default:ki(t,e,n)}}function wv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oA),e.forEach(function(i){var r=gA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function yn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,vn=!1;break e;case 3:ut=a.stateNode.containerInfo,vn=!0;break e;case 4:ut=a.stateNode.containerInfo,vn=!0;break e}a=a.return}if(ut===null)throw Error(z(160));Eb(s,o,r),ut=null,vn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){$e(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Tb(e,t),e=e.sibling}function Tb(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),Rn(t),i&4){try{Na(3,t,t.return),Nh(3,t)}catch(b){$e(t,t.return,b)}try{Na(5,t,t.return)}catch(b){$e(t,t.return,b)}}break;case 1:yn(e,t),Rn(t),i&512&&n!==null&&zs(n,n.return);break;case 5:if(yn(e,t),Rn(t),i&512&&n!==null&&zs(n,n.return),t.flags&32){var r=t.stateNode;try{Qa(r,"")}catch(b){$e(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&WE(r,s),Wf(a,o);var u=Wf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?QE(r,d):h==="dangerouslySetInnerHTML"?KE(r,d):h==="children"?Qa(r,d):ym(r,h,d,u)}switch(a){case"input":jf(r,s);break;case"textarea":HE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?qs(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?qs(r,!!s.multiple,s.defaultValue,!0):qs(r,!!s.multiple,s.multiple?[]:"",!1))}r[rl]=s}catch(b){$e(t,t.return,b)}}break;case 6:if(yn(e,t),Rn(t),i&4){if(t.stateNode===null)throw Error(z(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(b){$e(t,t.return,b)}}break;case 3:if(yn(e,t),Rn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Za(e.containerInfo)}catch(b){$e(t,t.return,b)}break;case 4:yn(e,t),Rn(t);break;case 13:yn(e,t),Rn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ym=He())),i&4&&wv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(bt=(u=bt)||h,yn(e,t),bt=u):yn(e,t),Rn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(d=K=h;K!==null;){switch(f=K,m=f.child,f.tag){case 0:case 11:case 14:case 15:Na(4,f,f.return);break;case 1:zs(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(b){$e(i,n,b)}}break;case 5:zs(f,f.return);break;case 22:if(f.memoizedState!==null){Tv(d);continue}}m!==null?(m.return=f,K=m):Tv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=GE("display",o))}catch(b){$e(t,t.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){$e(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yn(e,t),Rn(t),i&4&&wv(t);break;case 21:break;default:yn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wb(n)){var i=n;break e}n=n.return}throw Error(z(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Qa(r,""),i.flags&=-33);var s=vv(t);wp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=vv(t);vp(t,a,o);break;default:throw Error(z(161))}}catch(l){$e(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lA(t,e,n){K=t,bb(t)}function bb(t,e,n){for(var i=(t.mode&1)!==0;K!==null;){var r=K,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||xu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||bt;a=xu;var u=bt;if(xu=o,(bt=l)&&!u)for(K=r;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?bv(r):l!==null?(l.return=o,K=l):bv(r);for(;s!==null;)K=s,bb(s),s=s.sibling;K=r,xu=a,bt=u}Ev(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,K=s):Ev(t)}}function Ev(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||Nh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!bt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sv(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Za(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}bt||e.flags&512&&_p(e)}catch(f){$e(e,e.return,f)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Tv(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function bv(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nh(4,e)}catch(l){$e(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){$e(e,r,l)}}var s=e.return;try{_p(e)}catch(l){$e(e,s,l)}break;case 5:var o=e.return;try{_p(e)}catch(l){$e(e,o,l)}}}catch(l){$e(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var uA=Math.ceil,jc=wi.ReactCurrentDispatcher,Gm=wi.ReactCurrentOwner,cn=wi.ReactCurrentBatchConfig,_e=0,st=null,Ge=null,ft=0,Gt=0,$s=yr(0),Ze=0,cl=null,Zr=0,Dh=0,Qm=0,Da=null,Ft=null,Ym=0,uo=1/0,ni=null,Uc=!1,Ep=null,Zi=null,ku=!1,zi=null,Bc=0,Ma=0,Tp=null,rc=-1,sc=0;function Rt(){return _e&6?He():rc!==-1?rc:rc=He()}function er(t){return t.mode&1?_e&2&&ft!==0?ft&-ft:q1.transition!==null?(sc===0&&(sc=aT()),sc):(t=Se,t!==0||(t=window.event,t=t===void 0?16:pT(t.type)),t):1}function bn(t,e,n,i){if(50<Ma)throw Ma=0,Tp=null,Error(z(185));Al(t,n,i),(!(_e&2)||t!==st)&&(t===st&&(!(_e&2)&&(Dh|=n),Ze===4&&Oi(t,ft)),Wt(t,i),n===1&&_e===0&&!(e.mode&1)&&(uo=He()+500,Ah&&_r()))}function Wt(t,e){var n=t.callbackNode;qC(t,e);var i=Ic(t,t===st?ft:0);if(i===0)n!==null&&N_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&N_(n),e===1)t.tag===0?H1(Iv.bind(null,t)):DT(Iv.bind(null,t)),B1(function(){!(_e&6)&&_r()}),n=null;else{switch(lT(i)){case 1:n=Tm;break;case 4:n=sT;break;case 16:n=bc;break;case 536870912:n=oT;break;default:n=bc}n=Rb(n,Ib.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ib(t,e){if(rc=-1,sc=0,_e&6)throw Error(z(327));var n=t.callbackNode;if(Xs()&&t.callbackNode!==n)return null;var i=Ic(t,t===st?ft:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=zc(t,i);else{e=i;var r=_e;_e|=2;var s=xb();(st!==t||ft!==e)&&(ni=null,uo=He()+500,qr(t,e));do try{dA();break}catch(a){Sb(t,a)}while(!0);Om(),jc.current=s,_e=r,Ge!==null?e=0:(st=null,ft=0,e=Ze)}if(e!==0){if(e===2&&(r=Qf(t),r!==0&&(i=r,e=bp(t,r))),e===1)throw n=cl,qr(t,0),Oi(t,i),Wt(t,He()),n;if(e===6)Oi(t,i);else{if(r=t.current.alternate,!(i&30)&&!cA(r)&&(e=zc(t,i),e===2&&(s=Qf(t),s!==0&&(i=s,e=bp(t,s))),e===1))throw n=cl,qr(t,0),Oi(t,i),Wt(t,He()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(z(345));case 2:Mr(t,Ft,ni);break;case 3:if(Oi(t,i),(i&130023424)===i&&(e=Ym+500-He(),10<e)){if(Ic(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Rt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ip(Mr.bind(null,t,Ft,ni),e);break}Mr(t,Ft,ni);break;case 4:if(Oi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Tn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=He()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*uA(i/1960))-i,10<i){t.timeoutHandle=ip(Mr.bind(null,t,Ft,ni),i);break}Mr(t,Ft,ni);break;case 5:Mr(t,Ft,ni);break;default:throw Error(z(329))}}}return Wt(t,He()),t.callbackNode===n?Ib.bind(null,t):null}function bp(t,e){var n=Da;return t.current.memoizedState.isDehydrated&&(qr(t,e).flags|=256),t=zc(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&Ip(e)),t}function Ip(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function cA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Sn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oi(t,e){for(e&=~Qm,e&=~Dh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tn(e),i=1<<n;t[n]=-1,e&=~i}}function Iv(t){if(_e&6)throw Error(z(327));Xs();var e=Ic(t,0);if(!(e&1))return Wt(t,He()),null;var n=zc(t,e);if(t.tag!==0&&n===2){var i=Qf(t);i!==0&&(e=i,n=bp(t,i))}if(n===1)throw n=cl,qr(t,0),Oi(t,e),Wt(t,He()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mr(t,Ft,ni),Wt(t,He()),null}function Xm(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(uo=He()+500,Ah&&_r())}}function es(t){zi!==null&&zi.tag===0&&!(_e&6)&&Xs();var e=_e;_e|=1;var n=cn.transition,i=Se;try{if(cn.transition=null,Se=1,t)return t()}finally{Se=i,cn.transition=n,_e=e,!(_e&6)&&_r()}}function Jm(){Gt=$s.current,Me($s)}function qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,U1(n)),Ge!==null)for(n=Ge.return;n!==null;){var i=n;switch(Nm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ac();break;case 3:ao(),Me(zt),Me(St),Bm();break;case 5:Um(i);break;case 4:ao();break;case 13:Me(Ve);break;case 19:Me(Ve);break;case 10:Lm(i.type._context);break;case 22:case 23:Jm()}n=n.return}if(st=t,Ge=t=tr(t.current,null),ft=Gt=e,Ze=0,cl=null,Qm=Dh=Zr=0,Ft=Da=null,Ur!==null){for(e=0;e<Ur.length;e++)if(n=Ur[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Ur=null}return t}function Sb(t,e){do{var n=Ge;try{if(Om(),tc.current=Fc,Vc){for(var i=Fe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Vc=!1}if(Jr=0,it=Ye=Fe=null,Ra=!1,al=0,Gm.current=null,n===null||n.return===null){Ze=1,cl=e,Ge=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=hv(o);if(m!==null){m.flags&=-257,dv(m,o,a,s,e),m.mode&1&&cv(s,u,e),e=m,l=u;var E=e.updateQueue;if(E===null){var b=new Set;b.add(l),e.updateQueue=b}else E.add(l);break e}else{if(!(e&1)){cv(s,u,e),Zm();break e}l=Error(z(426))}}else if(Oe&&a.mode&1){var w=hv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),dv(w,o,a,s,e),Dm(lo(l,a));break e}}s=l=lo(l,a),Ze!==4&&(Ze=2),Da===null?Da=[s]:Da.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=lb(s,l,e);rv(s,I);break e;case 1:a=l;var v=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Zi===null||!Zi.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=ub(s,a,e);rv(s,R);break e}}s=s.return}while(s!==null)}Cb(n)}catch(D){e=D,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function xb(){var t=jc.current;return jc.current=Fc,t===null?Fc:t}function Zm(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),st===null||!(Zr&268435455)&&!(Dh&268435455)||Oi(st,ft)}function zc(t,e){var n=_e;_e|=2;var i=xb();(st!==t||ft!==e)&&(ni=null,qr(t,e));do try{hA();break}catch(r){Sb(t,r)}while(!0);if(Om(),_e=n,jc.current=i,Ge!==null)throw Error(z(261));return st=null,ft=0,Ze}function hA(){for(;Ge!==null;)kb(Ge)}function dA(){for(;Ge!==null&&!VC();)kb(Ge)}function kb(t){var e=Pb(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?Cb(t):Ge=e,Gm.current=null}function Cb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sA(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ge=null;return}}else if(n=rA(n,e,Gt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Ze===0&&(Ze=5)}function Mr(t,e,n){var i=Se,r=cn.transition;try{cn.transition=null,Se=1,fA(t,e,n,i)}finally{cn.transition=r,Se=i}return null}function fA(t,e,n,i){do Xs();while(zi!==null);if(_e&6)throw Error(z(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(KC(t,s),t===st&&(Ge=st=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ku||(ku=!0,Rb(bc,function(){return Xs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cn.transition,cn.transition=null;var o=Se;Se=1;var a=_e;_e|=4,Gm.current=null,aA(t,n),Tb(n,t),D1(tp),Sc=!!ep,tp=ep=null,t.current=n,lA(n),FC(),_e=a,Se=o,cn.transition=s}else t.current=n;if(ku&&(ku=!1,zi=t,Bc=r),s=t.pendingLanes,s===0&&(Zi=null),BC(n.stateNode),Wt(t,He()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Uc)throw Uc=!1,t=Ep,Ep=null,t;return Bc&1&&t.tag!==0&&Xs(),s=t.pendingLanes,s&1?t===Tp?Ma++:(Ma=0,Tp=t):Ma=0,_r(),null}function Xs(){if(zi!==null){var t=lT(Bc),e=cn.transition,n=Se;try{if(cn.transition=null,Se=16>t?16:t,zi===null)var i=!1;else{if(t=zi,zi=null,Bc=0,_e&6)throw Error(z(331));var r=_e;for(_e|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(K=u;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Na(8,h,s)}var d=h.child;if(d!==null)d.return=h,K=d;else for(;K!==null;){h=K;var f=h.sibling,m=h.return;if(vb(h),h===u){K=null;break}if(f!==null){f.return=m,K=f;break}K=m}}}var E=s.alternate;if(E!==null){var b=E.child;if(b!==null){E.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Na(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,K=I;break e}K=s.return}}var v=t.current;for(K=v;K!==null;){o=K;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,K=k;else e:for(o=v;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nh(9,a)}}catch(D){$e(a,a.return,D)}if(a===o){K=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,K=R;break e}K=a.return}}if(_e=r,_r(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Ih,t)}catch{}i=!0}return i}finally{Se=n,cn.transition=e}}return!1}function Sv(t,e,n){e=lo(n,e),e=lb(t,e,1),t=Ji(t,e,1),e=Rt(),t!==null&&(Al(t,1,e),Wt(t,e))}function $e(t,e,n){if(t.tag===3)Sv(t,t,n);else for(;e!==null;){if(e.tag===3){Sv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Zi===null||!Zi.has(i))){t=lo(n,t),t=ub(e,t,1),e=Ji(e,t,1),t=Rt(),e!==null&&(Al(e,1,t),Wt(e,t));break}}e=e.return}}function pA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ft&n)===n&&(Ze===4||Ze===3&&(ft&130023424)===ft&&500>He()-Ym?qr(t,0):Qm|=n),Wt(t,e)}function Ab(t,e){e===0&&(t.mode&1?(e=yu,yu<<=1,!(yu&130023424)&&(yu=4194304)):e=1);var n=Rt();t=pi(t,e),t!==null&&(Al(t,e,n),Wt(t,n))}function mA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ab(t,n)}function gA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(z(314))}i!==null&&i.delete(e),Ab(t,n)}var Pb;Pb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,iA(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Oe&&e.flags&1048576&&MT(e,Nc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ic(t,e),t=e.pendingProps;var r=ro(e,St.current);Ys(e,n),r=$m(null,e,i,t,r,n);var s=Wm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(i)?(s=!0,Pc(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Fm(e),r.updater=Rh,e.stateNode=r,r._reactInternals=e,cp(e,i,t,n),e=fp(null,e,i,!0,s,n)):(e.tag=0,Oe&&s&&Rm(e),At(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ic(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=_A(i),t=_n(i,t),r){case 0:e=dp(null,e,i,t,n);break e;case 1:e=mv(null,e,i,t,n);break e;case 11:e=fv(null,e,i,t,n);break e;case 14:e=pv(null,e,i,_n(i.type,t),n);break e}throw Error(z(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_n(i,r),dp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_n(i,r),mv(t,e,i,r,n);case 3:e:{if(fb(e),t===null)throw Error(z(387));i=e.pendingProps,s=e.memoizedState,r=s.element,UT(t,e),Oc(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=lo(Error(z(423)),e),e=gv(t,e,i,n,r);break e}else if(i!==r){r=lo(Error(z(424)),e),e=gv(t,e,i,n,r);break e}else for(Qt=Xi(e.stateNode.containerInfo.firstChild),Xt=e,Oe=!0,wn=null,n=FT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),i===r){e=mi(t,e,n);break e}At(t,e,i,n)}e=e.child}return e;case 5:return BT(e),t===null&&ap(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,np(i,r)?o=null:s!==null&&np(i,s)&&(e.flags|=32),db(t,e),At(t,e,o,n),e.child;case 6:return t===null&&ap(e),null;case 13:return pb(t,e,n);case 4:return jm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=oo(e,null,i,n):At(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_n(i,r),fv(t,e,i,r,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ae(Dc,i._currentValue),i._currentValue=o,s!==null)if(Sn(s.value,o)){if(s.children===r.children&&!zt.current){e=mi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ci(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),lp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}At(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ys(e,n),r=fn(r),i=i(r),e.flags|=1,At(t,e,i,n),e.child;case 14:return i=e.type,r=_n(i,e.pendingProps),r=_n(i.type,r),pv(t,e,i,r,n);case 15:return cb(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_n(i,r),ic(t,e),e.tag=1,$t(i)?(t=!0,Pc(e)):t=!1,Ys(e,n),ab(e,i,r),cp(e,i,r,n),fp(null,e,i,!0,t,n);case 19:return mb(t,e,n);case 22:return hb(t,e,n)}throw Error(z(156,e.tag))};function Rb(t,e){return rT(t,e)}function yA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,e,n,i){return new yA(t,e,n,i)}function eg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _A(t){if(typeof t=="function")return eg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vm)return 11;if(t===wm)return 14}return 2}function tr(t,e){var n=t.alternate;return n===null?(n=ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")eg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ds:return Kr(n.children,r,s,e);case _m:o=8,r|=8;break;case Mf:return t=ln(12,n,e,r|2),t.elementType=Mf,t.lanes=s,t;case Of:return t=ln(13,n,e,r),t.elementType=Of,t.lanes=s,t;case Lf:return t=ln(19,n,e,r),t.elementType=Lf,t.lanes=s,t;case BE:return Mh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jE:o=10;break e;case UE:o=9;break e;case vm:o=11;break e;case wm:o=14;break e;case Ni:o=16,i=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=ln(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Kr(t,e,n,i){return t=ln(7,t,i,e),t.lanes=n,t}function Mh(t,e,n,i){return t=ln(22,t,i,e),t.elementType=BE,t.lanes=n,t.stateNode={isHidden:!1},t}function rf(t,e,n){return t=ln(6,t,null,e),t.lanes=n,t}function sf(t,e,n){return e=ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fd(0),this.expirationTimes=Fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function tg(t,e,n,i,r,s,o,a,l){return t=new vA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ln(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fm(s),t}function wA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Nb(t){if(!t)return ur;t=t._reactInternals;e:{if(ds(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if($t(n))return NT(t,n,e)}return e}function Db(t,e,n,i,r,s,o,a,l){return t=tg(n,i,!0,t,r,s,o,a,l),t.context=Nb(null),n=t.current,i=Rt(),r=er(n),s=ci(i,r),s.callback=e??null,Ji(n,s,r),t.current.lanes=r,Al(t,r,i),Wt(t,i),t}function Oh(t,e,n,i){var r=e.current,s=Rt(),o=er(r);return n=Nb(n),e.context===null?e.context=n:e.pendingContext=n,e=ci(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ji(r,e,o),t!==null&&(bn(t,r,o,s),ec(t,r,o)),o}function $c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ng(t,e){xv(t,e),(t=t.alternate)&&xv(t,e)}function EA(){return null}var Mb=typeof reportError=="function"?reportError:function(t){console.error(t)};function ig(t){this._internalRoot=t}Lh.prototype.render=ig.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Oh(t,e,null,null)};Lh.prototype.unmount=ig.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;es(function(){Oh(null,t,null,null)}),e[fi]=null}};function Lh(t){this._internalRoot=t}Lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=hT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mi.length&&e!==0&&e<Mi[n].priority;n++);Mi.splice(n,0,t),n===0&&fT(t)}};function rg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kv(){}function TA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=$c(o);s.call(u)}}var o=Db(e,i,t,0,null,!1,!1,"",kv);return t._reactRootContainer=o,t[fi]=o.current,nl(t.nodeType===8?t.parentNode:t),es(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=$c(l);a.call(u)}}var l=tg(t,0,!1,null,null,!1,!1,"",kv);return t._reactRootContainer=l,t[fi]=l.current,nl(t.nodeType===8?t.parentNode:t),es(function(){Oh(e,l,n,i)}),l}function Fh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=$c(o);a.call(l)}}Oh(e,o,t,r)}else o=TA(n,e,t,r,i);return $c(o)}uT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pa(e.pendingLanes);n!==0&&(bm(e,n|1),Wt(e,He()),!(_e&6)&&(uo=He()+500,_r()))}break;case 13:es(function(){var i=pi(t,1);if(i!==null){var r=Rt();bn(i,t,1,r)}}),ng(t,1)}};Im=function(t){if(t.tag===13){var e=pi(t,134217728);if(e!==null){var n=Rt();bn(e,t,134217728,n)}ng(t,134217728)}};cT=function(t){if(t.tag===13){var e=er(t),n=pi(t,e);if(n!==null){var i=Rt();bn(n,t,e,i)}ng(t,e)}};hT=function(){return Se};dT=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};qf=function(t,e,n){switch(e){case"input":if(jf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Ch(i);if(!r)throw Error(z(90));$E(i),jf(i,r)}}}break;case"textarea":HE(t,n);break;case"select":e=n.value,e!=null&&qs(t,!!n.multiple,e,!1)}};JE=Xm;ZE=es;var bA={usingClientEntryPoint:!1,Events:[Rl,Vs,Ch,YE,XE,Xm]},ia={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IA={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nT(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||EA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{Ih=Cu.inject(IA),jn=Cu}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bA;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rg(e))throw Error(z(200));return wA(t,e,null,n)};en.createRoot=function(t,e){if(!rg(t))throw Error(z(299));var n=!1,i="",r=Mb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=tg(t,1,!1,null,null,n,!1,i,r),t[fi]=e.current,nl(t.nodeType===8?t.parentNode:t),new ig(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=nT(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return es(t)};en.hydrate=function(t,e,n){if(!Vh(e))throw Error(z(200));return Fh(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!rg(t))throw Error(z(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Mb;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Db(e,null,t,1,n??null,r,!1,s,o),t[fi]=e.current,nl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Lh(e)};en.render=function(t,e,n){if(!Vh(e))throw Error(z(200));return Fh(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!Vh(t))throw Error(z(40));return t._reactRootContainer?(es(function(){Fh(null,null,t,!1,function(){t._reactRootContainer=null,t[fi]=null})}),!0):!1};en.unstable_batchedUpdates=Xm;en.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Vh(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Fh(t,e,n,!1,i)};en.version="18.3.1-next-f1338f8080-20240426";function Ob(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ob)}catch(t){console.error(t)}}Ob(),OE.exports=en;var SA=OE.exports,Cv=SA;Nf.createRoot=Cv.createRoot,Nf.hydrateRoot=Cv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hl.apply(this,arguments)}var $i;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($i||($i={}));const Av="popstate";function xA(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Sp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Wc(r)}return CA(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kA(){return Math.random().toString(36).substr(2,8)}function Pv(t,e){return{usr:t.state,key:t.key,idx:e}}function Sp(t,e,n,i){return n===void 0&&(n=null),hl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?So(e):e,{state:n,key:e&&e.key||i||kA()})}function Wc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function So(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function CA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=$i.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(hl({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=$i.Pop;let w=h(),I=w==null?null:w-u;u=w,l&&l({action:a,location:b.location,delta:I})}function f(w,I){a=$i.Push;let v=Sp(b.location,w,I);u=h()+1;let k=Pv(v,u),R=b.createHref(v);try{o.pushState(k,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(R)}s&&l&&l({action:a,location:b.location,delta:1})}function m(w,I){a=$i.Replace;let v=Sp(b.location,w,I);u=h();let k=Pv(v,u),R=b.createHref(v);o.replaceState(k,"",R),s&&l&&l({action:a,location:b.location,delta:0})}function E(w){let I=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof w=="string"?w:Wc(w);return v=v.replace(/ $/,"%20"),je(I,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,I)}let b={get action(){return a},get location(){return t(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Av,d),l=w,()=>{r.removeEventListener(Av,d),l=null}},createHref(w){return e(r,w)},createURL:E,encodeLocation(w){let I=E(w);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:f,replace:m,go(w){return o.go(w)}};return b}var Rv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Rv||(Rv={}));function AA(t,e,n){return n===void 0&&(n="/"),PA(t,e,n)}function PA(t,e,n,i){let r=typeof e=="string"?So(e):e,s=co(r.pathname||"/",n);if(s==null)return null;let o=Lb(t);RA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=zA(s);a=UA(o[l],u)}return a}function Lb(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(je(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=nr([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Lb(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:FA(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of Vb(s.path))r(s,o,l)}),e}function Vb(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=Vb(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function RA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const NA=/^:[\w-]+$/,DA=3,MA=2,OA=1,LA=10,VA=-2,Nv=t=>t==="*";function FA(t,e){let n=t.split("/"),i=n.length;return n.some(Nv)&&(i+=VA),e&&(i+=MA),n.filter(r=>!Nv(r)).reduce((r,s)=>r+(NA.test(s)?DA:s===""?OA:LA),i)}function jA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function UA(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=xp({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:nr([s,d.pathname]),pathnameBase:KA(nr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=nr([s,d.pathnameBase]))}return o}function xp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=BA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let b=a[d]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const E=a[d];return m&&!E?u[f]=void 0:u[f]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function BA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),sg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function zA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function co(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const $A=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WA=t=>$A.test(t);function HA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?So(t):t,s;if(n)if(WA(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),sg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Dv(n.substring(1),"/"):s=Dv(n,e)}else s=e;return{pathname:s,search:GA(i),hash:QA(r)}}function Dv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function of(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function og(t,e){let n=qA(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function ag(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=So(t):(r=hl({},t),je(!r.pathname||!r.pathname.includes("?"),of("?","pathname","search",r)),je(!r.pathname||!r.pathname.includes("#"),of("#","pathname","hash",r)),je(!r.search||!r.search.includes("#"),of("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=HA(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const nr=t=>t.join("/").replace(/\/\/+/g,"/"),KA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Fb=["post","put","patch","delete"];new Set(Fb);const XA=["get",...Fb];new Set(XA);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dl.apply(this,arguments)}const jh=M.createContext(null),jb=M.createContext(null),Gn=M.createContext(null),Uh=M.createContext(null),vr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Ub=M.createContext(null);function JA(t,e){let{relative:n}=e===void 0?{}:e;xo()||je(!1);let{basename:i,navigator:r}=M.useContext(Gn),{hash:s,pathname:o,search:a}=Bh(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:nr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function xo(){return M.useContext(Uh)!=null}function wr(){return xo()||je(!1),M.useContext(Uh).location}function Bb(t){M.useContext(Gn).static||M.useLayoutEffect(t)}function ko(){let{isDataRoute:t}=M.useContext(vr);return t?hP():ZA()}function ZA(){xo()||je(!1);let t=M.useContext(jh),{basename:e,future:n,navigator:i}=M.useContext(Gn),{matches:r}=M.useContext(vr),{pathname:s}=wr(),o=JSON.stringify(og(r,n.v7_relativeSplatPath)),a=M.useRef(!1);return Bb(()=>{a.current=!0}),M.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=ag(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:nr([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function Bh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=M.useContext(Gn),{matches:r}=M.useContext(vr),{pathname:s}=wr(),o=JSON.stringify(og(r,i.v7_relativeSplatPath));return M.useMemo(()=>ag(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function eP(t,e){return tP(t,e)}function tP(t,e,n,i){xo()||je(!1);let{navigator:r}=M.useContext(Gn),{matches:s}=M.useContext(vr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=wr(),h;if(e){var d;let w=typeof e=="string"?So(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||je(!1),h=w}else h=u;let f=h.pathname||"/",m=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let E=AA(t,{pathname:m}),b=oP(E&&E.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:nr([l,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:nr([l,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,i);return e&&b?M.createElement(Uh.Provider,{value:{location:dl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:$i.Pop}},b):b}function nP(){let t=cP(),e=YA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:r},n):null,null)}const iP=M.createElement(nP,null);class rP extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(vr.Provider,{value:this.props.routeContext},M.createElement(Ub.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sP(t){let{routeContext:e,match:n,children:i}=t,r=M.useContext(jh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(vr.Provider,{value:e},i)}function oP(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||je(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=n,E=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||E){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,E=!1,b=null,w=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,b=d.route.errorElement||iP,l&&(u<0&&f===0?(dP("route-fallback"),E=!0,w=null):u===f&&(E=!0,w=d.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,f+1)),v=()=>{let k;return m?k=b:E?k=w:d.route.Component?k=M.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=h,M.createElement(sP,{match:d,routeContext:{outlet:h,matches:I,isDataRoute:n!=null},children:k})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(rP,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:v(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):v()},null)}var zb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zb||{}),$b=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($b||{});function aP(t){let e=M.useContext(jh);return e||je(!1),e}function lP(t){let e=M.useContext(jb);return e||je(!1),e}function uP(t){let e=M.useContext(vr);return e||je(!1),e}function Wb(t){let e=uP(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function cP(){var t;let e=M.useContext(Ub),n=lP(),i=Wb();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function hP(){let{router:t}=aP(zb.UseNavigateStable),e=Wb($b.UseNavigateStable),n=M.useRef(!1);return Bb(()=>{n.current=!0}),M.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,dl({fromRouteId:e},s)))},[t,e])}const Mv={};function dP(t,e,n){Mv[t]||(Mv[t]=!0)}function fP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function kp(t){let{to:e,replace:n,state:i,relative:r}=t;xo()||je(!1);let{future:s,static:o}=M.useContext(Gn),{matches:a}=M.useContext(vr),{pathname:l}=wr(),u=ko(),h=ag(e,og(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return M.useEffect(()=>u(JSON.parse(d),{replace:n,state:i,relative:r}),[u,d,r,n,i]),null}function Dn(t){je(!1)}function pP(t){let{basename:e="/",children:n=null,location:i,navigationType:r=$i.Pop,navigator:s,static:o=!1,future:a}=t;xo()&&je(!1);let l=e.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:l,navigator:s,static:o,future:dl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=So(i));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:E="default"}=i,b=M.useMemo(()=>{let w=co(h,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:m,key:E},navigationType:r}},[l,h,d,f,m,E,r]);return b==null?null:M.createElement(Gn.Provider,{value:u},M.createElement(Uh.Provider,{children:n,value:b}))}function mP(t){let{children:e,location:n}=t;return eP(Cp(e),n)}new Promise(()=>{});function Cp(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(i,r)=>{if(!M.isValidElement(i))return;let s=[...e,r];if(i.type===M.Fragment){n.push.apply(n,Cp(i.props.children,s));return}i.type!==Dn&&je(!1),!i.props.index||!i.props.children||je(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Cp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hc.apply(this,arguments)}function Hb(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function gP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yP(t,e){return t.button===0&&(!e||e==="_self")&&!gP(t)}const _P=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],wP="6";try{window.__reactRouterVersion=wP}catch{}const EP=M.createContext({isTransitioning:!1}),TP="startTransition",Ov=pC[TP];function bP(t){let{basename:e,children:n,future:i,window:r}=t,s=M.useRef();s.current==null&&(s.current=xA({window:r,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=M.useCallback(d=>{u&&Ov?Ov(()=>l(d)):l(d)},[l,u]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.useEffect(()=>fP(i),[i]),M.createElement(pP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const IP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fl=M.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d}=e,f=Hb(e,_P),{basename:m}=M.useContext(Gn),E,b=!1;if(typeof u=="string"&&SP.test(u)&&(E=u,IP))try{let k=new URL(window.location.href),R=u.startsWith("//")?new URL(k.protocol+u):new URL(u),D=co(R.pathname,m);R.origin===k.origin&&D!=null?u=D+R.search+R.hash:b=!0}catch{}let w=JA(u,{relative:r}),I=kP(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function v(k){i&&i(k),k.defaultPrevented||I(k)}return M.createElement("a",Hc({},f,{href:E||w,onClick:b||s?i:v,ref:n,target:l}))}),Ss=M.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,d=Hb(e,vP),f=Bh(l,{relative:d.relative}),m=wr(),E=M.useContext(jb),{navigator:b,basename:w}=M.useContext(Gn),I=E!=null&&CP(f)&&u===!0,v=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,k=m.pathname,R=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(k=k.toLowerCase(),R=R?R.toLowerCase():null,v=v.toLowerCase()),R&&w&&(R=co(R,w)||R);const D=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=k===v||!o&&k.startsWith(v)&&k.charAt(D)==="/",T=R!=null&&(R===v||!o&&R.startsWith(v)&&R.charAt(v.length)==="/"),_={isActive:O,isPending:T,isTransitioning:I},x=O?i:void 0,C;typeof s=="function"?C=s(_):C=[s,O?"active":null,T?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(_):a;return M.createElement(fl,Hc({},d,{"aria-current":x,className:C,ref:n,style:P,to:l,viewTransition:u}),typeof h=="function"?h(_):h)});var Ap;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ap||(Ap={}));var Lv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lv||(Lv={}));function xP(t){let e=M.useContext(jh);return e||je(!1),e}function kP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ko(),u=wr(),h=Bh(t,{relative:o});return M.useCallback(d=>{if(yP(d,n)){d.preventDefault();let f=i!==void 0?i:Wc(u)===Wc(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,n,t,s,o,a])}function CP(t,e){e===void 0&&(e={});let n=M.useContext(EP);n==null&&je(!1);let{basename:i}=xP(Ap.useViewTransitionState),r=Bh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=co(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=co(n.nextLocation.pathname,i)||n.nextLocation.pathname;return xp(r.pathname,o)!=null||xp(r.pathname,s)!=null}var Vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},AP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||d==null)throw new PP;const f=s<<2|a>>4;if(i.push(f),u!==64){const m=a<<4&240|u>>2;if(i.push(m),d!==64){const E=u<<6&192|d;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RP=function(t){const e=qb(t);return Kb.encodeByteArray(e,!0)},qc=function(t){return RP(t).replace(/\./g,"")},Gb=function(t){try{return Kb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=()=>NP().__FIREBASE_DEFAULTS__,MP=()=>{if(typeof process>"u"||typeof Vv>"u")return;const t=Vv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gb(t[1]);return e&&JSON.parse(e)},zh=()=>{try{return DP()||MP()||OP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qb=t=>{var e,n;return(n=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},LP=t=>{const e=Qb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Yb=()=>{var t;return(t=zh())===null||t===void 0?void 0:t.config},Xb=t=>{var e;return(e=zh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qc(JSON.stringify(n)),qc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function UP(){var t;const e=(t=zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $P(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WP(){return!UP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zb(){try{return typeof indexedDB=="object"}catch{return!1}}function eI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function HP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="FirebaseError";class Pn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=qP,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fs.prototype.create)}}class fs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?KP(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Pn(r,a,i)}}function KP(t,e){return t.replace(GP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const GP=/\{\$([^}]+)}/g;function QP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Fv(s)&&Fv(o)){if(!Kc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Fv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ga(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ya(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YP(t,e){const n=new XP(t,e);return n.subscribe.bind(n)}class XP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");JP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=af),r.error===void 0&&(r.error=af),r.complete===void 0&&(r.complete=af);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function af(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=1e3,eR=2,tR=4*60*60*1e3,nR=.5;function jv(t,e=ZP,n=eR){const i=e*Math.pow(n,t),r=Math.round(nR*i*(Math.random()-.5)*2);return Math.min(tR,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t){return t&&t._delegate?t._delegate:t}class xn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new VP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sR(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rR(t){return t===Or?void 0:t}function sR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const aR={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},lR=me.INFO,uR={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},cR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=uR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $h{constructor(e){this.name=e,this._logLevel=lR,this._logHandler=cR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const hR=(t,e)=>e.some(n=>t instanceof n);let Uv,Bv;function dR(){return Uv||(Uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fR(){return Bv||(Bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tI=new WeakMap,Pp=new WeakMap,nI=new WeakMap,lf=new WeakMap,lg=new WeakMap;function pR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ir(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tI.set(n,t)}).catch(()=>{}),lg.set(e,t),e}function mR(t){if(Pp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Pp.set(t,e)}let Rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gR(t){Rp=t(Rp)}function yR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(uf(this),e,...n);return nI.set(i,e.sort?e.sort():[e]),ir(i)}:fR().includes(t)?function(...e){return t.apply(uf(this),e),ir(tI.get(this))}:function(...e){return ir(t.apply(uf(this),e))}}function _R(t){return typeof t=="function"?yR(t):(t instanceof IDBTransaction&&mR(t),hR(t,dR())?new Proxy(t,Rp):t)}function ir(t){if(t instanceof IDBRequest)return pR(t);if(lf.has(t))return lf.get(t);const e=_R(t);return e!==t&&(lf.set(t,e),lg.set(e,t)),e}const uf=t=>lg.get(t);function iI(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=ir(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ir(o.result),l.oldVersion,l.newVersion,ir(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const vR=["get","getKey","getAll","getAllKeys","count"],wR=["put","add","delete","clear"],cf=new Map;function zv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cf.get(e))return cf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=wR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||vR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return cf.set(e,s),s}gR(t=>({...t,get:(e,n,i)=>zv(e,n)||t.get(e,n,i),has:(e,n)=>!!zv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function TR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Np="@firebase/app",$v="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new $h("@firebase/app"),bR="@firebase/app-compat",IR="@firebase/analytics-compat",SR="@firebase/analytics",xR="@firebase/app-check-compat",kR="@firebase/app-check",CR="@firebase/auth",AR="@firebase/auth-compat",PR="@firebase/database",RR="@firebase/data-connect",NR="@firebase/database-compat",DR="@firebase/functions",MR="@firebase/functions-compat",OR="@firebase/installations",LR="@firebase/installations-compat",VR="@firebase/messaging",FR="@firebase/messaging-compat",jR="@firebase/performance",UR="@firebase/performance-compat",BR="@firebase/remote-config",zR="@firebase/remote-config-compat",$R="@firebase/storage",WR="@firebase/storage-compat",HR="@firebase/firestore",qR="@firebase/vertexai-preview",KR="@firebase/firestore-compat",GR="firebase",QR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="[DEFAULT]",YR={[Np]:"fire-core",[bR]:"fire-core-compat",[SR]:"fire-analytics",[IR]:"fire-analytics-compat",[kR]:"fire-app-check",[xR]:"fire-app-check-compat",[CR]:"fire-auth",[AR]:"fire-auth-compat",[PR]:"fire-rtdb",[RR]:"fire-data-connect",[NR]:"fire-rtdb-compat",[DR]:"fire-fn",[MR]:"fire-fn-compat",[OR]:"fire-iid",[LR]:"fire-iid-compat",[VR]:"fire-fcm",[FR]:"fire-fcm-compat",[jR]:"fire-perf",[UR]:"fire-perf-compat",[BR]:"fire-rc",[zR]:"fire-rc-compat",[$R]:"fire-gcs",[WR]:"fire-gcs-compat",[HR]:"fire-fst",[KR]:"fire-fst-compat",[qR]:"fire-vertex","fire-js":"fire-js",[GR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,XR=new Map,Mp=new Map;function Wv(t,e){try{t.container.addComponent(e)}catch(n){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hn(t){const e=t.name;if(Mp.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;Mp.set(e,t);for(const n of Gc.values())Wv(n,t);for(const n of XR.values())Wv(n,t);return!0}function Ml(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new fs("app","Firebase",JR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=QR;function rI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Dp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw rr.create("bad-app-name",{appName:String(r)});if(n||(n=Yb()),!n)throw rr.create("no-options");const s=Gc.get(r);if(s){if(Kc(n,s.options)&&Kc(i,s.config))return s;throw rr.create("duplicate-app",{appName:r})}const o=new oR(r);for(const l of Mp.values())o.addComponent(l);const a=new ZR(n,i,o);return Gc.set(r,a),a}function sI(t=Dp){const e=Gc.get(t);if(!e&&t===Dp&&Yb())return rI();if(!e)throw rr.create("no-app",{appName:t});return e}function hn(t,e,n){var i;let r=(i=YR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(a.join(" "));return}Hn(new xn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="firebase-heartbeat-database",tN=1,pl="firebase-heartbeat-store";let hf=null;function oI(){return hf||(hf=iI(eN,tN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pl)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),hf}async function nN(t){try{const n=(await oI()).transaction(pl),i=await n.objectStore(pl).get(aI(t));return await n.done,i}catch(e){if(e instanceof Pn)gi.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(n.message)}}}async function Hv(t,e){try{const i=(await oI()).transaction(pl,"readwrite");await i.objectStore(pl).put(e,aI(t)),await i.done}catch(n){if(n instanceof Pn)gi.warn(n.message);else{const i=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gi.warn(i.message)}}}function aI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=1024,rN=30*24*60*60*1e3;class sN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=rN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){gi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qv(),{heartbeatsToSend:i,unsentEntries:r}=oN(this._heartbeatsCache.heartbeats),s=qc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return gi.warn(n),""}}}function qv(){return new Date().toISOString().substring(0,10)}function oN(t,e=iN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Kv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Kv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class aN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zb()?eI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Hv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Hv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kv(t){return qc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){Hn(new xn("platform-logger",e=>new ER(e),"PRIVATE")),Hn(new xn("heartbeat",e=>new sN(e),"PRIVATE")),hn(Np,$v,t),hn(Np,$v,"esm2017"),hn("fire-js","")}lN("");function ug(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function lI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uN=lI,uI=new fs("auth","Firebase",lI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new $h("@firebase/auth");function cN(t,...e){Qc.logLevel<=me.WARN&&Qc.warn(`Auth (${Co}): ${t}`,...e)}function ac(t,...e){Qc.logLevel<=me.ERROR&&Qc.error(`Auth (${Co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,...e){throw cg(t,...e)}function Bn(t,...e){return cg(t,...e)}function cI(t,e,n){const i=Object.assign(Object.assign({},uN()),{[e]:n});return new fs("auth","Firebase",i).create(e,{appName:t.name})}function hi(t){return cI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return uI.create(t,...e)}function se(t,e,...n){if(!t)throw cg(e,...n)}function ai(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function yi(t,e){t||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hN(){return Gv()==="http:"||Gv()==="https:"}function Gv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hN()||Jb()||"connection"in navigator)?navigator.onLine:!0}function fN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){this.shortDelay=e,this.longDelay=n,yi(n>e,"Short delay should be less than long delay!"),this.isMobile=jP()||zP()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){yi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new Ol(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qn(t,e,n,i,r={}){return dI(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Dl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return BP()||(u.referrerPolicy="no-referrer"),hI.fetch()(fI(t,t.config.apiHost,n,a),u)})}async function dI(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},pN),e);try{const r=new yN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Au(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Au(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Au(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Au(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cI(t,h,u);kn(t,h)}}catch(r){if(r instanceof Pn)throw r;kn(t,"network-request-failed",{message:String(r)})}}async function Ll(t,e,n,i,r={}){const s=await Qn(t,e,n,i,r);return"mfaPendingCredential"in s&&kn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fI(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?hg(t.config,r):`${t.config.apiScheme}://${r}`}function gN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Bn(this.auth,"network-request-failed")),mN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Au(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Bn(t,e,i);return r.customData._tokenResponse=n,r}function Qv(t){return t!==void 0&&t.enterprise!==void 0}class _N{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function vN(t,e){return Qn(t,"GET","/v2/recaptchaConfig",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e){return Qn(t,"POST","/v1/accounts:delete",e)}async function pI(t,e){return Qn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EN(t,e=!1){const n=Le(t),i=await n.getIdToken(e),r=dg(i);se(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Oa(df(r.auth_time)),issuedAtTime:Oa(df(r.iat)),expirationTime:Oa(df(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function df(t){return Number(t)*1e3}function dg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ac("JWT malformed, contained fewer than 3 sections"),null;try{const r=Gb(n);return r?JSON.parse(r):(ac("Failed to decode base64 JWT payload"),null)}catch(r){return ac("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Yv(t){const e=dg(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Pn&&TN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function TN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ho(t,pI(n,{idToken:i}));se(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mI(s.providerUserInfo):[],a=SN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function IN(t){const e=Le(t);await Yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function mI(t){return t.map(e=>{var{providerId:n}=e,i=ug(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e){const n=await dI(t,{},async()=>{const i=Dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=fI(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hI.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kN(t,e){return Qn(t,"POST","/v2/accounts:revokeToken",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=Yv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await xN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Js;return i&&(se(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(se(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Js,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ho(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EN(this,e)}reload(){return IN(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Yc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await ho(this,wN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,I=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:k,emailVerified:R,isAnonymous:D,providerData:O,stsTokenManager:T}=n;se(k&&T,e,"internal-error");const _=Js.fromJSON(this.name,T);se(typeof k=="string",e,"internal-error"),Ci(d,e.name),Ci(f,e.name),se(typeof R=="boolean",e,"internal-error"),se(typeof D=="boolean",e,"internal-error"),Ci(m,e.name),Ci(E,e.name),Ci(b,e.name),Ci(w,e.name),Ci(I,e.name),Ci(v,e.name);const x=new li({uid:k,auth:e,email:f,emailVerified:R,displayName:d,isAnonymous:D,photoURL:E,phoneNumber:m,tenantId:b,stsTokenManager:_,createdAt:I,lastLoginAt:v});return O&&Array.isArray(O)&&(x.providerData=O.map(C=>Object.assign({},C))),w&&(x._redirectEventId=w),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new Js;r.updateFromServerResponse(n);const s=new li({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Yc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];se(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?mI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Js;a.updateFromIdToken(i);const l=new li({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Lp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;function ui(t){yi(t instanceof Function,"Expected a class definition");let e=Xv.get(t);return e?(yi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gI.type="NONE";const Jv=gI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e,n){return`firebase:${t}:${e}:${n}`}class Zs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=lc(this.userKey,r.apiKey,s),this.fullPersistenceKey=lc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Zs(ui(Jv),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||ui(Jv);const o=lc(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=li._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Zs(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Zs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TI(e))return"Blackberry";if(bI(e))return"Webos";if(_I(e))return"Safari";if((e.includes("chrome/")||vI(e))&&!e.includes("edge/"))return"Chrome";if(EI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function yI(t=xt()){return/firefox\//i.test(t)}function _I(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vI(t=xt()){return/crios\//i.test(t)}function wI(t=xt()){return/iemobile/i.test(t)}function EI(t=xt()){return/android/i.test(t)}function TI(t=xt()){return/blackberry/i.test(t)}function bI(t=xt()){return/webos/i.test(t)}function fg(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CN(t=xt()){var e;return fg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AN(){return $P()&&document.documentMode===10}function II(t=xt()){return fg(t)||EI(t)||bI(t)||TI(t)||/windows phone/i.test(t)||wI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t,e=[]){let n;switch(t){case"Browser":n=Zv(xt());break;case"Worker":n=`${Zv(xt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Co}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e={}){return Qn(t,"GET","/v2/passwordPolicy",Ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=6;class DN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:NN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e0(this),this.idTokenSubscription=new e0(this),this.beforeStateQueue=new PN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ui(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pI(this,{idToken:e}),i=await li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(hi(this));const n=e?Le(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RN(this),n=new DN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await kN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ui(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&cN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Er(t){return Le(t)}class e0{constructor(e){this.auth=e,this.observer=null,this.addObserver=YP(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ON(t){Wh=t}function xI(t){return Wh.loadJS(t)}function LN(){return Wh.recaptchaEnterpriseScript}function VN(){return Wh.gapiScript}function FN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const jN="recaptcha-enterprise",UN="NO_RECAPTCHA";class BN{constructor(e){this.type=jN,this.auth=Er(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{vN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new _N(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;Qv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(UN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&Qv(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=LN();l.length!==0&&(l+=a),xI(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function t0(t,e,n,i=!1){const r=new BN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Xc(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await t0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await t0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){const n=Ml(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Kc(s,e??{}))return r;kn(r,"already-initialized")}return n.initialize({options:e})}function $N(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function WN(t,e,n){const i=Er(t);se(i._canInitEmulator,i,"emulator-config-failed"),se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=kI(e),{host:o,port:a}=HN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),qN()}function kI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HN(t){const e=kI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:n0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:n0(o)}}}function n0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,n){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function KN(t,e){return Qn(t,"POST","/v1/accounts:update",e)}async function GN(t,e){return Qn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){return Ll(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))}async function YN(t,e){return Qn(t,"POST","/v1/accounts:sendOobCode",Ei(t,e))}async function XN(t,e){return YN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){return Ll(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}async function ZN(t,e){return Ll(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends pg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ml(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ml(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xc(e,n,"signInWithPassword",QN);case"emailLink":return JN(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xc(e,i,"signUpPassword",GN);case"emailLink":return ZN(e,{idToken:n,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t,e){return Ll(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="http://localhost";class ts extends pg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=ug(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new ts(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return eo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,eo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,eo(e,n)}buildRequest(){const e={requestUri:eD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nD(t){const e=ga(ya(t)).link,n=e?ga(ya(e)).deep_link_id:null,i=ga(ya(t)).deep_link_id;return(i?ga(ya(i)).link:null)||i||n||e||t}class mg{constructor(e){var n,i,r,s,o,a;const l=ga(ya(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=tD((r=l.mode)!==null&&r!==void 0?r:null);se(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=nD(e);try{return new mg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(){this.providerId=ps.PROVIDER_ID}static credential(e,n){return ml._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=mg.parseLink(n);return se(i,"argument-error"),ml._fromEmailAndCode(e,i.code,i.tenantId)}}ps.PROVIDER_ID="password";ps.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ps.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends CI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Vl{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Vi.credential(n,i)}catch{return null}}}Vi.GOOGLE_SIGN_IN_METHOD="google.com";Vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Vl{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Vl{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ji.credential(n,i)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e){return Ll(t,"POST","/v1/accounts:signUp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await li._fromIdTokenResponse(e,i,r),o=i0(i);return new ns({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=i0(i);return new ns({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function i0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends Pn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Jc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Jc(e,n,i,r)}}function AI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jc._fromErrorAndOperation(t,s,e,i):s})}async function rD(t,e,n=!1){const i=await ho(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ns._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(t,e,n=!1){const{auth:i}=t;if(Fn(i.app))return Promise.reject(hi(i));const r="reauthenticate";try{const s=await ho(t,AI(i,r,e,t),n);se(s.idToken,i,"internal-error");const o=dg(s.idToken);se(o,i,"internal-error");const{sub:a}=o;return se(t.uid===a,i,"user-mismatch"),ns._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&kn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(t,e,n=!1){if(Fn(t.app))return Promise.reject(hi(t));const i="signIn",r=await AI(t,i,e),s=await ns._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function sD(t,e){return RI(Er(t),e)}async function oD(t,e){return PI(Le(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(t){const e=Er(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aD(t,e,n){const i=Er(t);await Xc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",XN)}async function lD(t,e,n){if(Fn(t.app))return Promise.reject(hi(t));const i=Er(t),o=await Xc(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&NI(t),l}),a=await ns._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function uD(t,e,n){return Fn(t.app)?Promise.reject(hi(t)):sD(Le(t),ps.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&NI(t),i})}function cD(t,e){return hD(Le(t),null,e)}async function hD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await ho(t,KN(i,s));await t._updateTokensIfNecessary(o,!0)}function dD(t,e,n,i){return Le(t).onIdTokenChanged(e,n,i)}function fD(t,e,n){return Le(t).beforeAuthStateChanged(e,n)}function pD(t,e,n,i){return Le(t).onAuthStateChanged(e,n,i)}function mD(t){return Le(t).signOut()}const Zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zc,"1"),this.storage.removeItem(Zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=1e3,yD=10;class MI extends DI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=II(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);AN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,yD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},gD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}MI.type="LOCAL";const _D=MI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI extends DI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OI.type="SESSION";const LI=OI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Hh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await vD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=gg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return window}function ED(t){zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return typeof zn().WorkerGlobalScope<"u"&&typeof zn().importScripts=="function"}async function TD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ID(){return VI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="firebaseLocalStorageDb",SD=1,eh="firebaseLocalStorage",jI="fbase_key";class Fl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qh(t,e){return t.transaction([eh],e?"readwrite":"readonly").objectStore(eh)}function xD(){const t=indexedDB.deleteDatabase(FI);return new Fl(t).toPromise()}function Vp(){const t=indexedDB.open(FI,SD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(eh,{keyPath:jI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(eh)?e(i):(i.close(),await xD(),e(await Vp()))})})}async function r0(t,e,n){const i=qh(t,!0).put({[jI]:e,value:n});return new Fl(i).toPromise()}async function kD(t,e){const n=qh(t,!1).get(e),i=await new Fl(n).toPromise();return i===void 0?null:i.value}function s0(t,e){const n=qh(t,!0).delete(e);return new Fl(n).toPromise()}const CD=800,AD=3;class UI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>AD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hh._getInstance(ID()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TD(),!this.activeServiceWorker)return;this.sender=new wD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vp();return await r0(e,Zc,"1"),await s0(e,Zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>r0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>kD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>s0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=qh(r,!1).getAll();return new Fl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UI.type="LOCAL";const PD=UI;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t,e){return e?ui(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ND(t){return RI(t.auth,new yg(t),t.bypassAuthState)}function DD(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),PI(n,new yg(t),t.bypassAuthState)}async function MD(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),rD(n,new yg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ND;case"linkViaPopup":case"linkViaRedirect":return MD;case"reauthViaPopup":case"reauthViaRedirect":return DD;default:kn(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new Ol(2e3,1e4);class Ws extends BI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OD.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="pendingRedirect",uc=new Map;class VD extends BI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=uc.get(this.auth._key());if(!e){try{const i=await FD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FD(t,e){const n=BD(e),i=UD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function jD(t,e){uc.set(t._key(),e)}function UD(t){return ui(t._redirectPersistence)}function BD(t){return lc(LD,t.config.apiKey,t.name)}async function zD(t,e,n=!1){if(Fn(t.app))return Promise.reject(hi(t));const i=Er(t),r=RD(i,e),o=await new VD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=10*60*1e3;class WD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!zI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Bn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$D&&this.cachedEventUids.clear(),this.cachedEventUids.has(o0(e))}saveEventToCache(e){this.cachedEventUids.add(o0(e)),this.lastProcessedEventTime=Date.now()}}function o0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e={}){return Qn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GD=/^https?/;async function QD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qD(t);for(const n of e)try{if(YD(n))return}catch{}kn(t,"unauthorized-domain")}function YD(t){const e=Op(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!GD.test(n))return!1;if(KD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new Ol(3e4,6e4);function a0(){const t=zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JD(t){return new Promise((e,n)=>{var i,r,s;function o(){a0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{a0(),n(Bn(t,"network-request-failed"))},timeout:XD.get()})}if(!((r=(i=zn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=zn().gapi)===null||s===void 0)&&s.load)o();else{const a=FN("iframefcb");return zn()[a]=()=>{gapi.load?o():n(Bn(t,"network-request-failed"))},xI(`${VN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw cc=null,e})}let cc=null;function ZD(t){return cc=cc||JD(t),cc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=new Ol(5e3,15e3),tM="__/auth/iframe",nM="emulator/auth/iframe",iM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sM(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hg(e,nM):`https://${t.config.authDomain}/${tM}`,i={apiKey:e.apiKey,appName:t.name,v:Co},r=rM.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Dl(i).slice(1)}`}async function oM(t){const e=await ZD(t),n=zn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:sM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iM,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Bn(t,"network-request-failed"),a=zn().setTimeout(()=>{s(o)},eM.get());function l(){zn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lM=500,uM=600,cM="_blank",hM="http://localhost";class l0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dM(t,e,n,i=lM,r=uM){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},aM),{width:i.toString(),height:r.toString(),top:s,left:o}),u=xt().toLowerCase();n&&(a=vI(u)?cM:n),yI(u)&&(e=e||hM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,E])=>`${f}${m}=${E},`,"");if(CN(u)&&a!=="_self")return fM(e||"",a),new l0(null);const d=window.open(e||"",a,h);se(d,t,"popup-blocked");try{d.focus()}catch{}return new l0(d)}function fM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="__/auth/handler",mM="emulator/auth/handler",gM=encodeURIComponent("fac");async function u0(t,e,n,i,r,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Co,eventId:r};if(e instanceof CI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Vl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${gM}=${encodeURIComponent(l)}`:"";return`${yM(t)}?${Dl(a).slice(1)}${u}`}function yM({config:t}){return t.emulator?hg(t,mM):`https://${t.authDomain}/${pM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="webStorageSupport";class _M{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LI,this._completeRedirectFn=zD,this._overrideRedirectResult=jD}async _openPopup(e,n,i,r){var s;yi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await u0(e,n,i,Op(),r);return dM(e,o,gg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await u0(e,n,i,Op(),r);return ED(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(yi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await oM(e),i=new WD(e);return n.register("authEvent",r=>(se(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ff,{type:ff},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[ff];o!==void 0&&n(!!o),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return II()||_I()||fg()}}const vM=_M;var c0="@firebase/auth",h0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TM(t){Hn(new xn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SI(t)},u=new MN(i,r,s,l);return $N(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Hn(new xn("auth-internal",e=>{const n=Er(e.getProvider("auth").getImmediate());return(i=>new wM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hn(c0,h0,EM(t)),hn(c0,h0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=5*60,IM=Xb("authIdTokenMaxAge")||bM;let d0=null;const SM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>IM)return;const r=n==null?void 0:n.token;d0!==r&&(d0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function xM(t=sI()){const e=Ml(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zN(t,{popupRedirectResolver:vM,persistence:[PD,_D,LI]}),i=Xb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=SM(s.toString());fD(n,o,()=>o(n.currentUser)),dD(n,a=>o(a))}}const r=Qb("auth");return r&&WN(n,`http://${r}`),n}function kM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ON({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Bn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",kM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TM("Browser");var CM="firebase",AM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn(CM,AM,"app");var f0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,$I;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function x(){}x.prototype=_.prototype,T.D=_.prototype,T.prototype=new x,T.prototype.constructor=T,T.C=function(C,P,N){for(var A=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)A[ae-2]=arguments[ae];return _.prototype[P].apply(C,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,_,x){x||(x=0);var C=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)C[P]=_.charCodeAt(x++)|_.charCodeAt(x++)<<8|_.charCodeAt(x++)<<16|_.charCodeAt(x++)<<24;else for(P=0;16>P;++P)C[P]=_[x++]|_[x++]<<8|_[x++]<<16|_[x++]<<24;_=T.g[0],x=T.g[1],P=T.g[2];var N=T.g[3],A=_+(N^x&(P^N))+C[0]+3614090360&4294967295;_=x+(A<<7&4294967295|A>>>25),A=N+(P^_&(x^P))+C[1]+3905402710&4294967295,N=_+(A<<12&4294967295|A>>>20),A=P+(x^N&(_^x))+C[2]+606105819&4294967295,P=N+(A<<17&4294967295|A>>>15),A=x+(_^P&(N^_))+C[3]+3250441966&4294967295,x=P+(A<<22&4294967295|A>>>10),A=_+(N^x&(P^N))+C[4]+4118548399&4294967295,_=x+(A<<7&4294967295|A>>>25),A=N+(P^_&(x^P))+C[5]+1200080426&4294967295,N=_+(A<<12&4294967295|A>>>20),A=P+(x^N&(_^x))+C[6]+2821735955&4294967295,P=N+(A<<17&4294967295|A>>>15),A=x+(_^P&(N^_))+C[7]+4249261313&4294967295,x=P+(A<<22&4294967295|A>>>10),A=_+(N^x&(P^N))+C[8]+1770035416&4294967295,_=x+(A<<7&4294967295|A>>>25),A=N+(P^_&(x^P))+C[9]+2336552879&4294967295,N=_+(A<<12&4294967295|A>>>20),A=P+(x^N&(_^x))+C[10]+4294925233&4294967295,P=N+(A<<17&4294967295|A>>>15),A=x+(_^P&(N^_))+C[11]+2304563134&4294967295,x=P+(A<<22&4294967295|A>>>10),A=_+(N^x&(P^N))+C[12]+1804603682&4294967295,_=x+(A<<7&4294967295|A>>>25),A=N+(P^_&(x^P))+C[13]+4254626195&4294967295,N=_+(A<<12&4294967295|A>>>20),A=P+(x^N&(_^x))+C[14]+2792965006&4294967295,P=N+(A<<17&4294967295|A>>>15),A=x+(_^P&(N^_))+C[15]+1236535329&4294967295,x=P+(A<<22&4294967295|A>>>10),A=_+(P^N&(x^P))+C[1]+4129170786&4294967295,_=x+(A<<5&4294967295|A>>>27),A=N+(x^P&(_^x))+C[6]+3225465664&4294967295,N=_+(A<<9&4294967295|A>>>23),A=P+(_^x&(N^_))+C[11]+643717713&4294967295,P=N+(A<<14&4294967295|A>>>18),A=x+(N^_&(P^N))+C[0]+3921069994&4294967295,x=P+(A<<20&4294967295|A>>>12),A=_+(P^N&(x^P))+C[5]+3593408605&4294967295,_=x+(A<<5&4294967295|A>>>27),A=N+(x^P&(_^x))+C[10]+38016083&4294967295,N=_+(A<<9&4294967295|A>>>23),A=P+(_^x&(N^_))+C[15]+3634488961&4294967295,P=N+(A<<14&4294967295|A>>>18),A=x+(N^_&(P^N))+C[4]+3889429448&4294967295,x=P+(A<<20&4294967295|A>>>12),A=_+(P^N&(x^P))+C[9]+568446438&4294967295,_=x+(A<<5&4294967295|A>>>27),A=N+(x^P&(_^x))+C[14]+3275163606&4294967295,N=_+(A<<9&4294967295|A>>>23),A=P+(_^x&(N^_))+C[3]+4107603335&4294967295,P=N+(A<<14&4294967295|A>>>18),A=x+(N^_&(P^N))+C[8]+1163531501&4294967295,x=P+(A<<20&4294967295|A>>>12),A=_+(P^N&(x^P))+C[13]+2850285829&4294967295,_=x+(A<<5&4294967295|A>>>27),A=N+(x^P&(_^x))+C[2]+4243563512&4294967295,N=_+(A<<9&4294967295|A>>>23),A=P+(_^x&(N^_))+C[7]+1735328473&4294967295,P=N+(A<<14&4294967295|A>>>18),A=x+(N^_&(P^N))+C[12]+2368359562&4294967295,x=P+(A<<20&4294967295|A>>>12),A=_+(x^P^N)+C[5]+4294588738&4294967295,_=x+(A<<4&4294967295|A>>>28),A=N+(_^x^P)+C[8]+2272392833&4294967295,N=_+(A<<11&4294967295|A>>>21),A=P+(N^_^x)+C[11]+1839030562&4294967295,P=N+(A<<16&4294967295|A>>>16),A=x+(P^N^_)+C[14]+4259657740&4294967295,x=P+(A<<23&4294967295|A>>>9),A=_+(x^P^N)+C[1]+2763975236&4294967295,_=x+(A<<4&4294967295|A>>>28),A=N+(_^x^P)+C[4]+1272893353&4294967295,N=_+(A<<11&4294967295|A>>>21),A=P+(N^_^x)+C[7]+4139469664&4294967295,P=N+(A<<16&4294967295|A>>>16),A=x+(P^N^_)+C[10]+3200236656&4294967295,x=P+(A<<23&4294967295|A>>>9),A=_+(x^P^N)+C[13]+681279174&4294967295,_=x+(A<<4&4294967295|A>>>28),A=N+(_^x^P)+C[0]+3936430074&4294967295,N=_+(A<<11&4294967295|A>>>21),A=P+(N^_^x)+C[3]+3572445317&4294967295,P=N+(A<<16&4294967295|A>>>16),A=x+(P^N^_)+C[6]+76029189&4294967295,x=P+(A<<23&4294967295|A>>>9),A=_+(x^P^N)+C[9]+3654602809&4294967295,_=x+(A<<4&4294967295|A>>>28),A=N+(_^x^P)+C[12]+3873151461&4294967295,N=_+(A<<11&4294967295|A>>>21),A=P+(N^_^x)+C[15]+530742520&4294967295,P=N+(A<<16&4294967295|A>>>16),A=x+(P^N^_)+C[2]+3299628645&4294967295,x=P+(A<<23&4294967295|A>>>9),A=_+(P^(x|~N))+C[0]+4096336452&4294967295,_=x+(A<<6&4294967295|A>>>26),A=N+(x^(_|~P))+C[7]+1126891415&4294967295,N=_+(A<<10&4294967295|A>>>22),A=P+(_^(N|~x))+C[14]+2878612391&4294967295,P=N+(A<<15&4294967295|A>>>17),A=x+(N^(P|~_))+C[5]+4237533241&4294967295,x=P+(A<<21&4294967295|A>>>11),A=_+(P^(x|~N))+C[12]+1700485571&4294967295,_=x+(A<<6&4294967295|A>>>26),A=N+(x^(_|~P))+C[3]+2399980690&4294967295,N=_+(A<<10&4294967295|A>>>22),A=P+(_^(N|~x))+C[10]+4293915773&4294967295,P=N+(A<<15&4294967295|A>>>17),A=x+(N^(P|~_))+C[1]+2240044497&4294967295,x=P+(A<<21&4294967295|A>>>11),A=_+(P^(x|~N))+C[8]+1873313359&4294967295,_=x+(A<<6&4294967295|A>>>26),A=N+(x^(_|~P))+C[15]+4264355552&4294967295,N=_+(A<<10&4294967295|A>>>22),A=P+(_^(N|~x))+C[6]+2734768916&4294967295,P=N+(A<<15&4294967295|A>>>17),A=x+(N^(P|~_))+C[13]+1309151649&4294967295,x=P+(A<<21&4294967295|A>>>11),A=_+(P^(x|~N))+C[4]+4149444226&4294967295,_=x+(A<<6&4294967295|A>>>26),A=N+(x^(_|~P))+C[11]+3174756917&4294967295,N=_+(A<<10&4294967295|A>>>22),A=P+(_^(N|~x))+C[2]+718787259&4294967295,P=N+(A<<15&4294967295|A>>>17),A=x+(N^(P|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+N&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var x=_-this.blockSize,C=this.B,P=this.h,N=0;N<_;){if(P==0)for(;N<=x;)r(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<_;)if(C[P++]=T.charCodeAt(N++),P==this.blockSize){r(this,C),P=0;break}}else for(;N<_;)if(C[P++]=T[N++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var x=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=x&255,x/=256;for(this.u(T),T=Array(16),_=x=0;4>_;++_)for(var C=0;32>C;C+=8)T[x++]=this.g[_]>>>C&255;return T};function s(T,_){var x=a;return Object.prototype.hasOwnProperty.call(x,T)?x[T]:x[T]=_(T)}function o(T,_){this.h=_;for(var x=[],C=!0,P=T.length-1;0<=P;P--){var N=T[P]|0;C&&N==_||(x[P]=N,C=!1)}this.g=x}var a={};function l(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return w(u(-T));for(var _=[],x=1,C=0;T>=x;C++)_[C]=T/x|0,x*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return w(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=u(Math.pow(_,8)),C=d,P=0;P<T.length;P+=8){var N=Math.min(8,T.length-P),A=parseInt(T.substring(P,P+N),_);8>N?(N=u(Math.pow(_,N)),C=C.j(N).add(u(A))):(C=C.j(x),C=C.add(u(A)))}return C}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-w(this).m();for(var T=0,_=1,x=0;x<this.g.length;x++){var C=this.i(x);T+=(0<=C?C:4294967296+C)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(b(this))return"-"+w(this).toString(T);for(var _=u(Math.pow(T,6)),x=this,C="";;){var P=R(x,_).g;x=I(x,P.j(_));var N=((0<x.g.length?x.g[0]:x.h)>>>0).toString(T);if(x=P,E(x))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function b(T){return T.h==-1}t.l=function(T){return T=I(this,T),b(T)?-1:E(T)?0:1};function w(T){for(var _=T.g.length,x=[],C=0;C<_;C++)x[C]=~T.g[C];return new o(x,~T.h).add(f)}t.abs=function(){return b(this)?w(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],C=0,P=0;P<=_;P++){var N=C+(this.i(P)&65535)+(T.i(P)&65535),A=(N>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);C=A>>>16,N&=65535,A&=65535,x[P]=A<<16|N}return new o(x,x[x.length-1]&-2147483648?-1:0)};function I(T,_){return T.add(w(_))}t.j=function(T){if(E(this)||E(T))return d;if(b(this))return b(T)?w(this).j(w(T)):w(w(this).j(T));if(b(T))return w(this.j(w(T)));if(0>this.l(m)&&0>T.l(m))return u(this.m()*T.m());for(var _=this.g.length+T.g.length,x=[],C=0;C<2*_;C++)x[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<T.g.length;P++){var N=this.i(C)>>>16,A=this.i(C)&65535,ae=T.i(P)>>>16,te=T.i(P)&65535;x[2*C+2*P]+=A*te,v(x,2*C+2*P),x[2*C+2*P+1]+=N*te,v(x,2*C+2*P+1),x[2*C+2*P+1]+=A*ae,v(x,2*C+2*P+1),x[2*C+2*P+2]+=N*ae,v(x,2*C+2*P+2)}for(C=0;C<_;C++)x[C]=x[2*C+1]<<16|x[2*C];for(C=_;C<2*_;C++)x[C]=0;return new o(x,0)};function v(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function k(T,_){this.g=T,this.h=_}function R(T,_){if(E(_))throw Error("division by zero");if(E(T))return new k(d,d);if(b(T))return _=R(w(T),_),new k(w(_.g),w(_.h));if(b(_))return _=R(T,w(_)),new k(w(_.g),_.h);if(30<T.g.length){if(b(T)||b(_))throw Error("slowDivide_ only works with positive integers.");for(var x=f,C=_;0>=C.l(T);)x=D(x),C=D(C);var P=O(x,1),N=O(C,1);for(C=O(C,2),x=O(x,2);!E(C);){var A=N.add(C);0>=A.l(T)&&(P=P.add(x),N=A),C=O(C,1),x=O(x,1)}return _=I(T,P.j(_)),new k(P,_)}for(P=d;0<=T.l(_);){for(x=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(x)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=u(x),A=N.j(_);b(A)||0<A.l(T);)x-=C,N=u(x),A=N.j(_);E(N)&&(N=f),P=P.add(N),T=I(T,A)}return new k(P,T)}t.A=function(T){return R(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)&T.i(C);return new o(x,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)|T.i(C);return new o(x,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)^T.i(C);return new o(x,this.h^T.h)};function D(T){for(var _=T.g.length+1,x=[],C=0;C<_;C++)x[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(x,T.h)}function O(T,_){var x=_>>5;_%=32;for(var C=T.g.length-x,P=[],N=0;N<C;N++)P[N]=0<_?T.i(N+x)>>>_|T.i(N+x+1)<<32-_:T.i(N+x);return new o(P,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,$I=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Gr=o}).apply(typeof f0<"u"?f0:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WI,_a,HI,hc,Fp,qI,KI,GI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,g){return c==Array.prototype||c==Object.prototype||(c[p]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var p=0;p<c.length;++p){var g=c[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(c,p){if(p)e:{var g=i;c=c.split(".");for(var S=0;S<c.length-1;S++){var L=c[S];if(!(L in g))break e;g=g[L]}c=c[c.length-1],S=g[c],p=p(S),p!=S&&p!=null&&e(g,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var g=0,S=!1,L={next:function(){if(!S&&g<c.length){var V=g++;return{value:p(V,c[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(c){return c||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,g){return c.call.apply(c.bind,arguments)}function d(c,p,g){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function f(c,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(c,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function E(c,p){function g(){}g.prototype=p.prototype,c.aa=p.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(S,L,V){for(var W=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)W[ke-2]=arguments[ke];return p.prototype[L].apply(S,W)}}function b(c){const p=c.length;if(0<p){const g=Array(p);for(let S=0;S<p;S++)g[S]=c[S];return g}return[]}function w(c,p){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=c.length||0,V=S.length||0;c.length=L+V;for(let W=0;W<V;W++)c[L+W]=S[W]}else c.push(S)}}class I{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(c){return/^[\s\xa0]*$/.test(c)}function k(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var D=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function O(c,p,g){for(const S in c)p.call(g,c[S],S,c)}function T(c,p){for(const g in c)p.call(void 0,c[g],g,c)}function _(c){const p={};for(const g in c)p[g]=c[g];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,p){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)c[g]=S[g];for(let V=0;V<x.length;V++)g=x[V],Object.prototype.hasOwnProperty.call(S,g)&&(c[g]=S[g])}}function P(c){var p=1;c=c.split(":");const g=[];for(;0<p&&c.length;)g.push(c.shift()),p--;return c.length&&g.push(c.join(":")),g}function N(c){a.setTimeout(()=>{throw c},0)}function A(){var c=Q;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ae{constructor(){this.h=this.g=null}add(p,g){const S=te.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var te=new I(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,$=!1,Q=new ae,X=()=>{const c=a.Promise.resolve(void 0);pe=()=>{c.then(U)}};var U=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(g){N(g)}var p=te;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}$=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return c}();function le(c,p){if(H.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(D){e:{try{R(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=c.fromElement:g=="mouseout"&&(p=c.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Z[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&le.aa.h.call(this)}}E(le,H);var Z={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),nn=0;function br(c,p,g,S,L){this.listener=c,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=L,this.key=++nn,this.da=this.fa=!1}function ot(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ot(c){this.src=c,this.g={},this.h=0}Ot.prototype.add=function(c,p,g,S,L){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var W=ce(c,p,S,L);return-1<W?(p=c[W],g||(p.fa=!1)):(p=new br(p,this.src,V,!!S,L),p.fa=g,c.push(p)),p};function q(c,p){var g=p.type;if(g in c.g){var S=c.g[g],L=Array.prototype.indexOf.call(S,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(S,L,1),V&&(ot(p),c.g[g].length==0&&(delete c.g[g],c.h--))}}function ce(c,p,g,S){for(var L=0;L<c.length;++L){var V=c[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==S)return L}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),Lt={};function bi(c,p,g,S,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)bi(c,p[V],g,S,L);return null}return g=Lo(g),c&&c[xe]?c.K(p,g,u(S)?!!S.capture:!1,L):rn(c,p,g,!1,S,L)}function rn(c,p,g,S,L,V){if(!p)throw Error("Invalid event type");var W=u(L)?!!L.capture:!!L,ke=ee(c);if(ke||(c[tt]=ke=new Ot(c)),g=ke.add(p,g,S,W,V),g.proxy)return g;if(S=Ql(),g.proxy=S,S.src=c,S.listener=g,c.addEventListener)J||(L=W),L===void 0&&(L=!1),c.addEventListener(p.toString(),S,L);else if(c.attachEvent)c.attachEvent(Oo(p.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ql(){function c(g){return p.call(c.src,c.listener,g)}const p=gd;return c}function Mo(c,p,g,S,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)Mo(c,p[V],g,S,L);else S=u(S)?!!S.capture:!!S,g=Lo(g),c&&c[xe]?(c=c.i,p=String(p).toString(),p in c.g&&(V=c.g[p],g=ce(V,g,S,L),-1<g&&(ot(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete c.g[p],c.h--)))):c&&(c=ee(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ce(p,g,S,L)),(g=-1<c?p[c]:null)&&_s(g))}function _s(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[xe])q(p.i,c);else{var g=c.type,S=c.proxy;p.removeEventListener?p.removeEventListener(g,S,c.capture):p.detachEvent?p.detachEvent(Oo(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=ee(p))?(q(g,c),g.h==0&&(g.src=null,p[tt]=null)):ot(c)}}}function Oo(c){return c in Lt?Lt[c]:Lt[c]="on"+c}function gd(c,p){if(c.da)c=!0;else{p=new le(p,this);var g=c.listener,S=c.ha||c.src;c.fa&&_s(c),c=g.call(S,p)}return c}function ee(c){return c=c[tt],c instanceof Ot?c:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lo(c){return typeof c=="function"?c:(c[vs]||(c[vs]=function(p){return c.handleEvent(p)}),c[vs])}function Qe(){F.call(this),this.i=new Ot(this),this.M=this,this.F=null}E(Qe,F),Qe.prototype[xe]=!0,Qe.prototype.removeEventListener=function(c,p,g,S){Mo(this,c,p,g,S)};function be(c,p){var g,S=c.F;if(S)for(g=[];S;S=S.F)g.push(S);if(c=c.M,S=p.type||p,typeof p=="string")p=new H(p,c);else if(p instanceof H)p.target=p.target||c;else{var L=p;p=new H(S,c),C(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var W=p.g=g[V];L=Yl(W,S,!0,p)&&L}if(W=p.g=c,L=Yl(W,S,!0,p)&&L,L=Yl(W,S,!1,p)&&L,g)for(V=0;V<g.length;V++)W=p.g=g[V],L=Yl(W,S,!1,p)&&L}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var g=c.g[p],S=0;S<g.length;S++)ot(g[S]);delete c.g[p],c.h--}}this.F=null},Qe.prototype.K=function(c,p,g,S){return this.i.add(String(c),p,!1,g,S)},Qe.prototype.L=function(c,p,g,S){return this.i.add(String(c),p,!0,g,S)};function Yl(c,p,g,S){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var W=p[V];if(W&&!W.da&&W.capture==g){var ke=W.listener,at=W.ha||W.src;W.fa&&q(c.i,W),L=ke.call(at,S)!==!1&&L}}return L&&!S.defaultPrevented}function Sy(c,p,g){if(typeof c=="function")g&&(c=f(c,g));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function xy(c){c.g=Sy(()=>{c.g=null,c.i&&(c.i=!1,xy(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class bk extends F{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:xy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vo(c){F.call(this),this.h=c,this.g={}}E(Vo,F);var ky=[];function Cy(c){O(c.g,function(p,g){this.g.hasOwnProperty(g)&&_s(p)},c),c.g={}}Vo.prototype.N=function(){Vo.aa.N.call(this),Cy(this)},Vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yd=a.JSON.stringify,Ik=a.JSON.parse,Sk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function _d(){}_d.prototype.h=null;function Ay(c){return c.h||(c.h=c.i())}function Py(){}var Fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vd(){H.call(this,"d")}E(vd,H);function wd(){H.call(this,"c")}E(wd,H);var Ir={},Ry=null;function Xl(){return Ry=Ry||new Qe}Ir.La="serverreachability";function Ny(c){H.call(this,Ir.La,c)}E(Ny,H);function jo(c){const p=Xl();be(p,new Ny(p))}Ir.STAT_EVENT="statevent";function Dy(c,p){H.call(this,Ir.STAT_EVENT,c),this.stat=p}E(Dy,H);function kt(c){const p=Xl();be(p,new Dy(p,c))}Ir.Ma="timingevent";function My(c,p){H.call(this,Ir.Ma,c),this.size=p}E(My,H);function Uo(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function Bo(){this.g=!0}Bo.prototype.xa=function(){this.g=!1};function xk(c,p,g,S,L,V){c.info(function(){if(c.g)if(V)for(var W="",ke=V.split("&"),at=0;at<ke.length;at++){var we=ke[at].split("=");if(1<we.length){var yt=we[0];we=we[1];var _t=yt.split("_");W=2<=_t.length&&_t[1]=="type"?W+(yt+"="+we+"&"):W+(yt+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+p+`
`+g+`
`+W})}function kk(c,p,g,S,L,V,W){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+W})}function ws(c,p,g,S){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ak(c,g)+(S?" "+S:"")})}function Ck(c,p){c.info(function(){return"TIMEOUT: "+p})}Bo.prototype.info=function(){};function Ak(c,p){if(!c.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var S=g[c];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<L.length;W++)L[W]=""}}}}return yd(g)}catch{return p}}var Jl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ed;function Zl(){}E(Zl,_d),Zl.prototype.g=function(){return new XMLHttpRequest},Zl.prototype.i=function(){return{}},Ed=new Zl;function Ii(c,p,g,S){this.j=c,this.i=p,this.l=g,this.R=S||1,this.U=new Vo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ly}function Ly(){this.i=null,this.g="",this.h=!1}var Vy={},Td={};function bd(c,p,g){c.L=1,c.v=iu(Yn(p)),c.m=g,c.P=!0,Fy(c,null)}function Fy(c,p){c.F=Date.now(),eu(c),c.A=Yn(c.v);var g=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Jy(g.i,"t",S),c.C=0,g=c.j.J,c.h=new Ly,c.g=g_(c.j,g?p:null,!c.m),0<c.O&&(c.M=new bk(f(c.Y,c,c.g),c.O)),p=c.U,g=c.g,S=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(ky[0]=L.toString()),L=ky);for(var V=0;V<L.length;V++){var W=bi(g,L[V],S||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),jo(),xk(c.i,c.u,c.A,c.l,c.R,c.m)}Ii.prototype.ca=function(c){c=c.target;const p=this.M;p&&Xn(c)==3?p.j():this.Y(c)},Ii.prototype.Y=function(c){try{if(c==this.g)e:{const _t=Xn(this.g);var p=this.g.Ba();const bs=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||s_(this.g)))){this.J||_t!=4||p==7||(p==8||0>=bs?jo(3):jo(2)),Id(this);var g=this.g.Z();this.X=g;t:if(jy(this)){var S=s_(this.g);c="";var L=S.length,V=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),zo(this);var W="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(S[p],{stream:!(V&&p==L-1)});S.length=0,this.h.g+=c,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,kk(this.i,this.u,this.A,this.l,this.R,_t,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,at=this.g;if((ke=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ke)){var we=ke;break t}}we=null}if(g=we)ws(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sd(this,g);else{this.o=!1,this.s=3,kt(12),Sr(this),zo(this);break e}}if(this.P){g=!0;let gn;for(;!this.J&&this.C<W.length;)if(gn=Pk(this,W),gn==Td){_t==4&&(this.s=4,kt(14),g=!1),ws(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Vy){this.s=4,kt(15),ws(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else ws(this.i,this.l,gn,null),Sd(this,gn);if(jy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||W.length!=0||this.h.h||(this.s=1,kt(16),g=!1),this.o=this.o&&g,!g)ws(this.i,this.l,W,"[Invalid Chunked Response]"),Sr(this),zo(this);else if(0<W.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Rd(yt),yt.M=!0,kt(11))}}else ws(this.i,this.l,W,null),Sd(this,W);_t==4&&Sr(this),this.o&&!this.J&&(_t==4?d_(this.j,this):(this.o=!1,eu(this)))}else Kk(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Sr(this),zo(this)}}}catch{}finally{}};function jy(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Pk(c,p){var g=c.C,S=p.indexOf(`
`,g);return S==-1?Td:(g=Number(p.substring(g,S)),isNaN(g)?Vy:(S+=1,S+g>p.length?Td:(p=p.slice(S,S+g),c.C=S+g,p)))}Ii.prototype.cancel=function(){this.J=!0,Sr(this)};function eu(c){c.S=Date.now()+c.I,Uy(c,c.I)}function Uy(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Uo(f(c.ba,c),p)}function Id(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ii.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ck(this.i,this.A),this.L!=2&&(jo(),kt(17)),Sr(this),this.s=2,zo(this)):Uy(this,this.S-c)};function zo(c){c.j.G==0||c.J||d_(c.j,c)}function Sr(c){Id(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Cy(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Sd(c,p){try{var g=c.j;if(g.G!=0&&(g.g==c||xd(g.h,c))){if(!c.K&&xd(g.h,c)&&g.G==3){try{var S=g.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)uu(g),au(g);else break e;Pd(g),kt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Uo(f(g.Za,g),6e3));if(1>=$y(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else kr(g,11)}else if((c.K||g.g==c)&&uu(g),!v(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let we=L[p];if(g.T=we[0],we=we[1],g.G==2)if(we[0]=="c"){g.K=we[1],g.ia=we[2];const yt=we[3];yt!=null&&(g.la=yt,g.j.info("VER="+g.la));const _t=we[4];_t!=null&&(g.Aa=_t,g.j.info("SVER="+g.Aa));const bs=we[5];bs!=null&&typeof bs=="number"&&0<bs&&(S=1.5*bs,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const gn=c.g;if(gn){const hu=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hu){var V=S.h;V.g||hu.indexOf("spdy")==-1&&hu.indexOf("quic")==-1&&hu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(kd(V,V.h),V.h=null))}if(S.D){const Nd=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nd&&(S.ya=Nd,Re(S.I,S.D,Nd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var W=c;if(S.qa=m_(S,S.J?S.ia:null,S.W),W.K){Wy(S.h,W);var ke=W,at=S.L;at&&(ke.I=at),ke.B&&(Id(ke),eu(ke)),S.g=W}else c_(S);0<g.i.length&&lu(g)}else we[0]!="stop"&&we[0]!="close"||kr(g,7);else g.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?kr(g,7):Ad(g):we[0]!="noop"&&g.l&&g.l.ta(we),g.v=0)}}jo(4)}catch{}}var Rk=class{constructor(c,p){this.g=c,this.map=p}};function By(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zy(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $y(c){return c.h?1:c.g?c.g.size:0}function xd(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function kd(c,p){c.g?c.g.add(p):c.h=p}function Wy(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}By.prototype.cancel=function(){if(this.i=Hy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Hy(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const g of c.g.values())p=p.concat(g.D);return p}return b(c.i)}function Nk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],g=c.length,S=0;S<g;S++)p.push(c[S]);return p}p=[],g=0;for(S in c)p[g++]=c[S];return p}function Dk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var g=0;g<c;g++)p.push(g);return p}p=[],g=0;for(const S in c)p[g++]=S;return p}}}function qy(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var g=Dk(c),S=Nk(c),L=S.length,V=0;V<L;V++)p.call(void 0,S[V],g&&g[V],c)}var Ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mk(c,p){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var S=c[g].indexOf("="),L=null;if(0<=S){var V=c[g].substring(0,S);L=c[g].substring(S+1)}else V=c[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function xr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xr){this.h=c.h,tu(this,c.j),this.o=c.o,this.g=c.g,nu(this,c.s),this.l=c.l;var p=c.i,g=new Ho;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Gy(this,g),this.m=c.m}else c&&(p=String(c).match(Ky))?(this.h=!1,tu(this,p[1]||"",!0),this.o=$o(p[2]||""),this.g=$o(p[3]||"",!0),nu(this,p[4]),this.l=$o(p[5]||"",!0),Gy(this,p[6]||"",!0),this.m=$o(p[7]||"")):(this.h=!1,this.i=new Ho(null,this.h))}xr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Wo(p,Qy,!0),":");var g=this.g;return(g||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Wo(p,Qy,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Wo(g,g.charAt(0)=="/"?Vk:Lk,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Wo(g,jk)),c.join("")};function Yn(c){return new xr(c)}function tu(c,p,g){c.j=g?$o(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function nu(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Gy(c,p,g){p instanceof Ho?(c.i=p,Uk(c.i,c.h)):(g||(p=Wo(p,Fk)),c.i=new Ho(p,c.h))}function Re(c,p,g){c.i.set(p,g)}function iu(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function $o(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Wo(c,p,g){return typeof c=="string"?(c=encodeURI(c).replace(p,Ok),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ok(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Qy=/[#\/\?@]/g,Lk=/[#\?:]/g,Vk=/[#\?]/g,Fk=/[#\?@]/g,jk=/#/g;function Ho(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Si(c){c.g||(c.g=new Map,c.h=0,c.i&&Mk(c.i,function(p,g){c.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Ho.prototype,t.add=function(c,p){Si(this),this.i=null,c=Es(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(p),this.h+=1,this};function Yy(c,p){Si(c),p=Es(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Xy(c,p){return Si(c),p=Es(c,p),c.g.has(p)}t.forEach=function(c,p){Si(this),this.g.forEach(function(g,S){g.forEach(function(L){c.call(p,L,S,this)},this)},this)},t.na=function(){Si(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let S=0;S<p.length;S++){const L=c[S];for(let V=0;V<L.length;V++)g.push(p[S])}return g},t.V=function(c){Si(this);let p=[];if(typeof c=="string")Xy(this,c)&&(p=p.concat(this.g.get(Es(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)p=p.concat(c[g])}return p},t.set=function(c,p){return Si(this),this.i=null,c=Es(this,c),Xy(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Jy(c,p,g){Yy(c,p),0<g.length&&(c.i=null,c.g.set(Es(c,p),b(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var S=p[g];const V=encodeURIComponent(String(S)),W=this.V(S);for(S=0;S<W.length;S++){var L=V;W[S]!==""&&(L+="="+encodeURIComponent(String(W[S]))),c.push(L)}}return this.i=c.join("&")};function Es(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Uk(c,p){p&&!c.j&&(Si(c),c.i=null,c.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(Yy(this,S),Jy(this,L,g))},c)),c.j=p}function Bk(c,p){const g=new Bo;if(a.Image){const S=new Image;S.onload=m(xi,g,"TestLoadImage: loaded",!0,p,S),S.onerror=m(xi,g,"TestLoadImage: error",!1,p,S),S.onabort=m(xi,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=m(xi,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else p(!1)}function zk(c,p){const g=new Bo,S=new AbortController,L=setTimeout(()=>{S.abort(),xi(g,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:S.signal}).then(V=>{clearTimeout(L),V.ok?xi(g,"TestPingServer: ok",!0,p):xi(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),xi(g,"TestPingServer: error",!1,p)})}function xi(c,p,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function $k(){this.g=new Sk}function Wk(c,p,g){const S=g||"";try{qy(c,function(L,V){let W=L;u(L)&&(W=yd(L)),p.push(S+V+"="+encodeURIComponent(W))})}catch(L){throw p.push(S+"type="+encodeURIComponent("_badmap")),L}}function ru(c){this.l=c.Ub||null,this.j=c.eb||!1}E(ru,_d),ru.prototype.g=function(){return new su(this.l,this.j)},ru.prototype.i=function(c){return function(){return c}}({});function su(c,p){Qe.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(su,Qe),t=su.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ko(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ko(this)),this.g&&(this.readyState=3,Ko(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zy(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zy(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?qo(this):Ko(this),this.readyState==3&&Zy(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,qo(this))},t.Qa=function(c){this.g&&(this.response=c,qo(this))},t.ga=function(){this.g&&qo(this)};function qo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ko(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=p.next();return c.join(`\r
`)};function Ko(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function e_(c){let p="";return O(c,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function Cd(c,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=e_(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Re(c,p,g))}function ze(c){Qe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ze,Qe);var Hk=/^https?$/i,qk=["POST","PUT"];t=ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ed.g(),this.v=this.o?Ay(this.o):Ay(Ed),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(V){t_(this,V);return}if(c=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qk,p,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of g)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{r_(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){t_(this,V)}};function t_(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,n_(c),ou(c)}function n_(c){c.A||(c.A=!0,be(c,"complete"),be(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,be(this,"complete"),be(this,"abort"),ou(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ou(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?i_(this):this.bb())},t.bb=function(){i_(this)};function i_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Xn(c)!=4||c.Z()!=2)){if(c.u&&Xn(c)==4)Sy(c.Ea,0,c);else if(be(c,"readystatechange"),Xn(c)==4){c.h=!1;try{const W=c.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=W===0){var L=String(c.D).match(Ky)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!Hk.test(L?L.toLowerCase():"")}g=S}if(g)be(c,"complete"),be(c,"success");else{c.m=6;try{var V=2<Xn(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",n_(c)}}finally{ou(c)}}}}function ou(c,p){if(c.g){r_(c);const g=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||be(c,"ready");try{g.onreadystatechange=S}catch{}}}function r_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Xn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Ik(p)}};function s_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Kk(c){const p={};c=(c.g&&2<=Xn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(v(c[S]))continue;var g=P(c[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}T(p,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Go(c,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||p}function o_(c){this.Aa=0,this.i=[],this.j=new Bo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Go("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Go("baseRetryDelayMs",5e3,c),this.cb=Go("retryDelaySeedMs",1e4,c),this.Wa=Go("forwardChannelMaxRetries",2,c),this.wa=Go("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new By(c&&c.concurrentRequestLimit),this.Da=new $k,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=o_.prototype,t.la=8,t.G=1,t.connect=function(c,p,g,S){kt(0),this.W=c,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=m_(this,null,this.W),lu(this)};function Ad(c){if(a_(c),c.G==3){var p=c.U++,g=Yn(c.I);if(Re(g,"SID",c.K),Re(g,"RID",p),Re(g,"TYPE","terminate"),Qo(c,g),p=new Ii(c,c.j,p),p.L=2,p.v=iu(Yn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=g_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),eu(p)}p_(c)}function au(c){c.g&&(Rd(c),c.g.cancel(),c.g=null)}function a_(c){au(c),c.u&&(a.clearTimeout(c.u),c.u=null),uu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function lu(c){if(!zy(c.h)&&!c.s){c.s=!0;var p=c.Ga;pe||X(),$||(pe(),$=!0),Q.add(p,c),c.B=0}}function Gk(c,p){return $y(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Uo(f(c.Ga,c,p),f_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Ii(this,this.j,c);let V=this.o;if(this.S&&(V?(V=_(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=u_(this,L,p),g=Yn(this.I),Re(g,"RID",c),Re(g,"CVER",22),this.D&&Re(g,"X-HTTP-Session-Id",this.D),Qo(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(e_(V)))+"&"+p:this.m&&Cd(g,this.m,V)),kd(this.h,L),this.Ua&&Re(g,"TYPE","init"),this.P?(Re(g,"$req",p),Re(g,"SID","null"),L.T=!0,bd(L,g,null)):bd(L,g,p),this.G=2}}else this.G==3&&(c?l_(this,c):this.i.length==0||zy(this.h)||l_(this))};function l_(c,p){var g;p?g=p.l:g=c.U++;const S=Yn(c.I);Re(S,"SID",c.K),Re(S,"RID",g),Re(S,"AID",c.T),Qo(c,S),c.m&&c.o&&Cd(S,c.m,c.o),g=new Ii(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),p&&(c.i=p.D.concat(c.i)),p=u_(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),kd(c.h,g),bd(g,S,p)}function Qo(c,p){c.H&&O(c.H,function(g,S){Re(p,S,g)}),c.l&&qy({},function(g,S){Re(p,S,g)})}function u_(c,p,g){g=Math.min(c.i.length,g);var S=c.l?f(c.l.Na,c.l,c):null;e:{var L=c.i;let V=-1;for(;;){const W=["count="+g];V==-1?0<g?(V=L[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let ke=!0;for(let at=0;at<g;at++){let we=L[at].g;const yt=L[at].map;if(we-=V,0>we)V=Math.max(0,L[at].g-100),ke=!1;else try{Wk(yt,W,"req"+we+"_")}catch{S&&S(yt)}}if(ke){S=W.join("&");break e}}}return c=c.i.splice(0,g),p.D=c,S}function c_(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;pe||X(),$||(pe(),$=!0),Q.add(p,c),c.v=0}}function Pd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Uo(f(c.Fa,c),f_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,h_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Uo(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),au(this),h_(this))};function Rd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function h_(c){c.g=new Ii(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Yn(c.qa);Re(p,"RID","rpc"),Re(p,"SID",c.K),Re(p,"AID",c.T),Re(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(p,"TO",c.ja),Re(p,"TYPE","xmlhttp"),Qo(c,p),c.m&&c.o&&Cd(p,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=iu(Yn(p)),g.m=null,g.P=!0,Fy(g,c)}t.Za=function(){this.C!=null&&(this.C=null,au(this),Pd(this),kt(19))};function uu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function d_(c,p){var g=null;if(c.g==p){uu(c),Rd(c),c.g=null;var S=2}else if(xd(c.h,p))g=p.D,Wy(c.h,p),S=1;else return;if(c.G!=0){if(p.o)if(S==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;S=Xl(),be(S,new My(S,g)),lu(c)}else c_(c);else if(L=p.s,L==3||L==0&&0<p.X||!(S==1&&Gk(c,p)||S==2&&Pd(c)))switch(g&&0<g.length&&(p=c.h,p.i=p.i.concat(g)),L){case 1:kr(c,5);break;case 4:kr(c,10);break;case 3:kr(c,6);break;default:kr(c,2)}}}function f_(c,p){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*p}function kr(c,p){if(c.j.info("Error code "+p),p==2){var g=f(c.fb,c),S=c.Xa;const L=!S;S=new xr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tu(S,"https"),iu(S),L?Bk(S.toString(),g):zk(S.toString(),g)}else kt(2);c.G=0,c.l&&c.l.sa(p),p_(c),a_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function p_(c){if(c.G=0,c.ka=[],c.l){const p=Hy(c.h);(p.length!=0||c.i.length!=0)&&(w(c.ka,p),w(c.ka,c.i),c.h.i.length=0,b(c.i),c.i.length=0),c.l.ra()}}function m_(c,p,g){var S=g instanceof xr?Yn(g):new xr(g);if(S.g!="")p&&(S.g=p+"."+S.g),nu(S,S.s);else{var L=a.location;S=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new xr(null);S&&tu(V,S),p&&(V.g=p),L&&nu(V,L),g&&(V.l=g),S=V}return g=c.D,p=c.ya,g&&p&&Re(S,g,p),Re(S,"VER",c.la),Qo(c,S),S}function g_(c,p,g){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new ze(new ru({eb:g})):new ze(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function y_(){}t=y_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function cu(){}cu.prototype.g=function(c,p){return new qt(c,p)};function qt(c,p){Qe.call(this),this.g=new o_(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!v(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Ts(this)}E(qt,Qe),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Ad(this.g)},qt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=yd(c),c=g);p.i.push(new Rk(p.Ya++,c)),p.G==3&&lu(p)},qt.prototype.N=function(){this.g.l=null,delete this.j,Ad(this.g),delete this.g,qt.aa.N.call(this)};function __(c){vd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const g in p){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}E(__,vd);function v_(){wd.call(this),this.status=1}E(v_,wd);function Ts(c){this.g=c}E(Ts,y_),Ts.prototype.ua=function(){be(this.g,"a")},Ts.prototype.ta=function(c){be(this.g,new __(c))},Ts.prototype.sa=function(c){be(this.g,new v_)},Ts.prototype.ra=function(){be(this.g,"b")},cu.prototype.createWebChannel=cu.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,GI=function(){return new cu},KI=function(){return Xl()},qI=Ir,Fp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jl.NO_ERROR=0,Jl.TIMEOUT=8,Jl.HTTP_ERROR=6,hc=Jl,Oy.COMPLETE="complete",HI=Oy,Py.EventType=Fo,Fo.OPEN="a",Fo.CLOSE="b",Fo.ERROR="c",Fo.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,_a=Py,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,WI=ze}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});const p0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new $h("@firebase/firestore");function ra(){return is.logLevel}function G(t,...e){if(is.logLevel<=me.DEBUG){const n=e.map(_g);is.debug(`Firestore (${Ao}): ${t}`,...n)}}function _i(t,...e){if(is.logLevel<=me.ERROR){const n=e.map(_g);is.error(`Firestore (${Ao}): ${t}`,...n)}}function fo(t,...e){if(is.logLevel<=me.WARN){const n=e.map(_g);is.warn(`Firestore (${Ao}): ${t}`,...n)}}function _g(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Ao}) INTERNAL ASSERTION FAILED: `+t;throw _i(e),new Error(e)}function ve(t,e){t||ie()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class RM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NM{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string"),new QI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new Tt(e)}}class DM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new DM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const i=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new OM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=VM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Ee(t,e){return t<e?-1:t>e?1:0}function po(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new et(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new et(0,0))}static max(){return new re(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,i){n===void 0?n=0:n>e.length&&ie(),i===void 0?i=e.length-n:i>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends gl{construct(e,n,i){return new Ce(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const FM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends gl{construct(e,n,i){return new ht(e,n,i)}static isValidIdentifier(e){return FM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ce.fromString(e))}static fromName(e){return new ne(Ce.fromString(e).popFirst(5))}static empty(){return new ne(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ce(e.slice()))}}function jM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=re.fromTimestamp(i===1e9?new et(n+1,0):new et(n,i));return new cr(r,ne.empty(),e)}function UM(t){return new cr(t.readTime,t.key,-1)}class cr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new cr(re.min(),ne.empty(),-1)}static max(){return new cr(re.max(),ne.empty(),-1)}}function BM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $M{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==zM)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,i)=>{n(e)})}static reject(e){return new B((n,i)=>{i(e)})}static waitFor(e){return new B((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=B.resolve(!1);for(const i of e)n=n.next(r=>r?B.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new B((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new B((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function WM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ul(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vg.oe=-1;function Bl(t){return t==null}function th(t){return t===0&&1/t==-1/0}function HM(t){return typeof t=="number"&&Number.isInteger(t)&&!th(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ru(this.root,e,this.comparator,!0)}}class Ru{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ct.RED,this.left=r??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new ct(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ct.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,i,r,s){return this}insert(e,n,i){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new g0(this.data.getIterator())}getIteratorFrom(e){return new g0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class g0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new pt(ht.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JI("Invalid base64 string: "+s):s}}(e);return new gt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const qM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=qM.exec(t);if(ve(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Eg(t){const e=t.mapValue.fields.__previous_value__;return wg(e)?Eg(e):e}function yl(t){const e=hr(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class _l{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _l("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu={mapValue:{}};function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wg(t)?4:QM(t)?9007199254740991:GM(t)?10:11:ie()}function qn(t,e){if(t===e)return!0;const n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yl(t).isEqual(yl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=hr(r.timestampValue),a=hr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return rs(r.bytesValue).isEqual(rs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return We(r.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(r.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return We(r.integerValue)===We(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=We(r.doubleValue),a=We(s.doubleValue);return o===a?th(o)===th(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return po(t.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(m0(o)!==m0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qn(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function vl(t,e){return(t.values||[]).find(n=>qn(n,e))!==void 0}function mo(t,e){if(t===e)return 0;const n=ss(t),i=ss(e);if(n!==i)return Ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=We(s.integerValue||s.doubleValue),l=We(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return y0(t.timestampValue,e.timestampValue);case 4:return y0(yl(t),yl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,o){const a=rs(s),l=rs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ee(a[u],l[u]);if(h!==0)return h}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ee(We(s.latitude),We(o.latitude));return a!==0?a:Ee(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,E=(l=f.value)===null||l===void 0?void 0:l.arrayValue,b=Ee(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:_0(m,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nu.mapValue&&o===Nu.mapValue)return 0;if(s===Nu.mapValue)return 1;if(o===Nu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Ee(l[d],h[d]);if(f!==0)return f;const m=mo(a[l[d]],u[h[d]]);if(m!==0)return m}return Ee(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ie()}}function y0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=hr(t),i=hr(e),r=Ee(n.seconds,i.seconds);return r!==0?r:Ee(n.nanos,i.nanos)}function _0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=mo(n[r],i[r]);if(s)return s}return Ee(n.length,i.length)}function go(t){return jp(t)}function jp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=hr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=jp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${jp(n.fields[o])}`;return r+"}"}(t.mapValue):ie()}function Up(t){return!!t&&"integerValue"in t}function Tg(t){return!!t&&"arrayValue"in t}function v0(t){return!!t&&"nullValue"in t}function w0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dc(t){return!!t&&"mapValue"in t}function GM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function La(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ms(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=La(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=La(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=La(n)}setAll(e){let n=ht.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=La(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ms(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Pt(La(this.value))}}function ZI(t){const e=[];return ms(t.fields,(n,i)=>{const r=new ht([n]);if(dc(i)){const s=ZI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rt(e,0,re.min(),re.min(),re.min(),Pt.empty(),0)}static newFoundDocument(e,n,i,r){return new rt(e,1,n,re.min(),i,r,0)}static newNoDocument(e,n){return new rt(e,2,n,re.min(),re.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,re.min(),re.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.position=e,this.inclusive=n}}function E0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=ne.comparator(ne.fromName(o.referenceValue),n.key):i=mo(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function T0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function YM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{}class Xe extends eS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new JM(e,n,i):n==="array-contains"?new tO(e,i):n==="in"?new nO(e,i):n==="not-in"?new iO(e,i):n==="array-contains-any"?new rO(e,i):new Xe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new ZM(e,i):new eO(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mo(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends eS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kn(e,n)}matches(e){return tS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tS(t){return t.op==="and"}function nS(t){return XM(t)&&tS(t)}function XM(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function Bp(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+go(t.value);if(nS(t))return t.filters.map(e=>Bp(e)).join(",");{const e=t.filters.map(n=>Bp(n)).join(",");return`${t.op}(${e})`}}function iS(t,e){return t instanceof Xe?function(i,r){return r instanceof Xe&&i.op===r.op&&i.field.isEqual(r.field)&&qn(i.value,r.value)}(t,e):t instanceof Kn?function(i,r){return r instanceof Kn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&iS(o,r.filters[a]),!0):!1}(t,e):void ie()}function rS(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`}(t):t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(rS).join(" ,")+"}"}(t):"Filter"}class JM extends Xe{constructor(e,n,i){super(e,n,i),this.key=ne.fromName(i.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZM extends Xe{constructor(e,n){super(e,"in",n),this.keys=sS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eO extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=sS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ne.fromName(i.referenceValue))}class tO extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tg(n)&&vl(n.arrayValue,this.value)}}class nO extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vl(this.value.arrayValue,n)}}class iO extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vl(this.value.arrayValue,n)}}class rO extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>vl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function b0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new sO(t,e,n,i,r,s,o)}function bg(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Bp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Bl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>go(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>go(i)).join(",")),e.ue=n}return e.ue}function Ig(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!T0(t.startAt,e.startAt)&&T0(t.endAt,e.endAt)}function zp(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oO(t,e,n,i,r,s,o,a){return new Kh(t,e,n,i,r,s,o,a)}function Sg(t){return new Kh(t)}function I0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aO(t){return t.collectionGroup!==null}function Va(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pt(ht.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ih(s,i))}),n.has(ht.keyField().canonicalString())||e.ce.push(new ih(ht.keyField(),i))}return e.ce}function $n(t){const e=oe(t);return e.le||(e.le=lO(e,Va(t))),e.le}function lO(t,e){if(t.limitType==="F")return b0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ih(r.field,s)});const n=t.endAt?new nh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new nh(t.startAt.position,t.startAt.inclusive):null;return b0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function $p(t,e,n){return new Kh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gh(t,e){return Ig($n(t),$n(e))&&t.limitType===e.limitType}function oS(t){return`${bg($n(t))}|lt:${t.limitType}`}function As(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>rS(r)).join(", ")}]`),Bl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>go(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>go(r)).join(",")),`Target(${i})`}($n(t))}; limitType=${t.limitType})`}function Qh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ne.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Va(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=E0(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,Va(i),r)||i.endAt&&!function(o,a,l){const u=E0(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,Va(i),r))}(t,e)}function uO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aS(t){return(e,n)=>{let i=!1;for(const r of Va(t)){const s=cO(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function cO(t,e,n){const i=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?mo(l,u):ie()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return XI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=new Be(ne.comparator);function vi(){return hO}const lS=new Be(ne.comparator);function va(...t){let e=lS;for(const n of t)e=e.insert(n.key,n);return e}function uS(t){let e=lS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function zr(){return Fa()}function cS(){return Fa()}function Fa(){return new Po(t=>t.toString(),(t,e)=>t.isEqual(e))}const dO=new Be(ne.comparator),fO=new pt(ne.comparator);function fe(...t){let e=fO;for(const n of t)e=e.add(n);return e}const pO=new pt(Ee);function mO(){return pO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function hS(t){return{integerValue:""+t}}function gO(t,e){return HM(e)?hS(e):xg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this._=void 0}}function yO(t,e,n){return t instanceof wl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&wg(s)&&(s=Eg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof El?fS(t,e):t instanceof Tl?pS(t,e):function(r,s){const o=dS(r,s),a=S0(o)+S0(r.Pe);return Up(o)&&Up(r.Pe)?hS(a):xg(r.serializer,a)}(t,e)}function _O(t,e,n){return t instanceof El?fS(t,e):t instanceof Tl?pS(t,e):n}function dS(t,e){return t instanceof rh?function(i){return Up(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class wl extends Yh{}class El extends Yh{constructor(e){super(),this.elements=e}}function fS(t,e){const n=mS(e);for(const i of t.elements)n.some(r=>qn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Tl extends Yh{constructor(e){super(),this.elements=e}}function pS(t,e){let n=mS(e);for(const i of t.elements)n=n.filter(r=>!qn(r,i));return{arrayValue:{values:n}}}class rh extends Yh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function S0(t){return We(t.integerValue||t.doubleValue)}function mS(t){return Tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n){this.field=e,this.transform=n}}function wO(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof El&&r instanceof El||i instanceof Tl&&r instanceof Tl?po(i.elements,r.elements,qn):i instanceof rh&&r instanceof rh?qn(i.Pe,r.Pe):i instanceof wl&&r instanceof wl}(t.transform,e.transform)}class EO{constructor(e,n){this.version=e,this.transformResults=n}}class Je{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Je}static exists(e){return new Je(void 0,e)}static updateTime(e){return new Je(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xh{}function gS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $l(t.key,Je.none()):new zl(t.key,t.data,Je.none());{const n=t.data,i=Pt.empty();let r=new pt(ht.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Tr(t.key,i,new Yt(r.toArray()),Je.none())}}function TO(t,e,n){t instanceof zl?function(r,s,o){const a=r.value.clone(),l=k0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Tr?function(r,s,o){if(!fc(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=k0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(yS(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ja(t,e,n,i){return t instanceof zl?function(s,o,a,l){if(!fc(s.precondition,o))return a;const u=s.value.clone(),h=C0(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Tr?function(s,o,a,l){if(!fc(s.precondition,o))return a;const u=C0(s.fieldTransforms,l,o),h=o.data;return h.setAll(yS(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return fc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function bO(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=dS(i.transform,r||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(i.field,s))}return n||null}function x0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&po(i,r,(s,o)=>wO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zl extends Xh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Tr extends Xh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function k0(t,e,n){const i=new Map;ve(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,_O(o,a,n[r]))}return i}function C0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,yO(s,o,e))}return i}class $l extends Xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _S extends Xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&TO(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ja(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ja(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=cS();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=gS(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,(n,i)=>x0(n,i))&&po(this.baseMutations,e.baseMutations,(n,i)=>x0(n,i))}}class kg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ve(e.mutations.length===i.length);let r=function(){return dO}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new kg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,ge;function vS(t){switch(t){default:return ie();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function wS(t){if(t===void 0)return _i("GRPC error has no .code"),j.UNKNOWN;switch(t){case Ke.OK:return j.OK;case Ke.CANCELLED:return j.CANCELLED;case Ke.UNKNOWN:return j.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return j.INTERNAL;case Ke.UNAVAILABLE:return j.UNAVAILABLE;case Ke.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ke.NOT_FOUND:return j.NOT_FOUND;case Ke.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ke.ABORTED:return j.ABORTED;case Ke.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ke.DATA_LOSS:return j.DATA_LOSS;default:return ie()}}(ge=Ke||(Ke={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new Gr([4294967295,4294967295],0);function A0(t){const e=kO().encode(t),n=new $I;return n.update(e),new Uint8Array(n.digest())}function P0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gr([n,i],0),new Gr([r,s],0)]}class Cg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new wa(`Invalid padding: ${n}`);if(i<0)throw new wa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new wa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Gr.fromNumber(i)));return r.compare(CO)===1&&(r=new Gr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=A0(e),[i,r]=P0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Cg(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=A0(e),[i,r]=P0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Jh(re.min(),r,new Be(Ee),vi(),fe())}}class Wl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Wl(i,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class ES{constructor(e,n){this.targetId=e,this.me=n}}class TS{constructor(e,n,i=gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class R0{constructor(){this.fe=0,this.ge=D0(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),i=fe();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ie()}}),new Wl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=D0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class AO{constructor(e){this.Le=e,this.Be=new Map,this.ke=vi(),this.qe=N0(),this.Qe=new Be(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(zp(s))if(i===0){const o=new ne(s.path);this.Ue(n,o,rt.newNoDocument(o,re.min()))}else ve(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=rs(i).toUint8Array()}catch(l){if(l instanceof JI)return fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Cg(o,r,s)}catch(l){return fo(l instanceof wa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&zp(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,rt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=fe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Jh(e,n,this.Qe,this.ke,i);return this.ke=vi(),this.qe=N0(),this.Qe=new Be(Ee),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new R0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pt(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new R0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function N0(){return new Be(ne.comparator)}function D0(){return new Be(ne.comparator)}const PO={asc:"ASCENDING",desc:"DESCENDING"},RO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NO={and:"AND",or:"OR"};class DO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wp(t,e){return t.useProto3Json||Bl(e)?e:{value:e}}function sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MO(t,e){return sh(t,e.toTimestamp())}function Jt(t){return ve(!!t),re.fromTimestamp(function(n){const i=hr(n);return new et(i.seconds,i.nanos)}(t))}function Ag(t,e){return Hp(t,e).canonicalString()}function Hp(t,e){const n=function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function IS(t){const e=Ce.fromString(t);return ve(PS(e)),e}function oh(t,e){return Ag(t.databaseId,e.path)}function Ua(t,e){const n=IS(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(xS(n))}function SS(t,e){return Ag(t.databaseId,e)}function OO(t){const e=IS(t);return e.length===4?Ce.emptyPath():xS(e)}function qp(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xS(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function M0(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function LO(t,e){return"found"in e?function(i,r){ve(!!r.found),r.found.name,r.found.updateTime;const s=Ua(i,r.found.name),o=Jt(r.found.updateTime),a=r.found.createTime?Jt(r.found.createTime):re.min(),l=new Pt({mapValue:{fields:r.found.fields}});return rt.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(i,r){ve(!!r.missing),ve(!!r.readTime);const s=Ua(i,r.missing),o=Jt(r.readTime);return rt.newNoDocument(s,o)}(t,e):ie()}function VO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(ve(h===void 0||typeof h=="string"),gt.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array),gt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?j.UNKNOWN:wS(u.code);return new Y(h,u.message||"")}(o);n=new TS(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ua(t,i.document.name),s=Jt(i.document.updateTime),o=i.document.createTime?Jt(i.document.createTime):re.min(),a=new Pt({mapValue:{fields:i.document.fields}}),l=rt.newFoundDocument(r,s,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new pc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ua(t,i.document),s=i.readTime?Jt(i.readTime):re.min(),o=rt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new pc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ua(t,i.document),s=i.removedTargetIds||[];n=new pc([],s,r,null)}else{if(!("filter"in e))return ie();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new xO(r,s),a=i.targetId;n=new ES(a,o)}}return n}function kS(t,e){let n;if(e instanceof zl)n={update:M0(t,e.key,e.value)};else if(e instanceof $l)n={delete:oh(t,e.key)};else if(e instanceof Tr)n={update:M0(t,e.key,e.data),updateMask:qO(e.fieldMask)};else{if(!(e instanceof _S))return ie();n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof wl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof El)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Tl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:MO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(t,e.precondition)),n}function FO(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Jt(r.updateTime):Jt(s);return o.isEqual(re.min())&&(o=Jt(s)),new EO(o,r.transformResults||[])}(n,e))):[]}function jO(t,e){return{documents:[SS(t,e.path)]}}function UO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=SS(t,r);const s=function(u){if(u.length!==0)return AS(Kn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:Ps(f.field),direction:$O(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Wp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function BO(t){let e=OO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ve(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=CS(d);return f instanceof Kn&&nS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(E){return new ih(Rs(E.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Bl(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new nh(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new nh(m,f)}(n.endAt)),oO(e,r,o,s,a,"F",l,u)}function zO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Rs(n.unaryFilter.field);return Xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Rs(n.unaryFilter.field);return Xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rs(n.unaryFilter.field);return Xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rs(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(Rs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(i=>CS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function $O(t){return PO[t]}function WO(t){return RO[t]}function HO(t){return NO[t]}function Ps(t){return{fieldPath:t.canonicalString()}}function Rs(t){return ht.fromServerFormat(t.fieldPath)}function AS(t){return t instanceof Xe?function(n){if(n.op==="=="){if(w0(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NAN"}};if(v0(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w0(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NOT_NAN"}};if(v0(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ps(n.field),op:WO(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const i=n.getFilters().map(r=>AS(r));return i.length===1?i[0]:{compositeFilter:{op:HO(n.op),filters:i}}}(t):ie()}function qO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,i,r,s=re.min(),o=re.min(),a=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.ct=e}}function GO(t){const e=BO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.un=new YO}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(cr.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class YO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new pt(Ce.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new pt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yo(0)}static kn(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.changes=new Po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ja(i.mutation,r,Yt.empty(),et.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,fe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=fe()){const r=zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=va();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,fe()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=vi();const o=Fa(),a=function(){return Fa()}();return n.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Tr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ja(h.mutation,u,h.mutation.getFieldMask(),et.now())):o.set(u.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new JO(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Fa();let r=new Be((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=i.get(l)||Yt.empty();h=a.applyToLocalView(u,h),i.set(l,h);const d=(r.get(a.batchId)||fe()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=cS();h.forEach(f=>{if(!s.has(f)){const m=gS(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return B.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):B.resolve(zr());let a=-1,l=s;return o.next(u=>B.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,fe())).next(h=>({batchId:a,changes:uS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(i=>{let r=va();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=va();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const u=function(d,f){return new Kh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,rt.newInvalidDocument(h)))});let a=va();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&ja(h.mutation,u,Yt.empty(),et.now()),Qh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Jt(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:GO(r.bundledQuery),readTime:Jt(r.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.overlays=new Be(ne.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const i=zr();return B.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){const r=zr(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Be((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=zr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=zr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return B.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new SO(n,i));let s=this.Ir.get(n);s===void 0&&(s=fe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Tr=new pt(nt.Er),this.dr=new pt(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new nt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new nt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ne(new Ce([])),i=new nt(n,e),r=new nt(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Ce([])),i=new nt(n,e),r=new nt(n,e+1);let s=fe();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new nt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pt(nt.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new IO(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new nt(n,0),r=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new pt(Ee);return n.forEach(r=>{const s=new nt(r,0),o=new nt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),B.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ne.isDocumentKey(s)||(s=s.child(""));const o=new nt(new ne(s),0);let a=new pt(Ee);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return B.forEach(n.mutations,r=>{const s=new nt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new nt(n,0),r=this.br.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.Mr=e,this.docs=function(){return new Be(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let i=vi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():rt.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=vi();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||BM(UM(h),i)<=0||(r.has(h.key)||Qh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ie()}Or(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new s2(this)}getSize(e){return B.resolve(this.size)}}class s2 extends XO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.persistence=e,this.Nr=new Po(n=>bg(n),Ig),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pg,this.targetCount=0,this.kr=yo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),B.waitFor(s).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vg(0),this.Kr=!1,this.Kr=!0,this.$r=new n2,this.referenceDelegate=e(this),this.Ur=new o2(this),this.indexManager=new QO,this.remoteDocumentCache=function(r){return new r2(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new KO(n),this.Gr=new e2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new t2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new i2(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){G("MemoryPersistence","Starting transaction:",e);const r=new l2(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return B.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class l2 extends $M{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.Jr=new Pg,this.Yr=null}static Zr(e){return new Rg(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,i=>{const r=ne.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=fe(),r=fe();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ng(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WP()?8:WM(xt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new u2;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(ra()<=me.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",As(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(ra()<=me.DEBUG&&G("QueryEngine","Query:",As(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(ra()<=me.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",As(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):B.resolve())}Yi(e,n){if(I0(n))return B.resolve(null);let i=$n(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=$p(n,null,"F"),i=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=fe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,$p(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return I0(n)||r.isEqual(re.min())?B.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?B.resolve(null):(ra()<=me.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),As(n)),this.rs(e,o,n,jM(r,-1)).next(a=>a))})}ts(e,n){let i=new pt(aS(e));return n.forEach((r,s)=>{Qh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return ra()<=me.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",As(n)),this.Ji.getDocumentsMatchingQuery(e,n,cr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Be(Ee),this._s=new Po(s=>bg(s),Ig),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function d2(t,e,n,i){return new h2(t,e,n,i)}async function RS(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=fe();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function f2(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let m=B.resolve();return f.forEach(E=>{m=m.next(()=>h.getEntry(l,E)).next(b=>{const w=u.docVersions.get(E);ve(w!==null),b.version.compareTo(w)<0&&(d.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),h.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=fe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function NS(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function p2(t,e){const n=oe(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(gt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(b,w,I){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=vi(),u=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(m2(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!i.isEqual(re.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function m2(t,e,n){let i=fe(),r=fe();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=vi();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function g2(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function y2(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,B.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Wi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Kp(t,e,n){const i=oe(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ul(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function O0(t,e,n){const i=oe(t);let r=re.min(),s=fe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=oe(l),f=d._s.get(h);return f!==void 0?B.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(i,o,$n(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:re.min(),n?s:fe())).next(a=>(_2(i,uO(e),a),{documents:a,Ts:s})))}function _2(t,e,n){let i=t.us.get(e)||re.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class L0{constructor(){this.activeTargetIds=mO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v2{constructor(){this.so=new L0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new L0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function pf(){return Du===null?Du=function(){return 268435456+Math.round(2147483648*Math.random())}():Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class b2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=pf(),l=this.xo(n,i.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw fo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ao}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=E2[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=pf();return new Promise((o,a)=>{const l=new WI;l.setWithCredentials(!0),l.listenOnce(HI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case hc.NO_ERROR:const h=l.getResponseJson();G(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case hc.TIMEOUT:G(Et,`RPC '${e}' ${s} timed out`),a(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const d=l.getStatus();if(G(Et,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const E=function(w){const I=w.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(I)>=0?I:j.UNKNOWN}(m.status);a(new Y(E,m.message))}else a(new Y(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(j.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{G(Et,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);G(Et,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=pf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GI(),a=KI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");G(Et,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const E=new T2({Io:w=>{m?G(Et,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(f||(G(Et,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),G(Et,`RPC '${e}' stream ${r} sending:`,w),d.send(w))},To:()=>d.close()}),b=(w,I,v)=>{w.listen(I,k=>{try{v(k)}catch(R){setTimeout(()=>{throw R},0)}})};return b(d,_a.EventType.OPEN,()=>{m||(G(Et,`RPC '${e}' stream ${r} transport opened.`),E.yo())}),b(d,_a.EventType.CLOSE,()=>{m||(m=!0,G(Et,`RPC '${e}' stream ${r} transport closed`),E.So())}),b(d,_a.EventType.ERROR,w=>{m||(m=!0,fo(Et,`RPC '${e}' stream ${r} transport errored:`,w),E.So(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),b(d,_a.EventType.MESSAGE,w=>{var I;if(!m){const v=w.data[0];ve(!!v);const k=v,R=k.error||((I=k[0])===null||I===void 0?void 0:I.error);if(R){G(Et,`RPC '${e}' stream ${r} received error:`,R);const D=R.status;let O=function(x){const C=Ke[x];if(C!==void 0)return wS(C)}(D),T=R.message;O===void 0&&(O=j.INTERNAL,T="Unknown error status: "+D+" with message "+R.message),m=!0,E.So(new Y(O,T)),d.close()}else G(Et,`RPC '${e}' stream ${r} received:`,v),E.bo(v)}}),b(a,qI.STAT_EVENT,w=>{w.stat===Fp.PROXY?G(Et,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===Fp.NOPROXY&&G(Et,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){return new DO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&G("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Dg(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(_i(n.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new Y(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class I2 extends DS{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=VO(this.serializer,e),i=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Jt(o.readTime):re.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=qp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=zp(l)?{documents:jO(s,l)}:{query:UO(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bS(s,o.resumeToken);const u=Wp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=sh(s,o.snapshotVersion.toTimestamp());const u=Wp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=zO(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=qp(this.serializer),n.removeTarget=e,this.a_(n)}}class S2 extends DS{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=FO(e.writeResults,e.commitTime),i=Jt(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=qp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>kS(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Hp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Hp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class k2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_i(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{gs(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=oe(l);u.L_.add(4),await Hl(u),u.q_.set("Unknown"),u.L_.delete(4),await ed(u)}(this))})}),this.q_=new k2(i,r)}}async function ed(t){if(gs(t))for(const e of t.B_)await e(!0)}async function Hl(t){for(const e of t.B_)await e(!1)}function MS(t,e){const n=oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vg(n)?Lg(n):Ro(n).r_()&&Og(n,e))}function Mg(t,e){const n=oe(t),i=Ro(n);n.N_.delete(e),i.r_()&&OS(n,e),n.N_.size===0&&(i.r_()?i.o_():gs(n)&&n.q_.set("Unknown"))}function Og(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ro(t).A_(e)}function OS(t,e){t.Q_.xe(e),Ro(t).R_(e)}function Lg(t){t.Q_=new AO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ro(t).start(),t.q_.v_()}function Vg(t){return gs(t)&&!Ro(t).n_()&&t.N_.size>0}function gs(t){return oe(t).L_.size===0}function LS(t){t.Q_=void 0}async function A2(t){t.q_.set("Online")}async function P2(t){t.N_.forEach((e,n)=>{Og(t,e)})}async function R2(t,e){LS(t),Vg(t)?(t.q_.M_(e),Lg(t)):t.q_.set("Unknown")}async function N2(t,e,n){if(t.q_.set("Online"),e instanceof TS&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ah(t,i)}else if(e instanceof pc?t.Q_.Ke(e):e instanceof ES?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const i=await NS(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(gt.EMPTY_BYTE_STRING,h.snapshotVersion)),OS(s,l);const d=new Wi(h.target,l,u,h.sequenceNumber);Og(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){G("RemoteStore","Failed to raise snapshot:",i),await ah(t,i)}}async function ah(t,e,n){if(!Ul(e))throw e;t.L_.add(1),await Hl(t),t.q_.set("Offline"),n||(n=()=>NS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ed(t)})}function VS(t,e){return e().catch(n=>ah(t,n,e))}async function td(t){const e=oe(t),n=dr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;D2(e);)try{const r=await g2(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,M2(e,r)}catch(r){await ah(e,r)}FS(e)&&jS(e)}function D2(t){return gs(t)&&t.O_.length<10}function M2(t,e){t.O_.push(e);const n=dr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function FS(t){return gs(t)&&!dr(t).n_()&&t.O_.length>0}function jS(t){dr(t).start()}async function O2(t){dr(t).p_()}async function L2(t){const e=dr(t);for(const n of t.O_)e.m_(n.mutations)}async function V2(t,e,n){const i=t.O_.shift(),r=kg.from(i,e,n);await VS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await td(t)}async function F2(t,e){e&&dr(t).V_&&await async function(i,r){if(function(o){return vS(o)&&o!==j.ABORTED}(r.code)){const s=i.O_.shift();dr(i).s_(),await VS(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await td(i)}}(t,e),FS(t)&&jS(t)}async function F0(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const i=gs(n);n.L_.add(3),await Hl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ed(n)}async function j2(t,e){const n=oe(t);e?(n.L_.delete(2),await ed(n)):e||(n.L_.add(2),await Hl(n),n.q_.set("Unknown"))}function Ro(t){return t.K_||(t.K_=function(n,i,r){const s=oe(n);return s.w_(),new I2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:A2.bind(null,t),Ro:P2.bind(null,t),mo:R2.bind(null,t),d_:N2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Vg(t)?Lg(t):t.q_.set("Unknown")):(await t.K_.stop(),LS(t))})),t.K_}function dr(t){return t.U_||(t.U_=function(n,i,r){const s=oe(n);return s.w_(),new S2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:O2.bind(null,t),mo:F2.bind(null,t),f_:L2.bind(null,t),g_:V2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await td(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Fg(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jg(t,e){if(_i("AsyncQueue",`${e}: ${t}`),Ul(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ne.comparator(n.key,i.key):(n,i)=>ne.comparator(n.key,i.key),this.keyedMap=va(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new to(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new to;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(){this.W_=new Be(ne.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class _o{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _o(e,n,to.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class B2{constructor(){this.queries=U0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=oe(n),s=r.queries;r.queries=U0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new Y(j.ABORTED,"Firestore shutting down"))}}function U0(){return new Po(t=>oS(t),Gh)}async function z2(t,e){const n=oe(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new U2,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=jg(o,`Initialization of query '${As(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ug(n)}async function $2(t,e){const n=oe(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function W2(t,e){const n=oe(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Ug(n)}function H2(t,e,n){const i=oe(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Ug(t){t.Y_.forEach(e=>{e.next()})}var Gp,B0;(B0=Gp||(Gp={})).ea="default",B0.Cache="cache";class q2{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new _o(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.key=e}}class BS{constructor(e){this.key=e}}class K2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=aS(e),this.Ra=new to(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new j0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=Qh(this.query,d)?d:null,E=!!f&&this.mutatedKeys.has(f.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;f&&m?f.data.isEqual(m.data)?E!==b&&(i.track({type:3,doc:m}),w=!0):this.ga(f,m)||(i.track({type:2,doc:m}),w=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),w=!0):f&&!m&&(i.track({type:1,doc:f}),w=!0,(l||u)&&(a=!0)),w&&(m?(o=o.add(m),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,E){const b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return b(m)-b(E)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new _o(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new j0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new BS(i))}),this.da.forEach(i=>{e.has(i)||n.push(new US(i))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class G2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Q2{constructor(e){this.key=e,this.va=!1}}class Y2{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Po(a=>oS(a),Gh),this.Ma=new Map,this.xa=new Set,this.Oa=new Be(ne.comparator),this.Na=new Map,this.La=new Pg,this.Ba={},this.ka=new Map,this.qa=yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function X2(t,e,n=!0){const i=KS(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await zS(i,e,n,!0),r}async function J2(t,e){const n=KS(t);await zS(n,e,!0,!1)}async function zS(t,e,n,i){const r=await y2(t.localStore,$n(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await Z2(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&MS(t.remoteStore,r),a}async function Z2(t,e,n,i,r){t.Ka=(d,f,m)=>async function(b,w,I,v){let k=w.view.ma(I);k.ns&&(k=await O0(b.localStore,w.query,!1).then(({documents:T})=>w.view.ma(T,k)));const R=v&&v.targetChanges.get(w.targetId),D=v&&v.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(k,b.isPrimaryClient,R,D);return $0(b,w.targetId,O.wa),O.snapshot}(t,d,f,m);const s=await O0(t.localStore,e,!0),o=new K2(e,s.Ts),a=o.ma(s.documents),l=Wl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);$0(t,n,u.wa);const h=new G2(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function eL(t,e,n){const i=oe(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Gh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Kp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Mg(i.remoteStore,r.targetId),Qp(i,r.targetId)}).catch(jl)):(Qp(i,r.targetId),await Kp(i.localStore,r.targetId,!0))}async function tL(t,e){const n=oe(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Mg(n.remoteStore,i.targetId))}async function nL(t,e,n){const i=uL(t);try{const r=await function(o,a){const l=oe(o),u=et.now(),h=a.reduce((m,E)=>m.add(E.key),fe());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=vi(),b=fe();return l.cs.getEntries(m,h).next(w=>{E=w,E.forEach((I,v)=>{v.isValidDocument()||(b=b.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(w=>{d=w;const I=[];for(const v of a){const k=bO(v,d.get(v.key).overlayedDocument);k!=null&&I.push(new Tr(v.key,k,ZI(k.value.mapValue),Je.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,I,a)}).next(w=>{f=w;const I=w.applyToLocalDocumentSet(d,b);return l.documentOverlayCache.saveOverlays(m,w.batchId,I)})}).then(()=>({batchId:f.batchId,changes:uS(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Be(Ee)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await ql(i,r.changes),await td(i.remoteStore)}catch(r){const s=jg(r,"Failed to persist write");n.reject(s)}}async function $S(t,e){const n=oe(t);try{const i=await p2(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?ve(o.va):r.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await ql(n,i,e)}catch(i){await jl(i)}}function z0(t,e,n){const i=oe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&Ug(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function iL(t,e,n){const i=oe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Be(ne.comparator);o=o.insert(s,rt.newNoDocument(s,re.min()));const a=fe().add(s),l=new Jh(re.min(),new Map,new Be(Ee),o,a);await $S(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Bg(i)}else await Kp(i.localStore,e,!1).then(()=>Qp(i,e,n)).catch(jl)}async function rL(t,e){const n=oe(t),i=e.batch.batchId;try{const r=await f2(n.localStore,e);HS(n,i,null),WS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ql(n,r)}catch(r){await jl(r)}}async function sL(t,e,n){const i=oe(t);try{const r=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(ve(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);HS(i,e,n),WS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await ql(i,r)}catch(r){await jl(r)}}function WS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function HS(t,e,n){const i=oe(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||qS(t,i)})}function qS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Mg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Bg(t))}function $0(t,e,n){for(const i of n)i instanceof US?(t.La.addReference(i.key,e),oL(t,i)):i instanceof BS?(G("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||qS(t,i.key)):ie()}function oL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(i),Bg(t))}function Bg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Ce.fromString(e)),i=t.qa.next();t.Na.set(i,new Q2(n)),t.Oa=t.Oa.insert(n,i),MS(t.remoteStore,new Wi($n(Sg(n.path)),i,"TargetPurposeLimboResolution",vg.oe))}}async function ql(t,e,n){const i=oe(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){r.push(u);const d=Ng.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const h=oe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>B.forEach(u,f=>B.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>B.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Ul(d))throw d;G("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),E=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(f,b)}}}(i.localStore,s))}async function aL(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const i=await RS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Y(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ql(n,i.hs)}}function lL(t,e){const n=oe(t),i=n.Na.get(e);if(i&&i.va)return fe().add(i.key);{let r=fe();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function KS(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iL.bind(null,e),e.Ca.d_=W2.bind(null,e.eventManager),e.Ca.$a=H2.bind(null,e.eventManager),e}function uL(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sL.bind(null,e),e}class lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return d2(this.persistence,new c2,e.initialUser,this.serializer)}Ga(e){return new a2(Rg.Zr,this.serializer)}Wa(e){return new v2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lh.provider={build:()=>new lh};class Yp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>z0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aL.bind(null,this.syncEngine),await j2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new B2}()}createDatastore(e){const n=Zh(e.databaseInfo.databaseId),i=function(s){return new b2(s)}(e.databaseInfo);return function(s,o,a,l){return new x2(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new C2(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>z0(this.syncEngine,n,0),function(){return V0.D()?new V0:new w2}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,h){const d=new Y2(r,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=oe(r);G("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Hl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yp.provider={build:()=>new Yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=oe(r),a={documents:s.map(d=>oh(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ce.emptyPath(),a,s.length),u=new Map;l.forEach(d=>{const f=LO(o.serializer,d);u.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=u.get(d.toString());ve(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new $l(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=ne.fromPath(i);this.mutations.push(new _S(r,this.precondition(r)))}),await async function(i,r){const s=oe(i),o={writes:r.map(a=>kS(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Ce.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie();n=re.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new Y(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?Je.exists(!1):Je.updateTime(n):Je.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new Y(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Je.updateTime(n)}return Je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new Dg(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new hL(this.datastore),n=this.cu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const n=this.updateFunction(e);return!Bl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!vS(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Tt.UNAUTHENTICATED,this.clientId=YI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=jg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function gf(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await RS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function W0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pL(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>F0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>F0(e.remoteStore,r)),t._onlineComponents=e}async function pL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await gf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await gf(t,new lh)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await gf(t,new lh);return t._offlineComponents}async function zg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await W0(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await W0(t,new Yp))),t._onlineComponents}function mL(t){return zg(t).then(e=>e.syncEngine)}function gL(t){return zg(t).then(e=>e.datastore)}async function H0(t){const e=await zg(t),n=e.eventManager;return n.onListen=X2.bind(null,e.syncEngine),n.onUnlisten=eL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yL(t,e,n,i){if(e===!0&&i===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function K0(t){if(!ne.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function G0(t){if(ne.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$g(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Q0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Q0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new PM;switch(i.type){case"firstParty":return new MM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=q0.get(n);i&&(G("ComponentProvider","Removing Datastore"),q0.delete(n),i.terminate())}(this),Promise.resolve()}}function _L(t,e,n,i={}){var r;const s=(t=In(t,nd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Tt.MOCK_USER;else{a=FP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tt(u)}t._authCredentials=new RM(new QI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new id(this.firestore,e,this._query)}}class Nt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class or extends id{constructor(e,n,i){super(e,n,Sg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new ne(e))}withConverter(e){return new or(this.firestore,e,this._path)}}function vL(t,e,...n){if(t=Le(t),QS("collection","path",e),t instanceof nd){const i=Ce.fromString(e,...n);return G0(i),new or(t,null,i)}{if(!(t instanceof Nt||t instanceof or))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ce.fromString(e,...n));return G0(i),new or(t.firestore,null,i)}}function os(t,e,...n){if(t=Le(t),arguments.length===1&&(e=YI.newId()),QS("doc","path",e),t instanceof nd){const i=Ce.fromString(e,...n);return K0(i),new Nt(t,null,new ne(i))}{if(!(t instanceof Nt||t instanceof or))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ce.fromString(e,...n));return K0(i),new Nt(t.firestore,t instanceof or?t.converter:null,new ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Dg(this,"async_queue_retry"),this.Vu=()=>{const i=mf();i&&G("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ul(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw _i("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Fg.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function X0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class fr extends nd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Y0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y0(e),this._firestoreClient=void 0,await e}}}function wL(t,e){const n=typeof t=="object"?t:sI(),i=typeof t=="string"?t:"(default)",r=Ml(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=LP("firestore");s&&_L(r,...s)}return r}function rd(t){if(t._terminated)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EL(t),t._firestoreClient}function EL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,h){return new KM(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new fL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._byteString=e}static fromBase64String(e){try{return new as(gt.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new as(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=/^__.*__$/;class bL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new zl(e,this.data,n,this.fieldTransforms)}}class YS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class qg{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(XS(this.Cu)&&TL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class IL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Zh(e)}Qu(e,n,i,r=!1){return new qg({Cu:e,methodName:n,qu:i,path:ht.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function od(t){const e=t._freezeSettings(),n=Zh(t._databaseId);return new IL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kg(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Xg("Data must be an object, but it was:",o,i);const a=JS(i,o);let l,u;if(s.merge)l=new Yt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Xp(e,d,n);if(!o.contains(f))throw new Y(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ex(h,f)||h.push(f)}l=new Yt(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new bL(new Pt(a),l,u)}class ad extends sd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ad}}class Gg extends sd{_toFieldTransform(e){return new vO(e.path,new wl)}isEqual(e){return e instanceof Gg}}function Qg(t,e,n,i){const r=t.Qu(1,e,n);Xg("Data must be an object, but it was:",r,i);const s=[],o=Pt.empty();ms(i,(l,u)=>{const h=Jg(e,l,n);u=Le(u);const d=r.Nu(h);if(u instanceof ad)s.push(h);else{const f=ld(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Yt(s);return new YS(o,a,r.fieldTransforms)}function Yg(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Xp(e,i,n)],l=[r];if(s.length%2!=0)throw new Y(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Xp(e,s[f])),l.push(s[f+1]);const u=[],h=Pt.empty();for(let f=a.length-1;f>=0;--f)if(!ex(u,a[f])){const m=a[f];let E=l[f];E=Le(E);const b=o.Nu(m);if(E instanceof ad)u.push(m);else{const w=ld(E,b);w!=null&&(u.push(m),h.set(m,w))}}const d=new Yt(u);return new YS(h,d,o.fieldTransforms)}function ld(t,e){if(ZS(t=Le(t)))return Xg("Unsupported field value:",e,t),JS(t,e);if(t instanceof sd)return function(i,r){if(!XS(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=ld(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Le(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=et.fromDate(i);return{timestampValue:sh(r.serializer,s)}}if(i instanceof et){const s=new et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:sh(r.serializer,s)}}if(i instanceof Wg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof as)return{bytesValue:bS(r.serializer,i._byteString)};if(i instanceof Nt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ag(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Hg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return xg(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${$g(i)}`)}(t,e)}function JS(t,e){const n={};return XI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(t,(i,r)=>{const s=ld(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function ZS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Wg||t instanceof as||t instanceof Nt||t instanceof sd||t instanceof Hg)}function Xg(t,e,n){if(!ZS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=$g(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Xp(t,e,n){if((e=Le(e))instanceof No)return e._internalPath;if(typeof e=="string")return Jg(t,e);throw uh("Field path arguments must be of type string or ",t,!1,void 0,n)}const SL=new RegExp("[~\\*/\\[\\]]");function Jg(t,e,n){if(e.search(SL)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new No(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Y(j.INVALID_ARGUMENT,a+t+l)}function ex(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xL extends ch{data(){return super.data()}}function tx(t,e){return typeof e=="string"?Jg(t,e):e instanceof No?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nx{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ms(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>We(o.doubleValue));return new Hg(s)}convertGeoPoint(e){return new Wg(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Eg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(yl(e));default:return null}}convertTimestamp(e){const n=hr(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ce.fromString(e);ve(PS(i));const r=new _l(i.get(1),i.get(3)),s=new ne(i.popFirst(5));return r.isEqual(n)||_i(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class CL extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new as(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ey extends ch{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(tx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class mc extends ey{data(e={}){return super.data(e)}}class AL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Hs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new mc(this._firestore,this._userDataWriter,i.key,i,new Hs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new mc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Hs(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new mc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Hs(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:PL(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}class ty extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new as(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function ix(t,e,n){t=In(t,Nt);const i=In(t.firestore,fr),r=Zg(t.converter,e,n);return ud(i,[Kg(od(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Je.none())])}function RL(t,e,n,...i){t=In(t,Nt);const r=In(t.firestore,fr),s=od(r);let o;return o=typeof(e=Le(e))=="string"||e instanceof No?Yg(s,"updateDoc",t._key,e,n,i):Qg(s,"updateDoc",t._key,e),ud(r,[o.toMutation(t._key,Je.exists(!0))])}function NL(t){return ud(In(t.firestore,fr),[new $l(t._key,Je.none())])}function rx(t,...e){var n,i,r;t=Le(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||X0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(X0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,u,h;if(t instanceof Nt)u=In(t.firestore,fr),h=Sg(t._key.path),l={next:d=>{e[o]&&e[o](DL(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=In(t,id);u=In(d.firestore,fr),h=d._query;const f=new ty(u);l={next:m=>{e[o]&&e[o](new AL(u,f,d,m))},error:e[o+1],complete:e[o+2]},kL(t._query)}return function(f,m,E,b){const w=new cL(b),I=new q2(m,w,E);return f.asyncQueue.enqueueAndForget(async()=>z2(await H0(f),I)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>$2(await H0(f),I))}}(rd(u),h,a,l)}function ud(t,e){return function(i,r){const s=new sr;return i.asyncQueue.enqueueAndForget(async()=>nL(await mL(i),r,s)),s.promise}(rd(t),e)}function DL(t,e,n){const i=n.docs.get(e._key),r=new ty(t);return new ey(t,r,e._key,i,new Hs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=od(e)}set(e,n,i){this._verifyNotCommitted();const r=Ui(e,this._firestore),s=Zg(r.converter,n,i),o=Kg(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Je.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=Ui(e,this._firestore);let o;return o=typeof(n=Le(n))=="string"||n instanceof No?Yg(this._dataReader,"WriteBatch.update",s._key,n,i,r):Qg(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Je.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ui(e,this._firestore);return this._mutations=this._mutations.concat(new $l(n._key,Je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ui(t,e){if((t=Le(t)).firestore!==e)throw new Y(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=od(n)}get(n){const i=Ui(n,this._firestore),r=new CL(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return ie();const o=s[0];if(o.isFoundDocument())return new ch(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new ch(this._firestore,r,i._key,null,i.converter);throw ie()})}set(n,i,r){const s=Ui(n,this._firestore),o=Zg(s.converter,i,r),a=Kg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){const o=Ui(n,this._firestore);let a;return a=typeof(i=Le(i))=="string"||i instanceof No?Yg(this._dataReader,"Transaction.update",o._key,i,r,s):Qg(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=Ui(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ui(e,this._firestore),i=new ty(this._firestore);return super.get(e).then(r=>new ey(this._firestore,i,n._key,r._document,new Hs(!1,!1),n.converter))}}function sx(t,e,n){t=In(t,fr);const i=Object.assign(Object.assign({},ML),n);return function(s){if(s.maxAttempts<1)throw new Y(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new sr;return s.asyncQueue.enqueueAndForget(async()=>{const u=await gL(s);new dL(s.asyncQueue,u,a,o,l).au()}),l.promise}(rd(t),r=>e(new LL(t,r)),i)}function Kl(){return new Gg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){return rd(t=In(t,fr)),new OL(t,e=>ud(t,e))}(function(e,n=!0){(function(r){Ao=r})(Co),Hn(new xn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new fr(new NM(i.getProvider("auth-internal")),new LM(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),hn(p0,"4.7.3",e),hn(p0,"4.7.3","esm2017")})();const ox="@firebase/installations",ny="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=1e4,lx=`w:${ny}`,ux="FIS_v2",FL="https://firebaseinstallations.googleapis.com/v1",jL=60*60*1e3,UL="installations",BL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ls=new fs(UL,BL,zL);function cx(t){return t instanceof Pn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx({projectId:t}){return`${FL}/projects/${t}/installations`}function dx(t){return{token:t.token,requestStatus:2,expiresIn:WL(t.expiresIn),creationTime:Date.now()}}async function fx(t,e){const i=(await e.json()).error;return ls.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function px({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $L(t,{refreshToken:e}){const n=px(t);return n.append("Authorization",HL(e)),n}async function mx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function WL(t){return Number(t.replace("s","000"))}function HL(t){return`${ux} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=hx(t),r=px(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:ux,appId:t.appId,sdkVersion:lx},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await mx(()=>fetch(i,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:dx(u.authToken)}}else throw await fx("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=/^[cdef][\w-]{21}$/,Jp="";function QL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=YL(t);return GL.test(n)?n:Jp}catch{return Jp}}function YL(t){return KL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Map;function _x(t,e){const n=cd(t);vx(n,e),XL(n,e)}function vx(t,e){const n=yx.get(t);if(n)for(const i of n)i(e)}function XL(t,e){const n=JL();n&&n.postMessage({key:t,fid:e}),ZL()}let $r=null;function JL(){return!$r&&"BroadcastChannel"in self&&($r=new BroadcastChannel("[Firebase] FID Change"),$r.onmessage=t=>{vx(t.data.key,t.data.fid)}),$r}function ZL(){yx.size===0&&$r&&($r.close(),$r=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="firebase-installations-database",tV=1,us="firebase-installations-store";let yf=null;function iy(){return yf||(yf=iI(eV,tV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(us)}}})),yf}async function hh(t,e){const n=cd(t),r=(await iy()).transaction(us,"readwrite"),s=r.objectStore(us),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&_x(t,e.fid),e}async function wx(t){const e=cd(t),i=(await iy()).transaction(us,"readwrite");await i.objectStore(us).delete(e),await i.done}async function hd(t,e){const n=cd(t),r=(await iy()).transaction(us,"readwrite"),s=r.objectStore(us),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&_x(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ry(t){let e;const n=await hd(t.appConfig,i=>{const r=nV(i),s=iV(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Jp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function nV(t){const e=t||{fid:QL(),registrationStatus:0};return Ex(e)}function iV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ls.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=rV(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sV(t)}:{installationEntry:e}}async function rV(t,e){try{const n=await qL(t,e);return hh(t.appConfig,n)}catch(n){throw cx(n)&&n.customData.serverCode===409?await wx(t.appConfig):await hh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function sV(t){let e=await J0(t.appConfig);for(;e.registrationStatus===1;)await gx(100),e=await J0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await ry(t);return i||n}return e}function J0(t){return hd(t,e=>{if(!e)throw ls.create("installation-not-found");return Ex(e)})}function Ex(t){return oV(t)?{fid:t.fid,registrationStatus:0}:t}function oV(t){return t.registrationStatus===1&&t.registrationTime+ax<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aV({appConfig:t,heartbeatServiceProvider:e},n){const i=lV(t,n),r=$L(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:lx,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await mx(()=>fetch(i,a));if(l.ok){const u=await l.json();return dx(u)}else throw await fx("Generate Auth Token",l)}function lV(t,{fid:e}){return`${hx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sy(t,e=!1){let n;const i=await hd(t.appConfig,s=>{if(!Tx(s))throw ls.create("not-registered");const o=s.authToken;if(!e&&hV(o))return s;if(o.requestStatus===1)return n=uV(t,e),s;{if(!navigator.onLine)throw ls.create("app-offline");const a=fV(s);return n=cV(t,a),a}});return n?await n:i.authToken}async function uV(t,e){let n=await Z0(t.appConfig);for(;n.authToken.requestStatus===1;)await gx(100),n=await Z0(t.appConfig);const i=n.authToken;return i.requestStatus===0?sy(t,e):i}function Z0(t){return hd(t,e=>{if(!Tx(e))throw ls.create("not-registered");const n=e.authToken;return pV(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function cV(t,e){try{const n=await aV(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await hh(t.appConfig,i),n}catch(n){if(cx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await wx(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hh(t.appConfig,i)}throw n}}function Tx(t){return t!==void 0&&t.registrationStatus===2}function hV(t){return t.requestStatus===2&&!dV(t)}function dV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+jL}function fV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function pV(t){return t.requestStatus===1&&t.requestTime+ax<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t){const e=t,{installationEntry:n,registrationPromise:i}=await ry(e);return i?i.catch(console.error):sy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e=!1){const n=t;return await yV(n),(await sy(n,e)).token}async function yV(t){const{registrationPromise:e}=await ry(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t){if(!t||!t.options)throw _f("App Configuration");if(!t.name)throw _f("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw _f(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function _f(t){return ls.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="installations",vV="installations-internal",wV=t=>{const e=t.getProvider("app").getImmediate(),n=_V(e),i=Ml(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},EV=t=>{const e=t.getProvider("app").getImmediate(),n=Ml(e,bx).getImmediate();return{getId:()=>mV(n),getToken:r=>gV(n,r)}};function TV(){Hn(new xn(bx,wV,"PUBLIC")),Hn(new xn(vV,EV,"PRIVATE"))}TV();hn(ox,ny);hn(ox,ny,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="analytics",bV="firebase_id",IV="origin",SV=60*1e3,xV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",oy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht=new $h("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},dn=new fs("analytics","Analytics",kV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t){if(!t.startsWith(oy)){const e=dn.create("invalid-gtag-resource",{gtagURL:t});return Ht.warn(e.message),""}return t}function Ix(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function AV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function PV(t,e){const n=AV("firebase-js-sdk-policy",{createScriptURL:CV}),i=document.createElement("script"),r=`${oy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function RV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function NV(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await Ix(n)).find(u=>u.measurementId===r);l&&await e[l.appId]}}catch(a){Ht.error(a)}t("config",r,s)}async function DV(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await Ix(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Ht.error(s)}}function MV(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await DV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await NV(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Ht.error(a)}}return r}function OV(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=MV(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function LV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(oy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=30,FV=1e3;class jV{constructor(e={},n=FV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Sx=new jV;function UV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function BV(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:UV(i)},s=xV.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw dn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function zV(t,e=Sx,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw dn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw dn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new HV;return setTimeout(async()=>{a.abort()},SV),xx({appId:i,apiKey:r,measurementId:s},o,a,e)}async function xx(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Sx){var s;const{appId:o,measurementId:a}=t;try{await $V(i,e)}catch(l){if(a)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await BV(t);return r.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!WV(u)){if(r.deleteThrottleMetadata(o),a)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?jv(n,r.intervalMillis,VV):jv(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Ht.debug(`Calling attemptFetch again in ${h} millis`),xx(t,d,i,r)}}function $V(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function WV(t){if(!(t instanceof Pn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class HV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function qV(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(){if(Zb())try{await eI()}catch(t){return Ht.warn(dn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ht.warn(dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function GV(t,e,n,i,r,s,o){var a;const l=zV(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ht.error(m)),e.push(l);const u=KV().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,u]);LV(s)||PV(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[IV]="firebase",f.update=!0,d!=null&&(f[bV]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.app=e}_delete(){return delete Ba[this.app.options.appId],Promise.resolve()}}let Ba={},tw=[];const nw={};let vf="dataLayer",YV="gtag",iw,kx,rw=!1;function XV(){const t=[];if(Jb()&&t.push("This is a browser extension environment."),HP()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=dn.create("invalid-analytics-context",{errorInfo:e});Ht.warn(n.message)}}function JV(t,e,n){XV();const i=t.options.appId;if(!i)throw dn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw dn.create("no-api-key");if(Ba[i]!=null)throw dn.create("already-exists",{id:i});if(!rw){RV(vf);const{wrappedGtag:s,gtagCore:o}=OV(Ba,tw,nw,vf,YV);kx=s,iw=o,rw=!0}return Ba[i]=GV(t,tw,nw,e,iw,vf,n),new QV(t)}function ZV(t,e,n,i){t=Le(t),qV(kx,Ba[t.app.options.appId],e,n,i).catch(r=>Ht.error(r))}const sw="@firebase/analytics",ow="0.10.8";function eF(){Hn(new xn(ew,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return JV(i,r,n)},"PUBLIC")),Hn(new xn("analytics-internal",t,"PRIVATE")),hn(sw,ow),hn(sw,ow,"esm2017");function t(e){try{const n=e.getProvider(ew).getImmediate();return{logEvent:(i,r,s)=>ZV(n,i,r,s)}}catch(n){throw dn.create("interop-component-reg-failed",{reason:n})}}}eF();const tF={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},Cx=rI(tF),sa=xM(Cx),Cn=wL(Cx),Ax=M.createContext(null);function nF({children:t}){const[e,n]=M.useState(null),[i,r]=M.useState(!0),[s,o]=M.useState(null);M.useEffect(()=>{const l=pD(sa,u=>{n(u),r(!1)});return()=>l()},[]);const a=M.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,u){o(null);try{return(await lD(sa,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,u){o(null);try{return(await uD(sa,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await mD(sa)},async resetPassword(l){o(null);try{await aD(sa,l)}catch(u){throw o((u==null?void 0:u.message)||"Failed to send reset email."),u}}}),[e,i,s]);return y.jsx(Ax.Provider,{value:a,children:t})}function Ti(){return M.useContext(Ax)}function iF(){const{user:t,logout:e}=Ti(),n=ko();async function i(){await e(),n("/dashboard")}return y.jsx("div",{className:"nav",children:y.jsxs("div",{className:"nav-inner",children:[y.jsxs("div",{className:"brand",children:[y.jsx("div",{className:"badge"}),y.jsxs("div",{children:[y.jsx("h1",{children:"Body Recomposition Tracker"}),y.jsx("div",{className:"small",children:"Created by Andre Gomes"})]})]}),y.jsxs("div",{className:"nav-links",children:[y.jsxs("div",{className:"nav-tabs",children:[y.jsx(Ss,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),y.jsx(Ss,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&y.jsx(Ss,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&y.jsx(Ss,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),y.jsx("div",{className:"nav-actions",children:t?y.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):y.jsxs(y.Fragment,{children:[y.jsx(Ss,{to:"/login",className:"btn",children:"Log in"}),y.jsx(Ss,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function aw({children:t}){const{user:e,initializing:n}=Ti();return n?y.jsx("div",{className:"panel",children:y.jsx("div",{className:"muted",children:"Loading"})}):e?t:y.jsx(kp,{to:"/login",replace:!0})}const Px=M.createContext(null),lw={email:"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],createdAt:null};function rF(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function sF(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:rF(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).sort((e,n)=>String(n.startDateIso||"").localeCompare(String(e.startDateIso||""))):[]}function oF({children:t}){const{user:e}=Ti(),[n,i]=M.useState(lw),[r,s]=M.useState(!1),[o,a]=M.useState(null);M.useEffect(()=>{if(i(lw),a(null),!e)return;const u=os(Cn,"users",e.uid);s(!0);const h=rx(u,async d=>{if(!d.exists()){await ix(u,{email:e.email||"",sex:"",height:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],cycles:[],createdAt:Kl()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],cycles:sF(f.cycles),createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=M.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(u){if(!e)throw new Error("Not authenticated");a(null);const h=os(Cn,"users",e.uid);await RL(h,u)}}),[n,r,o,e]);return y.jsx(Px.Provider,{value:l,children:t})}function ay(){return M.useContext(Px)}function ly(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function dh(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function fh(){return ly(new Date)}function aF(t,e){const n=dh(t);return n.setDate(n.getDate()+Number(e)),ly(n)}function lF(t,e){return t.dateIso.localeCompare(e.dateIso)}function uy(t,e,n){const i=vL(Cn,"users",t,"entries");return rx(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(lF);e(o)},n)}async function uF(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=os(Cn,"users",t,"entries",n),r=dh(n),s={...e,dateIso:n,date:e.date||r,updatedAt:Kl()};await ix(i,s,{merge:!0})}async function cF(t,e){const n=VL(Cn);for(const i of e||[]){const r=i==null?void 0:i.dateIso,s=i==null?void 0:i.patch;if(!r||!s)continue;const o=os(Cn,"users",t,"entries",r);n.update(o,{...s,updatedAt:Kl()})}await n.commit()}async function hF(t,e){const n=os(Cn,"users",t,"entries",e);await NL(n)}const dF=2/8;function Rx({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function Lr(t,e){const n=Number(t),i=Number(e);if(!Number.isFinite(n)||n<=0||!Number.isFinite(i)||i<=0||i>=37)return null;const r=n*(36/(37-i));return Number.isFinite(r)?r:null}function fF({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>r==null||r===""?NaN:Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function xs(t,e=dF){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function pF(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function wf(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=pF(i,r,s);return Number.isFinite(o)?o:null}function mF({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=wf(n,"neck",i),a=wf(n,"waist",i),l=wf(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const u=a-o;if(!(u>0))return null;const h=495/(1.0324-.19077*Math.log10(u)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const u=a+l-o;if(!(u>0))return null;const h=495/(1.29579-.35004*Math.log10(u)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function gF({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function Nx(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(a=>({dateIso:a.dateIso,weight:Cr(a.weight),protein:Cr(a.protein),carbs:Cr(a.carbs),fats:Cr(a.fats),bench:Cr(a.bench),squat:Cr(a.squat),deadlift:Cr(a.deadlift),calories:Rx(a),avgStrength:fF(a),bfPct:mF({sex:i,heightCm:r,entry:a,tripleEnabled:n})}));s.forEach(a=>{a.lbm=gF({weightKg:a.weight,bfPct:a.bfPct})});const o={weight:xs(s.map(a=>a.weight)),bench:xs(s.map(a=>a.bench)),squat:xs(s.map(a=>a.squat)),deadlift:xs(s.map(a=>a.deadlift)),calories:xs(s.map(a=>a.calories)),avgStrength:xs(s.map(a=>a.avgStrength))};return s.map((a,l)=>({...a,wma:{weight:o.weight[l],bench:o.bench[l],squat:o.squat[l],deadlift:o.deadlift[l],calories:o.calories[l],avgStrength:o.avgStrength[l]}}))}function yF(t){var f,m,E,b;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=w=>w*7-1;function s(w){var I;for(let v=w;v>=0;v--){const k=(I=t[v])==null?void 0:I.lbm;if(Number.isFinite(k))return k}return null}for(let w=1;w<=i;w++){const I=(w-1)*7,v=r(w),k=t.slice(I,v+1),R=oa(k.map(A=>A.calories)),D=oa(k.map(A=>{var ae;return(ae=A==null?void 0:A.wma)==null?void 0:ae.avgStrength})),O=(m=(f=k[0])==null?void 0:f.wma)==null?void 0:m.weight,T=(b=(E=k[k.length-1])==null?void 0:E.wma)==null?void 0:b.weight,_=Number.isFinite(O)&&Number.isFinite(T)?T-O:null;let x=null;if(Number.isFinite(R)&&Number.isFinite(_)){const ae=-_*7700/7;x=R+ae}const C=s(v);let P=null,N="";Number.isFinite(C)&&Number.isFinite(_)&&(P=Math.max(0,-_)/C*100,P<.5?N="Conservative":P<=1?N="Optimal":N="Aggressive"),e.push({week:w,avgCalories:R,weightChange:_,tdee:x,avgStrengthWma:D,lbm:C,lossRatePct:P,lossRateStatus:N,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(w=>w.tdee).filter(Number.isFinite),a=o.length?oa(o):null,l=e.slice(0,2).map(w=>w.avgStrengthWma).filter(Number.isFinite),u=l.length?oa(l):null,h=e.slice(0,2).map(w=>Number.isFinite(w.weightChange)?Math.max(0,-w.weightChange):null).filter(Number.isFinite),d=h.length?oa(h):null;if(Number.isFinite(a))for(const w of e)Number.isFinite(w.tdee)&&(w.tdeeChangeFromBaseline=w.tdee-a,w.adaptationPct=w.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:u,baselineWeeklyLoss:d}}function Cr(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function oa(t){const e=(t||[]).map(n=>n==null||n===""?NaN:Number(n)).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function Jn(){let t=0,e=0;for(;t===0;)t=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}function uw(t,e,n){return Math.max(e,Math.min(n,t))}function _F(){return{email:"sample@demo.local",sex:"male",height:175,triplemeasurements:!1,createdAt:null}}function vF(t=60){const e=new Date;e.setDate(e.getDate()-(t-1));const n=[];let i=90,r=100,s=140,o=180;for(let a=0;a<t;a++){const l=new Date(e);l.setDate(e.getDate()+a);const u=ly(l),d=2400-Math.floor(a/14)*125;i-=5.5/(t-1),r+=4/(t-1),s+=4/(t-1),o+=5/(t-1);const f=i+Jn()*.8,m=r+Jn()*2,E=s+Jn()*2.5,b=o+Jn()*2.8,w=180+Jn()*10,I=70+Jn()*6,v=(d-4*w-9*I)/4+Jn()*10,k={id:u,dateIso:u,date:null,weight:Mu(f),protein:Ef(w),carbs:Ef(uw(v,100,320)),fats:Ef(uw(I,45,95)),bench:Mu(m),squat:Mu(E),deadlift:Mu(b),neck:null,waist:null,hip:null};if(a%7===0){const O=96+-7*(a/(t-1));k.neck=40+Jn()*.3,k.waist=O+Jn()*.6}n.push(k)}return n}function Ef(t){return Number.isFinite(t)?Math.round(t):null}function Mu(t){return Number.isFinite(t)?Math.round(t*10)/10:null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Gl(t){return t+.5|0}const Hi=(t,e,n)=>Math.max(Math.min(t,n),e);function Ea(t){return Hi(Gl(t*2.55),0,255)}function ar(t){return Hi(Gl(t*255),0,255)}function ri(t){return Hi(Gl(t/2.55)/100,0,1)}function cw(t){return Hi(Gl(t*100),0,100)}const sn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zp=[..."0123456789ABCDEF"],wF=t=>Zp[t&15],EF=t=>Zp[(t&240)>>4]+Zp[t&15],Ou=t=>(t&240)>>4===(t&15),TF=t=>Ou(t.r)&&Ou(t.g)&&Ou(t.b)&&Ou(t.a);function bF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&sn[t[1]]*17,g:255&sn[t[2]]*17,b:255&sn[t[3]]*17,a:e===5?sn[t[4]]*17:255}:(e===7||e===9)&&(n={r:sn[t[1]]<<4|sn[t[2]],g:sn[t[3]]<<4|sn[t[4]],b:sn[t[5]]<<4|sn[t[6]],a:e===9?sn[t[7]]<<4|sn[t[8]]:255})),n}const IF=(t,e)=>t<255?e(t):"";function SF(t){var e=TF(t)?wF:EF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+IF(t.a,e):void 0}const xF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Dx(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function kF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function CF(t,e,n){const i=Dx(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function AF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function cy(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=AF(n,i,r,h,s),l=l*60+.5),[l|0,u||0,a]}function hy(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ar)}function dy(t,e,n){return hy(Dx,t,e,n)}function PF(t,e,n){return hy(CF,t,e,n)}function RF(t,e,n){return hy(kF,t,e,n)}function Mx(t){return(t%360+360)%360}function NF(t){const e=xF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ea(+e[5]):ar(+e[5]));const r=Mx(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=PF(r,s,o):e[1]==="hsv"?i=RF(r,s,o):i=dy(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function DF(t,e){var n=cy(t);n[0]=Mx(n[0]+e),n=dy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function MF(t){if(!t)return;const e=cy(t),n=e[0],i=cw(e[1]),r=cw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${ri(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const hw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function OF(){const t={},e=Object.keys(dw),n=Object.keys(hw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,hw[s]);s=parseInt(dw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Lu;function LF(t){Lu||(Lu=OF(),Lu.transparent=[0,0,0,0]);const e=Lu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const VF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function FF(t){const e=VF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ea(o):Hi(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Ea(i):Hi(i,0,255)),r=255&(e[4]?Ea(r):Hi(r,0,255)),s=255&(e[6]?Ea(s):Hi(s,0,255)),{r:i,g:r,b:s,a:n}}}function jF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ri(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Tf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ks=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function UF(t,e,n){const i=ks(ri(t.r)),r=ks(ri(t.g)),s=ks(ri(t.b));return{r:ar(Tf(i+n*(ks(ri(e.r))-i))),g:ar(Tf(r+n*(ks(ri(e.g))-r))),b:ar(Tf(s+n*(ks(ri(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Vu(t,e,n){if(t){let i=cy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=dy(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Ox(t,e){return t&&Object.assign(e||{},t)}function fw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ar(t[3]))):(e=Ox(t,{r:0,g:0,b:0,a:1}),e.a=ar(e.a)),e}function BF(t){return t.charAt(0)==="r"?FF(t):NF(t)}class bl{constructor(e){if(e instanceof bl)return e;const n=typeof e;let i;n==="object"?i=fw(e):n==="string"&&(i=bF(e)||LF(e)||BF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Ox(this._rgb);return e&&(e.a=ri(e.a)),e}set rgb(e){this._rgb=fw(e)}rgbString(){return this._valid?jF(this._rgb):void 0}hexString(){return this._valid?SF(this._rgb):void 0}hslString(){return this._valid?MF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=UF(this._rgb,e._rgb,n)),this}clone(){return new bl(this.rgb)}alpha(e){return this._rgb.a=ar(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Gl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vu(this._rgb,2,e),this}darken(e){return Vu(this._rgb,2,-e),this}saturate(e){return Vu(this._rgb,1,e),this}desaturate(e){return Vu(this._rgb,1,-e),this}rotate(e){return DF(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Zn(){}const zF=(()=>{let t=0;return()=>t++})();function Pe(t){return t==null}function dt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Te(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function mn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Nn(t,e){return mn(t)?t:e}function ye(t,e){return typeof t>"u"?e:t}const $F=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function De(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ie(t,e,n,i){let r,s,o;if(dt(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(Te(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function ph(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function mh(t){if(dt(t))return t.map(mh);if(Te(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=mh(t[n[r]]);return e}return t}function Lx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function WF(t,e,n,i){if(!Lx(t))return;const r=e[t],s=n[t];Te(r)&&Te(s)?Il(r,s,i):e[t]=mh(s)}function Il(t,e,n){const i=dt(e)?e:[e],r=i.length;if(!Te(t))return t;n=n||{};const s=n.merger||WF;let o;for(let a=0;a<r;++a){if(o=i[a],!Te(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],t,o,n)}return t}function za(t,e){return Il(t,e,{merger:HF})}function HF(t,e,n){if(!Lx(t))return;const i=e[t],r=n[t];Te(i)&&Te(r)?za(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=mh(r))}const pw={"":t=>t,x:t=>t.x,y:t=>t.y};function qF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function KF(t){const e=qF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function gh(t,e){return(pw[e]||(pw[e]=KF(e)))(t)}function fy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const yh=t=>typeof t<"u",pr=t=>typeof t=="function",mw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function GF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const It=Math.PI,Wn=2*It,QF=Wn+It,_h=Number.POSITIVE_INFINITY,YF=It/180,En=It/2,Ar=It/4,gw=It*2/3,Vx=Math.log10,vo=Math.sign;function $a(t,e,n){return Math.abs(t-e)<n}function yw(t){const e=Math.round(t);t=$a(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Vx(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function XF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function JF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Sl(t){return!JF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function ZF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function ej(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Wr(t){return t*(It/180)}function tj(t){return t*(180/It)}function _w(t){if(!mn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function nj(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*It&&(s+=Wn),{angle:s,distance:r}}function em(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ij(t,e){return(t-e+QF)%Wn-It}function Ri(t){return(t%Wn+Wn)%Wn}function Fx(t,e,n,i){const r=Ri(t),s=Ri(e),o=Ri(n),a=Ri(s-r),l=Ri(o-r),u=Ri(r-s),h=Ri(r-o);return r===s||r===o||i&&s===o||a>l&&u<h}function un(t,e,n){return Math.max(e,Math.min(n,t))}function rj(t){return un(t,-32768,32767)}function Ta(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function py(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Hr=(t,e,n,i)=>py(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),sj=(t,e,n)=>py(t,n,i=>t[i][e]>=n);function oj(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const jx=["push","pop","shift","splice","unshift"];function aj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),jx.forEach(n=>{const i="_onData"+fy(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function vw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(jx.forEach(s=>{delete t[s]}),delete t._chartjs)}function lj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ux=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Bx(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Ux.call(window,()=>{i=!1,t.apply(e,n)}))}}function uj(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const zx=t=>t==="start"?"left":t==="end"?"right":"center",Kt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,cj=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function hj(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:E}=o.getUserBounds();if(m){if(r=Math.min(Hr(l,h,d).lo,n?i:Hr(e,h,o.getPixelForValue(d)).lo),u){const b=l.slice(0,r+1).reverse().findIndex(w=>!Pe(w[a.axis]));r-=Math.max(0,b)}r=un(r,0,i-1)}if(E){let b=Math.max(Hr(l,o.axis,f,!0).hi+1,n?0:Hr(e,h,o.getPixelForValue(f),!0).hi+1);if(u){const w=l.slice(b-1).findIndex(I=>!Pe(I[a.axis]));b+=Math.max(0,w)}s=un(b,r,i)-r}else s=i-r}return{start:r,count:s}}function dj(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Fu=t=>t===0||t===1,ww=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Wn/n)),Ew=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Wn/n)+1,Wa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*En)+1,easeOutSine:t=>Math.sin(t*En),easeInOutSine:t=>-.5*(Math.cos(It*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Fu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Fu(t)?t:ww(t,.075,.3),easeOutElastic:t=>Fu(t)?t:Ew(t,.075,.3),easeInOutElastic(t){return Fu(t)?t:t<.5?.5*ww(t*2,.1125,.45):.5+.5*Ew(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Wa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Wa.easeInBounce(t*2)*.5:Wa.easeOutBounce(t*2-1)*.5+.5};function my(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Tw(t){return my(t)?t:new bl(t)}function bf(t){return my(t)?t:new bl(t).saturate(.5).darken(.1).hexString()}const fj=["x","y","borderWidth","radius","tension"],pj=["color","borderColor","backgroundColor"];function mj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:pj},numbers:{type:"number",properties:fj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function gj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const bw=new Map;function yj(t,e){e=e||{};const n=t+JSON.stringify(e);let i=bw.get(n);return i||(i=new Intl.NumberFormat(t,e),bw.set(n,i)),i}function $x(t,e,n){return yj(e,n).format(t)}const _j={values(t){return dt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=vj(t,n)}const o=Vx(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),$x(t,i,l)}};function vj(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Wx={formatters:_j};function wj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Wx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const cs=Object.create(null),tm=Object.create(null);function Ha(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function If(t,e,n){return typeof e=="string"?Il(Ha(t,e),n):Il(Ha(t,""),e)}class Ej{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>bf(r.backgroundColor),this.hoverBorderColor=(i,r)=>bf(r.borderColor),this.hoverColor=(i,r)=>bf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return If(this,e,n)}get(e){return Ha(this,e)}describe(e,n){return If(tm,e,n)}override(e,n){return If(cs,e,n)}route(e,n,i,r){const s=Ha(this,e),o=Ha(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return Te(l)?Object.assign({},u,l):ye(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var qe=new Ej({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mj,gj,wj]);function Tj(t){return!t||Pe(t.size)||Pe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Iw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Pr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Sw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function nm(t,e,n,i){Hx(t,e,n,i,null)}function Hx(t,e,n,i,r){let s,o,a,l,u,h,d,f;const m=e.pointStyle,E=e.rotation,b=e.radius;let w=(E||0)*YF;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,b,0,0,Wn):t.arc(n,i,b,0,Wn),t.closePath();break;case"triangle":h=r?r/2:b,t.moveTo(n+Math.sin(w)*h,i-Math.cos(w)*b),w+=gw,t.lineTo(n+Math.sin(w)*h,i-Math.cos(w)*b),w+=gw,t.lineTo(n+Math.sin(w)*h,i-Math.cos(w)*b),t.closePath();break;case"rectRounded":u=b*.516,l=b-u,o=Math.cos(w+Ar)*l,d=Math.cos(w+Ar)*(r?r/2-u:l),a=Math.sin(w+Ar)*l,f=Math.sin(w+Ar)*(r?r/2-u:l),t.arc(n-d,i-a,u,w-It,w-En),t.arc(n+f,i-o,u,w-En,w),t.arc(n+d,i+a,u,w,w+En),t.arc(n-f,i+o,u,w+En,w+It),t.closePath();break;case"rect":if(!E){l=Math.SQRT1_2*b,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}w+=Ar;case"rectRot":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":w+=Ar;case"cross":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),w+=Ar,d=Math.cos(w)*(r?r/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,f=Math.sin(w)*(r?r/2:b),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(w)*b,a=Math.sin(w)*b,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(r?r/2:b),i+Math.sin(w)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function xl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function gy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function yy(t){t.restore()}function bj(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Ij(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Sj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Pe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function xj(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function kj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function vh(t,e,n,i,r,s={}){const o=dt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,Sj(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&kj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Pe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,i,s.maxWidth)),t.fillText(u,n,i,s.maxWidth),xj(t,n,i,u,s),i+=Number(r.lineHeight);t.restore()}function im(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*It,It,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,It,En,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,En,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-En,!0),t.lineTo(n+o.topLeft,i)}const Cj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Aj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Pj(t,e){const n=(""+t).match(Cj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Rj=t=>+t||0;function qx(t,e){const n={},i=Te(e),r=i?Object.keys(e):e,s=Te(t)?i?o=>ye(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Rj(s(o));return n}function Nj(t){return qx(t,{top:"y",right:"x",bottom:"y",left:"x"})}function qa(t){return qx(t,["topLeft","topRight","bottomLeft","bottomRight"])}function An(t){const e=Nj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bt(t,e){t=t||{},e=e||qe.font;let n=ye(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ye(t.style,e.style);i&&!(""+i).match(Aj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ye(t.family,e.family),lineHeight:Pj(ye(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ye(t.weight,e.weight),string:""};return r.string=Tj(r),r}function ju(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Dj(t,e,n){const{min:i,max:r}=t,s=$F(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ys(t,e){return Object.assign(Object.create(t),e)}function _y(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Yx("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>_y([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Gx(a,l,()=>Bj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return kw(a).includes(l)},ownKeys(a){return kw(a)},set(a,l,u){const h=a._storage||(a._storage=r());return a[l]=h[l]=u,delete a._keys,!0}})}function wo(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Kx(t,i),setContext:s=>wo(t,s,n,i),override:s=>wo(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return Gx(s,o,()=>Oj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function Kx(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:pr(n)?n:()=>n,isIndexable:pr(i)?i:()=>i}}const Mj=(t,e)=>t?t+fy(e):e,vy=(t,e)=>Te(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Gx(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Oj(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return pr(a)&&o.isScriptable(e)&&(a=Lj(e,a,t,n)),dt(a)&&a.length&&(a=Vj(e,a,t,o.isIndexable)),vy(e,a)&&(a=wo(a,r,s&&s[e],o)),a}function Lj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),vy(t,l)&&(l=wy(r._scopes,r,t,l)),l}function Vj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(Te(e[0])){const l=e,u=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=wy(u,r,t,h);e.push(wo(d,s,o&&o[t],a))}}return e}function Qx(t,e,n){return pr(t)?t(e,n):t}const Fj=(t,e)=>t===!0?e:typeof t=="string"?gh(e,t):void 0;function jj(t,e,n,i,r){for(const s of e){const o=Fj(n,s);if(o){t.add(o);const a=Qx(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function wy(t,e,n,i){const r=e._rootScopes,s=Qx(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=xw(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=xw(a,o,s,l,i),l===null)?!1:_y(Array.from(a),[""],r,s,()=>Uj(e,n,i))}function xw(t,e,n,i,r){for(;n;)n=jj(t,e,n,i,r);return n}function Uj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return dt(r)&&Te(n)?n:r||{}}function Bj(t,e,n,i){let r;for(const s of e)if(r=Yx(Mj(s,t),n),typeof r<"u")return vy(t,r)?wy(n,i,t,r):r}function Yx(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function kw(t){let e=t._keys;return e||(e=t._keys=zj(t._scopes)),e}function zj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const $j=Number.EPSILON||1e-14,Eo=(t,e)=>e<t.length&&!t[e].skip&&t[e],Xx=t=>t==="x"?"y":"x";function Wj(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=em(s,r),l=em(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function Hj(t,e,n){const i=t.length;let r,s,o,a,l,u=Eo(t,0);for(let h=0;h<i-1;++h)if(l=u,u=Eo(t,h+1),!(!l||!u)){if($a(e[h],0,$j)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function qj(t,e,n="x"){const i=Xx(n),r=t.length;let s,o,a,l=Eo(t,0);for(let u=0;u<r;++u){if(o=a,a=l,l=Eo(t,u+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[u]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[u])}}function Kj(t,e="x"){const n=Xx(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,u=Eo(t,0);for(o=0;o<i;++o)if(a=l,l=u,u=Eo(t,o+1),!!l){if(u){const h=u[e]-l[e];r[o]=h!==0?(u[n]-l[n])/h:0}s[o]=a?u?vo(r[o-1])!==vo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Hj(t,r,s),qj(t,s,e)}function Uu(t,e,n){return Math.max(Math.min(t,n),e)}function Gj(t,e){let n,i,r,s,o,a=xl(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&xl(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Uu(r.cp1x,e.left,e.right),r.cp1y=Uu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Uu(r.cp2x,e.left,e.right),r.cp2y=Uu(r.cp2y,e.top,e.bottom)))}function Qj(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Kj(t,r);else{let u=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Wj(u,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&Gj(t,n)}function Ey(){return typeof window<"u"&&typeof document<"u"}function Ty(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function wh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const dd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Yj(t,e){return dd(t).getPropertyValue(e)}const Xj=["top","right","bottom","left"];function Qr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Xj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Jj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Zj(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Jj(r,s,t.target))a=r,l=s;else{const u=e.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Vr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=dd(n),s=r.boxSizing==="border-box",o=Qr(r,"padding"),a=Qr(r,"border","width"),{x:l,y:u,box:h}=Zj(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:E}=e;return s&&(m-=o.width+a.width,E-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((u-f)/E*n.height/i)}}function e4(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Ty(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=dd(s),l=Qr(a,"border","width"),u=Qr(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,i=wh(a.maxWidth,s,"clientWidth"),r=wh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||_h,maxHeight:r||_h}}const qi=t=>Math.round(t*10)/10;function t4(t,e,n,i){const r=dd(t),s=Qr(r,"margin"),o=wh(r.maxWidth,t,"clientWidth")||_h,a=wh(r.maxHeight,t,"clientHeight")||_h,l=e4(t,e,n);let{width:u,height:h}=l;if(r.boxSizing==="content-box"){const f=Qr(r,"border","width"),m=Qr(r,"padding");u-=m.width+f.width,h-=m.height+f.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=qi(Math.min(u,o,l.maxWidth)),h=qi(Math.min(h,a,l.maxHeight)),u&&!h&&(h=qi(u/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,u=qi(Math.floor(h*i))),{width:u,height:h}}function Cw(t,e,n){const i=e||1,r=qi(t.height*i),s=qi(t.width*i);t.height=qi(t.height),t.width=qi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const n4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ey()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Aw(t,e){const n=Yj(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Fr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function i4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function r4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Fr(t,r,n),a=Fr(r,s,n),l=Fr(s,e,n),u=Fr(o,a,n),h=Fr(a,l,n);return Fr(u,h,n)}const s4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},o4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function no(t,e,n){return t?s4(e,n):o4()}function Jx(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Zx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ek(t){return t==="angle"?{between:Fx,compare:ij,normalize:Ri}:{between:Ta,compare:(e,n)=>e-n,normalize:e=>e}}function Pw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function a4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=ek(i),l=e.length;let{start:u,end:h,loop:d}=t,f,m;if(d){for(u+=l,h+=l,f=0,m=l;f<m&&o(a(e[u%l][i]),r,s);++f)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:d,style:t.style}}function l4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=ek(i),{start:h,end:d,loop:f,style:m}=a4(t,e,n),E=[];let b=!1,w=null,I,v,k;const R=()=>l(r,k,I)&&a(r,k)!==0,D=()=>a(s,I)===0||l(s,k,I),O=()=>b||R(),T=()=>!b||D();for(let _=h,x=h;_<=d;++_)v=e[_%o],!v.skip&&(I=u(v[i]),I!==k&&(b=l(I,r,s),w===null&&O()&&(w=a(I,r)===0?_:x),w!==null&&T()&&(E.push(Pw({start:w,end:_,loop:f,count:o,style:m})),w=null),x=_,k=I));return w!==null&&E.push(Pw({start:w,end:d,loop:f,count:o,style:m})),E}function u4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=l4(i[r],t.points,e);s.length&&n.push(...s)}return n}function c4(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function h4(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function d4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=c4(n,r,s,i);if(i===!0)return Rw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,u=!!t._fullLoop&&o===0&&a===r-1;return Rw(t,h4(n,o,l,u),n,e)}function Rw(t,e,n,i){return!i||!i.setContext||!n?e:f4(t,e,n,i)}function f4(t,e,n,i){const r=t._chart.getContext(),s=Nw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=s,d=e[0].start,f=d;function m(E,b,w,I){const v=a?-1:1;if(E!==b){for(E+=l;n[E%l].skip;)E-=v;for(;n[b%l].skip;)b+=v;E%l!==b%l&&(u.push({start:E%l,end:b%l,loop:w,style:I}),h=I,d=b%l)}}for(const E of e){d=a?d:E.start;let b=n[d%l],w;for(f=d+1;f<=E.end;f++){const I=n[f%l];w=Nw(i.setContext(ys(r,{type:"segment",p0:b,p1:I,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),p4(w,h)&&m(d,f-1,E.loop,h),b=I,h=w}d<f-1&&m(d,f-1,E.loop,h)}return u}function Nw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function p4(t,e){if(!e)return!1;const n=[],i=function(r,s){return my(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Bu(t,e,n){return t.options.clip?t[n]:e[n]}function m4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Bu(n,e,"left"),right:Bu(n,e,"right"),top:Bu(i,e,"top"),bottom:Bu(i,e,"bottom")}:e}function g4(t,e){const n=e._clip;if(n.disabled)return!1;const i=m4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class y4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ux.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ei=new y4;const Dw="transparent",_4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Tw(t||Dw),r=i.valid&&Tw(e||Dw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class v4{constructor(e,n,i,r){const s=n[i];r=ju([e.to,r,s,e.from]);const o=ju([e.from,s,r]);this._active=!0,this._fn=e.fn||_4[e.type||typeof o],this._easing=Wa[e.easing]||Wa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ju([e.to,n,r,e.from]),this._from=ju([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class tk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Te(e))return;const n=Object.keys(qe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Te(s))return;const o={};for(const a of n)o[a]=s[a];(dt(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=E4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&w4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[u];let d=s[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}s[u]=d=new v4(f,e,u,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return ei.add(this._chart,i),!0}}function w4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function E4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Mw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function T4(t,e,n){if(n===!1)return!1;const i=Mw(t,n),r=Mw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function b4(t){let e,n,i,r;return Te(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function nk(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Ow(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}u=t.values[l],mn(u)&&(s||e===0||vo(e)===vo(u))&&(e+=u)}return!h&&!i.all?0:e}function I4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function Sf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function S4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function x4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function k4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Lw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Vw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,u=o.axis,h=S4(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const E=e[m],{[l]:b,[u]:w}=E,I=E._stacks||(E._stacks={});f=I[u]=k4(r,h,b),f[a]=w,f._top=Lw(f,o,!0,i.type),f._bottom=Lw(f,o,!1,i.type);const v=f._visualValues||(f._visualValues={});v[a]=w}}function xf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function C4(t,e){return ys(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function A4(t,e,n){return ys(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function aa(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const kf=t=>t==="reset"||t==="none",Fw=(t,e)=>e?t:Object.assign({},t),P4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:nk(n,!0),values:null};class Ka{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Sf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&aa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,E)=>d==="x"?f:d==="r"?E:m,s=n.xAxisID=ye(i.xAxisID,xf(e,"x")),o=n.yAxisID=ye(i.yAxisID,xf(e,"y")),a=n.rAxisID=ye(i.rAxisID,xf(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&vw(this._data,this),e._stacked&&aa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Te(n)){const r=this._cachedMeta;this._data=I4(n,r)}else if(i!==n){if(i){vw(i,this);const r=this._cachedMeta;aa(r),r._parsed=[]}n&&Object.isExtensible(n)&&aj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Sf(n.vScale,n),n.stack!==i.stack&&(r=!0,aa(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(Vw(this,n._parsed),n._stacked=Sf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{dt(r[e])?f=this.parseArrayData(i,r,e,n):Te(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),u=d);i._sorted=l}o&&Vw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,d=new Array(r);let f,m,E;for(f=0,m=r;f<m;++f)E=f+i,d[f]={[a]:h||s.parse(u[E],E),[l]:o.parse(n[E],E)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],u[h]={x:s.parse(gh(m,a),f),y:o.parse(gh(m,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:nk(r,!0),values:n._stacks[e.axis]._visualValues};return Ow(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=Ow(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=P4(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=x4(a);let f,m;function E(){m=r[f];const b=m[a.axis];return!mn(m[e.axis])||h>b||d<b}for(f=0;f<o&&!(!E()&&(this.updateRangeFromParsed(u,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!E()){this.updateRangeFromParsed(u,e,m,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],mn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=b4(ye(this.options.clip,T4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&u?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=A4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=C4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&yh(i);if(a)return Fw(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),m=Object.keys(qe.elements[e]),E=()=>this.getContext(i,r,n),b=u.resolveNamedOptions(f,m,E,d);return b.$shared&&(b.$shared=l,s[o]=Object.freeze(Fw(b,l))),b}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const u=new tk(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||kf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){kf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!kf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&aa(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ue(Ka,"defaults",{}),ue(Ka,"datasetElementType",null),ue(Ka,"dataElementType",null);class gc extends Ka{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=hj(n,r,o);this._drawStart=a,this._drawCount=l,dj(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,m=a.axis,{spanGaps:E,segment:b}=this.options,w=Sl(E)?E:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||s||r==="none",v=n+i,k=e.length;let R=n>0&&this.getParsed(n-1);for(let D=0;D<k;++D){const O=e[D],T=I?O:{};if(D<n||D>=v){T.skip=!0;continue}const _=this.getParsed(D),x=Pe(_[m]),C=T[f]=o.getPixelForValue(_[f],D),P=T[m]=s||x?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],D);T.skip=isNaN(C)||isNaN(P)||x,T.stop=D>0&&Math.abs(_[f]-R[f])>w,b&&(T.parsed=_,T.raw=u.data[D]),d&&(T.options=h||this.resolveDataElementOptions(D,O.active?"active":r)),I||this.updateElement(O,D,T,r),R=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ue(gc,"id","line"),ue(gc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ue(gc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Rr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class by{constructor(e){ue(this,"options");this.options=e||{}}static override(e){Object.assign(by.prototype,e)}init(){}formats(){return Rr()}parse(){return Rr()}format(){return Rr()}add(){return Rr()}diff(){return Rr()}startOf(){return Rr()}endOf(){return Rr()}}var R4={_date:by};function N4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?sj:Hr;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(s,e,n-d),m=u(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=u(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(b=>!Pe(b[d.axis]));h.lo-=Math.max(0,m);const E=f.slice(h.hi).findIndex(b=>!Pe(b[d.axis]));h.hi+=Math.max(0,E)}return h}}return{lo:0,hi:s.length-1}}function fd(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:d,hi:f}=N4(s[a],e,o,r);for(let m=d;m<=f;++m){const E=h[m];E.skip||i(E,u,m)}}}function D4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Cf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||fd(t,n,e,function(a,l,u){!r&&!xl(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function M4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=nj(o,{x:e.x,y:e.y});Fx(d,u,h)&&r.push({element:o,datasetIndex:a,index:l})}return fd(t,n,e,s),r}function O4(t,e,n,i,r,s){let o=[];const a=D4(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const E=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(E))&&!m)return;const w=a(e,E);w<l?(o=[{element:h,datasetIndex:d,index:f}],l=w):w===l&&o.push({element:h,datasetIndex:d,index:f})}return fd(t,n,e,u),o}function Af(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?M4(t,e,n,r):O4(t,e,n,i,r,s)}function jw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return fd(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var L4={modes:{index(t,e,n,i){const r=Vr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Cf(t,r,s,i,o):Af(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Vr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Cf(t,r,s,i,o):Af(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Vr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Cf(t,r,s,i,o)},nearest(t,e,n,i){const r=Vr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Af(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Vr(e,t);return jw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Vr(e,t);return jw(t,r,"y",n.intersect,i)}}};const ik=["left","top","right","bottom"];function la(t,e){return t.filter(n=>n.pos===e)}function Uw(t,e){return t.filter(n=>ik.indexOf(n.pos)===-1&&n.box.axis===e)}function ua(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function V4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function F4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!ik.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function j4(t,e){const n=F4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function U4(t){const e=V4(t),n=ua(e.filter(u=>u.box.fullSize),!0),i=ua(la(e,"left"),!0),r=ua(la(e,"right")),s=ua(la(e,"top"),!0),o=ua(la(e,"bottom")),a=Uw(e,"x"),l=Uw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:la(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Bw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function rk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function B4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Te(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&rk(o,s.getPadding());const a=Math.max(0,e.outerWidth-Bw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Bw(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function z4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function $4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function ba(t,e,n,i){const r=[];let s,o,a,l,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,$4(a.horizontal,e));const{same:d,other:f}=B4(e,n,a,i);u|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return u&&ba(r,e,n,i)||h}function zu(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function zw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=e.w*h,f=u.size||l.height;yh(u.start)&&(o=u.start),l.fullSize?zu(l,r.left,o,n.outerWidth-r.right-r.left,f):zu(l,e.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=e.h*h,f=u.size||l.width;yh(u.start)&&(s=u.start),l.fullSize?zu(l,s,r.top,f,n.outerHeight-r.bottom-r.top):zu(l,s,e.top+u.placed,f,d),u.start=s,u.placed+=d,s=l.right}}e.x=s,e.y=o}var Ki={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=An(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=U4(t.boxes),l=a.vertical,u=a.horizontal;Ie(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=l.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);rk(f,An(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),E=j4(l.concat(u),d);ba(a.fullSize,m,d,E),ba(l,m,d,E),ba(u,m,d,E)&&ba(l,m,d,E),z4(m),zw(a.leftAndTop,m,d,E),m.x+=m.w,m.y+=m.h,zw(a.rightAndBottom,m,d,E),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ie(a.chartArea,b=>{const w=b.box;Object.assign(w,t.chartArea),w.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class sk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class W4 extends sk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yc="$chartjs",H4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$w=t=>t===null||t==="";function q4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[yc]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",$w(r)){const s=Aw(t,"width");s!==void 0&&(t.width=s)}if($w(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Aw(t,"height");s!==void 0&&(t.height=s)}return t}const ok=n4?{passive:!0}:!1;function K4(t,e,n){t&&t.addEventListener(e,n,ok)}function G4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,ok)}function Q4(t,e){const n=H4[t.type]||t.type,{x:i,y:r}=Vr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Eh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Y4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Eh(a.addedNodes,i),o=o&&!Eh(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function X4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Eh(a.removedNodes,i),o=o&&!Eh(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const kl=new Map;let Ww=0;function ak(){const t=window.devicePixelRatio;t!==Ww&&(Ww=t,kl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function J4(t,e){kl.size||window.addEventListener("resize",ak),kl.set(t,e)}function Z4(t){kl.delete(t),kl.size||window.removeEventListener("resize",ak)}function eU(t,e,n){const i=t.canvas,r=i&&Ty(i);if(!r)return;const s=Bx((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),J4(t,s),o}function Pf(t,e,n){n&&n.disconnect(),e==="resize"&&Z4(t)}function tU(t,e,n){const i=t.canvas,r=Bx(s=>{t.ctx!==null&&n(Q4(s,t))},t);return K4(i,e,r),r}class nU extends sk{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(q4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[yc])return!1;const i=n[yc].initial;["height","width"].forEach(s=>{const o=i[s];Pe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[yc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Y4,detach:X4,resize:eU}[n]||tU;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Pf,detach:Pf,resize:Pf}[n]||G4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return t4(e,n,i,r)}isAttached(e){const n=e&&Ty(e);return!!(n&&n.isConnected)}}function iU(t){return!Ey()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?W4:nU}class mr{constructor(){ue(this,"x");ue(this,"y");ue(this,"active",!1);ue(this,"options");ue(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Sl(this.x)&&Sl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}ue(mr,"defaults",{}),ue(mr,"defaultRoutes");function rU(t,e){const n=t.options.ticks,i=sU(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?aU(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return lU(e,u,s,o/r),u;const h=oU(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for($u(e,u,h,Pe(m)?0:a-m,a),d=0,f=o-1;d<f;d++)$u(e,u,h,s[d],s[d+1]);return $u(e,u,h,l,Pe(m)?e.length:l+m),u}return $u(e,u,h),u}function sU(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function oU(t,e,n){const i=uU(t),r=e.length/n;if(!i)return Math.max(r,1);const s=XF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function aU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function lU(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function $u(t,e,n,i,r){const s=ye(i,0),o=Math.min(ye(r,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function uU(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const cU=t=>t==="left"?"right":t==="right"?"left":t,Hw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,qw=(t,e)=>Math.min(e||t,t);function Kw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function hU(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(i===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<s-a||l>o+a)))return l}function dU(t,e){Ie(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function ca(t){return t.drawTicks?t.tickLength:0}function Gw(t,e){if(!t.display)return 0;const n=Bt(t.font,e),i=An(t.padding);return(dt(t.text)?t.text.length:1)*n.lineHeight+i.height}function fU(t,e){return ys(t,{scale:e,type:"scale"})}function pU(t,e,n){return ys(t,{tick:n,index:e,type:"tick"})}function mU(t,e,n){let i=zx(t);return(n&&e!=="right"||!n&&e==="right")&&(i=cU(i)),i}function gU(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let d=0,f,m,E;const b=o-r,w=a-s;if(t.isHorizontal()){if(m=Kt(i,s,a),Te(n)){const I=Object.keys(n)[0],v=n[I];E=h[I].getPixelForValue(v)+b-e}else n==="center"?E=(u.bottom+u.top)/2+b-e:E=Hw(t,n,e);f=a-s}else{if(Te(n)){const I=Object.keys(n)[0],v=n[I];m=h[I].getPixelForValue(v)-w+e}else n==="center"?m=(u.left+u.right)/2-w+e:m=Hw(t,n,e);E=Kt(i,o,r),d=n==="left"?-En:En}return{titleX:m,titleY:E,maxWidth:f,rotation:d}}class Do extends mr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Nn(e,Number.POSITIVE_INFINITY),n=Nn(n,Number.NEGATIVE_INFINITY),i=Nn(i,Number.POSITIVE_INFINITY),r=Nn(r,Number.NEGATIVE_INFINITY),{min:Nn(e,i),max:Nn(n,r),minDefined:mn(e),maxDefined:mn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Nn(n,Nn(i,n)),max:Nn(i,Nn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){De(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Dj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Kw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=rU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){De(this.options.afterUpdate,[this])}beforeSetDimensions(){De(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){De(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),De(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){De(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=De(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){De(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){De(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=qw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=un(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-ca(e.grid)-n.padding-Gw(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=tj(Math.min(Math.asin(un((h.highest.height+6)/a,-1,1)),Math.asin(un(l/u,-1,1))-Math.asin(un(f/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){De(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){De(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Gw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ca(s)+l):(e.height=this.maxHeight,e.width=ca(s)+l),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,E=Wr(this.labelRotation),b=Math.cos(E),w=Math.sin(E);if(a){const I=i.mirror?0:w*d.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+I+m)}else{const I=i.mirror?0:b*d.width+w*f.height;e.width=Math.min(this.maxWidth,e.width+I+m)}this._calculatePadding(u,h,w,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?u?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){De(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Pe(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Kw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/qw(n,i));let u=0,h=0,d,f,m,E,b,w,I,v,k,R,D;for(d=0;d<n;d+=l){if(E=e[d].label,b=this._resolveTickFontOptions(d),r.font=w=b.string,I=s[w]=s[w]||{data:{},gc:[]},v=b.lineHeight,k=R=0,!Pe(E)&&!dt(E))k=Iw(r,I.data,I.gc,k,E),R=v;else if(dt(E))for(f=0,m=E.length;f<m;++f)D=E[f],!Pe(D)&&!dt(D)&&(k=Iw(r,I.data,I.gc,k,D),R+=v);o.push(k),a.push(R),u=Math.max(k,u),h=Math.max(R,h)}dU(s,n);const O=o.indexOf(u),T=a.indexOf(h),_=x=>({width:o[x]||0,height:a[x]||0});return{first:_(0),last:_(n-1),widest:_(O),highest:_(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return rj(this._alignToPixels?Pr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=pU(this.getContext(),e,i))}return this.$context||(this.$context=fU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Wr(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ca(s),m=[],E=a.setContext(this.getContext()),b=E.display?E.width:0,w=b/2,I=function(de){return Pr(i,de,b)};let v,k,R,D,O,T,_,x,C,P,N,A;if(o==="top")v=I(this.bottom),T=this.bottom-f,x=v-w,P=I(e.top)+w,A=e.bottom;else if(o==="bottom")v=I(this.top),P=e.top,A=I(e.bottom)-w,T=v+w,x=this.top+f;else if(o==="left")v=I(this.right),O=this.right-f,_=v-w,C=I(e.left)+w,N=e.right;else if(o==="right")v=I(this.left),C=e.left,N=I(e.right)-w,O=v+w,_=this.left+f;else if(n==="x"){if(o==="center")v=I((e.top+e.bottom)/2+.5);else if(Te(o)){const de=Object.keys(o)[0],pe=o[de];v=I(this.chart.scales[de].getPixelForValue(pe))}P=e.top,A=e.bottom,T=v+w,x=T+f}else if(n==="y"){if(o==="center")v=I((e.left+e.right)/2);else if(Te(o)){const de=Object.keys(o)[0],pe=o[de];v=I(this.chart.scales[de].getPixelForValue(pe))}O=v-w,_=O-f,C=e.left,N=e.right}const ae=ye(r.ticks.maxTicksLimit,d),te=Math.max(1,Math.ceil(d/ae));for(k=0;k<d;k+=te){const de=this.getContext(k),pe=s.setContext(de),$=a.setContext(de),Q=pe.lineWidth,X=pe.color,U=$.dash||[],F=$.dashOffset,H=pe.tickWidth,J=pe.tickColor,le=pe.tickBorderDash||[],Z=pe.tickBorderDashOffset;R=hU(this,k,l),R!==void 0&&(D=Pr(i,R,Q),u?O=_=C=N=D:T=x=P=A=D,m.push({tx1:O,ty1:T,tx2:_,ty2:x,x1:C,y1:P,x2:N,y2:A,width:Q,color:X,borderDash:U,borderDashOffset:F,tickWidth:H,tickColor:J,tickBorderDash:le,tickBorderDashOffset:Z}))}return this._ticksLength=d,this._borderValue=v,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=s,f=ca(i.grid),m=f+h,E=d?-h:m,b=-Wr(this.labelRotation),w=[];let I,v,k,R,D,O,T,_,x,C,P,N,A="middle";if(r==="top")O=this.bottom-E,T=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+E,T=this._getXAxisLabelAlignment();else if(r==="left"){const te=this._getYAxisLabelAlignment(f);T=te.textAlign,D=te.x}else if(r==="right"){const te=this._getYAxisLabelAlignment(f);T=te.textAlign,D=te.x}else if(n==="x"){if(r==="center")O=(e.top+e.bottom)/2+m;else if(Te(r)){const te=Object.keys(r)[0],de=r[te];O=this.chart.scales[te].getPixelForValue(de)+m}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")D=(e.left+e.right)/2-m;else if(Te(r)){const te=Object.keys(r)[0],de=r[te];D=this.chart.scales[te].getPixelForValue(de)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const ae=this._getLabelSizes();for(I=0,v=a.length;I<v;++I){k=a[I],R=k.label;const te=s.setContext(this.getContext(I));_=this.getPixelForTick(I)+s.labelOffset,x=this._resolveTickFontOptions(I),C=x.lineHeight,P=dt(R)?R.length:1;const de=P/2,pe=te.color,$=te.textStrokeColor,Q=te.textStrokeWidth;let X=T;o?(D=_,T==="inner"&&(I===v-1?X=this.options.reverse?"left":"right":I===0?X=this.options.reverse?"right":"left":X="center"),r==="top"?u==="near"||b!==0?N=-P*C+C/2:u==="center"?N=-ae.highest.height/2-de*C+C:N=-ae.highest.height+C/2:u==="near"||b!==0?N=C/2:u==="center"?N=ae.highest.height/2-de*C:N=ae.highest.height-P*C,d&&(N*=-1),b!==0&&!te.showLabelBackdrop&&(D+=C/2*Math.sin(b))):(O=_,N=(1-P)*C/2);let U;if(te.showLabelBackdrop){const F=An(te.backdropPadding),H=ae.heights[I],J=ae.widths[I];let le=N-F.top,Z=0-F.left;switch(A){case"middle":le-=H/2;break;case"bottom":le-=H;break}switch(T){case"center":Z-=J/2;break;case"right":Z-=J;break;case"inner":I===v-1?Z-=J:I>0&&(Z-=J/2);break}U={left:Z,top:le,width:J+F.width,height:H+F.height,color:te.backdropColor}}w.push({label:R,font:x,textOffset:N,options:{rotation:b,color:pe,strokeColor:$,strokeWidth:Q,textAlign:X,textBaseline:A,translation:[D,O],backdrop:U}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Wr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return n==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=Pr(e,this.left,o)-o/2,h=Pr(e,this.right,a)+a/2,d=f=l):(d=Pr(e,this.top,o)-o/2,f=Pr(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&gy(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;vh(i,u,0,h,l,a)}r&&yy(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Bt(i.font),o=An(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Te(n)?(l+=o.bottom,dt(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=gU(this,l,n,a);vh(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:mU(a,n,r),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ye(e.grid&&e.grid.z,-1),r=ye(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Do.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Bt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Wu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;vU(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,yU(e,o,i),this.override&&qe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in qe[r]&&(delete qe[r][i],this.override&&delete cs[i])}}function yU(t,e,n){const i=Il(Object.create(null),[n?qe.get(n):{},qe.get(e),t.defaults]);qe.set(e,i),t.defaultRoutes&&_U(e,t.defaultRoutes),t.descriptors&&qe.describe(e,t.descriptors)}function _U(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");qe.route(s,r,l,a)})}function vU(t){return"id"in t&&"defaults"in t}class wU{constructor(){this.controllers=new Wu(Ka,"datasets",!0),this.elements=new Wu(mr,"elements"),this.plugins=new Wu(Object,"plugins"),this.scales=new Wu(Do,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Ie(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=fy(e);De(i["before"+r],[],i),n[e](i),De(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Ln=new wU;class EU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(De(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Pe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ye(i.options&&i.options.plugins,{}),s=TU(i);return r===!1&&!n?[]:IU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function TU(t){const e={},n=[],i=Object.keys(Ln.plugins.items);for(let s=0;s<i.length;s++)n.push(Ln.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function bU(t,e){return!e&&t===!1?null:t===!0?{}:t}function IU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=bU(i[l],r);u!==null&&s.push({plugin:a,options:SU(t.config,{plugin:a,local:n[l]},u,o)})}return s}function SU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rm(t,e){const n=qe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function xU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function kU(t,e){return t===e?"_index_":"_value_"}function Qw(t){if(t==="x"||t==="y"||t==="r")return t}function CU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function sm(t,...e){if(Qw(t))return t;for(const n of e){const i=n.axis||CU(n.position)||t.length>1&&Qw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Yw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function AU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Yw(t,"x",n[0])||Yw(t,"y",n[0])}return{}}function PU(t,e){const n=cs[t.type]||{scales:{}},i=e.scales||{},r=rm(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Te(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=sm(o,a,AU(o,t),qe.scales[a.type]),u=kU(l,r),h=n.scales||{};s[o]=za(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||rm(a,e),h=(cs[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=xU(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),za(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];za(a,[qe.scales[a.type],qe.scale])}),s}function lk(t){const e=t.options||(t.options={});e.plugins=ye(e.plugins,{}),e.scales=PU(t,e)}function uk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function RU(t){return t=t||{},t.data=uk(t.data),lk(t),t}const Xw=new Map,ck=new Set;function Hu(t,e){let n=Xw.get(t);return n||(n=e(),Xw.set(t,n),ck.add(n)),n}const ha=(t,e,n)=>{const i=gh(e,n);i!==void 0&&t.add(i)};class NU{constructor(e){this._config=RU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=uk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Hu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Hu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Hu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Hu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>ha(l,e,d))),h.forEach(d=>ha(l,r,d)),h.forEach(d=>ha(l,cs[s]||{},d)),h.forEach(d=>ha(l,qe,d)),h.forEach(d=>ha(l,tm,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),ck.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,cs[n]||{},qe.datasets[n]||{},{type:n},qe,tm]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Jw(this._resolverCache,e,r);let l=o;if(MU(o,n)){s.$shared=!1,i=pr(i)?i():i;const u=this.createResolver(e,i,a);l=wo(o,i,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Jw(this._resolverCache,e,i);return Te(n)?wo(s,n,void 0,r):s}}function Jw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:_y(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const DU=t=>Te(t)&&Object.getOwnPropertyNames(t).some(e=>pr(t[e]));function MU(t,e){const{isScriptable:n,isIndexable:i}=Kx(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(pr(a)||DU(a))||o&&dt(a))return!0}return!1}var OU="4.5.1";const LU=["top","bottom","left","right","chartArea"];function Zw(t,e){return t==="top"||t==="bottom"||LU.indexOf(t)===-1&&e==="x"}function eE(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function tE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),De(n&&n.onComplete,[t],e)}function VU(t){const e=t.chart,n=e.options.animation;De(n&&n.onProgress,[t],e)}function hk(t){return Ey()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _c={},nE=t=>{const e=hk(t);return Object.values(_c).filter(n=>n.canvas===e).pop()};function FU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function jU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var Pi;let pd=(Pi=class{static register(...e){Ln.add(...e),iE()}static unregister(...e){Ln.remove(...e),iE()}constructor(e,n){const i=this.config=new NU(n),r=hk(e),s=nE(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||iU(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=zF(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new EU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=uj(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],_c[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ei.listen(this,"complete",tE),ei.listen(this,"progress",VU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Pe(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ln}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Sw(this.canvas,this.ctx),this}stop(){return ei.stop(this),this}resize(e,n){ei.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Cw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),De(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ie(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=sm(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Ie(s,o=>{const a=o.options,l=a.id,u=sm(l,a),h=ye(a.type,o.dtype);(a.position===void 0||Zw(a.position,u)!==Zw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Ln.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Ie(r,(o,a)=>{o||delete i[a]}),Ie(i,o=>{Ki.configure(this,o,o.options),Ki.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(eE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||rm(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ln.getController(a),{datasetElementType:u,dataElementType:h}=qe.datasets[a];Object.assign(l,{dataElementType:Ln.getElement(h),datasetElementType:u&&Ln.getElement(u)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ie(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ie(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(eE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ie(this.scales,e=>{Ki.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!mw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;FU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!mw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ki.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ie(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,pr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ei.has(this)?this.attached&&!ei.running(this)&&ei.start(this):(this.draw(),tE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=g4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&gy(n,r),e.controller.draw(),r&&yy(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return xl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=L4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ys(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);yh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ei.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Sw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _c[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ie(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ie(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ie(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ph(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=GF(e),u=jU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,De(s.onHover,[e,a,this],this),l&&De(s.onClick,[e,a,this],this));const h=!ph(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},ue(Pi,"defaults",qe),ue(Pi,"instances",_c),ue(Pi,"overrides",cs),ue(Pi,"registry",Ln),ue(Pi,"version",OU),ue(Pi,"getChart",nE),Pi);function iE(){return Ie(pd.instances,t=>t._plugins.invalidate())}function dk(t,e,n=e){t.lineCap=ye(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ye(n.borderDash,e.borderDash)),t.lineDashOffset=ye(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ye(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ye(n.borderWidth,e.borderWidth),t.strokeStyle=ye(n.borderColor,e.borderColor)}function UU(t,e,n){t.lineTo(n.x,n.y)}function BU(t){return t.stepped?bj:t.tension||t.cubicInterpolationMode==="monotone"?Ij:UU}function fk(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:u<l&&!h?i+u-l:u-l}}function zU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:u}=fk(r,n,i),h=BU(s);let{move:d=!0,reverse:f}=i||{},m,E,b;for(m=0;m<=u;++m)E=r[(a+(f?u-m:m))%o],!E.skip&&(d?(t.moveTo(E.x,E.y),d=!1):h(t,b,E,f,s.stepped),b=E);return l&&(E=r[(a+(f?u:0))%o],h(t,b,E,f,s.stepped)),!!l}function $U(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=fk(r,n,i),{move:l=!0,reverse:u}=i||{};let h=0,d=0,f,m,E,b,w,I;const v=R=>(o+(u?a-R:R))%s,k=()=>{b!==w&&(t.lineTo(h,w),t.lineTo(h,b),t.lineTo(h,I))};for(l&&(m=r[v(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=r[v(f)],m.skip)continue;const R=m.x,D=m.y,O=R|0;O===E?(D<b?b=D:D>w&&(w=D),h=(d*h+R)/++d):(k(),t.lineTo(R,D),E=O,d=0,b=w=D),I=D}k()}function om(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?$U:zU}function WU(t){return t.stepped?i4:t.tension||t.cubicInterpolationMode==="monotone"?r4:Fr}function HU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),dk(t,e.options),t.stroke(r)}function qU(t,e,n,i){const{segments:r,options:s}=e,o=om(e);for(const a of r)dk(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const KU=typeof Path2D=="function";function GU(t,e,n,i){KU&&!e.options.segment?HU(t,e,n,i):qU(t,e,n,i)}class Ia extends mr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Qj(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=d4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=u4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=WU(i);let u,h;for(u=0,h=o.length;u<h;++u){const{start:d,end:f}=o[u],m=s[d],E=s[f];if(m===E){a.push(m);continue}const b=Math.abs((r-m[n])/(E[n]-m[n])),w=l(m,E,b,i.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,i){return om(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=om(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),GU(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ue(Ia,"id","line"),ue(Ia,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ue(Ia,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ue(Ia,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function rE(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class vc extends mr{constructor(n){super();ue(this,"parsed");ue(this,"skip");ue(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return rE(this,n,"x",i)}inYRange(n,i){return rE(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!xl(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,nm(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ue(vc,"id","point"),ue(vc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ue(vc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const sE=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},QU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class oE extends mr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=De(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Bt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=sE(i,s);let u,h;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((E,b)=>{const w=i+n/2+s.measureText(E.text).width;(b===0||u[u.length-1]+w+2*a>o)&&(d+=h,u[u.length-(b>0?0:1)]=0,m+=h,f++),l[b]={left:0,top:m,row:f,width:w,height:r},u[u.length-1]+=w+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,E=0,b=0;return this.legendItems.forEach((w,I)=>{const{itemWidth:v,itemHeight:k}=YU(i,n,s,w,r);I>0&&m+k+2*a>h&&(d+=f+a,u.push({width:f,height:m}),E+=f+a,b++,f=m=0),l[I]={left:E,top:m,col:b,width:v,height:k},f=Math.max(f,v),m+=k+a}),d+=f,u.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=no(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Kt(i,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Kt(i,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=Kt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Kt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;gy(e,this),this._draw(),yy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=qe.color,l=no(e.rtl,this.left,this.width),u=Bt(o.font),{padding:h}=o,d=u.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:E,boxHeight:b,itemHeight:w}=sE(o,d),I=function(O,T,_){if(isNaN(E)||E<=0||isNaN(b)||b<0)return;r.save();const x=ye(_.lineWidth,1);if(r.fillStyle=ye(_.fillStyle,a),r.lineCap=ye(_.lineCap,"butt"),r.lineDashOffset=ye(_.lineDashOffset,0),r.lineJoin=ye(_.lineJoin,"miter"),r.lineWidth=x,r.strokeStyle=ye(_.strokeStyle,a),r.setLineDash(ye(_.lineDash,[])),o.usePointStyle){const C={radius:b*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:x},P=l.xPlus(O,E/2),N=T+f;Hx(r,C,P,N,o.pointStyleWidth&&E)}else{const C=T+Math.max((d-b)/2,0),P=l.leftForLtr(O,E),N=qa(_.borderRadius);r.beginPath(),Object.values(N).some(A=>A!==0)?im(r,{x:P,y:C,w:E,h:b,radius:N}):r.rect(P,C,E,b),r.fill(),x!==0&&r.stroke()}r.restore()},v=function(O,T,_){vh(r,_.text,O,T+w/2,u,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},k=this.isHorizontal(),R=this._computeTitleHeight();k?m={x:Kt(s,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:Kt(s,this.top+R+h,this.bottom-n[0].height),line:0},Jx(this.ctx,e.textDirection);const D=w+h;this.legendItems.forEach((O,T)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;const _=r.measureText(O.text).width,x=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),C=E+f+_;let P=m.x,N=m.y;l.setWidth(this.width),k?T>0&&P+C+h>this.right&&(N=m.y+=D,m.line++,P=m.x=Kt(s,this.left+h,this.right-i[m.line])):T>0&&N+D>this.bottom&&(P=m.x=P+n[m.line].width+h,m.line++,N=m.y=Kt(s,this.top+R+h,this.bottom-n[m.line].height));const A=l.x(P);if(I(A,N,O),P=cj(x,P+E+f,k?P+C:this.right,e.rtl),v(l.x(P),N,O),k)m.x+=C+h;else if(typeof O.text!="string"){const ae=u.lineHeight;m.y+=pk(O,ae)+h}else m.y+=D}),Zx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Bt(n.font),r=An(n.padding);if(!n.display)return;const s=no(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,u=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=Kt(e.align,d,this.right-f);else{const E=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);h=u+Kt(e.align,this.top,this.bottom-E-e.labels.padding-this._computeTitleHeight())}const m=Kt(a,d,d+f);o.textAlign=s.textAlign(zx(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,vh(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Bt(e.font),i=An(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Ta(e,this.left,this.right)&&Ta(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ta(e,r.left,r.left+r.width)&&Ta(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!ZU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=QU(r,i);r&&!s&&De(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&De(n.onHover,[e,i,this],this)}else i&&De(n.onClick,[e,i,this],this)}}function YU(t,e,n,i,r){const s=XU(i,t,e,n),o=JU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function XU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function JU(t,e,n){let i=t;return typeof e.text!="string"&&(i=pk(e,n)),i}function pk(t,e){const n=t.text?t.text.length:0;return e*n}function ZU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var eB={id:"legend",_element:oE,start(t,e,n){const i=t.legend=new oE({ctx:t.ctx,options:n,chart:t});Ki.configure(t,i,n),Ki.addBox(t,i)},stop(t){Ki.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Ki.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=An(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Sa={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=em(e,u);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Mn(t,e){return e&&(dt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ti(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function tB(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function aE(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Bt(e.bodyFont),u=Bt(e.titleFont),h=Bt(e.footerFont),d=s.length,f=r.length,m=i.length,E=An(e.padding);let b=E.height,w=0,I=i.reduce((R,D)=>R+D.before.length+D.lines.length+D.after.length,0);if(I+=t.beforeBody.length+t.afterBody.length,d&&(b+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),I){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=m*R+(I-m)*l.lineHeight+(I-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let v=0;const k=function(R){w=Math.max(w,n.measureText(R).width+v)};return n.save(),n.font=u.string,Ie(t.title,k),n.font=l.string,Ie(t.beforeBody.concat(t.afterBody),k),v=e.displayColors?o+2+e.boxPadding:0,Ie(i,R=>{Ie(R.before,k),Ie(R.lines,k),Ie(R.after,k)}),v=0,n.font=h.string,Ie(t.footer,k),n.restore(),w+=E.width,{width:w,height:b}}function nB(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function iB(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function rB(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return i==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),iB(u,t,e,n)&&(u="center"),u}function lE(t,e,n){const i=n.yAlign||e.yAlign||nB(t,n);return{xAlign:n.xAlign||e.xAlign||rB(t,e,n,i),yAlign:i}}function sB(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function oB(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function uE(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=qa(o);let E=sB(e,a);const b=oB(e,l,u);return l==="center"?a==="left"?E+=u:a==="right"&&(E-=u):a==="left"?E-=Math.max(h,f)+r:a==="right"&&(E+=Math.max(d,m)+r),{x:un(E,0,i.width-e.width),y:un(b,0,i.height-e.height)}}function qu(t,e,n){const i=An(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function cE(t){return Mn([],ti(t))}function aB(t,e,n){return ys(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function hE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const mk={beforeTitle:Zn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Zn,beforeBody:Zn,beforeLabel:Zn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Pe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Zn,afterBody:Zn,beforeFooter:Zn,footer:Zn,afterFooter:Zn};function Vt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?mk[e].call(n,i):r}class am extends mr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new tk(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=aB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Vt(i,"beforeTitle",this,e),s=Vt(i,"title",this,e),o=Vt(i,"afterTitle",this,e);let a=[];return a=Mn(a,ti(r)),a=Mn(a,ti(s)),a=Mn(a,ti(o)),a}getBeforeBody(e,n){return cE(Vt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Ie(e,s=>{const o={before:[],lines:[],after:[]},a=hE(i,s);Mn(o.before,ti(Vt(a,"beforeLabel",this,s))),Mn(o.lines,Vt(a,"label",this,s)),Mn(o.after,ti(Vt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return cE(Vt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Vt(i,"beforeFooter",this,e),s=Vt(i,"footer",this,e),o=Vt(i,"afterFooter",this,e);let a=[];return a=Mn(a,ti(r)),a=Mn(a,ti(s)),a=Mn(a,ti(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(tB(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),Ie(a,h=>{const d=hE(e.callbacks,h);r.push(Vt(d,"labelColor",this,h)),s.push(Vt(d,"labelPointStyle",this,h)),o.push(Vt(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Sa[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=aE(this,i),u=Object.assign({},a,l),h=lE(this.chart,i,u),d=uE(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=qa(a),{x:f,y:m}=e,{width:E,height:b}=n;let w,I,v,k,R,D;return s==="center"?(R=m+b/2,r==="left"?(w=f,I=w-o,k=R+o,D=R-o):(w=f+E,I=w+o,k=R-o,D=R+o),v=w):(r==="left"?I=f+Math.max(l,h)+o:r==="right"?I=f+E-Math.max(u,d)-o:I=this.caretX,s==="top"?(k=m,R=k-o,w=I-o,v=I+o):(k=m+b,R=k+o,w=I+o,v=I-o),D=k),{x1:w,x2:I,x3:v,y1:k,y2:R,y3:D}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const u=no(i.rtl,this.x,this.width);for(e.x=qu(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",o=Bt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=Bt(s.bodyFont),d=qu(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,E=n.y+m;if(s.usePointStyle){const b={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(f,u)+u/2,I=E+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,nm(e,b,w,I),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,nm(e,b,w,I)}else{e.lineWidth=Te(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=r.leftForLtr(f,u),w=r.leftForLtr(r.xPlus(f,1),u-2),I=qa(o.borderRadius);Object.values(I).some(v=>v!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,im(e,{x:b,y:E,w:u,h:l,radius:I}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),im(e,{x:w,y:E+1,w:u-2,h:l-2,radius:I}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(b,E,u,l),e.strokeRect(b,E,u,l),e.fillStyle=o.backgroundColor,e.fillRect(w,E+1,u-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=i,d=Bt(i.bodyFont);let f=d.lineHeight,m=0;const E=no(i.rtl,this.x,this.width),b=function(_){n.fillText(_,E.x(e.x+m),e.y+f/2),e.y+=f+s},w=E.textAlign(o);let I,v,k,R,D,O,T;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=qu(this,w,i),n.fillStyle=i.bodyColor,Ie(this.beforeBody,b),m=a&&w!=="right"?o==="center"?u/2+h:u+2+h:0,R=0,O=r.length;R<O;++R){for(I=r[R],v=this.labelTextColors[R],n.fillStyle=v,Ie(I.before,b),k=I.lines,a&&k.length&&(this._drawColorBox(n,e,R,E,i),f=Math.max(d.lineHeight,l)),D=0,T=k.length;D<T;++D)b(k[D]),f=d.lineHeight;Ie(I.after,b)}m=0,f=d.lineHeight,Ie(this.afterBody,b),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=no(i.rtl,this.x,this.width);for(e.x=qu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Bt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:E}=qa(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+u,l+h-E),n.quadraticCurveTo(a+u,l+h,a+u-E,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Sa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=aE(this,e),l=Object.assign({},o,this._size),u=lE(n,e,l),h=uE(e,l,u,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=An(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),Jx(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),Zx(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!ph(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!ph(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Sa[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}ue(am,"positioners",Sa);var lB={id:"tooltip",_element:am,positioners:Sa,afterInit(t,e,n){n&&(t.tooltip=new am({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const uB=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function cB(t,e,n,i){const r=t.indexOf(e);if(r===-1)return uB(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const hB=(t,e)=>t===null?null:un(Math.round(t),0,e);function dE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class lm extends Do{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Pe(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:cB(i,e,ye(n,e),this._addedLabels),hB(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return dE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ue(lm,"id","category"),ue(lm,"defaults",{ticks:{callback:dE}});function dB(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,E=h-1,{min:b,max:w}=e,I=!Pe(o),v=!Pe(a),k=!Pe(u),R=(w-b)/(d+1);let D=yw((w-b)/E/m)*m,O,T,_,x;if(D<1e-14&&!I&&!v)return[{value:b},{value:w}];x=Math.ceil(w/D)-Math.floor(b/D),x>E&&(D=yw(x*D/E/m)*m),Pe(l)||(O=Math.pow(10,l),D=Math.ceil(D*O)/O),r==="ticks"?(T=Math.floor(b/D)*D,_=Math.ceil(w/D)*D):(T=b,_=w),I&&v&&s&&ZF((a-o)/s,D/1e3)?(x=Math.round(Math.min((a-o)/D,h)),D=(a-o)/x,T=o,_=a):k?(T=I?o:T,_=v?a:_,x=u-1,D=(_-T)/x):(x=(_-T)/D,$a(x,Math.round(x),D/1e3)?x=Math.round(x):x=Math.ceil(x));const C=Math.max(_w(D),_w(T));O=Math.pow(10,Pe(l)?C:l),T=Math.round(T*O)/O,_=Math.round(_*O)/O;let P=0;for(I&&(f&&T!==o?(n.push({value:o}),T<o&&P++,$a(Math.round((T+P*D)*O)/O,o,fE(o,R,t))&&P++):T<o&&P++);P<x;++P){const N=Math.round((T+P*D)*O)/O;if(v&&N>a)break;n.push({value:N})}return v&&f&&_!==a?n.length&&$a(n[n.length-1].value,a,fE(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!v||_===a)&&n.push({value:_}),n}function fE(t,e,{horizontal:n,minRotation:i}){const r=Wr(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class fB extends Do{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Pe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=vo(r),u=vo(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=dB(r,s);return e.bounds==="ticks"&&ej(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return $x(e,this.chart.options.locale,this.options.ticks.format)}}class um extends fB{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=mn(e)?e:0,this.max=mn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Wr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ue(um,"id","linear"),ue(um,"defaults",{ticks:{callback:Wx.formatters.numeric}});const md={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jt=Object.keys(md);function pE(t,e){return t-e}function mE(t,e){if(Pe(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),mn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Sl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function gE(t,e,n,i){const r=jt.length;for(let s=jt.indexOf(t);s<r-1;++s){const o=md[jt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return jt[s]}return jt[r-1]}function pB(t,e,n,i,r){for(let s=jt.length-1;s>=jt.indexOf(n);s--){const o=jt[s];if(md[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return jt[n?jt.indexOf(n):0]}function mB(t){for(let e=jt.indexOf(t)+1,n=jt.length;e<n;++e)if(md[jt[e]].common)return jt[e]}function yE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=py(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function gB(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function _E(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:gB(t,i,r,n)}class Th extends Do{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new R4._date(e.adapters.date);r.init(n),za(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:mE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=mn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=mn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=oj(r,s,o);return this._unit=n.unit||(i.autoSkip?gE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):pB(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:mB(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),_E(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=un(n,0,o),i=un(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||gE(s.minUnit,n,i,this._getLabelCapacity(n)),a=ye(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=Sl(l)||l===!0,h={};let d=n,f,m;if(u&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,u?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const E=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)yE(h,f,E);return(f===i||r.bounds==="ticks"||m===1)&&yE(h,f,E),Object.keys(h).sort(pE).map(b=>+b)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return De(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=i[n],m=u&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Wr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,_E(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(mE(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lj(e.sort(pE))}}ue(Th,"id","time"),ue(Th,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ku(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Hr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Hr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class vE extends Th{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ku(n,this.min),this._tableRange=Ku(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=i&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],u=r[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Ku(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Ku(this._table,i*this._tableRange+this._minPos,!0)}}ue(vE,"id","timeseries"),ue(vE,"defaults",Th.defaults);pd.register(Ia,vc,um,lm,lB,eB);const gk="label";function wE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function yB(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function yk(t,e){t.labels=e}function _k(t,e,n=gk){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function _B(t,e=gk){const n={labels:[],datasets:[]};return yk(n,t.labels),_k(n,t.datasets,e),n}function vB(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:d,...f}=t,m=M.useRef(null),E=M.useRef(null),b=()=>{m.current&&(E.current=new pd(m.current,{type:o,data:_B(a,s),options:l&&{...l},plugins:u}),wE(e,E.current))},w=()=>{wE(e,null),E.current&&(E.current.destroy(),E.current=null)};return M.useEffect(()=>{!r&&E.current&&l&&yB(E.current,l)},[r,l]),M.useEffect(()=>{!r&&E.current&&yk(E.current.config.data,a.labels)},[r,a.labels]),M.useEffect(()=>{!r&&E.current&&a.datasets&&_k(E.current.config.data,a.datasets,s)},[r,a.datasets]),M.useEffect(()=>{E.current&&(r?(w(),setTimeout(b)):E.current.update(d))},[r,l,a.labels,a.datasets,d]),M.useEffect(()=>{E.current&&(w(),setTimeout(b))},[o]),M.useEffect(()=>(b(),()=>w()),[]),y.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const wB=M.forwardRef(vB);function EB(t,e){return pd.register(e),M.forwardRef((n,i)=>y.jsx(wB,{...n,ref:i,type:t}))}const Iy=EB("line",gc);function TB({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Iy,{data:r,options:s})})]})}function bB({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],i=t.map(u=>u.dateIso),r=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.bench}),s=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.squat}),o=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.deadlift}),a={labels:i,datasets:[{label:`${n[0]} (7-day WMA)`,data:r,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[1]} (7-day WMA)`,data:s,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[2]} (7-day WMA)`,data:o,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:u=>{var h,d;return`${u.dataset.label}: ${(d=(h=u.parsed.y)==null?void 0:h.toFixed)==null?void 0:d.call(h,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Iy,{data:a,options:l})})]})}function IB({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>a.calories),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (raw)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.15}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Smoothed Weight/Strength vs Raw Calories"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Iy,{data:s,options:o})})]})}function Nr(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function SB(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function xB(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function kB({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Weekly Analysis"}),y.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Week #"}),y.jsx("th",{children:"Avg Calories"}),y.jsx("th",{children:"Weight Change (kg)"}),y.jsx("th",{children:"Calculated TDEE"}),y.jsx("th",{children:"TDEE "}),y.jsx("th",{children:"Adaptation %"}),y.jsx("th",{children:"LBM (kg)"}),y.jsx("th",{children:"Loss Rate vs LBM %"}),y.jsx("th",{children:"Status"})]})}),y.jsx("tbody",{children:t.weeks.map(n=>y.jsxs("tr",{children:[y.jsx("td",{children:n.week}),y.jsx("td",{children:Nr(n.avgCalories,0)}),y.jsx("td",{children:Nr(n.weightChange,2)}),y.jsx("td",{children:Nr(n.tdee,0)}),y.jsx("td",{children:Nr(n.tdeeChangeFromBaseline,0)}),y.jsx("td",{className:SB(n.adaptationPct),children:Nr(n.adaptationPct,1)}),y.jsx("td",{children:Nr(n.lbm,1)}),y.jsx("td",{children:Nr(n.lossRatePct,2)}),y.jsx("td",{className:xB(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),y.jsxs("div",{className:"notice info",style:{marginTop:12},children:[y.jsx("div",{children:y.jsx("b",{children:"How to read this:"})}),y.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[y.jsxs("div",{children:[y.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",y.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function lt(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function EE(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function TE(t,e){const n=dh(t).getTime(),i=dh(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function bE(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function CB(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function AB({derived:t,weekly:e,profile:n,currentCycle:i}){const r=M.useMemo(()=>{var k,R,D,O;if(!(t!=null&&t.length))return[];const s=t[t.length-1],o=s.dateIso,a=(k=e==null?void 0:e.weeks)!=null&&k.length?e.weeks[e.weeks.length-1]:null,l=e==null?void 0:e.baselineTdee,u=e==null?void 0:e.baselineStrength,h=e==null?void 0:e.baselineWeeklyLoss,d=t.filter(T=>{const _=TE(o,T.dateIso);return _>=0&&_<=6}),f=d.length,m=bE(d.map(T=>T.protein)),E=bE(d.map(T=>T.calories)),b=Number.isFinite((R=s==null?void 0:s.wma)==null?void 0:R.weight)?s.wma.weight:s.weight,w=[];if(a&&Number.isFinite(l)&&Number.isFinite(a.tdee)&&Number.isFinite(a.adaptationPct)){const T=Math.max(0,-a.adaptationPct);let _="good";T>=10?_="bad":T>=5&&(_="warn");const x=a.adaptationPct<0?"dropped":"increased",C=`${lt(Math.abs(a.adaptationPct),0)}%`;w.push({key:"adaptation",level:_,title:"Metabolic adaptation",message:`Your TDEE has ${x} ${C} from baseline (${lt(l,0)}  ${lt(a.tdee,0)} kcal).`,action:_!=="good"?"Consider a refeed day or reducing training volume.":null})}if(a&&Number.isFinite(a.lossRatePct)){const T=String(a.lossRateStatus||"").toUpperCase();let _="info";a.lossRateStatus==="Optimal"&&(_="good"),a.lossRateStatus==="Aggressive"&&(_="bad");const x=a.lossRateStatus==="Aggressive"?"Risk of muscle loss.":a.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";w.push({key:"lossrate",level:_,title:"Loss rate vs LBM",message:`This week: ${lt(a.lossRatePct,1)}% of LBM lost  ${T}. ${x}`,action:null})}if(a&&Number.isFinite(u)&&Number.isFinite(a.avgStrengthWma)){const T=(a.avgStrengthWma-u)/u*100;let _="good",x="",C="Strength maintained/increasing.",P=null;T<-7.5?(_="bad",x="",C="Strength declining significantly.",P="Consider eating more or reducing cardio."):T<-5&&(_="warn",x="",C="Strength declining.",P="Consider eating more or reducing cardio."),w.push({key:"strength",level:_,title:"Strength trend",message:`${C} ${x} (${lt(T,1)}% vs baseline)`,action:P})}if(a&&Number.isFinite(a.tdee)&&Number.isFinite(a.lbm)){const T=a.lbm,_=.005*T,x=.01*T,C=_*7700/7,P=x*7700/7,N=a.tdee-C,A=a.tdee-P,ae=EE(Math.min(A,N),50),te=EE(Math.max(A,N),50);w.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${ae}-${te} kcal/day this week.`,action:null})}f<6&&w.push({key:"completeness",level:"warn",title:"Data completeness",message:`${f}/7 days logged this week  missing data may affect accuracy.`,action:null});let I=null;for(let T=t.length-1;T>=0;T--)if(Number.isFinite((D=t[T])==null?void 0:D.bfPct)){I=t[T].dateIso;break}if(!I)w.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const T=TE(o,I);T>=7?w.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):w.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-T} day(s).`,action:null})}if(Number.isFinite(m)&&Number.isFinite(b)){const T=1.6*b,_=2.2*b;if(m<T){const x=(T-m)/T*100;w.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${lt(x,0)}% below the muscle-retention range (${lt(m,0)}g/day vs ${lt(T,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else m>_?w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${lt(m,0)}g/day).`,action:null}):w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${lt(m,0)}g/day).`,action:null})}if(a&&Number.isFinite(h)&&Number.isFinite(a.weightChange)){const T=Math.max(0,-a.weightChange),_=h;(T<.2||_>.2&&T<_*.35)&&w.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${lt(T,1)}kg this week vs ${lt(_,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const v=Number(i==null?void 0:i.targetWeightKg);if(((i==null?void 0:i.type)==="cutting"||(i==null?void 0:i.type)==="bulking")&&Number.isFinite(v)&&t.length>=2){const T=t.find(C=>C.dateIso>=i.startDateIso)||t[0],_=Number(T==null?void 0:T.weight),x=Number((O=t[t.length-1])==null?void 0:O.weight);if(Number.isFinite(_)&&Number.isFinite(x)){if(i.type==="cutting"&&_>v){const C=_-x,P=_-v,N=Math.max(0,Math.min(1,C/P))*100;C>=1&&w.push({level:"good",title:"Progress milestone",message:`${lt(C,1)}kg down since cycle start  ${lt(N,0)}% to target.`,action:null})}if(i.type==="bulking"&&_<v){const C=x-_,P=v-_,N=Math.max(0,Math.min(1,C/P))*100;C>=1&&w.push({level:"good",title:"Progress milestone",message:`${lt(C,1)}kg up since cycle start  ${lt(N,0)}% to target.`,action:null})}}}return a||(w.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(E)&&w.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${lt(E,0)} kcal/day.`,action:null})),w},[t,e,n]);return r.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Insights"}),y.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),y.jsx("div",{className:"grid",style:{marginTop:12},children:r.map(s=>y.jsxs("div",{className:`card insight-card ${CB(s.level)}`,style:{gridColumn:"span 6"},children:[y.jsx("div",{className:"insight-title",children:s.title}),y.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:s.message}),s.action&&y.jsx("div",{className:"small",style:{marginTop:8},children:s.action})]},s.key))})]}):null}function PB(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function RB(t){if(!t||typeof t!="string")return"";const e=t.split("-");if(e.length!==3)return t;const[n,i,r]=e;return`${r}/${i}/${n}`}function Ai(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function vk({view:t="dashboard"}){const e=ko(),{user:n}=Ti(),{profile:i}=ay(),r=Array.isArray(i==null?void 0:i.liftNames)&&i.liftNames.length===3?i.liftNames:["Bench Press","Squat","Deadlift"],[s,o]=M.useState([]),a=Array.isArray(i==null?void 0:i.cycles)?i.cycles:[],[l,u]=M.useState(null);M.useEffect(()=>{if(u(null),!n)return;const D=uy(n.uid,O=>o(O),O=>u((O==null?void 0:O.message)||"Failed to load entries."));return()=>D()},[n]);const h=M.useMemo(()=>_F(),[]),d=M.useMemo(()=>vF(60),[]),f=M.useMemo(()=>d!=null&&d.length?[{id:"demo",type:"cutting",targetWeightKg:84,startDateIso:d[0].dateIso,endDateIso:null}]:[],[d]),m=n?i:h,E=n?s:d,b=n?a:f,w=M.useMemo(()=>{if(!(b!=null&&b.length))return null;const D=fh(),O=b.find(_=>!_.endDateIso);return O||b.find(_=>(_.startDateIso||"")<=D&&(_.endDateIso||"")>=D)||null},[b]);function I(){if(!n){e("/signup");return}e("/profile#cycles")}const v=M.useMemo(()=>Nx(E,m||{}),[E,m]),k=M.useMemo(()=>yF(v),[v]),R=M.useMemo(()=>{var de;if(!v.length)return null;const D=v[0],O=v[v.length-1],T=(de=O==null?void 0:O.wma)==null?void 0:de.weight,_=Number.isFinite(D.weight)&&Number.isFinite(O.weight)?O.weight-D.weight:null,x=O.calories,C=D.calories,P=Number.isFinite(x)&&Number.isFinite(C)?x-C:null,N=O.avgStrength,A=D.avgStrength,ae=Number.isFinite(N)&&Number.isFinite(A)?N-A:null;let te=null;for(let pe=v.length-1;pe>=0;pe--)if(Number.isFinite(v[pe].bfPct)){te=v[pe].bfPct;break}return{weightTrend:T,totalLost:_,calNow:x,calDelta:P,strengthNow:N,strengthDelta:ae,bf:te}},[v]);return y.jsxs(y.Fragment,{children:[!n&&y.jsxs("div",{className:"notice info",style:{marginTop:14},children:[y.jsx("b",{children:"Demo mode:"})," This dashboard is showing 60 days of realistic sample data. Log in to start tracking your own."]}),n&&(!(m!=null&&m.sex)||!(m!=null&&m.height))&&y.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",y.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),l&&y.jsx("div",{className:"notice error",style:{marginTop:14},children:l}),t==="insights"&&y.jsx(AB,{derived:v,weekly:k,profile:m||{},currentCycle:w}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Summary"}),y.jsx("button",{className:"btn",type:"button",onClick:I,style:{textTransform:"none"},children:w?`${PB(w.type)}${w.startDateIso?` since ${RB(w.startDateIso)}`:""}`:"Create new cycle"})]}),!R||!v.length?y.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",y.jsx("b",{children:"Entry"}),"."]}):y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),y.jsxs("div",{className:"big",children:[Ai(R.weightTrend,1)," kg"]}),y.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Total weight change"}),y.jsxs("div",{className:"big",children:[Ai(R.totalLost,1)," kg"]}),y.jsx("div",{className:"small",children:"Negative = loss"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Calories now / change from start"}),y.jsxs("div",{className:"big",children:[Ai(R.calNow,0)," kcal"]}),y.jsxs("div",{className:"small",children:[" ",Ai(R.calDelta,0)," kcal"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Average strength now"}),y.jsxs("div",{className:"big",children:[Ai(R.strengthNow,1)," kg"]}),y.jsxs("div",{className:"small",children:[" ",Ai(R.strengthDelta,1)," kg"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),y.jsx("div",{className:"big",children:R.bf===null?"":`${Ai(R.bf,1)}%`}),y.jsx("div",{className:"small",children:"Most recent measurement day"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),y.jsx("div",{className:"big",children:Number.isFinite(k.baselineTdee)?`${Ai(k.baselineTdee,0)} kcal`:""}),y.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),v.length>0&&y.jsxs("div",{className:"grid",style:{marginTop:14},children:[y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(TB,{derived:v})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(bB,{derived:v,liftNames:r})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(IB,{derived:v})})]}),v.length>=14&&y.jsx(kB,{weekly:k})]})}function NB(){return y.jsx(vk,{view:"insights"})}function DB(){const{user:t,login:e,authError:n,clearAuthError:i}=Ti(),r=ko(),s=wr(),[o,a]=M.useState(""),[l,u]=M.useState(""),[h,d]=M.useState(!1),[f,m]=M.useState(null);M.useEffect(()=>{i==null||i()},[]),M.useEffect(()=>{t&&r("/dashboard")},[t]);async function E(b){var w;b.preventDefault(),m(null),d(!0);try{await e(o.trim(),l);const I=((w=s.state)==null?void 0:w.from)||"/dashboard";r(I)}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Log in"}),y.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&y.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),y.jsxs("form",{onSubmit:E,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:o,onChange:b=>a(b.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:l,onChange:b=>u(b.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),y.jsx(fl,{className:"btn",to:"/reset-password",children:"Forgot password"}),y.jsx(fl,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function MB(){const{signup:t,authError:e,clearAuthError:n}=Ti(),i=ko(),[r,s]=M.useState(""),[o,a]=M.useState(""),[l,u]=M.useState(""),[h,d]=M.useState(!1),[f,m]=M.useState(null);M.useEffect(()=>{n==null||n()},[]);async function E(b){if(b.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Create account"}),y.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&y.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),y.jsxs("form",{onSubmit:E,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:r,onChange:b=>s(b.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:o,onChange:b=>a(b.target.value),type:"password",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm password"}),y.jsx("input",{value:l,onChange:b=>u(b.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),y.jsx(fl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function OB(){const{resetPassword:t,authError:e,clearAuthError:n}=Ti(),[i,r]=M.useState(""),[s,o]=M.useState(!1),[a,l]=M.useState(!1);M.useEffect(()=>{n==null||n()},[]);async function u(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Reset password"}),y.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&y.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),y.jsxs("form",{onSubmit:u,style:{marginTop:12},children:[y.jsx("div",{className:"row",children:y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),y.jsx(fl,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function LB(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function VB(t,e){const n=e.map(o=>o.map(LB).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function FB({entries:t,derived:e}){var s,o,a,l,u,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchLoadKg","benchReps","bench1rmKg","squatLoadKg","squatReps","squat1rmKg","deadliftLoadKg","deadliftReps","deadlift1rmKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.benchLoad,d.benchReps,d.bench,d.squatLoad,d.squatReps,d.squat,d.deadliftLoad,d.deadliftReps,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(u=f==null?void 0:f.wma)==null?void 0:u.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}function wk(t){return["cutting","bulking","maintaining","cut","bulk","maintain"].includes(t)}function Ek(t){return t==="cut"?"cutting":t==="bulk"?"bulking":t==="maintain"?"maintaining":t}function Tk(t){return Array.isArray(t)?t.filter(e=>e&&e.id).map(e=>({id:String(e.id),type:Ek(e.type),startDateIso:e.startDateIso||null,endDateIso:e.endDateIso||null,targetWeightKg:Number.isFinite(Number(e.targetWeightKg))?Number(e.targetWeightKg):null})).filter(e=>wk(e.type)).sort((e,n)=>String(e.startDateIso||"").localeCompare(String(n.startDateIso||""))):[]}function jB(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}async function UB(t,{type:e,startDateIso:n,targetWeightKg:i}){if(!t)throw new Error("Not authenticated");if(!wk(e))throw new Error("Invalid cycle type");if(e=Ek(e),!n)throw new Error("Start date is required");let r=null;if((e==="cutting"||e==="bulking")&&(r=Number(i),!Number.isFinite(r)||r<=0))throw new Error("Cycle target weight must be a positive number (kg).");const s=os(Cn,"users",t);await sx(Cn,async o=>{const a=await o.get(s);if(!a.exists())throw new Error("Profile not found. Please refresh and try again.");const l=a.data()||{},h=Tk(l.cycles).map(f=>({...f})),d=h.findIndex(f=>f.endDateIso===null);if(d>=0){const f=h[d];let m=aF(n,-1);f.startDateIso&&m<f.startDateIso&&(m=f.startDateIso),h[d]={...f,endDateIso:m}}h.push({id:jB(),type:e,startDateIso:n,endDateIso:null,targetWeightKg:r}),o.update(s,{cycles:h,updatedAt:Kl()})})}async function BB(t,e,n){if(!t)throw new Error("Not authenticated");if(!e)throw new Error("cycleId is required");if(!n)throw new Error("End date is required");const i=os(Cn,"users",t);await sx(Cn,async r=>{const s=await r.get(i);if(!s.exists())throw new Error("Profile not found. Please refresh and try again.");const o=s.data()||{},a=Tk(o.cycles),l=a.findIndex(h=>h.id===e);if(l<0)throw new Error("Cycle not found.");const u=a.map(h=>({...h}));u[l]={...u[l],endDateIso:n},r.update(i,{cycles:u,updatedAt:Kl()})})}const Cs=["Bench Press","Squat","Deadlift"];function Rf(t){return t==="cut"||t==="cutting"?"Cutting":t==="bulk"||t==="bulking"?"Bulking":t==="maintain"||t==="maintaining"?"Maintaining":String(t||"")}function zB(){const{user:t}=Ti(),e=wr(),{profile:n,updateProfile:i,loading:r,profileError:s}=ay(),[o,a]=M.useState(n.sex||""),[l,u]=M.useState(n.height||""),[h,d]=M.useState(!!n.triplemeasurements),f=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Cs,[m,E]=M.useState(f[0]),[b,w]=M.useState(f[1]),[I,v]=M.useState(f[2]),k=M.useMemo(()=>[m,b,I].map((ce,tt)=>String(ce||"").trim()||Cs[tt]),[m,b,I]),[R,D]=M.useState(!1),[O,T]=M.useState(null),[_,x]=M.useState(""),[C,P]=M.useState(""),[N,A]=M.useState(""),ae=M.useMemo(()=>Array.isArray(n.cycles)?[...n.cycles].sort((q,ce)=>String(ce.startDateIso||"").localeCompare(String(q.startDateIso||""))):[],[n.cycles]),[te,de]=M.useState("cutting"),[pe,$]=M.useState(fh()),[Q,X]=M.useState("");M.useEffect(()=>{te==="maintaining"&&X("")},[te]);const U=M.useMemo(()=>ae.find(q=>!q.endDateIso)||null,[ae]),[F,H]=M.useState([]),[J,le]=M.useState(!1);M.useEffect(()=>{a(n.sex||""),u(n.height||""),d(!!n.triplemeasurements);const q=Array.isArray(n.liftNames)&&n.liftNames.length===3?n.liftNames:Cs;E(q[0]),w(q[1]),v(q[2])},[n.sex,n.height,n.triplemeasurements,n.liftNames]),M.useEffect(()=>{(e==null?void 0:e.hash)==="#cycles"&&setTimeout(()=>{var q;(q=document.getElementById("cycles"))==null||q.scrollIntoView({behavior:"smooth",block:"start"})},50)},[e==null?void 0:e.hash]);async function Z(q){q.preventDefault(),T(null),D(!0);try{const ce=Number(l);if(!o)throw new Error("Sex is required.");if(!Number.isFinite(ce)||ce<=0)throw new Error("Height must be a positive number (cm).");await i({sex:o,height:ce,triplemeasurements:!!h,liftNames:k}),T({type:"success",text:"Profile saved."})}catch(ce){T({type:"error",text:(ce==null?void 0:ce.message)||"Failed to save profile."})}finally{D(!1)}}async function xe(q){var ce;q.preventDefault(),T(null),D(!0);try{if(!te)throw new Error("Pick a cycle type.");if(!pe)throw new Error("Pick a start date.");const Lt=(ce=[...await ot()||[]].reverse().find(rn=>Number.isFinite(Number(rn==null?void 0:rn.weight))))==null?void 0:ce.weight;if(te==="cutting"||te==="bulking"){const rn=Number(Q);if(!Number.isFinite(rn)||rn<=0)throw new Error("Enter a valid target weight (kg).");if(Number.isFinite(Number(Lt))){if(te==="cutting"&&rn>=Number(Lt))throw new Error("For a cutting cycle, target weight must be lower than your current weight.");if(te==="bulking"&&rn<=Number(Lt))throw new Error("For a bulking cycle, target weight must be higher than your current weight.")}}const bi=te==="cutting"||te==="bulking"?Number(Q):null;await UB(t.uid,{type:te,startDateIso:pe,targetWeightKg:bi}),X(""),T({type:"success",text:`Cycle started: ${Rf(te)}.`})}catch(tt){T({type:"error",text:(tt==null?void 0:tt.message)||"Failed to start cycle."})}finally{D(!1)}}async function nn(q){T(null),D(!0);try{await BB(t.uid,q,fh()),T({type:"success",text:"Cycle ended."})}catch(ce){T({type:"error",text:(ce==null?void 0:ce.message)||"Failed to end cycle."})}finally{D(!1)}}async function br(q){if(q.preventDefault(),T(null),!!(t!=null&&t.email)){if(C!==N){T({type:"error",text:"New passwords do not match."});return}D(!0);try{const ce=ps.credential(t.email,_);await oD(t,ce),await cD(t,C),x(""),P(""),A(""),T({type:"success",text:"Password updated."})}catch(ce){T({type:"error",text:(ce==null?void 0:ce.message)||"Failed to update password."})}finally{D(!1)}}}async function ot(){return J?F:new Promise((q,ce)=>{const tt=uy(t.uid,Lt=>{H(Lt),le(!0),tt(),q(Lt)},Lt=>{ce(Lt)})})}async function Ot(){T(null),D(!0);try{await ot();const q=Nx(F,{...n,sex:o,height:Number(l),triplemeasurements:!!h}),ce=FB({entries:F,derived:q}),tt=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;VB(tt,ce),T({type:"success",text:"CSV downloaded."})}catch(q){T({type:"error",text:(q==null?void 0:q.message)||"Failed to export CSV."})}finally{D(!1)}}return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Profile & Settings"}),y.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),s&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:s}),O&&y.jsx("div",{className:`notice ${O.type==="error"?"error":"success"}`,style:{marginTop:12},children:O.text}),y.jsxs("form",{onSubmit:Z,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Sex (required for Navy BF%)"}),y.jsxs("select",{value:o,onChange:q=>a(q.target.value),required:!0,children:[y.jsx("option",{value:"",children:"Select"}),y.jsx("option",{value:"male",children:"Male"}),y.jsx("option",{value:"female",children:"Female"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Height (cm)"}),y.jsx("input",{inputMode:"numeric",value:l,onChange:q=>u(q.target.value),placeholder:"e.g. 175",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Triple measurements mode"}),y.jsxs("select",{value:h?"1":"0",onChange:q=>d(q.target.value==="1"),children:[y.jsx("option",{value:"0",children:"Off (single value per site)"}),y.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]})]}),y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 1 name"}),y.jsx("input",{value:m,onChange:q=>E(q.target.value),placeholder:Cs[0]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 2 name"}),y.jsx("input",{value:b,onChange:q=>w(q.target.value),placeholder:Cs[1]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 3 name"}),y.jsx("input",{value:I,onChange:q=>v(q.target.value),placeholder:Cs[2]})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:R||r,children:R?"Saving":"Save profile"}),y.jsx("button",{className:"btn",type:"button",onClick:Ot,disabled:R,children:"Export CSV"})]})]})]}),y.jsxs("div",{className:"panel",id:"cycles",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Cycles"}),y.jsx("div",{className:"muted",children:"Cutting / Bulking / Maintaining  track your phases over time."})]}),y.jsxs("form",{onSubmit:xe,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Cycle type"}),y.jsxs("select",{value:te,onChange:q=>de(q.target.value),children:[y.jsx("option",{value:"cutting",children:"Cutting"}),y.jsx("option",{value:"bulking",children:"Bulking"}),y.jsx("option",{value:"maintaining",children:"Maintaining"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Start date"}),y.jsx("input",{type:"date",value:pe,onChange:q=>$(q.target.value)})]}),(te==="cutting"||te==="bulking")&&y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Target weight (kg)"}),y.jsx("input",{inputMode:"decimal",value:Q,onChange:q=>X(q.target.value),placeholder:"e.g. 82.0"})]}),y.jsxs("div",{className:"field",style:{minWidth:220},children:[y.jsx("label",{children:"Current"}),y.jsx("input",{value:U?`${Rf(U.type)} (since ${U.startDateIso})${(U.type==="cutting"||U.type==="bulking")&&Number.isFinite(Number(U.targetWeightKg))?`  target ${Number(U.targetWeightKg).toFixed(1)}kg`:""}`:"No active cycle",readOnly:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:R,children:U?"Start new cycle (ends current)":"Start cycle"}),U&&y.jsx("button",{className:"btn",type:"button",onClick:()=>nn(U.id),disabled:R,children:"End current cycle (today)"})]})]}),y.jsx("hr",{className:"sep"}),y.jsx("div",{className:"table-wrap",children:y.jsxs("table",{className:"table",style:{minWidth:760},children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Type"}),y.jsx("th",{children:"Target (kg)"}),y.jsx("th",{children:"Began"}),y.jsx("th",{children:"Ended"}),y.jsx("th",{children:"Status"}),y.jsx("th",{children:"Actions"})]})}),y.jsx("tbody",{children:ae.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:6,className:"muted",children:"No cycles yet. Start one above."})}):ae.map(q=>{const ce=!q.endDateIso;return y.jsxs("tr",{children:[y.jsx("td",{children:y.jsx("b",{children:Rf(q.type)})}),y.jsx("td",{children:(q.type==="cutting"||q.type==="bulking")&&Number.isFinite(Number(q.targetWeightKg))?Number(q.targetWeightKg).toFixed(1):""}),y.jsx("td",{children:q.startDateIso||""}),y.jsx("td",{children:q.endDateIso||""}),y.jsx("td",{children:ce?y.jsx("span",{className:"text-green strong",children:"Active"}):y.jsx("span",{className:"muted",children:"Ended"})}),y.jsx("td",{children:ce?y.jsx("button",{className:"btn",type:"button",onClick:()=>nn(q.id),disabled:R,children:"End today"}):y.jsx("span",{className:"muted",children:""})})]},q.id)})})]})})]}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Change Password"}),y.jsx("div",{className:"muted",children:"Re-auth required."})]}),y.jsxs("form",{onSubmit:br,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Current password"}),y.jsx("input",{type:"password",value:_,onChange:q=>x(q.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"New password"}),y.jsx("input",{type:"password",value:C,onChange:q=>P(q.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm new password"}),y.jsx("input",{type:"password",value:N,onChange:q=>A(q.target.value),required:!0})]})]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",disabled:R,children:"Update password"})})]})]})]})}function Ct(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function $B({sex:t,tripleEnabled:e,liftNames:n,onSubmit:i,busy:r}){const s=String(t||"").toLowerCase()==="female",[o,a]=M.useState(fh()),[l,u]=M.useState(""),[h,d]=M.useState(""),[f,m]=M.useState(""),[E,b]=M.useState(""),[w,I]=M.useState(""),[v,k]=M.useState(""),[R,D]=M.useState(""),[O,T]=M.useState(""),[_,x]=M.useState(""),[C,P]=M.useState(""),[N,A]=M.useState(""),[ae,te]=M.useState(""),[de,pe]=M.useState(""),[$,Q]=M.useState(""),[X,U]=M.useState(""),[F,H]=M.useState(""),[J,le]=M.useState(""),[Z,xe]=M.useState(""),[nn,br]=M.useState(""),[ot,Ot]=M.useState(""),[q,ce]=M.useState(""),[tt,Lt]=M.useState(""),bi=Array.isArray(n)&&n.length===3?n:["Bench Press","Squat","Deadlift"],rn=M.useMemo(()=>{const ee=Rx({protein:Ct(h)||0,carbs:Ct(f)||0,fats:Ct(E)||0});return Number.isFinite(ee)?Math.round(ee):0},[h,f,E]),Ql=M.useMemo(()=>Lr(Ct(w),Ct(v)),[w,v]),Mo=M.useMemo(()=>Lr(Ct(R),Ct(O)),[R,O]),_s=M.useMemo(()=>Lr(Ct(_),Ct(C)),[_,C]),Oo=()=>o&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f))&&Number.isFinite(Number(E));async function gd(ee){if(ee.preventDefault(),!Oo())return;const vs=Lr(Ct(w),Ct(v)),Lo=Lr(Ct(R),Ct(O)),Qe=Lr(Ct(_),Ct(C)),be={dateIso:o,weight:Number(l),protein:Number(h),carbs:Number(f),fats:Number(E),benchLoad:w===""?null:Number(w),benchReps:v===""?null:Number(v),squatLoad:R===""?null:Number(R),squatReps:O===""?null:Number(O),deadliftLoad:_===""?null:Number(_),deadliftReps:C===""?null:Number(C),bench:Number.isFinite(vs)?Math.round(vs*10)/10:null,squat:Number.isFinite(Lo)?Math.round(Lo*10)/10:null,deadlift:Number.isFinite(Qe)?Math.round(Qe*10)/10:null};e?(be.neck1=$===""?null:Number($),be.neck2=X===""?null:Number(X),be.neck3=F===""?null:Number(F),be.waist1=J===""?null:Number(J),be.waist2=Z===""?null:Number(Z),be.waist3=nn===""?null:Number(nn),be.hip1=s?ot===""?null:Number(ot):null,be.hip2=s?q===""?null:Number(q):null,be.hip3=s?tt===""?null:Number(tt):null):(be.neck=N===""?null:Number(N),be.waist=ae===""?null:Number(ae),be.hip=s?de===""?null:Number(de):null),await i(be)}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Daily Entry"}),y.jsxs("div",{className:"muted",children:["Calories preview: ",y.jsx("b",{children:rn})," kcal"]})]}),y.jsxs("form",{onSubmit:gd,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Date"}),y.jsx("input",{type:"date",value:o,onChange:ee=>a(ee.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Weight (kg)"}),y.jsx("input",{inputMode:"decimal",value:l,onChange:ee=>u(ee.target.value),placeholder:"e.g. 85.2",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Protein (g)"}),y.jsx("input",{inputMode:"numeric",value:h,onChange:ee=>d(ee.target.value),placeholder:"e.g. 180"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Carbs (g)"}),y.jsx("input",{inputMode:"numeric",value:f,onChange:ee=>m(ee.target.value),placeholder:"e.g. 220",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Fats (g)"}),y.jsx("input",{inputMode:"numeric",value:E,onChange:ee=>b(ee.target.value),placeholder:"e.g. 70",required:!0})]})]}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[bi[0]," ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsxs("div",{className:"inline2",children:[y.jsx("input",{inputMode:"decimal",value:w,onChange:ee=>I(ee.target.value),placeholder:"Load (kg)"}),y.jsx("input",{inputMode:"numeric",value:v,onChange:ee=>k(ee.target.value),placeholder:"Reps"})]}),y.jsxs("div",{className:"muted small",children:["Est. 1RM: ",y.jsx("b",{children:Number.isFinite(Ql)?Math.round(Ql*10)/10:""})," kg"]})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[bi[1]," ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsxs("div",{className:"inline2",children:[y.jsx("input",{inputMode:"decimal",value:R,onChange:ee=>D(ee.target.value),placeholder:"Load (kg)"}),y.jsx("input",{inputMode:"numeric",value:O,onChange:ee=>T(ee.target.value),placeholder:"Reps"})]}),y.jsxs("div",{className:"muted small",children:["Est. 1RM: ",y.jsx("b",{children:Number.isFinite(Mo)?Math.round(Mo*10)/10:""})," kg"]})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[bi[2]," ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsxs("div",{className:"inline2",children:[y.jsx("input",{inputMode:"decimal",value:_,onChange:ee=>x(ee.target.value),placeholder:"Load (kg)"}),y.jsx("input",{inputMode:"numeric",value:C,onChange:ee=>P(ee.target.value),placeholder:"Reps"})]}),y.jsxs("div",{className:"muted small",children:["Est. 1RM: ",y.jsx("b",{children:Number.isFinite(_s)?Math.round(_s*10)/10:""})," kg"]})]})]}),y.jsx("div",{className:"muted small",style:{marginTop:6},children:"Enter both load + reps to calculate 1RM. If left blank, strength trends will carry forward the last known value."}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"notice info",children:[y.jsx("b",{children:"Navy measurements (weekly)"}),y.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",s?"":" Male profile: Neck + Waist only.",e?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),y.jsx("div",{style:{height:10}}),e?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:$,onChange:ee=>Q(ee.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:X,onChange:ee=>U(ee.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:F,onChange:ee=>H(ee.target.value)})]})]}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:J,onChange:ee=>le(ee.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:Z,onChange:ee=>xe(ee.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:nn,onChange:ee=>br(ee.target.value)})]})]}),s?y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:ot,onChange:ee=>Ot(ee.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:q,onChange:ee=>ce(ee.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:tt,onChange:ee=>Lt(ee.target.value)})]})]}):null]}):y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck (cm)"}),y.jsx("input",{inputMode:"decimal",value:N,onChange:ee=>A(ee.target.value),placeholder:"optional"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist (cm)"}),y.jsx("input",{inputMode:"decimal",value:ae,onChange:ee=>te(ee.target.value),placeholder:"optional"})]}),s?y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip (cm)"}),y.jsx("input",{inputMode:"decimal",value:de,onChange:ee=>pe(ee.target.value),placeholder:"optional"})]}):null]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",type:"submit",disabled:!Oo()||r,children:r?"Saving":"Add / Update Entry"})})]})]})}function WB(t,e){const n=M.useContext(Gn),i=n==null?void 0:n.navigator;M.useEffect(()=>{if(!t||!i||typeof i.block!="function")return;const r=i.block(s=>{window.confirm(e)&&(r(),s.retry())});return r},[i,t,e]),M.useEffect(()=>{if(!t)return;const r=s=>(s.preventDefault(),s.returnValue=e,e);return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[t,e])}function HB(t){return t==null?"":String(t)}function qB(t){if(t===""||t===null||t===void 0)return null;const e=Number(t);return Number.isFinite(e)?e:null}function Gu(t,e){return`${t}::${e}`}function KB({sex:t,userId:e,entries:n,tripleEnabled:i,liftNames:r}){const[s,o]=M.useState(!1),[a,l]=M.useState(null),[u,h]=M.useState(!1),[d,f]=M.useState({}),[m,E]=M.useState({}),[b,w]=M.useState([]),[I,v]=M.useState([]),k=M.useRef({}),R=String(t||"").toLowerCase()==="female",D=Array.isArray(r)&&r.length===3?r:["Bench Press","Squat","Deadlift"],O=M.useMemo(()=>{const U=new Map;for(const F of n||[])U.set(F.dateIso,F);return U},[n]);M.useEffect(()=>{const U=new Set((n||[]).map(F=>F.dateIso));f(F=>{const H={...F};let J=!1;for(const le of Object.keys(H)){const[Z]=le.split("::");U.has(Z)||(delete H[le],J=!0)}return J?H:F}),E(F=>{const H={...F};let J=!1;for(const le of Object.keys(H)){const[Z]=le.split("::");U.has(Z)||(delete H[le],J=!0)}return J?H:F})},[n]);const T=M.useMemo(()=>{const U=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"benchLoad",label:`${D[0]} Load`},{key:"benchReps",label:`${D[0]} Reps`},{key:"squatLoad",label:`${D[1]} Load`},{key:"squatReps",label:`${D[1]} Reps`},{key:"deadliftLoad",label:`${D[2]} Load`},{key:"deadliftReps",label:`${D[2]} Reps`}];return i?(U.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"}),R&&U.push({key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"})):(U.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"}),R&&U.push({key:"hip",label:"Hip"})),U.push({key:"_actions",label:"Actions",readOnly:!0}),U},[i,R,D]);function _(U,F){const H=O.get(U);return HB(H==null?void 0:H[F])}function x(U,F){const H=Gu(U,F);return Object.prototype.hasOwnProperty.call(d,H)?d[H]:_(U,F)}function C(U,F,H){if(!u)return;const J=Gu(U,F),le=_(U,F);f(Z=>{const xe={...Z};return H===le?Object.prototype.hasOwnProperty.call(xe,J)&&delete xe[J]:xe[J]=H,xe}),E(Z=>{const xe={...Z};return H===le?Object.prototype.hasOwnProperty.call(xe,J)&&delete xe[J]:xe[J]=!0,xe})}function P(U,F){const H=Gu(U,F);k.current[H]=x(U,F)}function N(U,F){const H=Gu(U,F),J=k.current[H];delete k.current[H];const le=x(U,F);J!==void 0&&J!==le&&(w(Z=>[...Z,{ck:H,dateIso:U,key:F,prev:J,next:le}]),v([]))}function A(U,F){C(U.dateIso,U.key,F)}function ae(){u&&(l(null),w(U=>{if(U.length===0)return U;const F=[...U],H=F.pop();return A(H,H.prev),v(J=>[...J,H]),F}))}function te(){u&&(l(null),v(U=>{if(U.length===0)return U;const F=[...U],H=F.pop();return A(H,H.next),w(J=>[...J,H]),F}))}function de(U,F){const H=Lr(U,F);return Number.isFinite(H)?Math.round(H*10)/10:null}async function pe(){const U=Object.keys(m||{});if(U.length!==0){l(null),o(!0);try{const F={};for(const J of U){const[le,Z]=J.split("::"),xe=x(le,Z),nn=qB(xe);F[le]||(F[le]={}),F[le][Z]=nn}for(const J of Object.keys(F)){const le=O.get(J)||{},Z=F[J],xe=Object.prototype.hasOwnProperty.call(Z,"benchLoad")||Object.prototype.hasOwnProperty.call(Z,"benchReps"),nn=Object.prototype.hasOwnProperty.call(Z,"squatLoad")||Object.prototype.hasOwnProperty.call(Z,"squatReps"),br=Object.prototype.hasOwnProperty.call(Z,"deadliftLoad")||Object.prototype.hasOwnProperty.call(Z,"deadliftReps");if(xe){const ot=Object.prototype.hasOwnProperty.call(Z,"benchLoad")?Z.benchLoad:le.benchLoad??null,Ot=Object.prototype.hasOwnProperty.call(Z,"benchReps")?Z.benchReps:le.benchReps??null;Z.bench=de(ot,Ot)}if(nn){const ot=Object.prototype.hasOwnProperty.call(Z,"squatLoad")?Z.squatLoad:le.squatLoad??null,Ot=Object.prototype.hasOwnProperty.call(Z,"squatReps")?Z.squatReps:le.squatReps??null;Z.squat=de(ot,Ot)}if(br){const ot=Object.prototype.hasOwnProperty.call(Z,"deadliftLoad")?Z.deadliftLoad:le.deadliftLoad??null,Ot=Object.prototype.hasOwnProperty.call(Z,"deadliftReps")?Z.deadliftReps:le.deadliftReps??null;Z.deadlift=de(ot,Ot)}}const H=Object.keys(F).map(J=>({dateIso:J,patch:F[J]}));await cF(e,H),f({}),E({}),w([]),v([]),l({type:"success",text:"Saved changes."}),h(!1)}catch(F){l({type:"error",text:(F==null?void 0:F.message)||"Failed to save changes."})}finally{o(!1)}}}async function $(U){if(confirm(`Delete entry for ${U}?`)){l(null),o(!0);try{await hF(e,U),f(F=>{const H={...F};for(const J of Object.keys(H))J.startsWith(`${U}::`)&&delete H[J];return H}),E(F=>{const H={...F};for(const J of Object.keys(H))J.startsWith(`${U}::`)&&delete H[J];return H}),l({type:"success",text:"Deleted."})}catch(F){l({type:"error",text:(F==null?void 0:F.message)||"Failed to delete."})}finally{o(!1)}}}const Q=Object.keys(m||{}).length>0;WB(u&&Q,"You have unsaved changes. Leave without saving?");function X(){h(!1),f({}),E({}),w([]),v([]),l(null)}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"All Entries"}),y.jsxs("div",{className:"table-actions",children:[y.jsx("button",{className:"btn icon small",onClick:ae,disabled:!u||b.length===0||s,title:"Undo","aria-label":"Undo",children:""}),y.jsx("button",{className:"btn icon small",onClick:te,disabled:!u||I.length===0||s,title:"Redo","aria-label":"Redo",children:""}),u?Q?y.jsx("button",{className:"btn primary small",onClick:pe,disabled:!Q||s,children:s?"saving":"save"}):y.jsx("button",{className:"btn primary small",onClick:X,disabled:s,children:"cancel"}):y.jsx("button",{className:"btn primary small",onClick:()=>h(!0),disabled:s,children:"edit"})]})]}),a&&y.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:12},children:a.text}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsx("tr",{children:T.map(U=>y.jsx("th",{children:U.label},U.key))})}),y.jsx("tbody",{children:n.map(U=>y.jsx("tr",{children:T.map(F=>F.key==="_actions"?y.jsx("td",{children:y.jsx("button",{className:"btn danger",onClick:()=>$(U.dateIso),disabled:s,children:"Delete"})},F.key):F.readOnly?y.jsx("td",{children:U[F.key]},F.key):y.jsx("td",{children:u?y.jsx("input",{value:x(U.dateIso,F.key),onChange:H=>C(U.dateIso,F.key,H.target.value),onFocus:()=>P(U.dateIso,F.key),onBlur:()=>N(U.dateIso,F.key),inputMode:"decimal",disabled:s}):y.jsx("span",{children:x(U.dateIso,F.key)})},F.key))},U.dateIso))})]})})]})}function GB(){const{user:t}=Ti(),{profile:e}=ay(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=M.useState([]),[s,o]=M.useState(!1),[a,l]=M.useState(null);M.useEffect(()=>{if(!t)return;const f=uy(t.uid,m=>r(m),m=>l({type:"error",text:(m==null?void 0:m.message)||"Failed to load entries."}));return()=>f()},[t]);const u=M.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]),h=((e==null?void 0:e.sex)||"male").toLowerCase();async function d(f){l(null),o(!0);try{await uF(t.uid,f),l({type:"success",text:"Entry saved."})}catch(m){l({type:"error",text:(m==null?void 0:m.message)||"Failed to save entry."})}finally{o(!1)}}return y.jsxs(y.Fragment,{children:[a&&y.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),y.jsx($B,{sex:h,tripleEnabled:u,liftNames:n,onSubmit:d,busy:s}),y.jsx(KB,{sex:h,userId:t.uid,entries:i,tripleEnabled:u,liftNames:n})]})}function QB(){return y.jsxs(y.Fragment,{children:[y.jsx(iF,{}),y.jsx("div",{className:"app-shell",children:y.jsxs(mP,{children:[y.jsx(Dn,{path:"/",element:y.jsx(kp,{to:"/dashboard",replace:!0})}),y.jsx(Dn,{path:"/dashboard",element:y.jsx(vk,{})}),y.jsx(Dn,{path:"/insights",element:y.jsx(NB,{})}),y.jsx(Dn,{path:"/login",element:y.jsx(DB,{})}),y.jsx(Dn,{path:"/signup",element:y.jsx(MB,{})}),y.jsx(Dn,{path:"/reset-password",element:y.jsx(OB,{})}),y.jsx(Dn,{path:"/profile",element:y.jsx(aw,{children:y.jsx(zB,{})})}),y.jsx(Dn,{path:"/entry",element:y.jsx(aw,{children:y.jsx(GB,{})})}),y.jsx(Dn,{path:"*",element:y.jsx(kp,{to:"/dashboard",replace:!0})})]})})]})}class YB extends pm.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?y.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[y.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),y.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),y.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),y.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}Nf.createRoot(document.getElementById("root")).render(y.jsx(pm.StrictMode,{children:y.jsx(bP,{basename:"/Body-Recomp-Tracker/",children:y.jsx(nF,{children:y.jsx(oF,{children:y.jsx(YB,{children:y.jsx(QB,{})})})})})}));
